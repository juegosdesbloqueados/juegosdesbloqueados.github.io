"undefined"!=typeof document&&(
/*! FPSMeter 0.3.1 - 9th May 2013 | https://github.com/Darsain/fpsmeter */
function(t,e){function s(t,e){for(var n in e)try{t.style[n]=e[n]}catch(t){}return t}function H(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function R(t,e){if("array"!==H(e))return-1;if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function I(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(H(e[1][t])){case"object":e[0][t]=I({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?I.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function N(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function S(t,e,n,o){t.addEventListener?t[o?"removeEventListener":"addEventListener"](e,n,!1):t.attachEvent&&t[o?"detachEvent":"attachEvent"]("on"+e,n)}function D(t,e){function g(t,e,n,o){return h[0|t][Math.round(Math.min((e-n)/(o-n)*M,M))]}function r(){F.legend.fps!==q&&(F.legend.fps=q,F.legend[c]=q?"FPS":"ms"),b=q?v.fps:v.duration,F.count[c]=999<b?"999+":b.toFixed(99<b?0:O.decimals)}function m(){for(l=n(),P<l-O.threshold&&(v.fps-=v.fps/Math.max(1,60*O.smoothing/O.interval),v.duration=1e3/v.fps),w=O.history;w--;)T[w]=0===w?v.fps:T[w-1],j[w]=0===w?v.duration:j[w-1];if(r(),O.heat){if(z.length)for(w=z.length;w--;)z[w].el.style[o[z[w].name].heatOn]=q?g(o[z[w].name].heatmap,v.fps,0,O.maxFps):g(o[z[w].name].heatmap,v.duration,O.threshold,0);if(F.graph&&o.column.heatOn)for(w=C.length;w--;)C[w].style[o.column.heatOn]=q?g(o.column.heatmap,T[w],0,O.maxFps):g(o.column.heatmap,j[w],O.threshold,0)}if(F.graph)for(y=0;y<O.history;y++)C[y].style.height=(q?T[y]?Math.round(x/O.maxFps*Math.min(T[y],O.maxFps)):0:j[y]?Math.round(x/O.threshold*Math.min(j[y],O.threshold)):0)+"px"}function k(){20>O.interval?(p=i(k),m()):(p=setTimeout(k,O.interval),f=i(m))}function G(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),v.toggle()}function U(){O.toggleOn&&S(F.container,O.toggleOn,G,1),t.removeChild(F.container)}function V(){if(F.container&&U(),o=D.theme[O.theme],!(h=o.compiledHeatmaps||[]).length&&o.heatmaps.length){for(y=0;y<o.heatmaps.length;y++)for(h[y]=[],w=0;w<=M;w++){var e,n=h[y],a=w;e=.33/M*w;var i=o.heatmaps[y].saturation,l=o.heatmaps[y].lightness,p=void 0,c=void 0,u=void 0,d=u=void 0,f=p=c=void 0;f=void 0;0===(u=.5>=l?l*(1+i):l+i-l*i)?e="#000":(c=(u-(d=2*l-u))/u,f=(e*=6)-(p=Math.floor(e)),f*=u*c,0===p||6===p?(p=u,c=d+f,u=d):1===p?(p=u-f,c=u,u=d):2===p?(p=d,c=u,u=d+f):3===p?(p=d,c=u-f):4===p?(p=d+f,c=d):(p=u,c=d,u-=f),e="#"+N(p)+N(c)+N(u)),n[a]=e}o.compiledHeatmaps=h}for(var b in F.container=s(document.createElement("div"),o.container),F.count=F.container.appendChild(s(document.createElement("div"),o.count)),F.legend=F.container.appendChild(s(document.createElement("div"),o.legend)),F.graph=O.graph?F.container.appendChild(s(document.createElement("div"),o.graph)):0,z.length=0,F)F[b]&&o[b].heatOn&&z.push({name:b,el:F[b]});if(C.length=0,F.graph)for(F.graph.style.width=O.history*o.column.width+(O.history-1)*o.column.spacing+"px",w=0;w<O.history;w++)C[w]=F.graph.appendChild(s(document.createElement("div"),o.column)),C[w].style.position="absolute",C[w].style.bottom=0,C[w].style.right=w*o.column.width+w*o.column.spacing+"px",C[w].style.width=o.column.width+"px",C[w].style.height="0px";s(F.container,O),r(),t.appendChild(F.container),F.graph&&(x=F.graph.clientHeight),O.toggleOn&&("click"===O.toggleOn&&(F.container.style.cursor="pointer"),S(F.container,O.toggleOn,G))}"object"===H(t)&&undefined===t.nodeType&&(e=t,t=document.body),t||(t=document.body);var o,h,l,p,f,x,b,w,y,v=this,O=I({},D.defaults,e||{}),F={},C=[],M=100,z=[],E=O.threshold,A=0,P=n()-E,T=[],j=[],q="fps"===O.show;v.options=O,v.fps=0,v.duration=0,v.isPaused=0,v.tickStart=function(){A=n()},v.tick=function(){l=n(),E+=(l-P-E)/O.smoothing,v.fps=1e3/E,v.duration=A<P?E:l-A,P=l},v.pause=function(){return p&&(v.isPaused=1,clearTimeout(p),a(p),a(f),p=f=0),v},v.resume=function(){return p||(v.isPaused=0,k()),v},v.set=function(t,e){return O[t]=e,q="fps"===O.show,-1!==R(t,u)&&V(),-1!==R(t,d)&&s(F.container,O),v},v.showDuration=function(){return v.set("show","ms"),v},v.showFps=function(){return v.set("show","fps"),v},v.toggle=function(){return v.set("show",q?"ms":"fps"),v},v.hide=function(){return v.pause(),F.container.style.display="none",v},v.show=function(){return v.resume(),F.container.style.display="block",v},v.destroy=function(){v.pause(),U(),v.tick=v.tickStart=function(){}},V(),k()}var n,o=t.performance;n=o&&(o.now||o.webkitNow)?o[o.now?"now":"webkitNow"].bind(o):function(){return+new Date};for(var a=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,i=t.requestAnimationFrame,h=0,l=0,p=(o=["moz","webkit","o"]).length;l<p&&!a;++l)i=(a=t[o[l]+"CancelAnimationFrame"]||t[o[l]+"CancelRequestAnimationFrame"])&&t[o[l]+"RequestAnimationFrame"];a||(i=function(e){var o=n(),a=Math.max(0,16-(o-h));return h=o+a,t.setTimeout((function(){e(o+a)}),a)},a=function(t){clearTimeout(t)});var c="string"===H(document.createElement("div").textContent)?"textContent":"innerText";D.extend=I,window.FPSMeter=D,D.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var u=["toggleOn","theme","heat","graph","history"],d="position zIndex left top right bottom margin".split(" ")}(window),function(t,e){e.theme={};var n=e.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};e.theme.dark=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),e.theme.light=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),e.theme.colorful=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),e.theme.transparent=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter));var Fps=pc.createScript("fps");Fps.prototype.initialize=function(){this.fps=new FPSMeter({heat:!0,graph:!0})},Fps.prototype.update=function(t){this.fps.tick()};!function(t){"use strict";class APIManager{static get_rewardedAdsSupported(){return APIManager.get_famobi().hasFeature("rewarded")}static get_famobi(){return window.famobi}static get_famobi_analytics(){return window.famobi_analytics}static get_levelName(){return"level"+GameSettings.get_curLevel()}static Init(){APIManager.inited||(APIManager.inited=!0,window.famobi_onPauseRequested=GameController.pauseGame,window.famobi_onResumeRequested=GameController.resumeGame)}static trackEvent(t,e){return APIManager.get_famobi_analytics().trackEvent(t,e)}static onFirstTimeGameStarted(){}static onLevelStart(t){var e=APIManager.trackEvent(APIManager.wasLevelRestart?"EVENT_LEVELRESTART":"EVENT_LEVELSTART",{levelName:APIManager.get_levelName()});Promise.all([e]).then((function(e){null!=t&&t()})),APIManager.wasLevelRestart=!1}static onLevelRestart(t){APIManager.wasLevelRestart=!0;var e=APIManager.trackEvent("EVENT_LEVELFAIL",{levelName:APIManager.get_levelName(),reason:"dead"}),i=APIManager.get_famobi().showInterstitialAd();Promise.all([e,i]).then((function(e){null!=t&&t()}))}static onLevelSuccess(t){var e=APIManager.trackEvent("EVENT_LEVELSUCCESS",{levelName:APIManager.get_levelName()}),i=APIManager.get_famobi().showInterstitialAd();Promise.all([e,i]).then((function(e){null!=t&&t()}))}static onLevelFail(t,e){null==e&&(e="dead");var i=APIManager.trackEvent("EVENT_LEVELFAIL",{levelName:APIManager.get_levelName(),reason:e}),n=APIManager.get_famobi().showInterstitialAd();Promise.all([i,n]).then((function(e){null!=t&&t()}))}static onLevelEnd(t,e){null==e&&(e="success"),APIManager.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:e}).then((function(e){null!=t&&t()}))}static onPause(t){var e=APIManager.trackEvent("EVENT_PAUSE",null);Promise.all([e]).then((function(e){null!=t&&t()}))}static onResume(t){var e=APIManager.trackEvent("EVENT_RESUME",null);Promise.all([e]).then((function(e){null!=t&&t()}))}static IsRewardedAdReady(){return APIManager.get_famobi().hasRewardedAd()}static ShowRewardedAd(t,e,i){return null==i&&(i=""),!(!APIManager.get_rewardedAdsSupported()||!APIManager.IsRewardedAdReady())&&(APIManager.get_famobi().rewardedAd((function(i){i.rewardGranted?null!=t&&t():null!=e&&e()})),!0)}}APIManager.__name__="APIManager",APIManager.__properties__={get_levelName:"get_levelName",get_famobi_analytics:"get_famobi_analytics",get_famobi:"get_famobi",get_rewardedAdsSupported:"get_rewardedAdsSupported"};class AnimHelper{static addAnimStateEvent(t,e,i,n,a,r,s){null==n&&(n=0);for(var o=0,l=t.layers;o<l.length;){var c=l[o];if(++o,Object.prototype.hasOwnProperty.call(c._controller._states,e)){var h=Reflect.field(c._controller._states,e),u=h.animations[0]._animTrack._animEvents._events;null==u&&(u=[]);for(var d=0;d<100&&null!=u[d];)++d;for(var m=u,_=!1,p=0;p<m.length;){var g=m[p];if(++p,g.name==i&&g.time==n&&g.number==r&&g.string==s){_=!0;break}}_||u.push({name:i,time:n,number:r,string:s}),h.animations[0]._animTrack._animEvents._events=u}}null!=a&&t.on(i,(function(t){return t.number==r&&t.string==s&&a(t),!0}))}}AnimHelper.__name__="AnimHelper";class ScriptComponent extends pc.ScriptType{getScript_CharacterController(t){var e=t.__name__;return e=e.charAt(0).toLowerCase()+HxOverrides.substr(e,1,null),this.entity.script.get(e)}initialize(){}postInitialize(){}swap(t){}postUpdate(t){}update(t){}get_position(){return this.entity.getPosition()}set_position(t){return this.entity.setPosition(t),t}get_rotation(){return this.entity.getRotation()}set_rotation(t){return this.entity.setRotation(t),t}get_localScale(){return this.entity.getLocalScale()}set_localScale(t){return this.entity.setLocalScale(t),t}get_lossyScale(){return this.entity.getScale()}get_localPosition(){return this.entity.getLocalPosition()}set_localPosition(t){return this.entity.setLocalPosition(t),t}get_localRotation(){return this.entity.getLocalRotation()}set_localRotation(t){return this.entity.setLocalRotation(t),t}get_eulerAngles(){return this.entity.getEulerAngles()}set_eulerAngles(t){return this.entity.setEulerAngles(t),t}get_localEulerAngles(){return this.entity.getLocalEulerAngles()}set_localEulerAngles(t){return this.entity.setLocalEulerAngles(t),t}getChildByName(t){for(var e=this.entity.children,i=0,n=e.length;i<n;){var a=i++;if(e[a].name==t)return e[a]}return null}}ScriptComponent.__name__="ScriptComponent",ScriptComponent.__super__=pc.ScriptType,Object.assign(ScriptComponent.prototype,{__class__:ScriptComponent,__properties__:{set_localEulerAngles:"set_localEulerAngles",get_localEulerAngles:"get_localEulerAngles",set_eulerAngles:"set_eulerAngles",get_eulerAngles:"get_eulerAngles",set_localRotation:"set_localRotation",get_localRotation:"get_localRotation",set_localPosition:"set_localPosition",get_localPosition:"get_localPosition",get_lossyScale:"get_lossyScale",set_localScale:"set_localScale",get_localScale:"get_localScale",set_rotation:"set_rotation",get_rotation:"get_rotation",set_position:"set_position",get_position:"get_position"}});class Character extends ScriptComponent{get_canPickupThrowObject(){return null==this.throwObject}get_lookAtPos(){return null!=this.lookAtObject?this.lookAtObject.getPosition().clone():this.entity.getPosition().clone()}initialize(){super.initialize(),Character.allCharacters.push(this);var t=this;this.on("destroy",(function(e){return t.OnDestroy(),!0}));for(var e=this.entity.findComponents("anim"),i=0;i<e.length;){var n=e[i];if(++i,n.entity._enabled){this.animator=n;break}}if(null!=this.animator){this.curAnimState="",this.animStateExitHandlers=new haxe_ds_StringMap,null==this.curAnimState&&(this.curAnimState="START");var a=this.curAnimState,r=this.animStateExitHandlers,s=[];null!=l[a]?r.setReserved(a,s):r.h[a]=s}var o=new pc.Vec3(0,0,0);this.moveDirection=o,this.heroGrowActivated=!0,this.initGiantLifes=0,this.giantLifes=0,this.leftTimeGiantToThrow=88888888,this.speedMul=1;var c=new pc.Vec3(0,0,0);if(this.moveToTargetPos=c,this.isDead=!1,this.isPlayer=!1,this.fatalityChecked=!1,this.initPos=_$Vector3_Vector3_$Impl_$.clone(this.get_position()),this.initScale=_$Vector3_Vector3_$Impl_$.clone(this.get_localScale()),this.lastCharScale=_$Vector3_Vector3_$Impl_$.clone(this.initScale),this.throwObjectIsLeftHand=!0,this.isThrowing=!1,this.hasThrowPos=!1,this.throwAnimEnded=!0,this.waitesFatalityResponce=!1,this.isFatalityVictim=!1,this.rollPhaseCatchHits=[],this.isRolling=!1,this.giantHitAnimName="HitReactionAnim",this.isPlayingGiantHitAnim=!1,this.isGiantMoving=!1,this.lastGiantTargetPosOnCircId=-1,this.curGiantCircPosAngRad=0,this.waitGiantRun=!1,this.isGiantRunningByCircle=!0,this.isSpawnAnim=!1,this.recheckDelayFrames=100,this.isGiant&&(this.initGiantLifes=this.giantConfig.numHitsToMove*(this.giantConfig.numMovesToDie+1),this.giantLifes=this.initGiantLifes,null!=this.giantConfig.throwBaseObject)){EntityHelper.GetComponent_ThrowObject(this.giantConfig.throwBaseObject,ThrowObject).recalculateCOM(),this.giantConfig.throwBaseObject.enabled=!1;var h=this.giantConfig.firstThrowDelay,u=h[0];this.leftTimeGiantToThrow=u+(h[1]-u)*Math.random()}this.controller=this.getScript_CharacterController(CharacterController),this.controller.collisionEnterHandler=$bind(this,this.OnControllerColliderHit),this.controller.get_rigidbody().group=4,this.controller.get_rigidbody().mask=-9,this.animationRotCont=new pc.Entity("AnimationRotCont",this.app),this.entity.addChild(this.animationRotCont),this.animationRotCont.setLocalPosition(0,0,0),this.animationRotCont.enabled=!0;for(var d=0,m=this.entity.children.length;d<m;){var _=d++;if(0==this.entity.children[_].name.indexOf("CatchCollider")){var p=this.entity.children[_];null!=p&&(p.collision.on("triggerenter",(function(e){return t.onCatchColliderHit(e),!0})),p.collision.on("triggerleave",(function(e){return t.onCatchColliderHitExit(e),!0})))}}this.lookAtObject=this.getChildByName("LookAtPos"),this.lookAtObject.enabled=!1,this.getChildByName("HitColliders").collision.on("triggerenter",(function(e){return t.onCharacterHitColliderHit(e),!0}),this),this.entity.tags.add("Character"),this.canBeThrownHeroSize>0&&(this.heroGrowActivated=!1),this.initAvatar()}changeAvatar(t){if(!this.isGiant&&!this.isDead){var e=GameSettings.config.heroAvatarsPrefabs,i=this;t<0||null==e||t>=e.length||null!=e[t]&&(e[t].ready((function(n){var a=i.animator.entity,r=js_Boot.__cast(e[t].resource,pc.Template).instantiate();a.parent.addChild(r),r.enabled=!0;var s=a.getLocalPosition().clone();r.setLocalPosition(s);var o=a.getLocalRotation().clone();r.setLocalRotation(o);var l=a.getLocalScale().clone();return r.setLocalScale(l),a.enabled=!1,null!=a.parent&&a.parent.removeChild(a),a.destroy(),i.initAvatar(),!0})),this.app.assets.load(e[t]))}}initAvatar(){for(var t=this.entity.findComponents("anim"),e=this,i=0;i<t.length;){var n=t[i];if(++i,n.entity._enabled){this.animator=n;break}}if(null!=this.animator){this.curAnimState="",this.animStateExitHandlers=new haxe_ds_StringMap,null==this.curAnimState&&(this.curAnimState="START");var a=this.curAnimState,r=this.animStateExitHandlers,s=[];null!=l[a]?r.setReserved(a,s):r.h[a]=s}if(this.leftHandTrasform=this.animator.entity.findByName("hand_l"),this.rightHandTrasform=this.animator.entity.findByName("hand_r"),this.initAnimatorParent=this.animator.entity.parent,GameSettings.config.dyingAnimAssetID>0){var o=this.app.assets.get(GameSettings.config.dyingAnimAssetID);this.animator.assignAnimation("DyingAnim",o.resource,"Base",1,!1)}AnimHelper.addAnimStateEvent(this.animator,"ThrowAnim360P","ThrowPEnd",.85,(function(t){e.doThrowObject()})),AnimHelper.addAnimStateEvent(this.animator,"ThrowAnim360M","ThrowMEnd",.85,(function(t){e.doThrowObject()}));var c=this.animStateExitHandlers,h=[$bind(this,this.onThrowAnimEnd)];null!=l.ThrowAnim360P?c.setReserved("ThrowAnim360P",h):c.h.ThrowAnim360P=h;var u=this.animStateExitHandlers,d=[$bind(this,this.onThrowAnimEnd)];null!=l.ThrowAnim360M?u.setReserved("ThrowAnim360M",d):u.h.ThrowAnim360M=d;var m=this.animStateExitHandlers,_=[$bind(this,this.onRollAnimEnd)];null!=l.RollAnimationLeft?m.setReserved("RollAnimationLeft",_):m.h.RollAnimationLeft=_;var p=this.animStateExitHandlers,g=[$bind(this,this.onRollAnimEnd)];null!=l.RollAnimationRight?p.setReserved("RollAnimationRight",g):p.h.RollAnimationRight=g;var y=this.animStateExitHandlers,v=[$bind(this,this.onGiantHitAnimEnd)];null!=l.HitReactionAnim?y.setReserved("HitReactionAnim",v):y.h.HitReactionAnim=v}OnControllerColliderHit(t){var e=t.other,i=e.rigidbody,n=EntityHelper.GetComponent_CharacterControllerManager(t.other,CharacterControllerManager),a=EntityHelper.GetComponent_ThrowObjectCharacter(t.other,ThrowObjectCharacter),r=null!=a?a.character:null;if(null==r&&null!=n&&(r=EntityHelper.GetComponent_Character(n.characterController.entity,Enemy)),null!=r&&r.canBeThrown&&this.onCatchColliderHit(e),null!=n&&null!=EntityHelper.GetComponent_GrowHeroTrigger(n.characterController.entity,GrowHeroTrigger)&&EntityHelper.GetComponent_GrowHeroTrigger(n.characterController.entity,GrowHeroTrigger).checkHitHero(this.entity),null!=i&&!i.isKinematic()){if(GameSettings.config.useCharacterColliderAsCatchCollider){var s=EntityHelper.GetComponentInParent_ThrowObject(e,ThrowObject);null!=s&&s.isInFly();this.isPlayer||this.isGiant||(null==s||!s.isInFly()),null==s||!this.isPlayer&&s.isInFly()||this.onCatchColliderHit(e)}}}updateEnemy(){if(this.enemy=Character.getClosestCharacter(this,this.isPlayer,!this.isPlayer),this.isPlayer){var t=1e6,e=this.get_position().x,i=this.get_position().z;if(null!=this.enemy){var n=this.enemy.get_position().x-e,a=this.enemy.get_position().z-i;t=Math.sqrt(n*n+a*a)}for(var r=.8*t,s=GameSettings.config.maxThreatDistToFocus,o=r<0?0:r>s?s:r,l=o*o,c=null,h=1/0,u=0,d=ThrowObject.AllThrowObjects;u<d.length;){var m=d[u];if(++u,m.canBeFocusThreat(this)&&(m==this.threat||!m.isInCharacterLookAng(this))){var _=m.entity.getPosition(),p=_.x-e,g=_.z-i,y=p*p+g*g;y<h&&y<l&&(h=y,c=m)}}this.threat=c}}setIsPlayer(){this.isPlayer=!0}onOtherThrow(t,e,i){}startThrowing(t){if(null==t&&(t=this.throwObjectIsLeftHand?-1:1),null!=this.throwObject&&(null!=this.enemy||this.isPlayer)&&!this.isDead){this.setMoveAnimState(),this.isThrowing=!0;for(var e=0,i=this.animator.layers.length;e<i;){var n=e++;this.animator.layers[n].transition("ThrowAnim360"+(t>0?"M":"P"),.25)}var a=.4;if(!this.isPlayer){var r=_$Vector3_Vector3_$Impl_$.sub(Hero.current.entity.getPosition().clone(),this.entity.getPosition().clone()).length()/17;a*=Math.max(.01,1-(r>1?1:r<0?0:r))}a>0&&SoundsController.Play("Throw1",a)}}getThrowPos(){return this.get_position()}doThrowObject(t){if(null!=this.throwObject&&!this.isDead&&this.isThrowing&&(null!=this.enemy||this.isPlayer)){var e=this.isGiant||null!=this.enemy&&this.enemy.isGiant;if(this.isPlayer&&SuperMode.OnHeroThrow(),this.isPlayer&&null==this.enemy)for(var i=0,n=Character.allCharacters;i<n.length;){var a=n[i];if(++i,a.isFatalityVictim){this.enemy=a;break}}if(null==this.enemy)t=_$Vector3_Vector3_$Impl_$.addV(this.get_position(),_$Vector3_Vector3_$Impl_$.mulN(this.getCurrentForwardLookVector(),5));else if(e=this.isGiant||this.enemy.isGiant)if(null!=t){var r=t;r.y=this.enemy.get_lookAtPos().y,t=r}else if(this.enemy.hasThrowPos)t=this.enemy.getThrowPos();else{var s=this.enemy.get_position();s.y=this.enemy.get_lookAtPos().y,t=s}null==t&&this.enemy.hasThrowPos&&(t=this.enemy.getThrowPos(),e=!0),null!=this.lThrowObject&&this.lThrowObject.throwAtTheEnemy(this.enemy,t,e),null!=this.rThrowObject&&this.rThrowObject.throwAtTheEnemy(this.enemy,t,e),Character.OnThrow(this.throwObject,this,this.enemy),this.throwObject=this.lThrowObject=this.rThrowObject=null,this.isThrowing=!1}}onThrowAnimEnd(){this.throwAnimEnded=!0}onCharacterHitColliderHit(t){if(!this.isDead){var e=EntityHelper.GetComponentInParent_ThrowObject(t,ThrowObject);if(null!=e&&!e.enabled){for(var i=e.entity.parent,n=this.app.root;null!=i&&i!=n&&!e.enabled&&null!=(e=EntityHelper.GetComponentInParent_ThrowObject(i,ThrowObject))&&!e.enabled;)i=e.entity.parent;null==e||e.enabled||(e=null)}if(null!=e&&e!=this.throwObject&&e.owner!=this&&e.throwedOnce){if(null!=t.rigidbody&&!t.rigidbody.isKinematic()&&t.rigidbody.linearVelocity.length()<4&&!this.isGiant)return;this.isGiant?this.onGiantHit(e):e.canKill(this)&&this.kill(e)}}}onCatchColliderHit(t){if(this.isGiant||this.isRolling||this.isDead)this.isRolling&&this.rollPhaseCatchHits.push(t);else if(null!=t.rigidbody&&!t.rigidbody.isKinematic()&&!this.isDead&&this.get_canPickupThrowObject()&&!this.isThrowing&&this.throwAnimEnded){var e=EntityHelper.GetComponent_ThrowObjectCharacter(t,ThrowObjectCharacter),i=null!=e?e.character:EntityHelper.GetComponentInParent_Character(t,Character);if(null==i){var n=EntityHelper.GetComponent_CharacterControllerManager(t,CharacterControllerManager);null!=n&&(i=EntityHelper.GetComponent_Character(n.characterController.entity,Character))}if(i!=this&&(null==i||this.isPlayer&&!i.isGiant&&!GameController.isDuelMode)){null!=i&&null==EntityHelper.GetComponent_ThrowObject(i.entity,ThrowObject)&&i.canBeThrown&&(!i.canBeThrownOnlyDead||i.isDead)&&i.heroGrowActivated&&i.kill();var a=EntityHelper.GetComponentInParent_ThrowObject(t,ThrowObject);null!=a&&a.isBreakable&&this.isPlayer||null!=a&&a!=this.throwObject&&a.owner!=this&&a.canBeHanded(this)&&this.putThrowObjectInClosestHand(a,t.rigidbody)}}}onCatchColliderHitExit(t){this.isRolling&&HxOverrides.remove(this.rollPhaseCatchHits,t)}putThrowObjectInClosestHand(t,e,i){(null==i&&(i=!1),this.isDead)||(!this.isPlayer&&t.isInFly()&&t.isSuperModeThrow||(this.throwObject=t,null!=this.lThrowObject||null==this.rThrowObject?(null==this.lThrowObject||null!=this.rThrowObject)&&_$Vector3_Vector3_$Impl_$.sub(js_Boot.__cast(this.leftHandTrasform.getPosition(),pc.Vec3),t.get_position()).length()<_$Vector3_Vector3_$Impl_$.sub(js_Boot.__cast(this.rightHandTrasform.getPosition(),pc.Vec3),t.get_position()).length()?this.putThrowObjectInLeftHand(t,e,i):this.putThrowObjectInRightHand(t,e,i):this.putThrowObjectInLeftHand(t,e,i)))}putThrowObjectInLeftHand(t,e,i){if(null==i&&(i=!1),!this.isDead){this.throwObject=t,this.lThrowObject=t,this.lThrowObjectInitScale=t.get_lossyScale(),this.throwObjectIsLeftHand=!0;var n=t.leftHandPos.isSet,a=t.leftHandPos;if(n){var r=t.entity,s=this.leftHandTrasform,o=!0;if(null==o&&(o=!0),null==s&&(s=pc.app.scene.root),null!=r.parent)if(o){var l=r.getWorldTransform().clone(),c=s.getWorldTransform().clone().invert();l.mul2(c,l);var h=l.getTranslation(),u=(new pc.Quat).setFromMat4(l),d=l.getScale();r.reparent(s),r.setLocalPosition(h),r.setLocalRotation(u),r.setLocalScale(d)}else r.reparent(s);var m=a.position;m=_$Vector3_Vector3_$Impl_$.mulN(m,1/(this.get_localScale().x/this.initScale.x)),t.set_localPosition(m);var _=a.rotation.x,p=a.rotation.y,g=a.rotation.z,y=new pc.Quat(0,0,0,1);t.set_localRotation(_$Quaternion_Quaternion_$Impl_$.setFromEulerAngles(y,_,p,g))}t.onHanded(this,e,n?null:this.leftHandTrasform)}}putThrowObjectInRightHand(t,e,i){if(null==i&&(i=!1),!this.isDead){this.throwObject=t,this.rThrowObject=t,this.rThrowObjectInitScale=t.get_lossyScale(),this.throwObjectIsLeftHand=!1;var n=t.rightHandPos.isSet,a=t.rightHandPos;if(n){var r=t.entity,s=this.rightHandTrasform,o=!0;if(null==o&&(o=!0),null==s&&(s=pc.app.scene.root),null!=r.parent)if(o){var l=r.getWorldTransform().clone(),c=s.getWorldTransform().clone().invert();l.mul2(c,l);var h=l.getTranslation(),u=(new pc.Quat).setFromMat4(l),d=l.getScale();r.reparent(s),r.setLocalPosition(h),r.setLocalRotation(u),r.setLocalScale(d)}else r.reparent(s);var m=a.position;m=_$Vector3_Vector3_$Impl_$.mulN(m,1/(this.get_localScale().x/this.initScale.x)),t.set_localPosition(m);var _=a.rotation.x,p=a.rotation.y,g=a.rotation.z,y=new pc.Quat(0,0,0,1);t.set_localRotation(_$Quaternion_Quaternion_$Impl_$.setFromEulerAngles(y,_,p,g))}t.onHanded(this,e,n?null:this.rightHandTrasform)}}moveToTarget(t){this.isDead||(this.isMovingToTarget=!0,this.moveToTargetPos=t)}onEnemyKill(){if((!GameController.isGiantMode||this.isPlayer)&&!this.isEnemyKillEffect){this.isEnemyKillEffect=!0;var t=pc.app.systems.camera.cameras[0].fov,e=this;motion_Actuate.update((function(e){var i=e<=1?1-e:e-1;return i=motion_easing_Quad.easeInOut.calculate(i),pc.app.systems.camera.cameras[0].fov=t-10+10*i}),.7,[0],[2]).ease(motion_easing_Linear.get_easeNone()),motion_Actuate.update((function(t){var e=t<=1?t:t-1;return e=motion_easing_Quad.easeInOut.calculate(e),pc.app.timeScale=t<=1?1-.6*e:.4+.6*e}),.7,[0],[2]).ease(motion_easing_Linear.get_easeNone()),motion_Actuate.timer(.7).onComplete((function(){return e.isEnemyKillEffect=!1}))}}onGiantHit(t){if(!this.isDead&&!this.isGiantMoving){var e=null!=t?t.giantDammage:1,i=GameSettings.config.giantCriticalHitProbabilityPerc;i>0&&Math.random()<i/100&&(e*=GameSettings.current.giantCriticalHitDamageMultiplier);var n=this.giantLifes%this.giantConfig.numHitsToMove;0==n&&(n=this.giantConfig.numHitsToMove);var a=n<=e;if(this.giantLifes-=e,this.giantLifes<0&&(this.giantLifes=0),a&&this.giantLifes>0&&motion_Actuate.timer(.5).onComplete($bind(this,this.startGiantMove)),null!=UIManager.current&&UIManager.current.setGiantLifesPerc(this.giantLifes/this.initGiantLifes*100),GameController.AddEnemyHit(),null!=t){var r=t.get_position();EntityHelper.GetComponent_Character(t.entity,Character);GameController.OnGiantHit(r)}if(this.giantLifes<=0){if(this.kill(t),null!=t){for(var s=t.entity.findComponents("render"),o=0;o<s.length;){var l=s[o];++o,l.enabled=!1}t.entity.destroy()}}else if(null!=t&&t.entity.destroy(),!this.isThrowing){for(var c=0,h=this.animator.layers;c<h.length;){var u=h[c];++c,u.play(this.giantHitAnimName)}this.isPlayingGiantHitAnim=!0,this.recheckDelayFrames=100}}}recheckHitAnimEnd(){this.isGiant&&this.isPlayingGiantHitAnim&&null!=this.animator&&(this.recheckDelayFrames>0?this.recheckDelayFrames--:this.animator.baseLayer.activeState!=this.giantHitAnimName&&(this.isPlayingGiantHitAnim=!1))}onGiantHitAnimEnd(){this.isPlayingGiantHitAnim=!1}getIsPlayingAnim(t){return this.animator.baseLayer.activeState==t}startGiantMove(){if(this.isGiant&&!this.isGiantMoving&&null!=this.giantConfig.positionsOnCircle&&0!=this.giantConfig.positionsOnCircle.length)if(this.isThrowing||this.isPlayingGiantHitAnim)this.waitGiantRun=!0;else{this.waitGiantRun=!1,this.isGiantMoving=!0;var t=this,e=this.initPos,i=0,n=1,a=-this.giantConfig.walkRadius;null==a&&(a=0),null==n&&(n=0),null==i&&(i=0);for(var r=new pc.Vec3(i,n,a),s=_$Vector3_Vector3_$Impl_$.addV(e,r),o=Math.abs(this.giantConfig.walkRadius),l=-1,c=[],h=0,u=this.giantConfig.positionsOnCircle.length;h<u;){var d=h++;d!=this.lastGiantTargetPosOnCircId&&c.push(d)}l=0==c.length?Math.floor(this.giantConfig.positionsOnCircle.length*Math.random()):null!=c&&c.length>0?c[Math.floor((c.length-1)*Math.random())]:null,this.lastGiantTargetPosOnCircId=l;var m=.01745329251994*this.giantConfig.positionsOnCircle[l],_=0;if(this.isGiantRunningByCircle)_=Math.abs(m-this.curGiantCircPosAngRad)/(2*Mathf.PI)*this.giantConfig.runCircTime,motion_Actuate.update((function(e){t.curGiantCircPosAngRad=e;var i=t.controller.get_rigidbody().entity.getPosition().clone();i.x=s.x+Math.sin(t.curGiantCircPosAngRad)*o,i.z=s.z+Math.cos(t.curGiantCircPosAngRad)*o,t.controller.teleport(i)}),_,[this.curGiantCircPosAngRad],[m]).ease(motion_easing_Linear.get_easeNone()).onComplete($bind(this,this.onGiantMoveEnd));else{var p=2*Mathf.PI*o/this.giantConfig.runCircTime,g=this.controller.get_rigidbody().entity.getPosition().clone(),y=s.x+Math.sin(m)*o,v=g.y,f=s.z+Math.cos(m)*o;null==f&&(f=0),null==v&&(v=0),null==y&&(y=0);var b=new pc.Vec3(y,v,f),S=_$Vector3_Vector3_$Impl_$.sub(b,g);S.y=0,_=S.length()/p,motion_Actuate.update((function(e){var i=t.controller.get_rigidbody(),n=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.sub(b,g),e);i.teleport(_$Vector3_Vector3_$Impl_$.addV(g,n))}),_,[0],[1]).ease(motion_easing_Linear.get_easeNone())}this.animator.baseLayer.play("RunAnim");var C=this.giantConfig.stompsInterval,I=0|Math.floor(_/C);motion_Actuate.timer(C).repeat(I).onRepeat($bind(this,this.onGiantStomp))}}onGiantMoveEnd(){this.isGiantMoving=!1;var t=this.giantConfig.firstThrowDelay,e=t[0];this.leftTimeGiantToThrow=e+(t[1]-e)*Math.random(),this.animator.setTrigger("GiantMoveEnd")}onGiantStomp(){if(this.giantConfig.shakeCameraOnGiantMove&&null!=Hero.current&&Hero.current.shakeGiantCamera(),this.giantConfig.throwObjsOnGiantMove)for(var t=pc.app.systems.rigidbody._dynamic,e=0;e<t.length;){var i=t[e];if(++e,!i.isKinematic()&&null==EntityHelper.GetComponentInParent_Character(i.entity,Character)&&null==EntityHelper.GetComponentInParent_CharacterControllerManager(i.entity,CharacterControllerManager)){var n=i.linearVelocity.clone();n.y+=200*(.8+.19999999999999996*Math.random())*this.giantConfig.throwObjsPowerMul*.016666666666666666,i.linearVelocity=n}}}revive(){null!=this.throwObject&&(this.throwObject.onOwnerKill(),this.throwObject=null),this.setMoveAnimState(!1,!1,!1,!1),this.animator.baseLayer.play("Idle"),this.isRolling=!1,this.isThrowing=!1,this.throwAnimEnded=!0,this.controller.enabled=!0,this.animator.enabled=!0,this.isDead=!1,this.controller.enable();for(var t=0,e=ThrowObject.AllThrowObjects;t<e.length;){var i=e[t];++t,i.enabled&&i.isBreakable&&i.breakByParts()}for(var n=0,a=ThrowObject.AllThrowObjects;n<a.length;){var r=a[n];++n,r.enabled&&r.isBreakable&&r.onOwnerKill()}for(var s=0,o=ThrowObject.AllThrowObjects;s<o.length;){var l=o[s];++s,l.enabled&&l instanceof PartThrowObject&&js_Boot.__cast(l,PartThrowObject).onRevive()}for(var c=0,h=Character.allCharacters;c<h.length;){var u=h[c];++c,u instanceof Enemy&&js_Boot.__cast(u,Enemy).onHeroRevive()}}kill(t){if(!this.waitesFatalityResponce&&!(this.isPlayer&&null!=GameController.current&&GameController.current.gameFinished||this.isDead)){this.isDead=!0;var e=1;if(!this.isPlayer){var i=_$Vector3_Vector3_$Impl_$.sub(Hero.current.entity.getPosition().clone(),this.entity.getPosition().clone()).length()/25;e=Math.max(.05,1-(i>1?1:i<0?0:i))}if(SoundsController.Play("Impact"+(1+Math.floor(3*Math.random())),e),this.isGiant&&!this.fatalityChecked&&GameSettings.get_IsFatalityLevel())if(this.fatalityChecked=!0,this.isFatalityVictim=!0,null!=EntityHelper.GetComponent_FatalityBase(this.entity,FatalityBase))return this.waitesFatalityResponce=!0,GameController.current.startFatalityDialog(),this.animator.baseLayer.play("DizzyAnim"),void(null!=this.throwObject&&(this.throwObject.onOwnerKill(),this.throwObject=null));if(this.isPlayer||this.isGiant||GameController.AddEnemyHit(),this.onRollAnimEnd(),this.isPlayer||this.onEnemyKill(),null!=t&&this.isGiant&&t.onGiantKill(),null!=this.throwObject&&(this.isPlayer&&null!=this.throwObject.entity.rigidbody&&(this.throwObject.entity.rigidbody.type=pc.BODYTYPE_DYNAMIC),this.throwObject.onOwnerKill()),this.isGiant||null==GameSettings.config.deadEnemiesMat||this.isPlayer||MaterialHelper.SetEntityWithChildsMaterial(this.entity,GameSettings.config.deadEnemiesMat.resource),this.isGiant&&!this.isFatalityVictim){var n=this.animator.entity,a=_$Quaternion_Quaternion_$Impl_$.get_IDENTITY();motion_Actuate.update(EntityTween.slerpAndSetEntityLocalRotation,.2,[n,n.getRotation(),a,0],[n,n.getRotation(),a,1],!0).ease(motion_easing_Linear.get_easeNone())}this.controller.disable(),this.isFatalityVictim||this.setAnimState("DyingAnim")}}resetRootPos(){var t=null,e=this.entity.findComponents("render");if(null!=e&&e.length>0)for(var i=0;i<e.length;){var n=e[i];if(++i,null!=n.rootBone){t=this.app.getEntityFromIndex(n.rootBone).parent;break}}if(null!=t){var a=_$Vector3_Vector3_$Impl_$.get_ZERO();t.setLocalPosition(a)}}teleportToWorldPos(t){this.controller.teleport(t)}activateFatality(){this.waitesFatalityResponce=!1;var t=EntityHelper.GetComponent_FatalityBase(this.entity,FatalityBase);null!=t&&t.activate()}cancelFatality(){this.waitesFatalityResponce=!1,this.isDead=!1,this.kill()}OnDestroy(){HxOverrides.remove(Character.allCharacters,this)}setMoveAnimState(t,e,i,n){null==n&&(n=!1),null==i&&(i=!1),null==e&&(e=!1),null==t&&(t=!1);var a="Idle";t?a="StrafeAnimLeft":e?a="StrafeAnimationRight":i?a="RunForwardAnim":n&&(a="RunningBackwardAnim"),0!=this.animator.baseLayer.activeState.indexOf("ThrowAnim360")&&0!=this.animator.baseLayer.activeState.indexOf("DyingAnim")&&this.setAnimState(a,.15)}setAnimState(t,e,i){if(null==i&&(i=-1),null==e&&(e=0),t!=this.curMoveAnimState)if(this.curMoveAnimState=t,-1!=i&&this.animator.layers.length>i)e>0?this.animator.layers[i].transition(t,e):this.animator.layers[i].play(t);else for(var n=0,a=this.animator.layers.length;n<a;){var r=n++;-1!=this.animator.layers[r].states.indexOf(t)&&(e>0?this.animator.layers[r].transition(t,e):this.animator.layers[r].play(t))}}updateMoveDirectionAnim(){if(this.isRolling)this.setMoveAnimState();else{var t=this.controller.velocity;if(t.length()<.01||0==t.x&&0==t.y&&0==t.z)this.setMoveAnimState();else{var e=t.clone().normalize().dot(this.entity.forward.clone().mulScalar(-1));Math.abs(e)<.6?this.setMoveAnimState(e<=0,e>0):this.setMoveAnimState(!1,!1,e>=0,e<0)}}}doRoll(t){if(GameController.useRolls&&!(this.isRolling||this.isDead||this.isThrowing)){null!=this.rollTweener&&motion_Actuate.stop(this.rollTweener),this.isRolling=!0,this.rollPhaseCatchHits.length>0&&(this.rollPhaseCatchHits.length=0),_$Vector3_Vector3_$Impl_$.normalize(t),this.rollDir=t,this.setMoveAnimState(),Math.abs(t.dot(_$Vector3_Vector3_$Impl_$.get_FORWARD()))>.5?this.animator.baseLayer.play("RollAnimationLeft"):this.animator.baseLayer.play("RollAnimationRight"),this.animationRotCont.setLocalPosition(0,0,0),this.animationRotCont.setLocalRotation(0,0,0,1);var e=this.animator.entity,i=this.animationRotCont,n=!0;if(null==n&&(n=!0),null==i&&(i=pc.app.scene.root),null!=e.parent)if(n){var a=e.getWorldTransform().clone(),r=i.getWorldTransform().clone().invert();a.mul2(r,a);var s=a.getTranslation(),o=(new pc.Quat).setFromMat4(a),l=a.getScale();e.reparent(i),e.setLocalPosition(s),e.setLocalRotation(o),e.setLocalScale(l)}else e.reparent(i);this.animationRotCont.setRotation(_$Quaternion_Quaternion_$Impl_$.LookRotation(t,_$Vector3_Vector3_$Impl_$.get_UP())),this.rollStartPos=this.get_position(),this.prevTime=0,this.rollTweener=motion_Actuate.update($bind(this,this.rollUpdate),.7,[0],[.7]).ease(motion_easing_Linear.get_easeNone())}}rollUpdate(t){if(!this.isDead){var e=t-this.prevTime;this.prevTime=t,this.moveDirection=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(this.rollDir,-GameSettings.config.rollMoveSpeed),e),this.speedMul),this.moveDirection.y=(this.moveDirection.y-this.gravity*e*1e3)*e,this.controller.Move(this.moveDirection)}}onRollAnimEnd(){if(this.isRolling){this.isRolling=!1,this.animationRotCont.setLocalRotation(0,0,0,1);var t=this.animator.entity,e=this.initAnimatorParent,i=!0;if(null==i&&(i=!0),null==e&&(e=pc.app.scene.root),null!=t.parent)if(i){var n=t.getWorldTransform().clone(),a=e.getWorldTransform().clone().invert();n.mul2(a,n);var r=n.getTranslation(),s=(new pc.Quat).setFromMat4(n),o=n.getScale();t.reparent(e),t.setLocalPosition(r),t.setLocalRotation(s),t.setLocalScale(o)}else t.reparent(e);for(var l=0,c=this.rollPhaseCatchHits;l<c.length;){var h=c[l];++l,this.onCatchColliderHit(h)}this.rollPhaseCatchHits.length=0}}onGotTotarget(){}starGiantThrow(){if(this.isGiant&&null!=this.giantConfig.throwBaseObject&&(null==GameController.current||!GameController.current.gameFinished)){var t=this.giantConfig.throwIntervals,e=t[0];this.leftTimeGiantToThrow=e+(t[1]-e)*Math.random();var i=this.giantConfig.throwBaseObject.clone();this.app.root.addChild(i);var n=this.giantConfig.throwBaseObject.getPosition().clone();i.setPosition(n);var a=EntityHelper.GetComponent_ThrowObject(i,ThrowObject);a.initPartThrowObjs(),i.enabled=!0,a.init();var r=i.rigidbody;null!=a&&null!=r&&this.putThrowObjectInClosestHand(a,r,!0)}}getCurrentForwardLookVector(){return this.entity.forward.mulScalar(-1)}updateObjsInHandScale(){if(this.get_localScale()!=this.lastCharScale){if(this.lastCharScale=this.get_localScale(),null!=this.lThrowObject&&this.lThrowObject.entity.parent==this.leftHandTrasform&&this.lThrowObject.leftHandPos.isSet){var t=this.lThrowObject;t.set_localScale(_$Vector3_Vector3_$Impl_$.mulN(t.get_localScale(),this.lThrowObjectInitScale.x/this.lThrowObject.get_lossyScale().x));var e=this.lThrowObject.leftHandPos.position;e=_$Vector3_Vector3_$Impl_$.mulN(e,1/(this.get_localScale().x/this.initScale.x)),this.lThrowObject.set_localPosition(e)}if(null!=this.rThrowObject&&this.rThrowObject.entity.parent==this.rightHandTrasform&&this.rThrowObject.rightHandPos.isSet){var i=this.rThrowObject;i.set_localScale(_$Vector3_Vector3_$Impl_$.mulN(i.get_localScale(),this.rThrowObjectInitScale.x/this.rThrowObject.get_lossyScale().x));var n=this.rThrowObject.rightHandPos.position;n=_$Vector3_Vector3_$Impl_$.mulN(n,1/(this.get_localScale().x/this.initScale.x)),this.rThrowObject.set_localPosition(n)}}}updateHeroGrowActivation(){if(!this.heroGrowActivated&&null!=Hero.current&&Hero.current.get_size()-1>=this.canBeThrownHeroSize){this.heroGrowActivated=!0;var t=this.__attributes.heroGrowActivationData;if(null!=t)for(var e=0;e<t.length;){var i=t[e];++e,null!=i.obj&&null!=i.mat&&MaterialHelper.SetEntityMaterial(i.obj,i.mat)}}}spawn(t){this.entity.enabled=!0;var e=this.get_position(),i=_$Vector3_Vector3_$Impl_$.clone(e);e.x=t.x,e.z=t.z,this.set_position(e);var n=_$Vector3_Vector3_$Impl_$.sub(i,e).length(),a=this.entity,r=a.getPosition();motion_Actuate.update($bind(a,a.setPosition),n/30,[r.x,r.y,r.z],[i.x,i.y,i.z],!0).ease(motion_easing_Linear.get_easeNone()).onComplete($bind(this,this.onSpawnAnimEnd)),this.isSpawnAnim=!0,this.isGiant&&this.animator.baseLayer.play("RunAnim")}onSpawnAnimEnd(){if(this.isSpawnAnim=!1,this.isGiant){this.isGiantMoving=!1;var t=this.giantConfig.firstThrowDelay,e=t[0];this.leftTimeGiantToThrow=e+(t[1]-e)*Math.random(),this.animator.baseLayer.play("Idle")}}setLookAt(t){var e=null!=t?t.get_lookAtPos():_$Vector3_Vector3_$Impl_$.get_ZERO();e.y=this.get_lookAtPos().y;var i=null!=this.enemy?_$Quaternion_Quaternion_$Impl_$.LookRotation(_$Vector3_Vector3_$Impl_$.sub(this.get_lookAtPos(),e)):this.get_rotation();this.entity.setRotation(i)}updateAnimStates(){if(null!=this.animator&&this.curAnimState!=this.animator.baseLayer.activeState){var t=this.animator.baseLayer.activeState,e=this.curAnimState,i=this.animStateExitHandlers;if(null!=l[e]?i.existsReserved(e):i.h.hasOwnProperty(e))for(var n=0,a=this.curAnimState,r=this.animStateExitHandlers,s=null!=l[a]?r.getReserved(a):r.h[a];n<s.length;){var o=s[n];++n,o()}else{var c=this.curAnimState,h=this.animStateExitHandlers,u=[];null!=l[c]?h.setReserved(c,u):h.h[c]=u}this.curAnimState=t}}update(t){if(super.update(t),this.updateAnimStates(),!this.isSpawnAnim)if(this.canBeThrownHeroSize>=0&&!this.heroGrowActivated&&this.updateHeroGrowActivation(),this.updateObjsInHandScale(),this.recheckHitAnimEnd(),this.isDead&&this.isPlayer){var e=EntityHelper.GetComponentInChildren_ThrowObject(this.entity,ThrowObject);null!=e&&e.onOwnerKill()}else{if(this.updateMoveDirectionAnim(),this.updateEnemy(),GameController.current.gameFinished||!GameController.current.gameStarted)return this.isPlayer&&null!=this.throwObject&&!this.isThrowing&&this.startThrowing(),void this.setMoveAnimState();if(this.isGiant&&!this.isGiantMoving&&(this.leftTimeGiantToThrow-=t,this.leftTimeGiantToThrow<=0&&this.starGiantThrow()),this.app.keyboard.wasPressed(pc.KEY_M)&&this.isGiant&&this.startGiantMove(),this.waitGiantRun&&!this.isThrowing&&this.startGiantMove(),this.isMovingToTarget&&this.controller.enabled){var i=_$Vector3_Vector3_$Impl_$.sub(this.moveToTargetPos,this.get_position()),n=Math.sqrt(i.x*i.x+i.z*i.z);if(_$Vector3_Vector3_$Impl_$.normalize(i),n<=this.speed*this.speedMul*t){this.isMovingToTarget=!1,this.controller.Move(_$Vector3_Vector3_$Impl_$.get_ZERO());var a=this.moveToTargetPos.x,r=this.get_position().y,s=this.moveToTargetPos.z;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s);this.set_position(o),this.onGotTotarget()}else this.moveDirection=_$Vector3_Vector3_$Impl_$.mulN(i,this.speed*this.speedMul),this.moveDirection.y-=1e3*this.gravity*t,this.controller.Move(_$Vector3_Vector3_$Impl_$.mulN(this.moveDirection,t))}null==this.throwObject||this.isThrowing||this.isPlayer&&GameSettings.config.playerThrowsOnMouseUp&&Joystick.current.isMouseDown||this.startThrowing()}}static getClosestCharacter(t,e,i){null==i&&(i=!1),null==e&&(e=!1);for(var n=t.get_position(),a=88888888,r=null,s=0,o=Character.allCharacters;s<o.length;){var l=o[s];if(++s,!(l.isDead||l==t||e&&l.isPlayer||i&&!l.isPlayer)){var c=n.x-l.get_position().x,h=n.z-l.get_position().z,u=c*c+h*h;u<a&&(a=u,r=l)}}return r}static OnThrow(t,e,i){for(var n=0,a=Character.allCharacters;n<a.length;){var r=a[n];++n,r.onOtherThrow(t,e,i)}}}Character.__name__="Character",Character.__super__=ScriptComponent,Object.assign(Character.prototype,{__class__:Character,__properties__:Object.assign({},ScriptComponent.prototype.__properties__,{get_lookAtPos:"get_lookAtPos",get_canPickupThrowObject:"get_canPickupThrowObject"})});class Bot extends Character{initialize(){super.initialize(),this.leftMoveToTargetTime=this.leftIdleTime=0,this.isIdle=!1,this.avatarDead=this.getChildByName("AvatarDead"),null!=this.avatarDead&&(this.avatarDead.enabled=!1),this.canBeThrown=!1,this.floorLayer=2048,this.enemy=Hero.current,this.startIdle()}startIdle(){if(!this.isIdle){this.controller.Move(_$Vector3_Vector3_$Impl_$.zero),this.setMoveAnimState(),this.isIdle=!0,this.isMovingToTarget=!1;var t=GameSettings.config.botIdleTime,e=t[0];this.leftIdleTime=e+(t[1]-e)*Math.random()}}setRandTarget(){if(!this.isGiant&&!this.isIdle){var t=this.enemy.entity.getPosition().clone(),e=2*Mathf.PI*Math.random(),i=GameSettings.config.botsHeroTargetRadius,n=i[0],a=n+(i[1]-n)*Math.random();if(t.x+=Math.sin(e)*a,t.z+=Math.cos(e)*a,!this.isMovingToTarget){var r=GameSettings.config.botRunTime,s=r[0];this.leftMoveToTargetTime=s+(r[1]-s)*Math.random()}this.moveToTarget(t)}}onCatchColliderHit(t){}OnControllerColliderHit(t){super.OnControllerColliderHit(t),this.isMovingToTarget}onGotTotarget(){super.onGotTotarget(),this.startIdle()}onOtherThrow(t,e,i){}kill(t){super.kill(t),this.isDead&&(this.canBeThrown=!0,null==this.avatarDead||this.avatarDead.enabled||(this.animator.entity.enabled=!1,this.avatarDead.enabled=!0,this.animator.entity.destroy(),this.animator=this.avatarDead.anim,this.animator.enabled=!1))}update(t){if(super.update(t),!this.isDead&&GameController.current.gameStarted){this.isMovingToTarget&&this.leftMoveToTargetTime>0?(this.leftMoveToTargetTime-=t,this.leftMoveToTargetTime<=0&&this.startIdle()):this.isIdle&&this.leftIdleTime>0&&(this.leftIdleTime-=t,this.leftIdleTime<=0&&(this.isIdle=!1,this.setRandTarget()));var e=null!=this.enemy?this.enemy.get_lookAtPos():_$Vector3_Vector3_$Impl_$.zero;if(!this.isGiant){for(var i=null,n=0,a=Character.allCharacters;n<a.length;){var r=a[n];if(++n,r.isGiant){i=r;break}}null!=i&&(e=i.entity.getPosition().clone())}this.isGiant&&(e.y=this.get_lookAtPos().y);var s=null!=this.enemy?_$Quaternion_Quaternion_$Impl_$.LookRotation(_$Vector3_Vector3_$Impl_$.sub(e,this.get_lookAtPos())):this.entity.getRotation().clone();this.entity.setRotation(s)}}}Bot.__name__="Bot",Bot.__super__=Character,Object.assign(Bot.prototype,{__class__:Bot});class CameraCharacterObjectsManager extends ScriptComponent{initialize(){super.initialize(),CameraCharacterObjectsManager.current=this,this.hideDataSize=300,this.hideDataCurIdx=0;for(var t=this,e=[],i=0,n=this.hideDataSize;i<n;){i++;e.push({model:null,render:null,materialAssets:null,mapping:null})}this.hideData=e,this.hittedHideableObjects=[],this.entity.addComponent("collision"),this.entity.collision.type="sphere",this.entity.collision.radius=.3,this.entity.collision.on("triggerenter",(function(e){return t.OnTriggerEnter(e),!0})),this.entity.collision.on("triggerleave",(function(e){return t.OnTriggerExit(e),!0}))}init(t,e){if(this.player=t,this.hiddenObjectsMat=e,this.hiddenObjsMatsAssetsArr=[],this.hiddenObjsMappingAssetsArr=[],null!=e){for(var i=0|e.id,n=0;n<20;){for(var a=n++,r=this.hiddenObjsMatsAssetsArr,s=[],o=0,l=a;o<l;){o++;s.push(i)}r.push(s),this.hiddenObjsMappingAssetsArr.push({});for(var c=0,h=a;c<h;){var u=c++;this.hiddenObjsMappingAssetsArr[a][u]=i}}var d=new pc.Entity("CoolMatEntity"),m=0,_=.5,p=0;null==p&&(p=0),null==_&&(_=0),null==m&&(m=0);var g=new pc.Vec3(m,_,p);d.setPosition(g);var y=.001,v=.001,f=.001;null==f&&(f=0),null==v&&(v=0),null==y&&(y=0);var b=new pc.Vec3(y,v,f);d.setLocalScale(b),d.addComponent("render",{type:"box"}),d.render.material=js_Boot.__cast(e,pc.Asset).resource,this.app.root.addChild(d),motion_Actuate.timer(.1).onComplete((function(){d.destroy()}))}}OnTriggerEnter(t){null!=t.rigidbody&&4096!=t.rigidbody.group||this.hittedHideableObjects.push(t)}OnTriggerExit(t){null!=t.rigidbody&&4096!=t.rigidbody.group||HxOverrides.remove(this.hittedHideableObjects,t)}postUpdate(t){super.postUpdate(t),null!=this.hiddenObjectsMat?this.updateObjectsVisibleMat():this.updateObjectsVisible()}onThrowObjectMatChange(t){for(var e=0,i=this.hideDataCurIdx;e<i;){var n=e++,a=this.hideData[n];(null!=a.model&&t.model==a.model||null!=a.render&&t.render==a.render)&&(a.model=null,a.render=null)}}updateObjectsVisibleMat(){for(var t=0,e=this.hideDataCurIdx;t<e;){var i=t++,n=this.hideData[i];null!=n.model?n.model.mapping=n.mapping:null!=n.render&&(n.render.materialAssets=n.materialAssets)}this.hideDataCurIdx=0;var a=this.player.getPosition().clone();a.y+=.4;for(var r=this.app.systems.rigidbody.raycastAll(this.entity.getPosition().clone(),a),s=0;s<r.length;){var o=r[s];++s,null!=o.entity.rigidbody&&4096==o.entity.rigidbody.group&&-5!=o.entity.rigidbody.mask&&this.setHiddenMatForEntity(o.entity)}for(var l=0,c=this.hittedHideableObjects;l<c.length;){var h=c[l];++l,this.setHiddenMatForEntity(h)}}setHiddenMatForEntity(t){for(var e=t.findComponents("render"),i=t.findComponents("model"),n=0;n<e.length;){var a=e[n];++n;for(var r=!1,s=0,o=this.hideDataCurIdx;s<o;){var l=s++;if(null!=this.hideData[l].render&&this.hideData[l].render==a){r=!0;break}}if(!r){var c=a.materialAssets.length>0?a.materialAssets:[a.materialAsset];this.hideDataCurIdx<this.hideDataSize&&(this.hideData[this.hideDataCurIdx].render=a,this.hideData[this.hideDataCurIdx].model=null,this.hideData[this.hideDataCurIdx].materialAssets=c,a.materialAssets=this.hiddenObjsMatsAssetsArr[c.length],this.hideDataCurIdx++)}}for(var h=0;h<i.length;){var u=i[h];++h;for(var d=!1,m=0,_=this.hideDataCurIdx;m<_;){var p=m++;if(null!=this.hideData[p].model&&this.hideData[p].model==u){d=!0;break}}if(!d){var g=u.mapping;if(this.hideDataCurIdx<this.hideDataSize){this.hideData[this.hideDataCurIdx].render=null,this.hideData[this.hideDataCurIdx].model=u,this.hideData[this.hideDataCurIdx].mapping=g;for(var y=1;y<30&&Object.prototype.hasOwnProperty.call(g,y+"");)++y;u.mapping=this.hiddenObjsMatsAssetsArr[y],this.hideDataCurIdx++}}}}updateObjectsVisible(){}static OnThrowObjectMatChange(t){null!=CameraCharacterObjectsManager.current&&CameraCharacterObjectsManager.current.onThrowObjectMatChange(t)}}CameraCharacterObjectsManager.__name__="CameraCharacterObjectsManager",CameraCharacterObjectsManager.__super__=ScriptComponent,Object.assign(CameraCharacterObjectsManager.prototype,{__class__:CameraCharacterObjectsManager});class CharacterController extends ScriptComponent{get_rigidbody(){return this.physEntity.rigidbody}initialize(){super.initialize(),this.isGrounded=!1,this.needMove=this.isMoveCall=this.dontCheck=!1;var t=new pc.Vec3(0,0,0);this.velocity=t;var e=new pc.Vec3(0,0,0);this.motion=e,this.groundContactNormal=_$Vector3_Vector3_$Impl_$.get_UP(),this.contacts=0,this.groundContactPointY=0,this.physEntity=new pc.Entity(this.entity.name+"_CharacterControllerPhys"),this.app.root.addChild(this.physEntity),this.physEntity.setPosition(this.entity.getPosition()),this.physEntity.addComponent("rigidbody",{type:pc.BODYTYPE_DYNAMIC,mass:this.__attributes.mass,angularFactor:_$Vector3_Vector3_$Impl_$.get_ZERO()}),this.physEntity.addComponent("collision",{type:"capsule",linearOffset:this.__attributes.center,radius:this.__attributes.radius,height:this.__attributes.height}),this.physEntity.collision.on("collisionstart",$bind(this,this.onCollisionStart)),this.physEntity.collision.on("contact",$bind(this,this.onCollisionStay)),this.physEntity.collision.on("collisionend",$bind(this,this.onCollisionEnd)),this.physEntity.addComponent("script"),this.physEntity.script.create("characterControllerManager"),this.physEntity.script.get("characterControllerManager").characterController=this,this.groundCastStart=-(this.physEntity.collision.height/2-this.physEntity.collision.radius)}onCollisionStart(t){return this.contacts++,null!=this.collisionEnterHandler&&this.collisionEnterHandler(t),!0}onCollisionStay(t){for(var e=0,i=t.contacts.length;e<i;){var n=e++;if(t.contacts[n].localPoint.y<this.groundContactPointY)return this.groundContactNormal=pc.Vec3.ZERO.clone().sub(t.contacts[n].normal),this.groundContactPointY=t.contacts[n].localPoint.y,this.isGrounded=this.dontCheck=!0,!0}return this.dontCheck||(this.groundContactPointY=this.groundCastStart,this.groundContactNormal=pc.Vec3.UP,this.isGrounded=!1,null!=this.collisionStayHandler&&this.collisionStayHandler(t)),!0}onCollisionEnd(t){return 0==--this.contacts&&(this.groundContactPointY=this.groundCastStart,this.groundContactNormal=pc.Vec3.UP,this.isGrounded=!1,this.dontCheck=!1),null!=this.collisionExitHandler&&this.collisionExitHandler(t),!0}slopeMultiplier(){var t=Math.acos(pc.math.clamp(_$Vector3_Vector3_$Impl_$.clone(this.groundContactNormal).dot(pc.Vec3.UP),-1,1))/Math.PI;return this.__attributes.slopeCurveModifier.value(t+.5)}Move(t){this.isMoveCall=!0,this.needMove=!0,this.motion=t}SimpleMove(t){this.isMoveCall=!1,this.needMove=!0,this.velocity=t}disable(){this.enabled=!1,null!=this.get_rigidbody()&&(this.get_rigidbody().enabled=!1)}enable(){this.enabled=!0,null!=this.get_rigidbody()&&(this.get_rigidbody().enabled=!0)}teleport(t){null!=this.physEntity&&null!=this.physEntity.rigidbody&&(this.physEntity.rigidbody.teleport(t),this.entity.setPosition(t))}postUpdate(t){if(super.postUpdate(t),!(t<=0)&&null!=this.physEntity&&null!=this.physEntity.rigidbody){if(this.isGrounded)this.needMove?this.isMoveCall&&(this.velocity=_$Vector3_Vector3_$Impl_$.devN(this.motion,t)):this.velocity.x=this.velocity.z=0,this.velocity.y=0,this.physEntity.rigidbody.linearVelocity=_$Vector3_Vector3_$Impl_$.clone(this.velocity);else{var e=this.physEntity.rigidbody.linearVelocity;e.x*=.97,e.z*=.97,this.physEntity.rigidbody.linearVelocity=e}this.needMove=!1,this.entity.setPosition(this.physEntity.getPosition())}}}CharacterController.__name__="CharacterController",CharacterController.__super__=ScriptComponent,Object.assign(CharacterController.prototype,{__class__:CharacterController,__properties__:Object.assign({},ScriptComponent.prototype.__properties__,{get_rigidbody:"get_rigidbody"})});class CharacterControllerManager extends ScriptComponent{}CharacterControllerManager.__name__="CharacterControllerManager",CharacterControllerManager.__super__=ScriptComponent,Object.assign(CharacterControllerManager.prototype,{__class__:CharacterControllerManager});class DotsLoadingAnim extends ScriptComponent{initialize(){super.initialize(),this.dots=[],this.dotsInitPoses=[],this.dotsInitScales=[];for(var t=0,e=this.entity.children.length;t<e;){var i=t++,n=this.entity.children[i];this.dots.push(n),this.dotsInitPoses.push(n.getLocalPosition().clone()),this.dotsInitScales.push(n.getLocalScale().clone())}this.dotsLineWidth=this.dotsDistance*(this.dots.length-1);var a=this.dotsLineWidth/2,r=0,s=0;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s);this.dotsStartPos=o,this.changeT=1-1/this.dots.length,motion_Actuate.update($bind(this,this.updateDot),this.time,[0],[1],!1).ease(motion_easing_Linear.get_easeNone()).repeat(-1)}updateDot(t){for(var e=0,i=this.dots.length;e<i;){var n=e++,a=this.dots[n],r=t+n/(this.dots.length-1)*this.changeT;r>1&&--r;var s=_$Vector3_Vector3_$Impl_$.clone(this.dotsStartPos),o=_$Vector3_Vector3_$Impl_$.clone(this.dotsInitScales[n]);if(r<this.changeT){var l=motion_easing_Quad.easeInOut.calculate(r/this.changeT);s.x-=this.dotsLineWidth*l,o=_$Vector3_Vector3_$Impl_$.mulN(o,1+.25*Math.sin(Mathf.PI*l))}else{var c=motion_easing_Quad.easeInOut.calculate(1-(r-this.changeT)/(1-this.changeT));o=_$Vector3_Vector3_$Impl_$.mulN(o,1+-.2*Math.sin(Mathf.PI*c)),s.x-=this.dotsLineWidth*c}a.setLocalPosition(s),a.setLocalScale(o)}}}DotsLoadingAnim.__name__="DotsLoadingAnim",DotsLoadingAnim.__super__=ScriptComponent,Object.assign(DotsLoadingAnim.prototype,{__class__:DotsLoadingAnim});class Enemy extends Character{constructor(t){super(t),this.movesDistHistory=[]}initialize(){super.initialize(),this.timeToRandTarget=88888888,this.isMovingToCatch=!1,this.initPos=this.entity.getPosition().clone(),this.floorLayer=2048;var t=this.idleTimeRange,e=t[0];this.timeToRandTarget=e+(t[1]-e)*Math.random()}postInitialize(){super.postInitialize();var t=new pc.Vec3(0,0,0);this.lastPos=t,_$Vector3_Vector3_$Impl_$.copy(this.lastPos,this.entity.getPosition()),this.enemy=Hero.current}setRandTarget(){if(!this.isMovingToCatch&&!this.isGiant){var t=this.walkDistanceRange,e=-t,i=e+(t-e)*Math.random(),n=-t,a=n+(t-n)*Math.random(),r=this.initPos,s=i,o=0,l=a;null==l&&(l=0),null==o&&(o=0),null==s&&(s=0);var c=new pc.Vec3(s,o,l);this.moveToTarget(_$Vector3_Vector3_$Impl_$.addV(r,c))}}onGotTotarget(){super.onGotTotarget(),this.isMovingToCatch=!1;var t=this.idleTimeRange,e=t[0];this.timeToRandTarget=e+(t[1]-e)*Math.random()}moveToCatch(){this.isDead||this.isMovingToCatch||(this.isMovingToTarget=!0,this.isMovingToCatch=!0,this.moveToTargetPos=this.destPosToCatch)}onOtherThrow(t,e,i){if(!this.isGiant&&GameController.current.gameStarted){super.onOtherThrow(t,e,i);var n=this.entity.right;if(Math.random()>.5){var a=-1,r=1,s=-1;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s);n=_$Vector3_Vector3_$Impl_$.mulV(n,o)}if(this.destPosToCatch=_$Vector3_Vector3_$Impl_$.addV(this.entity.getPosition().clone(),_$Vector3_Vector3_$Impl_$.mulN(n,.55+.19999999999999996*Math.random())),i==this){var l=this.catchReactTime,c=l[0],h=c+(l[1]-c)*Math.random();motion_Actuate.timer(h).onComplete($bind(this,this.moveToCatch))}}}kill(t){this.isPlayer&&null!=GameController.current&&GameController.current.gameFinished||this.isDead||(super.kill(t),ThrowObjectCharacter.initForCharacter(this))}update(t){if(super.update(t),!this.isDead&&GameController.current.gameStarted){this.timeToRandTarget>0&&(this.timeToRandTarget-=t,this.timeToRandTarget<=0&&this.setRandTarget());var e=null!=this.enemy?this.enemy.get_lookAtPos():_$Vector3_Vector3_$Impl_$.get_ZERO();this.isGiant&&(e.y=this.get_lookAtPos().y);var i=null!=this.enemy?_$Quaternion_Quaternion_$Impl_$.LookRotation(_$Vector3_Vector3_$Impl_$.sub(this.get_lookAtPos(),e)):this.entity.getRotation().clone();this.entity.setRotation(i);var n=this.lastPos.x-this.entity.getPosition().x,a=this.lastPos.z-this.entity.getPosition().z,r=Math.sqrt(n*n+a*a);if(_$Vector3_Vector3_$Impl_$.copy(this.lastPos,this.entity.getPosition()),this.movesDistHistory.length<15)this.movesDistHistory.push(r);else{for(var s=0,o=0,l=this.movesDistHistory.length-1;o<l;){var c=o++;s+=this.movesDistHistory[c+1],this.movesDistHistory[c]=this.movesDistHistory[c+1]}this.movesDistHistory[this.movesDistHistory.length-1]=r,(this.isMovingToCatch||this.isMovingToTarget)&&s<.1&&(this.isMovingToCatch?this.onGotTotarget():this.setRandTarget(),this.movesDistHistory.length=0)}this.controller.get_rigidbody().linearVelocity.length()<this.speed/2&&this.isMovingToTarget&&this.setRandTarget()}}onHeroRevive(){if(this.isGiant){null!=this.throwObject&&this.throwObject.isBreakable&&!this.throwObject.throwed&&(this.throwObject.entity.destroy(),this.throwObject=null),this.isThrowing=!1;var t=this.giantConfig.firstThrowDelay,e=t[0];this.leftTimeGiantToThrow=e+(t[1]-e)*Math.random()}else null!=this.throwObject&&(this.throwObject.entity.destroy(),this.throwObject=null),this.isThrowing=!1,this.isMovingToTarget=!1,this.isMovingToCatch=!1,this.controller.Move(_$Vector3_Vector3_$Impl_$.get_ZERO()),this.onGotTotarget()}}Enemy.__name__="Enemy",Enemy.__super__=Character,Object.assign(Enemy.prototype,{__class__:Enemy});class EntityHelper{static GetComponentInChildren_GiantLifesProgress(t,e){return EntityHelper.GetComponentInChildrenByScriptClass(t,e)}static GetComponent_Store(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponentsInChildren_StoreSelectBtn(t,e){return EntityHelper.GetComponentsInChildrenByScriptClass(t,e)}static GetComponentsInChildren_Store(t,e){return EntityHelper.GetComponentsInChildrenByScriptClass(t,e)}static GetComponentsInChildren_Slot(t,e){return EntityHelper.GetComponentsInChildrenByScriptClass(t,e)}static GetComponent_ItemProgress(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponent_Slot(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponentsInChildren_WinFSItem(t,e){return EntityHelper.GetComponentsInChildrenByScriptClass(t,e)}static AddComponent_CameraCharacterObjectsManager(t,e){var i=e.__name__;return i=i.charAt(0).toLowerCase()+HxOverrides.substr(i,1,null),null==t.script&&t.addComponent("script"),t.script.create(i),t.script.get(i)}static AddComponent_ThrowObjectCharacter(t,e){var i=e.__name__;return i=i.charAt(0).toLowerCase()+HxOverrides.substr(i,1,null),null==t.script&&t.addComponent("script"),t.script.create(i),t.script.get(i)}static GetComponent_LevelObject(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponent_CharacterController(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponentInChildren_ThrowObject(t,e){return EntityHelper.GetComponentInChildrenByScriptClass(t,e)}static GetComponentInParent_CharacterControllerManager(t,e){if(null==t)return null;for(var i=e,n=pc.app.root,a=t;null!=a&&a!=n;){if(null!=a.script&&null!=a.script.scripts&&a.script.scripts.length>0)for(var r=0,s=a.script.scripts;r<s.length;){var o=s[r];if(++r,js_Boot.__instanceof(o,i))return o}a=a.parent}return null}static GetComponentInParent_Hero(t,e){if(null==t)return null;for(var i=e,n=pc.app.root,a=t;null!=a&&a!=n;){if(null!=a.script&&null!=a.script.scripts&&a.script.scripts.length>0)for(var r=0,s=a.script.scripts;r<s.length;){var o=s[r];if(++r,js_Boot.__instanceof(o,i))return o}a=a.parent}return null}static GetComponent_GrowHeroTrigger(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponentsInChildren_PartThrowObject(t,e){return EntityHelper.GetComponentsInChildrenByScriptClass(t,e)}static GetComponentInParent_ThrowObject(t,e){if(null==t)return null;for(var i=e,n=pc.app.root,a=t;null!=a&&a!=n;){if(null!=a.script&&null!=a.script.scripts&&a.script.scripts.length>0)for(var r=0,s=a.script.scripts;r<s.length;){var o=s[r];if(++r,js_Boot.__instanceof(o,i))return o}a=a.parent}return null}static GetComponent_FatalityBase(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponentInParent_Character(t,e){if(null==t)return null;for(var i=e,n=pc.app.root,a=t;null!=a&&a!=n;){if(null!=a.script&&null!=a.script.scripts&&a.script.scripts.length>0)for(var r=0,s=a.script.scripts;r<s.length;){var o=s[r];if(++r,js_Boot.__instanceof(o,i))return o}a=a.parent}return null}static GetComponent_Character(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponent_ThrowObjectCharacter(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponent_CharacterControllerManager(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponent_ThrowObject(t,e){var i=e;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,i))return r}return null}static GetComponentInChildrenByScriptClass(t,e){var i=null;if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var n=0,a=t.script.scripts;n<a.length;){var r=a[n];if(++n,js_Boot.__instanceof(r,e))return r}for(var s=0,o=t.children.length;s<o;){var l=s++;if(null!=(i=EntityHelper.GetComponentInChildrenByScriptClass(t.children[l],e)))return i}return i}static GetComponentsInChildrenByScriptClass(t,e,i){var n=null!=i?i:[];if(null!=t.script&&null!=t.script.scripts&&t.script.scripts.length>0)for(var a=0,r=t.script.scripts;a<r.length;){var s=r[a];++a,js_Boot.__instanceof(s,e)&&n.push(s)}for(var o=0,l=t.children.length;o<l;){var c=o++;EntityHelper.GetComponentsInChildrenByScriptClass(t.children[c],e,n)}return n}}EntityHelper.__name__="EntityHelper";class EntityTween{static DOLocalMove(t,e,i,n){null==n&&(n=!0);var a=t.getLocalPosition();return motion_Actuate.update($bind(t,t.setLocalPosition),i,[a.x,a.y,a.z],[e.x,e.y,e.z],n)}static DOMove(t,e,i,n){null==n&&(n=!0);var a=t.getPosition();return motion_Actuate.update($bind(t,t.setPosition),i,[a.x,a.y,a.z],[e.x,e.y,e.z],n)}static DOScale(t,e,i,n){null==n&&(n=!0);var a=t.getLocalScale();return motion_Actuate.update($bind(t,t.setLocalScale),i,[a.x,a.y,a.z],[e.x,e.y,e.z],n)}static DOLocalRotateQuaternion(t,e,i,n){return null==n&&(n=!0),motion_Actuate.update(EntityTween.slerpAndSetEntityLocalRotation,i,[t,t.getLocalRotation(),e,0],[t,t.getLocalRotation(),e,1],n)}static slerpAndSetEntityLocalRotation(t,e,i,n){t.setLocalRotation((new pc.Quat).slerp(e,i,n))}static DORotateQuaternion(t,e,i,n){return null==n&&(n=!0),motion_Actuate.update(EntityTween.slerpAndSetEntityLocalRotation,i,[t,t.getRotation(),e,0],[t,t.getRotation(),e,1],n)}static slerpAndSetEntityRotation(t,e,i,n){t.setRotation((new pc.Quat).slerp(e,i,n))}}EntityTween.__name__="EntityTween";class FailScreen extends ScriptComponent{constructor(t){super(t),this.blockedClicks=!1,this.isActive=!1}initialize(){super.initialize(),FailScreen.current=this,this.restartBtn=this.entity.findByName("RestartBtn");var t=this;null!=this.restartBtn&&this.restartBtn.button.on("click",(function(e){return t.onRestartBtnClick(),!0})),this.entity.enabled=!1}activate(t){if(null==t&&(t=0),!this.isActive){this.isActive=!0;var e=this;t>0?motion_Actuate.timer(t).onComplete((function(){return e.entity.enabled=!0})):this.entity.enabled=!0,null!=this.restartBtn&&(this.restartBtn.enabled=!1);for(var i=this.entity.findComponents("element"),n=0;n<i.length;){var a=i[n];if(++n,null!=a.opacity&&a.opacity>0){var r=a.opacity;a.opacity=0,motion_Actuate.tween(a,.4,{opacity:r}).delay(t).ease(motion_easing_Linear.get_easeNone())}}}}onAddComplete(){null!=this.restartBtn&&(this.restartBtn.enabled=!0)}onRestartBtnClick(){this.blockedClicks||(this.blockedClicks=!0,GameController.current.restart())}static Activate(t){null==t&&(t=0),null!=FailScreen.current&&FailScreen.current.activate(t)}static OnAddComplete(){null!=FailScreen.current&&FailScreen.current.onAddComplete()}}FailScreen.__name__="FailScreen",FailScreen.__super__=ScriptComponent,Object.assign(FailScreen.prototype,{__class__:FailScreen});class FatalityBase extends ScriptComponent{constructor(t){super(t),this.activated=!1,this.usedScenePrefab=null}activate(){var t=this.app.root.findComponent("light"),e=this,i=t.color.clone();null!=t&&motion_Actuate.update((function(n){return t.color=(new pc.Color).lerp(i,e.skyBoxTintColor,n)}),1.2,[0],[1]).ease(motion_easing_Quad.easeIn),this.initFatalityScene()}initFatalityScene(){var t=GameSettings.config.fatalityScenePrefab,e=this;if(null!=t){for(var i=0,n=Character.allCharacters;i<n.length;){var a=n[i];if(++i,a.isFatalityVictim){this.victim=a;break}}if(this.hero=Hero.current,null!=this.hero&&null!=this.victim){var r=this.hero.entity,s=this.entity.root,o=!0;if(null==o&&(o=!0),null==s&&(s=pc.app.scene.root),null!=r.parent)if(o){var l=r.getWorldTransform().clone(),c=s.getWorldTransform().clone().invert();l.mul2(c,l);var h=l.getTranslation(),u=(new pc.Quat).setFromMat4(l),d=l.getScale();r.reparent(s),r.setLocalPosition(h),r.setLocalRotation(u),r.setLocalScale(d)}else r.reparent(s);if(null!=this.victim){var m=this.victim.entity,_=this.entity.root,p=!0;if(null==p&&(p=!0),null==_&&(_=pc.app.scene.root),null!=m.parent)if(p){var g=m.getWorldTransform().clone(),y=_.getWorldTransform().clone().invert();g.mul2(y,g);var v=g.getTranslation(),f=(new pc.Quat).setFromMat4(g),b=g.getScale();m.reparent(_),m.setLocalPosition(v),m.setLocalRotation(f),m.setLocalScale(b)}else m.reparent(_)}t.ready((function(i){e.usedScenePrefab=js_Boot.__cast(t.resource,pc.Template).instantiate(),e.usedScenePrefab.enabled=!0,e.app.root.addChild(e.usedScenePrefab);var n=e.usedScenePrefab,a=e.usedScenePrefab.getPosition().x+150,r=0,s=0;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s);n.setPosition(o);var l=e.usedScenePrefab.findByName("HeroPos"),c=e.usedScenePrefab.findByName("GiantPos");if(null!=l){e.hero.teleportToWorldPos(l.getPosition().clone());var h=e.hero.controller.get_rigidbody(),u=h.group,d=h.mask;h.type=pc.BODYTYPE_KINEMATIC,h.group=u,h.mask=d}if(null!=c){e.victim.teleportToWorldPos(c.getPosition().clone());var m=e.victim.controller.get_rigidbody(),_=m.group,p=m.mask;m.type=pc.BODYTYPE_KINEMATIC,m.group=_,m.mask=p}return e.hero.setLookAt(e.victim),e.victim.setLookAt(e.hero),!0})),this.app.assets.load(t)}}}update(t){super.update(t)}}FatalityBase.__name__="FatalityBase",FatalityBase.__super__=ScriptComponent,Object.assign(FatalityBase.prototype,{__class__:FatalityBase});class FatalityICE extends FatalityBase{constructor(t){super(t)}initialize(){super.initialize();var t=this;null!=this.activatePhysicColliderObject&&(null!=this.activatePhysicColliderObject.collision&&this.activatePhysicColliderObject.collision.on("triggerenter",(function(e){return t.onActivateColliderHit(e),!0})),this.activatePhysicColliderObject.enabled=!1),null!=this.fatalityThrowObject&&(this.fatalityThrowObject.enabled=!1),this.objectsCont=this.getChildByName("Fatality"),null!=this.objectsCont&&(this.objectsCont.enabled=!1)}activate(){if(!this.activated&&(this.activated=!0,super.activate(),null!=this.objectsCont)){var t=EntityHelper.GetComponentInParent_Character(this.entity,Character);if(null!=t){t.animator.speed=0,t.animator.baseLayer.play("Idle"),t.animator.baseLayer.update(1e-7),t.animator.baseLayer.play("DizzyAnim"),t.animator.baseLayer.update(1e-7),t.animator.baseLayer.activeStateCurrentTime=.02;var e=t.animator.entity,i=e.getLocalPosition().clone(),n=0,a=.05*t.animator.entity.getLocalScale().clone().y,r=0;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r),o=_$Vector3_Vector3_$Impl_$.addV(i,s);e.setLocalPosition(o),window.fatality=t}motion_Actuate.timer(.4).onComplete($bind(this,this.startIceing))}}onActivateColliderHit(t){if(t==this.fatalityThrowObject&&null!=this.fatalityThrowObject){null!=this.activatePhysicColliderObject&&(this.activatePhysicColliderObject.enabled=!1);this.fatalityThrowObject;this.fatalityThrowObject=null;for(var e=0,i=this.objectsCont.children.length;e<i;){var n=e++,a=this.objectsCont.children[n];if(null!=a.rigidbody){a.rigidbody.enabled=!0,null!=a.collision&&(a.collision.enabled=!0);var r=a.rigidbody;r._group,r._mask;r._type=pc.RIGIDBODY_TYPE_DYNAMIC,r.disableSimulation(),r.createBody();var s=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(Random.get_onUnitSphere(),.5+.5*Math.random()),1e3);a.rigidbody.linearVelocity=_$Vector3_Vector3_$Impl_$.mulN(s,.016666666666666666)}}Hero.current.shakeCameraMedium()}}startIceing(){null!=this.activatePhysicColliderObject&&(this.activatePhysicColliderObject.enabled=!0),this.objectsCont.enabled=!0;for(var t=0,e=0,i=this.objectsCont.children.length;e<i;){var n=e++,a=this.objectsCont.children[n],r=a.rigidbody;null!=r&&(r.enabled=!1,null!=a.collision&&(a.collision.enabled=!1));var s=a.getLocalScale().clone(),o=_$Vector3_Vector3_$Impl_$.mulN(s,.1);a.setLocalScale(o);var l=.85+.3*Math.random();l>t&&(t=l);var c=a.getLocalScale();motion_Actuate.update($bind(a,a.setLocalScale),l,[c.x,c.y,c.z],[s.x,s.y,s.z],!0).ease(motion_easing_Quad.easeOut)}motion_Actuate.timer(t+.5).onComplete($bind(this,this.onIceApearAnimEnd))}onIceApearAnimEnd(){if(EntityHelper.GetComponentInParent_Character(this.entity,Character).animator.entity.enabled=!1,null!=this.activatePhysicColliderObject&&(this.activatePhysicColliderObject.enabled=!0),null!=this.fatalityThrowObject){var t=Hero.current;this.fatalityThrowObject=this.fatalityThrowObject.clone(),this.app.root.addChild(this.fatalityThrowObject),this.fatalityThrowObject.enabled=!0;var e=EntityHelper.GetComponent_ThrowObject(this.fatalityThrowObject,ThrowObject);null!=e&&t.putThrowObjectInRightHand(e,e.entity.rigidbody,!0)}else for(var i=0,n=this.objectsCont.children.length;i<n;){var a=i++,r=this.objectsCont.children[a],s=r.rigidbody;if(null!=s){s._group,s._mask;s._type=pc.RIGIDBODY_TYPE_DYNAMIC,s.disableSimulation(),s.createBody();var o=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(Random.get_onUnitSphere(),.5+.5*Math.random()),3e3);r.rigidbody.linearVelocity=_$Vector3_Vector3_$Impl_$.mulN(o,.016666666666666666),s.activate(),s.linearDamping=.5,s.angularDamping=.5}}}}FatalityICE.__name__="FatalityICE",FatalityICE.__super__=FatalityBase,Object.assign(FatalityICE.prototype,{__class__:FatalityICE});class FatalityUI extends ScriptComponent{constructor(t){super(t),this.isClosing=!1,this.closeCallback=null,this.isActive=!1,this.noThanksButtonShowDelay=2}initialize(){super.initialize(),FatalityUI.current=this,this.entity.enabled=!1;for(var t=this,e=0,i=this.entity.children.length;e<i;){var n=e++;0==this.entity.children[n].name.indexOf("NoThanksBtn")&&(this.noThanksBtn=this.entity.children[n]),0==this.entity.children[n].name.indexOf("Yesbtn")&&(this.yesBtn=this.entity.children[n])}null!=this.noThanksBtn&&(this.noThanksBtn.enabled=!1),null!=this.noThanksBtn&&null!=this.noThanksBtn.button&&this.noThanksBtn.button.on("click",(function(e){return t.onNoThanksBtnClick(),!0})),null!=this.yesBtn&&null!=this.yesBtn.button&&this.yesBtn.button.on("click",(function(e){return t.onYesBtnClick(),!0}))}activate(t,e){if(null==t&&(t=!0),!this.isActive){this.isActive=!0;var i=this;if(this.closeCallback=e,t)for(var n=this.entity.findComponents("element"),a=0;a<n.length;){var r=n[a];if(++a,null!=r.opacity&&r.opacity>0){var s=r.opacity;r.opacity=0,motion_Actuate.tween(r,.3,{opacity:s}).ease(motion_easing_Linear.get_easeNone())}}this.entity.enabled=!0,null!=this.noThanksBtn&&(this.noThanksBtn.enabled=!1,this.noThanksBtnTimer=motion_Actuate.timer(this.noThanksButtonShowDelay).onComplete((function(){if(!i.isClosing){i.noThanksBtn.enabled=!0;var t=i.noThanksBtn.getLocalScale().clone(),e=i.noThanksBtn,n=.05,a=.05,r=t.z;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r);e.setLocalScale(s);var o=i.noThanksBtn,l=o.getLocalScale();motion_Actuate.update($bind(o,o.setLocalScale),.3,[l.x,l.y,l.z],[t.x,t.y,t.z],!0).ease(motion_easing_Back.easeOut)}})))}}closeWindow(t){if(null==t&&(t=!0),this.isActive&&!this.isClosing){this.isClosing=!0;var e=this;if(t){for(var i=this.entity.findComponents("element"),n=[],a=[],r=0,s=i.length;r<s;){var o=i[r++];null!=o.opacity&&o.opacity>0&&(n.push(o),a.push(o.opacity),motion_Actuate.tween(o,.3,{opacity:0}).ease(motion_easing_Linear.get_easeNone()))}motion_Actuate.timer(.31).onComplete((function(){null!=e.closeCallback&&e.closeCallback(),e.closeCallback=null,e.entity.enabled=!1,e.isActive=!1,e.isClosing=!1;for(var t=0,i=n.length;t<i;){var r=t++;n[r].opacity=a[r]}}))}else this.entity.enabled=!1,null!=this.closeCallback&&this.closeCallback(),GameController.current.onFatalityCancel(),this.closeCallback=null,this.isClosing=!1,this.isActive=!1}}onYesBtnClick(){APIManager.IsRewardedAdReady()&&(APIManager.ShowRewardedAd($bind(this,this.onRewardedAdReward),$bind(this,this.onRewardFailed),"get_fatality"),this.noThanksBtn.button.enabled=!1,this.yesBtn.button.enabled=!1)}onRewardedAdReward(){this.isClosing||(this.noThanksBtn.enabled=!1,this.yesBtn.enabled=!1,null!=this.noThanksBtnTimer&&motion_Actuate.stop(this.noThanksBtnTimer,null,!1,!1),this.closeCallback=$bind(e=GameController.current,e.onFatalityAccept),this.closeWindow())}onRewardFailed(){this.noThanksBtn.button.enabled=!0,this.yesBtn.button.enabled=!0}onNoThanksBtnClick(){this.isClosing||(this.closeCallback=$bind(e=GameController.current,e.onFatalityCancel),this.closeWindow(),this.noThanksBtn.button.enabled=!1,this.yesBtn.button.enabled=!1)}update(t){super.update(t)}static get_IsActive(){return null!=FatalityUI.current&&FatalityUI.current.isActive}static Activate(t,e){null==t&&(t=!0),null!=FatalityUI.current&&FatalityUI.current.activate(t,e)}static Close(t){null==t&&(t=!0),null!=FatalityUI.current&&FatalityUI.current.closeWindow(t)}}FatalityUI.__name__="FatalityUI",FatalityUI.__properties__={get_IsActive:"get_IsActive"},FatalityUI.__super__=ScriptComponent,Object.assign(FatalityUI.prototype,{__class__:FatalityUI});class GameController extends ScriptComponent{constructor(t){super(t),this.isFatalityDialog=!1,this.canStartGame=!1,this.isSceneChanging=!1,this.initedHeroAvatarIdx=-1,this.initedEnemiesAvatarIdx=-1,this.needToChangePlayerAvatarOnInit=!1,this.inited=!1,this.levelNumEnemies=0}addEnemyHit(){this.numEnemyHits++}initialize(){super.initialize(),GameController.current=this,this.gameFinished=this.gameStarted=this.isWin=!1,this.numEnemyHits=0,this.init(),GameController.IsFirstRun&&(GameController.initSounds(),APIManager.Init(),this.app.keyboard.on(pc.EVENT_KEYDOWN,$bind(this,this.onKeyDown),this)),GameController.IsFirstRun=!1;var t=this;APIManager.onLevelStart((function(){return t.canStartGame=!0}))}init(){if(!this.inited&&!GameSettings.isLoadingLevel){this.inited=!0,this.levelObject=GameSettings.levelObject,GameController.isAimMode=null!=this.levelObject&&this.levelObject.useAimMode,GameController.isAimAllAxis=null!=this.levelObject&&this.levelObject.useAimMode&&this.levelObject.aimAllAxis,GameController.throwPowerMultiplier=this.levelObject.throwPowerMultiplier,GameController.throwPowerMultiplierEnemies=this.levelObject.throwPowerMultiplierEnemies,GameController.useRolls=this.levelObject.useRolls||this.levelObject.useRollsOnCycleLevel&&GameSettings.get_LevelsLoops()-1>0,GameController.isGiantMode=!1;for(var t=Character.allCharacters,e=0;e<t.length;){var i=t[e];if(++e,i.isGiant){GameController.isGiantMode=!0;break}}this.giantHitEffect=this.app.root.findByName("GiantHitEffect"),null!=this.giantHitEffect&&(this.giantHitEffect.enabled=!1),this.needToChangePlayerAvatarOnInit&&this.updateShopItems()}}updateShopItems(){if(null!=Shop.current)if(this.inited){null!=UIManager.current&&UIManager.current.onShopUpdate();var t=Shop.current.getSelectedItems();if(0!=t.length){for(var e=-1,i=0,n=t.length;i<n;){var a=i++;0==t[a].indexOf("item")&&(e=Std.parseInt(StringTools.replace(t[a],"item",""))-1),0==t[a].indexOf("enemy")&&Std.parseInt(StringTools.replace(t[a],"enemy",""))-1,0==t[a].indexOf("hat")&&Std.parseInt(StringTools.replace(t[a],"hat",""))-1}if(e>=0&&this.initedHeroAvatarIdx!=e){this.initedHeroAvatarIdx=e,null!=Hero.current&&Hero.current.changeAvatar(e);for(var r=0,s=GrowHeroTrigger.allGrowHeroTriggers;r<s.length;){var o=s[r];++r,o.changeAvatar(e)}}}}else this.needToChangePlayerAvatarOnInit=!0}skipLevel(){this.gameFinished=!0,this.isWin=!0,GameSettings.addLevelComplete(),this.reloadLevel()}restart(t){null==t&&(t=!1);var e=this;if(t)APIManager.onLevelRestart((function(){e.gameFinished=!0,e.reloadLevel()}));else if(!this.isSceneChanging){this.isSceneChanging=!0,this.gameFinished=!0;this.reloadLevel()}}reloadLevel(){motion_Actuate.reset(),LevelLoadingScreen.ChangeScene(this.app.scenes.list()[0].name)}onWin(){if(!this.gameFinished){this.gameFinished=!0,this.isWin=!0;var t=GameSettings.config.LEVELS_NUM_DIAMONDS,e=t[0],i=0|Math.floor(e+(t[1]-e)*Math.random());null!=LevelCompleteScreen2.current&&LevelCompleteScreen2.addColectedDiamonds(i),APIManager.onLevelEnd((function(){return motion_Actuate.timer(1).onComplete((function(){LevelCompleteScreen2.Activate()}))}),"success"),GameSettings.addLevelComplete(),null!=UIManager.current&&UIManager.current.onGameFinished(this.isWin);var n=GameSettings.config.LEVELS_NUM_DIAMONDS,a=n[0];Math.floor(a+(n[1]-a)*Math.random())}}onFail(){this.gameFinished||(this.gameFinished=!0,this.isWin=!1,null!=UIManager.current&&UIManager.current.onGameFinished(this.isWin),null!=UIManager.current&&UIManager.current.hideAfterRestartMenu(),APIManager.IsRewardedAdReady()?motion_Actuate.timer(1.5).onComplete(ReviveScreen.Activate):motion_Actuate.timer(2).onComplete($bind(this,this.onCancelRevive)))}continueOnFail(t){FailScreen.Activate(t),motion_Actuate.timer(1.5).onComplete((function(){APIManager.onLevelFail(FailScreen.OnAddComplete,"dead")}))}revive(){null!=Hero.current&&Hero.current.revive(),this.gameFinished=!1,null!=UIManager.current&&UIManager.current.onRevive();var t=GameSettings;t.set_curNumRevives(t.get_curNumRevives()+1),this.gameStarted=!1,APIManager.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Revive"})}onCancelRevive(){var t=this;APIManager.onLevelEnd((function(){APIManager.onLevelFail((function(){return motion_Actuate.timer(.4).onComplete($bind(t,t.restart))}))}),"fail")}startGame(){this.canStartGame&&(this.gameStarted||(this.gameStarted=!0,null!=Hero.current&&Hero.current.onGameStarted()))}startBigger(){this.activateGrowEffect(),Hero.current.startBigger()}activateGrowEffect(){}onGiantHit(t){if(null!=this.giantHitEffect){var e=this.giantHitEffect.clone();this.app.root.addChild(e),e.enabled=!0,e.setPosition(t);for(var i=e.findComponents("particlesystem"),n=0;n<i.length;){var a=i[n];++n,a.reset(),a.play()}motion_Actuate.timer(3).onComplete((function(){e.destroy()}))}}startFatalityDialog(){this.isFatalityDialog||(this.isFatalityDialog=!0,this.gameFinished=!0,FatalityUI.Activate(),UIManager.OnFatalityUIOpen())}onFatalityCancel(){for(var t=0,e=Character.allCharacters;t<e.length;){var i=e[t];++t,i.waitesFatalityResponce&&i.cancelFatality()}this.fatalityDialogEnd()}onFatalityAccept(){for(var t=0,e=Character.allCharacters;t<e.length;){var i=e[t];++t,i.waitesFatalityResponce&&i.activateFatality()}motion_Actuate.timer(4.5).onComplete($bind(this,this.fatalityDialogEnd))}fatalityDialogEnd(){this.gameFinished=!1,this.isFatalityDialog=!1,this.checkWinLose()}onFSClose(){this.isSceneChanging||(this.isSceneChanging=!0,this.gameFinished=!0,this.reloadLevel())}checkWinLose(){if(!this.isFatalityDialog){for(var t=!0,e=!1,i=0,n=Character.allCharacters;i<n.length;){var a=n[i];++i,a.isPlayer?a.isDead&&(t=!1):(a.isGiant&&a.isDead&&!a.waitesFatalityResponce&&!0,a.isDead||a.waitesFatalityResponce||!0,a.isDead||!a.entity.enabled||a.waitesFatalityResponce||(e=!0))}t&&!e&&this.onWin(),t||this.onFail()}}onKeyDown(t){return!0}update(t){super.update(t),this.inited&&(this.gameStarted||Shop.get_IsActive()||!Input.GetMouseButton(0)||null==UIManager.current||UIManager.current.hitsStartBlockUI()||GameController.StartGame(),this.gameFinished||this.checkWinLose())}static AddEnemyHit(){null!=GameController.current&&GameController.current.addEnemyHit()}static getLevelStr(){return"LEVEL"+GameSettings.get_curLevel()}static OnLevelLoaded(){null!=GameController.current&&GameController.current.init()}static PreloadHeroAvatar(t){if(null==t&&(t=-1),t<0){var e=Shop.current.getSelectedItems();if(0==e.length)return;for(var i=0,n=e.length;i<n;){var a=i++;if(0==e[a].indexOf("item")){t=Std.parseInt(StringTools.replace(e[a],"item",""))-1;break}}}t>=0&&GameSettings.config.heroAvatarsPrefabs.length>t&&!GameSettings.config.heroAvatarsPrefabs[t].loaded&&!GameSettings.config.heroAvatarsPrefabs[t].loading&&(GameSettings.config.heroAvatarsPrefabs[t].ready((function(t){var e=js_Boot.__cast(t.resource,pc.Template).instantiate();return pc.app.root.addChild(e),e.destroy(),!0})),pc.app.assets.load(GameSettings.config.heroAvatarsPrefabs[t]))}static Revive(){null!=GameController.current&&GameController.current.revive()}static OnCancelRevive(){null!=GameController.current&&GameController.current.onCancelRevive()}static StartGame(){null!=GameController.current&&GameController.current.startGame()}static StartBigger(){null!=GameController.current&&GameController.current.startBigger()}static ActivateGrowEffect(){null!=GameController.current&&GameController.current.activateGrowEffect()}static OnGiantHit(t){null!=GameController.current&&GameController.current.onGiantHit(t)}static pauseGameplay(){GameController.gameplayPaused||(GameController.gameplayPaused=!0,null!=Hero.current&&Hero.current.onPauseGameplay(),GameController.beforePauseGameplayTimeScale=pc.app.timeScale,pc.app.timeScale=0,motion_Actuate.pauseAll())}static resumeGameplay(){GameController.gameplayPaused&&(GameController.gameplayPaused=!1,null!=Hero.current&&Hero.current.onResumeGameplay(),pc.app.timeScale=GameController.beforePauseGameplayTimeScale,motion_Actuate.resumeAll())}static pauseGame(){GameController.paused||(GameController.paused=!0,GameController.appTickInitHandler=$bind(e=pc.app,e.tick),pc.app.elementInput.enabled=!1,pc.app.tick=function(t,e){return!0},motion_Actuate.pauseAll())}static resumeGame(){GameController.paused&&(GameController.paused=!1,pc.app.timeScale=1,pc.app.tick=GameController.appTickInitHandler,pc.app.tick(),pc.app.elementInput.enabled=!0,motion_Actuate.resumeAll())}static togglePausedGame(){GameController.paused?GameController.resumeGame():GameController.paused||GameController.pauseGame()}static get_gameMuted(){return GameController._gameMuted<0&&(GameController._gameMuted=PlayerPrefs.HasKey("GameMuted")?PlayerPrefs.GetInt("GameMuted"):0),1==GameController._gameMuted}static set_gameMuted(t){return GameController._gameMuted=t?1:0,PlayerPrefs.SetInt("GameMuted",GameController._gameMuted),1==GameController._gameMuted}static initSounds(){GameController._gameMuted>-1||(GameController._gameMuted=PlayerPrefs.HasKey("GameMuted")?PlayerPrefs.GetInt("GameMuted"):0,GameController.get_gameMuted()&&(pc.app.systems.sound.volume=0))}static muteGame(){GameController.get_gameMuted()||(GameController.set_gameMuted(!0),pc.app.systems.sound.volume=0)}static unMuteGame(){GameController.get_gameMuted()&&(GameController.set_gameMuted(!1),pc.app.systems.sound.volume=1)}static switchGameMute(){GameController.get_gameMuted()?GameController.unMuteGame():GameController.muteGame()}static mute(){GameController.muted||(GameController.muted=!0,GameController.muteWasVolume=pc.app.systems.sound.volume,pc.app.systems.sound.volume=0)}static unMute(){GameController.muted&&(GameController.muted=!1,pc.app.systems.sound.volume=GameController.muteWasVolume)}static startSpecificLevel(t){GameSettings.set_curLevel(t),GameSettings.wasLevelChange=!0,null!=GameController.current&&GameController.current.reloadLevel()}static stopGame(){null!=GameController.current&&GameController.current.reloadLevel()}}GameController.__name__="GameController",GameController.__properties__={set_gameMuted:"set_gameMuted",get_gameMuted:"get_gameMuted"},GameController.__super__=ScriptComponent,Object.assign(GameController.prototype,{__class__:GameController});class GameSettings extends ScriptComponent{constructor(t){super(t),this.curOriginalLevelIdx=0}initialize(){super.initialize(),null!=GameSettings.current?this.entity.destroy():(GameSettings.current=this,GameSettings.config=this,this.CLEAR_SAVES&&PlayerPrefs.DeleteAll()),GameSettings.isFirstRun&&(GameSettings.isFirstRun=!1,this.firstInit()),GameSettings.current.initLevel()}gotoLevel(t){GameSettings.set_curLevel(t),GameSettings.wasLevelChange=!0,null!=GameController.current&&GameController.current.restart(!0)}initLevel(){var t=this.levelsPrefabs.length,e=GameSettings.get_curLevel()-1,i=this;e>=t&&(e%=t),GameSettings.isLoadingLevel=!0,this.levelsPrefabs[e].ready((function(t){GameSettings.isLoadingLevel=!1;var n=js_Boot.__cast(i.levelsPrefabs[e].resource,pc.Template).instantiate();return pc.app.root.addChild(n),GameSettings.levelObject=EntityHelper.GetComponent_LevelObject(n,LevelObject),i.curOriginalLevelIdx=e+1,GameSettings.levelObject.isRuntime=!0,n.enabled=!0,GameController.OnLevelLoaded(),!0})),this.app.assets.load(this.levelsPrefabs[e])}firstInit(){var t=GameSettings;t.set_curSessionIdx(t.get_curSessionIdx()+1)}static get_active(){return null!=GameSettings.config}static GotoLevel(t){null!=GameSettings.config&&GameSettings.config.gotoLevel(t)}static get_CurOriginalLevelIdx(){return GameSettings.config.curOriginalLevelIdx}static get_IsFatalityLevel(){return null!=GameSettings.config&&GameSettings.get_curLevel()%GameSettings.config.fatalityEveryLevel==0}static addLevelComplete(){if(null==GameSettings.config||!GameSettings.config.dontChangeLevelOnWin){var t=GameSettings;t.set_curLevel(t.get_curLevel()+1),GameSettings.wasLevelChange=!0,GameSettings.set_curNumRevives(0)}}static get_curLevel(){return-1==GameSettings._curLevel&&(GameSettings._curLevel=PlayerPrefs.HasKey("Level")?PlayerPrefs.GetInt("Level"):1),GameSettings._curLevel}static set_curLevel(t){return GameSettings._curLevel=t,PlayerPrefs.SetInt("Level",GameSettings._curLevel),GameSettings._curLevel}static addDiamonds(t){var e=GameSettings;e.set_numDiamonds(e.get_numDiamonds()+t)}static removeDiamonds(t){var e=GameSettings;e.set_numDiamonds(e.get_numDiamonds()-t)}static get_numDiamonds(){return-1==GameSettings._numDiamonds&&(GameSettings._numDiamonds=PlayerPrefs.HasKey("NumDiamonds")?PlayerPrefs.GetInt("NumDiamonds"):0),GameSettings._numDiamonds}static set_numDiamonds(t){return GameSettings._numDiamonds=t,PlayerPrefs.SetInt("NumDiamonds",GameSettings._numDiamonds),GameSettings._numDiamonds}static get_curSessionIdx(){return-1==GameSettings._curSessionIdx&&(GameSettings._curSessionIdx=PlayerPrefs.HasKey("SessionIdx")?PlayerPrefs.GetInt("SessionIdx"):0),GameSettings._curSessionIdx}static set_curSessionIdx(t){return GameSettings._curSessionIdx=t,PlayerPrefs.SetInt("SessionIdx",GameSettings._curSessionIdx),GameSettings._curSessionIdx}static get_numLevelsStart(){return-1==GameSettings._numLevelsStart&&(GameSettings._numLevelsStart=PlayerPrefs.HasKey("NumLevelsStart")?PlayerPrefs.GetInt("NumLevelsStart"):0),GameSettings._numLevelsStart}static set_numLevelsStart(t){return GameSettings._numLevelsStart=t,PlayerPrefs.SetInt("NumLevelsStart",GameSettings._numLevelsStart),GameSettings._numLevelsStart}static get_curNumRevives(){return-1==GameSettings._curNumRevives&&(GameSettings._curNumRevives=PlayerPrefs.HasKey("CurNumRevives")?PlayerPrefs.GetInt("CurNumRevives"):0),GameSettings._curNumRevives}static set_curNumRevives(t){return GameSettings._curNumRevives=t,PlayerPrefs.SetInt("CurNumRevives",GameSettings._curNumRevives),GameSettings._curNumRevives}static get_LevelsLoops(){return null!=GameSettings.config?1+Math.floor((GameSettings.get_curLevel()-1)/GameSettings.config.levelsPrefabs.length):-1}}GameSettings.__name__="GameSettings",GameSettings.__properties__={get_LevelsLoops:"get_LevelsLoops",set_curNumRevives:"set_curNumRevives",get_curNumRevives:"get_curNumRevives",set_numLevelsStart:"set_numLevelsStart",get_numLevelsStart:"get_numLevelsStart",set_curSessionIdx:"set_curSessionIdx",get_curSessionIdx:"get_curSessionIdx",set_numDiamonds:"set_numDiamonds",get_numDiamonds:"get_numDiamonds",set_curLevel:"set_curLevel",get_curLevel:"get_curLevel",get_IsFatalityLevel:"get_IsFatalityLevel",get_CurOriginalLevelIdx:"get_CurOriginalLevelIdx",get_active:"get_active"},GameSettings.__super__=ScriptComponent,Object.assign(GameSettings.prototype,{__class__:GameSettings});class GiantExtended extends Enemy{constructor(t){super(t)}initialize(){if(super.initialize(),this.useGroinHitAnim){this.giantHitAnimName="KickToTheGroinAnim";var t=this.giantHitAnimName,e=this.animStateExitHandlers,i=[$bind(this,this.onGiantHitAnimEnd)];null!=l[t]?e.setReserved(t,i):e.h[t]=i}}postInitialize(){super.postInitialize(),this.isGiant=!0,this.faceMat=this.faceObject.render.meshInstances[0].material.clone(),this.faceObject.render.meshInstances[0].material=this.faceMat,this.initFaceMatTexture=this.faceMat.diffuseMap,null!=this.shootPosObject&&(this.shootPosObject.enabled=!1),this.hasThrowPos=null!=this.shootPosObject}startGiantMove(){this.isGiantRunningByCircle=!(100*Math.random()<this.giantRunningThroughSceneProb),super.startGiantMove()}onCharacterHitColliderHit(t){this.isGiantMoving||super.onCharacterHitColliderHit(t)}getThrowPos(){return null!=this.shootPosObject?this.shootPosObject.getPosition().clone():null!=this.lookAtObject?this.lookAtObject.getPosition():this.entity.getPosition().clone()}setFaceTexture(t){null!=this.faceMat&&(this.isDead&&null!=this.faceDeadTexture&&(t=this.faceDeadTexture.resource),this.faceMat.diffuseMap=null!=t?t:this.initFaceMatTexture,this.faceMat.opacityMap=this.faceMat.diffuseMap,this.faceMat.update())}onGiantHit(t){super.onGiantHit(t),null!=this.faceObject&&null!=this.faceAngryTexture&&(this.setFaceTexture(this.faceAngryTexture.resource),motion_Actuate.timer(this.faceAngryTextureTimeSec).onComplete($bind(this,this.setFaceTexture)))}kill(t){super.kill(t),this.setFaceTexture()}postUpdate(t){super.postUpdate(t)}}GiantExtended.__name__="GiantExtended",GiantExtended.__super__=Enemy,Object.assign(GiantExtended.prototype,{__class__:GiantExtended});class GiantLifesProgress extends ScriptComponent{constructor(t){super(t),this.curCoef=1,this.targetCoef=1}initialize(){super.initialize()}init(t){this.fillUnder=this.entity.findByName("Under").element,this.fillImage=this.entity.findByName("Fill").element,this.delimiter=this.entity.findByName("Delimiter").element,null!=this.delimiter&&(this.delimiter.entity.enabled=!1);this.fillUnder.width,this.fillImage.width;var e=(t.numMovesToDie+1)*t.numHitsToMove*this.perHitWidth;this.fillImage.width=e,this.fillUnder.width=e,this.maxFillWidth=e,this.fillRect=this.fillImage.rect.clone();var i=this.fillImage.entity,n=-e/2,a=this.fillImage.entity.getLocalPosition().clone().y,r=this.fillImage.entity.getLocalPosition().clone().z;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r);if(i.setLocalPosition(s),null!=this.delimiter)for(var o=this.fillImage.entity.getLocalPosition().clone().x,l=0,c=t.numMovesToDie;l<c;){var h=l++,u=this.delimiter.entity.clone();this.delimiter.entity.parent.addChild(u),u.enabled=!0;var d=o+(h+1)*t.numHitsToMove*this.perHitWidth,m=u.getLocalPosition().clone().y,_=u.getLocalPosition().clone().z;null==_&&(_=0),null==m&&(m=0),null==d&&(d=0);var p=new pc.Vec3(d,m,_);u.setLocalPosition(p)}}updateFill(){null!=this.fillImage&&(this.fillImage.width=this.maxFillWidth*this.curCoef,this.fillRect.copy(this.fillImage.rect),this.fillRect.z=this.curCoef,this.fillImage.rect=this.fillRect)}setPerc(t,e){null==e&&(e=!1),t=t<0?0:t>100?100:t,this.targetCoef=t/100,e&&(this.curCoef=this.targetCoef,this.updateFill())}update(t){if(super.update(t),this.targetCoef!=this.curCoef){var e=this.targetCoef-this.curCoef,i=t*this.fillSpeedPercSec/100;i>Math.abs(e)?this.curCoef=this.targetCoef:this.curCoef+=i*(e>0?1:-1),this.updateFill()}}}GiantLifesProgress.__name__="GiantLifesProgress",GiantLifesProgress.__super__=ScriptComponent,Object.assign(GiantLifesProgress.prototype,{__class__:GiantLifesProgress});class GiantRootMotionController extends ScriptComponent{postInitialize(){super.postInitialize();var t=EntityHelper.GetComponentInParent_Character(this.entity,GiantExtended);this.animator=t.animator;var e=this.entity.findComponents("render");if(null!=e&&e.length>0)for(var i=0;i<e.length;){var n=e[i];if(++i,null!=n.rootBone){this.rootEntity=this.app.getEntityFromIndex(n.rootBone).parent,this.startRot=this.rootEntity.getLocalEulerAngles();break}}}postUpdate(t){if(null!=this.rootEntity&&null!=this.animator&&"HitReactionAnim"==this.animator.layers[0].activeState){var e=this.rootEntity.getLocalEulerAngles().clone();e.y+="Idle"==this.animator.layers[0].activeState?35:70,this.rootEntity.setLocalEulerAngles(e)}}}GiantRootMotionController.__name__="GiantRootMotionController",GiantRootMotionController.__super__=ScriptComponent,Object.assign(GiantRootMotionController.prototype,{__class__:GiantRootMotionController});class GrowHeroTrigger extends ScriptComponent{initialize(){super.initialize(),GrowHeroTrigger.allGrowHeroTriggers.push(this);var t=this;this.on("destroy",(function(e){return t.OnDestroy(),!0})),this.activated=!1,this.timeToCheckAvoid=0,this.timeCheckAvoidInterval=.1,this.floorLayer=2048,this.isAvoiding=this.isAvoidRunAnim=!1,this.initAvatar(),this.controller=EntityHelper.GetComponent_CharacterController(this.entity,CharacterController),this.controller.collisionEnterHandler=$bind(this,this.OnControllerColliderHit),this.entity.collision.on("triggerenter",(function(e){return t.OnTriggerEnter(e),!0})),this.timeToCheckAvoid=this.timeCheckAvoidInterval*GrowHeroTrigger.curTimerOffsetIdx+this.timeCheckAvoidInterval,GrowHeroTrigger.curTimerOffsetIdx++,GrowHeroTrigger.curTimerOffsetIdx>=10&&(GrowHeroTrigger.curTimerOffsetIdx=0),this.setLook()}initAvatar(){this.animator=this.entity.findComponent("anim"),this.animator.baseLayer.play("IdleGH"),this.animator.baseLayer.update(2*Math.random())}changeAvatar(t){if(this.entity.enabled){var e=GameSettings.config.heroAvatarsPrefabs,i=this;t<0||null==e||t>=e.length||null!=e[t]&&(e[t].ready((function(n){var a=i.animator.entity,r=js_Boot.__cast(e[t].resource,pc.Template).instantiate();a.parent.addChild(r),r.enabled=!0;var s=a.getLocalPosition().clone();r.setLocalPosition(s);var o=a.getLocalRotation().clone();r.setLocalRotation(o);var l=a.getLocalScale().clone();return r.setLocalScale(l),a.enabled=!1,null!=a.parent&&a.parent.removeChild(a),a.destroy(),i.initAvatar(),!0})),this.app.assets.load(e[t]))}}avoidHit(){if(!this.isAvoiding&&null!=this.animator&&null!=this.controller){this.isAvoiding=!0,this.controller.enabled=!0;var t=360*Math.random(),e=_$Vector3_Vector3_$Impl_$.get_UP(),i=new pc.Quat(0,0,0,1),n=_$Quaternion_Quaternion_$Impl_$.setFromAxisAngle(i,e,t),a=0,r=0,s=1;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s),l=_$Quaternion_Quaternion_$Impl_$.mulV(n,o);l.y=0,_$Vector3_Vector3_$Impl_$.normalize(l),this.rollDir=l,this.isAvoidRunAnim=Math.random()>.5,this.animator.baseLayer.play(this.isAvoidRunAnim?"RunAnimGH":"RollAnimGH");var c=this.entity,h=_$Quaternion_Quaternion_$Impl_$.LookRotation(_$Vector3_Vector3_$Impl_$.neg(l),_$Vector3_Vector3_$Impl_$.get_UP());c.setRotation(h),this.rollStartPos=this.entity.getPosition().clone(),this.prevTime=0,this.rollTweener=motion_Actuate.update($bind(this,this.rollUpdate),.7,[0],[.7]).ease(motion_easing_Linear.get_easeNone()).onComplete($bind(this,this.onRollAnimEnd))}}rollUpdate(t){if(!this.activated){var e=t-this.prevTime;this.prevTime=t;var i=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(this.rollDir,GameSettings.config.rollMoveSpeed),e);i.y=(i.y-this.gravity*e*1e3)*e,this.controller.Move(i)}}onRollAnimEnd(){this.isAvoiding&&(this.isAvoiding=!1,this.animator.setTrigger("StartIdleGH"),this.setLook())}update(t){this.timeToCheckAvoid>0&&(this.timeToCheckAvoid-=t,this.timeToCheckAvoid<=0&&this.checkAvoid()),this.isAvoiding||this.setLook()}checkAvoid(){if(this.timeToCheckAvoid=this.timeCheckAvoidInterval,!this.isAvoiding){var t,e,i,n,a,r=this.entity.getPosition().clone();r.y+=this.avoidCheckRadius/2;for(var s=0,o=ThrowObject.AllThrowObjects;s<o.length;){var l=o[s];if(++s,null!=l&&null!=l.body&&!l.body.isKinematic()){var c=l.body.linearVelocity;if(c.length()<4)continue;if(t=l.entity.getPosition().clone(),e=c.clone().normalize(),i=_$Vector3_Vector3_$Impl_$.sub(t,r),n=e.dot(e),(a=2*i.dot(e))*a-4*n*(i.dot(i)-this.avoidCheckRadius*this.avoidCheckRadius)>0){this.avoidHit();break}}}}}setLook(){for(var t=null,e=0,i=Character.allCharacters;e<i.length;){var n=i[e];if(++e,n.isGiant&&!n.isDead){t=n;break}}if(null!=t){var a=t.entity.getPosition().clone();a.y=this.entity.getPosition().clone().y;var r=_$Quaternion_Quaternion_$Impl_$.LookRotation(_$Vector3_Vector3_$Impl_$.sub(this.entity.getPosition().clone(),a));this.entity.setRotation(r)}}OnDestroy(){null!=this.rollTweener&&motion_Actuate.stop(this.rollTweener),HxOverrides.remove(GrowHeroTrigger.allGrowHeroTriggers,this)}OnTriggerEnter(t){this.checkHitHero(t)}OnCollisionEnter(t){this.checkHitHero(t)}OnControllerColliderHit(t){var e=t.other;if(null!=e&&this.checkHitHero(e),(null==e.rigidbody||e.rigidbody.group!=this.floorLayer)&&null==EntityHelper.GetComponent_Character(e,Character)&&this.isAvoidRunAnim&&this.isAvoiding&&(null==e.rigidbody||e.rigidbody.isKinematic())){var i=360*Math.random(),n=_$Vector3_Vector3_$Impl_$.get_UP(),a=new pc.Quat(0,0,0,1),r=_$Quaternion_Quaternion_$Impl_$.setFromAxisAngle(a,n,i),s=0,o=0,l=1;null==l&&(l=0),null==o&&(o=0),null==s&&(s=0);var c=new pc.Vec3(s,o,l),h=_$Quaternion_Quaternion_$Impl_$.mulV(r,c);h.y=0,_$Vector3_Vector3_$Impl_$.normalize(h),this.rollDir=h;var u=this.entity,d=_$Quaternion_Quaternion_$Impl_$.LookRotation(_$Vector3_Vector3_$Impl_$.neg(h),_$Vector3_Vector3_$Impl_$.get_UP());u.setRotation(d)}}checkHitHero(t){if(!this.activated){var e=this,i=EntityHelper.GetComponentInParent_Hero(t,Hero);if(null!=i){this.activated=!0,i.growUp();var n=this.entity,a=.2,r=.2,s=.2;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s),l=n.getLocalScale();motion_Actuate.update($bind(n,n.setLocalScale),.2,[l.x,l.y,l.z],[o.x,o.y,o.z],!0).onComplete((function(){return e.entity.enabled=!1}))}}}}GrowHeroTrigger.__name__="GrowHeroTrigger",GrowHeroTrigger.__super__=ScriptComponent,Object.assign(GrowHeroTrigger.prototype,{__class__:GrowHeroTrigger});class Hero extends Character{get_size(){return this._size}set_size(t){if(this._size!=t){this._size;var e=_$Vector3_Vector3_$Impl_$.mulN(this.initScale,1+this.growStepScale*(t-1)),i=Math.abs(t-this._size)*this.growStepAnimTime,n=this.entity,a=n.getLocalScale();motion_Actuate.update($bind(n,n.setLocalScale),i,[a.x,a.y,a.z],[e.x,e.y,e.z],!0).ease(motion_easing_Quad.easeInOut),this._size=t,this.updateSpeedMul()}return this._size}initialize(){super.initialize(),Hero.current=this,this.stepElapsed=0,this._size=1,this.superModeSpeedMul=1,this.isSuperMode=!1,this.isStartBigger=!1,this.throwEffectInited=!1,this.isCameraShake=this.blockCameraUpdate=!1;var t=this,e=new pc.Vec3(0,0,0);if(this.shakeOffsetVec=e,this.isMoving=!1,this.mDownTime=0,this.mousePos=new pc.Vec2,this.startPos=new pc.Vec2,this.isThreatFocusAnim=!1,this.threatIsLookingAt=null,null!=this.entity.parent)for(var i=this.entity.parent,n=this.app.root;null!=i&&i!=n;){for(var a=0,r=i.children.length;a<r;){var s=a++,o=i.children[s];if(null!=o.camera&&o.enabled&&o.camera.enabled){this.cameraEntity=o;break}}i=i.parent}(this.camera=this.cameraEntity.camera,this.lookAtEnemyCont=new pc.Entity("LookAtEnemyCont"),this.entity.addChild(this.lookAtEnemyCont),this.cameraFollowObj=new pc.Entity("CameraFollowObject"),this.lookAtEnemyCont.addChild(this.cameraFollowObj),this.cameraFollowObj.setPosition(this.cameraEntity.getPosition()),this.cameraFollowObj.setRotation(this.cameraEntity.getRotation()),this.curCameraPos=this.cameraEntity.getPosition(),this.hideCameraHeroOverlapObjects)&&EntityHelper.AddComponent_CameraCharacterObjectsManager(this.cameraEntity,CameraCharacterObjectsManager).init(this.lookAtEnemyCont,this.hiddenObjectsMat);var l=this.getChildByName("Aim");null!=l&&(l.enabled=!1),this.setIsPlayer();var c=this.app.touch;null!=c?(c.on(pc.EVENT_TOUCHSTART,$bind(this,this.onTouchStart),this),c.on(pc.EVENT_TOUCHMOVE,$bind(this,this.onTouchMove),this),c.on(pc.EVENT_TOUCHEND,$bind(this,this.onTouchEnd),this),c.on(pc.EVENT_TOUCHCANCEL,$bind(this,this.onTouchCancel),this),this.on("destroy",(function(){return c.off(pc.EVENT_TOUCHSTART,$bind(t,t.onTouchStart),t),c.off(pc.EVENT_TOUCHMOVE,$bind(t,t.onTouchMove),t),c.off(pc.EVENT_TOUCHEND,$bind(t,t.onTouchEnd),t),c.off(pc.EVENT_TOUCHCANCEL,$bind(t,t.onTouchCancel),t)}),this)):(this.app.mouse.on(pc.EVENT_MOUSEMOVE,$bind(this,this.onMouseMove),this),this.app.mouse.on(pc.EVENT_MOUSEDOWN,$bind(this,this.onMouseDown),this),this.app.mouse.on(pc.EVENT_MOUSEUP,$bind(this,this.onMouseUp),this))}postInitialize(){super.postInitialize(),this.joystick=Joystick.current}activateSuperMode(t){null==t&&(t=1),this.isSuperMode||(this.isSuperMode=!0,this.superModeSpeedMul=t,this.updateSpeedMul())}deactivateSuperMode(){this.isSuperMode&&(this.isSuperMode=!1,this.superModeSpeedMul=1,this.updateSpeedMul())}growUp(){this.set_size(this.get_size()+1)}updateSpeedMul(){this.speedMul=this.superModeSpeedMul+(this.get_size()-1)*this.growAddSpeedMul}startBigger(){this.isStartBigger||(this.isStartBigger=!0,this.set_size(GameSettings.config.startBiggerSize+1))}initThrowEffect(){this.throwEffectInited||(this.throwEffectInited=!0)}kill(t){this.isSuperMode||super.kill(t)}shakeCamera(){if(!this.isCameraShake&&!this.blockCameraUpdate){this.isCameraShake=!0,_$Vector3_Vector3_$Impl_$.set(this.shakeOffsetVec,0,0,0);var t=this;ShakeEffect.DOShakeVector3((function(e){return t.shakeOffsetVec=e}),.4,.3).onComplete((function(){return t.isCameraShake=!1}))}}shakeCameraMedium(){if(!this.isCameraShake&&!this.blockCameraUpdate){this.isCameraShake=!0,_$Vector3_Vector3_$Impl_$.set(this.shakeOffsetVec,0,0,0);var t=this;ShakeEffect.DOShakeVector3((function(e){return t.shakeOffsetVec=e}),2,.65).onComplete((function(){return t.isCameraShake=!1}))}}shakeGiantCamera(){if(!this.isCameraShake&&!this.blockCameraUpdate){this.isCameraShake=!0,_$Vector3_Vector3_$Impl_$.set(this.shakeOffsetVec,0,0,0);var t=this;ShakeEffect.DOShakeVector3((function(e){return t.shakeOffsetVec=e}),.15,.25).onComplete((function(){return t.isCameraShake=!1}))}}updateCamera(t){if(!(this.blockCameraUpdate||t<=0)){var e=this.curCameraPos,i=this.cameraFollowObj.getPosition(),n=20*t;n=n>1?1:n<0?0:n;var a=e.x+(i.x-e.x)*n,r=e.y+(i.y-e.y)*n,s=e.z+(i.z-e.z)*n;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s);this.curCameraPos=o;var l=this.cameraEntity,c=this.cameraEntity.getRotation(),h=this.cameraFollowObj.getRotation(),u=20*t;u=u>1?1:u<0?0:u,l.setRotation(js_Boot.__cast(_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(c),c,h,u),pc.Quat)),this.curCameraPos.y<.5&&(this.curCameraPos.y=.5),this.cameraEntity.setPosition(js_Boot.__cast(this.curCameraPos,pc.Vec3)),this.isCameraShake&&this.cameraEntity.setPosition(js_Boot.__cast(_$Vector3_Vector3_$Impl_$.addV(this.shakeOffsetVec,this.cameraEntity.getPosition()),pc.Vec3))}}setLookAt(t){this.enemy=t,this.updateLook(!0,.016666666666666666),this.updateEnemy(),this.curCameraPos=this.cameraFollowObj.getPosition(),this.cameraEntity.setRotation(this.cameraFollowObj.getRotation())}doThrowObject(t){null!=this.throwObject&&this.isSuperMode&&null!=SuperMode.current&&(this.throwObject.giantDammage*=SuperMode.current.damageMultiplier),super.doThrowObject(null)}updateRollControls(){if(!this.isRolling&&!this.isMoving&&Date.now()/1e3-this.mDownTime<GameSettings.config.timeToDetectSwipe&&(new pc.Vec2).sub2(this.mousePos,this.startPos).length()>20){var t=RaycastHelper.PlaneRaycast(pc.Vec3.UP,pc.Vec3.ZERO,this.camera.entity.getPosition(),this.camera.screenToWorld(this.startPos.x,this.startPos.y,this.camera.farClip).sub(this.camera.entity.getPosition()).normalize()),e=RaycastHelper.PlaneRaycast(pc.Vec3.UP,pc.Vec3.ZERO,this.camera.entity.getPosition(),this.camera.screenToWorld(this.mousePos.x,this.mousePos.y,this.camera.farClip).sub(this.camera.entity.getPosition()).normalize());if(null==t||null==e)return;var i=_$Vector3_Vector3_$Impl_$.sub(t,e);i.y=0,_$Vector3_Vector3_$Impl_$.normalize(i),this.doRoll(i)}}onGameStarted(){this.startMove()}startMove(){}stopMove(){}onPauseGameplay(){this.stopMove()}onResumeGameplay(){}onTouchStart(t){return GameController.gameplayPaused||(this.startPos.set(t.touches[0].x,t.touches[0].y),this.mousePos.set(t.touches[0].x,t.touches[0].y),this.startMove(),this.mDownTime=Date.now()/1e3),!0}onTouchMove(t){return GameController.gameplayPaused||this.mousePos.set(t.touches[0].x,t.touches[0].y),!0}onTouchEnd(t){return GameController.gameplayPaused||this.stopMove(),!0}onTouchCancel(t){return GameController.gameplayPaused||this.stopMove(),!0}onMouseDown(t){return GameController.gameplayPaused||t.button==pc.MOUSEBUTTON_LEFT&&(this.startPos.set(t.x,t.y),this.mousePos.set(t.x,t.y),this.startMove(),this.mDownTime=Date.now()/1e3),!0}onMouseMove(t){return GameController.gameplayPaused||this.mousePos.set(t.x,t.y),!0}onMouseUp(t){return GameController.gameplayPaused||t.button==pc.MOUSEBUTTON_LEFT&&this.stopMove(),!0}updateThreatFocus(){if(GameSettings.config.useFocusOnThreat)if(this.isThreatFocusAnim)this.threatIsLookingAt=null!=this.threat?this.threat:this.threatIsLookingAt;else{var t=this;if(this.threatIsLookingAt!=this.threat&&(this.threatIsLookingAt=this.threat,null!=this.threatIsLookingAt)){this.isThreatFocusAnim=!0;var e=pc.app.systems.camera.cameras[0].fov;motion_Actuate.update((function(t){var i=t<=1?1-t:t-1;return i=motion_easing_Quad.easeInOut.calculate(i),pc.app.systems.camera.cameras[0].fov=e-10+10*i}),.7,[0],[2]).ease(motion_easing_Linear.get_easeNone()).onComplete((function(){return t.isThreatFocusAnim=!1})),motion_Actuate.update((function(t){var e=t<=1?t:t-1;return e=motion_easing_Quad.easeInOut.calculate(e),pc.app.timeScale=t<=1?1-.6*e:.4+.6*e}),.7,[0],[2]).ease(motion_easing_Linear.get_easeNone())}}}revive(){super.revive(),null!=this.joystick&&this.joystick.reset()}updateLook(t,e){null==t&&(t=!1),this.updateThreatFocus();var i=e*(this.isThreatFocusAnim?1/this.app.timeScale:1)*2.3;t&&(i=1);var n=null!=this.enemy?this.enemy.get_lookAtPos():_$Vector3_Vector3_$Impl_$.get_ZERO(),a=_$Vector3_Vector3_$Impl_$.sub(this.get_lookAtPos(),n).clone().normalize();a.y>.4&&null!=this.enemy&&!this.enemy.isGiant&&(a.y=.4,_$Vector3_Vector3_$Impl_$.normalize(a));var r=null!=this.enemy?_$Quaternion_Quaternion_$Impl_$.LookRotation(a):this.lookAtEnemyCont.getRotation();null!=this.threatIsLookingAt&&(n=this.threatIsLookingAt.get_position());var s=n.x,o=this.get_lookAtPos().y,l=n.z;null==l&&(l=0),null==o&&(o=0),null==s&&(s=0);var c=new pc.Vec3(s,o,l),h=null!=this.enemy?_$Quaternion_Quaternion_$Impl_$.LookRotation(_$Vector3_Vector3_$Impl_$.sub(this.get_lookAtPos(),c)):this.entity.getRotation(),u=this.entity,d=this.get_rotation(),m=i;m=m>1?1:m<0?0:m,u.setRotation(js_Boot.__cast(_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(d),d,h,m),pc.Quat));var _=this.lookAtEnemyCont,p=this.lookAtEnemyCont.getRotation(),g=i;if(g=g>1?1:g<0?0:g,_.setRotation(js_Boot.__cast(_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(p),p,r,g),pc.Quat)),null!=this.joystick){var y=this.joystick.direction,v=y.x,f=0,b=y.y;null==b&&(b=0),null==f&&(f=0),null==v&&(v=0);var S=new pc.Vec3(v,f,b);this.moveDirection=S,this.moveDirection=_$Vector3_Vector3_$Impl_$.mulN(this.moveDirection,this.speed),this.moveDirection=_$Vector3_Vector3_$Impl_$.addV(_$Vector3_Vector3_$Impl_$.mulN(js_Boot.__cast(this.entity.forward,pc.Vec3),y.y),_$Vector3_Vector3_$Impl_$.mulN(js_Boot.__cast(this.entity.right,pc.Vec3),-y.x)),_$Vector3_Vector3_$Impl_$.normalize(this.moveDirection),this.moveDirection=_$Vector3_Vector3_$Impl_$.mulN(this.moveDirection,this.speed),this.moveDirection.y-=this.gravity*e*1e3,this.controller.Move(_$Vector3_Vector3_$Impl_$.mulN(this.moveDirection,e))}}putThrowObjectInClosestHand(t,e,i){null==i&&(i=!1),this.isPlayer&&null!=t&&!t.heroGrowActivated||super.putThrowObjectInClosestHand(t,e,i)}postUpdate(t){super.postUpdate(t);var e=this.animator.layers[1].activeState;"StrafeAnimLeft"!=e&&"StrafeAnimationRight"!=e&&"RunForwardAnim"!=e&&"RunningBackwardAnim"!=e||(this.stepElapsed-=t,this.stepElapsed<=0&&(this.stepElapsed=.34,"RunForwardAnim"==e&&(this.stepElapsed=.45),"RunningBackwardAnim"==e&&(this.stepElapsed=.28),SoundsController.Play("Step"+(1+Math.floor(4*Math.random())),.12))),this.isMoving&&GameController.current.gameFinished&&this.stopMove(),this.updateCamera(t),!this.isDead&&GameController.current.gameStarted?GameController.current.gameFinished||(GameController.useRolls&&this.updateRollControls(),this.updateLook(!1,t)):!this.isDead&&this.updateCameraLookBeforeGameStarted&&this.updateLook(!1,t)}static ClampRotationX(t,e,i){t.x/=t.w,t.y/=t.w,t.z/=t.w,t.w=1;var n=114.5915590261646*Math.atan(t.x);return n=n<e?e:n>i?i:n,t.x=Math.tan(.00872664625997*n),_$Quaternion_Quaternion_$Impl_$.normalize(t)}}Hero.__name__="Hero",Hero.__super__=Character,Object.assign(Hero.prototype,{__class__:Hero,__properties__:Object.assign({},Character.prototype.__properties__,{set_size:"set_size",get_size:"get_size"})});class HeroDirectControls extends Hero{initialize(){super.initialize(),this.animationControlRotCont=new pc.Entity("AnimationControlRotCont"),this.entity.addChild(this.animationControlRotCont),this.animationControlRotCont.setLocalPosition(0,0,0),this.animationControlRotCont.enabled=!0,this.initAnimatorLocRotation=this.animator.entity.getLocalRotation()}doRoll(t){var e=this.animator.entity,i=this.initAnimatorParent,n=!1;if(null==n&&(n=!0),null==i&&(i=pc.app.scene.root),null!=e.parent)if(n){var a=e.getWorldTransform().clone(),r=i.getWorldTransform().clone().invert();a.mul2(r,a);var s=a.getTranslation(),o=(new pc.Quat).setFromMat4(a),l=a.getScale();e.reparent(i),e.setLocalPosition(s),e.setLocalRotation(o),e.setLocalScale(l)}else e.reparent(i);this.animator.entity.setLocalRotation(this.initAnimatorLocRotation),super.doRoll(t)}updateLook(t,e){if(null==t&&(t=!1),!this.isRolling&&this.animator.entity.parent!=this.animationControlRotCont){var i=this.animator.entity,n=this.animationControlRotCont,a=!1;if(null==a&&(a=!0),null==n&&(n=pc.app.scene.root),null!=i.parent)if(a){var r=i.getWorldTransform().clone(),s=n.getWorldTransform().clone().invert();r.mul2(s,r);var o=r.getTranslation(),l=(new pc.Quat).setFromMat4(r),c=r.getScale();i.reparent(n),i.setLocalPosition(o),i.setLocalRotation(l),i.setLocalScale(c)}else i.reparent(n);this.animator.entity.setLocalRotation(this.initAnimatorLocRotation)}var h=null!=this.enemy?this.enemy.get_lookAtPos():_$Vector3_Vector3_$Impl_$.get_ZERO(),u=_$Vector3_Vector3_$Impl_$.sub(this.get_lookAtPos(),h).clone().normalize();u.y>.4&&null!=this.enemy&&!this.enemy.isGiant&&(u.y=.4,_$Vector3_Vector3_$Impl_$.normalize(u));var d=null!=this.enemy?_$Quaternion_Quaternion_$Impl_$.LookRotation(u):this.lookAtEnemyCont.getRotation(),m=js_Boot.__cast(this.camera.entity.forward,pc.Vec3),_=57.2957795130823*Math.atan2(m.x,m.z),p=0==this.joystick.direction.x?0:-this.joystick.direction.x,g=0==this.joystick.direction.y?0:-this.joystick.direction.y;if(this.isRolling){var y=this.lookAtEnemyCont,v=this.lookAtEnemyCont.getRotation(),f=2.3*e+(t?1:0);f=f>1?1:f<0?0:f,y.setRotation(_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(v),v,d,f));var b=57.2957795130823*Math.atan2(p,g)+_,S=new pc.Quat(0,0,0,1),C=_$Quaternion_Quaternion_$Impl_$.setFromEulerAngles(S,0,b,0),I=this.animationControlRotCont,M=this.animationControlRotCont.getRotation(),w=7*e+(t?1:0);w=w>1?1:w<0?0:w,I.setRotation(_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(M),M,C,w))}else if(null!=this.joystick){var P=this.lookAtEnemyCont,T=this.lookAtEnemyCont.getRotation(),O=2.3*e+(t?1:0);if(O=O>1?1:O<0?0:O,P.setRotation(_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(T),T,d,O)),GameController.current.gameStarted){var B=57.2957795130823*Math.atan2(p,g)+_,A=new pc.Quat(0,0,0,1),k=_$Quaternion_Quaternion_$Impl_$.setFromEulerAngles(A,0,B,0),$=this.animationControlRotCont,G=this.animationControlRotCont.getRotation(),E=7*e+(t?1:0);if(E=E>1?1:E<0?0:E,$.setRotation(_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(G),G,k,E)),t){u.y=0;var R=this.animationControlRotCont,L=_$Quaternion_Quaternion_$Impl_$.LookRotation(u);R.setRotation(L)}if(this.isMoving){var j=this.controlSpeedByJoystick?this.joystick.get_speedCoef():1;j*=this.speedMul,this.moveDirection=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(js_Boot.__cast(this.animationControlRotCont.forward,pc.Vec3),-1),this.speed),j),this.moveDirection.y-=this.gravity*e*1e3,this.controller.Move(_$Vector3_Vector3_$Impl_$.mulN(this.moveDirection,e)),0==j&&this.setMoveAnimState()}else this.moveDirection.x=this.moveDirection.z=0,this.moveDirection.y=-this.gravity*e*1e3,this.controller.Move(_$Vector3_Vector3_$Impl_$.mulN(this.moveDirection,e)),this.setMoveAnimState()}}}}HeroDirectControls.__name__="HeroDirectControls",HeroDirectControls.__super__=Hero,Object.assign(HeroDirectControls.prototype,{__class__:HeroDirectControls});class HxOverrides{static cca(t,e){var i=t.charCodeAt(e);if(i==i)return i}static substr(t,e,i){if(null==i)i=t.length;else if(i<0){if(0!=e)return"";i=t.length+i}return t.substr(e,i)}static remove(t,e){var i=t.indexOf(e);return-1!=i&&(t.splice(i,1),!0)}static iter(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}}}HxOverrides.__name__="HxOverrides";class _$Vector3_Vector3_$Impl_${static get_BACK(){return new pc.Vec3(0,0,1)}static get_DOWN(){return new pc.Vec3(0,-1,0)}static get_FORWARD(){return new pc.Vec3(0,0,-1)}static get_LEFT(){return new pc.Vec3(-1,0,0)}static get_ONE(){return new pc.Vec3(1,1,1)}static get_RIGHT(){return new pc.Vec3(1,0,0)}static get_UP(){return new pc.Vec3(0,1,0)}static get_ZERO(){return new pc.Vec3(0,0,0)}static Distance(t,e){return _$Vector3_Vector3_$Impl_$.sub(t,e).length()}static Angle(t,e){var i=Math.sqrt(t.lengthSq()*e.lengthSq());if(i<_$Vector3_Vector3_$Impl_$.kEpsilonNormalSqrt)return 0;var n=t.dot(e)/i,a=n<-1?-1:n>1?1:n;return 57.2957795130823*Math.acos(a)}static SignedAngle(t,e,i){var n,a=Math.sqrt(t.lengthSq()*e.lengthSq());if(a<_$Vector3_Vector3_$Impl_$.kEpsilonNormalSqrt)n=0;else{var r=t.dot(e)/a,s=r<-1?-1:r>1?1:r;n=57.2957795130823*Math.acos(s)}var o=t.y*e.z-t.z*e.y,l=t.z*e.x-t.x*e.z,c=t.x*e.y-t.y*e.x;return n*(i.x*o+i.y*l+i.z*c>=0?1:-1)}static Dot(t,e){return t.dot(e)}static _new(t,e,i){return null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),new pc.Vec3(t,e,i)}static addV(t,e){return new pc.Vec3(t.x+e.x,t.y+e.y,t.z+e.z)}static mulV(t,e){return new pc.Vec3(t.x*e.x,t.y*e.y,t.z*e.z)}static mulN(t,e){return new pc.Vec3(t.x*e,t.y*e,t.z*e)}static devV(t,e){return new pc.Vec3(t.x/e.x,t.y/e.y,t.z/e.z)}static devN(t,e){return new pc.Vec3(t.x/e,t.y/e,t.z/e)}static neg(t){return new pc.Vec3(-1*t.x,-1*t.y,-1*t.z)}static sub(t,e){return new pc.Vec3(t.x-e.x,t.y-e.y,t.z-e.z)}static get_normalized(t){return t.clone().normalize()}static get_magnitude(t){return t.length()}static get_sqrMagnitude(t){return t.lengthSq()}static Lerp(t,e,i){i=i>1?1:i<0?0:i;var n=t.x+(e.x-t.x)*i,a=t.y+(e.y-t.y)*i,r=t.z+(e.z-t.z)*i;return null==r&&(r=0),null==a&&(a=0),null==n&&(n=0),new pc.Vec3(n,a,r)}static ClampMagnitude(t,e){var i=t.lengthSq();if(i>e*e){var n=Math.sqrt(i),a=t.x/n*e,r=t.y/n*e,s=t.z/n*e;return null==s&&(s=0),null==r&&(r=0),null==a&&(a=0),new pc.Vec3(a,r,s)}return t}static clone(t){return t.clone()}static set(t,e,i,n){return t.set(e,i,n)}static normalize(t){return t.normalize()}static copy(t,e){return t.copy(e)}static project(t,e){return t.project(e)}static cross(t,e,i){return t.cross(e,i)}static lerp(t,e,i,n){return t.lerp(e,i,n)}}_$Vector3_Vector3_$Impl_$.__name__="_Vector3.Vector3_Impl_",_$Vector3_Vector3_$Impl_$.__properties__={get_sqrMagnitude:"get_sqrMagnitude",get_magnitude:"get_magnitude",get_normalized:"get_normalized",get_ZERO:"get_ZERO",get_UP:"get_UP",get_RIGHT:"get_RIGHT",get_ONE:"get_ONE",get_LEFT:"get_LEFT",get_FORWARD:"get_FORWARD",get_DOWN:"get_DOWN",get_BACK:"get_BACK"};class Input{static Init(){if(!Input.inited&&null!=pc.app){Input.inited=!0;var t=pc.app.touch;null!=t?(t.on(pc.EVENT_TOUCHSTART,Input.onTouchStart),t.on(pc.EVENT_TOUCHMOVE,Input.onTouchMove),t.on(pc.EVENT_TOUCHEND,Input.onTouchEnd),t.on(pc.EVENT_TOUCHCANCEL,Input.onTouchCancel)):(pc.app.mouse.on(pc.EVENT_MOUSEMOVE,Input.onMouseMove),pc.app.mouse.on(pc.EVENT_MOUSEDOWN,Input.onMouseDown),pc.app.mouse.on(pc.EVENT_MOUSEUP,Input.onMouseUp)),pc.app.on("update",(function(t){return Input.Update(t),!0}))}}static GetMouseButton(t){return!(t>2||t<0)&&Input.mouseButtonsPressStates[t]}static GetMouseButtonDown(t){return!(t>2||t<0)&&Input.mouseButtonsWasPressStates[t]}static GetMouseButtonUp(t){return!(t>2||t<0)&&Input.mouseButtonsWasReleaseStates[t]}static get_mousePosition(){return _$Vector3_Vector3_$Impl_$.clone(Input.curMPos)}static onTouchStart(t){return Input.mouseButtonsPressStates[0]||(_$Vector3_Vector3_$Impl_$.set(Input.mDownPos,t.changedTouches[0].x,t.changedTouches[0].y,0),_$Vector3_Vector3_$Impl_$.set(Input.curMPos,t.changedTouches[0].x,t.changedTouches[0].y,0),Input.mouseButtonsPressStates[0]=!0,Input.mouseButtonsWasPressStates[0]=!0,Input.touchID=t.changedTouches[0].id),!0}static onTouchMove(t){if(Input.mouseButtonsPressStates[0]){var e=t.getTouchById(Input.touchID,t.changedTouches);null!=e&&_$Vector3_Vector3_$Impl_$.set(Input.curMPos,e.x,e.y,0)}return!0}static onTouchEnd(t){Input.mouseButtonsPressStates[0]&&(null!=t.getTouchById(Input.touchID,t.changedTouches)&&(Input.mouseButtonsWasReleaseStates[0]=!0,Input.mouseButtonsPressStates[0]=!1));return!0}static onTouchCancel(t){Input.mouseButtonsPressStates[0]&&(null!=t.getTouchById(Input.touchID,t.changedTouches)&&(Input.mouseButtonsWasReleaseStates[0]=!0,Input.mouseButtonsPressStates[0]=!1));return!0}static onMouseDown(t){var e=Input.getMouseButtonIdx(t);return Input.mouseButtonsPressStates[e]=!0,Input.mouseButtonsWasPressStates[e]=!0,_$Vector3_Vector3_$Impl_$.set(Input.curMPos,t.x,t.y,0),0==e&&_$Vector3_Vector3_$Impl_$.set(Input.mDownPos,t.x,t.y,0),!0}static onMouseMove(t){return _$Vector3_Vector3_$Impl_$.set(Input.curMPos,t.x,t.y,0),!0}static onMouseUp(t){var e=Input.getMouseButtonIdx(t);return Input.mouseButtonsPressStates[e]=!1,Input.mouseButtonsWasReleaseStates[e]=!0,!0}static Update(t){for(var e=0,i=Input.mouseButtonsWasPressStates.length;e<i;){var n=e++;Input.mouseButtonsWasPressStates[n]=!1}for(var a=0,r=Input.mouseButtonsWasReleaseStates.length;a<r;){var s=a++;Input.mouseButtonsWasReleaseStates[s]=!1}}static getMouseButtonIdx(t){return 0==t.button?0:1==t.button?1:2}}Input.__name__="Input",Input.__properties__={get_mousePosition:"get_mousePosition"};class ItemProgress extends ScriptComponent{initialize(){super.initialize();for(var t=0,e=this.entity.children.length;t<e;){var i=t++,n=this.entity.children[i];0==n.name.indexOf("Rays1")?this.raysObj1=n:0==n.name.indexOf("Rays2")?this.raysObj2=n:0==n.name.indexOf("PercTF")&&(this.percTF=n.element)}this.allItems=EntityHelper.GetComponentsInChildren_WinFSItem(this.entity,WinFSItem);for(var a=0,r=this.allItems;a<r.length;){var s=r[a];++a,s.init(),s.deactivate()}this.raysObj1.enabled=!1,this.raysObj2.enabled=!1}preInit(t,e){this.activeItem=null;for(var i=0,n=this.allItems;i<n.length;){var a=n[i];++i,a.entity.name==t&&null==this.activeItem?(this.activeItem=a,a.activate()):a.deactivate()}null!=this.activeItem&&(this.percTF.text=(0|Math.floor(e))+"%",this.activeItem.setFillPerc(e))}init(t,e,i,n){this.activeItem=null;for(var a=this,r=0,s=this.allItems;r<s.length;){var o=s[r];++r,o.entity.name==t&&null==this.activeItem?(this.activeItem=o,o.activate()):o.deactivate()}if(null!=this.activeItem){i>=100&&(i=100),e>=100&&(e=100),i<0&&(i=0),e<0&&(e=0),this.percTF.text=(0|Math.floor(e))+"%",this.activeItem.setFillPerc(e);var l=Math.min(1.5,Math.max(.7,.05*(i-e))),c=e;motion_Actuate.update((function(t){return c=t,a.activeItem.setFillPerc(t),a.percTF.text=(0|Math.floor(t))+"%"}),l,[c],[i]).ease(motion_easing_Quad.easeInOut).delay(.2).onComplete((function(){100==i&&a.onFillComplete(),null!=n&&n()}))}}onFillComplete(){this.raysObj1.enabled=!0,this.raysObj2.enabled=!0,js_Boot.__cast(this.percTF,pc.ElementComponent).entity.enabled=!1;var t=this;if(null!=this.activeItem){this.activeItem.setCompleted();var e=this.activeItem.entity,i=_$Vector3_Vector3_$Impl_$.mulN(this.activeItem.entity.getLocalScale().clone(),1.1),n=e.getLocalScale();motion_Actuate.update($bind(e,e.setLocalScale),1.2,[n.x,n.y,n.z],[i.x,i.y,i.z],!0).reflect().repeat(-1).ease(motion_easing_Quad.easeInOut);var a=this.activeItem.entity.getLocalRotation().clone();motion_Actuate.update((function(e){var i=t.activeItem.entity,n=10*Math.sin(2*Mathf.PI*e),r=new pc.Quat(0,0,0,1),s=_$Quaternion_Quaternion_$Impl_$.setFromEulerAngles(r,0,0,n),o=_$Quaternion_Quaternion_$Impl_$.mulQ(a,s);return i.setLocalRotation(o),o}),1.4,[0],[1]).ease(motion_easing_Linear.get_easeNone()).repeat(-1)}}update(t){super.update(t),null!=this.raysObj1&&this.raysObj1.enabled&&this.raysObj1.rotateLocal(0,0,-.1),null!=this.raysObj2&&this.raysObj2.enabled&&this.raysObj2.rotateLocal(0,0,.07)}}ItemProgress.__name__="ItemProgress",ItemProgress.__super__=ScriptComponent,Object.assign(ItemProgress.prototype,{__class__:ItemProgress});class Joystick extends ScriptComponent{get_speedCoef(){var t=new pc.Vec2(this.knob.x-this.center.x,this.knob.y-this.center.y).length()/this.__attributes.radius;return t<.15?0:t}initialize(){super.initialize(),Joystick.current=this,this.center=new pc.Vec2,this.knob=new pc.Vec2,this.start=new pc.Vec2,this.direction=new pc.Vec2,this.curMPos=new pc.Vec2,this.isMouseDown=!1;var t=this.app.touch,e=this;null!=t?(t.on(pc.EVENT_TOUCHSTART,$bind(this,this.onTouchStart),this),t.on(pc.EVENT_TOUCHMOVE,$bind(this,this.onTouchMove),this),t.on(pc.EVENT_TOUCHEND,$bind(this,this.onTouchEnd),this),t.on(pc.EVENT_TOUCHCANCEL,$bind(this,this.onTouchCancel),this),this.on("destroy",(function(){return t.off(pc.EVENT_TOUCHSTART,$bind(e,e.onTouchStart),e),t.off(pc.EVENT_TOUCHMOVE,$bind(e,e.onTouchMove),e),t.off(pc.EVENT_TOUCHEND,$bind(e,e.onTouchEnd),e),t.off(pc.EVENT_TOUCHCANCEL,$bind(e,e.onTouchCancel),e)}),this)):(this.app.mouse.on(pc.EVENT_MOUSEMOVE,$bind(this,this.onMouseMove),this),this.app.mouse.on(pc.EVENT_MOUSEDOWN,$bind(this,this.onMouseDown),this),this.app.mouse.on(pc.EVENT_MOUSEUP,$bind(this,this.onMouseUp),this))}reset(){this.direction.set(0,0)}onMDown(t,e){this.start.set(t,e),this.knob.set(t,e),this.center.set(t,e),this.curMPos.set(t,e),this.isMouseDown=!0}onMMove(t,e){if(this.curMPos.set(t,e),this.isMouseDown){this.knob.set(t,e);var i=new pc.Vec2(this.knob.x-this.center.x,this.knob.y-this.center.y),n=i.length();if(n>this.__attributes.radius&&i.divScalar(n/this.__attributes.radius),this.knob=this.center.clone().add(i),!this.knob.equals(this.curMPos)&&!this.__attributes.fixedJoystick){var a=new pc.Vec2(this.curMPos.x-this.knob.x,this.curMPos.y-this.knob.y);this.center.add(a)}this.direction.set(this.knob.x-this.center.x,this.knob.y-this.center.y),this.direction.normalize()}}onMUp(){this.direction.set(0,0),this.isMouseDown=!1}onTouchStart(t){return this.onMDown(t.touches[0].x,t.touches[0].y),!0}onTouchMove(t){return this.onMMove(t.touches[0].x,t.touches[0].y),!0}onTouchEnd(t){return this.onMUp(),!0}onTouchCancel(t){return this.onMUp(),!0}onMouseDown(t){return t.button==pc.MOUSEBUTTON_LEFT&&this.onMDown(t.x,t.y),!0}onMouseMove(t){return this.onMMove(t.x,t.y),!0}onMouseUp(t){return t.button==pc.MOUSEBUTTON_LEFT&&this.onMUp(),!0}}Joystick.__name__="Joystick",Joystick.__super__=ScriptComponent,Object.assign(Joystick.prototype,{__class__:Joystick,__properties__:Object.assign({},ScriptComponent.prototype.__properties__,{get_speedCoef:"get_speedCoef"})});class Lambda{static array(t){for(var e=[],i=function $getIterator(t){return t instanceof Array?HxOverrides.iter(t):t.iterator()}(t);i.hasNext();){var n=i.next();e.push(n)}return e}}Lambda.__name__="Lambda";class LevelCompleteScreen2 extends ScriptComponent{constructor(t){super(t),this.curItemUnlocked=!1,this.curMoneyMultiplier=1,this.curMoneyMultiplierBtnMultIdx=-1,this.isCompleteItem=!1,this.currentPerc=0,this.initPerc=0,this.isClosing=!1,this.closeCallback=null,this.isActive=!1,this.lastRewardClickBtn=null}get_useMoneyMultiplierBtn(){return null!=this.moneyMultipliersList&&this.moneyMultipliersList.length>0&&null!=this.moneyMultiplierBtn}initialize(){super.initialize(),LevelCompleteScreen2.current=this,this.entity.enabled=!1;for(var t=0,e=this.entity.children.length;t<e;){var i=t++,n=this.entity.children[i];0==n.name.indexOf("ItemProgress")?this.itemProgress=EntityHelper.GetComponent_ItemProgress(n,ItemProgress):0==n.name.indexOf("UseBtn")?this.useBtn=n:0==n.name.indexOf("NextBtn")?this.nextBtn=n:0==n.name.indexOf("DiamondsFS")?this.diamondsObj=n:0==n.name.indexOf("OnCompleteObject")?this.onCompleteObject=n:0==n.name.indexOf("WinObjectsContainer")?this.winObjectsContainer=n:0==n.name.indexOf("LoseItBtn")?this.loseItBtn=n:0==n.name.indexOf("UseItemEffects")&&(n.enabled=!1)}if(null!=this.winObjectsContainer&&(this.winObjectsRays=this.winObjectsContainer.findByName("Rays")),null!=this.moneyMultipliers&&""!=this.moneyMultipliers){this.moneyMultipliersList=[];for(var a=this.moneyMultipliers.split(","),r=0,s=a.length;r<s;){var o=r++,l=parseFloat(StringTools.trim(a[o]));null!=l&&this.moneyMultipliersList.push(l)}}if(null!=this.onCompleteObject&&(this.onCompleteObject.enabled=!1),null!=this.diamondsObj)for(var c=0,h=this.diamondsObj.children.length;c<h;){var u=c++,d=this.diamondsObj.children[u];0==d.name.indexOf("FSDiamondsTF")&&(this.diamondsTF=d.element)}UIHelper.AddButtonClickHandler(this.nextBtn,$bind(this,this.onNextBtnClick)),UIHelper.AddButtonClickHandler(this.useBtn,$bind(this,this.onUseBtnClick)),UIHelper.AddButtonClickHandler(this.loseItBtn,$bind(this,this.onNextBtnClick)),null!=this.nextBtn&&(this.nextBtn.enabled=!1),null!=this.loseItBtn&&(this.loseItBtn.enabled=!1),null!=this.useBtn&&(this.useBtn.enabled=!1),this.moneyMultiplierBtn=this.getChildByName("MoneyMultiplierBtn"),null!=this.moneyMultiplierBtn&&(this.moneyMultiplierStatedBtn=null,this.moneyMultiplierBtn.enabled=!1,null!=this.moneyMultiplierBtn.button&&UIHelper.AddButtonClickHandler(this.moneyMultiplierBtn,$bind(this,this.onMoneyMultiplierBtnClick))),this.flyMoneyCont=this.getChildByName("FlyMoneyCont"),null!=this.flyMoneyCont&&(this.flyMoneyCont.enabled=!1),this.allBtns=this.entity.findComponents("button")}activate(t,e){if(null==t&&(t=!0),!this.isActive){if(this.isActive=!0,this.closeCallback=e,t)for(var i=this.entity.findComponents("element"),n=0;n<i.length;){var a=i[n];if(++n,null!=a.opacity&&a.opacity>0){var r=a.opacity;a.opacity=0,motion_Actuate.tween(a,.2,{opacity:r}).ease(motion_easing_Linear.get_easeNone())}}this.entity.enabled=!0,this.init()}}closeWindow(t){null==t&&(t=!0),this.isActive&&!this.isClosing&&(this.isClosing=!0,t||(this.entity.enabled=!1,null!=this.closeCallback&&this.closeCallback(),this.closeCallback=null))}initProgressItem(t,e){this.wasPerc=t,this.curPerc=e,""!=LevelCompleteScreen2.get_curItem()?this.itemProgress.init(LevelCompleteScreen2.get_curItem(),t,e,$bind(this,this.onProgressAnimEnd)):this.get_useMoneyMultiplierBtn()?(this.setNextMoneyMultiplierBtn(.3),this.animateShowBtn(this.moneyMultiplierBtn),this.animateShowBtn(this.nextBtn,this.nextBtnShowDelay)):(null!=this.nextBtn&&(this.nextBtn.enabled=!0),this.itemProgress.entity.enabled=!1)}init(){var t=Shop.GetCurrentLockedLevelData(),e=this;if(null!=t&&(this.initPerc=Math.floor(t.prevPerc),this.currentPerc=Math.floor(t.perc)),this.isCompleteItem=this.currentPerc>=100,this.preInitItem(this.initPerc),motion_Actuate.timer(.4).onComplete((function(){e.initProgressItem(e.initPerc,e.currentPerc)})),""==LevelCompleteScreen2.get_curItem()&&null!=this.itemProgress&&(this.itemProgress.entity.enabled=!1),""==LevelCompleteScreen2.get_curItem()){var i=_$Vector3_Vector3_$Impl_$.clone(this.winObjectsContainer.getLocalPosition().clone());i.y=-180,this.winObjectsContainer.setLocalPosition(i)}if(null!=this.diamondsTF){var n=LevelCompleteScreen2.get_collectedDiamonds();this.diamondsTF.text="+"+n}this.get_useMoneyMultiplierBtn()&&!this.isCompleteItem||(GameSettings.addDiamonds(LevelCompleteScreen2.get_collectedDiamonds()),LevelCompleteScreen2.set_collectedDiamonds(0))}setNextMoneyMultiplierBtn(t){if(null==t&&(t=0),null!=this.moneyMultipliersList&&0!=this.moneyMultipliersList.length){this.curMoneyMultiplierBtnMultIdx++,this.curMoneyMultiplierBtnMultIdx>=this.moneyMultipliersList.length&&(this.curMoneyMultiplierBtnMultIdx=this.moneyMultipliersList.length-1),this.curMoneyMultiplier=this.moneyMultipliersList[this.curMoneyMultiplierBtnMultIdx],this.setMoneyMultiplierBtnText("+"+Math.round(LevelCompleteScreen2.get_collectedDiamonds()*this.curMoneyMultiplier));var e=this;this.curMoneyMultiplierBtnMultIdx+1<this.moneyMultipliersList.length&&motion_Actuate.timer(this.moneyMultipliersChangeDelay+t).onComplete((function(){e.setNextMoneyMultiplierBtn()}))}}setMoneyMultiplierBtnText(t){this.moneyMultiplierBtn}onMoneyMultiplierBtnClick(){this.animateHideBtn(this.moneyMultiplierBtn),this.lastRewardClickBtn=this.moneyMultiplierBtn,LevelCompleteScreen2.showRewardedAd("x2_diamonds")}multiplyMoney(){this.animateHideBtn(this.nextBtn),this.turnOffAllClicksBtns();var t=Math.round(LevelCompleteScreen2.get_collectedDiamonds()*this.curMoneyMultiplier);null!=this.diamondsTF&&(this.diamondsTF.text="+"+t),this.pickMoney(t,(function(){null!=GameController.current&&GameController.current.onFSClose()}),1),LevelCompleteScreen2.set_collectedDiamonds(0)}pickMoney(t,e,i){null==i&&(i=0),null!=e&&e()}onProgressAnimEnd(){var t=this;this.curPerc>=100?(null!=this.onCompleteObject&&(this.onCompleteObject.enabled=!0),null!=this.diamondsObj&&(this.diamondsObj.enabled=!1),motion_Actuate.timer(2).onComplete((function(){APIManager.onLevelSuccess((function(){APIManager.IsRewardedAdReady()&&t.animateShowBtn(t.useBtn),t.animateShowBtn(t.loseItBtn)}))}))):motion_Actuate.timer(2).onComplete((function(){APIManager.onLevelSuccess((function(){t.get_useMoneyMultiplierBtn()&&(t.setNextMoneyMultiplierBtn(.3),t.animateShowBtn(t.moneyMultiplierBtn)),t.animateShowBtn(t.nextBtn,t.nextBtnShowDelay)}))}))}preInitItem(t){""!=LevelCompleteScreen2.get_curItem()&&this.itemProgress.preInit(LevelCompleteScreen2.get_curItem(),t)}onRewardedAdReward(){null!=this.lastRewardClickBtn&&this.lastRewardClickBtn==this.moneyMultiplierBtn?this.multiplyMoney():this.useItem()}onReawardAdFail(){null!=this.lastRewardClickBtn&&this.lastRewardClickBtn==this.moneyMultiplierBtn?this.animateShowBtn(this.moneyMultiplierBtn):this.animateShowBtn(this.useBtn)}onUseBtnClick(){this.animateHideBtn(this.useBtn),LevelCompleteScreen2.isRewardedAdReady()?LevelCompleteScreen2.showRewardedAd("use_item"):(this.useItem(),this.turnOffAllClicksBtns())}useItem(){if(null!=Shop.current)if(this.curItemUnlocked){Shop.current.setItemInUse(this.itemProgress.activeItem.entity.name);Std.parseInt(StringTools.replace(this.itemProgress.activeItem.entity.name,"item",""));Shop.TrackSkinUse(this.itemProgress.activeItem.entity.name,!1,!0)}else this.curItemUnlocked=!0,Shop.current.unlockItem(this.itemProgress.activeItem.entity.name,!0,"specific_achievement",!0),Shop.TrackSkinUse(this.itemProgress.activeItem.entity.name,!0,!0);if(null!=this.onCompleteObject)for(var t=0,i=this.entity.children.length;t<i;){var n=t++,a=this.entity.children[n];if(0==a.name.indexOf("UseItemEffects")){a.enabled=!0;for(var r=0,s=a.children.length;r<s;)r++,a.children[n].name.indexOf("ActivateEffect")}}if(null!=this.loseItBtn&&(this.loseItBtn.enabled=!1),null!=this.nextBtn&&(this.nextBtn.enabled=!1),null!=this.nextBtn){var o=this.nextBtn,l=8888888,c=0,h=0;null==h&&(h=0),null==c&&(c=0),null==l&&(l=0);var u=new pc.Vec3(l,c,h);o.setPosition(u)}this.turnOffAllClicksBtns(),motion_Actuate.timer(2).onComplete($bind(e=GameController.current,e.onFSClose))}onNextBtnClick(){this.turnOffAllClicksBtns(),this.get_useMoneyMultiplierBtn()&&!this.isCompleteItem?(null!=this.moneyMultiplierBtn&&this.animateHideBtn(this.moneyMultiplierBtn),this.pickMoney(LevelCompleteScreen2.get_collectedDiamonds(),(function(){null!=GameController.current&&GameController.current.onFSClose()})),LevelCompleteScreen2.set_collectedDiamonds(0)):null!=GameController.current&&GameController.current.onFSClose(),null!=this.nextBtn&&(this.animateHideBtn(this.nextBtn),null!=this.nextBtn.button&&(this.nextBtn.button.enabled=!1)),null!=this.loseItBtn&&(this.animateHideBtn(this.loseItBtn),null!=this.loseItBtn.button&&(this.loseItBtn.button.enabled=!1))}animateShowBtn(t,e){null==e&&(e=0);var i=this;if(!t.enabled)if(e>0)motion_Actuate.timer(e).onComplete((function(){i.animateShowBtn(t)}));else{t.enabled=!0;var n=t.getLocalScale().clone(),a=.01,r=.01,s=.01;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s);t.setLocalScale(o);var l=t.getLocalScale();motion_Actuate.update($bind(t,t.setLocalScale),.3,[l.x,l.y,l.z],[n.x,n.y,n.z],!0).ease(motion_easing_Back.easeOut)}}animateHideBtn(t,e){null==e&&(e=0);var i=this;if(e>0)motion_Actuate.timer(e).onComplete((function(){i.animateHideBtn(t)}));else{var n=t.getLocalScale().clone(),a=.01,r=.01,s=.01;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s),l=t.getLocalScale();motion_Actuate.update($bind(t,t.setLocalScale),.3,[l.x,l.y,l.z],[o.x,o.y,o.z],!0).ease(motion_easing_Back.easeIn).onComplete((function(){return t.setLocalScale(n),t.enabled=!1}))}}turnOffAllClicksBtns(){for(var t=0,e=this.allBtns;t<e.length;){var i=e[t];++t,i.enabled=!1}}turnOnAllClicksBtns(){for(var t=0,e=this.allBtns;t<e.length;){var i=e[t];++t,i.enabled=!0}}update(t){super.update(t),null!=this.winObjectsRays&&this.winObjectsRays.rotateLocal(0,0,20*t);APIManager.IsRewardedAdReady()}static isRewardedAdReady(){return APIManager.IsRewardedAdReady()}static showRewardedAd(t){null==t&&(t=""),null!=t&&""!=t||(t="get_shop_entry"),APIManager.ShowRewardedAd(LevelCompleteScreen2.OnRewardedAdReward,LevelCompleteScreen2.OnReawardAdFail,t)||LevelCompleteScreen2.OnReawardAdFail()}static OnRewardedAdReward(){null!=LevelCompleteScreen2.current&&LevelCompleteScreen2.current.onRewardedAdReward()}static OnReawardAdFail(){null!=LevelCompleteScreen2.current&&LevelCompleteScreen2.current.onReawardAdFail()}static get_IsActive(){return null!=LevelCompleteScreen2.current&&LevelCompleteScreen2.current.isActive}static Activate(t,e){null==t&&(t=!0),null!=LevelCompleteScreen2.current&&LevelCompleteScreen2.current.activate(t,e)}static Close(t){null==t&&(t=!0),null!=LevelCompleteScreen2.current&&LevelCompleteScreen2.current.closeWindow(t)}static getAllLockedItems(){return Shop.current.getAllLockedItems(!0)}static get_curItem(){var t=Shop.GetCurrentLockedLevelData();return null!=t?t.itemName:""}static get_collectedDiamonds(){return-1==LevelCompleteScreen2._collectedDiamonds&&(LevelCompleteScreen2._collectedDiamonds=PlayerPrefs.HasKey("LCSCollected_NumDiamonds2")?PlayerPrefs.GetInt("LCSCollected_NumDiamonds2"):0),LevelCompleteScreen2._collectedDiamonds}static set_collectedDiamonds(t){return LevelCompleteScreen2._collectedDiamonds=t,PlayerPrefs.SetInt("LCSCollected_NumDiamonds2",LevelCompleteScreen2._collectedDiamonds),t}static addColectedDiamonds(t){var e=LevelCompleteScreen2;e.set_collectedDiamonds(e.get_collectedDiamonds()+t)}}LevelCompleteScreen2.__name__="LevelCompleteScreen2",LevelCompleteScreen2.__properties__={set_collectedDiamonds:"set_collectedDiamonds",get_collectedDiamonds:"get_collectedDiamonds",get_curItem:"get_curItem",get_IsActive:"get_IsActive"},LevelCompleteScreen2.__super__=ScriptComponent,Object.assign(LevelCompleteScreen2.prototype,{__class__:LevelCompleteScreen2,__properties__:Object.assign({},ScriptComponent.prototype.__properties__,{get_useMoneyMultiplierBtn:"get_useMoneyMultiplierBtn"})});class LevelLoadingScreen extends ScriptComponent{constructor(t){super(t),this.numFramesLoadedLevel=0,this.isFading=!1,this.waitesFadeOut=!1,this.initOpacityElsData=[]}initialize(){super.initialize();for(var t=this.entity.findComponents("element"),e=0;e<t.length;){var i=t[e];++e,null!=i.opacity&&i.opacity>0&&this.initOpacityElsData.push({element:i,opacity:i.opacity})}LevelLoadingScreen.current=this,LevelLoadingScreen.isFirstRun?(LevelLoadingScreen.isFirstRun=!1,this.waitesFadeOut=!0):this.waitesFadeOut=!0}fadeOut(t){motion_Actuate.stop($bind(this,this.setFadeCoef),null,!1,!1),this.setFadeCoef(1),this.isFading=!0;var e=this;motion_Actuate.update($bind(this,this.setFadeCoef),.3,[1],[0]).ease(motion_easing_Linear.get_easeNone()).onComplete((function(){return e.entity.enabled=!1,null!=t&&t(),e.isFading=!1}))}fadeIn(t){this.entity.enabled=!0,motion_Actuate.stop($bind(this,this.setFadeCoef),null,!1,!1),this.setFadeCoef(0),this.isFading=!0;var e=this;motion_Actuate.update($bind(this,this.setFadeCoef),.3,[0],[1]).ease(motion_easing_Linear.get_easeNone()).onComplete((function(){return null!=t&&t(),e.isFading=!1}))}setFadeCoef(t){for(var e=0,i=this.initOpacityElsData;e<i.length;){var n=i[e];++e,null!=n&&null!=n.element&&(n.element.opacity=n.opacity*t)}}checkRecurseEntityAssetsLoaded(t){if(null==t||!t.enabled)return!0;if(null!=t.render&&null!=t.render.asset&&!(t.render.asset instanceof pc.Asset?t.render.asset:this.app.assets.get(t.render.asset)).loaded)return!1;if(null!=t.model&&null!=t.model.asset&&!(t.model.asset instanceof pc.Asset?t.model.asset:this.app.assets.get(t.model.asset)).loaded)return!1;for(var e=0,i=t.children.length;e<i;){var n=e++;if(!this.checkRecurseEntityAssetsLoaded(t.children[n]))return!1}return!0}update(t){if(super.update(t),this.waitesFadeOut&&this.entity.enabled&&!GameSettings.isLoadingLevel&&null!=GameSettings.get_curLevel()&&0==Reflect.fields(this.app.loader._requests).length&&this.checkRecurseEntityAssetsLoaded(GameSettings.levelObject.entity)&&(this.numFramesLoadedLevel++,this.numFramesLoadedLevel>=1)){this.waitesFadeOut=!1;var e=this.entity.findByName("Camera");null!=e&&(e.reparent(null),e.destroy()),this.fadeOut()}}static ChangeScene(t){var e=LevelLoadingScreen.current;null!=e?e.fadeIn((function(){pc.app.scenes.changeScene(t,(function(t,e){}))})):pc.app.scenes.changeScene(t)}}LevelLoadingScreen.__name__="LevelLoadingScreen",LevelLoadingScreen.__super__=ScriptComponent,Object.assign(LevelLoadingScreen.prototype,{__class__:LevelLoadingScreen});class LevelObject extends ScriptComponent{constructor(t){super(t),this.isRuntime=!1}initialize(){super.initialize()}}LevelObject.__name__="LevelObject",LevelObject.__super__=ScriptComponent,Object.assign(LevelObject.prototype,{__class__:LevelObject});class Main{static main(){Main.runHardFixes()}static runHardFixes(){pc.CollisionComponentSystem.prototype._getNodeTransform=function(t,e){let i=new pc.Vec3,n=i,a=new pc.Quat,r=new pc.Quat,s=new pc.Mat4;e?(this._calculateNodeRelativeTransform2(t,e,s),s.getTranslation(i),a.setFromMat4(s)):(i=t.getPosition(),a=t.getRotation());const o=new Ammo.btQuaternion,l=new Ammo.btTransform;l.setIdentity();const c=l.getOrigin(),h=t.collision;if(h&&h._hasOffset){const t=h.data.linearOffset,e=h.data.angularOffset;i=i.clone(),r.copy(a).transformVector(t,n),n.add(i),r.copy(a).mul(e),c.setValue(n.x,n.y,n.z),o.setValue(r.x,r.y,r.z,r.w)}else c.setValue(i.x,i.y,i.z),o.setValue(a.x,a.y,a.z,a.w);return l.setRotation(o),Ammo.destroy(o),Ammo.destroy(c),l},pc.CollisionComponentSystem.prototype._calculateNodeRelativeTransform2=function(t,e,i){if(t===e){const e=t.getWorldTransform().getScale();i.setScale(e.x,e.y,e.z)}else this._calculateNodeRelativeTransform(t.parent,e),i.mul(t.getLocalTransform())}}}Main.__name__="Main";class MaterialHelper{static SetEntityMaterial(t,e){null!=t.render?"asset"!=t.render.type?t.render.material=e:t.render.materialAsset=e.id:null!=t.model&&("asset"==t.model.type?t.model.mapping={0:e.id}:t.model.material=e)}static SetEntityMaterials(t,e){if(null!=t.render)if("asset"!=t.render.type)t.render.material=e[0];else{for(var i=[],n=0,a=e.length;n<a;){var r=n++;i.push(0|e[r].id)}var s=i;t.render.materialAssets=s}else if(null!=t.model)if("asset"==t.model.type){for(var o={},l=0,c=e.length;l<c;){var h=l++;o[h+""]=e[h].id}t.model.mapping=o}else t.model.material=e[0]}static SetEntityFirstRendererMaterial(t,e){var i=t.findComponent("render");null!=i&&MaterialHelper.SetEntityMaterial(i.entity,e);var n=t.findComponent("model");null!=n&&MaterialHelper.SetEntityMaterial(n.entity,e)}static SetEntityFirstRendererMaterials(t,e){var i=t.findComponent("render");null!=i&&MaterialHelper.SetEntityMaterials(i.entity,e);var n=t.findComponent("model");null!=n&&MaterialHelper.SetEntityMaterials(n.entity,e)}static SetEntityWithChildsMaterial(t,e){for(var i=t.findComponents("render"),n=0;n<i.length;){var a=i[n];++n;for(var r=0,s=a.meshInstances;r<s.length;){var o=s[r];++r,o.material=e}}for(var l=t.findComponents("model"),c=0;c<l.length;){var h=l[c];++c;for(var u=0,d=h.meshInstances;u<d.length;){var m=d[u];++u,m.material=e}}}}MaterialHelper.__name__="MaterialHelper",Math.__name__="Math";class Mathf{static Abs(t){return Math.abs(t)}static Sin(t){return Math.sin(t)}static Cos(t){return Math.cos(t)}static Atan(t){return Math.atan(t)}static Acos(t){return Math.acos(t)}static Atan2(t,e){return Math.atan2(t,e)}static FloorToInt(t){return 0|Math.floor(t)}static Sqrt(t){return Math.sqrt(t)}static Clamp01(t){return t>1?1:t<0?0:t}static Sign(t){return t>=0?1:-1}static Clamp(t,e,i){return t<e?e:t>i?i:t}static Lerp(t,e,i){return i<0&&(i=0),i>1&&(i=1),t+(e-t)*i}}Mathf.__name__="Mathf";class ThrowObject extends ScriptComponent{initialize(){super.initialize(),ThrowObject.AllThrowObjects.push(this);var t=this;if(this.on("destroy",(function(e){return t.OnDestroy(),!0})),null!=this.entity.collision&&"mesh"==this.entity.collision.type&&this.centerCOMMeshCollider(),this.throwedOnce=this.throwed=!1,this.heroGrowActivated=!0,this.curMaxVel=0,this.leftTimeToEndFlying=-1,this.isThrowMassMultiplied=!1,this.massMulElapsedTime=this.massMulMaxTime=0,this.isSuperModeThrow=!1,this.inited=!1,this.isGiantThrow=this.isThrowGravityActive=!1,this.lastThrowElapsed=0,this.lastThrower=null,this.init(),this.kinematicUntillGiantThrowHit||0==this.inactiveBySizePushCoef&&this.activateHeroSize>0){if(null!=this.body){var e=this.body,i=e.group,n=e.mask;e.type=pc.BODYTYPE_KINEMATIC,e.group=i,e.mask=n}var a=this.getChildByName("ActivateColliders");if(null!=a)for(var r=a.findComponents("collision"),s=0;s<r.length;){var o=r[s];++s,o.on("triggerenter",(function(e){return t.onActivateCollidersHit(e),!0}))}}this.activateHeroSize>0&&(this.heroGrowActivated=!1)}init(){if(!this.inited){this.inited=!0,this.floorLayer=2048,this.massMulMaxTime=GameSettings.config.throwObjMassRestoreTime,this.bodies=this.entity.findComponents("rigidbody"),this.initMasses=[];for(var t=0,e=this.bodies.length;t<e;){var i=t++,n=this.bodies[i];this.initMasses.push(n.mass)}if(this.thisCharacter=EntityHelper.GetComponentInParent_Character(this.entity,Character),this.body=this.entity.rigidbody,null!=this.body&&(this.setBodyUseGravity(this.body,!0),this.initBodyGroup=this.body.group,this.initBodyMask=this.body.mask),this.reflectFromWalls){for(var a=0,r=this.bodies.length;a<r;){var s=a++,o=this.bodies[s];o.friction=0,o.rollingFriction=0,o.restitution=1}if(null!=this.body){var l=0,c=1,h=0;null==h&&(h=0),null==c&&(c=0),null==l&&(l=0);var u=new pc.Vec3(l,c,h);this.body.angularFactor=u}}}}postInitialize(){super.postInitialize();var t=this;null!=this.body&&this.body.on("collisionstart",(function(e){return t.onColliderHit(e),!0}))}centerCOMMeshCollider(){if(null!=this.entity.collision.data.render&&0!=this.entity.collision.data.render.meshes.lenght){var t=new Ammo.btCompoundShape;if(null!=this.entity.collision.data.shape){for(var e=0,i=this.entity.collision.data.shape.getNumChildShapes();e<i;){var n=e++,a=this.entity.collision.data.shape.getChildShape(n);Ammo.destroy(a)}Ammo.destroy(this.entity.collision.data.shape),this.entity.collision.data.shape=null}var r=this.getCentroid(),s=_$Vector3_Vector3_$Impl_$.mulV(r,this.entity.getLocalScale().clone());this.entity.collision.linearOffset=_$Vector3_Vector3_$Impl_$.addV(s,this.entity.collision.linearOffset);var o=new Ammo.btTransform;o.setIdentity(),o.getOrigin().setValue(-r.x,-r.y,-r.z);var l=new Ammo.btBvhTriangleMeshShape(pc.app.systems.collision._triMeshCache[this.entity.collision.data.render.meshes[0].id],!0),c=new Ammo.btVector3;c.setValue(1,1,1),l.setLocalScaling(c),t.addChildShape(o,l);var h=this.entity.getWorldTransform().getScale();c.setValue(h.x,h.y,h.z),t.setLocalScaling(c),this.entity.collision.data.shape=t,this.entity.rigidbody.disableSimulation(),this.entity.rigidbody.createBody(),this.entity.enabled&&this.entity.rigidbody.enabled&&this.entity.rigidbody.enableSimulation(),Ammo.destroy(c),Ammo.destroy(o)}}getCentroid(){this.entity.collision.system.implementations.mesh.destroyShape(this.entity.collision.data);for(var t=this.entity.collision.data.render.meshes[0],e=t.vertexBuffer,i=e.getFormat(),n=0,a=null,r=0,s=i.elements.length;r<s;){var o=r++,l=i.elements[o];if(l.name==pc.SEMANTIC_POSITION){a=new Float32Array(e.lock(),l.offset),n=l.stride/4|0;break}}var c=[];t.getIndices(c);var h,u,d,m=t.primitive[0].count/3|0,_=0|t.primitive[0].base,p=new pc.Vec3(0,0,0),g=new pc.Vec3(0,0,0),y=new pc.Vec3(0,0,0),v=0,f=0,b=0;null==b&&(b=0),null==f&&(f=0),null==v&&(v=0);for(var S=new pc.Vec3(v,f,b),C=0,I=0,M=m;I<M;){var w=I++;h=c[_+3*w]*n,u=c[_+3*w+1]*n,d=c[_+3*w+2]*n,_$Vector3_Vector3_$Impl_$.set(p,a[h],a[h+1],a[h+2]),_$Vector3_Vector3_$Impl_$.set(g,a[u],a[u+1],a[u+2]),_$Vector3_Vector3_$Impl_$.set(y,a[d],a[d+1],a[d+2]);var P=this.calculateTriangleArea(p,g,y),T=_$Vector3_Vector3_$Impl_$.mulN(this.calculateWeightedCentroid(p,g,y),P);S=_$Vector3_Vector3_$Impl_$.addV(S,T),C+=P}return 0!=C&&(S=_$Vector3_Vector3_$Impl_$.mulN(S,1/C)),S}calculateTriangleArea(t,e,i){var n=new pc.Vec3(0,0,0);return _$Vector3_Vector3_$Impl_$.cross(n,_$Vector3_Vector3_$Impl_$.sub(e,t),_$Vector3_Vector3_$Impl_$.sub(i,t)).length()/2}calculateWeightedCentroid(t,e,i){return _$Vector3_Vector3_$Impl_$.devN(_$Vector3_Vector3_$Impl_$.addV(_$Vector3_Vector3_$Impl_$.addV(t,e),i),3)}initPartThrowObjs(){for(var t=EntityHelper.GetComponentsInChildren_PartThrowObject(this.entity,PartThrowObject),e=0;e<t.length;){var i=t[e];++e,i.initBody()}}getPushCoef(){return this.heroGrowActivated?this.activeBySizePushCoef:this.inactiveBySizePushCoef}onHanded(t,e,i){if(this.curMaxVel=0,this.body=e,this.throwed=!1,this.isThrowMassMultiplied&&this.restoreBodiesMass(),null!=i){var n=this.body,a=_$Quaternion_Quaternion_$Impl_$.get_IDENTITY(),r=n.body.getWorldTransform(),s=new Ammo.btQuaternion;s.setValue(a.x,a.y,a.z,a.w),r.setRotation(s),this.followY=this.body.entity.getPosition().clone().y+.5,this.followTransform=i;var o=this.body.entity.getPosition().clone();(o=i.getPosition().clone()).y=this.followY,this.body.teleport(o),this.followDV=_$Vector3_Vector3_$Impl_$.sub(this.body.entity.getPosition().clone(),i.getPosition().clone())}else this.followTransform=null;if(this.owner=t,this.lastOwner=this.owner,this.isBreakable)for(var l=EntityHelper.GetComponentsInChildren_PartThrowObject(this.entity,PartThrowObject),c=0;c<l.length;){var h=l[c];++c,h.owner=this.owner,h.lastOwner=this.owner}var u=this.body,d=u.group,m=u.mask;u.type=pc.BODYTYPE_KINEMATIC,u.group=d,u.mask=m,this.setThrowCollisonMask(!0)}onOwnerKill(){if(this.throwed)this.entity.parent!=this.app.root&&this.setParent(this.app.root,!0);else{this.owner=null;var t=this.body;t._group,t._mask;t._type=pc.RIGIDBODY_TYPE_DYNAMIC,t.disableSimulation(),t.createBody(),this.setParent(this.app.root,!0),this.removeLevitationConstraints()}}setParent(t,e){if(null==e&&(e=!0),null==t&&(t=this.app.root),e){var i=this.entity.getWorldTransform().clone(),n=t.getWorldTransform().clone().invert();i.mul2(n,i);var a=i.getTranslation(),r=(new pc.Quat).setFromMat4(i),s=i.getScale();this.entity.reparent(t),null!=this.entity.rigidbody?(this.entity.setLocalScale(s),this.entity.rigidbody.teleport(a,r)):(this.entity.setLocalPosition(a),this.entity.setLocalRotation(r),this.entity.setLocalScale(s))}else this.entity.reparent(t)}canBeHanded(t){return t!=this.lastThrower||this.lastThrowElapsed>1}canKill(t){return!this.kinematicUntillGiantThrowHit&&(t!=this.lastThrower||this.lastThrowElapsed>1.5)}throwAtTheEnemy(t,e,i){null==i&&(i=!1),this.lastThrowElapsed=0,this.lastThrower=this.owner;var n=GameSettings.config.useThrowYFromChar;i=i||n,this.isGiantThrow=i;var a=null!=e?e:t.entity.getPosition().clone();i||(a.y=this.body.entity.getPosition().clone().y),n&&(a.y+=1),null==this.followTransform&&this.setParent(this.app.root,!0);var r=_$Vector3_Vector3_$Impl_$.sub(a,this.body.entity.getPosition().clone());i||(r.y=0),_$Vector3_Vector3_$Impl_$.normalize(r);this.reflectFromWalls;var s=GameSettings.config.throwObjMassMulOnThrow*this.massMulOnThrow;if(1!=s&&0!=this.massMulMaxTime&&null!=this.owner&&this.owner.isPlayer){this.isThrowMassMultiplied=!0,this.massMulElapsedTime=0;for(var o=0,l=this.bodies.length;o<l;){var c=o++;this.bodies[c].mass=this.initMasses[c]*s}}this.isThrowGravityActive=!0,this.throwed=!0,this.throwedOnce=!0;var h=this.body;h._group,h._mask;if(h._type=pc.RIGIDBODY_TYPE_DYNAMIC,h.disableSimulation(),h.createBody(),this.body.activate(),this.body.body.clearForces(),!this.reflectFromWalls){var u=1,d=1,m=1;null==m&&(m=0),null==d&&(d=0),null==u&&(u=0);var _=new pc.Vec3(u,d,m);this.body.angularFactor=_,this.setBodyUseGravity(this.body,!1)}this.body.linearVelocity=_$Vector3_Vector3_$Impl_$.get_ZERO(),this.body.angularVelocity=_$Vector3_Vector3_$Impl_$.get_ZERO(),this.isSuperModeThrow=!1;var p=GameController.throwPowerMultiplier;null==this.owner||this.owner.isPlayer||this.owner.isGiant||(p=GameController.throwPowerMultiplierEnemies),null!=this.owner&&this.owner.isPlayer&&null!=SuperMode.current&&SuperMode.get_IsSuperMode()&&(this.isSuperModeThrow=!0,p*=SuperMode.current.throwPowerCoef);for(var g=500*(null!=this.thisCharacter?GameSettings.config.ragdollThrowPowerMul:1)*p,y=0,v=this.bodies;y<v.length;){var f=v[y];if(++y,null!=f){var b=null!=this.entity.collision&&"compound"==this.entity.collision.type?.1:1;f.linearVelocity=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(r,g),.022222222222222223),f.angularVelocity=_$Vector3_Vector3_$Impl_$.mulN(_$Vector3_Vector3_$Impl_$.mulN(Random.get_insideUnitSphere(),1e3*(.4+.6*Math.random())*.022222222222222223),b),f.activate()}}if(this.followTransform=null,i){this.setBodyUseGravity(this.body,!1);var S=1,C=1,I=1;null==I&&(I=0),null==C&&(C=0),null==S&&(S=0);var M=new pc.Vec3(S,C,I);this.body.angularFactor=M,i=!0}this.leftTimeToEndFlying=GameSettings.config.maxTimeThrowObjFlying}recalculateCOM(){}isConstrainedBody(t){return null!=t&&(!this.bodyUsesGravity(t)||1!=t.angularFactor.x||1!=t.angularFactor.y||1!=t.angularFactor.z)}setThrowCollisonMask(t){!t&&this.body.isStaticOrKinematic()||(this.body.mask=t?-5:this.initBodyMask)}setBodyUseGravity(t,e){if(e){var i=pc.app.systems.rigidbody.gravity,n=t.body.getGravity();n.setValue(i.x,i.y,i.z),t.body.setGravity(n)}else{var a=t.body.getGravity();a.setValue(0,0,0),t.body.setGravity(a)}}bodyUsesGravity(t){var e=t.body.getGravity(),i=pc.app.systems.rigidbody.gravity;return Math.abs(i.x-e.x())<1e-4&&Math.abs(i.y-e.y())<1e-4&&Math.abs(i.z-e.z())<1e-4}updateMassRestore(t){var e=this.isThrowGravityActive||this.isConstrainedBody(this.body);if(this.isThrowMassMultiplied&&!e)if(this.massMulElapsedTime+=t,this.massMulElapsedTime>=this.massMulMaxTime)this.restoreBodiesMass();else for(var i=(GameSettings.config.throwObjMassMulOnThrow*this.massMulOnThrow-1)*((this.massMulMaxTime-this.massMulElapsedTime)/this.massMulMaxTime),n=0,a=this.bodies.length;n<a;){var r=n++;this.setBodyMass(this.bodies[r],this.initMasses[r]+i*this.initMasses[r])}}setBodyMass(t,e){if(t._mass=e,null!=t.body&&!t.isStaticOrKinematic()){var i=new Ammo.btVector3;t._body.getCollisionShape().calculateLocalInertia(e,i),t._body.setMassProps(e,i),t._body.updateInertiaTensor()}}restoreBodiesMass(){this.isThrowMassMultiplied=!1,this.massMulElapsedTime=0;for(var t=0,e=this.bodies.length;t<e;){var i=t++;this.bodies[i].mass=this.initMasses[i]}}onColliderHit(t){if(!(null!=this.body&&this.body.isKinematic()&&null!=this.owner&&this.owner.throwObject==this||(null==this.body||this.bodyUsesGravity(this.body)||null==t.other.rigidbody||t.other.rigidbody.group!=this.floorLayer||this.setBodyUseGravity(this.body,!0),null!=t.other.rigidbody&&t.other.rigidbody.group==this.floorLayer&&!this.isBreakable||null!=EntityHelper.GetComponent_CharacterController(t.other,CharacterController)||null!=this.owner&&this.owner.isThrowing))){var e=EntityHelper.GetComponentInParent_Character(t.other,Character);if(!(null!=e&&e==this.thisCharacter||null!=this.owner&&e==this.owner)&&(this.owner=null,!this.reflectFromWalls&&(!this.isBreakable||null==e)&&(this.isThrowGravityActive||this.isConstrainedBody(this.body)))){if(this.isBreakable)return void this.breakByParts();this.removeLevitationConstraints()}}}removeLevitationConstraints(){(this.isThrowGravityActive||this.isConstrainedBody(this.body))&&(this.isSuperModeThrow=!1,this.setBodyUseGravity(this.body,!0),this.body.angularFactor=_$Vector3_Vector3_$Impl_$.get_ONE(),this.isThrowGravityActive=!1,this.setThrowCollisonMask(!1),this.throwed=!1)}onActivateCollidersHit(t){var e=this;if(this.kinematicUntillGiantThrowHit&&null!=this.body&&this.body.isKinematic()){var i=EntityHelper.GetComponentInParent_ThrowObject(t,ThrowObject);if(null!=i&&null!=i.lastOwner&&i.lastOwner.isGiant){var n=this.body;n._group,n._mask;n._type=pc.RIGIDBODY_TYPE_DYNAMIC,n.disableSimulation(),n.createBody();var a=this.body.mass;this.body.mass*=this.massMultOnSetDynamic,motion_Actuate.update((function(t){null!=e.body&&(e.body.mass=t)}),.5,[this.body.mass],[a]).ease(motion_easing_Linear.get_easeNone()),this.kinematicUntillGiantThrowHit=!1,null!=this.materialAtHitGotDynamic&&MaterialHelper.SetEntityFirstRendererMaterial(this.entity,this.materialAtHitGotDynamic)}}}breakByParts(){for(var t=EntityHelper.GetComponentsInChildren_PartThrowObject(this.entity,PartThrowObject),e=this.entity.rigidbody.linearVelocity,i=0;i<t.length;){var n=t[i];++i,n.activate(e),n.owner=this.owner}this.entity.enabled=!1,this.entity.destroy()}isInFly(){return!!this.isThrowGravityActive||this.isConstrainedBody(this.body)}canBeFocusThreat(t){if(!(this.isThrowGravityActive||this.isConstrainedBody(this.body))||this.owner==t||this.owner==t.enemy||null==this.body)return!1;var e,i=this.entity.getPosition().clone(),n=t.entity.getPosition().clone(),a=(i.x,n.x,i.z,n.z,_$Vector3_Vector3_$Impl_$.sub(i,n).length()),r=js_Boot.__cast(this.body.linearVelocity,pc.Vec3).clone().normalize(),s=_$Vector3_Vector3_$Impl_$.sub(n,i),o=Math.sqrt(r.lengthSq()*s.lengthSq());if(o<_$Vector3_Vector3_$Impl_$.kEpsilonNormalSqrt)e=0;else{var l=r.dot(s)/o,c=l<-1?-1:l>1?1:l;e=57.2957795130823*Math.acos(c)}return!(a*Math.sin(.01745329251994*e)>GameSettings.config.heroRadToDetectThreat)}isInCharacterLookAng(t){var e=_$Vector3_Vector3_$Impl_$.mulN(js_Boot.__cast(t.entity.forward,pc.Vec3),-1),i=this.entity.getPosition().clone(),n=t.entity.getPosition().clone(),a=i.x-n.x,r=0,s=i.z-n.z;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o,l=new pc.Vec3(a,r,s),c=_$Vector3_Vector3_$Impl_$.get_UP(),h=Math.sqrt(l.lengthSq()*e.lengthSq());if(h<_$Vector3_Vector3_$Impl_$.kEpsilonNormalSqrt)o=0;else{var u=l.dot(e)/h,d=u<-1?-1:u>1?1:u;o=57.2957795130823*Math.acos(d)}var m=l.y*e.z-l.z*e.y,_=l.z*e.x-l.x*e.z,p=l.x*e.y-l.y*e.x,g=c.x*m+c.y*_+c.z*p>=0?1:-1;return Math.abs(o*g)<GameSettings.config.minThreatAngDifFromLookToFocus}updateHeroGrowActivation(){if(!this.heroGrowActivated&&null!=Hero.current&&Hero.current.get_size()-1>=this.activateHeroSize){if(this.heroGrowActivated=!0,null!=this.activateThrowHeroMat&&MaterialHelper.SetEntityFirstRendererMaterial(this.entity,this.activateThrowHeroMat),null!=this.body){var t=this.body;t._group,t._mask;t._type=pc.RIGIDBODY_TYPE_DYNAMIC,t.disableSimulation(),t.createBody()}if(null!=this.heroGrowActivationData)for(var e=0,i=this.heroGrowActivationData;e<i.length;){var n=i[e];++e,null!=n.obj&&null!=n.mat&&MaterialHelper.SetEntityFirstRendererMaterial(n.obj,this.activateThrowHeroMat)}}}onGiantKill(){this.giantKillMass>0&&null!=this.body&&(this.body.mass=this.giantKillMass)}OnDestroy(){HxOverrides.remove(ThrowObject.AllThrowObjects,this)}postUpdate(t){if(super.postUpdate(t),this.updateMassRestore(t),this.activateHeroSize>=0&&this.updateHeroGrowActivation(),this.leftTimeToEndFlying>0&&(this.leftTimeToEndFlying-=t,this.leftTimeToEndFlying<=0&&(this.leftTimeToEndFlying=-1,this.removeLevitationConstraints())),this.throwed&&null!=this.body&&this.body.isKinematic()&&(this.throwed=!1),this.lastThrowElapsed+=t,this.reflectFromWalls&&(this.throwed&&this.body.linearVelocity.length()>this.curMaxVel&&(this.curMaxVel=this.body.linearVelocity.length()),this.body.linearVelocity.length()<this.curMaxVel)){var e=this.body.linearVelocity;e=_$Vector3_Vector3_$Impl_$.mulN(e.clone().normalize(),this.curMaxVel),this.body.linearVelocity=e}if(null!=this.followTransform&&null!=this.body&&this.body.isKinematic()){var i=_$Vector3_Vector3_$Impl_$.addV(this.followTransform.getPosition().clone(),this.followDV);i.y=this.followY,this.body.teleport(i)}}}ThrowObject.__name__="ThrowObject",ThrowObject.__super__=ScriptComponent,Object.assign(ThrowObject.prototype,{__class__:ThrowObject});class PartThrowObject extends ThrowObject{initialize(){this.inited=!0,super.initialize(),this.inited=!1,this.isActive=!1}initBody(){null!=this.entity.rigidbody&&(this.bodyData=new RigidBodyData(this.entity.rigidbody),this.entity.removeComponent("rigidbody")),this.enabled=!1}activate(t){if(!this.isActive){this.isActive=!0,this.throwedOnce=!0;var e=this,i=this.entity,n=this.app.root,a=!0;if(null==a&&(a=!0),null==n&&(n=pc.app.scene.root),null!=i.parent)if(a){var r=i.getWorldTransform().clone(),s=n.getWorldTransform().clone().invert();r.mul2(s,r);var o=r.getTranslation(),l=(new pc.Quat).setFromMat4(r),c=r.getScale();i.reparent(n),i.setLocalPosition(o),i.setLocalRotation(l),i.setLocalScale(c)}else i.reparent(n);this.entity.enabled=!0,this.enabled=!0,null==this.entity.rigidbody&&null!=this.bodyData&&this.bodyData.addConfiguredBodyToObject(this.entity);var h=null!=t?t:_$Vector3_Vector3_$Impl_$.get_ZERO(),u=.9+.4*Math.random();this.entity.rigidbody.linearVelocity=_$Vector3_Vector3_$Impl_$.mulN(h,u),this.entity.rigidbody.linearVelocity=h,this.throwed=!0,this.init(),null!=this.body&&(this.body.off("collisionstart"),this.body.on("collisionstart",(function(t){return e.onColliderHit(t),!0})))}}onRevive(){this.activate()}}PartThrowObject.__name__="PartThrowObject",PartThrowObject.__super__=ThrowObject,Object.assign(PartThrowObject.prototype,{__class__:PartThrowObject});class RigidBodyData{constructor(t){this.mass=t.mass,this.linearDamping=t.linearDamping,this.angularDamping=t.angularDamping,this.linearFactor=t.linearFactor,this.angularFactor=t.angularFactor,this.type=t.type,this.friction=t.friction,this.restitution=t.restitution,this.group=t.group,this.mask=t.mask}addConfiguredBodyToObject(t){null==t.rigidbody&&t.addComponent("rigidbody");var e=t.rigidbody;return e.type=this.type,e.mass=this.mass,e.linearDamping=this.linearDamping,e.angularDamping=this.angularDamping,e.linearFactor=this.linearFactor,e.angularFactor=this.angularFactor,e.friction=this.friction,e.restitution=this.restitution,e.group=this.group,e.mask=this.mask,e}}RigidBodyData.__name__="RigidBodyData",Object.assign(RigidBodyData.prototype,{__class__:RigidBodyData});class PauseScreen extends ScriptComponent{constructor(t){super(t),this.isActive=!1}initialize(){super.initialize(),PauseScreen.current=this;var t=this.entity.findByName("ResumeBtn"),e=this;null!=t&&t.button.on("click",(function(t){return e.onResumeClick(),!0}));var i=this.getChildByName("BrandingBtn"),n=new Image;n.crossOrigin="anonymous",n.onload=function(){var t=new pc.Texture(e.app.graphicsDevice);t.setSource(n),i.element.texture=t},n.src=window.famobi.getBrandingButtonImage(!0),null!=i&&i.button.on("click",(function(t){return window.famobi.openBrandingLink(),!0}));var a=this.getChildByName("FamobiCopyright");null!=a&&(a.enabled=window.famobi.hasFeature("copyright")),this.entity.enabled=!1}activate(t){if(null==t&&(t=0),!this.isActive){this.isActive=!0;var e=this;t>0?motion_Actuate.timer(t).onComplete((function(){return e.entity.enabled=!0})):this.entity.enabled=!0,motion_Actuate.timer(.1).onComplete((function(){GameController.pauseGameplay()}))}}close(t){null==t&&(t=!0),this.isActive&&(this.isActive=!1,this.entity.enabled=!1)}onResumeClick(){var t=this;APIManager.onResume((function(){GameController.resumeGameplay(),t.close(),null!=UIManager.current&&UIManager.current.onGameResume()}))}static Activate(t){null==t&&(t=0),null!=PauseScreen.current&&PauseScreen.current.activate(t)}static Close(t){null==t&&(t=!0),null!=PauseScreen.current&&PauseScreen.current.close(t)}}PauseScreen.__name__="PauseScreen",PauseScreen.__super__=ScriptComponent,Object.assign(PauseScreen.prototype,{__class__:PauseScreen});class PlayerPrefs{static initStorage(){PlayerPrefs.inited||(null==PlayerPrefs.localStorage&&(PlayerPrefs.localStorage=window.famobi.localStorage),null!=PlayerPrefs.localStorage&&(PlayerPrefs.inited=!0))}static DeleteAll(){PlayerPrefs.initStorage(),null!=PlayerPrefs.localStorage&&PlayerPrefs.localStorage.clear()}static DeleteKey(t){PlayerPrefs.initStorage(),PlayerPrefs.localStorage.removeItem(t)}static GetFloat(t){return PlayerPrefs.initStorage(),parseFloat(PlayerPrefs.localStorage.getItem(t))}static GetInt(t){return PlayerPrefs.initStorage(),Std.parseInt(PlayerPrefs.localStorage.getItem(t))}static GetString(t){return PlayerPrefs.initStorage(),PlayerPrefs.localStorage.getItem(t)}static SetString(t,e){PlayerPrefs.initStorage(),PlayerPrefs.localStorage.setItem(t,e)}static SetFloat(t,e){PlayerPrefs.initStorage(),PlayerPrefs.localStorage.setItem(t,e+"")}static SetInt(t,e){PlayerPrefs.initStorage(),PlayerPrefs.localStorage.setItem(t,e+"")}static HasKey(t){return PlayerPrefs.initStorage(),null!=PlayerPrefs.localStorage&&null!=PlayerPrefs.localStorage.getItem(t)}}PlayerPrefs.__name__="PlayerPrefs";class _$Quaternion_Quaternion_$Impl_${static get_IDENTITY(){return new pc.Quat(0,0,0,1)}static Euler(t){var e=new pc.Quat(0,0,0,1);return _$Quaternion_Quaternion_$Impl_$.setFromEulerAngles(e,t.x,t.y,t.z)}static EulerXYZ(t,e,i){var n=new pc.Quat(0,0,0,1);return _$Quaternion_Quaternion_$Impl_$.setFromEulerAngles(n,t,e,i)}static AngleAxis(t,e){var i=new pc.Quat(0,0,0,1);return _$Quaternion_Quaternion_$Impl_$.setFromAxisAngle(i,e,t)}static _new(t,e,i,n){return null==n&&(n=1),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),new pc.Quat(t,e,i,n)}static Slerp(t,e,i){return i=i>1?1:i<0?0:i,_$Quaternion_Quaternion_$Impl_$.slerp(_$Quaternion_Quaternion_$Impl_$.clone(t),t,e,i)}static LookRotation(t,e){return t=_$Vector3_Vector3_$Impl_$.normalize(t),null==e&&(e=_$Vector3_Vector3_$Impl_$.get_UP()),_$Quaternion_Quaternion_$Impl_$.hMatrix.setLookAt(_$Quaternion_Quaternion_$Impl_$.zeroVec,t,e),(new pc.Quat).setFromMat4(_$Quaternion_Quaternion_$Impl_$.hMatrix)}static mulQ(t,e){return t.clone().mul(e)}static mulV(t,e){return t.transformVector(e)}static clone(t){return t.clone()}static invert(t){return t.invert()}static normalize(t){return t.normalize()}static set(t,e,i,n,a){return t.set(e,i,n,a)}static setFromAxisAngle(t,e,i){return t.setFromAxisAngle(e,i)}static setFromEulerAngles(t,e,i,n){return t.setFromEulerAngles(e,i,n)}static setFromMat4(t,e){return t.setFromMat4(e)}static slerp(t,e,i,n){return t.slerp(e,i,n)}static transformVector(t,e,i){return t.transformVector(e,i)}static copy(t,e){return t.copy(e)}static mul(t,e){return t.mul(e)}static getEulerAngles(t,e){return t.getEulerAngles(e)}}_$Quaternion_Quaternion_$Impl_$.__name__="_Quaternion.Quaternion_Impl_",_$Quaternion_Quaternion_$Impl_$.__properties__={get_IDENTITY:"get_IDENTITY"};class Random{static bool(){return Math.random()<.5}static int(t,e){return t+Math.floor((e-t)*Math.random())}static float(t,e){return t+(e-t)*Math.random()}static floatFromArrayIndex0_1(t){var e=t[0];return e+(t[1]-e)*Math.random()}static intFromArrayIndex0_1(t){var e=t[0];return e+Math.floor((t[1]-e)*Math.random())}static get_insideUnitSphere(){var t=2*Math.random()-1,e=2*Math.random()-1,i=2*Math.random()-1;null==i&&(i=0),null==e&&(e=0),null==t&&(t=0);var n=new pc.Vec3(t,e,i);return _$Vector3_Vector3_$Impl_$.normalize(n),n=_$Vector3_Vector3_$Impl_$.mulN(n,Math.random())}static get_onUnitSphere(){var t=2*Math.random()-1,e=2*Math.random()-1,i=2*Math.random()-1;null==i&&(i=0),null==e&&(e=0),null==t&&(t=0);var n=new pc.Vec3(t,e,i);return _$Vector3_Vector3_$Impl_$.normalize(n),n}static string(t,e){null==e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");for(var i="",n=0,a=t;n<a;){n++;i+=e.charAt(Math.floor((e.length-1)*Math.random()))}return i}static date(t,e){var i=t.getTime();return new Date(i+(e.getTime()-i)*Math.random())}static fromArray(t){return null!=t&&t.length>0?t[Math.floor((t.length-1)*Math.random())]:null}static shuffle(t){if(null!=t)for(var e=0,i=t.length;e<i;){var n=e++,a=Math.floor((t.length-1)*Math.random()),r=t[n],s=t[a];t[n]=s,t[a]=r}return t}static fromIterable(t){if(null!=t){var e=Lambda.array(t);return null!=e&&e.length>0?e[Math.floor((e.length-1)*Math.random())]:null}return null}static enumConstructor(t){if(null!=t){var e=t.__empty_constructs__.slice();return null!=e&&e.length>0?e[Math.floor((e.length-1)*Math.random())]:null}return null}}Random.__name__="Random",Random.__properties__={get_onUnitSphere:"get_onUnitSphere",get_insideUnitSphere:"get_insideUnitSphere"};class RaycastHelper{static PlaneRaycast(t,e,i,n){var a=n.dot(t);if(Math.abs(a)<1e-4)return null;var r=t.dot(_$Vector3_Vector3_$Impl_$.sub(e,i))/a;return r<0?null:_$Vector3_Vector3_$Impl_$.addV(i,_$Vector3_Vector3_$Impl_$.mulN(n,r))}}RaycastHelper.__name__="RaycastHelper";class Reflect{static field(t,e){try{return t[e]}catch(t){t instanceof js__$Boot_HaxeError&&t.val;return null}}static getProperty(t,e){var i;return null==t?null:!!t.__properties__&&(i=t.__properties__["get_"+e])?t[i]():t[e]}static setProperty(t,e,i){var n;!!t.__properties__&&(n=t.__properties__["set_"+e])?t[n](i):t[e]=i}static fields(t){var e=[];if(null!=t){var i=Object.prototype.hasOwnProperty;for(var n in t)"__id__"!=n&&"hx__closures__"!=n&&i.call(t,n)&&e.push(n)}return e}}Reflect.__name__="Reflect";class ReviveScreen extends ScriptComponent{constructor(t){super(t),this.onTimerEndHandler=null,this.isGoingToHide=!1,this.isFullShow=!1,this.timeSecShowBar=5,this.timerElapsedSec=0}initialize(){super.initialize(),ReviveScreen.current=this,this.timeSecShowBar=GameSettings.config.SEC_REVIVE_TIMEOUT;for(var t=0,e=this.entity.children.length;t<e;){var i=t++;0==this.entity.children[i].name.indexOf("Bar")?this.progressBarObject=this.entity.children[i]:0==this.entity.children[i].name.indexOf("NoThanksBtn")?this.noThanksBtn=this.entity.children[i]:0==this.entity.children[i].name.indexOf("ExtraBlocksBtn")&&(this.button=this.entity.children[i])}null!=this.noThanksBtn&&(this.noThanksBtn.enabled=!1),null!=this.noThanksBtn&&UIHelper.AddButtonClickHandler(this.noThanksBtn,$bind(this,this.onNoThanksBtnClick)),null!=this.button&&UIHelper.AddButtonClickHandler(this.button,$bind(this,this.onReviveBtnClick)),this.deactivate()}onReviveBtnClick(){this.noThanksBtn.button.enabled=!1,this.button.button.enabled=!1;var t=this,e=this.button.getLocalScale().clone(),i=this.button,n=1.3*e.x,a=1.3*e.y,r=e.z;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r),o=i.getLocalScale();motion_Actuate.update($bind(i,i.setLocalScale),.17,[o.x,o.y,o.z],[s.x,s.y,s.z],!0).reflect().repeat(1).ease(motion_easing_Back.easeIn).onComplete((function(){t.reviveRewardedAdStart(),t.animateHide()})),this.isGoingToHide=!0,null!=this.noThanksBtn&&(this.noThanksBtn.button.enabled=!1),this.isFullShow=!1,null!=this.progressBarObject&&this.setProgressFill(0)}setProgressFill(t){null!=this.progressBarObject&&null!=this.progressBarObject.element&&null!=this.progressBarObject.element.material&&(this.progressBarObject.element.material.alphaTest=1-t)}onNoThanksBtnClick(){var t=this,e=this.noThanksBtn.getLocalScale().clone(),i=this.noThanksBtn,n=1.3*e.x,a=1.3*e.y,r=e.z;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r),o=i.getLocalScale();motion_Actuate.update($bind(i,i.setLocalScale),.17,[o.x,o.y,o.z],[s.x,s.y,s.z],!0).reflect().repeat(2).ease(motion_easing_Back.easeIn).onComplete((function(){t.onCancelRevive(),t.animateHide()})),this.isGoingToHide=!0,this.noThanksBtn.button.enabled=!1,this.button.button.enabled=!1,this.isFullShow=!1,null!=this.progressBarObject&&this.setProgressFill(0)}animateHide(){this.button.button.enabled=!1,this.isFullShow=!1;var t=this,e=this.entity.getLocalScale().clone(),i=this.entity,n=_$Vector3_Vector3_$Impl_$.mulN(e,.01),a=i.getLocalScale();motion_Actuate.update($bind(i,i.setLocalScale),.2,[a.x,a.y,a.z],[n.x,n.y,n.z],!0).ease(motion_easing_Back.easeIn).onComplete((function(){t.entity.setLocalScale(e),t.deactivate()}))}animateShow(){this.isGoingToHide=!1;this.onTimerEndHandler=$bind(this,this.onCancelRevive),null!=this.progressBarObject&&(this.progressBarObject.enabled=!0),this.activate();var t=this,e=this.entity.getLocalScale().clone(),i=this.entity,n=.2,a=.2,r=e.z;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r);i.setLocalScale(s);var o=this.entity,l=o.getLocalScale();motion_Actuate.update($bind(o,o.setLocalScale),.3,[l.x,l.y,l.z],[e.x,e.y,e.z],!0).ease(motion_easing_Back.easeOut).onComplete((function(){return t.isFullShow=!0})),null!=this.noThanksBtn&&(this.noThanksBtn.enabled=!1,motion_Actuate.timer(GameSettings.config.DELAY_SEC_SHOW_NO_THANKS_BTN).onComplete((function(){if(!t.isGoingToHide){t.noThanksBtn.enabled=!0,t.noThanksBtn.button.enabled=!0;var e=t.noThanksBtn.getLocalScale().clone(),i=t.noThanksBtn,n=.05,a=.05,r=e.z;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r);i.setLocalScale(s);var o=t.noThanksBtn,l=o.getLocalScale();motion_Actuate.update($bind(o,o.setLocalScale),.3,[l.x,l.y,l.z],[e.x,e.y,e.z],!0).ease(motion_easing_Back.easeOut)}}))),this.timerElapsedSec=0,null!=this.progressBarObject&&this.setProgressFill(.999)}activate(){this.button.button.enabled=!0,this.entity.enabled=!0}deactivate(){this.isFullShow=!1,this.button.button.enabled=!1,this.entity.enabled=!1}update(t){var e=this;if(super.update(t),this.entity.enabled&&this.isFullShow){var i=(this.timeSecShowBar-this.timerElapsedSec)/this.timeSecShowBar*100;if(null!=this.progressBarObject){var n=i/100;this.setProgressFill(n<0?0:n>1?1:n)}i<=0&&(this.animateHide(),null!=this.onTimerEndHandler&&motion_Actuate.timer(.2).onComplete((function(){return e.onTimerEndHandler(),e.onTimerEndHandler=null}))),i>0&&(this.timerElapsedSec+=t)}}onCancelRevive(){GameController.OnCancelRevive()}reviveRewardedAdStart(){APIManager.ShowRewardedAd($bind(this,this.onReviveRewardedAddSuccess),$bind(this,this.onReviveRewardedAddFail),"continue_play")||this.onReviveRewardedAddFail()}onReviveRewardedAddSuccess(){GameController.Revive(),this.animateHide()}onReviveRewardedAddFail(){motion_Actuate.timer(.3).onComplete($bind(this,this.onCancelRevive))}static Activate(){null!=ReviveScreen.current&&ReviveScreen.current.animateShow()}static Deactivate(){null!=ReviveScreen.current&&ReviveScreen.current.animateHide()}}ReviveScreen.__name__="ReviveScreen",ReviveScreen.__super__=ScriptComponent,Object.assign(ReviveScreen.prototype,{__class__:ReviveScreen});class RootMotionController extends ScriptComponent{postInitialize(){super.postInitialize();var t=this.entity.findComponents("render");if(null!=t&&t.length>0)for(var e=0;e<t.length;){var i=t[e];if(++e,null!=i.rootBone){this.rootEntity=this.app.getEntityFromIndex(i.rootBone).parent,this.startPos=this.rootEntity.getLocalPosition().clone(),this.startRot=this.rootEntity.getLocalRotation().clone();break}}}postUpdate(t){this.rootMotionEnabled||null==this.rootEntity||(this.rootEntity.setLocalPosition(this.startPos),this.rootEntity.setLocalRotation(this.startRot))}}RootMotionController.__name__="RootMotionController",RootMotionController.__super__=ScriptComponent,Object.assign(RootMotionController.prototype,{__class__:RootMotionController});class ShakeEffect{static DOShakeVector3(t,e,i,n){return null==n&&(n=!0),null==i&&(i=.3),motion_Actuate.update(ShakeEffect.updateShake,e,[i,0,n,t],[i,1,n,t]).ease(motion_easing_Linear.get_easeNone())}static updateShake(t,e,i,n){var a=2*Math.random()-1,r=2*Math.random()-1,s=2*Math.random()-1;null==s&&(s=0),null==r&&(r=0),null==a&&(a=0);var o=new pc.Vec3(a,r,s);_$Vector3_Vector3_$Impl_$.normalize(o),i&&(t*=motion_easing_Quad.easeIn.calculate(1-e)),n(_$Vector3_Vector3_$Impl_$.mulN(o,t))}}ShakeEffect.__name__="ShakeEffect";class Shop extends ScriptComponent{constructor(t){super(t),this.isRandomUnlockItemAnim=!1,this.storesGroups=new haxe_ds_IntMap,this.lastPerRewardMoneyValue=-1,this.lastUnlockByMoneyPrice=-1,this.itemsData=[],this.itemsSelectedSavePath="ShopSelectedSlots",this.itemsLockSavePath="ShopUnlockedSlots",this.isActive=!0,this.activeStore=null}initialize(){super.initialize(),Shop.isFirstRun&&(Shop.isFirstRun=!1,GameSettings.config.CLEAR_SAVES&&(PlayerPrefs.DeleteKey(this.itemsLockSavePath),PlayerPrefs.DeleteKey(this.itemsSelectedSavePath),PlayerPrefs.DeleteKey("CurRandUnlockIDxItem"))),Shop.current=this,this.stores=EntityHelper.GetComponentsInChildren_Store(this.entity,Store),this.storeSelectBtns=EntityHelper.GetComponentsInChildren_StoreSelectBtn(this.entity,StoreSelectBtn),null!=this.primaryStore&&(this._primaryStore=EntityHelper.GetComponent_Store(this.primaryStore,Store)),this.prepareSaves();var t=Shop.GetChildByName(Shop.GetChildByName(this.entity,"MainCont"),"UI"),e=this;this.unlockByRewAdBtn=Shop.GetChildByName(t,"UnlockByRewardedAd"),this.unlockByMoneyBtn=Shop.GetChildByName(t,"UnlockByMoneyBtn"),null!=this.unlockByRewAdBtn&&this.unlockByRewAdBtn.button.on("click",(function(t){return Shop.showRewardedAd(),!0})),null!=this.unlockByMoneyBtn&&this.unlockByMoneyBtn.button.on("click",(function(t){return e.onUnlockByMoneyBtnClick(),!0})),this.closeBtn=Shop.GetChildByName(t,"CloseBtn"),null!=this.closeBtn&&null!=this.closeBtn.button&&UIHelper.AddButtonClickHandler(this.closeBtn,(function(){e.close(!0)})),this.watchAdsToUnlockBtnObj=Shop.GetChildByName(t,"WatchAdsToUnlockBtn"),null!=this.watchAdsToUnlockBtnObj&&(this.watchAdsToUnlockBtn=this.watchAdsToUnlockBtnObj.button,this.watchAdsToUnlockBtnObjInitSc=_$Vector3_Vector3_$Impl_$.clone(this.watchAdsToUnlockBtnObj.getLocalScale().clone())),null!=this.watchAdsToUnlockBtn&&(this.watchAdsToUnlockBtn.on("click",(function(t){return e.watchAdsToUnlockClick(),!0})),this.watchAdsToUnlockBtn.entity.enabled=!1),null!=Shop.GetChildByName(t,"SubstorePrevBtn")&&(this.prevSubstoreBtn=Shop.GetChildByName(t,"SubstorePrevBtn").button),null!=Shop.GetChildByName(t,"SubstoreNextBtn")&&(this.nextSubstoreBtn=Shop.GetChildByName(t,"SubstoreNextBtn").button),null!=this.prevSubstoreBtn&&this.prevSubstoreBtn.on("click",(function(t){return e.onPrevSubstoreClick(),!0})),null!=this.nextSubstoreBtn&&this.nextSubstoreBtn.on("click",(function(t){return e.onNextSubstoreClick(),!0})),null!=this.unlockByMoneyBtn&&(this.unlockByMoneyBtnInactive=Shop.GetChildByName(this.unlockByMoneyBtn,"Inactive"),this.unlockByMoneyBtnInactive.enabled=!1,this.unlockByMoneyCostTF=Shop.GetChildByName(this.unlockByMoneyBtn,"PriceTF").element),null!=this.unlockByRewAdBtn&&(this.unlockByRewAdBtn.enabled=!1),null!=this.unlockByMoneyBtn&&(this.unlockByMoneyBtn.enabled=!1),this.rewardMoneyBtn=Shop.GetButtonStatedByName(t,"RewardMoneyBtn"),this.rewardUnlockRandomBtn=Shop.GetButtonStatedByName(t,"RewardUnlockRandomBtn"),this.moneyUnlockRandomBtn=Shop.GetButtonStatedByName(t,"MoneyUnlockRandomBtn"),null!=this.rewardMoneyBtn&&(this.rewardMoneyBtn.on("click",(function(t){return Shop.showRewardedAd("get_shop_money",(function(){Shop.addMoney(e.activeStore.numMoneyPerReward)})),!0})),this.rewardMoneyBtn.entity.enabled=!1),null!=this.rewardUnlockRandomBtn&&(this.rewardUnlockRandomBtn.on("click",(function(t){return Shop.showRewardedAd("get_shop_entry",(function(){e.unlockRandomItem(!0)})),!0})),this.rewardUnlockRandomBtn.entity.enabled=!1),null!=this.moneyUnlockRandomBtn&&(this.moneyUnlockRandomBtn.on("click",(function(t){return Shop.getNumMoney()>=e.activeStore.getUnlockByMoneyPrice()&&(e.activeStore.onUnlockByMoney(),Shop.removeMoney(e.activeStore.getUnlockByMoneyPrice()),e.unlockRandomItem(!0)),!0})),this.moneyUnlockRandomBtn.entity.enabled=!1),this.clicksBlockerObj=Shop.GetChildByName(this.entity,"ClicksBlocker"),this.clicksBlockerObj.enabled=!1;var i=Shop.GetChildByName(this.entity,"UnlockEffect");null!=i&&(this.unlockEffect=i.particlesystem,this.unlockEffect.stop(),i.enabled=!1),this.storesInitScales=[];for(var n=0,a=this.stores.length;n<a;){var r=n++;this.storesInitScales.push(_$Vector3_Vector3_$Impl_$.clone(this.stores[r].get_localScale()))}this.app.graphicsDevice.on("resizecanvas",(function(t,i){return e.onResize(t,i),!0})),this.onResize(this.app.graphicsDevice.canvas.width,this.app.graphicsDevice.canvas.height)}onResize(t,e){var i=t/e,n=1;i<.75&&(n=1-.82*(1-i/.75));for(var a=0,r=this.stores.length;a<r;){var s=a++;this.stores[s].set_localScale(_$Vector3_Vector3_$Impl_$.mulN(this.storesInitScales[s],n))}var o=this.watchAdsToUnlockBtnObj,l=_$Vector3_Vector3_$Impl_$.mulN(this.watchAdsToUnlockBtnObjInitSc,n);o.setLocalScale(l)}onPrevSubstoreClick(){this.activeStore.switchPrevSubStore(),this.updateSubstoresBtns()}onNextSubstoreClick(){this.activeStore.switchNextSubStore(),this.updateSubstoresBtns()}updateSubstoresBtns(){null!=this.prevSubstoreBtn&&(this.prevSubstoreBtn.entity.enabled=this.activeStore.get_hasPrevSubstore()),null!=this.nextSubstoreBtn&&(this.nextSubstoreBtn.entity.enabled=this.activeStore.get_hasNextSubstore())}postInitialize(){for(var t=0,e=this.stores.length;t<e;){var i=t++;null==this._primaryStore&&0==i||this.stores[i]==this._primaryStore?(this.activeStore=this.stores[i],this.stores[i].setActive(!0,!1)):this.stores[i].setActive(!1,!1)}for(var n=0,a=this.stores;n<a.length;){var r=a[n];++n;for(var s=0,o=r.slots;s<o.length;){var l=o[s];++s,this.itemsData.push({itemName:l.itemName,locked:!0,slot:l,store:r})}}for(var c=[],h=0,u=this.stores;h<u.length;){var d=u[h];++h;for(var m=0,_=d.slots;m<_.length;){var p=_[m];++m,p.lockLevel>0&&c.push({itemName:p.itemName,lockLevel:p.lockLevel,slot:p})}}if(c.sort((function(t,e){return t.lockLevel-e.lockLevel})),this.levelLockedItems=c,0==this.selectedItems.length)for(var g=0,y=this.stores;g<y.length;){var v=y[g];++g;for(var f=0,b=v.slots;f<b.length;){var S=b[f];if(++f,this.defaultUnlockedItems.indexOf(S.itemName)>-1){this.selectedItems.push(S.itemName);break}}}this.initStores();for(var C=0,I=this.storeSelectBtns;C<I.length;){var M=I[C];++C,M.store==this.activeStore.entity?M.select():M.deselect()}this.hideOnInit&&this.close(!1)}watchAdsToUnlockClick(){Shop.showRewardedAd("shop_unlock_reward",$bind(this,this.onWatchAdToUnlockReward),$bind(this,this.onWatchAdToUnlockFail))}onWatchAdToUnlockReward(){null!=this.lastSelectedSlot&&this.lastSelectedSlot.addUnlockAdReward(),this.updateUnlockBtns()}onWatchAdToUnlockFail(){this.updateUnlockBtns()}onUnlockByMoneyBtnClick(){this.unlockByMoneyBtnInactive.enabled||(Shop.getNumMoney()<Shop.get_unlockRandomPrice()||(Shop.removeMoney(Shop.get_unlockRandomPrice()),this.unlockRandomItem()),this.updateUnlockBtns())}getSelectedItems(){return this.selectedItems}setActiveStore(t,e){null==e&&(e=!1),null!=t&&(this.activeStore.setActive(!1,e),this.activeStore=t,this.activeStore.setActive(!0,e));for(var i=0,n=this.storeSelectBtns;i<n.length;){var a=n[i];++i,a.store==this.activeStore.entity?a.select():a.deselect()}null!=this.lastSelectedSlot&&this.lastSelectedSlot.get_lockedByAds()&&this.lastSelectedSlot.deselect(),this.lastSelectedSlot=null,this.updateUnlockBtns(),this.updateSubstoresBtns()}prepareSaves(){if(this.unlockedItems=[],PlayerPrefs.HasKey(this.itemsLockSavePath))for(var t=PlayerPrefs.GetString(this.itemsLockSavePath).split(";"),e=0;e<t.length;){var i=t[e];++e,-1==this.unlockedItems.indexOf(i)&&this.unlockedItems.push(i)}for(var n=0,a=this.defaultUnlockedItems;n<a.length;){var r=a[n];++n,-1==this.unlockedItems.indexOf(r)&&this.unlockedItems.push(r)}if(this.selectedItems=[],PlayerPrefs.HasKey(this.itemsSelectedSavePath))for(var s=PlayerPrefs.GetString(this.itemsSelectedSavePath).split(";"),o=0;o<s.length;){var l=s[o];++o,-1==this.selectedItems.indexOf(l)&&this.selectedItems.push(l)}}saveChanges(){PlayerPrefs.SetString(this.itemsLockSavePath,this.unlockedItems.join(";")),PlayerPrefs.SetString(this.itemsSelectedSavePath,this.selectedItems.join(";"))}initStores(){for(var t=0,e=this.itemsData;t<e.length;){var i=e[t];++t,-1!=this.unlockedItems.indexOf(i.itemName)||!i.slot.lockedOnInit||i.slot.lockLevel>0&&!i.slot.get_lockedByLevel()?(i.slot.unlock(),i.locked=!1,-1!=this.selectedItems.indexOf(i.itemName)&&i.slot.select()):i.locked=!0}for(var n=0,a=this.stores.length;n<a;){var r=n++,s=this.stores[r];if(-1!=s.storeGroup){if(!this.storesGroups.h.hasOwnProperty(s.storeGroup)){var o=this.storesGroups,l=s.storeGroup;o.h[l]=[]}this.storesGroups.h[s.storeGroup].push(s)}}this.updateSubstoresBtns()}onSlotSelected(t){for(var e=null,i=0,n=this.stores;i<n.length;){var a=n[i];if(++i,a.slots.indexOf(t)>-1){e=a;break}}if(null!=this.lastSelectedSlot&&this.lastSelectedSlot==t&&!t.locked&&this.lastSelectedSlot.get_lockedByAds()&&t.selected)return this.lastSelectedSlot.deselect(),void(this.lastSelectedSlot=null);if(null!=this.lastSelectedSlot&&this.lastSelectedSlot.get_lockedByAds()&&this.lastSelectedSlot.deselect(),this.lastSelectedSlot=t,t.locked||!t.get_lockedByAds()){for(var r=0,s=this.itemsData;r<s.length;){var o=s[r];++r,(o.store==e||-1!=e.storeGroup&&o.store.storeGroup==e.storeGroup)&&(-1!=this.selectedItems.indexOf(o.itemName)&&HxOverrides.remove(this.selectedItems,o.itemName),t!=o.slot?o.slot.deselect():o.slot.select())}this.selectedItems.push(t.itemName),this.saveChanges(),GameController.PreloadHeroAvatar()}else t.select()}open(t){if(null==t&&(t=!0),!this.isActive){this.isActive=!0,this.initStores(),this.entity.enabled=!0;for(var e=0,i=this.selectedItems.length;e<i;){var n=e++;if(0==this.selectedItems[n].indexOf("item")){this.shopOpenActiveItem=this.selectedItems[n];break}}this.clicksBlockerObj.enabled=!1,null!=this.lastSelectedSlot&&this.lastSelectedSlot.get_lockedByAds()&&this.lastSelectedSlot.deselect(),this.lastSelectedSlot=null,this.openLastStore(),this.updateUnlockBtns()}}close(t){if(null==t&&(t=!0),this.isActive){this.isActive=!1,null!=GameController.current&&GameController.current.updateShopItems();for(var e=0,i=this.selectedItems.length;e<i;){var n=e++;if(0==this.selectedItems[n].indexOf("item")){this.shopOpenActiveItem!=this.selectedItems[n]&&null!=this.shopOpenActiveItem&&Shop.TrackSkinUse(this.selectedItems[n],!1,!0);break}}this.entity.enabled=!1}}openLastStore(){if(this.setLastUsedStoreOnOpen&&null!=Shop.get_lastUsedStore()){var t=Shop.get_lastUsedStore().split("_");if(2==t.length){var e,i;e=Std.parseInt(t[0]),i=Std.parseInt(t[1]),e>-1&&i>-1&&this.stores.length>e&&(this.setActiveStore(this.stores[e],!1),this.stores[e].setActiveSubstore(i),this.updateUnlockBtns(),this.updateSubstoresBtns())}}}onItemUnlocked(t){-1!=t.itemName.indexOf("bgitem")||t.itemName.indexOf("floatitem")}setItemInUse(t){for(var e=0,i=this.itemsData;e<i.length;){var n=i[e];if(++e,n.itemName==t&&!n.locked){this.onSlotSelected(n.slot);break}}null!=GameController.current&&GameController.current.updateShopItems()}unlockItem(t,e,i,n){null==n&&(n=!1),null==e&&(e=!1);for(var a=0,r=this.itemsData;a<r.length;){var s=r[a];if(++a,s.itemName==t){n&&s.slot.addRewardWatched(),s.slot.unlock(),s.locked=!1,e&&this.onSlotSelected(s.slot),this.unlockedItems.push(t),this.onItemUnlocked(s);break}}this.saveChanges(),this.updateUnlockBtns(),null!=GameController.current&&GameController.current.updateShopItems()}unlockRandomItemByItemNamePrefix(t,e,i){null==e&&(e=!1);for(var n=[],a=0,r=this.itemsData;a<r.length;){var s=r[a];++a,s.locked&&0==s.itemName.indexOf(t)&&n.push(s)}if(0!=n.length){var o=n[Math.floor(n.length*Math.random())];o.locked=!1,this.unlockedItems.push(o.itemName),o.slot.unlock(),e&&this.onSlotSelected(o.slot),this.onItemUnlocked(o),this.saveChanges(),null!=GameController.current&&GameController.current.updateShopItems()}}unlockRandomItemAnim(){if(!this.isRandomUnlockItemAnim){for(var t=[],e=this,i=0,n=this.itemsData;i<n.length;){var a=n[i];++i,a.store==this.activeStore&&a.locked&&this.activeStore.doItemBelongsCurSubStore(a.itemName)&&!a.slot.get_lockedByLevel()&&!a.slot.get_lockedByAds()&&t.push(a)}if(0!=t.length){var r=Shop;if(r.set_randomUnlockIdx(r.get_randomUnlockIdx()+1),1!=t.length){this.isRandomUnlockItemAnim=!0,null!=this.clicksBlockerObj&&(this.clicksBlockerObj.enabled=!0),this.randomSortItemsArr(t);for(var s=5+Math.floor(3*Math.random()),o=.1,l=.3,c=0,h=s;c<h;){var u=[c++==s-1];motion_Actuate.timer(o).onComplete(function(i){return function(){e.onRandUnlockTurn(t,i[0])}}(u)),o+=l,l*=1.15}}else this.doUnlockItemFromUnlockRandItemAnim(t[0],!0)}}}onRandUnlockTurn(t,e){null==e&&(e=!1);var i=this;if(e)motion_Actuate.timer(.2).onComplete((function(){i.endRandomItemUnlockAnim(t[0])}));else{var n=t[0];if(n.slot.blinkSelector(),this.randomSortItemsArr(t),0==t.indexOf(n)){var a=t[0];t[0]=t[t.length-1],t[t.length-1]=a}}}endRandomItemUnlockAnim(t){this.doUnlockItemFromUnlockRandItemAnim(t,!0),null!=this.clicksBlockerObj&&(this.clicksBlockerObj.enabled=!1),this.isRandomUnlockItemAnim=!1}randomSortItemsArr(t){for(var e=t.length,i=0,n=e;i<n;){var a=i++,r=Math.floor(e*Math.random()),s=t[r];t[r]=t[a],t[a]=s}}doUnlockItemFromUnlockRandItemAnim(t,e){null==e&&(e=!1),t.locked=!1,this.unlockedItems.push(t.itemName),t.slot.unlock(),e&&this.onSlotSelected(t.slot),this.onItemUnlocked(t),this.saveChanges(),Shop.SetUnlockEffectAt(t.slot.entity.getPosition().clone()),this.updateUnlockBtns()}unlockRandomItem(t){if(null==t&&(t=!1),t)this.unlockRandomItemAnim();else{for(var e=[],i=0,n=this.itemsData;i<n.length;){var a=n[i];++i,a.store==this.activeStore&&a.locked&&this.activeStore.doItemBelongsCurSubStore(a.itemName)&&!a.slot.get_lockedByLevel()&&!a.slot.get_lockedByAds()&&e.push(a)}if(0!=e.length){var r=Shop;r.set_randomUnlockIdx(r.get_randomUnlockIdx()+1);for(var s=!0,o=0,l=this.activeStore.slots.length;o<l;){var c=o++;if(this.activeStore.slots[c].selected){s=!1;break}}var h=e[Math.floor(e.length*Math.random())];h.locked=!1,this.unlockedItems.push(h.itemName),h.slot.unlock(),s&&this.onSlotSelected(h.slot),this.onItemUnlocked(h),this.saveChanges(),Shop.SetUnlockEffectAt(h.slot.entity.getPosition().clone()),this.updateUnlockBtns()}}}getSkinTypeByItemName(t){var e="";return 0==t.indexOf("item")?e="hero":0==t.indexOf("hat")?e="hat":0==t.indexOf("enemy")&&(e="enemy"),e}haveUnlockedItems(t){null==t&&(t=this.activeStore);for(var e=0,i=this.itemsData;e<i.length;){var n=i[e];if(++e,n.store==t&&n.locked&&t.doItemBelongsCurSubStore(n.itemName)&&!n.slot.get_lockedByAds()&&!n.slot.get_lockedByLevel())return!0}return!1}unlockAllItems(t,e){null==e&&(e=!0),null==t&&(t=!0);for(var i=0,n=this.itemsData;i<n.length;){var a=n[i];if(++i,a.locked&&(t&&e||a.store.unsellable&&e||!a.store.unsellable&&t)){var r=a;r.locked=!1,this.unlockedItems.push(r.itemName),r.slot.unlock()}}this.saveChanges()}updateUnlockBtns2(){}updateUnlockBtns(){if(null==this.rewardMoneyBtn||null==this.rewardUnlockRandomBtn||null==this.moneyUnlockRandomBtn){var t=this.haveUnlockedItems(),e=this.activeStore.unsellable,i=Shop.hasRewardedAdd(),n=null!=this.lastSelectedSlot&&this.lastSelectedSlot.get_lockedByAds();if(!t||e||n)null!=this.unlockByRewAdBtn&&(this.unlockByRewAdBtn.enabled=!1,this.unlockByMoneyBtn.enabled=!1);else{if(null!=this.activeStore&&this.activeStore.isSwitchStoreAnim)return null!=this.unlockByRewAdBtn&&(this.unlockByRewAdBtn.enabled=!1,this.unlockByMoneyBtn.enabled=!1),void(null!=this.watchAdsToUnlockBtn&&(this.watchAdsToUnlockBtn.enabled=!1));null!=this.unlockByRewAdBtn&&(this.unlockByRewAdBtn.enabled=i);var a=Shop.get_unlockRandomPrice()<=Shop.getNumMoney();null!=this.unlockByMoneyBtn&&(this.unlockByMoneyBtn.enabled=!0),a?(null!=this.unlockByMoneyBtn&&null!=this.unlockByMoneyBtn.element&&(this.unlockByMoneyBtn.element.enabled=!0),null!=this.unlockByMoneyBtnInactive&&(this.unlockByMoneyBtnInactive.enabled=!1)):(null!=this.unlockByMoneyBtn&&null!=this.unlockByMoneyBtn.element&&(this.unlockByMoneyBtn.element.enabled=!1),null!=this.unlockByMoneyBtnInactive&&(this.unlockByMoneyBtnInactive.enabled=!0))}if(null!=this.unlockByRewAdBtn&&(this.unlockByRewAdBtn.enabled=i&&!this.activeStore.unsellable&&!n),null!=this.unlockByMoneyCostTF&&this.unlockByMoneyCostTF.text!=Shop.get_unlockRandomPrice()+""){var r=Shop.get_unlockRandomPrice();this.unlockByMoneyCostTF.text=r+""}null!=this.watchAdsToUnlockBtn&&(this.watchAdsToUnlockBtn.entity.enabled=n&&i)}else this.updateUnlockBtns2()}getAllLockedItems(t){null==t&&(t=!1);for(var e=[],i=0,n=this.itemsData;i<n.length;){var a=n[i];++i,!a.locked||t&&!a.store.unsellable||e.push(a.itemName)}return e}getAllSellableLockedItems(){for(var t=[],e=0,i=this.itemsData;e<i.length;){var n=i[e];++e,n.locked&&!n.store.unsellable&&t.push(n.itemName)}return t}getRandomItemName(t){null==t&&(t=!1);var e=this.getAllLockedItems(t);return null==e||0==e.length?"":e[Math.floor(e.length*Math.random())]}getLevelLockedItemName(t){null==t&&(t=-1),t<0&&(t=GameSettings.get_curLevel());var e=this.getCurLevelsLockedItemData();return null!=e?e.itemName:null}getCurrentLockedLevelData(){var t=GameSettings.get_curLevel(),e=t<=0?0:t-1,i=this.getLevelsLockedItemData(t),n=this.getLevelsLockedItemData(e);if(null==i&&null==n)return null;var a=0,r=0,s="";if(null!=i&&(s=i.itemName),i!=n&&null!=n){a=100,s=n.itemName;for(var o=null,l=0,c=this.levelLockedItems.length;l<c;){var h=l++;if(this.levelLockedItems[h]==n){h>0&&(o=this.levelLockedItems[h-1]);break}}var u=null!=o?o.lockLevel:0;(r=100*(1-1/(n.lockLevel-u)))<0&&(r=0)}else{for(var d=null,m=0,_=this.levelLockedItems.length;m<_;){var p=m++;if(this.levelLockedItems[p]==i){p>0&&(d=this.levelLockedItems[p-1]);break}}var g=null!=d?d.lockLevel:0;a=(t-1-g)/(i.lockLevel-g)*100,(r=(t-2-g)/(i.lockLevel-g)*100)<0&&(r=0)}return{itemName:s,perc:a,prevPerc:r}}getCurLevelsLockedItemData(){return this.getLevelsLockedItemData(GameSettings.get_curLevel())}getLevelsLockedItemData(t){for(var e=null,i=-1,n=0,a=this.levelLockedItems.length;n<a;){var r=n++;if(i<t&&this.levelLockedItems[r].lockLevel>=t){e=this.levelLockedItems[r];break}i=this.levelLockedItems[r].lockLevel}return e}update(t){if(super.update(t),this.updateUnlockBtns(),null!=this.stores&&null!=this.activeStore){var e=this.stores.indexOf(this.activeStore);if(e>-1){var i=e+"_"+this.activeStore.curActiveSubStore;Shop._lastUsedStore!=i&&Shop.set_lastUsedStore(i)}}}setUnlockEffectAt(t){if(null!=this.unlockEffect){this.unlockEffect.enabled=!0;var e=this.unlockEffect.entity.getPosition().clone();e.x=t.x,e.y=t.y,this.unlockEffect.entity.setPosition(e)}}static addMoney(t){GameSettings.addDiamonds(t)}static removeMoney(t){GameSettings.removeDiamonds(t)}static getNumMoney(){return GameSettings.get_numDiamonds()}static hasRewardedAdd(){return APIManager.IsRewardedAdReady()}static showRewardedAd(t,e,i){null==t&&(t="get_shop_entry"),APIManager.ShowRewardedAd(null==e?Shop.onRewardedAdReward:e,null==i?Shop.onRewardedAdFail:i,t)}static onRewardedAdReward(){null!=Shop.current&&(GameSettings.addDiamonds(Shop.current.numAddRewardAdMoney),Shop.current.updateUnlockBtns())}static onRewardedAdFail(){null!=Shop.current&&Shop.current.updateUnlockBtns()}static areEnougthMoneyToGetItem(){return Shop.get_unlockRandomPrice()<=Shop.getNumMoney()}static hasUnlockedItems(t){if(null==t&&(t=!1),null==Shop.current)return!1;for(var e=0,i=Shop.current.itemsData;e<i.length;){var n=i[e];if(++e,n.locked&&(!t||!n.store.unsellable))return!0}return!1}static get_IsActive(){return null!=Shop.current&&Shop.current.isActive}static TrackSkinUse(t,e,i){null==i&&(i=!1),null==e&&(e=!1);var n=Std.parseInt(StringTools.replace(t,"item",""))-1;e&&APIManager.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"UnlockSkin:"+n}),i&&APIManager.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"UseSkin:"+n})}static Open(t){null==t&&(t=!0),null!=Shop.current&&Shop.current.open(t)}static Close(t){null==t&&(t=!0),null!=Shop.current&&Shop.current.close(t)}static GetAllLockedItems(){return null!=Shop.current?Shop.current.getAllLockedItems():null}static GetLevelLockedItemName(t){return null==t&&(t=-1),null!=Shop.current?Shop.current.getLevelLockedItemName(t):null}static GetCurrentLockedLevelData(){return null!=Shop.current?Shop.current.getCurrentLockedLevelData():null}static SetUnlockEffectAt(t){null!=Shop.current&&Shop.current.setUnlockEffectAt(t)}static get_randomUnlockIdx(){return-1==Shop._randomUnlockIdx&&(Shop._randomUnlockIdx=PlayerPrefs.HasKey("CurRandUnlockIDxItem")?PlayerPrefs.GetInt("CurRandUnlockIDxItem"):0),Shop._randomUnlockIdx}static set_randomUnlockIdx(t){return Shop._randomUnlockIdx=t,PlayerPrefs.SetInt("CurRandUnlockIDxItem",Shop._randomUnlockIdx),Shop._randomUnlockIdx}static get_unlockRandomPrice(){var t=Shop.get_randomUnlockIdx();return t>=Shop.current.unlockPrices.length&&(t=Shop.current.unlockPrices.length-1),Shop.current.unlockPrices[t]}static get_lastUsedStore(){return null==Shop._lastUsedStore&&(Shop._lastUsedStore=PlayerPrefs.HasKey("LastUsedStore")?PlayerPrefs.GetString("LastUsedStore"):null),Shop._lastUsedStore}static set_lastUsedStore(t){return Shop._lastUsedStore=t,PlayerPrefs.SetString("LastUsedStore",Shop._lastUsedStore),Shop._lastUsedStore}static GetButtonStatedByName(t,e){for(var i=0,n=t.children;i<n.length;){var a=n[i];if(++i,a.name==e)return js_Boot.__cast(a,pc.Entity).button}return null}static setButtonStatedMoneyValue(t,e){Shop.recursevlySetText(t.entity,"MoneyTF",e+"")}static recursevlySetText(t,e,i){for(var n,a=0,r=t.children;a<r.length;){var s=r[a];++a,null!=(n=js_Boot.__cast(js_Boot.__cast(s,pc.Entity).element,pc.TextElement))&&s.name==e&&(n.text=i),js_Boot.__cast(s,pc.Entity).children.length>0&&Shop.recursevlySetText(s,e,i)}}static GetChildByName(t,e){for(var i=0,n=t.children;i<n.length;){var a=n[i];if(++i,a.name==e)return a}return null}}Shop.__name__="Shop",Shop.__properties__={set_lastUsedStore:"set_lastUsedStore",get_lastUsedStore:"get_lastUsedStore",get_unlockRandomPrice:"get_unlockRandomPrice",set_randomUnlockIdx:"set_randomUnlockIdx",get_randomUnlockIdx:"get_randomUnlockIdx",get_IsActive:"get_IsActive"},Shop.__super__=ScriptComponent,Object.assign(Shop.prototype,{__class__:Shop});class Slot extends ScriptComponent{constructor(t){super(t),this.inited=!1,this.locked=!0,this.selected=!1,this.numRewardsHas=0}get_lockedByAds(){return this.numRewardsToOpen>this.numRewardsHas}get_lockedByLevel(){return this.lockLevel>=GameSettings.get_curLevel()}initialize(){super.initialize(),this.init()}init(){if(this.inited)this.updateLockByLevel();else{this.inited=!0,this.baseSaveName=this.entity.parent.name+"_"+this.itemName;for(var t=this,e=0,i=this.entity.children.length;e<i;){var n=e++,a=this.entity.children[n];0==a.name.indexOf("Select")?this.selectedObj=a:0==a.name.indexOf("Unlocked")?this.unlockedObj=a:0==a.name.indexOf("ItemImage")?this.itemObj=a:0==a.name.indexOf("Locked")?this.lockedObj=a:0==a.name.indexOf("UnlockByRewardsBtn")?this.unlockByRewardsBtn=a:0==a.name.indexOf("LockByLevel")&&(this.lockByLevelObj=a)}if(this.selectedObj.enabled=!1,this.unlockedObj.enabled=!1,this.itemObj.enabled=!1,this.lockedObj.enabled=!0,this.button=this.entity.button,this.button.on("click",(function(e){return t.onClick(),!0})),PlayerPrefs.HasKey(this.baseSaveName+"_rew")&&(this.numRewardsHas=PlayerPrefs.GetInt(this.baseSaveName+"_rew")),null!=this.unlockByRewardsBtn){var r=this.unlockByRewardsBtn.findByName("InfoTF");null!=r&&(this.unlockByRewardsBtnTF=r.element),this.updateAdsUnlockBtn()}if(null!=this.lockByLevelObj){var s=this.lockByLevelObj.findByName("LevelTF");if(null!=s){var o=s.element;null!=o&&(o.text="LVL"+this.lockLevel)}}this.updateLockByLevel()}}select(){this.init(),this.locked||this.selected||(this.selected=!0,this.selectedObj.enabled=!0,this.unlockedObj.enabled=!1)}deselect(){this.init(),!this.locked&&this.selected&&(this.selected=!1,this.selectedObj.enabled=!1,this.unlockedObj.enabled=!0)}addRewardWatched(){this.numRewardsHas++,PlayerPrefs.SetInt(this.baseSaveName+"_rew",this.numRewardsHas),this.updateAdsUnlockBtn()}unlock(){this.init(),this.locked=!1,this.lockedObj.enabled=!1,this.itemObj.enabled=!0,this.selectedObj.enabled=this.selected,this.unlockedObj.enabled=!this.selected}addUnlockAdReward(){this.get_lockedByAds()&&(this.numRewardsHas++,PlayerPrefs.SetInt(this.baseSaveName+"_rew",this.numRewardsHas),this.updateAdsUnlockBtn(),this.get_lockedByAds()||(Shop.SetUnlockEffectAt(this.entity.getPosition().clone()),this.deselect(),Shop.current.onSlotSelected(this),Shop.TrackSkinUse(this.itemName,!0,!1)))}updateLockByLevel(){null!=this.lockByLevelObj&&(this.lockByLevelObj.enabled=this.get_lockedByLevel())}updateAdsUnlockBtn(){var t=this.get_lockedByAds()&&!this.get_lockedByLevel();this.unlockByRewardsBtn.enabled=t,null!=this.unlockByRewardsBtnTF&&(this.unlockByRewardsBtnTF.text=this.numRewardsHas+"/"+this.numRewardsToOpen)}blinkSelector(){if(null!=this.selectedObj){var t=this.selectedObj.enabled;this.selectedObj.enabled=!0;var e=this;motion_Actuate.update($bind(this,this.tweenAlphaSet),.2,[1,this.selectedObj],[0,this.selectedObj],!0).ease(motion_easing_Linear.get_easeNone()).onComplete((function(){return e.selectedObj.element.opacity=1,e.selectedObj.enabled=t}))}}tweenAlphaSet(t,e){t.element.opacity=e}onClick(){this.locked||Shop.current.onSlotSelected(this)}}Slot.__name__="Slot",Slot.__super__=ScriptComponent,Object.assign(Slot.prototype,{__class__:Slot,__properties__:Object.assign({},ScriptComponent.prototype.__properties__,{get_lockedByLevel:"get_lockedByLevel",get_lockedByAds:"get_lockedByAds"})});class SoundBtn extends ScriptComponent{constructor(t){super(t),this.curIsMuted=!1}initialize(){super.initialize(),this.soundOnEntity=this.getChildByName("SoundOn"),this.soundOffEntity=this.getChildByName("SoundOff"),null!=this.soundOnEntity&&(this.soundOnEntity.enabled=!0),null!=this.soundOffEntity&&(this.soundOffEntity.enabled=!1),this.updateSoundState(),UIHelper.AddButtonClickHandler(this.entity,$bind(this,this.onSoundBtnClick))}updateSoundState(){this.curIsMuted!=GameController.get_gameMuted()&&(this.curIsMuted=GameController.get_gameMuted(),null!=this.soundOnEntity&&(this.soundOnEntity.enabled=!this.curIsMuted),null!=this.soundOffEntity&&(this.soundOffEntity.enabled=this.curIsMuted))}onSoundBtnClick(){GameController.switchGameMute(),this.updateSoundState()}postUpdate(t){super.postUpdate(t),this.updateSoundState()}}SoundBtn.__name__="SoundBtn",SoundBtn.__super__=ScriptComponent,Object.assign(SoundBtn.prototype,{__class__:SoundBtn});class SoundsController extends ScriptComponent{initialize(){super.initialize(),SoundsController.current=this}play(t,e){null==e&&(e=1),this.entity.sound.play(t).volume=e}static Play(t,e){null==e&&(e=1),null!=SoundsController.current&&SoundsController.current.play(t,e)}}SoundsController.__name__="SoundsController",SoundsController.__super__=ScriptComponent,Object.assign(SoundsController.prototype,{__class__:SoundsController});class Std{static string(t){return js_Boot.__string_rec(t,"")}static parseInt(t){var e=parseInt(t,!t||"0"!=t[0]||"x"!=t[1]&&"X"!=t[1]?10:16);return isNaN(e)?null:e}}Std.__name__="Std";class Store extends ScriptComponent{constructor(t){super(t),this._numUnlocksByMoney=0,this.isSwitchStoreAnim=!1,this.subSoresOffsetX=1400,this.curActiveSubStore=0,this.subStores=[],this.isActive=!0}initialize(){super.initialize(),this.slots=EntityHelper.GetComponentsInChildren_Slot(this.entity,Slot),this.initPos=this.entity.getLocalPosition().clone();for(var t=1;t<100;){var e=t++,i=this.getChildByName("SubStore"+e);if(null==i)break;var n=i,a=n.getLocalPosition().clone(),r=this.subSoresOffsetX*(e-1),s=0,o=0;null==o&&(o=0),null==s&&(s=0),null==r&&(r=0);var l=new pc.Vec3(r,s,o),c=_$Vector3_Vector3_$Impl_$.addV(a,l);n.setLocalPosition(c),this.subStores.push(i)}this.UpdateSubstoresVisible()}doItemBelongsCurSubStore(t){if(this.subStores.length<=0)return!0;for(var e=0,i=this.subStores[this.curActiveSubStore].children.length;e<i;){var n=e++,a=EntityHelper.GetComponent_Slot(this.subStores[this.curActiveSubStore].children[n],Slot);if(null!=a&&a.itemName==t)return!0}return!1}switchNextSubStore(t){if(null==t&&(t=!0),!(this.curActiveSubStore>=this.subStores.length||this.isSwitchStoreAnim)){this.curActiveSubStore++,this.subStores[this.curActiveSubStore-1].enabled=!0,this.subStores[this.curActiveSubStore].enabled=!0;for(var e=0,i=this.subStores.length;e<i;){var n=e++;if(t)this.isSwitchStoreAnim=!0;else{var a=this.subStores[n],r=a.getLocalPosition().clone(),s=-this.subSoresOffsetX,o=0,l=0;null==l&&(l=0),null==o&&(o=0),null==s&&(s=0);var c=new pc.Vec3(s,o,l),h=_$Vector3_Vector3_$Impl_$.addV(r,c);a.setLocalPosition(h)}}}}switchPrevSubStore(t){if(null==t&&(t=!0),!(this.curActiveSubStore<=0||this.isSwitchStoreAnim)){this.curActiveSubStore--,this.subStores[this.curActiveSubStore+1].enabled=!0,this.subStores[this.curActiveSubStore].enabled=!0;for(var e=0,i=this.subStores.length;e<i;){var n=e++;if(t)this.isSwitchStoreAnim=!0;else{var a=this.subStores[n],r=a.getLocalPosition().clone(),s=this.subSoresOffsetX,o=0,l=0;null==l&&(l=0),null==o&&(o=0),null==s&&(s=0);var c=new pc.Vec3(s,o,l),h=_$Vector3_Vector3_$Impl_$.addV(r,c);a.setLocalPosition(h)}}}}onSubstoresSwitchEnd(){this.isSwitchStoreAnim=!1,this.UpdateSubstoresVisible()}setActiveSubstore(t){if(!(null==this.subStores||0==this.subStores.length||t>=this.subStores.length||t==this.curActiveSubStore)){var e=(this.curActiveSubStore-t)*this.subSoresOffsetX;this.curActiveSubStore=t;for(var i=0,n=this.subStores;i<n.length;){var a=n[i];++i;var r=a,s=r.getLocalPosition().clone(),o=e,l=0,c=0;null==c&&(c=0),null==l&&(l=0),null==o&&(o=0);var h=new pc.Vec3(o,l,c),u=_$Vector3_Vector3_$Impl_$.addV(s,h);r.setLocalPosition(u)}this.onSubstoresSwitchEnd()}}UpdateSubstoresVisible(){if(!(null==this.subStores||this.subStores.length<1))for(var t=0,e=this.subStores;t<e.length;){var i=e[t];++t,i.enabled=this.curActiveSubStore==this.subStores.indexOf(i)}}get_hasSubstores(){return this.subStores.length>1}get_hasPrevSubstore(){return!!this.get_hasSubstores()&&this.curActiveSubStore>0}get_hasNextSubstore(){return!!this.get_hasSubstores()&&this.curActiveSubStore<this.subStores.length-1}setActive(t,e){if(null==e&&(e=!0),this.isActive!=t&&(this.isActive=t,!e)){if(t){var i=this.initPos;this.entity.setLocalPosition(i)}this.entity.enabled=t}}getUnlockByMoneyPrice(){return this.unlockByMoneyPrice+this.unlockByMoneyPriceAdd*this.get_numUnlocksByMoney()}onUnlockByMoney(){this.set_numUnlocksByMoney(this.get_numUnlocksByMoney()+1)}get_numUnlocksByMoney(){return 0==this._numUnlocksByMoney&&PlayerPrefs.HasKey("NumUnlocks_"+this.entity.name)&&(this._numUnlocksByMoney=PlayerPrefs.GetInt("NumUnlocks_"+this.entity.name)),this._numUnlocksByMoney}set_numUnlocksByMoney(t){return this._numUnlocksByMoney++,PlayerPrefs.SetInt("NumUnlocks_"+this.entity.name,this._numUnlocksByMoney),this._numUnlocksByMoney}}Store.__name__="Store",Store.__super__=ScriptComponent,Object.assign(Store.prototype,{__class__:Store,__properties__:Object.assign({},ScriptComponent.prototype.__properties__,{set_numUnlocksByMoney:"set_numUnlocksByMoney",get_numUnlocksByMoney:"get_numUnlocksByMoney",get_hasNextSubstore:"get_hasNextSubstore",get_hasPrevSubstore:"get_hasPrevSubstore",get_hasSubstores:"get_hasSubstores"})});class StoreSelectBtn extends ScriptComponent{constructor(t){super(t),this.selected=!1}initialize(){super.initialize();for(var t=this,e=0,i=this.entity.children;e<i.length;){var n=i[e];++e,0==n.name.indexOf("Normal")?this.normalState=n:0==n.name.indexOf("Selected")&&(this.selectedState=n)}null!=this.selectedState&&(this.selectedState.enabled=!1),this.entity.addComponent("button"),this.button=this.entity.button,this.button.on("click",(function(e){return t.onClick(),!0}))}select(){this.selected||(this.selected=!0,null!=this.selectedState&&(this.selectedState.enabled=!0),null!=this.normalState&&(this.normalState.enabled=!1))}deselect(){this.selected&&(this.selected=!1,null!=this.selectedState&&(this.selectedState.enabled=!1),null!=this.normalState&&(this.normalState.enabled=!0))}onClick(){this.selected||null!=Shop.current.activeStore&&Shop.current.activeStore.isSwitchStoreAnim||(this.select(),Shop.current.setActiveStore(EntityHelper.GetComponent_Store(this.store,Store),!0))}}StoreSelectBtn.__name__="StoreSelectBtn",StoreSelectBtn.__super__=ScriptComponent,Object.assign(StoreSelectBtn.prototype,{__class__:StoreSelectBtn});class StringTools{static isSpace(t,e){var i=HxOverrides.cca(t,e);return i>8&&i<14||32==i}static ltrim(t){for(var e=t.length,i=0;i<e&&StringTools.isSpace(t,i);)++i;return i>0?HxOverrides.substr(t,i,e-i):t}static rtrim(t){for(var e=t.length,i=0;i<e&&StringTools.isSpace(t,e-i-1);)++i;return i>0?HxOverrides.substr(t,0,e-i):t}static trim(t){return StringTools.ltrim(StringTools.rtrim(t))}static replace(t,e,i){return t.split(e).join(i)}}StringTools.__name__="StringTools";class SuperMode extends ScriptComponent{constructor(t){super(t),this.gameEnded=!1,this.gameStarted=!1,this.isSuperMode=!1,this.superModeLeftTime=0,this.targetPerc=0,this.curPerc=0}initialize(){if(super.initialize(),SuperMode.current=this,null!=this.progressBarImage&&null!=this.progressBarImage.element&&(this.progressBarImageInitWidth=this.progressBarImage.element.width),null!=this.progressBarTimeOutImage&&null!=this.progressBarTimeOutImage.element&&(this.progressBarTimeOutImageInitWidth=this.progressBarTimeOutImage.element.width),null!=this.hidedObjectsBeforeGameStarted)for(var t=0,e=this.hidedObjectsBeforeGameStarted;t<e.length;){var i=e[t];++t,i.enabled=!1}null!=this.progressBarTimeOutImage&&(this.progressBarTimeOutImage.enabled=!1),null!=this.progressBarImage&&(this.progressBarImage.enabled=!1),null!=this.superModeEffectObject&&(this.superModeEffectObject.enabled=!1,this.superModeEffParticleSystems=this.superModeEffectObject.findComponents("particlesystem"))}onHeroThrow(){this.entity.enabled&&!this.isSuperMode&&(this.targetPerc+=this.superModeThrowAddPerc)}update(t){if(super.update(t),!this.gameStarted&&null!=GameController.current&&GameController.current.gameStarted){this.gameStarted=!0,this.gameEnded=!1,this.curPerc=this.targetPerc=0,this.isSuperMode=!1,null!=this.progressBarTimeOutImage&&(this.progressBarTimeOutImage.enabled=!1,null!=this.progressBarImage&&(this.setProgressBarImageFill(0),this.progressBarImage.enabled=!0));for(var e=0,i=this.hidedObjectsBeforeGameStarted;e<i.length;){var n=i[e];++e,n.enabled=!0}}if(!this.gameEnded&&null!=GameController.current&&(GameController.current.gameFinished||GameController.current.isFatalityDialog)){this.gameEnded=!0,this.gameStarted=!1,this.isSuperMode&&(this.isSuperMode=!1,null!=this.progressBarTimeOutImage&&(this.progressBarTimeOutImage.enabled=!1,null!=this.progressBarImage&&(this.setProgressBarImageFill(0),this.progressBarImage.enabled=!0)),null!=this.superModeEffectObject&&(this.superModeEffectObject.enabled=!1),this.curPerc=this.targetPerc=0,this.superModeLeftTime=0,null!=Hero.current&&Hero.current.deactivateSuperMode());for(var a=0,r=this.hidedObjectsBeforeGameStarted;a<r.length;){var s=r[a];++a,s.enabled=!1}}if(!this.gameEnded)if(this.isSuperMode){if(this.superModeLeftTime-=t,this.superModeLeftTime<=0&&(this.isSuperMode=!1,null!=this.progressBarTimeOutImage&&(this.progressBarTimeOutImage.enabled=!1,null!=this.progressBarImage&&(this.setProgressBarImageFill(0),this.progressBarImage.enabled=!0)),null!=this.superModeEffectObject&&(this.superModeEffectObject.enabled=!1),this.curPerc=this.targetPerc=0,this.superModeLeftTime=0,null!=Hero.current&&Hero.current.deactivateSuperMode()),null!=this.progressBarTimeOutImage?this.setProgressBarTimeOutImageFill(this.superModeLeftTime/this.superModeDurationSec):null!=this.progressBarImage&&this.setProgressBarImageFill(this.superModeLeftTime/this.superModeDurationSec),null!=this.superModeEffectObject&&null!=Hero.current){var o=this.superModeEffectObject.getPosition().clone(),l=Hero.current.entity.getPosition().clone();o.x=l.x,o.z=l.z,o.y=l.y+.05,this.superModeEffectObject.setPosition(o)}}else{this.targetPerc<100&&(this.targetPerc-=this.superModePercSubInSec*t),this.targetPerc<=0&&(this.targetPerc=0);var c=this.curPerc,h=7*t;h<0&&(h=0),h>1&&(h=1);var u=this.targetPerc-c;if(this.curPerc=c+u*h,this.targetPerc>=100&&this.curPerc>99.4&&(this.curPerc=100),this.curPerc>=100){if(this.curPerc=100,this.targetPerc=100,this.isSuperMode=!0,this.superModeLeftTime=this.superModeDurationSec,null!=this.superModeEffectObject){this.superModeEffectObject.enabled=!0;for(var d=0,m=this.superModeEffParticleSystems;d<m.length;){var _=m[d];++d,_.reset(),_.play()}}null!=this.progressBarImage&&this.setProgressBarImageFill(1),null!=this.progressBarTimeOutImage&&this.setProgressBarTimeOutImageFill(1),null!=this.progressBarTimeOutImage&&(this.progressBarTimeOutImage.enabled=!0,null!=this.progressBarImage&&(this.progressBarImage.enabled=!1)),null!=Hero.current&&Hero.current.activateSuperMode(this.superModeHeroSpeedMultiplier)}else null!=this.progressBarImage&&this.setProgressBarImageFill(this.curPerc/100)}}setProgressBarImageFill(t){if(null!=this.progressBarImage&&null!=this.progressBarImage.element){t=t>1?1:t<0?0:t,this.progressBarImage.element.width=this.progressBarImageInitWidth*t;var e=this.progressBarImage.element.rect.clone();e.z=t,this.progressBarImage.element.rect=e}}setProgressBarTimeOutImageFill(t){if(null!=this.progressBarTimeOutImage&&null!=this.progressBarTimeOutImage.element){t=t>1?1:t<0?0:t,this.progressBarTimeOutImage.element.width=this.progressBarTimeOutImageInitWidth*t;var e=this.progressBarTimeOutImage.element.rect.clone();e.z=t,this.progressBarTimeOutImage.element.rect=e}}static get_IsSuperMode(){return null!=SuperMode.current&&SuperMode.current.isSuperMode}static OnHeroThrow(){null!=SuperMode.current&&SuperMode.current.onHeroThrow()}}SuperMode.__name__="SuperMode",SuperMode.__properties__={get_IsSuperMode:"get_IsSuperMode"},SuperMode.__super__=ScriptComponent,Object.assign(SuperMode.prototype,{__class__:SuperMode});class TestComp extends ScriptComponent{initialize(){super.initialize()}update(t){super.update(t),Input.GetMouseButtonDown(0)&&console.log("src/TestComp.hx:18:","MDown"),Input.GetMouseButtonUp(0)&&console.log("src/TestComp.hx:19:","MUp")}}TestComp.__name__="TestComp",TestComp.__super__=ScriptComponent,Object.assign(TestComp.prototype,{__class__:TestComp});class ThrowObjectCharacter extends ThrowObject{initialize(){super.initialize(),this.leftHandPos={isSet:!0,position:_$Vector3_Vector3_$Impl_$.zero,rotation:_$Vector3_Vector3_$Impl_$.zero},this.rightHandPos={isSet:!0,position:_$Vector3_Vector3_$Impl_$.zero,rotation:_$Vector3_Vector3_$Impl_$.zero}}postUpdate(t){if(super.postUpdate(t),null!=this.character&&null!=this.followCharacterBone){var e=(new pc.Mat4).mul2(this.followCharacterBone.getWorldTransform().clone().invert(),this.character.entity.getWorldTransform()),i=e.mul2(this.entity.getWorldTransform(),e),n=this.character.entity,a=i.getTranslation();n.setPosition(a);var r=this.character.entity,s=new pc.Quat(0,0,0,1),o=_$Quaternion_Quaternion_$Impl_$.setFromMat4(s,i);r.setRotation(o)}}static initForCharacter(t){var e=new pc.Entity;pc.app.root.addChild(e);var i=t.animator.entity.findByName("spine_03"),n=i.getPosition().clone();e.setPosition(n);var a=i.getRotation().clone();e.setRotation(a),e.addComponent("collision",{type:"capsule",radius:.3,height:1.7});for(var r=t.entity.findComponents("collision"),s=0;s<r.length;){var o=r[s];++s,o.enabled=!1}e.addComponent("rigidbody",{type:pc.BODYTYPE_DYNAMIC,mass:5,linearDamping:.3,angularDamping:.4});var l=EntityHelper.AddComponent_ThrowObjectCharacter(e,ThrowObjectCharacter);return l.character=t,l.followCharacterBone=i,e.rigidbody.teleport(i.getPosition().clone(),i.getRotation().clone()),l}}ThrowObjectCharacter.__name__="ThrowObjectCharacter",ThrowObjectCharacter.__super__=ThrowObject,Object.assign(ThrowObjectCharacter.prototype,{__class__:ThrowObjectCharacter});class Type{static createInstance(t,e){return new(Function.prototype.bind.apply(t,[null].concat(e)))}}Type.__name__="Type";class UIHelper{static AddButtonClickHandler(t,e){return null!=t&&null!=t.button&&(t.button.on("click",(function(t){return e(),!0})),!0)}}UIHelper.__name__="UIHelper";class UIManager extends ScriptComponent{constructor(t){super(t),this.wasGameStarted=!1,this.afterRestartMenuActive=!1,this.inited=!1,this.throwFadeEffectObj=null,this.joystick=null,this.needShowIngameRestartBtn=!1}initialize(){super.initialize(),UIManager.current=this,this.playBtn=this.entity.findByName("PlayBtn"),null==this.playBtn||this.playBtn.enabled||(this.playBtn=null),null!=this.playBtn&&(this.playBtn.enabled=UIManager.isFirstRun);var t=this;if(null!=this.playBtn&&this.playBtn.enabled&&UIHelper.AddButtonClickHandler(this.playBtn,(function(){t.hideAfterRestartMenu(),null!=t.playBtn.button&&(t.playBtn.button.enabled=!1);var e=t.playBtn,i=_$Vector3_Vector3_$Impl_$.mulN(t.playBtn.getLocalScale().clone(),.01),n=e.getLocalScale();return motion_Actuate.update($bind(e,e.setLocalScale),.3,[n.x,n.y,n.z],[i.x,i.y,i.z],!0).onComplete((function(){return t.playBtn.enabled=!1}))})),this.afterRestartMenu=this.entity.findByName("AfterRestartMenu"),null!=this.afterRestartMenu){this.afterRestartMenu.enabled=!1;var e=this.afterRestartMenu.findByName("SkipLevelBtn");this.skipLevelBtn=null!=e?e.button:null;var i=this.afterRestartMenu.findByName("StartBiggerBtn");this.startBiggerBtn=null!=i?i.button:null,null!=e&&UIHelper.AddButtonClickHandler(e,$bind(this,this.skipLevelClick)),null!=i&&UIHelper.AddButtonClickHandler(i,$bind(this,this.startBiggerClick)),this.afterRestartMenuShopBtn=this.afterRestartMenu.findByName("ShopBtn"),null!=this.afterRestartMenuShopBtn&&(this.afterRestartMenuShopBtnIndicator=this.afterRestartMenuShopBtn.findByName("Indicator")),null!=this.afterRestartMenuShopBtnIndicator&&null!=Shop.current&&(this.afterRestartMenuShopBtnIndicator.enabled=Shop.areEnougthMoneyToGetItem()),null!=this.afterRestartMenuShopBtnIndicator&&(this.afterRestartMenuShopBtnIndicator.enabled=!1),null!=this.afterRestartMenuShopBtn&&UIHelper.AddButtonClickHandler(this.afterRestartMenuShopBtn,$bind(this,this.shopBtnClick))}if(this.showAfterRestartMenu(),this.levelTF=this.entity.findByName("LevelTF").element,null!=this.levelTF){var n=GameSettings.get_curLevel();this.levelTF.text="LEVEL "+n}UIManager.isFirstRun=!1}init(){if(!this.inited){this.inited=!0,this.ingameRestartBtn=this.entity.findByName("IngameRestartBtn");var t=this;if(null!=this.ingameRestartBtn&&null!=this.ingameRestartBtn.button&&this.ingameRestartBtn.button.on("click",(function(e){return t.onIngameRestartClick(),!0})),null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!1),this.pauseBtn=this.entity.findByName("PauseBtn"),null!=this.pauseBtn&&null!=this.pauseBtn.button&&this.pauseBtn.button.on("click",(function(e){return t.onPauseClick(),!0})),null!=this.pauseBtn&&(this.pauseBtn.enabled=!1),this.giantUI=this.entity.findByName("GiantUI"),this.giantLifesProgress=EntityHelper.GetComponentInChildren_GiantLifesProgress(this.giantUI,GiantLifesProgress),this.giantLifesProgress.setPerc(100,!0),null!=this.giantUI&&(this.giantUI.enabled=GameController.isGiantMode),GameController.isGiantMode&&null!=this.giantLifesProgress)for(var e=Character.allCharacters,i=0;i<e.length;){var n=e[i];++i,n.isGiant&&this.giantLifesProgress.init(n.giantConfig)}}}shopBtnClick(){Shop.Open(),null!=this.afterRestartMenuShopBtnIndicator&&(this.afterRestartMenuShopBtnIndicator.enabled=!1)}onShopUpdate(){Shop.current}onIngameRestartClick(){null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!1),null!=this.pauseBtn&&(this.pauseBtn.enabled=!1),GameController.current.restart(!0)}onPauseClick(){null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!1),null!=this.pauseBtn&&(this.pauseBtn.enabled=!1),APIManager.onPause((function(){PauseScreen.Activate()}))}onGameResume(){null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!0),null!=this.pauseBtn&&(this.pauseBtn.enabled=!0)}onRevive(){null!=this.giantUI&&(this.giantUI.enabled=GameController.isGiantMode),null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!0),null!=this.pauseBtn&&(this.pauseBtn.enabled=!0)}onGameFinished(t){null==t&&(t=!0);var e=this;motion_Actuate.timer(.5).onComplete((function(){null!=e.giantUI&&(e.giantUI.enabled=!1)})),null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!1),null!=this.pauseBtn&&(this.pauseBtn.enabled=!1)}onFatalityUIOpen(){var t=this;motion_Actuate.timer(.5).onComplete((function(){null!=t.giantUI&&(t.giantUI.enabled=!1)})),null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!1),null!=this.pauseBtn&&(this.pauseBtn.enabled=!1)}hitsStartBlockUI(){for(var t=0,e=this.afterRestartMenu.children.length;t<e;){var i=t++,n=this.afterRestartMenu.children[i];if(null!=n.button&&n.enabled&&n.button._isPressed)return!0}return null!=this.playBtn&&this.playBtn.enabled}startBiggerClick(){if(APIManager.IsRewardedAdReady()){motion_Actuate.stop(this.startBiggerBtn,null,!0,!0);var t=this;this.animateBtnClick(this.startBiggerBtn.entity,(function(){t.startBiggerBtn.enabled=!1,APIManager.ShowRewardedAd((function(){return GameController.StartBigger(),t.startBiggerBtn.entity.enabled=!1}),(function(){return t.startBiggerBtn.enabled=!0}),"start_bigger")||(t.startBiggerBtn.enabled=!0)}))}}skipLevelClick(){this.skipLevelBtn.enabled=!1;var t=this;if(null!=this.afterRestartMenu)for(var e=0,i=this.afterRestartMenu.children.length;e<i;){var n=e++;null!=js_Boot.__cast(this.afterRestartMenu.children[n],pc.Entity).button&&(js_Boot.__cast(this.afterRestartMenu.children[n],pc.Entity).button.enabled=!1)}this.animateBtnClick(this.skipLevelBtn.entity,(function(){t.skipLevelBtn.entity.enabled=!1;APIManager.ShowRewardedAd($bind(t,t.onRewardedAdSkipLevelSuccess),$bind(t,t.onRewardedAdSkipLevelFail),"skip_level")||t.onRewardedAdSkipLevelFail()}))}onRewardedAdSkipLevelSuccess(){GameController.current.skipLevel()}onRewardedAdSkipLevelFail(){}showAfterRestartMenu(){if(!this.afterRestartMenuActive&&(this.afterRestartMenuActive=!0,null!=this.afterRestartMenu)){this.afterRestartMenu.enabled=!0;for(var t=0,e=this.afterRestartMenu.children.length;t<e;){var i=t++,n=this.afterRestartMenu.children[i];null!=n.button&&(n.button.enabled=!0),n.enabled=!0;var a=n.getLocalScale().clone(),r=.01,s=.01,o=a.z;null==o&&(o=0),null==s&&(s=0),null==r&&(r=0);var l=new pc.Vec3(r,s,o);n.setLocalScale(l);var c=n.getLocalScale();motion_Actuate.update($bind(n,n.setLocalScale),.3,[c.x,c.y,c.z],[a.x,a.y,a.z],!0).ease(motion_easing_Back.easeOut).delay(.04*i)}APIManager.active&&null!=this.skipLevelBtn&&!APIManager.IsRewardedAdReady()&&(this.skipLevelBtn.entity.enabled=!1)}}hideAfterRestartMenu(t){if(null==t&&(t=!1),null!=this.afterRestartMenu&&this.afterRestartMenuActive){if(!t)for(var i=0,n=this.afterRestartMenu.children.length;i<n;){var a=i++,r=this.afterRestartMenu.children[a];if(null!=r.button&&r.button._isPressed)return}this.afterRestartMenuActive=!1;for(var s=0,o=this.afterRestartMenu.children.length;s<o;){var l=s++,c=[this.afterRestartMenu.children[l]];null!=c[0].button&&(c[0].button.enabled=!1);var h=[c[0].getLocalScale().clone()],u=_$Vector3_Vector3_$Impl_$.mulN(h[0],.01),d=c[0].getLocalScale();motion_Actuate.update((e=c[0],$bind(e,e.setLocalScale)),.2,[d.x,d.y,d.z],[u.x,u.y,u.z],!0).ease(motion_easing_Back.easeIn).delay(.04*l).onComplete(function(t,e){return function(){return e[0].enabled=!1,e[0].setLocalScale(t[0]),t[0]}}(h,c))}}}hasPlayBtn(){return null!=this.playBtn&&this.playBtn.enabled}setGiantLifesPerc(t){null!=this.giantLifesProgress&&this.giantLifesProgress.setPerc(t)}onGameStarted(){null!=this.ingameRestartBtn&&(this.ingameRestartBtn.enabled=!0),null!=this.pauseBtn&&(this.pauseBtn.enabled=!0)}update(t){super.update(t),this.inited||GameSettings.isLoadingLevel||this.init(),null!=GameController.current&&GameController.current.gameStarted&&this.hideAfterRestartMenu(),!this.wasGameStarted&&null!=GameController.current&&GameController.current.gameStarted&&(this.wasGameStarted=!0,this.onGameStarted())}animateBtnClick(t,e){var i=t.getLocalScale().clone(),n=1.3*i.x,a=1.3*i.y,r=i.z;null==r&&(r=0),null==a&&(a=0),null==n&&(n=0);var s=new pc.Vec3(n,a,r),o=t.getLocalScale();motion_Actuate.update($bind(t,t.setLocalScale),.17,[o.x,o.y,o.z],[s.x,s.y,s.z],!0).repeat(1).reflect().ease(motion_easing_Back.easeIn).onComplete(e)}static OnFatalityUIOpen(){null!=UIManager.current&&UIManager.current.onFatalityUIOpen()}static HasPlayBtn(){return null!=UIManager.current&&UIManager.current.hasPlayBtn()}}UIManager.__name__="UIManager",UIManager.__super__=ScriptComponent,Object.assign(UIManager.prototype,{__class__:UIManager});class WinFSItem extends ScriptComponent{constructor(t){super(t),this.inited=!1}initialize(){super.initialize(),this.init()}init(){if(!this.inited){this.inited=!0;for(var t=0,e=this.entity.children.length;t<e;){var i=t++,n=this.entity.children[i];0==n.name.indexOf("ItemImage")?this.itemObj=n:0==n.name.indexOf("ImageOutline")?this.outlineObj=n:0==n.name.indexOf("FillImage")&&(this.fillObj=n)}if(null!=this.fillObj&&null!=this.fillObj.element){var a=this.fillObj.element.pivot;a.y=0,this.fillObj.element.pivot=a;var r=this.fillObj.getLocalPosition().clone();r.y+=this.fillObj.element.height/4,this.fillObj.setLocalPosition(r),this.fillObjInitHeight=this.fillObj.element.height}this.itemObj.enabled=!1}}activate(){this.entity.enabled=!0}deactivate(){this.entity.enabled=!1}setFillPerc(t){if(null!=this.fillObj&&null!=this.fillObj.element){var e=t/100,i=e>1?1:e<0?0:e;this.fillObj.element.height=this.fillObjInitHeight*i;var n=this.fillObj.element.rect.clone();n.w=i,this.fillObj.element.rect=n}}setCompleted(){this.itemObj.enabled=!0,this.fillObj.enabled=!1,this.outlineObj.enabled=!1}}WinFSItem.__name__="WinFSItem",WinFSItem.__super__=ScriptComponent,Object.assign(WinFSItem.prototype,{__class__:WinFSItem});class WinScreen extends ScriptComponent{constructor(t){super(t),this.blockedClicks=!1,this.isActive=!1}initialize(){super.initialize(),WinScreen.current=this,this.nextBtn=this.entity.findByName("NextBtn");var t=this;null!=this.nextBtn&&this.nextBtn.button.on("click",(function(e){return t.onNextBtnClick(),!0})),this.entity.enabled=!1}activate(t){if(null==t&&(t=0),!this.isActive){this.isActive=!0;var e=this;t>0?motion_Actuate.timer(t).onComplete((function(){return e.entity.enabled=!0})):this.entity.enabled=!0,null!=this.nextBtn&&(this.nextBtn.enabled=!1);for(var i=this.entity.findComponents("element"),n=0;n<i.length;){var a=i[n];if(++n,null!=a.opacity&&a.opacity>0){var r=a.opacity;a.opacity=0,motion_Actuate.tween(a,.4,{opacity:r}).delay(t).ease(motion_easing_Linear.get_easeNone())}}}}onAddComplete(){null!=this.nextBtn&&(this.nextBtn.enabled=!0)}onNextBtnClick(){this.blockedClicks||(this.blockedClicks=!0,GameController.current.restart())}static Activate(t){null==t&&(t=0),null!=WinScreen.current&&WinScreen.current.activate(t)}static OnAddComplete(){null!=WinScreen.current&&WinScreen.current.onAddComplete()}}WinScreen.__name__="WinScreen",WinScreen.__super__=ScriptComponent,Object.assign(WinScreen.prototype,{__class__:WinScreen});class haxe_IMap{}haxe_IMap.__name__="haxe.IMap",haxe_IMap.__isInterface__=!0;class haxe_ds_IntMap{constructor(){this.h={}}}haxe_ds_IntMap.__name__="haxe.ds.IntMap",haxe_ds_IntMap.__interfaces__=[haxe_IMap],Object.assign(haxe_ds_IntMap.prototype,{__class__:haxe_ds_IntMap});class haxe_ds_ObjectMap{constructor(){this.h={__keys__:{}}}set(e,i){var n=e.__id__||(e.__id__=t.$haxeUID++);this.h[n]=i,this.h.__keys__[n]=e}remove(t){var e=t.__id__;return null!=this.h.__keys__[e]&&(delete this.h[e],delete this.h.__keys__[e],!0)}keys(){var t=[];for(var e in this.h.__keys__)this.h.hasOwnProperty(e)&&t.push(this.h.__keys__[e]);return HxOverrides.iter(t)}iterator(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var t=this.it.next();return this.ref[t.__id__]}}}}haxe_ds_ObjectMap.__name__="haxe.ds.ObjectMap",haxe_ds_ObjectMap.__interfaces__=[haxe_IMap],Object.assign(haxe_ds_ObjectMap.prototype,{__class__:haxe_ds_ObjectMap});class haxe_ds_StringMap{constructor(){this.h={}}setReserved(t,e){null==this.rh&&(this.rh={}),this.rh["$"+t]=e}getReserved(t){return null==this.rh?null:this.rh["$"+t]}existsReserved(t){return null!=this.rh&&this.rh.hasOwnProperty("$"+t)}}haxe_ds_StringMap.__name__="haxe.ds.StringMap",haxe_ds_StringMap.__interfaces__=[haxe_IMap],Object.assign(haxe_ds_StringMap.prototype,{__class__:haxe_ds_StringMap});class js__$Boot_HaxeError extends Error{constructor(t){super(),this.val=t,Error.captureStackTrace&&Error.captureStackTrace(this,js__$Boot_HaxeError)}}js__$Boot_HaxeError.__name__="js._Boot.HaxeError",js__$Boot_HaxeError.__super__=Error,Object.assign(js__$Boot_HaxeError.prototype,{__class__:js__$Boot_HaxeError});class js_Boot{static getClass(t){if(null==t)return null;if(t instanceof Array)return Array;var e=t.__class__;if(null!=e)return e;var i=js_Boot.__nativeClassName(t);return null!=i?js_Boot.__resolveNativeClass(i):null}static __string_rec(t,e){if(null==t)return"null";if(e.length>=5)return"<...>";var i=typeof t;switch("function"==i&&(t.__name__||t.__ename__)&&(i="object"),i){case"function":return"<function>";case"object":if(t instanceof Array){var n="[";e+="\t";for(var a=0,r=t.length;a<r;){var s=a++;n+=(s>0?",":"")+js_Boot.__string_rec(t[s],e)}return n+="]"}var o;try{o=t.toString}catch(t){t instanceof js__$Boot_HaxeError&&t.val;return"???"}if(null!=o&&o!=Object.toString&&"function"==typeof o){var l=t.toString();if("[object Object]"!=l)return l}var c="{\n";e+="\t";var h=null!=t.hasOwnProperty,u=null;for(u in t)h&&!t.hasOwnProperty(u)||"prototype"!=u&&"__class__"!=u&&"__super__"!=u&&"__interfaces__"!=u&&"__properties__"!=u&&(2!=c.length&&(c+=", \n"),c+=e+u+" : "+js_Boot.__string_rec(t[u],e));return c+="\n"+(e=e.substring(1))+"}";case"string":return t;default:return String(t)}}static __interfLoop(t,e){if(null==t)return!1;if(t==e)return!0;if(Object.prototype.hasOwnProperty.call(t,"__interfaces__"))for(var i=t.__interfaces__,n=0,a=i.length;n<a;){var r=i[n++];if(r==e||js_Boot.__interfLoop(r,e))return!0}return js_Boot.__interfLoop(t.__super__,e)}static __instanceof(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array;case r:return"boolean"==typeof t;case n:return null!=t;case a:return"number"==typeof t;case i:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(js_Boot.__downcastCheck(t,e))return!0}else if("object"==typeof e&&js_Boot.__isNativeObj(e)&&t instanceof e)return!0;return e==s&&null!=t.__name__||e==o&&null!=t.__ename__}}static __downcastCheck(t,e){return t instanceof e||!!e.__isInterface__&&js_Boot.__interfLoop(js_Boot.getClass(t),e)}static __implements(t,e){return js_Boot.__interfLoop(js_Boot.getClass(t),e)}static __cast(t,e){if(null==t||js_Boot.__instanceof(t,e))return t;throw new js__$Boot_HaxeError("Cannot cast "+Std.string(t)+" to "+Std.string(e))}static __nativeClassName(t){var e=js_Boot.__toStr.call(t).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e}static __isNativeObj(t){return null!=js_Boot.__nativeClassName(t)}static __resolveNativeClass(e){return t[e]}}js_Boot.__name__="js.Boot";class motion_actuators_IGenericActuator{}motion_actuators_IGenericActuator.__name__="motion.actuators.IGenericActuator",motion_actuators_IGenericActuator.__isInterface__=!0,Object.assign(motion_actuators_IGenericActuator.prototype,{__class__:motion_actuators_IGenericActuator});class motion_actuators_GenericActuator{constructor(t,e,i){motion_actuators_GenericActuator._hx_skip_constructor||this._hx_constructor(t,e,i)}_hx_constructor(t,e,i){this._autoVisible=!0,this._delay=0,this._reflect=!1,this._repeat=0,this._reverse=!1,this._smartRotation=!1,this._snapping=!1,this.special=!1,this.target=t,this.properties=i,this.duration=e,this._ease=motion_Actuate.defaultEase}apply(){for(var t=0,e=Reflect.fields(this.properties);t<e.length;){var i=e[t];++t,Object.prototype.hasOwnProperty.call(this.target,i)?this.target[i]=Reflect.field(this.properties,i):Reflect.setProperty(this.target,i,Reflect.field(this.properties,i))}}autoVisible(t){return null==t&&(t=!0),this._autoVisible=t,this}callMethod(t,e){return null==e&&(e=[]),t.apply(t,e)}change(){if(null!=this._onUpdate){var t=this._onUpdate,e=this._onUpdateParams;null==e&&(e=[]),t.apply(t,e)}}complete(t){if(null==t&&(t=!0),t&&(this.change(),null!=this._onComplete)){var e=this._onComplete,i=this._onCompleteParams;null==i&&(i=[]),e.apply(e,i)}motion_Actuate.unload(this)}delay(t){return this._delay=t,this}ease(t){return this._ease=t,this}move(){}onComplete(t,e){return this._onComplete=t,this._onCompleteParams=null==e?[]:e,0==this.duration&&this.complete(),this}onRepeat(t,e){return this._onRepeat=t,this._onRepeatParams=null==e?[]:e,this}onUpdate(t,e){return this._onUpdate=t,this._onUpdateParams=null==e?[]:e,this}onPause(t,e){return this._onPause=t,this._onPauseParams=null==e?[]:e,this}onResume(t,e){return this._onResume=t,this._onResumeParams=null==e?[]:e,this}pause(){if(null!=this._onPause){var t=this._onPause,e=this._onPauseParams;null==e&&(e=[]),t.apply(t,e)}}reflect(t){return null==t&&(t=!0),this._reflect=t,this.special=!0,this}repeat(t){return null==t&&(t=-1),this._repeat=t,this}resume(){if(null!=this._onResume){var t=this._onResume,e=this._onResumeParams;null==e&&(e=[]),t.apply(t,e)}}reverse(t){return null==t&&(t=!0),this._reverse=t,this.special=!0,this}smartRotation(t){return null==t&&(t=!0),this._smartRotation=t,this.special=!0,this}snapping(t){return null==t&&(t=!0),this._snapping=t,this.special=!0,this}stop(t,e,i){}}motion_actuators_GenericActuator.__name__="motion.actuators.GenericActuator",motion_actuators_GenericActuator.__interfaces__=[motion_actuators_IGenericActuator],Object.assign(motion_actuators_GenericActuator.prototype,{__class__:motion_actuators_GenericActuator});class motion_actuators_SimpleActuator extends motion_actuators_GenericActuator{constructor(t,e,i){motion_actuators_GenericActuator._hx_skip_constructor?super():(motion_actuators_GenericActuator._hx_skip_constructor=!0,super(),motion_actuators_GenericActuator._hx_skip_constructor=!1,this._hx_constructor(t,e,i))}_hx_constructor(t,e,i){this.active=!0,this.propertyDetails=[],this.sendChange=!1,this.paused=!1,this.cacheVisible=!1,this.initialized=!1,this.setVisible=!1,this.toggleVisible=!1,this.startTime=window.performance.now()/1e3,super._hx_constructor(t,e,i),motion_actuators_SimpleActuator.addedEvent||(motion_actuators_SimpleActuator.addedEvent=!0,window.requestAnimationFrame(motion_actuators_SimpleActuator.stage_onEnterFrame))}reverse(t){var e,i=super.reverse(t);return e=window.performance.now()/1e3,this.update(e),i}apply(){if(super.apply(),this.toggleVisible&&Object.prototype.hasOwnProperty.call(this.properties,"alpha")){var t=this.target;if(null!=(Object.prototype.hasOwnProperty.call(t,"visible")?Reflect.field(t,"visible"):Reflect.getProperty(t,"visible"))){var e=this.target,i=Reflect.field(this.properties,"alpha")>0;!Object.prototype.hasOwnProperty.call(e,"visible")||e.__properties__&&e.__properties__.set_visible?Reflect.setProperty(e,"visible",i):e.visible=i}}}autoVisible(t){if(null==t&&(t=!0),this._autoVisible=t,!t&&(this.toggleVisible=!1,this.setVisible)){var e=this.target,i=this.cacheVisible;!Object.prototype.hasOwnProperty.call(e,"visible")||e.__properties__&&e.__properties__.set_visible?Reflect.setProperty(e,"visible",i):e.visible=i}return this}delay(t){return this._delay=t,this.timeOffset=this.startTime+t,this}getField(t,e){return Object.prototype.hasOwnProperty.call(t,e)?Reflect.field(t,e):Reflect.getProperty(t,e)}initialize(){for(var t,e,i=0,n=Reflect.fields(this.properties);i<n.length;){var a=n[i];++i;var r=!0;if(!Object.prototype.hasOwnProperty.call(this.target,a)||this.target.__properties__&&this.target.__properties__["set_"+a]?(r=!1,e=Reflect.getProperty(this.target,a)):e=Reflect.field(this.target,a),"number"==typeof e){var s=this.properties,o=Object.prototype.hasOwnProperty.call(s,a)?Reflect.field(s,a):Reflect.getProperty(s,a);null==e&&(e=0),null==o&&(o=0),t=new motion_actuators_PropertyDetails(this.target,a,e,o-e,r),this.propertyDetails.push(t)}}this.detailsLength=this.propertyDetails.length,this.initialized=!0}move(){var t;if(this.toggleVisible=Object.prototype.hasOwnProperty.call(this.properties,"alpha")&&Object.prototype.hasOwnProperty.call(this.properties,"visible"),this.toggleVisible&&0!=this.properties.alpha){var e=this.target;t=!(Object.prototype.hasOwnProperty.call(e,"visible")?Reflect.field(e,"visible"):Reflect.getProperty(e,"visible"))}else t=!1;if(t){this.setVisible=!0;var i=this.target,n=null;n=Object.prototype.hasOwnProperty.call(i,"visible")?Reflect.field(i,"visible"):Reflect.getProperty(i,"visible"),this.cacheVisible=n;var a=this.target;!Object.prototype.hasOwnProperty.call(a,"visible")||a.__properties__&&a.__properties__.set_visible?Reflect.setProperty(a,"visible",true):a.visible=true}this.timeOffset=this.startTime,motion_actuators_SimpleActuator.actuators.push(this),++motion_actuators_SimpleActuator.actuatorsLength}onUpdate(t,e){return this._onUpdate=t,this._onUpdateParams=null==e?[]:e,this.sendChange=!0,this}pause(){this.paused||(this.paused=!0,super.pause(),this.pauseTime=window.performance.now())}resume(){this.paused&&(this.paused=!1,this.timeOffset+=(window.performance.now()-this.pauseTime)/1e3,super.resume())}setField(t,e,i){!Object.prototype.hasOwnProperty.call(t,e)||t.__properties__&&t.__properties__["set_"+e]?Reflect.setProperty(t,e,i):t[e]=i}setProperty(t,e){t.isField?t.target[t.propertyName]=e:Reflect.setProperty(t.target,t.propertyName,e)}stop(t,e,i){if(this.active){if(null==t)return this.active=!1,e&&this.apply(),void this.complete(i);for(var n=0,a=Reflect.fields(t);n<a.length;){var r=a[n];if(++n,Object.prototype.hasOwnProperty.call(this.properties,r))return this.active=!1,e&&this.apply(),void this.complete(i)}}}update(t){if(!this.paused){var e,i,n=(t-this.timeOffset)/this.duration;if(n>1&&(n=1),this.initialized||this.initialize(),this.special){var a;i=this._reverse?this._ease.calculate(1-n):this._ease.calculate(n);for(var r=0,s=this.detailsLength;r<s;){var o=r++;if(e=this.propertyDetails[o],!this._smartRotation||"rotation"!=e.propertyName&&"rotationX"!=e.propertyName&&"rotationY"!=e.propertyName&&"rotationZ"!=e.propertyName)a=e.start+e.change*i;else{var l=e.change%360;l>180?l-=360:l<-180&&(l+=360),a=e.start+l*i}this._snapping?this.setProperty(e,Math.round(a)):this.setProperty(e,a)}}else{i=this._ease.calculate(n);for(var c=0,h=this.detailsLength;c<h;){var u=c++;e=this.propertyDetails[u],this.setProperty(e,e.start+e.change*i)}}if(1==n){if(0==this._repeat){var d;if(this.active=!1,this.toggleVisible){var m=this.target;d=0==(Object.prototype.hasOwnProperty.call(m,"alpha")?Reflect.field(m,"alpha"):Reflect.getProperty(m,"alpha"))}else d=!1;if(d){var _=this.target;!Object.prototype.hasOwnProperty.call(_,"visible")||_.__properties__&&_.__properties__.set_visible?Reflect.setProperty(_,"visible",false):_.visible=false}return void this.complete(!0)}if(null!=this._onRepeat){var p=this._onRepeat,g=this._onRepeatParams;null==g&&(g=[]),p.apply(p,g)}this._reflect&&(this._reverse=!this._reverse),this.startTime=t,this.timeOffset=this.startTime+this._delay,this._repeat>0&&this._repeat--}this.sendChange&&this.change()}}static stage_onEnterFrame(t){for(var e,i=t/1e3,n=0,a=0,r=motion_actuators_SimpleActuator.actuatorsLength;a<r;){a++;null!=(e=motion_actuators_SimpleActuator.actuators[n])&&e.active?(i>=e.timeOffset&&e.update(i),++n):(motion_actuators_SimpleActuator.actuators.splice(n,1),--motion_actuators_SimpleActuator.actuatorsLength)}window.requestAnimationFrame(motion_actuators_SimpleActuator.stage_onEnterFrame)}}motion_actuators_SimpleActuator.__name__="motion.actuators.SimpleActuator",motion_actuators_SimpleActuator.__super__=motion_actuators_GenericActuator,Object.assign(motion_actuators_SimpleActuator.prototype,{__class__:motion_actuators_SimpleActuator});class motion_easing_IEasing{}motion_easing_IEasing.__name__="motion.easing.IEasing",motion_easing_IEasing.__isInterface__=!0,Object.assign(motion_easing_IEasing.prototype,{__class__:motion_easing_IEasing});class motion_easing__$Expo_ExpoEaseIn{constructor(){}calculate(t){return 0==t?0:Math.exp(6.931471805599453*(t-1))}ease(t,e,i,n){return 0==t?e:i*Math.exp(6.931471805599453*(t/n-1))+e}}motion_easing__$Expo_ExpoEaseIn.__name__="motion.easing._Expo.ExpoEaseIn",motion_easing__$Expo_ExpoEaseIn.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Expo_ExpoEaseIn.prototype,{__class__:motion_easing__$Expo_ExpoEaseIn});class motion_easing__$Expo_ExpoEaseInOut{constructor(){}calculate(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.exp(6.931471805599453*(t-1)):.5*(2-Math.exp(-6.931471805599453*--t))}ease(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.exp(6.931471805599453*(t-1))+e:i/2*(2-Math.exp(-6.931471805599453*--t))+e}}motion_easing__$Expo_ExpoEaseInOut.__name__="motion.easing._Expo.ExpoEaseInOut",motion_easing__$Expo_ExpoEaseInOut.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Expo_ExpoEaseInOut.prototype,{__class__:motion_easing__$Expo_ExpoEaseInOut});class motion_easing__$Expo_ExpoEaseOut{constructor(){}calculate(t){return 1==t?1:1-Math.exp(-6.931471805599453*t)}ease(t,e,i,n){return t==n?e+i:i*(1-Math.exp(-6.931471805599453*t/n))+e}}motion_easing__$Expo_ExpoEaseOut.__name__="motion.easing._Expo.ExpoEaseOut",motion_easing__$Expo_ExpoEaseOut.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Expo_ExpoEaseOut.prototype,{__class__:motion_easing__$Expo_ExpoEaseOut});class motion_easing_Expo{}motion_easing_Expo.__name__="motion.easing.Expo";class motion_Actuate{static apply(t,e,i){motion_Actuate.stop(t,e),null==i&&(i=motion_Actuate.defaultActuator);var n=Type.createInstance(i,[t,0,e]);return n.apply(),n}static getLibrary(t,e){return null==e&&(e=!0),null==motion_Actuate.targetLibraries.h.__keys__[t.__id__]&&e&&motion_Actuate.targetLibraries.set(t,[]),motion_Actuate.targetLibraries.h[t.__id__]}static isActive(){for(var t=!1,e=motion_Actuate.targetLibraries.iterator();e.hasNext();){e.next();t=!0;break}return t}static motionPath(t,e,i,n){return null==n&&(n=!0),motion_Actuate.tween(t,e,i,n,motion_actuators_MotionPathActuator)}static pause(t){if(js_Boot.__implements(t,motion_actuators_IGenericActuator)){t.pause()}else{var e=motion_Actuate.getLibrary(t,!1);if(null!=e)for(var i=0;i<e.length;){var n=e[i];++i,n.pause()}}}static pauseAll(){for(var t=motion_Actuate.targetLibraries.iterator();t.hasNext();)for(var e=t.next(),i=0;i<e.length;){var n=e[i];++i,n.pause()}}static reset(){for(var t=motion_Actuate.targetLibraries.iterator();t.hasNext();)for(var e=t.next(),i=e.length-1;i>=0;)e[i].stop(null,!1,!1),--i;motion_Actuate.targetLibraries=new haxe_ds_ObjectMap}static resume(t){if(js_Boot.__implements(t,motion_actuators_IGenericActuator)){t.resume()}else{var e=motion_Actuate.getLibrary(t,!1);if(null!=e)for(var i=0;i<e.length;){var n=e[i];++i,n.resume()}}}static resumeAll(){for(var t=motion_Actuate.targetLibraries.iterator();t.hasNext();)for(var e=t.next(),i=0;i<e.length;){var n=e[i];++i,n.resume()}}static stop(t,e,i,n){if(null==n&&(n=!0),null==i&&(i=!1),null!=t)if(js_Boot.__implements(t,motion_actuators_IGenericActuator)){t.stop(null,i,n)}else{var a=motion_Actuate.getLibrary(t,!1);if(null!=a){if("string"==typeof e){var r={};r[e]=null,e=r}else if(e instanceof Array){for(var s={},o=0,l=js_Boot.__cast(e,Array);o<l.length;){var c=l[o];++o,s[c]=null}e=s}for(var h=a.length-1;h>=0;)a[h].stop(e,i,n),--h}}}static timer(t,e){return motion_Actuate.tween(new motion__$Actuate_TweenTimer(0),t,new motion__$Actuate_TweenTimer(1),!1,e)}static tween(t,e,i,n,a){if(null==n&&(n=!0),null!=t){if(e>0){null==a&&(a=motion_Actuate.defaultActuator);var r=Type.createInstance(a,[t,e,i]),s=motion_Actuate.getLibrary(r.target);if(n){for(var o=s.length-1;o>=0;)s[o].stop(r.properties,!1,!1),--o;s=motion_Actuate.getLibrary(r.target)}return s.push(r),r.move(),r}return motion_Actuate.apply(t,i,a)}return null}static unload(t){var e=t.target;null!=motion_Actuate.targetLibraries.h.__keys__[e.__id__]&&(HxOverrides.remove(motion_Actuate.targetLibraries.h[e.__id__],t),0==motion_Actuate.targetLibraries.h[e.__id__].length&&motion_Actuate.targetLibraries.remove(e))}static update(t,e,i,n,a){null==a&&(a=!0);var r={start:i,end:n};return motion_Actuate.tween(t,e,r,a,motion_actuators_MethodActuator)}}motion_Actuate.__name__="motion.Actuate";class motion__$Actuate_TweenTimer{constructor(t){this.progress=t}}motion__$Actuate_TweenTimer.__name__="motion._Actuate.TweenTimer",Object.assign(motion__$Actuate_TweenTimer.prototype,{__class__:motion__$Actuate_TweenTimer});class motion_MotionPath{constructor(){this._x=new motion__$MotionPath_ComponentPath,this._y=new motion__$MotionPath_ComponentPath,this._rotation=null}bezier(t,e,i,n,a){return null==a&&(a=1),this.bezierN(t,e,[i],[n],a)}bezierN(t,e,i,n,a){return null==a&&(a=1),this._x.addPath(new motion__$MotionPath_BezierPath(t,i,a)),this._y.addPath(new motion__$MotionPath_BezierPath(e,n,a)),this}bezierSpline(t,e,i){return null==i&&(i=1),this._x.addPath(new motion__$MotionPath_BezierSplinePath(t,i)),this._y.addPath(new motion__$MotionPath_BezierSplinePath(e,i)),this}line(t,e,i){return null==i&&(i=1),this.bezierN(t,e,[],[],i)}get_rotation(){return null==this._rotation&&(this._rotation=new motion__$MotionPath_RotationPath(this._x,this._y)),this._rotation}get_x(){return this._x}get_y(){return this._y}}motion_MotionPath.__name__="motion.MotionPath",Object.assign(motion_MotionPath.prototype,{__class__:motion_MotionPath,__properties__:{get_y:"get_y",get_x:"get_x",get_rotation:"get_rotation"}});class motion_IComponentPath{}motion_IComponentPath.__name__="motion.IComponentPath",motion_IComponentPath.__isInterface__=!0,Object.assign(motion_IComponentPath.prototype,{__class__:motion_IComponentPath,__properties__:{get_end:"get_end",set_start:"set_start",get_start:"get_start"}});class motion__$MotionPath_ComponentPath{constructor(){this.paths=[],this.strength=0}addPath(t){this.paths.length>0&&t.set_start(this.paths[this.paths.length-1].get_end()),this.paths.push(t),this.strength+=t.strength}calculate(t){if(1==this.paths.length)return this.paths[0].calculate(t);for(var e=t*this.strength,i=0,n=this.paths;i<n.length;){var a=n[i];if(++i,!(e-a.strength>1e-7))return a.calculate(e/a.strength);e-=a.strength}return 0}get_start(){return this.paths.length>0?this.paths[0].get_start():0}set_start(t){return this.paths.length>0?this.paths[0].set_start(t):0}get_end(){return this.paths.length>0?this.paths[this.paths.length-1].get_end():this.get_start()}}motion__$MotionPath_ComponentPath.__name__="motion._MotionPath.ComponentPath",motion__$MotionPath_ComponentPath.__interfaces__=[motion_IComponentPath],Object.assign(motion__$MotionPath_ComponentPath.prototype,{__class__:motion__$MotionPath_ComponentPath,__properties__:{get_end:"get_end",set_start:"set_start",get_start:"get_start"}});class motion__$MotionPath_BezierPath{constructor(t,e,i){this._end=t,this.control=e,this.strength=i}calculate(t){var e=1-t;switch(this.control.length){case 0:return e*this._start+t*this._end;case 1:return e*e*this._start+2*e*t*this.control[0]+t*t*this._end;case 2:return e*e*e*this._start+3*e*e*t*this.control[0]+3*e*t*t*this.control[1]+t*t*t*this._end;default:if(e<1e-7)return this._end;for(var i=t/e,n=this.control.length+1,a=Math.pow(e,n),r=a*this._start,s=1,o=n;s<o;){var l=s++;r+=(a*=i*(n+1-l)/l)*this.control[l-1]}return r+(a*=i/n)*this._end}}get_start(){return this._start}set_start(t){return this._start=t}get_end(){return this._end}}motion__$MotionPath_BezierPath.__name__="motion._MotionPath.BezierPath",motion__$MotionPath_BezierPath.__interfaces__=[motion_IComponentPath],Object.assign(motion__$MotionPath_BezierPath.prototype,{__class__:motion__$MotionPath_BezierPath,__properties__:{get_end:"get_end",set_start:"set_start",get_start:"get_start"}});class motion__$MotionPath_BezierSplinePath extends motion__$MotionPath_ComponentPath{constructor(t,e){super(),this.through=t,this.strength=e}computeControlPoints(t){for(var e=[t].concat(this.through),i=e.length,n=[],a=0,r=i;a<r;){a++;n.push([0,0])}var s=n,o=[],l=[],c=[],h=[];o[0]=0,l[0]=2,c[0]=1,h[0]=e[0]+2*e[1];for(var u=1,d=i-1;u<d;){var m=u++;o[m]=1,l[m]=4,c[m]=1,h[m]=4*e[m]+2*e[m+1]}o[i-1]=1,l[i-1]=2,c[i-1]=0,h[i-1]=3*e[i-1];for(var _=1,p=i;_<p;){var g=_++,y=o[g]/l[g-1];l[g]-=y*c[g-1],h[g]-=y*h[g-1]}s[i-1][0]=h[i-1]/l[i-1];for(var v=i-2;v>=0;)s[v][0]=(h[v]-c[v]*s[v+1][0])/l[v],--v;for(var f=0,b=i-1;f<b;){var S=f++;s[S][1]=2*e[S+1]-s[S+1][0]}return s[i-1][1]=.5*(e[i]+s[i-1][0]),s.pop(),s}set_start(t){if(0==this.paths.length||Math.abs(t-this.get_start())>1e-7){var e=this.computeControlPoints(t),i=this.strength/e.length;this.strength=0,this.paths.splice(0,this.paths.length);for(var n=0,a=e.length;n<a;){var r=n++;this.addPath(new motion__$MotionPath_BezierPath(this.through[r],e[r],i))}}return super.set_start(t)}get_end(){return this.through[this.through.length-1]}}motion__$MotionPath_BezierSplinePath.__name__="motion._MotionPath.BezierSplinePath",motion__$MotionPath_BezierSplinePath.__super__=motion__$MotionPath_ComponentPath,Object.assign(motion__$MotionPath_BezierSplinePath.prototype,{__class__:motion__$MotionPath_BezierSplinePath});class motion__$MotionPath_RotationPath{constructor(t,e){this.step=.01,this._x=t,this._y=e,this.offset=0,this.set_start(this.calculate(0))}calculate(t){var e=this._x.calculate(t)-this._x.calculate(t+this.step),i=this._y.calculate(t)-this._y.calculate(t+this.step),n=Math.atan2(i,e)*(180/Math.PI);return n=(n+this.offset)%360}get_start(){return this._start}set_start(t){return this._start}get_end(){return this.calculate(1)}}motion__$MotionPath_RotationPath.__name__="motion._MotionPath.RotationPath",motion__$MotionPath_RotationPath.__interfaces__=[motion_IComponentPath],Object.assign(motion__$MotionPath_RotationPath.prototype,{__class__:motion__$MotionPath_RotationPath,__properties__:{set_start:"set_start",get_start:"get_start",get_end:"get_end"}});class motion_actuators_MethodActuator extends motion_actuators_SimpleActuator{constructor(t,e,i){motion_actuators_GenericActuator._hx_skip_constructor=!0,super(),motion_actuators_GenericActuator._hx_skip_constructor=!1,this._hx_constructor(t,e,i)}_hx_constructor(t,e,i){this.currentParameters=[],this.tweenProperties={},super._hx_constructor(t,e,i),Object.prototype.hasOwnProperty.call(i,"start")||(this.properties.start=[]),Object.prototype.hasOwnProperty.call(i,"end")||(this.properties.end=this.properties.start);for(var n=0,a=this.properties.start.length;n<a;){var r=n++;this.currentParameters.push(this.properties.start[r])}}apply(){var t=this.target,e=this.properties.end;null==e&&(e=[]),t.apply(t,e)}complete(t){if(null==t&&(t=!0),this.initialized){for(var e=0,i=this.properties.start.length;e<i;){var n=e++;this.currentParameters[n]=Reflect.field(this.tweenProperties,"param"+n)}var a=this.target,r=this.currentParameters;null==r&&(r=[]),a.apply(a,r)}super.complete(t)}initialize(){for(var t,e,i,n=0,a=this.properties.start.length;n<a;){var r=n++;e="param"+r,i=this.properties.start[r],this.tweenProperties[e]=i,("number"==typeof i||"number"==typeof i&&(0|i)===i)&&(t=new motion_actuators_PropertyDetails(this.tweenProperties,e,i,this.properties.end[r]-i),this.propertyDetails.push(t))}this.detailsLength=this.propertyDetails.length,this.initialized=!0}update(t){if(super.update(t),this.active&&!this.paused){for(var e=0,i=this.properties.start.length;e<i;){var n=e++;this.currentParameters[n]=Reflect.field(this.tweenProperties,"param"+n)}var a=this.target,r=this.currentParameters;null==r&&(r=[]),a.apply(a,r)}}}motion_actuators_MethodActuator.__name__="motion.actuators.MethodActuator",motion_actuators_MethodActuator.__super__=motion_actuators_SimpleActuator,Object.assign(motion_actuators_MethodActuator.prototype,{__class__:motion_actuators_MethodActuator});class motion_actuators_MotionPathActuator extends motion_actuators_SimpleActuator{constructor(t,e,i){super(t,e,i)}apply(){for(var t=0,e=Reflect.fields(this.properties);t<e.length;){var i=e[t];++t,Object.prototype.hasOwnProperty.call(this.target,i)?this.target[i]=js_Boot.__cast(Reflect.field(this.properties,i),motion_IComponentPath).get_end():Reflect.setProperty(this.target,i,js_Boot.__cast(Reflect.field(this.properties,i),motion_IComponentPath).get_end())}}initialize(){for(var t,e,i=0,n=Reflect.fields(this.properties);i<n.length;){var a=n[i];if(++i,null!=(e=js_Boot.__cast(Reflect.field(this.properties,a),motion_IComponentPath))){var r=!0;Object.prototype.hasOwnProperty.call(this.target,a)?e.set_start(Reflect.field(this.target,a)):(r=!1,e.set_start(Reflect.getProperty(this.target,a))),t=new motion_actuators_PropertyPathDetails(this.target,a,e,r),this.propertyDetails.push(t)}}this.detailsLength=this.propertyDetails.length,this.initialized=!0}update(t){if(!this.paused){var e,i=(t-this.timeOffset)/this.duration;if(i>1&&(i=1),this.initialized||this.initialize(),this.special){e=this._reverse?this._ease.calculate(1-i):this._ease.calculate(i);for(var n=0,a=this.propertyDetails;n<a.length;){var r=a[n];++n,this._snapping?r.isField?r.target[r.propertyName]=Math.round(js_Boot.__cast(r,motion_actuators_PropertyPathDetails).path.calculate(e)):Reflect.setProperty(r.target,r.propertyName,Math.round(js_Boot.__cast(r,motion_actuators_PropertyPathDetails).path.calculate(e))):r.isField?r.target[r.propertyName]=js_Boot.__cast(r,motion_actuators_PropertyPathDetails).path.calculate(e):Reflect.setProperty(r.target,r.propertyName,js_Boot.__cast(r,motion_actuators_PropertyPathDetails).path.calculate(e))}}else{e=this._ease.calculate(i);for(var s=0,o=this.propertyDetails;s<o.length;){var l=o[s];++s,l.isField?l.target[l.propertyName]=js_Boot.__cast(l,motion_actuators_PropertyPathDetails).path.calculate(e):Reflect.setProperty(l.target,l.propertyName,js_Boot.__cast(l,motion_actuators_PropertyPathDetails).path.calculate(e))}}if(1==i){if(0==this._repeat){var c;if(this.active=!1,this.toggleVisible){var h=this.target;c=0==(Object.prototype.hasOwnProperty.call(h,"alpha")?Reflect.field(h,"alpha"):Reflect.getProperty(h,"alpha"))}else c=!1;if(c){var u=this.target;!Object.prototype.hasOwnProperty.call(u,"visible")||u.__properties__&&u.__properties__.set_visible?Reflect.setProperty(u,"visible",false):u.visible=false}return void this.complete(!0)}if(null!=this._onRepeat){var d=this._onRepeat,m=this._onRepeatParams;null==m&&(m=[]),d.apply(d,m)}this._reflect&&(this._reverse=!this._reverse),this.startTime=t,this.timeOffset=this.startTime+this._delay,this._repeat>0&&this._repeat--}this.sendChange&&this.change()}}}motion_actuators_MotionPathActuator.__name__="motion.actuators.MotionPathActuator",motion_actuators_MotionPathActuator.__super__=motion_actuators_SimpleActuator,Object.assign(motion_actuators_MotionPathActuator.prototype,{__class__:motion_actuators_MotionPathActuator});class motion_actuators_PropertyDetails{constructor(t,e,i,n,a){null==a&&(a=!0),this.target=t,this.propertyName=e,this.start=i,this.change=n,this.isField=a}}motion_actuators_PropertyDetails.__name__="motion.actuators.PropertyDetails",Object.assign(motion_actuators_PropertyDetails.prototype,{__class__:motion_actuators_PropertyDetails});class motion_actuators_PropertyPathDetails extends motion_actuators_PropertyDetails{constructor(t,e,i,n){null==n&&(n=!0),super(t,e,0,0,n),this.path=i}}motion_actuators_PropertyPathDetails.__name__="motion.actuators.PropertyPathDetails",motion_actuators_PropertyPathDetails.__super__=motion_actuators_PropertyDetails,Object.assign(motion_actuators_PropertyPathDetails.prototype,{__class__:motion_actuators_PropertyPathDetails});class motion_easing__$Back_BackEaseIn{constructor(t){this.s=t}calculate(t){return t*t*((this.s+1)*t-this.s)}ease(t,e,i,n){return i*(t/=n)*t*((this.s+1)*t-this.s)+e}}motion_easing__$Back_BackEaseIn.__name__="motion.easing._Back.BackEaseIn",motion_easing__$Back_BackEaseIn.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Back_BackEaseIn.prototype,{__class__:motion_easing__$Back_BackEaseIn});class motion_easing__$Back_BackEaseInOut{constructor(t){this.s=t}calculate(t){if((t/=.5)<1){return t*t*((1+(this.s*=1.525))*t-this.s)*.5}return.5*((t-=2)*t*((1+(this.s*=1.525))*t+this.s)+2)}ease(t,e,i,n){if((t/=n/2)<1){return i/2*(t*t*((1+(this.s*=1.525))*t-this.s))+e}return i/2*((t-=2)*t*((1+(this.s*=1.525))*t+this.s)+2)+e}}motion_easing__$Back_BackEaseInOut.__name__="motion.easing._Back.BackEaseInOut",motion_easing__$Back_BackEaseInOut.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Back_BackEaseInOut.prototype,{__class__:motion_easing__$Back_BackEaseInOut});class motion_easing__$Back_BackEaseOut{constructor(t){this.s=t}calculate(t){return--t*t*((this.s+1)*t+this.s)+1}ease(t,e,i,n){return i*((t=t/n-1)*t*((this.s+1)*t+this.s)+1)+e}}motion_easing__$Back_BackEaseOut.__name__="motion.easing._Back.BackEaseOut",motion_easing__$Back_BackEaseOut.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Back_BackEaseOut.prototype,{__class__:motion_easing__$Back_BackEaseOut});class motion_easing_Back{static easeInWith(t){return new motion_easing__$Back_BackEaseIn(t)}static easeInOutWith(t){return new motion_easing__$Back_BackEaseInOut(t)}static easeOutWith(t){return new motion_easing__$Back_BackEaseOut(t)}}motion_easing_Back.__name__="motion.easing.Back";class motion_easing_Linear{static get_easeNone(){return new motion_easing_LinearEaseNone}}motion_easing_Linear.__name__="motion.easing.Linear",motion_easing_Linear.__properties__={get_easeNone:"get_easeNone"};class motion_easing_LinearEaseNone{constructor(){}calculate(t){return t}ease(t,e,i,n){return i*t/n+e}}motion_easing_LinearEaseNone.__name__="motion.easing.LinearEaseNone",motion_easing_LinearEaseNone.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing_LinearEaseNone.prototype,{__class__:motion_easing_LinearEaseNone});class motion_easing__$Quad_QuadEaseIn{constructor(){}calculate(t){return t*t}ease(t,e,i,n){return i*(t/=n)*t+e}}motion_easing__$Quad_QuadEaseIn.__name__="motion.easing._Quad.QuadEaseIn",motion_easing__$Quad_QuadEaseIn.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Quad_QuadEaseIn.prototype,{__class__:motion_easing__$Quad_QuadEaseIn});class motion_easing__$Quad_QuadEaseInOut{constructor(){}calculate(t){return(t*=2)<1?.5*t*t:-.5*((t-1)*(t-3)-1)}ease(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*((t-1)*(t-3)-1)+e}}motion_easing__$Quad_QuadEaseInOut.__name__="motion.easing._Quad.QuadEaseInOut",motion_easing__$Quad_QuadEaseInOut.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Quad_QuadEaseInOut.prototype,{__class__:motion_easing__$Quad_QuadEaseInOut});class motion_easing__$Quad_QuadEaseOut{constructor(){}calculate(t){return-t*(t-2)}ease(t,e,i,n){return-i*(t/=n)*(t-2)+e}}motion_easing__$Quad_QuadEaseOut.__name__="motion.easing._Quad.QuadEaseOut",motion_easing__$Quad_QuadEaseOut.__interfaces__=[motion_easing_IEasing],Object.assign(motion_easing__$Quad_QuadEaseOut.prototype,{__class__:motion_easing__$Quad_QuadEaseOut});class motion_easing_Quad{}motion_easing_Quad.__name__="motion.easing.Quad";var e;function $bind(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[i.__id__],null==n&&(n=i.bind(e),e.hx__closures__[i.__id__]=n),n);var n}t.$haxeUID|=0,pc.registerScript(Character,"character"),Character.attributes.add("canCatchThrownObjects",{type:"boolean",default:!0}),Character.attributes.add("canBeThrown",{type:"boolean",default:!0}),Character.attributes.add("canBeThrownOnlyDead",{type:"boolean",default:!1}),Character.attributes.add("canBeThrownHeroSize",{type:"number",default:-1}),Character.attributes.add("heroGrowActivationData",{type:"json",array:!0,schema:[{name:"obj",type:"entity"},{name:"mat",type:"asset",assetType:"material"}]}),Character.attributes.add("updateCameraLookBeforeGameStarted",{type:"boolean",default:!1}),Character.attributes.add("isGiant",{type:"boolean",default:!1}),Character.attributes.add("giantConfig",{type:"json",schema:[{name:"numHitsToMove",type:"number",default:3},{name:"numMovesToDie",type:"number",default:3},{name:"walkRadius",type:"number",default:50},{name:"positionsOnCircle",type:"number",array:!0},{name:"throwBaseObject",type:"entity"},{name:"firstThrowDelay",type:"number",array:!0},{name:"throwIntervals",type:"number",array:!0},{name:"runCircTime",type:"number",default:8},{name:"stompsInterval",type:"number",default:.6},{name:"shakeCameraOnGiantMove",type:"boolean",default:!0},{name:"throwObjsOnGiantMove",type:"boolean",default:!0},{name:"throwObjsPowerMul",type:"number",default:1}]}),Character.attributes.add("speed",{type:"number",default:3.3}),Character.attributes.add("gravity",{type:"number",default:9.8}),pc.registerScript(Bot,"bot"),pc.registerScript(CameraCharacterObjectsManager,"cameraCharacterObjectsManager"),pc.registerScript(CharacterController,"characterController"),CharacterController.attributes.add("slopeCurveModifier",{type:"curve",default:{keys:[0,1,.5,1,1,0]}}),CharacterController.attributes.add("center",{type:"vec3",default:[0,0,0]}),CharacterController.attributes.add("radius",{type:"number",default:.3}),CharacterController.attributes.add("height",{type:"number",default:1.8}),CharacterController.attributes.add("mass",{type:"number",default:1}),pc.registerScript(CharacterControllerManager,"characterControllerManager"),pc.registerScript(DotsLoadingAnim,"dotsLoadingAnim"),DotsLoadingAnim.attributes.add("dotsDistance",{type:"number",default:35}),DotsLoadingAnim.attributes.add("time",{type:"number",default:2}),pc.registerScript(Enemy,"enemy"),Enemy.attributes.add("canCatchThrownObjects",{type:"boolean",default:!0}),Enemy.attributes.add("canBeThrown",{type:"boolean",default:!0}),Enemy.attributes.add("canBeThrownOnlyDead",{type:"boolean",default:!1}),Enemy.attributes.add("canBeThrownHeroSize",{type:"number",default:-1}),Enemy.attributes.add("heroGrowActivationData",{type:"json",array:!0,schema:[{name:"obj",type:"entity"},{name:"mat",type:"asset",assetType:"material"}]}),Enemy.attributes.add("updateCameraLookBeforeGameStarted",{type:"boolean",default:!1}),Enemy.attributes.add("isGiant",{type:"boolean",default:!1}),Enemy.attributes.add("giantConfig",{type:"json",schema:[{name:"numHitsToMove",type:"number",default:3},{name:"numMovesToDie",type:"number",default:3},{name:"walkRadius",type:"number",default:50},{name:"positionsOnCircle",type:"number",array:!0},{name:"throwBaseObject",type:"entity"},{name:"firstThrowDelay",type:"number",array:!0},{name:"throwIntervals",type:"number",array:!0},{name:"runCircTime",type:"number",default:8},{name:"stompsInterval",type:"number",default:.6},{name:"shakeCameraOnGiantMove",type:"boolean",default:!0},{name:"throwObjsOnGiantMove",type:"boolean",default:!0},{name:"throwObjsPowerMul",type:"number",default:1}]}),Enemy.attributes.add("speed",{type:"number",default:3.3}),Enemy.attributes.add("gravity",{type:"number",default:9.8}),Enemy.attributes.add("idleTimeRange",{type:"number",array:!0,default:[10,20]}),Enemy.attributes.add("walkDistanceRange",{type:"number",default:12}),Enemy.attributes.add("catchReactTime",{type:"number",array:!0,default:[.5,1.2]}),pc.registerScript(FailScreen,"failScreen"),pc.registerScript(FatalityBase,"fatalityBase"),FatalityBase.attributes.add("skyBoxTintColor",{type:"rgb"}),pc.registerScript(FatalityICE,"fatalityICE"),FatalityICE.attributes.add("skyBoxTintColor",{type:"rgb"}),FatalityICE.attributes.add("activatePhysicColliderObject",{type:"entity"}),FatalityICE.attributes.add("fatalityThrowObject",{type:"entity"}),pc.registerScript(FatalityUI,"fatalityUI"),pc.registerScript(GameController,"gameController"),pc.registerScript(GameSettings,"gameSettings"),GameSettings.attributes.add("CLEAR_SAVES",{type:"boolean",default:!1}),GameSettings.attributes.add("dyingAnimAssetID",{type:"number",default:-1}),GameSettings.attributes.add("MAX_FS_DIAMONDS_MULTIPLIER",{type:"number",default:2}),GameSettings.attributes.add("scorePerEnemyHit",{type:"number",default:40}),GameSettings.attributes.add("MIN_GIFT_WINDOW_LEVEL",{type:"number",default:4}),GameSettings.attributes.add("GIFT_WINDOW_EVERY_LEVELS",{type:"number",default:4}),GameSettings.attributes.add("SEC_REVIVE_TIMEOUT",{type:"number",default:5}),GameSettings.attributes.add("DELAY_SEC_SHOW_NO_THANKS_BTN",{type:"number",default:1}),GameSettings.attributes.add("useThrowYFromChar",{type:"boolean",default:!1}),GameSettings.attributes.add("useMultiThrowObjects",{type:"boolean",default:!1}),GameSettings.attributes.add("startBiggerSize",{type:"number",default:3}),GameSettings.attributes.add("playerThrowsOnMouseUp",{type:"boolean",default:!1}),GameSettings.attributes.add("useCharacterColliderAsCatchCollider",{type:"boolean",default:!1}),GameSettings.attributes.add("addonEnemyKillHitImpulseMul",{type:"number",default:1}),GameSettings.attributes.add("throwObjMassMulOnThrow",{type:"number",default:1}),GameSettings.attributes.add("throwObjMassRestoreTime",{type:"number",default:.8}),GameSettings.attributes.add("ragdollThrowPowerMul",{type:"number",default:2}),GameSettings.attributes.add("maxTimeThrowObjFlying",{type:"number",default:3}),GameSettings.attributes.add("dontChangeLevelOnWin",{type:"boolean",default:!1}),GameSettings.attributes.add("useFocusOnThreat",{type:"boolean",default:!1}),GameSettings.attributes.add("maxThreatDistToFocus",{type:"number",default:150}),GameSettings.attributes.add("minThreatAngDifFromLookToFocus",{type:"number",default:50}),GameSettings.attributes.add("heroRadToDetectThreat",{type:"number",default:1.5}),GameSettings.attributes.add("rollMoveSpeed",{type:"number",default:6}),GameSettings.attributes.add("minSwipePhysSize_cm",{type:"number",default:1.8}),GameSettings.attributes.add("timeToDetectSwipe",{type:"number",default:.4}),GameSettings.attributes.add("giantCriticalHitProbabilityPerc",{type:"number",default:0}),GameSettings.attributes.add("giantCriticalHitDamageMultiplier",{type:"number",default:2}),GameSettings.attributes.add("fatalityEveryLevel",{type:"number",default:5}),GameSettings.attributes.add("deadEnemiesMat",{type:"asset",assetType:"material"}),GameSettings.attributes.add("WIN_FS_SCORES",{type:"number",array:!0,default:[300,600,1200]}),GameSettings.attributes.add("LEVELS_NUM_DIAMONDS",{type:"number",array:!0,default:[15,25]}),GameSettings.attributes.add("botsHeroTargetRadius",{type:"number",array:!0,default:[2,5]}),GameSettings.attributes.add("botIdleTime",{type:"number",array:!0,default:[0,.7]}),GameSettings.attributes.add("botRunTime",{type:"number",array:!0,default:[.7,3]}),GameSettings.attributes.add("heroAvatarsPrefabs",{type:"asset",assetType:"template",array:!0}),GameSettings.attributes.add("fatalityScenePrefab",{type:"asset",assetType:"template"}),GameSettings.attributes.add("levelsPrefabs",{type:"asset",assetType:"template",array:!0}),pc.registerScript(GiantExtended,"giantExtended"),GiantExtended.attributes.add("canCatchThrownObjects",{type:"boolean",default:!0}),GiantExtended.attributes.add("canBeThrown",{type:"boolean",default:!0}),GiantExtended.attributes.add("canBeThrownOnlyDead",{type:"boolean",default:!1}),GiantExtended.attributes.add("canBeThrownHeroSize",{type:"number",default:-1}),GiantExtended.attributes.add("heroGrowActivationData",{type:"json",array:!0,schema:[{name:"obj",type:"entity"},{name:"mat",type:"asset",assetType:"material"}]}),GiantExtended.attributes.add("updateCameraLookBeforeGameStarted",{type:"boolean",default:!1}),GiantExtended.attributes.add("isGiant",{type:"boolean",default:!1}),GiantExtended.attributes.add("giantConfig",{type:"json",schema:[{name:"numHitsToMove",type:"number",default:3},{name:"numMovesToDie",type:"number",default:3},{name:"walkRadius",type:"number",default:50},{name:"positionsOnCircle",type:"number",array:!0},{name:"throwBaseObject",type:"entity"},{name:"firstThrowDelay",type:"number",array:!0},{name:"throwIntervals",type:"number",array:!0},{name:"runCircTime",type:"number",default:8},{name:"stompsInterval",type:"number",default:.6},{name:"shakeCameraOnGiantMove",type:"boolean",default:!0},{name:"throwObjsOnGiantMove",type:"boolean",default:!0},{name:"throwObjsPowerMul",type:"number",default:1}]}),GiantExtended.attributes.add("speed",{type:"number",default:3.3}),GiantExtended.attributes.add("gravity",{type:"number",default:9.8}),GiantExtended.attributes.add("enemySize",{type:"number",default:0}),GiantExtended.attributes.add("idleTimeRange",{type:"number",array:!0,default:[10,20]}),GiantExtended.attributes.add("walkDistanceRange",{type:"number",default:12}),GiantExtended.attributes.add("catchReactTime",{type:"number",array:!0,default:[.5,1.2]}),GiantExtended.attributes.add("faceObject",{type:"entity"}),GiantExtended.attributes.add("faceAngryTexture",{type:"asset",assetType:"texture"}),GiantExtended.attributes.add("faceDeadTexture",{type:"asset",assetType:"texture"}),GiantExtended.attributes.add("faceAngryTextureTimeSec",{type:"number",default:1.3}),GiantExtended.attributes.add("useGroinHitAnim",{type:"boolean",default:!1}),GiantExtended.attributes.add("shootPosObject",{type:"entity"}),GiantExtended.attributes.add("giantRunningThroughSceneProb",{type:"number",default:100}),pc.registerScript(GiantLifesProgress,"giantLifesProgress"),GiantLifesProgress.attributes.add("perHitWidth",{type:"number",default:30}),GiantLifesProgress.attributes.add("fillSpeedPercSec",{type:"number",default:70}),pc.registerScript(GiantRootMotionController,"giantRootMotionController"),pc.registerScript(GrowHeroTrigger,"growHeroTrigger"),GrowHeroTrigger.attributes.add("gravity",{type:"number",default:9.8}),GrowHeroTrigger.attributes.add("avoidCheckRadius",{type:"number",default:2.5}),pc.registerScript(Hero,"hero"),Hero.attributes.add("canCatchThrownObjects",{type:"boolean",default:!0}),Hero.attributes.add("canBeThrown",{type:"boolean",default:!0}),Hero.attributes.add("canBeThrownOnlyDead",{type:"boolean",default:!1}),Hero.attributes.add("canBeThrownHeroSize",{type:"number",default:-1}),Hero.attributes.add("heroGrowActivationData",{type:"json",array:!0,schema:[{name:"obj",type:"entity"},{name:"mat",type:"asset",assetType:"material"}]}),Hero.attributes.add("updateCameraLookBeforeGameStarted",{type:"boolean",default:!1}),Hero.attributes.add("isGiant",{type:"boolean",default:!1}),Hero.attributes.add("giantConfig",{type:"json",schema:[{name:"numHitsToMove",type:"number",default:3},{name:"numMovesToDie",type:"number",default:3},{name:"walkRadius",type:"number",default:50},{name:"positionsOnCircle",type:"number",array:!0},{name:"throwBaseObject",type:"entity"},{name:"firstThrowDelay",type:"number",array:!0},{name:"throwIntervals",type:"number",array:!0},{name:"runCircTime",type:"number",default:8},{name:"stompsInterval",type:"number",default:.6},{name:"shakeCameraOnGiantMove",type:"boolean",default:!0},{name:"throwObjsOnGiantMove",type:"boolean",default:!0},{name:"throwObjsPowerMul",type:"number",default:1}]}),Hero.attributes.add("speed",{type:"number",default:3.3}),Hero.attributes.add("gravity",{type:"number",default:9.8}),Hero.attributes.add("hideCameraHeroOverlapObjects",{type:"boolean",default:!0}),Hero.attributes.add("hiddenObjectsMat",{type:"asset",assetType:"material"}),Hero.attributes.add("growStepScale",{type:"number",default:.1}),Hero.attributes.add("growStepAnimTime",{type:"number",default:.3}),Hero.attributes.add("growAddSpeedMul",{type:"number",default:.3}),pc.registerScript(HeroDirectControls,"heroDirectControls"),HeroDirectControls.attributes.add("canCatchThrownObjects",{type:"boolean",default:!0}),HeroDirectControls.attributes.add("canBeThrown",{type:"boolean",default:!0}),HeroDirectControls.attributes.add("canBeThrownOnlyDead",{type:"boolean",default:!1}),HeroDirectControls.attributes.add("canBeThrownHeroSize",{type:"number",default:-1}),HeroDirectControls.attributes.add("heroGrowActivationData",{type:"json",array:!0,schema:[{name:"obj",type:"entity"},{name:"mat",type:"asset",assetType:"material"}]}),HeroDirectControls.attributes.add("updateCameraLookBeforeGameStarted",{type:"boolean",default:!1}),HeroDirectControls.attributes.add("isGiant",{type:"boolean",default:!1}),HeroDirectControls.attributes.add("giantConfig",{type:"json",schema:[{name:"numHitsToMove",type:"number",default:3},{name:"numMovesToDie",type:"number",default:3},{name:"walkRadius",type:"number",default:50},{name:"positionsOnCircle",type:"number",array:!0},{name:"throwBaseObject",type:"entity"},{name:"firstThrowDelay",type:"number",array:!0},{name:"throwIntervals",type:"number",array:!0},{name:"runCircTime",type:"number",default:8},{name:"stompsInterval",type:"number",default:.6},{name:"shakeCameraOnGiantMove",type:"boolean",default:!0},{name:"throwObjsOnGiantMove",type:"boolean",default:!0},{name:"throwObjsPowerMul",type:"number",default:1}]}),HeroDirectControls.attributes.add("speed",{type:"number",default:3.3}),HeroDirectControls.attributes.add("gravity",{type:"number",default:9.8}),HeroDirectControls.attributes.add("hideCameraHeroOverlapObjects",{type:"boolean",default:!0}),HeroDirectControls.attributes.add("hiddenObjectsMat",{type:"asset",assetType:"material"}),HeroDirectControls.attributes.add("growStepScale",{type:"number",default:.1}),HeroDirectControls.attributes.add("growStepAnimTime",{type:"number",default:.3}),HeroDirectControls.attributes.add("growAddSpeedMul",{type:"number",default:.3}),HeroDirectControls.attributes.add("controlSpeedByJoystick",{type:"boolean",default:!1}),Input.Init(),pc.registerScript(ItemProgress,"itemProgress"),pc.registerScript(Joystick,"joystick"),Joystick.attributes.add("radius",{type:"number",default:200}),Joystick.attributes.add("fixedJoystick",{type:"boolean",default:!0}),pc.registerScript(LevelCompleteScreen2,"levelCompleteScreen2"),LevelCompleteScreen2.attributes.add("moneyMultipliers",{type:"string",default:""}),LevelCompleteScreen2.attributes.add("moneyMultipliersChangeDelay",{type:"number",default:2}),LevelCompleteScreen2.attributes.add("nextBtnShowDelay",{type:"number",default:0}),LevelCompleteScreen2.attributes.add("delayShow",{type:"number",default:3}),pc.registerScript(LevelLoadingScreen,"levelLoadingScreen"),pc.registerScript(LevelObject,"levelObject"),LevelObject.attributes.add("useAimMode",{type:"boolean",default:!1}),LevelObject.attributes.add("aimAllAxis",{type:"boolean",default:!1}),LevelObject.attributes.add("throwPowerMultiplier",{type:"number",default:1}),LevelObject.attributes.add("throwPowerMultiplierEnemies",{type:"number",default:2}),LevelObject.attributes.add("useRolls",{type:"boolean",default:!0}),LevelObject.attributes.add("useRollsOnCycleLevel",{type:"boolean",default:!1}),LevelObject.attributes.add("removeGiantHats",{type:"boolean",default:!1}),pc.registerScript(ThrowObject,"throwObject"),ThrowObject.attributes.add("reflectFromWalls",{type:"boolean",default:!1}),ThrowObject.attributes.add("massMulOnThrow",{type:"number",default:1}),ThrowObject.attributes.add("giantDammage",{type:"number",default:1}),ThrowObject.attributes.add("giantKillMass",{type:"number",default:0}),ThrowObject.attributes.add("kinematicUntillGiantThrowHit",{type:"boolean",default:!1}),ThrowObject.attributes.add("massMultOnSetDynamic",{type:"number",default:12}),ThrowObject.attributes.add("isBreakable",{type:"boolean",default:!1}),ThrowObject.attributes.add("activeBySizePushCoef",{type:"number",default:1}),ThrowObject.attributes.add("inactiveBySizePushCoef",{type:"number",default:1}),ThrowObject.attributes.add("activateHeroSize",{type:"number",default:-1}),ThrowObject.attributes.add("gravityScale",{type:"number",default:.1}),ThrowObject.attributes.add("materialAtHitGotDynamic",{type:"asset",assetType:"material"}),ThrowObject.attributes.add("activateThrowHeroMat",{type:"asset",assetType:"material"}),ThrowObject.attributes.add("heroGrowActivationData",{type:"json",array:!0,schema:[{name:"obj",type:"entity"},{name:"mat",type:"asset",assetType:"material"}]}),ThrowObject.attributes.add("leftHandPos",{type:"json",schema:[{name:"isSet",type:"boolean",default:!1},{name:"position",type:"vec3"},{name:"rotation",type:"vec3"}]}),ThrowObject.attributes.add("rightHandPos",{type:"json",schema:[{name:"isSet",type:"boolean",default:!1},{name:"position",type:"vec3"},{name:"rotation",type:"vec3"}]}),pc.registerScript(PartThrowObject,"partThrowObject"),PartThrowObject.attributes.add("reflectFromWalls",{type:"boolean",default:!1}),PartThrowObject.attributes.add("massMulOnThrow",{type:"number",default:1}),PartThrowObject.attributes.add("giantDammage",{type:"number",default:1}),PartThrowObject.attributes.add("giantKillMass",{type:"number",default:0}),PartThrowObject.attributes.add("kinematicUntillGiantThrowHit",{type:"boolean",default:!1}),PartThrowObject.attributes.add("massMultOnSetDynamic",{type:"number",default:12}),PartThrowObject.attributes.add("isBreakable",{type:"boolean",default:!1}),PartThrowObject.attributes.add("activeBySizePushCoef",{type:"number",default:1}),PartThrowObject.attributes.add("inactiveBySizePushCoef",{type:"number",default:1}),PartThrowObject.attributes.add("activateHeroSize",{type:"number",default:-1}),PartThrowObject.attributes.add("gravityScale",{type:"number",default:.1}),PartThrowObject.attributes.add("materialAtHitGotDynamic",{type:"asset",assetType:"material"}),PartThrowObject.attributes.add("activateThrowHeroMat",{type:"asset",assetType:"material"}),PartThrowObject.attributes.add("heroGrowActivationData",{type:"json",array:!0,schema:[{name:"obj",type:"entity"},{name:"mat",type:"asset",assetType:"material"}]}),PartThrowObject.attributes.add("leftHandPos",{type:"json",schema:[{name:"isSet",type:"boolean",default:!1},{name:"position",type:"vec3"},{name:"rotation",type:"vec3"}]}),PartThrowObject.attributes.add("rightHandPos",{type:"json",schema:[{name:"isSet",type:"boolean",default:!1},{name:"position",type:"vec3"},{name:"rotation",type:"vec3"}]}),pc.registerScript(PauseScreen,"pauseScreen"),pc.registerScript(ReviveScreen,"reviveScreen"),pc.registerScript(RootMotionController,"rootMotionController"),RootMotionController.attributes.add("rootMotionEnabled",{type:"boolean",default:!1}),pc.registerScript(Shop,"shop"),Shop.attributes.add("hideOnInit",{type:"boolean",default:!0}),Shop.attributes.add("numAddRewardAdMoney",{type:"number",default:150}),Shop.attributes.add("setLastUsedStoreOnOpen",{type:"boolean",default:!0}),Shop.attributes.add("unlockPrices",{type:"number",array:!0,default:[150,300,500]}),Shop.attributes.add("defaultUnlockedItems",{type:"string",array:!0}),Shop.attributes.add("primaryStore",{type:"entity"}),pc.registerScript(Slot,"slot"),Slot.attributes.add("itemName",{type:"string",default:""}),Slot.attributes.add("lockedOnInit",{type:"boolean",default:!0}),Slot.attributes.add("numRewardsToOpen",{type:"number",default:0}),Slot.attributes.add("lockLevel",{type:"number",default:0}),pc.registerScript(SoundBtn,"soundBtn"),pc.registerScript(SoundsController,"soundsController"),String.prototype.__class__=String,String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var i={},n={},a=Number,r=Boolean,s={},o={};pc.registerScript(Store,"store"),Store.attributes.add("unsellable",{type:"boolean",default:!1}),Store.attributes.add("storeGroup",{type:"number",default:-1}),Store.attributes.add("hasUnlockRandomByReward",{type:"boolean",default:!1}),Store.attributes.add("hasMoneyByReward",{type:"boolean",default:!1}),Store.attributes.add("numMoneyPerReward",{type:"number",default:200}),Store.attributes.add("hasUnlockRandomMoney",{type:"boolean",default:!1}),Store.attributes.add("unlockByMoneyPrice",{type:"number",default:500}),Store.attributes.add("unlockByMoneyPriceAdd",{type:"number",default:50}),pc.registerScript(StoreSelectBtn,"storeSelectBtn"),StoreSelectBtn.attributes.add("store",{type:"entity"}),pc.registerScript(SuperMode,"superMode"),SuperMode.attributes.add("superModeDurationSec",{type:"number",default:5}),SuperMode.attributes.add("superModeHeroSpeedMultiplier",{type:"number",default:2}),SuperMode.attributes.add("damageMultiplier",{type:"number",default:2}),SuperMode.attributes.add("throwPowerCoef",{type:"number",default:2}),SuperMode.attributes.add("superModeThrowAddPerc",{type:"number",default:45}),SuperMode.attributes.add("superModePercSubInSec",{type:"number",default:4}),SuperMode.attributes.add("progressBarImage",{type:"entity"}),SuperMode.attributes.add("progressBarTimeOutImage",{type:"entity"}),SuperMode.attributes.add("superModeEffectObject",{type:"entity"}),SuperMode.attributes.add("hidedObjectsBeforeGameStarted",{type:"entity",array:!0}),pc.registerScript(TestComp,"testComp"),pc.registerScript(ThrowObjectCharacter,"throwObjectCharacter"),ThrowObjectCharacter.attributes.add("reflectFromWalls",{type:"boolean",default:!1}),ThrowObjectCharacter.attributes.add("massMulOnThrow",{type:"number",default:1}),ThrowObjectCharacter.attributes.add("giantDammage",{type:"number",default:1}),ThrowObjectCharacter.attributes.add("giantKillMass",{type:"number",default:0}),ThrowObjectCharacter.attributes.add("kinematicUntillGiantThrowHit",{type:"boolean",default:!1}),ThrowObjectCharacter.attributes.add("massMultOnSetDynamic",{type:"number",default:12}),ThrowObjectCharacter.attributes.add("isBreakable",{type:"boolean",default:!1}),ThrowObjectCharacter.attributes.add("activeBySizePushCoef",{type:"number",default:1}),ThrowObjectCharacter.attributes.add("inactiveBySizePushCoef",{type:"number",default:1}),ThrowObjectCharacter.attributes.add("activateHeroSize",{type:"number",default:-1}),ThrowObjectCharacter.attributes.add("gravityScale",{type:"number",default:.1}),pc.registerScript(UIManager,"uIManager"),pc.registerScript(WinFSItem,"winFSItem"),pc.registerScript(WinScreen,"winScreen"),haxe_ds_ObjectMap.count=0;var l={};Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{get:function(){return String(this.val)}}),js_Boot.__toStr={}.toString,APIManager.active=!0,APIManager.inited=!1,APIManager.wasLevelRestart=!1,Character.allCharacters=[],GameController.IsFirstRun=!0,GameController.isDuelMode=!1,GameController.isAimMode=!1,GameController.isAimAllAxis=!1,GameController.isGiantMode=!1,GameController.useRolls=!1,GameController.throwPowerMultiplier=1,GameController.throwPowerMultiplierEnemies=1,GameController.beforePauseGameplayTimeScale=1,GameController.paused=!1,GameController._gameMuted=-1,GameController.muted=!1,GameController.muteWasVolume=1,GameSettings.isFirstRun=!0,GameSettings.isLoadingLevel=!1,GameSettings.wasLevelChange=!1,GameSettings._curLevel=-1,GameSettings._numDiamonds=-1,GameSettings._curSessionIdx=-1,GameSettings._numLevelsStart=-1,GameSettings._curNumRevives=-1,GrowHeroTrigger.allGrowHeroTriggers=[],GrowHeroTrigger.curTimerOffsetIdx=0,_$Vector3_Vector3_$Impl_$.kEpsilonNormalSqrt=1e-15,_$Vector3_Vector3_$Impl_$.back=_$Vector3_Vector3_$Impl_$.get_BACK(),_$Vector3_Vector3_$Impl_$.down=_$Vector3_Vector3_$Impl_$.get_DOWN(),_$Vector3_Vector3_$Impl_$.forward=_$Vector3_Vector3_$Impl_$.get_FORWARD(),_$Vector3_Vector3_$Impl_$.left=_$Vector3_Vector3_$Impl_$.get_LEFT(),_$Vector3_Vector3_$Impl_$.one=_$Vector3_Vector3_$Impl_$.get_ONE(),_$Vector3_Vector3_$Impl_$.right=_$Vector3_Vector3_$Impl_$.get_RIGHT(),_$Vector3_Vector3_$Impl_$.up=_$Vector3_Vector3_$Impl_$.get_UP(),_$Vector3_Vector3_$Impl_$.zero=_$Vector3_Vector3_$Impl_$.get_ZERO(),Input.inited=!1,Input.mDownPos=new pc.Vec3(0,0,0),Input.curMPos=new pc.Vec3(0,0,0),Input.touchID=-1,Input.mouseButtonsPressStates=[!1,!1,!1],Input.mouseButtonsWasPressStates=[!1,!1,!1],Input.mouseButtonsWasReleaseStates=[!1,!1,!1],LevelCompleteScreen2._collectedDiamonds=-1,LevelLoadingScreen.isFirstRun=!0,Mathf.Deg2Rad=.01745329251994,Mathf.Rad2Deg=57.2957795130823,Mathf.PI=Math.PI,ThrowObject.AllThrowObjects=[],PlayerPrefs.inited=!1,_$Quaternion_Quaternion_$Impl_$.ZERO=pc.Quat.ZERO,_$Quaternion_Quaternion_$Impl_$.hMatrix=new pc.Mat4,_$Quaternion_Quaternion_$Impl_$.zeroVec=_$Vector3_Vector3_$Impl_$.get_ZERO(),ShakeEffect.hv=new pc.Vec3(0,0,0),Shop.isFirstRun=!0,Shop._randomUnlockIdx=-1,UIManager.isFirstRun=!0,motion_actuators_GenericActuator._hx_skip_constructor=!1,motion_actuators_SimpleActuator.actuators=[],motion_actuators_SimpleActuator.actuatorsLength=0,motion_actuators_SimpleActuator.addedEvent=!1,motion_easing_Expo.easeIn=new motion_easing__$Expo_ExpoEaseIn,motion_easing_Expo.easeInOut=new motion_easing__$Expo_ExpoEaseInOut,motion_easing_Expo.easeOut=new motion_easing__$Expo_ExpoEaseOut,motion_Actuate.defaultActuator=motion_actuators_SimpleActuator,motion_Actuate.defaultEase=motion_easing_Expo.easeOut,motion_Actuate.targetLibraries=new haxe_ds_ObjectMap,motion_easing_Back.easeIn=new motion_easing__$Back_BackEaseIn(1.70158),motion_easing_Back.easeInOut=new motion_easing__$Back_BackEaseInOut(1.70158),motion_easing_Back.easeOut=new motion_easing__$Back_BackEaseOut(1.70158),motion_easing_Quad.easeIn=new motion_easing__$Quad_QuadEaseIn,motion_easing_Quad.easeInOut=new motion_easing__$Quad_QuadEaseInOut,motion_easing_Quad.easeOut=new motion_easing__$Quad_QuadEaseOut,Main.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);if("launch.playcanvas.com"===window.location.hostname){let a=window.location.href;a.includes("play.staging.gc.famobi.com")||(window.location.href=`https://play.staging.gc.famobi.com/playcanvas/?overwrite_html5_link=${a}/A-PLAYCANVAS-DEV&aid=A-PLAYCANVAS-DEV`)}var FamobiSafeArea=pc.createScript("famobiSafeArea");FamobiSafeArea.attributes.add("forceBodyBackgroundColor",{type:"boolean",default:!0,title:"Change <body> background",default:!0}),FamobiSafeArea.attributes.add("bodyBackgroundColor",{type:"rgba",title:"Body Background Color",description:"Background color of body element (where the banner should be displayed). Make sure the checkbox above is checked!",default:[0,0,0,1]}),FamobiSafeArea.attributes.add("debugConfig",{type:"json",title:"Debug / Testing Mode",description:"Force safe areas to be applied to the UI. Useful testing layouts without a device.",schema:[{name:"enabled",type:"boolean",default:!1},{name:"top",type:"number",default:0},{name:"bottom",type:"number",default:0},{name:"left",type:"number",default:0},{name:"right",type:"number",default:0}]}),FamobiSafeArea.prototype.initialize=function(){this.app.graphicsDevice.on("resizecanvas",this._onCanvasResize,this),this.on("attr:debugConfig",(function(e,t){this._updateCanvasSizeAndPosition()}),this),this.on("attr:bodyBackgroundColor",(function(e,t){this._backgroundColorUpdate()}),this),this.on("destroy",(function(){this.app.graphicsDevice.off("resizecanvas",this._onCanvasResize,this)}),this),window.famobi&&"function"==typeof window.famobi.onOffsetChange&&window.famobi.onOffsetChange((e=>this._onCanvasResize())),window.visualViewport?(this.useVisualViewport=!0,window.visualViewport.addEventListener("resize",this._onCanvasResize.bind(this))):(this.useVisualViewport=!1,window.addEventListener("resize",this._onCanvasResize.bind(this),!0)),this._onCanvasResize()},FamobiSafeArea.prototype._onCanvasResize=function(){this._updateCanvasSizeAndPosition(),(pc.platform.ios||pc.platform.mobile)&&setTimeout((()=>this._updateCanvasSizeAndPosition()),1500)},FamobiSafeArea.prototype._updateCanvasSizeAndPosition=function(){let e=0,t=0,i=0,o=0;if(this.debugConfig.enabled)e=this.debugConfig.top,t=this.debugConfig.bottom,i=this.debugConfig.left,o=this.debugConfig.right;else{if(!window.famobi||!window.famobi.getOffsets)return console.warn("FamobiSafeArea: window.famobi.getOffsets is not defined!");const a=window.famobi.getOffsets();e=a.top,t=a.bottom,i=a.left,o=a.right}const a=window.innerHeight,n=window.innerWidth-i-o,s=a-e-t;this.app.setCanvasResolution(pc.RESOLUTION_FIXED,n,s),this.app.graphicsDevice.canvas.style.width=n+"px",this.app.graphicsDevice.canvas.style.height=s+"px",this.app.graphicsDevice.canvas.style.left=i+"px",this.app.graphicsDevice.canvas.style.right=o+"px",this.app.graphicsDevice.canvas.style.top=e+"px",this.app.graphicsDevice.canvas.style.bottom=t+"px",this.debugConfig.enabled&&console.log(`Canvas size set to ${n}x${s} (window ${window.innerWidth}x${window.innerHeight})`),this.app.fire("famobi:resizeCanvas",n,s),this._backgroundColorUpdate()},FamobiSafeArea.prototype._backgroundColorUpdate=function(){if(!this.forceBodyBackgroundColor)return;const e=this.app.graphicsDevice.canvas.parentElement;e&&(e.style.backgroundColor=this.bodyBackgroundColor.toString())},FamobiSafeArea.prototype.update=function(e){},pc.CameraComponent.prototype.screenToWorld=function(e,t,i,o){const a=this.system.app.graphicsDevice,n=a.width/a.maxPixelRatio,s=a.height/a.maxPixelRatio;return this._camera.screenToWorld(e,t,i,n,s,o)},pc.CameraComponent.prototype.worldToScreen=function(e,t){const i=this.system.app.graphicsDevice,o=i.width/i.maxPixelRatio,a=i.height/i.maxPixelRatio;return this._camera.worldToScreen(e,o,a,t)};pc.script.createLoadingScreen((function(n){var e,t,i,a,r,o=void 0,l=document.createElement("canvas"),s=0,getCoordinate=function(n){return n-=90,{x:(l.width/2-t)*Math.cos(n*Math.PI/180)+l.width/2,y:(l.width/2-t)*Math.sin(n*Math.PI/180)+l.width/2}};a="\n            .fam_bgr {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            padding: 0;\n            border: 0;\n            background-color: #fff;\n            }\n\n            #progress_bar {\n            position: absolute;\n            margin-top: 2rem;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%,-50%);\n            z-index: 0;\n            }\n\n            .splash_wrapper {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%,-50%);\n            }\n\n            .logo_wrapper {\n            width: 12rem;\n            height: 18rem;\n            margin-left: 1.813rem;\n            perspective: 5.625rem;\n            filter: drop-shadow(0.625rem 0.625rem 0.5rem #a3a3a3);\n            }\n\n            .title_wrapper {\n            position: absolute;\n            width: 15.625rem;\n            height: 4.375rem;\n            z-index: 1;\n            }\n\n            span {\n            margin: 0.188rem;\n            position: absolute;\n            }  \n\n            .row_1 {\n            top: 0;\n            }\n\n            .row_2 {\n            top: 6rem;\n            }\n\n            .row_3 {\n            top: 12rem;\n            }\n\n            .col_1 {\n            left: 0;\n            }\n\n            .col_2 {\n            left: 6rem;\n            }\n\n            .order_0 {\n            z-index: 3;\n            }\n\n            .order_1 {\n            z-index: 2;\n            }\n\n            .order_2 {\n            z-index: 1;\n            }\n\n            .square {\n            width: 5.625rem;\n            height: 5.625rem;\n            }\n\n            .triangle {\n            width: 0;\n            height: 0;\n            border-style: solid;\n            border-width: 2.813rem 0 2.813rem 3.75rem;\n            border-color: transparent transparent transparent #F07E00;\n            }\n\n            .blue {\n            background-color: #0194C6;\n            }\n\n            .orange {\n            background-color: #F07E00;\n            }\n\n            .grey {\n            background-color: #3D3D3B;\n            }\n\n            .ani_shiftright {\n            opacity: 0;\n            animation-name: shift-right;\n            animation-duration: 0.5s; \n            animation-timing-function: ease-out; \n            animation-fill-mode: forwards;\n            }\n\n            .ani_shiftdown {\n            opacity: 0;\n            animation-name: shift-down;\n            animation-duration: 0.5s;\n            animation-timing-function: ease-out; \n            animation-fill-mode: forwards;\n            }\n\n            .ani_title {\n            opacity: 0;\n            animation-name: title;\n            animation-duration: 1.7s;\n            animation-delay: 1.5s;\n            animation-timing-function: ease-out; \n            animation-fill-mode: forwards;\n            }\n\n            .ani_delay {\n            animation-duration: 0.5s;\n            animation-delay: 0.5s;\n            }\n\n            .ani_delay_long {\n            animation-duration: 0.5s;\n            animation-delay: 0.7s;\n            }\n\n            .ani_speed_fast {\n            animation-duration: 0.2s;\n            }\n\n            .ani_speed_medium {\n            animation-duration: 0.5s;\n            }\n\n            .ani_speed_slow {\n            animation-duration: 0.7s;\n            }\n\n            @keyframes shift-right { \n            0% {\n                opacity: 0;\n                margin-left: -5.625rem;\n            }\n            100% {\n                opacity: 1;\n                margin-left: 0.188rem;\n            }\n            }\n\n            @keyframes shift-down { \n            0% {\n                opacity: 0;\n                margin-top: -5.625rem;\n            }\n            100% {\n                opacity: 1;\n                margin-top: 0.188rem;\n            }\n            }\n\n            @keyframes title { \n            0% {\n                opacity: 0;\n                margin-top: -5.625rem;\n            }\n            100% {\n                opacity: 1;\n                margin-top: 0.188rem;\n            }\n            }\n        ",(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),document.head.appendChild(r),function(){var n=document.createElement("div");n.id="application-splash-wrapper",n.innerHTML='\n            <div class="fam_bgr">\n                <div class="splash_wrapper">\n                    <div class="logo_wrapper">\n                    <span class="square blue row_1 col_1 order_0"></span>\n                    <span class="square blue row_1 col_2  order_1 ani_shiftright"></span>\n                    <span class="square orange row_2 col_1 order_1 ani_shiftdown"></span>\n                    <span class="triangle row_2 col_2 order_1 ani_shiftright ani_delay_long ani_speed_fast"></span>\n                    <span class="square grey row_3 col_1 order_2 ani_shiftdown ani_delay_long ani_speed_fast"></span>\n                    </div>\n                    <div class=\'title_wrapper ani_title\'>\n                    <svg width="100%" height="100%" viewBox="0 0 125 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                        <g transform="matrix(1,0,0,1,-52.25,-46.5)">\n                            <path d="M65.7,65.4L58,65.4L58,77.6L53.3,77.6L53.3,50.6L68.7,50.6L68.7,54.7L58,54.7L58,61.2L65.7,61.2L65.7,65.4Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M82,77.6L81.7,75L81.5,75C80.8,75.9 79.8,76.7 78.5,77.2C77.2,77.8 75.9,78 74.6,78C72.9,78 71.5,77.5 70.6,76.5C69.6,75.5 69.1,74.2 69.1,72.6C69.1,71.5 69.3,70.5 69.8,69.6C70.3,68.7 71,68 71.9,67.4C72.8,66.8 73.9,66.3 75.1,66C76.4,65.7 77.8,65.5 79.3,65.5L81.1,65.5L81.1,64.9C81.1,63.8 80.8,63.1 80.1,62.6C79.4,62.1 78.3,61.9 76.8,61.9C74.8,61.9 73,62.3 71.4,63.2L70.5,59.8C72.3,58.7 74.5,58.2 77.1,58.2C79.8,58.2 81.9,58.8 83.3,59.9C84,60.4 84.5,61.1 84.9,61.9C85.3,62.7 85.5,63.7 85.5,64.8L85.5,77.6L82,77.6ZM76.4,74.5C77.3,74.5 78.1,74.3 79,73.9C79.9,73.5 80.6,72.9 81.1,72.2L81.1,68.5L80.3,68.5C78.1,68.5 76.4,68.8 75.4,69.4C74.4,70 73.9,70.9 73.9,72.1C74,73.7 74.8,74.5 76.4,74.5Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M103.2,77.6L103.2,65.2C103.2,63 102.3,61.9 100.5,61.9C100.1,61.9 99.6,62 99.1,62.1C98.6,62.3 98.1,62.5 97.6,62.8C97.1,63.1 96.7,63.5 96.3,64C95.9,64.5 95.6,65 95.5,65.6L95.5,77.6L91,77.6L91,58.8L94.5,58.8L94.7,61.6L94.9,61.6C95.4,60.5 96.3,59.6 97.5,59C98.7,58.4 99.9,58.2 101.3,58.2C102.6,58.2 103.7,58.5 104.8,59C105.8,59.5 106.6,60.4 107.1,61.6C107.6,60.5 108.5,59.6 109.7,59.1C110.9,58.5 112.1,58.3 113.5,58.3C114.4,58.3 115.2,58.4 116,58.6C116.8,58.8 117.5,59.2 118,59.7C118.6,60.2 119,60.9 119.4,61.7C119.7,62.5 119.9,63.6 119.9,64.8L119.9,77.6L115.4,77.6L115.4,65.2C115.4,63 114.5,61.9 112.7,61.9C112.3,61.9 111.8,62 111.3,62.1C110.8,62.3 110.3,62.5 109.8,62.8C109.3,63.1 108.9,63.5 108.5,64C108.1,64.5 107.8,65 107.7,65.6L107.7,77.6L103.2,77.6Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M133.5,58.2C135.2,58.2 136.6,58.5 137.8,59C139,59.6 140,60.3 140.8,61.2C141.6,62.1 142.1,63.2 142.5,64.4C142.9,65.6 143.1,66.9 143.1,68.2C143.1,69.5 142.9,70.8 142.5,72C142.1,73.2 141.6,74.2 140.8,75.1C140,76 139,76.7 137.9,77.2C136.7,77.7 135.3,78 133.7,78C132,78 130.6,77.7 129.4,77.2C128.2,76.7 127.2,75.9 126.4,75C125.6,74.1 125,73 124.6,71.8C124.2,70.6 124,69.3 124,68C124,66.7 124.2,65.4 124.6,64.2C125,63 125.6,62 126.3,61C127.1,60.1 128.1,59.4 129.3,58.8C130.5,58.5 131.9,58.2 133.5,58.2ZM133.6,74.7C134.4,74.7 135.1,74.5 135.7,74.2C136.3,73.9 136.8,73.4 137.2,72.8C137.6,72.2 137.9,71.5 138,70.8C138.2,70 138.3,69.2 138.3,68.4C138.3,67.5 138.2,66.7 138,65.9C137.8,65.1 137.5,64.4 137.1,63.8C136.7,63.2 136.2,62.7 135.6,62.3C135,61.9 134.3,61.7 133.4,61.7C132.6,61.7 131.9,61.9 131.4,62.2C130.8,62.5 130.4,63 130,63.6C129.6,64.2 129.4,64.8 129.2,65.6C129,66.4 128.9,67.2 128.9,68C128.9,68.9 129,69.7 129.2,70.5C129.4,71.3 129.7,72 130.1,72.6C130.5,73.2 131,73.7 131.6,74.1C132.1,74.5 132.8,74.7 133.6,74.7Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M157.9,78.1C156.4,78.1 155.2,77.8 154.2,77.2C153.2,76.6 152.4,75.9 151.6,75L151.4,75L151.1,77.6L147.5,77.6L147.5,47.4L152,47.4L152,60.7C152.6,59.9 153.5,59.3 154.5,58.9C155.5,58.5 156.7,58.2 158,58.2C159.4,58.2 160.7,58.5 161.7,59C162.8,59.5 163.6,60.3 164.4,61.2C165.1,62.1 165.6,63.1 166,64.3C166.3,65.5 166.5,66.7 166.5,68C166.5,69.4 166.3,70.8 165.9,72C165.5,73.2 164.9,74.3 164.2,75.2C163.5,76.1 162.5,76.8 161.5,77.3C160.4,77.8 159.2,78.1 157.9,78.1ZM157.3,74.7C158.1,74.7 158.8,74.5 159.4,74.1C160,73.7 160.5,73.2 160.9,72.6C161.3,72 161.6,71.3 161.8,70.5C162,69.7 162.1,68.9 162.1,68.1C162.1,67.3 162,66.4 161.8,65.7C161.6,64.9 161.3,64.2 160.9,63.6C160.5,63 159.9,62.5 159.3,62.2C158.7,61.9 157.9,61.7 157.1,61.7C156.3,61.7 155.5,61.9 154.7,62.3C153.9,62.7 153,63.4 152.2,64.4L152.2,72.2C152.5,72.6 152.9,73 153.3,73.3C153.7,73.6 154.2,73.9 154.7,74.1C155.2,74.3 155.7,74.5 156.2,74.6C156.7,74.7 156.9,74.7 157.3,74.7Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M170.4,52.8C170.4,52.4 170.5,52.1 170.6,51.7C170.7,51.3 171,51 171.2,50.7C171.5,50.4 171.8,50.2 172.1,50C172.4,49.8 172.8,49.8 173.2,49.8C173.6,49.8 173.9,49.9 174.3,50C174.7,50.2 175,50.4 175.3,50.7C175.6,51 175.8,51.3 176,51.7C176.2,52.1 176.2,52.4 176.2,52.8C176.2,53.2 176.1,53.6 176,53.9C175.8,54.2 175.6,54.5 175.3,54.8C175,55.1 174.7,55.3 174.3,55.4C173.9,55.5 173.6,55.6 173.2,55.6C172.4,55.6 171.7,55.3 171.2,54.7C170.6,54.3 170.4,53.6 170.4,52.8ZM175.5,77.6L171,77.6L171,58.8L175.5,58.8L175.5,77.6Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                        </g>\n                    </svg>\n                    </div>\n                    <div id="progress_bar"></div>\n                </div>\n            </div>\n        ',document.body.appendChild(n);var a=document.getElementById("progress_bar"),r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;l.width=r/3,l.height=l.width,e=l.getContext("2d"),t=l.width/10,(i=e.createLinearGradient(0,0,l.width,0)).addColorStop("0","#cce7ff"),i.addColorStop("0.5","#005095"),i.addColorStop("1","#cce7ff"),e.strokeStyle=i,a.appendChild(l)}(),n.on("preload:end",(function(){n.off("preload:progress")})),n.on("preload:progress",(function(n){n=Math.min(1,Math.max(0,n)),window&&window.famobi&&window.famobi.setPreloadProgress&&(window.famobi.setPreloadProgress(100*n),1===n&&window.famobi.gameReady()),function(n){if(!e)return;o&&clearInterval(o);let t=(n-s)/10;o=setInterval((()=>{s<n?s+=t:clearInterval(o);var a=3.6*s;e.clearRect(0,0,l.width,l.height),e.beginPath(),e.lineWidth=10;var r=getCoordinate(0);e.moveTo(r.x,r.y),e.strokeStyle=i;for(var d=0;d<a;d++){var C=getCoordinate(d);e.lineTo(C.x,C.y)}e.stroke(),e.beginPath(),e.strokeStyle="#c9c9c9";for(var m=a;m<360;m++){var p=getCoordinate(m);e.lineTo(p.x,p.y)}e.stroke()}),50)}(100*n)})),n.on("start",(function(){var n=document.getElementById("application-splash-wrapper");n.parentElement.removeChild(n)}))}));