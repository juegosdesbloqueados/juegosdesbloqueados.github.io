function range(e,t){return e=Math.ceil(e),t=Math.floor(t),Array(t-e+1).fill().map((t,n)=>e+n)}function startGame(){window.dirtyPause||(app.timeScale=1,window.dirtyMute?playerData.mute=window.dirtyMute:playerData.mute=!1,window.famobi_analytics.trackEvent("EVENT_RESUME"))}function pauseGame(){window.dirtyPause||(app.timeScale=0,window.dirtyMute?playerData.mute=window.dirtyMute:playerData.mute=!0,window.famobi_analytics.trackEvent("EVENT_PAUSE"))}function getPlayerData(){window.famobi?window.famobi.localStorage.getItem("GoAroundV2.1.12:playerData")?playerData=JSON.parse(window.famobi.localStorage.getItem("GoAroundV2.1.12:playerData")):(playerData=new PlayerData,window.famobi.localStorage.setItem("GoAroundV2.1.12:playerData",JSON.stringify(playerData))):localStorage.getItem("GoAroundV2.1.12:playerData")?playerData=JSON.parse(localStorage.getItem("GoAroundV2.1.12:playerData")):(playerData=new PlayerData,localStorage.setItem("GoAroundV2.1.12:playerData",JSON.stringify(playerData)))}function updatePlayerData(){window.famobi?window.famobi.localStorage.setItem("GoAroundV2.1.12:playerData",JSON.stringify(playerData)):localStorage.setItem("GoAroundV2.1.12:playerData",JSON.stringify(playerData))}var Rotater=pc.createScript("rotater");Rotater.attributes.add("speed",{type:"number",default:70}),Rotater.attributes.add("additionalSpeed",{type:"number",default:2}),Rotater.attributes.add("maxSpeed",{type:"number",default:80}),Rotater.prototype.initialize=function(){playerParent=this.entity,Rotater.instance=this,this.passed=!1,this.rotateSpeed=this.speed},Rotater.prototype.update=function(e){gameOver||!gameStarted||firstTutorial||secondTutorial?this.entity.rotate(0,0,0):this.entity.rotateLocal(0,0,this.rotateSpeed*e),currentAngle=this.entity.getLocalEulerAngles().z,currentAngle<0&&(currentAngle+=360),previousAngle||!isGrounded||feverMode||(previousAngle=currentAngle),!isGrounded||!mouseDown||gameOver||!gameStarted||feverMode||firstTutorial||secondTutorial||(previousAngle&&(previousAngle>currentAngle?(range(previousAngle,currentAngle+360).forEach(e=>{rotations.includes(e)||rotations.push(e)}),previousAngle=currentAngle):(range(previousAngle,currentAngle).forEach(e=>{rotations.includes(e)||rotations.push(e)}),previousAngle=currentAngle)),rotations.length>=360&&!feverMode&&!gameOver&&gameStarted&&(previousAngle=void 0,feverMode=!0,this.rotateSpeed+=fireModeSpeed,reviveSpawnTween&&reviveSpawnTween.stop(),fireModeTween&&fireModeTween.stop(),PlayerMovement.instance.setFireMode()))},Rotater.prototype.addSpeed=function(){this.rotateSpeed<=this.maxSpeed&&(this.rotateSpeed+=this.additionalSpeed)},Rotater.prototype.setDefaultSpeed=function(){this.rotateSpeed=this.speed};var PlayerMovement=pc.createScript("playerMovement");PlayerMovement.prototype.initialize=function(){PlayerMovement.instance=this,this.entity.parent.setEulerAngles(new pc.Vec3(0,0,1)),this.entity.parent.setPosition(new pc.Vec3),this.applyJumpTween(),this.applyDownTween(),this.applyFirstJumpTween(),particleEffect=this.entity.parent.findByName("RunnerParticle"),this.setIdle(),this.elapsed=0},PlayerMovement.prototype.update=function(e){this.elapsed+=e,feverMode&&this.elapsed>.006&&(popedRotations=rotations.pop(),rotations.length>0?rotations.length<90&&rotations.length%15==1&&Trail.instance.useEffect():(this.entity.sound.stop("Fever"),this.entity.sound.slots.Fever.loop=!1,feverMode=!1,canDeath=!0,rotations=[],Trail.instance.defaultColor(),popedRotations=void 0),this.elapsed=0)},PlayerMovement.prototype.setIdle=function(){reviveState?(this.entity.sprite.stop("Death"),this.entity.sprite.stop("Runner"),this.entity.sprite.stop("Jump"),this.entity.sprite.stop("Success"),this.entity.sprite.play("Idle"),this.entity.setLocalPosition(new pc.Vec3(0,-45.268,0)),particleEffect.particlesystem.stop(),particleEffect.particlesystem.reset(),this.entity.rigidbody.enabled=!0,particleEffect.enabled=!1):(this.entity.enabled=!1,this.entity.sprite.stop("Death"),this.entity.sprite.stop("Runner"),this.entity.sprite.stop("Jump"),this.entity.sprite.stop("Success"),this.entity.sprite.play("Idle"),this.entity.parent.setEulerAngles(new pc.Vec3(0,0,0)),this.entity.setLocalPosition(new pc.Vec3(0,-45.268,0)),particleEffect.particlesystem.stop(),particleEffect.particlesystem.reset(),particleEffect.enabled=!1,this.entity.rigidbody.enabled=!0,this.entity.enabled=!0)},PlayerMovement.prototype.mouseDown=function(){mouseDown&&!gameOver&&gameStarted?(firstTutorial=!1,playerData.newPlayer&&(app.root.findByName("firstJumpTutorial").enabled=!1),firstJumpTween.start(),particleEffect.particlesystem.stop(),playerData.mute||this.entity.sound.play("JumpAndDown"),this.entity.sprite.stop("Runner"),this.entity.sprite.play("Jump")):secondMouseDown&&!mouseDown&&!gameOver&&gameStarted?(secondTutorial=!1,firstJumpTween.stop(),secondMouseDown=!1,downTween.stop(),jumpTween.start(),particleEffect.particlesystem.stop(),this.entity.sprite.stop("Runner"),this.entity.sprite.play("Jump")):reviveState?StateController.instance.playRevive():StateController.instance.playGame()},PlayerMovement.prototype.applyFirstJumpTween=function(){firstJumpTween=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(0,-27,0),.13,pc.Linear).on("update",()=>{mouseDown=!1,secondMouseDown=!0,previousAngle=void 0}).on("complete",()=>{secondTutorial||(downTween.start(),mouseDown=!1,isGrounded=!1)})},PlayerMovement.prototype.applyJumpTween=function(){jumpTween=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(0,-15,0),.2,pc.Linear).on("update",()=>{mouseDown=!1,previousAngle=void 0,particleEffect.particlesystem.stop()}).on("complete",()=>{downTween.start(),mouseDown=!1,isGrounded=!1,app.root.findByName("doubleJumpTutorial").enabled&&(app.root.findByName("doubleJumpTutorial").enabled=!1,thirdTouchImage.enabled=!1)})},PlayerMovement.prototype.applyDownTween=function(){let e=this;downTween=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(0,-45.268,0),.2,pc.Linear).on("complete",()=>{mouseDown=!0,isGrounded=!0,gameOver||(particleEffect.particlesystem.play(),e.entity.sprite&&(e.entity.sprite.stop("Jump"),e.entity.sprite.play("Runner")))})},PlayerMovement.prototype.gameOverPlayer=async function(){this.entity.sprite&&(this.entity.sprite.stop("Jump"),this.entity.sprite.stop("Runner"),this.entity.sprite.play("Death")),this.entity.rigidbody.enabled=!1,firstJumpTween.stop(),jumpTween.stop(),this.entity.getLocalPosition().y>=-45&&downTween.start(),await sleep(1100),this.entity.setLocalPosition(new pc.Vec3(0,-49.5,0))},PlayerMovement.prototype.playerReviveAnimation=function(){let e=new pc.Color(.33,1,.2,1);reviveSpawnTween=app.tween(e).to(new pc.Color(0,0,0,0),.3,pc.Linear).yoyo(!0).repeat(3).on("update",()=>{canDeath=!1,player.sprite.color=e}).on("complete",()=>{canDeath=!0}).start()},PlayerMovement.prototype.setFireMode=function(){rotations.sort((e,t)=>e-t),rotations=rotations.map(e=>e>=180?e-180:e+180),playerData.mute||(this.entity.sound.play("Fever"),this.entity.sound.slots.Fever.loop=!0),Trail.instance.trailColorEffect();let e=new pc.Color(.33,1,.2,1);fireModeTween=app.tween(e).to(new pc.Color(0,0,0,0),1,pc.Linear).yoyo(!0).repeat(3).on("update",()=>{player.sprite.color=e}).start()};let jumpTween,downTween,deltaTime,jumperBall,bulletInterval,obstaclesParent,previousTimeStamp,trailEffectBody,popedRotations,getPositionEntity,particleEffect,fireModeParticleEffect,controlAngle,camera,firstJumpTween,highScore,score,player,inputListener,playerPivot,reviveSpawnTween,fireModeTween,checkPointTrigger,previousAngle,currentAngle,gameOverLogo,menuHighScoreText,reviveButton,firstTouchImage,secondTouchImage,thirdTouchImage,gameOverUI,menuUI,retryButton,inGamePanel,levelProgressText,checkPointCounterText,menuLogo,checkPointPassCountText,adsTimerText,adsRemainCircle,adsTimerRunning,retryButtonWithoutADS,gameOverWithoutADS,rotationsForReviveBackup,checkpointCounter=0,scoreAdder=1,checkPointPassCount=0,scoreMultiplier=1,fireModeSpeed=0,fireModeTimer=.1,rotationCounter=0,rotations=[],levelCounter=0,difficultyLevel=0,colorChange=new pc.Color(.33,1,.2,1),feverMode=!1,canDeath=!0,fireMode=!1,reviveState=!1,revived=!1,firstClick=!1,firstJumpTweenStopped=!1,isMouseUp=!1,isClickable=!0,isGrounded=!0,mouseDown=!0,secondMouseDown=!1,firstTutorial=!1,secondTutorial=!1,triangleWeaponSpawned=!1,gameStarted=!1,gameOver=!1,tempVec=new pc.Vec3(0,0,0),app=pc.Application.getApplication(),smallTriangleObstacleTemplate=app.assets.find("Obstacle_SmallTrianglePivot"),mediumTriangleObstacleTemplate=app.assets.find("Obstacle_MediumTrianglePivot"),largeTriangleObstacleTemplate=app.assets.find("Obstacle_LargeTrianglePivot"),squareObstacleTemplate=app.assets.find("Obstacle_SquarePivot"),largeCircleObstacleTemplate=app.assets.find("Obstacle_LargeCirclePivot"),mediumCircleObstacleTemplate=app.assets.find("Obstacle_MediumCirclePivot"),smallCircleObstacleTemplate=app.assets.find("Obstacle_SmallCirclePivot"),rotaterWeaponTemplate=app.assets.find("Obstacle_TriangleWeaponPivot"),bulletTemplate=app.assets.find("Bullet"),trailEffect=app.assets.find("TrailEffect"),obstaclesParentTemplate=app.assets.find("ObstaclesParent"),getANumberBetween=(e,t)=>Math.floor(Math.random()*(t-e))+e,sleep=e=>new Promise(t=>setTimeout(t,e));window.famobi.onRequest("pauseGameplay",function(){pauseGame(),window.dirtyPause=!0}),window.famobi.onRequest("resumeGameplay",function(){window.dirtyPause=!1,startGame()});var ObstacleController=pc.createScript("obstacleController");ObstacleController.prototype.initialize=function(){this.entity.collision.on("collisionstart",this.onTriggerEnter,this)},ObstacleController.prototype.onTriggerEnter=async function(e){"Player"==e.other.name&&!feverMode&&canDeath&&(this.entity.enabled=!1,app.fire("input:off"),app.fire("game:over"))},pc.extend(pc,function(){var e=function(e){this._app=e,this._tweens=[],this._add=[]};e.prototype={add:function(e){return this._add.push(e),e},update:function(e){for(var t=0,n=this._tweens.length;t<n;)this._tweens[t].update(e)?t++:(this._tweens.splice(t,1),n--);if(this._add.length){for(let e=0;e<this._add.length;e++)this._tweens.indexOf(this._add[e])>-1||this._tweens.push(this._add[e]);this._add.length=0}}};var t=function(e,t,n){pc.events.attach(this),this.manager=t,n&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=e,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},n=function(e){var t;return e instanceof pc.Vec2?t={x:e.x,y:e.y}:e instanceof pc.Vec3?t={x:e.x,y:e.y,z:e.z}:e instanceof pc.Vec4||e instanceof pc.Quat?t={x:e.x,y:e.y,z:e.z,w:e.w}:e instanceof pc.Color?(t={r:e.r,g:e.g,b:e.b},void 0!==e.a&&(t.a=e.a)):t=e,t};t.prototype={to:function(e,t,i,a,o,r){return this._properties=n(e),this.duration=t,i&&(this.easing=i),a&&this.delay(a),o&&this.repeat(o),r&&this.yoyo(r),this},from:function(e,t,i,a,o,r){return this._properties=n(e),this.duration=t,i&&(this.easing=i),a&&this.delay(a),o&&this.repeat(o),r&&this.yoyo(r),this._from=!0,this},rotate:function(e,t,i,a,o,r){return this._properties=n(e),this.duration=t,i&&(this.easing=i),a&&this.delay(a),o&&this.repeat(o),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var e,t,n,i;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(e in this._properties)this._properties.hasOwnProperty(e)&&(this._sv[e]=this._properties[e],this._ev[e]=this.target[e]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),t=void 0!==this._properties.x?this._properties.x:this.target.x,n=void 0!==this._properties.y?this._properties.y:this.target.y,i=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(t,n,i))}else{for(e in this._properties)this._properties.hasOwnProperty(e)&&(this._sv[e]=this.target[e],this._ev[e]=this._properties[e]);this._slerp&&(t=void 0!==this._properties.x?this._properties.x:this.target.x,n=void 0!==this._properties.y?this._properties.y:this.target.y,i=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(t,n,i,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(t,n,i)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(e){return this._delay=e,this.pending=!0,this},repeat:function(e,t){return this._count=0,this._numRepeats=e,this._repeatDelay=t||0,this},loop:function(e){return e?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(e){return this._yoyo=e,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var e=arguments.length;e--;)e>0?arguments[e-1]._chained=arguments[e]:this._chained=arguments[e];return this},update:function(e){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=e*this.timeScale:this.time-=e*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var t=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(t=this.duration-this.time,this.time=0):(t=this.time-this.duration,this.time=this.duration));var n,i,a=0===this.duration?1:this.time/this.duration,o=this.easing(a);for(var r in this._properties)this._properties.hasOwnProperty(r)&&(n=this._sv[r],i=this._ev[r],this.target[r]=n+(i-n)*o);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,o),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",e),this.complete){var s=this._repeat(t);return s?this.fire("loop"):(this.fire("complete",t),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),s}return!0},_repeat:function(e){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-e:this.time=e,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var t in this._properties){var n=this._sv[t];this._sv[t]=this._ev[t],this._ev[t]=n}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var i=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},a=function(e){return 1-i(1-e)};return{TweenManager:e,Tween:t,Linear:function(e){return e},QuadraticIn:function(e){return e*e},QuadraticOut:function(e){return e*(2-e)},QuadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},CubicIn:function(e){return e*e*e},CubicOut:function(e){return--e*e*e+1},CubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},QuarticIn:function(e){return e*e*e*e},QuarticOut:function(e){return 1- --e*e*e*e},QuarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},QuinticIn:function(e){return e*e*e*e*e},QuinticOut:function(e){return--e*e*e*e*e+1},QuinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},SineIn:function(e){return 0===e?0:1===e?1:1-Math.cos(e*Math.PI/2)},SineOut:function(e){return 0===e?0:1===e?1:Math.sin(e*Math.PI/2)},SineInOut:function(e){return 0===e?0:1===e?1:.5*(1-Math.cos(Math.PI*e))},ExponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},ExponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},ExponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},CircularIn:function(e){return 1-Math.sqrt(1-e*e)},CircularOut:function(e){return Math.sqrt(1- --e*e)},CircularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},BackIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},BackOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},BackInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},BounceIn:a,BounceOut:i,BounceInOut:function(e){return e<.5?.5*a(2*e):.5*i(2*e-1)+.5},ElasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},ElasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},ElasticInOut:function(e){var t,n=.1,i=.4;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=i*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",function(e){this._tweenManager.update(e)})},pc.Application.prototype.tween=function(e){return new pc.Tween(e,this._tweenManager)},pc.Entity.prototype.tween=function(e,t){var n=this._app.tween(e);return n.entity=this,this.once("destroy",n.stop,n),t&&t.element&&(n.element=t.element),n};var e=pc.Application.getApplication();e&&e.addTweenManager()}();var StateController=pc.createScript("stateController");StateController.prototype.initialize=function(){StateController.instance=this,app.on("game:over",this.gameOverState,this)},StateController.prototype.update=function(){window.onfocus=function(){startGame()},window.onblur=function(){pauseGame()}},StateController.prototype.gameOverState=async function(){ScreenController.instance.soundController(),checkPointTrigger.enabled=!1,particleEffect.particlesystem.stop(),gameOver=!0,jumperBall&&jumperBall.stop(),rotationsForReviveBackup=[...rotations],gameStarted=!1,playerData.mute||(app.root.findByName("Player").sound.stop("DeathSound"),app.root.findByName("Player").sound.play("DeathSound")),await PlayerMovement.instance.gameOverPlayer(),adsTimerRunning=!0,this.gameOverPanel()},StateController.prototype.playGame=function(){firstClick||(window.famobi&&window.famobi_analytics.trackEvent("EVENT_LEVELSTART",{levelName:""}),ScreenController.instance.soundController(),firstClick=!0,gameOver=!1,gameStarted=!0,menuUI.enabled=!1,checkPointCounterText.enabled=!0,inGamePanel.enabled=!0,difficultyLevel=0,playerData.newPlayer?(LevelController.instance.createObstaclesParent(),LevelController.instance.tutorialLevelCreator()):(LevelController.instance.createObstaclesParent(),LevelController.instance.levelCreator()),particleEffect.enabled=!0,particleEffect.particlesystem.play(),player.sprite.play("Runner"),reviveState&&PlayerMovement.instance.playerReviveAnimation(),this.openFlag())},StateController.prototype.playRevive=function(){firstClick||(revived=!0,firstClick=!0,gameOver=!1,gameStarted=!0,menuUI.enabled=!1,checkPointCounterText.enabled=!0,inGamePanel.enabled=!0,particleEffect.enabled=!0,particleEffect.particlesystem.play(),player.sprite.play("Runner"),reviveState&&PlayerMovement.instance.playerReviveAnimation())},StateController.prototype.gameOverPanel=function(){window.famobi?window.famobi.hasFeature("rewarded")&&window.famobi.hasRewardedAd()?(retryButton.element.enabled=!1,reviveButton.element.opacity=1,reviveButton.button.active=!0):window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:parseInt(checkPointCounterText.element.text)}).then(function(){reviveButton.element.enabled=!1,reviveButton.button.active=!1,gameOverWithoutADS.enabled=!0,checkPointCounterText.enabled=!1,rotations=[],adsTimerRunning=!1,retryButton.element.enabled=!1}):(reviveButton.element.opacity=1,reviveButton.button.active=!0),reviveState?window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:parseInt(checkPointCounterText.element.text)}).then(function(){gameOverWithoutADS.enabled=!0,checkPointCounterText.enabled=!1,rotations=[],adsTimerRunning=!1}):(gameOverUI.enabled=!0,adsTimerText.enabled=!0,retryButton.enabled=!0,checkPointCounterText.enabled=!0,gameOverWithoutADS.enabled=!1,this.adsRemainTextStart()),inGamePanel.enabled=!1,score=checkPointCounterText.element.text,retryButton.button.once("click",()=>{this.retryButtonControl()},this),reviveButton.button.once("click",()=>{window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Result:Revive"}),adsTimerRunning=!1,window.famobi&&window.famobi.hasRewardedAd()?window.famobi.rewardedAd(function(e){e.rewardGranted&&StateController.instance.reviveAction()&&resumeGame()}):(resumeGame(),StateController.instance.reviveAction())},this),retryButtonWithoutADS.button.once("click",()=>{window.famobi.showInterstitialAd({eventId:"button:result:restart",callback:()=>{gameOverWithoutADS.enabled=!1,this.retryButtonControl()}})},this)},StateController.prototype.adsRemainTextStart=function(){rotations=[];for(let e=0;e<360;e++)rotations.push(e);rotations.sort((e,t)=>e-t),rotations=rotations.map(e=>e>=180?e-180:e+180),rotations.length;for(let e=rotations.length;e>0;e--)setTimeout(()=>{adsTimerRunning&&(rotations.pop(),adsTimerText.element.text=Math.floor(rotations.length/90)+1,0==rotations.length&&window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:parseInt(checkPointCounterText.element.text)}).then(function(){gameOverWithoutADS.enabled=!0,checkPointCounterText.enabled=!1,adsTimerRunning=!1,adsTimerText.element.text="",reviveButton.element.enabled=!1}))},22.5*e)},StateController.prototype.retryButtonControl=function(){ScreenController.instance.highScoreController(),Promise.all([window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:"",reason:"dead"}),window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:parseInt(checkPointCounterText.element.text)})]).then(()=>{this.retryButtonAction()})},StateController.prototype.retryButtonAction=function(){adsTimerText.enabled=!1,retryButton.element.enabled=!0,reviveButton.element.enabled=!0,adsTimerRunning=!1,revived=!1,ScreenController.instance.soundController(),checkPointTrigger.enabled=!1,checkPointPassCountText.element.text=0,checkPointPassCount=0,scoreMultiplier=1,scoreAdder=1,rotations=[],currentAngle=void 0,previousAngle=void 0,firstClick=!1,reviveState=!1,Rotater.instance.setDefaultSpeed(),ScreenController.instance.clearScreen(),LevelController.instance.destroyAllObstacles(),LevelController.instance.changeCircleBackground(),PlayerMovement.instance.setIdle(),menuUI.enabled=!0,menuLogo.enabled=!0,checkPointCounterText.enabled=!1,inGamePanel.enabled=!1,gameStarted=!1,retryButton.enabled=!1,levelCounter=0,checkpointCounter=0,difficultyLevel=0},StateController.prototype.reviveAction=function(){rotations=[],rotations=[...rotationsForReviveBackup],retryButtonWithoutADS.button.off("click"),adsTimerRunning=!1,adsTimerText.enabled=!1,ScreenController.instance.soundController(),ScreenController.instance.highScoreController(),reviveState=!0,firstClick=!1,gameOverUI.enabled=!1,menuLogo.enabled=!1,menuUI.enabled=!0,checkPointCounterText.enabled=!0,PlayerMovement.instance.setIdle(),this.openFlag()},StateController.prototype.checkPointCounterEffect=function(){checkPointCounterText.tween(checkPointCounterText.getLocalScale()).to(new pc.Vec3(1.2,1.2,1.2),.1,pc.Linear).repeat(2).yoyo(!0).start()},StateController.prototype.openFlag=async function(){await sleep(200),checkPointTrigger.enabled=!0};var ScreenController=pc.createScript("screenController");ScreenController.prototype.initialize=function(){ScreenController.instance=this,this.findEntitites(),this.soundController()},ScreenController.prototype.soundController=function(){window.famobi.hasFeature("external_mute")?(app.root.findByName("muteButton").findByName("mute").enabled=!1,app.root.findByName("muteButton").findByName("unmute").enabled=!1):playerData.mute?(app.root.findByName("muteButton").findByName("mute").enabled=!1,app.root.findByName("muteButton").findByName("unmute").enabled=!0):(app.root.findByName("muteButton").findByName("mute").enabled=!0,app.root.findByName("muteButton").findByName("unmute").enabled=!1)},ScreenController.prototype.clearScreen=function(){this.setDefaultValues()},ScreenController.prototype.setDefaultValues=function(){gameOverUI.enabled=!1,rotations=[],checkPointCounterText.element.text=0},ScreenController.prototype.highScoreController=function(){Math.ceil(checkpointCounter)>playerData.highScore&&(playerData.highScore=Math.ceil(checkpointCounter),updatePlayerData(),menuHighScoreText.element.text="High Score : "+playerData.highScore)},ScreenController.prototype.findEntitites=function(){gameOverUI=app.root.findByName("GameOver"),retryButton=app.root.findByName("RetryButton"),inGamePanel=app.root.findByName("InGamePanel"),menuUI=app.root.findByName("Menu"),menuHighScoreText=app.root.findByName("menuHighScoreText"),inputListener=app.root.findByName("InputListener"),reviveButton=app.root.findByName("ReviveButton"),firstTouchImage=app.root.findByName("FirstTouchImage"),secondTouchImage=app.root.findByName("SecondTouchImage"),thirdTouchImage=app.root.findByName("ThirdTouchImage"),playerPivot=app.root.findByName("PlayerPivot"),checkPointTrigger=app.root.findByName("CheckpointTrigger"),checkPointPassCountText=app.root.findByName("CheckPointPassCountText"),fireModeParticleEffect=app.root.findByName("FireModRunnerParticle"),menuHighScoreText.element.text="High Score : "+playerData.highScore};var ObstacleSpawner=pc.createScript("obstacleSpawner");ObstacleSpawner.prototype.initialize=function(){ObstacleSpawner.instance=this,app.on("game:over",()=>{null!=bulletInterval&&clearInterval(bulletInterval)},this)},ObstacleSpawner.prototype.createObstacle=function(e,t,n,i,a,o,r){let s=app.assets.find(e.name).resource.instantiate();if(s.reparent(app.root.findByName("ObstaclesParent")),s.setEulerAngles(new pc.Vec3(0,0,i)),1==a&&(s.findByName("Type").element.text="rotate"),s.findByName("Direction").element.text=-1==n?"left":"right",s.findByName("SleepTime").element.text=r,"Obstacle_SmallCirclePivot"!==s.name&&"Obstacle_MediumCirclePivot"!==s.name&&"Obstacle_LargeCirclePivot"!==s.name||this.applyJumpAnimation(s.findByName("Obstacle"),o),this.applySpawnAnimation(s.findByName("Obstacle"),t),"Obstacle_TriangleWeaponPivot"===s.name){let e=this,t="fire";setInterval(async function(){!gameOver&&e.fireBullet(t,s,i),await sleep(r),t="noFire"},o)}},ObstacleSpawner.prototype.applySpawnAnimation=function(e,t){let n=new pc.Color(1,1,1/255,1/255);app.tween(n).to(new pc.Color(0,0,0,0),.1,pc.Linear).yoyo(!0).repeat(5).on("update",function(){e.element&&(e.element.color=n)}).on("complete",()=>{e.rigidbody&&(e.rigidbody.enabled=!0)}).start()},ObstacleSpawner.prototype.applyJumpAnimation=function(e,t){let n=null;e.parent.name.includes("Obstacle_SmallCirclePivot")&&(n=-30),e.parent.name.includes("Obstacle_MediumCirclePivot")&&(n=-28),e.parent.name.includes("Obstacle_LargeCirclePivot")&&(n=-20),jumperBall=e.tween(e.getLocalPosition()).to(new pc.Vec3(0,n,0),1,pc.ElasticInOut).yoyo(!0).loop(!0),jumperBall.start()},ObstacleSpawner.prototype.fireBullet=function(e,t,n){if("fire"==e&&!gameOver){let e=bulletTemplate.resource.instantiate();e.reparent(t),e.setEulerAngles(new pc.Vec3(0,0,n))}};var PhysicsLayer=pc.createScript("physicsLayer");PhysicsLayer.attributes.add("groupA",{type:"boolean",default:!1,title:"Group A"}),PhysicsLayer.attributes.add("groupB",{type:"boolean",default:!1,title:"Group B"}),PhysicsLayer.attributes.add("groupC",{type:"boolean",default:!1,title:"Group C"}),PhysicsLayer.attributes.add("groupD",{type:"boolean",default:!1,title:"Group D"}),PhysicsLayer.attributes.add("maskAll",{type:"boolean",default:!0,title:"Mask All"}),PhysicsLayer.attributes.add("maskA",{type:"boolean",default:!1,title:"Mask A"}),PhysicsLayer.attributes.add("maskB",{type:"boolean",default:!1,title:"Mask B"}),PhysicsLayer.attributes.add("maskC",{type:"boolean",default:!1,title:"Mask C"}),PhysicsLayer.attributes.add("maskD",{type:"boolean",default:!1,title:"Mask D"}),PhysicsLayer.prototype.initialize=function(){var e=this.entity.rigidbody;this.groupA&&(e.group|=pc.BODYGROUP_USER_1),this.groupB&&(e.group|=pc.BODYGROUP_USER_2),this.groupC&&(e.group|=pc.BODYGROUP_USER_3),this.groupD&&(e.group|=pc.BODYGROUP_USER_4),e.mask=pc.BODYGROUP_TRIGGER,this.maskAll&&(e.mask|=pc.BODYMASK_ALL),this.maskA&&(e.mask|=pc.BODYGROUP_USER_1),this.maskB&&(e.mask|=pc.BODYGROUP_USER_2),this.maskC&&(e.mask|=pc.BODYGROUP_USER_3),this.maskD&&(e.mask|=pc.BODYGROUP_USER_4)};var LevelLoader=pc.createScript("levelLoader");LevelLoader.prototype.initialize=function(){LevelLoader.instance=this},LevelLoader.prototype.LoadLevel=function(e){var t=this.app.scenes.find(e),n=this.entity;this.app.scenes.loadSceneHierarchy(t.url,function(e,t){e?callback(e):n.destroy()},this)},LevelLoader.prototype.loadScene=function(e,t,n,i){var a=pc.Application.getApplication(),o=a.scenes.find(e);if(o){var r=o.loaded;a.scenes.loadSceneData(o,function(e,o){if(e)n&&n.call(i,e);else{for(var s=null,l=a.root.children;l.length>0;)l[0].destroy();t.settings&&a.scenes.loadSceneSettings(o,function(e){e&&n&&n.call(i,e)}),t.hierarchy&&a.scenes.loadSceneHierarchy(o,function(e,t){e?n&&n(e):s=t}),r||a.scenes.unloadSceneData(o),n&&n.call(i,null,s)}})}else n&&n.call(i,"Scene not found: "+e)};var LevelController=pc.createScript("levelController");LevelController.attributes.add("difficultyLevels",{type:"json",schema:[{name:"obstacles",type:"asset",array:!0},{name:"obstacleSpawnTime",type:"number"},{name:"obstacleSpawnDelay",type:"number"},{name:"obstacleSpawnAngle",type:"number",array:!0},{name:"isRotate",type:"number",enum:[{rotate:1},{noRotate:0}],array:!0},{name:"direction",type:"number",enum:[{Left:-1},{Right:1}],array:!0},{name:"sleepTime",type:"number",array:!0},{name:"bulletSpeed",type:"number"}],array:!0}),LevelController.prototype.initialize=function(){LevelController.instance=this,getPositionEntity=this.entity.findByName("getPositionEntity"),this.changeCircleBackground()},LevelController.prototype.levelCreator=async function(){for(let e=0;e<this.difficultyLevels[difficultyLevel].obstacles.length;e++)if(!gameOver){let t=this.difficultyLevels[difficultyLevel].obstacles[e],n=this.difficultyLevels[difficultyLevel].obstacleSpawnTime,i=this.difficultyLevels[difficultyLevel].obstacleSpawnDelay,a=this.difficultyLevels[difficultyLevel].direction[e],o=this.difficultyLevels[difficultyLevel].obstacleSpawnAngle[e],r=this.difficultyLevels[difficultyLevel].isRotate[e],s=this.difficultyLevels[difficultyLevel].bulletSpeed,l=this.difficultyLevels[difficultyLevel].sleepTime[e];ObstacleSpawner.instance.createObstacle(t,n,a,o,r,s,l),await sleep(i)}},LevelController.prototype.destroyAllObstacles=function(){app.root.forEach(e=>{"ObstaclesParent"===e.name&&e.destroy()})},LevelController.prototype.createObstaclesParent=function(){obstaclesParentTemplate.resource.instantiate().reparent(app.root.findByName("Root"))},LevelController.prototype.changeCircleBackground=function(){let e=circleColors[getANumberBetween(0,5)];app.root.findByName("Circle").element.color=new pc.Color(e.r,e.g,e.b,1)},LevelController.prototype.tutorialLevelCreator=function(){this.firstSmallTriangleObstacle=smallTriangleObstacleTemplate.resource.instantiate(),this.firstSmallTriangleObstacle.reparent(app.root.findByName("ObstaclesParent")),this.firstSmallTriangleObstacle.setLocalEulerAngles(0,0,100),this.secondSmallTriangleObstacle=largeTriangleObstacleTemplate.resource.instantiate(),
this.secondSmallTriangleObstacle.reparent(app.root.findByName("ObstaclesParent")),this.secondSmallTriangleObstacle.setLocalEulerAngles(0,0,185)};var Input=pc.createScript("input");Input.prototype.initialize=function(){this.inputOn(),window.addEventListener("contextmenu",function(e){e.preventDefault()})},Input.prototype.inputOn=function(){app.touch?(inputListener.element.on(pc.EVENT_TOUCHSTART,this.mouseDown,this),inputListener.element.on(pc.EVENT_TOUCHEND,function(e){e.event.preventDefault()})):app.mouse&&inputListener.element.on(pc.EVENT_MOUSEDOWN,this.mouseDown,this)},Input.prototype.mouseDown=function(e){window.dirtyPause||PlayerMovement.instance.mouseDown(e)};var ParentRotater=pc.createScript("parentRotater");ParentRotater.prototype.initialize=function(){this.killable=!1,this.kill()},ParentRotater.prototype.update=function(e){(Math.abs(this.entity.getEulerAngles().z%360-popedRotations)<1||Math.abs(this.entity.getEulerAngles().z%360+360-popedRotations)<1)&&(this.tweenToCenter(this.entity.findByName("AddedScore")),this.entity.findByName("Obstacle").enabled=!1,this.entity.findByName("Explosion")&&this.entity.findByName("Explosion").particlesystem.play()),feverMode&&!this.killable?this.entity.findByName("Obstacle").element.color=new pc.Color(.33,1,.2,1):feverMode||this.killable||(this.entity.findByName("Obstacle").element.color=new pc.Color(0,0,0,1)),"rotate"===this.entity.findByName("Type").element.text&&!gameOver&&gameStarted?"left"==this.entity.findByName("Direction").element.text?this.entity.rotateLocal(0,0,25*e):"right"==this.entity.findByName("Direction").element.text&&this.entity.rotateLocal(0,0,-25*e):this.entity.rotate(0,0,0)},ParentRotater.prototype.kill=async function(){await sleep(100);let e=this.entity.findByName("SleepTime").element.text,t=this;if(e>0){let n=setInterval(async()=>{!gameOver&&gameStarted&&(await sleep(e/2),this.killable=!0,t.killAnimation(),clearInterval(n))},e)}},ParentRotater.prototype.killAnimation=function(){let e=new pc.Color(1,0,0,1),t=this;app.tween(e).to(new pc.Color(0,0,0,0),.15,pc.Linear).yoyo(!0).repeat(3).on("update",()=>{t.entity.findByName("Obstacle")&&(t.entity.findByName("Obstacle").element.color=e)}).on("complete",()=>{t.entity.destroy()}).start()},ParentRotater.prototype.tweenToCenter=function(e){e&&(e.setLocalPosition(0,-50,0),e.element.text=" ",e.element.opacity=1,checkpointCounter+=scoreAdder,e.element.text="+ "+Math.ceil(scoreAdder),e.tween(e.getLocalPosition()).to(new pc.Vec3(0,-25,0),3,pc.SineOut).start(),app.tween(e.element).to({opacity:0},3,pc.BackOut).start())};var Tutorial=pc.createScript("tutorial");Tutorial.prototype.initialize=function(){this.setTutorial()},Tutorial.prototype.setTutorial=function(e){if("MenuTutorialFinger"===this.entity.name)this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(.8,.8,1),.6,pc.Linear).loop(!0).yoyo(!0).start(),app.tween(firstTouchImage.element).to({opacity:1},.6,pc.Linear).yoyo(!0).loop(!0).start();else if("TutorialFirstFinger"===this.entity.name)this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(.8,.8,1),1,pc.Linear).loop(!0).yoyo(!0).start(),app.tween(secondTouchImage.element).to({opacity:1},1,pc.Linear).yoyo(!0).loop(!0).start();else if("TutorialSecondFinger"===this.entity.name){thirdTouchImage.enabled=!0;let e=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(.8,.8,1),.3,pc.Linear).loop(!0).repeat(2).on("complete",()=>{t.start()}).yoyo(!0).start(),t=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(.8,.8,1),.3,pc.Linear).loop(!0).repeat(2).on("complete",()=>{e.start()}).delay(1).yoyo(!0)}};var Bullet=pc.createScript("bullet");Bullet.prototype.initialize=function(){this.entity.rigidbody.applyImpulse(this.entity.up.mulScalar(20)),this.killBullet()},Bullet.prototype.killBullet=async function(){await sleep(3e3),this.entity.destroy()};var StartGame=pc.createScript("startGame");StartGame.prototype.initialize=function(){this.levelCounterDetector(),menuLogo=app.root.findByName("LOGO"),camera=app.root.findByName("Camera"),gameOverLogo=app.root.findByName("GameOverLogo"),adsTimerText=app.root.findByName("adsRemainTimer"),adsRemainCircle=app.root.findByName("CircleRadial"),retryButtonWithoutADS=app.root.findByName("RetryButtonWithoutADS"),checkPointCounterText=app.root.findByName("CheckpointCounterText"),player=app.root.findByName("Player"),gameOverWithoutADS=app.root.findByName("GameOverWithoutADS"),StartGame.instance=this;let e=this;this.screenResizer(),window.addEventListener("resize",()=>{e.screenResizer()})},StartGame.prototype.screenResizer=function(){let e=window.visualViewport.width/window.visualViewport.height;e<.4&&(camera.camera.orthoHeight=150,menuLogo.element.width=486,menuLogo.element.height=220,checkPointCounterText.element.minFontSize=160,checkPointCounterText.element.maxFontSize=160,gameOverLogo.element.width=774,gameOverLogo.element.height=99,gameOverLogo.setLocalPosition(new pc.Vec3(0,-200,0))),e>.4&&e<.5&&(camera.camera.orthoHeight=130,menuLogo.element.width=486,menuLogo.element.height=220,checkPointCounterText.element.minFontSize=160,checkPointCounterText.element.maxFontSize=160,gameOverLogo.element.width=774,gameOverLogo.element.height=99,gameOverLogo.setLocalPosition(new pc.Vec3(0,-200,0))),e>.5&&e<.6&&(camera.camera.orthoHeight=120,menuLogo.element.width=486,menuLogo.element.height=220,checkPointCounterText.element.minFontSize=160,checkPointCounterText.element.maxFontSize=160,gameOverLogo.element.width=774,gameOverLogo.element.height=99,gameOverLogo.setLocalPosition(new pc.Vec3(0,-200,0))),e>.6&&e<1&&(camera.camera.orthoHeight=110,menuLogo.element.width=486,menuLogo.element.height=220,checkPointCounterText.element.minFontSize=160,checkPointCounterText.element.maxFontSize=160,gameOverLogo.element.width=774,gameOverLogo.element.height=99,gameOverLogo.setLocalPosition(new pc.Vec3(0,-200,0))),e>1&&e<1.7&&(camera.camera.orthoHeight=100,menuLogo.element.width=270,menuLogo.element.height=122,checkPointCounterText.element.minFontSize=100,checkPointCounterText.element.maxFontSize=100,gameOverLogo.element.width=516,gameOverLogo.element.height=66,gameOverLogo.setLocalPosition(new pc.Vec3(0,-125,0)))},StartGame.prototype.levelCounterDetector=function(){playerData.newPlayer||(levelCounter=0,checkpointCounter=0)};var MuteButton=pc.createScript("muteButton");MuteButton.prototype.initialize=function(){this.entity.button.on("click",()=>{playerData.mute?(playerData.mute=!1,updatePlayerData(),this.entity.findByName("mute").enabled=!1,this.entity.findByName("unmute").enabled=!0,ScreenController.instance.soundController()):(playerData.mute=!0,updatePlayerData(),this.entity.findByName("mute").enabled=!0,this.entity.findByName("unmute").enabled=!1,ScreenController.instance.soundController())})};var SettingsButton=pc.createScript("settingsButton");SettingsButton.prototype.initialize=function(){this.open=!1;let e=this.entity.findByName("muteButton"),t=e.findByName("mute"),n=e.findByName("unmute");t.element.opacity=0,n.element.opacity=0,this.entity.button.on("click",async()=>{this.open?(await sleep(150),e.button.active=!1,this.entity.findByName("image").tween(this.entity.getLocalEulerAngles()).rotate({x:0,y:0,z:-45},.3,pc.Linear).start(),app.tween(t.element).to({opacity:0},.3,pc.Linear).start(),app.tween(n.element).to({opacity:0},.3,pc.Linear).start(),e.tween(e.getLocalPosition()).to({x:0,y:0,z:0},.3,pc.Linear).start(),this.open=!1):(this.entity.findByName("image").tween(this.entity.getLocalEulerAngles()).rotate({x:0,y:0,z:45},.3,pc.Linear).start(),app.tween(t.element).to({opacity:1},.3,pc.Linear).start(),app.tween(n.element).to({opacity:1},.3,pc.Linear).start(),e.tween(e.getLocalPosition()).to({x:-100,y:0,z:0},.3,pc.Linear).start(),e.button.active=!0,this.open=!0)}),this.on("disable",()=>{t.element.opacity=0,n.element.opacity=0,this.open=!1,e.setLocalPosition(tempVec.set(0,0,0))}),playerData.mute?(this.entity.findByName("mute").enabled=!0,this.entity.findByName("unmute").enabled=!1):(this.entity.findByName("mute").enabled=!1,this.entity.findByName("unmute").enabled=!0)};class PlayerData{constructor(){this.newPlayer=!0,this.mute=!1,this.highScore=0}}getPlayerData(),function(){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="canvas{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:0;-webkit-tap-highlight-color:rgba(255,255,255,0)}body{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:0}"}();var CheckPointTrigger=pc.createScript("checkPointTrigger");CheckPointTrigger.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},CheckPointTrigger.prototype.onTriggerEnter=function(e){"Player"===e.name&&(checkPointPassCount++,this.effectToCheckPointFlag(),scoreAdder++,checkpointCounter++,checkPointCounterText.element.text=Math.ceil(checkpointCounter),window.famobi&&window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:Math.floor(checkPointCounterText.element.text)}),levelCounter++,scoreMultiplier+=.25,difficultyLevel++,difficultyLevel>=30&&(difficultyLevel=15,levelCounter=15),LevelController.instance.levelCreator(),Rotater.instance.addSpeed(),playerData.newPlayer&&this.deleteTutorialScene())},CheckPointTrigger.prototype.effectToCheckPointFlag=function(){checkPointPassCountText.element.text=checkPointPassCount,app.root.findByName("Flag").tween(app.root.findByName("Flag").getLocalScale()).to(new pc.Vec3(1.4,1.4,1.4),.1,pc.Linear).repeat(2).yoyo(!0).start()},CheckPointTrigger.prototype.deleteTutorialScene=function(){LevelController.instance.firstSmallTriangleObstacle.destroy(),LevelController.instance.secondSmallTriangleObstacle.destroy(),playerData.newPlayer=!1,updatePlayerData()},pc.script.createLoadingScreen(function(e){var t,n;t=["body {","    background-color: #000;","    touch-action: none","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #000;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    width: 100%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 7px;","    border-radius: 60px 60px 60px 60px;","    width: 100%;","    background-color: #1d292c;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    border-radius: 60px 60px 60px 60px;","    background-color: #b60000;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(n=document.createElement("style")).type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.head.appendChild(n),function(){var t=document.createElement("div");t.id="application-splash-wrapper",document.body.appendChild(t);var n=document.createElement("div");n.id="application-splash",t.appendChild(n),n.style.display="none";var i=document.createElement("div");i.id="progress-bar-container",n.appendChild(i);var a=document.createElement("div");a.id="progress-bar",i.appendChild(a),e.once("preload:start",function(){var t=document.createElement("img");t.src=e.assets.find("tiplay_white.png","texture").getFileUrl(),n.insertBefore(t,i),t.onload=function(){n.style.display="block"}})}(),e.on("preload:end",function(){e.off("preload:progress")}),e.on("preload:progress",function(e){window.famobi&&window.famobi.setPreloadProgress(100*e);var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%"),document.getElementById("progress-text")&&(e=Math.min(1,Math.max(0,e)),document.getElementById("progress-text").innerHTML=100*+e.toFixed(2)+"%")}),e.on("start",()=>{setTimeout(()=>{var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e),window.famobi&&window.famobi.gameReady()},"1000")})});var SoundController=pc.createScript("soundController");SoundController.prototype.initialize=function(){this.muteButton=this.entity.parent.findByName("mute"),this.unmuteButton=this.entity.parent.findByName("unmute"),"mute"===this.entity.name?this.entity.button.on("click",()=>{this.entity.enabled=!1,this.unmuteButton.enabled=!0,window.dirtyMute?playerData.mute=window.dirtyMute:playerData.mute=!0,updatePlayerData(),window.famobi&&window.famobi.localStorage.setItem("muted",!0),ScreenController.instance.soundController()}):"unmute"===this.entity.name&&this.entity.button.on("click",()=>{this.entity.enabled=!1,this.muteButton.enabled=!0,window.dirtyMute?playerData.mute=window.dirtyMute:playerData.mute=!1,updatePlayerData(),ScreenController.instance.soundController(),window.famobi&&window.famobi.localStorage.removeItem("muted")}),window.dirty=this,window.dirtyRequests||(window.famobi.onRequest("enableAudio",function(){window.dirty.entity.enabled=!1,window.dirty.muteButton.enabled=!0,playerData.mute=!1,window.dirtyMute=!1,updatePlayerData(),ScreenController.instance.soundController(),window.famobi&&window.famobi.localStorage.removeItem("muted")}),window.famobi.onRequest("disableAudio",function(){window.dirty.unmuteButton.enabled=!0,playerData.mute=!0,window.dirtyMute=!0,updatePlayerData(),window.famobi&&window.famobi.localStorage.setItem("muted",!0),ScreenController.instance.soundController()})),window.dirtyRequests=!0};var AddScoreFromObstaclePass=pc.createScript("addScoreFromObstaclePass");AddScoreFromObstaclePass.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},AddScoreFromObstaclePass.prototype.onTriggerEnter=async function(e){"Player"!==e.name||gameOver||(("Obstacle_SmallTrianglePivot"===this.entity.parent.parent.name||"Obstacle_MediumTrianglePivot"===this.entity.parent.parent.name||"Obstacle_LargeTrianglePivot"===this.entity.parent.parent.name||"Obstacle_SmallCirclePivot"===this.entity.parent.parent.name||"Obstacle_MediumCirclePivot"===this.entity.parent.parent.name||"Obstacle_LargeCirclePivot"===this.entity.parent.parent.name||"Obstacle_SquarePivot"===this.entity.parent.parent.name||"Bullet"===this.entity.parent.parent.name)&&(checkpointCounter+=scoreAdder,this.tweenToCenter(this.entity.parent.parent.findByName("AddedScore"),scoreAdder)),checkPointCounterText.element.text=Math.ceil(checkpointCounter),window.famobi&&window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:Math.floor(checkPointCounterText.element.text)}),StateController.prototype.checkPointCounterEffect())},AddScoreFromObstaclePass.prototype.tweenToCenter=function(e,t){e.setLocalPosition(0,-50,0),e.element.text=" ",e.element.opacity=1,e.element.text="+ "+Math.ceil(t.toFixed()),e.tween(e.getLocalPosition()).to(new pc.Vec3(0,-25,0),3,pc.SineOut).start(),app.tween(e.element).to({opacity:0},3,pc.BackOut).start()};var Trail=pc.createScript("trail");Trail.prototype.initialize=async function(){Trail.instance=this,await sleep(0),this.maincanvas=document.getElementById("application-canvas"),this.secondCanvas=document.createElement("CANVAS"),document.body.appendChild(this.secondCanvas),this.ctx=this.secondCanvas.getContext("2d"),this.secondCanvas.width=this.maincanvas.width,this.secondCanvas.height=this.maincanvas.height,this.center=camera.camera.worldToScreen(pc.Vec3.ZERO),this.radius=Math.abs(this.center.y-camera.camera.worldToScreen(this.entity.getPosition()).y),this.ctx.strokeStyle="white",this.ctx.lineWidth=5,window.addEventListener("resize",async()=>{await sleep(0),this.secondCanvas.width=this.maincanvas.width,this.secondCanvas.height=this.maincanvas.height,this.center=camera.camera.worldToScreen(pc.Vec3.ZERO),this.radius=Math.abs(this.center.y-camera.camera.worldToScreen(this.entity.getPosition()).y),this.ctx.strokeStyle="white",this.ctx.lineWidth=5})},Trail.prototype.update=function(e){this.ctx&&this.ctx.clearRect(0,0,canvas.width,canvas.height),rotations.forEach(e=>{this.ctx.beginPath(),this.ctx.arc(this.center.x,this.center.y,this.radius,Math.PI/2-(e+.75)*Math.PI/180,Math.PI/2-(e-.75)*Math.PI/180),this.ctx.stroke(),this.ctx.closePath()})},Trail.prototype.trailColorEffect=async function(){this.ctx.strokeStyle="#54ff00"},Trail.prototype.useEffect=function(){"#54ff00"===this.ctx.strokeStyle?this.ctx.strokeStyle="white":this.ctx.strokeStyle="#54ff00"},Trail.prototype.defaultColor=function(){this.ctx.strokeStyle="white"};let circleColors=[{r:.87,g:.7,b:1},{r:1,g:.7,b:.7},{r:.7,g:1,b:.77},{r:.9,g:.7,b:1},{r:1,g:.7,b:.71},{r:.89,g:1,b:.9}];var TutorialStopTriggers=pc.createScript("tutorialStopTriggers");TutorialStopTriggers.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},TutorialStopTriggers.prototype.onTriggerEnter=async function(e){"Player"===e.name&&playerData.newPlayer&&("FirstStop"===this.entity.name?(app.root.findByName("firstJumpTutorial").enabled=!0,firstTutorial=!0):(app.root.findByName("doubleJumpTutorial").enabled=!0,secondTutorial=!0),this.entity.enabled=!1)};var ProgressRadialFamobi=pc.createScript("progressRadialFamobi");ProgressRadialFamobi.prototype.initialize=function(){ProgressRadialFamobi.instance=this,this.progressStatusActive=!0,this._element=this.entity.element,this._element.material=this._element.material.clone()},ProgressRadialFamobi.prototype.setProgress=function(e){e=pc.math.clamp(e,0,1),this._progress=e,this._element.material.alphaTest=e+.001},ProgressRadialFamobi.prototype.update=function(e){this.progressStatusActive&&(this._progress<1?(this._progress>.25&this._progress<=.5?adsTimerText.element.text=3:this._progress>.5&this._progress<=.75?adsTimerText.element.text=2:this._progress>.75&this._progress<=1&&(adsTimerText.element.text=1),this.setProgress(this._progress+.1*e)):(StateController.instance.retryButtonControl(),adsTimerText.element.text=4,this.progressStatusActive=!1))};