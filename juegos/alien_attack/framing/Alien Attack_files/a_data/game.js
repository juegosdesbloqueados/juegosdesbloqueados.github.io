(()=>{var Uo={566:ct=>{(function(rt,Gt){ct.exports=Gt()})(window,function(){return Zt={},rt.m=Gt=[function(d,w){function e(r,o,i,s){for(var a in o)if(o.hasOwnProperty(a)){var u=(f=o,g=a,T=v=void 0,T=(p=i)?f[g]:Object.getOwnPropertyDescriptor(f,g),!p&&T.value&&typeof T.value=="object"&&(T=T.value),!(!T||!((v=T).get&&typeof v.get=="function"||v.set&&typeof v.set=="function"))&&(T.enumerable===void 0&&(T.enumerable=!0),T.configurable===void 0&&(T.configurable=!0),T));if(u!==!1){if(l=(s||r).prototype,c=a,h=void 0,(h=Object.getOwnPropertyDescriptor(l,c))&&(h.value&&typeof h.value=="object"&&(h=h.value),h.configurable===!1)){if(t.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,a,u)}else r.prototype[a]=o[a]}var l,c,h,f,g,p,v,T}function n(r,o){if(o){Array.isArray(o)||(o=[o]);for(var i=0;i<o.length;i++)e(r,o[i].prototype||o[i])}}function t(r){var o,i,s;if((r=r||{}).initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");s=r.initialize,delete r.initialize}else s=r.Extends?(i=r.Extends,function(){i.apply(this,arguments)}):function(){};r.Extends?(s.prototype=Object.create(r.Extends.prototype),s.prototype.constructor=s,o=r.Extends,delete r.Extends):s.prototype.constructor=s;var a=null;return r.Mixins&&(a=r.Mixins,delete r.Mixins),n(s,a),e(s,r,!0,o),s}t.extend=e,t.mixin=n,t.ignoreFinals=!1,d.exports=t},function(d,w){d.exports=function(){}},function(d,w){d.exports=function(e,n,t){var r=typeof e;return e&&r!="number"&&r!="string"&&e.hasOwnProperty(n)&&e[n]!==void 0?e[n]:t}},function(d,w,e){var n=e(0),t=e(35),r=new n({initialize:function(o,i){o===void 0&&(o=0),i===void 0&&(i=o),this.type=t.POINT,this.x=o,this.y=i},setTo:function(o,i){return o===void 0&&(o=0),i===void 0&&(i=o),this.x=o,this.y=i,this}});d.exports=r},function(d,w,e){var n=e(0),t=e(96),r=new n({initialize:function(o,i){this.x=0,this.y=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0):(i===void 0&&(i=o),this.x=o||0,this.y=i||0)},clone:function(){return new r(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,i){return i===void 0&&(i=o),this.x=o,this.y=i,this},setTo:function(o,i){return this.set(o,i)},setToPolar:function(o,i){return i==null&&(i=1),this.x=Math.cos(o)*i,this.y=Math.sin(o)*i,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,i){return t(this.x,o.x,i)&&t(this.y,o.y,i)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var i=o.x-this.x,s=o.y-this.y;return Math.sqrt(i*i+s*s)},distanceSq:function(o){var i=o.x-this.x,s=o.y-this.y;return i*i+s*s},length:function(){var o=this.x,i=this.y;return Math.sqrt(o*o+i*i)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,i=this.y;return o*o+i*i},normalize:function(){var o=this.x,i=this.y,s=o*o+i*i;return 0<s&&(s=1/Math.sqrt(s),this.x=o*s,this.y=i*s),this},normalizeRightHand:function(){var o=this.x;return this.x=-1*this.y,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=-1*o,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,i){i===void 0&&(i=0);var s=this.x,a=this.y;return this.x=s+i*(o.x-s),this.y=a+i*(o.y-a),this},transformMat3:function(o){var i=this.x,s=this.y,a=o.val;return this.x=a[0]*i+a[3]*s+a[6],this.y=a[1]*i+a[4]*s+a[7],this},transformMat4:function(o){var i=this.x,s=this.y,a=o.val;return this.x=a[0]*i+a[4]*s+a[12],this.y=a[1]*i+a[5]*s+a[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var i=this.length();return i&&o<i&&this.scale(o/i),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var i=Math.cos(o),s=Math.sin(o);return this.set(i*this.x-s*this.y,s*this.x+i*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),d.exports=r},function(d,w){d.exports=function(e,n,t){if(e&&typeof e!="number"){if(e.hasOwnProperty(n))return e[n];if(n.indexOf(".")===-1)return t;for(var r=n.split("."),o=e,i=t,s=0;s<r.length;s++){if(!o.hasOwnProperty(r[s])){i=t;break}i=o[r[s]],o=o[r[s]]}return i}return t}},function(d,w,e){"use strict";var n=Object.prototype.hasOwnProperty,t="~";function r(){}function o(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function i(u,l,c,h,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new o(c,h||u,f),p=t?t+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],g]:u._events[p].push(g):(u._events[p]=g,u._eventsCount++),u}function s(u,l){--u._eventsCount==0?u._events=new r:delete u._events[l]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1)),a.prototype.eventNames=function(){var u,l,c=[];if(this._eventsCount===0)return c;for(l in u=this._events)n.call(u,l)&&c.push(t?l.slice(1):l);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(u){var l=t?t+u:u,c=this._events[l];if(!c)return[];if(c.fn)return[c.fn];for(var h=0,f=c.length,g=new Array(f);h<f;h++)g[h]=c[h].fn;return g},a.prototype.listenerCount=function(u){var l=t?t+u:u,c=this._events[l];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,l,c,h,f,g){var p=t?t+u:u;if(!this._events[p])return!1;var v,T=this._events[p],E=arguments.length;if(T.fn){switch(T.once&&this.removeListener(u,T.fn,void 0,!0),E){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,l),!0;case 3:return T.fn.call(T.context,l,c),!0;case 4:return T.fn.call(T.context,l,c,h),!0;case 5:return T.fn.call(T.context,l,c,h,f),!0;case 6:return T.fn.call(T.context,l,c,h,f,g),!0}for(C=1,v=new Array(E-1);C<E;C++)v[C-1]=arguments[C];T.fn.apply(T.context,v)}else for(var M,A=T.length,C=0;C<A;C++)switch(T[C].once&&this.removeListener(u,T[C].fn,void 0,!0),E){case 1:T[C].fn.call(T[C].context);break;case 2:T[C].fn.call(T[C].context,l);break;case 3:T[C].fn.call(T[C].context,l,c);break;case 4:T[C].fn.call(T[C].context,l,c,h);break;default:if(!v)for(M=1,v=new Array(E-1);M<E;M++)v[M-1]=arguments[M];T[C].fn.apply(T[C].context,v)}return!0},a.prototype.on=function(u,l,c){return i(this,u,l,c,!1)},a.prototype.once=function(u,l,c){return i(this,u,l,c,!0)},a.prototype.removeListener=function(u,l,c,h){var f=t?t+u:u;if(!this._events[f])return this;if(!l)return s(this,f),this;var g=this._events[f];if(g.fn)g.fn!==l||h&&!g.once||c&&g.context!==c||s(this,f);else{for(var p=0,v=[],T=g.length;p<T;p++)(g[p].fn!==l||h&&!g[p].once||c&&g[p].context!==c)&&v.push(g[p]);v.length?this._events[f]=v.length===1?v[0]:v:s(this,f)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=t?t+u:u,this._events[l]&&s(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,d.exports=a},function(d,w,e){var n=e(0),t=e(34),r=e(137),o=e(224),i=e(35),s=e(53),a=e(140),u=new n({initialize:function(l,c,h,f){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=0),f===void 0&&(f=0),this.type=i.RECTANGLE,this.x=l,this.y=c,this.width=h,this.height=f},contains:function(l,c){return t(this,l,c)},getPoint:function(l,c){return r(this,l,c)},getPoints:function(l,c,h){return o(this,l,c,h)},getRandomPoint:function(l){return a(this,l)},setTo:function(l,c,h,f){return this.x=l,this.y=c,this.width=h,this.height=f,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,c){return c===void 0&&(c=l),this.x=l,this.y=c,this},setSize:function(l,c){return c===void 0&&(c=l),this.width=l,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new s),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new s),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new s),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new s),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});d.exports=u},function(d,w,e){var n=e(0),t=e(21),r=e(18),o=new n({initialize:function(i){this.scene=i,this.systems=i.sys,this.displayList,this.updateList,i.sys.events.once(r.BOOT,this.boot,this),i.sys.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(i){return(i.renderCanvas||i.renderWebGL)&&this.displayList.add(i),i.preUpdate&&this.updateList.add(i),i},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});o.register=function(i,s){o.prototype.hasOwnProperty(i)||(o.prototype[i]=s)},o.remove=function(i){o.prototype.hasOwnProperty(i)&&delete o.prototype[i]},t.register("GameObjectFactory",o,"add"),d.exports=o},function(d,w){d.exports=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}return!0}},function(d,w){var e={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};d.exports=e},function(d,w){var e={},n={install:function(t){for(var r in e)t[r]=e[r]},register:function(t,r){e[t]=r},destroy:function(){e={}}};d.exports=n},function(d,w){d.exports=function(e,n,t){return Math.max(n,Math.min(t,e))}},function(d,w,e){d.exports={Alpha:e(508),AlphaSingle:e(221),Animation:e(509),BlendMode:e(222),ComputedSize:e(510),Crop:e(511),Depth:e(223),Flip:e(512),GetBounds:e(513),Mask:e(227),Origin:e(514),PathFollower:e(515),Pipeline:e(230),ScrollFactor:e(231),Size:e(516),Texture:e(517),TextureCrop:e(518),Tint:e(519),ToJSON:e(232),Transform:e(233),TransformMatrix:e(27),Visible:e(236)}},function(d,w){d.exports={getTintFromFloats:function(e,n,t,r){return((255&(255*r|0))<<24|(255&(255*e|0))<<16|(255&(255*n|0))<<8|255&(255*t|0))>>>0},getTintAppendFloatAlpha:function(e,n){return((255&(255*n|0))<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,n){return((255&(255*n|0))<<24|(255&(0|e))<<16|(255&(e>>8|0))<<8|255&(e>>16|0))>>>0},getFloatsFromUintRGB:function(e){return[(255&(e>>16|0))/255,(255&(e>>8|0))/255,(255&(0|e))/255]},getComponentCount:function(e,n){for(var t=0,r=0;r<e.length;++r){var o=e[r];o.type===n.FLOAT?t+=o.size:t+=1}return t}}},function(d,w,e){d.exports={BLUR:e(488),BOOT:e(489),CONTEXT_LOST:e(490),CONTEXT_RESTORED:e(491),DESTROY:e(492),FOCUS:e(493),HIDDEN:e(494),PAUSE:e(495),POST_RENDER:e(496),POST_STEP:e(497),PRE_RENDER:e(498),PRE_STEP:e(499),READY:e(500),RESUME:e(501),STEP:e(502),VISIBLE:e(503)}},function(d,w,e){var n=e(9),t=function(){var r,o,i,s,a,u,l=arguments[0]||{},c=1,h=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[1]||{},c=2),h===c&&(l=this,--c);c<h;c++)if((r=arguments[c])!=null)for(o in r)i=l[o],l!==(s=r[o])&&(f&&s&&(n(s)||(a=Array.isArray(s)))?(u=a?(a=!1,i&&Array.isArray(i)?i:[]):i&&n(i)?i:{},l[o]=t(f,u,s)):s!==void 0&&(l[o]=s));return l};d.exports=t},function(d,w,e){var n=e(2);d.exports=function(t,r,o,i,s,a){t===void 0&&(t=0),r===void 0&&(r=0),o===void 0&&(o=a.width),i===void 0&&(i=a.height);var u=n(s,"isNotEmpty",!1),l=n(s,"isColliding",!1),c=n(s,"hasInterestingFace",!1);t<0&&(o+=t,t=0),r<0&&(i+=r,r=0),t+o>a.width&&(o=Math.max(a.width-t,0)),r+i>a.height&&(i=Math.max(a.height-r,0));for(var h=[],f=r;f<r+i;f++)for(var g=t;g<t+o;g++){var p=a.data[f][g];if(p!==null){if(u&&p.index===-1||l&&!p.collides||c&&!p.hasInterestingFace)continue;h.push(p)}}return h}},function(d,w,e){d.exports={BOOT:e(582),CREATE:e(583),DESTROY:e(584),PAUSE:e(585),POST_UPDATE:e(586),PRE_UPDATE:e(587),READY:e(588),RENDER:e(589),RESUME:e(590),SHUTDOWN:e(591),SLEEP:e(592),START:e(593),TRANSITION_COMPLETE:e(594),TRANSITION_INIT:e(595),TRANSITION_OUT:e(596),TRANSITION_START:e(597),TRANSITION_WAKE:e(598),UPDATE:e(599),WAKE:e(600)}},function(d,w,e){var n=e(0),t=e(232),r=e(103),o=e(6),i=e(109),s=new n({Extends:o,initialize:function(a,u){o.call(this),this.scene=a,this.type=u,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,a.sys.queueDepthSort()},setActive:function(a){return this.active=a,this},setName:function(a){return this.name=a,this},setState:function(a){return this.state=a,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(a,u){return this.data||(this.data=new r(this)),this.data.set(a,u),this},incData:function(a,u){return this.data||(this.data=new r(this)),this.data.inc(a,u),this},toggleData:function(a){return this.data||(this.data=new r(this)),this.data.toggle(a),this},getData:function(a){return this.data||(this.data=new r(this)),this.data.get(a)},setInteractive:function(a,u,l){return this.scene.sys.input.enable(this,a,u,l),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},update:function(){},toJSON:function(){return t(this)},willRender:function(a){return!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&a.id)},getIndexList:function(){for(var a=this,u=this.parentContainer,l=[];u&&(l.unshift(u.getIndex(a)),(a=u).parentContainer);)u=u.parentContainer;return l.unshift(this.scene.sys.displayList.getIndex(a)),l},destroy:function(a){var u;a===void 0&&(a=!1),this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(i.DESTROY,this),u=this.scene.sys,a||(u.displayList.remove(this),u.updateList.remove(this)),this.input&&(u.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),a||u.queueDepthSort(),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0,this.removeAllListeners())}});s.RENDER_MASK=15,d.exports=s},function(d,w,e){var n=e(198),t=e(5);d.exports=function(r,o,i){var s=t(r,o,null);if(s===null)return i;if(Array.isArray(s))return n.RND.pick(s);if(typeof s=="object"){if(s.hasOwnProperty("randInt"))return n.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return n.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if(typeof s=="function")return s(o);return s}},function(d,w){var e={},n={},t={register:function(r,o,i,s){s===void 0&&(s=!1),e[r]={plugin:o,mapping:i,custom:s}},registerCustom:function(r,o,i,s){n[r]={plugin:o,mapping:i,data:s}},hasCore:function(r){return e.hasOwnProperty(r)},hasCustom:function(r){return n.hasOwnProperty(r)},getCore:function(r){return e[r]},getCustom:function(r){return n[r]},getCustomClass:function(r){return n.hasOwnProperty(r)?n[r].plugin:null},remove:function(r){e.hasOwnProperty(r)&&delete e[r]},removeCustom:function(r){n.hasOwnProperty(r)&&delete n[r]},destroyCorePlugins:function(){for(var r in e)e.hasOwnProperty(r)&&delete e[r]},destroyCustomPlugins:function(){for(var r in n)n.hasOwnProperty(r)&&delete n[r]}};d.exports=t},function(d,w,e){var n=e(0),t=e(21),r=e(18),o=new n({initialize:function(i){this.scene=i,this.systems=i.sys,this.displayList,this.updateList,i.sys.events.once(r.BOOT,this.boot,this),i.sys.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});o.register=function(i,s){o.prototype.hasOwnProperty(i)||(o.prototype[i]=s)},o.remove=function(i){o.prototype.hasOwnProperty(i)&&delete o.prototype[i]},t.register("GameObjectCreator",o,"make"),d.exports=o},function(d,w){d.exports=function(e,n,t,r,o,i){var s;r===void 0&&(r=0),o===void 0&&(o=0),i===void 0&&(i=1);var a=0,u=e.length;if(i===1)for(s=o;s<u;s++)e[s][n]=t+a*r,a++;else for(s=o;0<=s;s--)e[s][n]=t+a*r,a++;return e}},function(d,w){d.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(d,w,e){var n,t=e(32),r=e(197),o=[],i=!1;function s(u,l,c,h,f){l===void 0&&(l=1),c===void 0&&(c=1),h===void 0&&(h=t.CANVAS),f===void 0&&(f=!1);var g=n(h),p=(g===null?(g={parent:u,canvas:document.createElement("canvas"),type:h},h===t.CANVAS&&o.push(g)):g.parent=u,g.canvas);return f&&(g.parent=p),p.width=l,p.height=c,i&&h===t.CANVAS&&r.disable(p.getContext("2d")),p}function a(){var u=0;return o.forEach(function(l){l.parent&&u++}),u}d.exports={create2D:function(u,l,c){return s(u,l,c,t.CANVAS)},create:s,createWebGL:function(u,l,c){return s(u,l,c,t.WEBGL)},disableSmoothing:function(){i=!0},enableSmoothing:function(){i=!1},first:n=function(u){if(u===void 0&&(u=t.CANVAS),u===t.WEBGL)return null;for(var l=0;l<o.length;l++){var c=o[l];if(!c.parent&&c.type===u)return c}return null},free:function(){return o.length-a()},pool:o,remove:function(u){var l=u instanceof HTMLCanvasElement;o.forEach(function(c){(l&&c.canvas===u||!l&&c.parent===u)&&(c.parent=null,c.canvas.width=1,c.canvas.height=1)})},total:a}},function(d,w,e){var n=e(0),t=e(24),r=e(81),o=e(2),i=e(132),s=e(167),a=e(340),u=e(116),l=new n({initialize:function(c,h){this.loader=c,this.cache=o(h,"cache",!1),this.type=o(h,"type",!1),this.key=o(h,"key",!1);var f=this.key;if(c.prefix&&c.prefix!==""&&(this.key=c.prefix+f),!this.type||!this.key)throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=o(h,"url"),this.url===void 0?this.url=c.path+f+"."+o(h,"extension",""):typeof this.url=="string"&&this.url.indexOf("blob:")!==0&&this.url.indexOf("data:")!==0&&(this.url=c.path+this.url),this.src="",this.xhrSettings=u(o(h,"responseType",void 0)),o(h,"xhrSettings",!1)&&(this.xhrSettings=s(this.xhrSettings,o(h,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?t.FILE_POPULATED:t.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(h,"config",{}),this.multiFile,this.linkFile},setLink:function(c){(this.linkFile=c).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===t.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=t.FILE_LOADING,this.src=i(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=a(this,this.loader.xhr))},onLoad:function(c,h){var f=c.responseURL&&c.responseURL.indexOf("file://")===0&&h.target.status===0,g=!(h.target&&h.target.status!==200)||f;c.readyState===4&&400<=c.status&&c.status<=599&&(g=!1),this.state=t.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,g)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(c){c.lengthComputable&&(this.bytesLoaded=c.loaded,this.bytesTotal=c.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=t.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=t.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=t.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(c){c===void 0&&(c=this.data);var h=this.key,f=this.type;this.loader.emit(r.FILE_COMPLETE,h,f,c),this.loader.emit(r.FILE_KEY_COMPLETE+f+"-"+h,h,f,c),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(c,h,f){var g;typeof URL=="function"?c.src=URL.createObjectURL(h):((g=new FileReader).onload=function(){c.removeAttribute("crossOrigin"),c.src="data:"+(h.type||f)+";base64,"+g.result.split(",")[1]},g.onerror=c.onerror,g.readAsDataURL(h))},l.revokeObjectURL=function(c){typeof URL=="function"&&URL.revokeObjectURL(c.src)},d.exports=l},function(d,w,e){var n=e(0),t=e(10),r=e(4),o=new n({initialize:function(i,s,a,u,l,c){i===void 0&&(i=1),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=1),l===void 0&&(l=0),c===void 0&&(c=0),this.matrix=new Float32Array([i,s,a,u,l,c,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(i){this.matrix[0]=i}},b:{get:function(){return this.matrix[1]},set:function(i){this.matrix[1]=i}},c:{get:function(){return this.matrix[2]},set:function(i){this.matrix[2]=i}},d:{get:function(){return this.matrix[3]},set:function(i){this.matrix[3]=i}},e:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},f:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},tx:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},ty:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var i=this.matrix,s=i[0],a=i[1],u=i[2],l=i[3];return s||a?0<a?Math.acos(s/this.scaleX):-Math.acos(s/this.scaleX):u||l?t.TAU-(0<l?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var i=this.matrix;return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,this},translate:function(i,s){var a=this.matrix;return a[4]=a[0]*i+a[2]*s+a[4],a[5]=a[1]*i+a[3]*s+a[5],this},scale:function(i,s){var a=this.matrix;return a[0]*=i,a[1]*=i,a[2]*=s,a[3]*=s,this},rotate:function(i){var s=Math.sin(i),a=Math.cos(i),u=this.matrix,l=u[0],c=u[1],h=u[2],f=u[3];return u[0]=l*a+h*s,u[1]=c*a+f*s,u[2]=l*-s+h*a,u[3]=c*-s+f*a,this},multiply:function(i,s){var a=this.matrix,u=i.matrix,l=a[0],c=a[1],h=a[2],f=a[3],g=a[4],p=a[5],v=u[0],T=u[1],E=u[2],M=u[3],A=u[4],C=u[5],P=s===void 0?this:s;return P.a=v*l+T*h,P.b=v*c+T*f,P.c=E*l+M*h,P.d=E*c+M*f,P.e=A*l+C*h+g,P.f=A*c+C*f+p,P},multiplyWithOffset:function(i,s,a){var u=this.matrix,l=i.matrix,c=u[0],h=u[1],f=u[2],g=u[3],p=s*c+a*f+u[4],v=s*h+a*g+u[5],T=l[0],E=l[1],M=l[2],A=l[3],C=l[4],P=l[5];return u[0]=T*c+E*f,u[1]=T*h+E*g,u[2]=M*c+A*f,u[3]=M*h+A*g,u[4]=C*c+P*f+p,u[5]=C*h+P*g+v,this},transform:function(i,s,a,u,l,c){var h=this.matrix,f=h[0],g=h[1],p=h[2],v=h[3],T=h[4],E=h[5];return h[0]=i*f+s*p,h[1]=i*g+s*v,h[2]=a*f+u*p,h[3]=a*g+u*v,h[4]=l*f+c*p+T,h[5]=l*g+c*v+E,this},transformPoint:function(i,s,a){a===void 0&&(a={x:0,y:0});var u=this.matrix,l=u[0],c=u[1],h=u[2],f=u[3],g=u[4],p=u[5];return a.x=i*l+s*h+g,a.y=i*c+s*f+p,a},invert:function(){var i=this.matrix,s=i[0],a=i[1],u=i[2],l=i[3],c=i[4],h=i[5],f=s*l-a*u;return i[0]=l/f,i[1]=-a/f,i[2]=-u/f,i[3]=s/f,i[4]=(u*h-l*c)/f,i[5]=-(s*h-a*c)/f,this},copyFrom:function(i){var s=this.matrix;return s[0]=i.a,s[1]=i.b,s[2]=i.c,s[3]=i.d,s[4]=i.e,s[5]=i.f,this},copyFromArray:function(i){var s=this.matrix;return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],this},copyToContext:function(i){var s=this.matrix;return i.transform(s[0],s[1],s[2],s[3],s[4],s[5]),i},setToContext:function(i){var s=this.matrix;return i.setTransform(s[0],s[1],s[2],s[3],s[4],s[5]),i},copyToArray:function(i){var s=this.matrix;return i===void 0?i=[s[0],s[1],s[2],s[3],s[4],s[5]]:(i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5]),i},setTransform:function(i,s,a,u,l,c){var h=this.matrix;return h[0]=i,h[1]=s,h[2]=a,h[3]=u,h[4]=l,h[5]=c,this},decomposeMatrix:function(){var i,s,a=this.decomposedMatrix,u=this.matrix,l=u[0],c=u[1],h=u[2],f=u[3],g=l*f-c*h;return a.translateX=u[4],a.translateY=u[5],l||c?(i=Math.sqrt(l*l+c*c),a.rotation=0<c?Math.acos(l/i):-Math.acos(l/i),a.scaleX=i,a.scaleY=g/i):h||f?(s=Math.sqrt(h*h+f*f),a.rotation=.5*Math.PI-(0<f?Math.acos(-h/s):-Math.acos(h/s)),a.scaleX=g/s,a.scaleY=s):(a.rotation=0,a.scaleX=0,a.scaleY=0),a},applyITRS:function(i,s,a,u,l){var c=this.matrix,h=Math.sin(a),f=Math.cos(a);return c[4]=i,c[5]=s,c[0]=f*u,c[1]=h*u,c[2]=-h*l,c[3]=f*l,this},applyInverse:function(i,s,a){a===void 0&&(a=new r);var u=this.matrix,l=u[0],c=u[1],h=u[2],f=u[3],g=u[4],p=u[5],v=1/(l*f+h*-c);return a.x=f*v*i+-h*v*s+(p*h-g*f)*v,a.y=l*v*s+-c*v*i+(-p*l+g*c)*v,a},getX:function(i,s){return i*this.a+s*this.c+this.e},getY:function(i,s){return i*this.b+s*this.d+this.f},getCSSMatrix:function(){var i=this.matrix;return"matrix("+i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});d.exports=o},function(d,w,e){var n=e(0),t=e(142),r=e(238),o=e(143),i=e(239),s=new n({initialize:function(a,u,l,c){a===void 0&&(a=0),u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(a,u,l,c)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(a,u,l,c,h){return c===void 0&&(c=255),h===void 0&&(h=!0),this._locked=!0,this.red=a,this.green=u,this.blue=l,this.alpha=c,this._locked=!1,this.update(h)},setGLTo:function(a,u,l,c){return c===void 0&&(c=1),this._locked=!0,this.redGL=a,this.greenGL=u,this.blueGL=l,this.alphaGL=c,this._locked=!1,this.update(!0)},setFromRGB:function(a){return this._locked=!0,this.red=a.r,this.green=a.g,this.blue=a.b,a.hasOwnProperty("a")&&(this.alpha=a.a),this._locked=!1,this.update(!0)},setFromHSV:function(a,u,l){return o(a,u,l,this)},update:function(a){if(a===void 0&&(a=!1),this._locked)return this;var u=this.r,l=this.g,c=this.b,h=this.a;return this._color=t(u,l,c),this._color32=r(u,l,c,h),this._rgba="rgba("+u+","+l+","+c+","+h/255+")",a&&i(u,l,c,this),this},updateHSV:function(){var a=this.r,u=this.g,l=this.b;return i(a,u,l,this),this},clone:function(){return new s(this.r,this.g,this.b,this.a)},gray:function(a){return this.setTo(a,a,a)},random:function(a,u){a===void 0&&(a=0),u===void 0&&(u=255);var l=Math.floor(a+Math.random()*(u-a)),c=Math.floor(a+Math.random()*(u-a)),h=Math.floor(a+Math.random()*(u-a));return this.setTo(l,c,h)},randomGray:function(a,u){a===void 0&&(a=0),u===void 0&&(u=255);var l=Math.floor(a+Math.random()*(u-a));return this.setTo(l,l,l)},saturate:function(a){return this.s+=a/100,this},desaturate:function(a){return this.s-=a/100,this},lighten:function(a){return this.v+=a/100,this},darken:function(a){return this.v-=a/100,this},brighten:function(a){var u=this.r,l=this.g,c=this.b,u=Math.max(0,Math.min(255,u-Math.round(-a/100*255))),l=Math.max(0,Math.min(255,l-Math.round(-a/100*255))),c=Math.max(0,Math.min(255,c-Math.round(-a/100*255)));return this.setTo(u,l,c)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(a){this.gl[0]=Math.min(Math.abs(a),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(a){this.gl[1]=Math.min(Math.abs(a),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(a){this.gl[2]=Math.min(Math.abs(a),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(a){this.gl[3]=Math.min(Math.abs(a),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(a){a=Math.floor(Math.abs(a)),this.r=Math.min(a,255),this.gl[0]=a/255,this.update(!0)}},green:{get:function(){return this.g},set:function(a){a=Math.floor(Math.abs(a)),this.g=Math.min(a,255),this.gl[1]=a/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(a){a=Math.floor(Math.abs(a)),this.b=Math.min(a,255),this.gl[2]=a/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(a){a=Math.floor(Math.abs(a)),this.a=Math.min(a,255),this.gl[3]=a/255,this.update()}},h:{get:function(){return this._h},set:function(a){this._h=a,o(a,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(a){this._s=a,o(this._h,a,this._v,this)}},v:{get:function(){return this._v},set:function(a){this._v=a,o(this._h,this._s,a,this)}}});d.exports=s},function(d,w,e){var n=e(56),t=e(20);d.exports=function(r,o,i){o.x=t(i,"x",0),o.y=t(i,"y",0),o.depth=t(i,"depth",0),o.flipX=t(i,"flipX",!1),o.flipY=t(i,"flipY",!1);var s=t(i,"scale",null);typeof s=="number"?o.setScale(s):s!==null&&(o.scaleX=t(s,"x",1),o.scaleY=t(s,"y",1));var a=t(i,"scrollFactor",null);typeof a=="number"?o.setScrollFactor(a):a!==null&&(o.scrollFactorX=t(a,"x",1),o.scrollFactorY=t(a,"y",1)),o.rotation=t(i,"rotation",0);var u=t(i,"angle",null);u!==null&&(o.angle=u),o.alpha=t(i,"alpha",1);var l,c,h=t(i,"origin",null);return typeof h=="number"?o.setOrigin(h):h!==null&&(l=t(h,"x",.5),c=t(h,"y",.5),o.setOrigin(l,c)),o.blendMode=t(i,"blendMode",n.NORMAL),o.visible=t(i,"visible",!0),t(i,"add",!0)&&r.sys.displayList.add(o),o.preUpdate&&r.sys.updateList.add(o),o}},function(d,w,e){d.exports={DESTROY:e(520),FADE_IN_COMPLETE:e(521),FADE_IN_START:e(522),FADE_OUT_COMPLETE:e(523),FADE_OUT_START:e(524),FLASH_COMPLETE:e(525),FLASH_START:e(526),PAN_COMPLETE:e(527),PAN_START:e(528),POST_RENDER:e(529),PRE_RENDER:e(530),ROTATE_COMPLETE:e(531),ROTATE_START:e(532),SHAKE_COMPLETE:e(533),SHAKE_START:e(534),ZOOM_COMPLETE:e(535),ZOOM_START:e(536)}},function(d,w){d.exports=function(e,n,t,r,o,i){var s;r===void 0&&(r=0),o===void 0&&(o=0),i===void 0&&(i=1);var a=0,u=e.length;if(i===1)for(s=o;s<u;s++)e[s][n]+=t+a*r,a++;else for(s=o;0<=s;s--)e[s][n]+=t+a*r,a++;return e}},function(d,w,e){var n={VERSION:"3.24.1",BlendModes:e(56),ScaleModes:e(213),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};d.exports=n},function(d,w){d.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(d,w){d.exports=function(e,n,t){return!(e.width<=0||e.height<=0)&&e.x<=n&&e.x+e.width>=n&&e.y<=t&&e.y+e.height>=t}},function(d,w){d.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(d,w){d.exports=function(e,n,t,r,o){var i=r.alpha*t.alpha;if(i<=0)return!1;var s=e._tempMatrix1.copyFromArray(r.matrix.matrix),a=e._tempMatrix2.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),u=e._tempMatrix3;return o?(s.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=r.scrollX*t.scrollFactorX,a.f-=r.scrollY*t.scrollFactorY),s.multiply(a,u),n.globalCompositeOperation=e.blendModes[t.blendMode],n.globalAlpha=i,n.save(),u.setToContext(n),n.imageSmoothingEnabled=!(!e.antialias||t.frame&&t.frame.source.scaleMode),!0}},function(d,w){d.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(d,w){d.exports=function(e){return e.y+e.height-e.height*e.originY}},function(d,w){d.exports=function(e){return e.x-e.width*e.originX}},function(d,w){d.exports=function(e){return e.x+e.width-e.width*e.originX}},function(d,w){d.exports=function(e){return e.y-e.height*e.originY}},function(d,w,e){var n=e(119),t=e(17);d.exports=function(r,o,i,s,a){for(var u,l,c,h,f=t(r,o,i,s,null,a),g=0;g<f.length;g++){var p=f[g];p&&(p.collides?(u=n(p.x,p.y-1,!0,a),l=n(p.x,p.y+1,!0,a),c=n(p.x-1,p.y,!0,a),h=n(p.x+1,p.y,!0,a),p.faceTop=!u||!u.collides,p.faceBottom=!l||!l.collides,p.faceLeft=!c||!c.collides,p.faceRight=!h||!h.collides):p.resetFaces())}}},function(d,w){d.exports=function(e,n){return e.y=n+e.height*e.originY,e}},function(d,w){d.exports=function(e,n){return e.x=n+e.width*e.originX,e}},function(d,w){d.exports=function(e,n){return e.x=n-e.width+e.width*e.originX,e}},function(d,w){d.exports=function(e,n){return e.y=n-e.height+e.height*e.originY,e}},function(d,w){d.exports=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))}},function(d,w,e){var n=e(10);d.exports=function(t){return t*n.DEG_TO_RAD}},function(d,w,e){d.exports={BOOT:e(674),DESTROY:e(675),DRAG_END:e(676),DRAG_ENTER:e(677),DRAG:e(678),DRAG_LEAVE:e(679),DRAG_OVER:e(680),DRAG_START:e(681),DROP:e(682),GAME_OUT:e(683),GAME_OVER:e(684),GAMEOBJECT_DOWN:e(685),GAMEOBJECT_DRAG_END:e(686),GAMEOBJECT_DRAG_ENTER:e(687),GAMEOBJECT_DRAG:e(688),GAMEOBJECT_DRAG_LEAVE:e(689),GAMEOBJECT_DRAG_OVER:e(690),GAMEOBJECT_DRAG_START:e(691),GAMEOBJECT_DROP:e(692),GAMEOBJECT_MOVE:e(693),GAMEOBJECT_OUT:e(694),GAMEOBJECT_OVER:e(695),GAMEOBJECT_POINTER_DOWN:e(696),GAMEOBJECT_POINTER_MOVE:e(697),GAMEOBJECT_POINTER_OUT:e(698),GAMEOBJECT_POINTER_OVER:e(699),GAMEOBJECT_POINTER_UP:e(700),GAMEOBJECT_POINTER_WHEEL:e(701),GAMEOBJECT_UP:e(702),GAMEOBJECT_WHEEL:e(703),MANAGER_BOOT:e(704),MANAGER_PROCESS:e(705),MANAGER_UPDATE:e(706),POINTER_DOWN:e(707),POINTER_DOWN_OUTSIDE:e(708),POINTER_MOVE:e(709),POINTER_OUT:e(710),POINTER_OVER:e(711),POINTER_UP:e(712),POINTER_UP_OUTSIDE:e(713),POINTER_WHEEL:e(714),POINTERLOCK_CHANGE:e(715),PRE_UPDATE:e(716),SHUTDOWN:e(717),START:e(718),UPDATE:e(719)}},function(d,w){d.exports=function(e,n,t){return 0<e.radius&&n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom&&(e.x-n)*(e.x-n)+(e.y-t)*(e.y-t)<=e.radius*e.radius}},function(d,w){d.exports=function(e,n,t,r){n===void 0&&(n=!0);var o=r.baseTileWidth,i=r.tilemapLayer;return i&&(t===void 0&&(t=i.scene.cameras.main),e-=i.x+t.scrollX*(1-i.scrollFactorX),o*=i.scaleX),n?Math.floor(e/o):e/o}},function(d,w){d.exports=function(e,n,t,r){n===void 0&&(n=!0);var o=r.baseTileHeight,i=r.tilemapLayer;return i&&(t===void 0&&(t=i.scene.cameras.main),e-=i.y+t.scrollY*(1-i.scrollFactorY),o*=i.scaleY),n?Math.floor(e/o):e/o}},function(d,w,e){var n=e(0),t=e(225),r=e(138),o=e(35),i=e(139),s=e(4),a=new n({initialize:function(u,l,c,h){u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=0),this.type=o.LINE,this.x1=u,this.y1=l,this.x2=c,this.y2=h},getPoint:function(u,l){return t(this,u,l)},getPoints:function(u,l,c){return r(this,u,l,c)},getRandomPoint:function(u){return i(this,u)},setTo:function(u,l,c,h){return u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=0),this.x1=u,this.y1=l,this.x2=c,this.y2=h,this},getPointA:function(u){return u===void 0&&(u=new s),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new s),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});d.exports=a},function(d,w){d.exports=function(e,n,t,r){var o=e-t,i=n-r;return Math.sqrt(o*o+i*i)}},function(d,w,e){d.exports={COMPLETE:e(742),DECODED:e(743),DECODED_ALL:e(744),DESTROY:e(745),DETUNE:e(746),GLOBAL_DETUNE:e(747),GLOBAL_MUTE:e(748),GLOBAL_RATE:e(749),GLOBAL_VOLUME:e(750),LOOP:e(751),LOOPED:e(752),MUTE:e(753),PAUSE_ALL:e(754),PAUSE:e(755),PLAY:e(756),RATE:e(757),RESUME_ALL:e(758),RESUME:e(759),SEEK:e(760),STOP_ALL:e(761),STOP:e(762),UNLOCKED:e(763),VOLUME:e(764)}},function(d,w){d.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(d,w){d.exports=function(e,n,t){var r=t-n;return n+((e-n)%r+r)%r}},function(d,w){d.exports=function(e,n,t,r){var o=e.length;if(n<0||o<n||t<=n||o<t||o<n+t){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(d,w){d.exports=function(e,n){n?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)}},function(d,w,e){var n=e(0),t=e(13),r=e(372),o=new n({Mixins:[t.Alpha,t.Flip,t.Visible],initialize:function(i,s,a,u,l,c,h,f){this.layer=i,this.index=s,this.x=a,this.y=u,this.width=l,this.height=c,this.baseWidth=h!==void 0?h:l,this.baseHeight=f!==void 0?f:c,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=null,(this.collisionCallbackContext=this).tint=16777215,this.physics={}},containsPoint:function(i,s){return!(i<this.pixelX||s<this.pixelY||i>this.right||s>this.bottom)},copy:function(i){return this.index=i.index,this.alpha=i.alpha,this.properties=i.properties,this.visible=i.visible,this.setFlip(i.flipX,i.flipY),this.tint=i.tint,this.rotation=i.rotation,this.collideUp=i.collideUp,this.collideDown=i.collideDown,this.collideLeft=i.collideLeft,this.collideRight=i.collideRight,this.collisionCallback=i.collisionCallback,this.collisionCallbackContext=i.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(i){var s=this.tilemapLayer;return s?s.tileToWorldX(this.x,i):this.x*this.baseWidth},getRight:function(i){var s=this.tilemapLayer;return s?this.getLeft(i)+this.width*s.scaleX:this.getLeft(i)+this.width},getTop:function(i){var s=this.tilemapLayer;return s?s.tileToWorldY(this.y,i)-(this.height-this.baseHeight)*s.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(i){var s=this.tilemapLayer;return s?this.getTop(i)+this.height*s.scaleY:this.getTop(i)+this.height},getBounds:function(i,s){return s===void 0&&(s=new r),s.x=this.getLeft(),s.y=this.getTop(),s.width=this.getRight()-s.x,s.height=this.getBottom()-s.y,s},getCenterX:function(i){return(this.getLeft(i)+this.getRight(i))/2},getCenterY:function(i){return(this.getTop(i)+this.getBottom(i))/2},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},intersects:function(i,s,a,u){return!(a<=this.pixelX||u<=this.pixelY||i>=this.right||s>=this.bottom)},isInteresting:function(i,s){return i&&s?this.canCollide||this.hasInterestingFace:i?this.collides:!!s&&this.hasInterestingFace},resetCollision:function(i){return i===void 0&&(i=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,i&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(i,s,a,u,l){return s===void 0&&(s=i),a===void 0&&(a=i),u===void 0&&(u=i),l===void 0&&(l=!0),this.collideLeft=i,this.collideRight=s,this.collideUp=a,this.collideDown=u,this.faceLeft=i,this.faceRight=s,this.faceTop=a,this.faceBottom=u,l&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(i,s){return i===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=i,this.collisionCallbackContext=s),this},setSize:function(i,s,a,u){return i!==void 0&&(this.width=i),s!==void 0&&(this.height=s),a!==void 0&&(this.baseWidth=a),u!==void 0&&(this.baseHeight=u),this.updatePixelXY(),this},updatePixelXY:function(){return this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight,this},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var i=this.layer.tilemapLayer;if(i){var s=i.gidMap[this.index];if(s)return s}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var i=this.tilemapLayer;return i?i.tilemap:null}}});d.exports=o},function(d,w,e){var n=e(0),t=e(13),r=e(19),o=e(53),i=new n({Extends:r,Mixins:[t.AlphaSingle,t.BlendMode,t.ComputedSize,t.Depth,t.GetBounds,t.Mask,t.Origin,t.Pipeline,t.ScrollFactor,t.Transform,t.Visible],initialize:function(s,a,u){a===void 0&&(a="Shape"),r.call(this,s,a),this.geom=u,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.initPipeline()},setFillStyle:function(s,a){return a===void 0&&(a=1),s===void 0?this.isFilled=!1:(this.fillColor=s,this.fillAlpha=a,this.isFilled=!0),this},setStrokeStyle:function(s,a,u){return u===void 0&&(u=1),s===void 0?this.isStroked=!1:(this.lineWidth=s,this.strokeColor=a,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(s){return this.closePath=s,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]}});d.exports=i},function(d,w,e){var n=e(0),t=e(50),r=e(333),o=e(334),i=e(35),s=e(165),a=new n({initialize:function(u,l,c){u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),this.type=i.CIRCLE,this.x=u,this.y=l,this._radius=c,this._diameter=2*c},contains:function(u,l){return t(this,u,l)},getPoint:function(u,l){return r(this,u,l)},getPoints:function(u,l,c){return o(this,u,l,c)},getRandomPoint:function(u){return s(this,u)},setTo:function(u,l,c){return this.x=u,this.y=l,this._radius=c,this._diameter=2*c,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,l){return l===void 0&&(l=u),this.x=u,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=2*u}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=.5*u}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});d.exports=a},function(d,w,e){var n=e(0),t=e(67),r=e(336),o=e(337),i=e(35),s=e(53),a=e(166),u=new n({initialize:function(l,c,h,f,g,p){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=0),f===void 0&&(f=0),g===void 0&&(g=0),p===void 0&&(p=0),this.type=i.TRIANGLE,this.x1=l,this.y1=c,this.x2=h,this.y2=f,this.x3=g,this.y3=p},contains:function(l,c){return t(this,l,c)},getPoint:function(l,c){return r(this,l,c)},getPoints:function(l,c,h){return o(this,l,c,h)},getRandomPoint:function(l){return a(this,l)},setTo:function(l,c,h,f,g,p){return l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=0),f===void 0&&(f=0),g===void 0&&(g=0),p===void 0&&(p=0),this.x1=l,this.y1=c,this.x2=h,this.y2=f,this.x3=g,this.y3=p,this},getLineA:function(l){return l===void 0&&(l=new s),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new s),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new s),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var c=0,c=this.x1<=this.x2&&this.x1<=this.x3?this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?this.x2-l:this.x3-l;this.x1-=c,this.x2-=c,this.x3-=c}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var c=0,c=this.x1>=this.x2&&this.x1>=this.x3?this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?this.x2-l:this.x3-l;this.x1-=c,this.x2-=c,this.x3-=c}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var c=0,c=this.y1<=this.y2&&this.y1<=this.y3?this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?this.y2-l:this.y3-l;this.y1-=c,this.y2-=c,this.y3-=c}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var c=0,c=this.y1>=this.y2&&this.y1>=this.y3?this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?this.y2-l:this.y3-l;this.y1-=c,this.y2-=c,this.y3-=c}}});d.exports=u},function(d,w,e){var n=e(97),t=e(204);d.exports=function(r,o){var i,s=n.Power0;if(typeof r=="string"?n.hasOwnProperty(r)?s=n[r]:(i="",r.indexOf(".")&&((i=r.substr(r.indexOf(".")+1)).toLowerCase()==="in"?i="easeIn":i.toLowerCase()==="out"?i="easeOut":i.toLowerCase()==="inout"&&(i="easeInOut")),r=t(r.substr(0,r.indexOf(".")+1)+i),n.hasOwnProperty(r)&&(s=n[r])):typeof r=="function"?s=r:Array.isArray(r)&&r.length,!o)return s;var a=o.slice(0);return a.unshift(0),function(u){return a[0]=u,s.apply(this,a)}}},function(d,w){d.exports=function(e,n){if(!(n>=e.length)){for(var t=e.length-1,r=e[n],o=n;o<t;o++)e[o]=e[o+1];return e.length=t,r}}},function(d,w){d.exports=function(e){var n={};for(var t in e)Array.isArray(e[t])?n[t]=e[t].slice(0):n[t]=e[t];return n}},function(d,w){d.exports=function(e,n,t){var r=e.x3-e.x1,o=e.y3-e.y1,i=e.x2-e.x1,s=e.y2-e.y1,a=n-e.x1,u=t-e.y1,l=r*r+o*o,c=r*i+o*s,h=r*a+o*u,f=i*i+s*s,g=i*a+s*u,p=l*f-c*c,v=p==0?0:1/p,T=(f*h-c*g)*v,E=(l*g-c*h)*v;return 0<=T&&0<=E&&T+E<1}},function(d,w,e){var n=e(3);d.exports=function(t,r,o){o===void 0&&(o=new n);var i=t.x1,s=t.y1,a=t.x2,u=t.y2,l=r.x1,c=r.y1,h=r.x2,f=r.y2,g=(f-c)*(a-i)-(h-l)*(u-s);if(g==0)return!1;var p=((h-l)*(s-c)-(f-c)*(i-l))/g,v=((a-i)*(s-c)-(u-s)*(i-l))/g;return 0<=p&&p<=1&&0<=v&&v<=1&&(o.x=i+p*(a-i),o.y=s+p*(u-s),!0)}},function(d,w){d.exports=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)}},function(d,w){d.exports=function(e,n,t,r){var o=t||n.fillColor,i=r||n.fillAlpha,s=(16711680&o)>>>16,a=(65280&o)>>>8,u=255&o;e.fillStyle="rgba("+s+","+a+","+u+","+i+")"}},function(d,w,e){var n=e(0),t=e(13),r=e(19),o=e(818),i=new n({Extends:r,Mixins:[t.Alpha,t.BlendMode,t.Depth,t.Flip,t.GetBounds,t.Mask,t.Origin,t.Pipeline,t.ScrollFactor,t.Size,t.TextureCrop,t.Tint,t.Transform,t.Visible,o],initialize:function(s,a,u,l,c){r.call(this,s,"Sprite"),this._crop=this.resetCropObject(),this.anims=new t.Animation(this),this.setTexture(l,c),this.setPosition(a,u),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},preUpdate:function(s,a){this.anims.update(s,a)},play:function(s,a,u){return this.anims.play(s,a,u),this},toJSON:function(){return t.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});d.exports=i},function(d,w){d.exports=function(e){return e.x-e.width*e.originX+.5*e.width}},function(d,w){d.exports=function(e,n){var t=e.width*e.originX;return e.x=n+t-.5*e.width,e}},function(d,w){d.exports=function(e){return e.y-e.height*e.originY+.5*e.height}},function(d,w){d.exports=function(e,n){var t=e.height*e.originY;return e.y=n+t-.5*e.height,e}},function(d,w){d.exports=function(e,n,t){return e&&e.hasOwnProperty(n)?e[n]:t}},function(d,w){d.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(d,w,e){d.exports={ENTER_FULLSCREEN:e(576),FULLSCREEN_FAILED:e(577),FULLSCREEN_UNSUPPORTED:e(578),LEAVE_FULLSCREEN:e(579),ORIENTATION_CHANGE:e(580),RESIZE:e(581)}},function(d,w){d.exports=function(e,n,t,r){return t===void 0&&(t=0),n===0?e:(e-=t,e=n*Math.floor(e/n),r?(t+e)/n:t+e)}},function(d,w,e){var n=e(12);d.exports=function(t,r,o){return(o-r)*(t=n(t,0,1))}},function(d,w,e){d.exports={ADD:e(721),COMPLETE:e(722),FILE_COMPLETE:e(723),FILE_KEY_COMPLETE:e(724),FILE_LOAD_ERROR:e(725),FILE_LOAD:e(726),FILE_PROGRESS:e(727),POST_PROCESS:e(728),PROGRESS:e(729),START:e(730)}},function(d,w){d.exports=function(e,n,t){if(e.width<=0||e.height<=0)return!1;var r=(n-e.x)/e.width,o=(t-e.y)/e.height;return(r*=r)+(o*=o)<.25}},function(d,w){d.exports=function(e,n,t,r){var o=t||n.strokeColor,i=r||n.strokeAlpha,s=(16711680&o)>>>16,a=(65280&o)>>>8,u=255&o;e.strokeStyle="rgba("+s+","+a+","+u+","+i+")",e.lineWidth=n.lineWidth}},function(d,w,e){var n=e(0),t=e(24),r=e(26),o=e(11),i=e(2),s=e(9),a=new n({Extends:r,initialize:function u(l,c,h,f,g){var p,v,T="png";s(c)&&(c=i(v=c,"key"),h=i(v,"url"),p=i(v,"normalMap"),f=i(v,"xhrSettings"),T=i(v,"extension",T),g=i(v,"frameConfig")),Array.isArray(h)&&(p=h[1],h=h[0]);var E,M={type:"image",cache:l.textureManager,extension:T,responseType:"blob",key:c,url:h,xhrSettings:f,config:g};r.call(this,l,M),p&&((E=new u(l,this.key,p,f,g)).type="normalMap",this.setLink(E),l.addFile(E))},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){r.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(u.data),u.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var u,l=this.linkFile;l&&l.state===t.FILE_COMPLETE?(u=this.type==="image"?this.cache.addImage(this.key,this.data,l.data):this.cache.addImage(l.key,l.data,this.data),this.pendingDestroy(u),l.pendingDestroy(u)):l||(u=this.cache.addImage(this.key,this.data),this.pendingDestroy(u))}});o.register("image",function(u,l,c){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.addFile(new a(this,u[h]));else this.addFile(new a(this,u,l,c));return this}),d.exports=a},function(d,w,e){var n=new(e(0))({initialize:function(t,r,o,i){this.loader=t,this.type=r,this.key=o,this.multiKeyIndex=t.multiKeyIndex++,this.files=i,this.complete=!1,this.pending=i.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var s=0;s<i.length;s++)i[s].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(t){return this.files.push(t),(t.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(t){this.files.indexOf(t)!==-1&&this.pending--},onFileFailed:function(t){this.files.indexOf(t)!==-1&&this.failed++}});d.exports=n},function(d,w){d.exports=function(e,n,t){return 0<=e&&e<t.width&&0<=n&&n<t.height}},function(d,w,e){var n=e(0),t=e(2),r=new n({initialize:function(o){o===void 0&&(o={}),this.name=t(o,"name","layer"),this.x=t(o,"x",0),this.y=t(o,"y",0),this.width=t(o,"width",0),this.height=t(o,"height",0),this.tileWidth=t(o,"tileWidth",0),this.tileHeight=t(o,"tileHeight",0),this.baseTileWidth=t(o,"baseTileWidth",this.tileWidth),this.baseTileHeight=t(o,"baseTileHeight",this.tileHeight),this.widthInPixels=t(o,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=t(o,"heightInPixels",this.height*this.baseTileHeight),this.alpha=t(o,"alpha",1),this.visible=t(o,"visible",!0),this.properties=t(o,"properties",[]),this.indexes=t(o,"indexes",[]),this.collideIndexes=t(o,"collideIndexes",[]),this.callbacks=t(o,"callbacks",[]),this.bodies=t(o,"bodies",[]),this.data=t(o,"data",[]),this.tilemapLayer=t(o,"tilemapLayer",null)}});d.exports=r},function(d,w,e){var n=e(0),t=e(2),r=new n({initialize:function(o){o===void 0&&(o={}),this.name=t(o,"name","map"),this.width=t(o,"width",0),this.height=t(o,"height",0),this.infinite=t(o,"infinite",!1),this.tileWidth=t(o,"tileWidth",0),this.tileHeight=t(o,"tileHeight",0),this.widthInPixels=t(o,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=t(o,"heightInPixels",this.height*this.tileHeight),this.format=t(o,"format",null),this.orientation=t(o,"orientation","orthogonal"),this.renderOrder=t(o,"renderOrder","right-down"),this.version=t(o,"version","1"),this.properties=t(o,"properties",{}),this.layers=t(o,"layers",[]),this.images=t(o,"images",[]),this.objects=t(o,"objects",{}),this.collision=t(o,"collision",{}),this.tilesets=t(o,"tilesets",[]),this.imageCollections=t(o,"imageCollections",[]),this.tiles=t(o,"tiles",[])}});d.exports=r},function(d,w,e){var n=new(e(0))({initialize:function(t,r,o,i,s,a,u,l){(o===void 0||o<=0)&&(o=32),(i===void 0||i<=0)&&(i=32),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u={}),l===void 0&&(l={}),this.name=t,this.firstgid=r,this.tileWidth=o,this.tileHeight=i,this.tileMargin=s,this.tileSpacing=a,this.tileProperties=u,this.tileData=l,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var r=this.getTileData(t);return r&&r.objectgroup?r.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,r){return t!==void 0&&(this.tileWidth=t),r!==void 0&&(this.tileHeight=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,r){return t!==void 0&&(this.tileMargin=t),r!==void 0&&(this.tileSpacing=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,r){var o=(r-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);o%1==0&&i%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),o=Math.floor(o),i=Math.floor(i),this.rows=o,this.columns=i,this.total=o*i,this.texCoordinates.length=0;for(var s=this.tileMargin,a=this.tileMargin,u=0;u<this.rows;u++){for(var l=0;l<this.columns;l++)this.texCoordinates.push({x:s,y:a}),s+=this.tileWidth+this.tileSpacing;s=this.tileMargin,a+=this.tileHeight+this.tileSpacing}return this}});d.exports=n},function(d,w,e){var n=e(0),t=e(13),r=e(48),o=e(6),i=e(30),s=e(7),a=e(27),u=e(141),l=e(4),c=new n({Extends:o,Mixins:[t.Alpha,t.Visible],initialize:function(h,f,g,p){h===void 0&&(h=0),f===void 0&&(f=0),g===void 0&&(g=0),p===void 0&&(p=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.resolution=1,this.roundPixels=!1,this.useBounds=!1,this.worldView=new s,this.dirty=!0,this._x=h,this._y=f,this._cx=0,this._cy=0,this._cw=0,this._ch=0,this._width=g,this._height=p,this._bounds=new s,this._scrollX=0,this._scrollY=0,this._zoom=1,this._rotation=0,this.matrix=new a,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(g/2,p/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null},setOrigin:function(h,f){return h===void 0&&(h=.5),f===void 0&&(f=h),this.originX=h,this.originY=f,this},getScroll:function(h,f,g){g===void 0&&(g=new l);var p=.5*this.width,v=.5*this.height;return g.x=h-p,g.y=f-v,this.useBounds&&(g.x=this.clampX(g.x),g.y=this.clampY(g.y)),g},centerOnX:function(h){var f=.5*this.width;return this.midPoint.x=h,this.scrollX=h-f,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(h){var f=.5*this.height;return this.midPoint.y=h,this.scrollY=h-f,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(h,f){return this.centerOnX(h),this.centerOnY(f),this},centerToBounds:function(){var h,f,g;return this.useBounds&&(h=this._bounds,f=.5*this.width,g=.5*this.height,this.midPoint.set(h.centerX,h.centerY),this.scrollX=h.centerX-f,this.scrollY=h.centerY-g),this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(h){if(this.disableCull)return h;var f=this.matrix.matrix,g=f[0],p=f[1],v=f[2],T=f[3];if(!(g*T-p*v))return h;for(var E=f[4],M=f[5],A=this.scrollX,C=this.scrollY,P=this.width,R=this.height,D=this.y,I=D+R,W=this.x,G=W+P,Y=this.culledObjects,j=h.length,ee=Y.length=0;ee<j;++ee){var te,F,U,K,oe=h[ee];oe.hasOwnProperty("width")&&!oe.parentContainer?(te=oe.width,F=oe.height,W<((U=oe.x-A*oe.scrollFactorX-te*oe.originX)+te)*g+((K=oe.y-C*oe.scrollFactorY-F*oe.originY)+F)*v+E&&U*g+K*v+E<G&&D<(U+te)*p+(K+F)*T+M&&U*p+K*T+M<I&&Y.push(oe)):Y.push(oe)}return Y},getWorldPoint:function(h,f,g){g===void 0&&(g=new l);var p=this.matrix.matrix,v=p[0],T=p[1],E=p[2],M=p[3],A=p[4],C=p[5],P=v*M-T*E;if(!P)return g.x=h,g.y=f,g;var R=M*(P=1/P),D=-T*P,I=-E*P,W=v*P,G=(E*C-M*A)*P,Y=(T*A-v*C)*P,j=Math.cos(this.rotation),ee=Math.sin(this.rotation),te=this.zoom,F=this.resolution,U=this.scrollX,K=this.scrollY,oe=h+(U*j-K*ee)*te,ae=f+(U*ee+K*j)*te;return g.x=(oe*R+ae*I)*F+G,g.y=(oe*D+ae*W)*F+Y,g},ignore:function(h){var f=this.id;Array.isArray(h)||(h=[h]);for(var g=0;g<h.length;g++){var p=h[g];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=f}return this},preRender:function(h){var f=this.width,g=this.height,p=.5*f,v=.5*g,T=this.zoom*h,E=this.matrix,M=f*this.originX,A=g*this.originY,C=this.scrollX,P=this.scrollY;this.useBounds&&(C=this.clampX(C),P=this.clampY(P)),this.roundPixels&&(M=Math.round(M),A=Math.round(A));var R=(this.scrollX=C)+p,D=(this.scrollY=P)+v;this.midPoint.set(R,D);var I=f/T,W=g/T;this.worldView.setTo(R-I/2,D-W/2,I,W),E.applyITRS(this.x+M,this.y+A,this.rotation,T,T),E.translate(-M,-A)},clampX:function(h){var f=this._bounds,g=this.displayWidth,p=f.x+(g-this.width)/2,v=Math.max(p,p+f.width-g);return h<p?h=p:v<h&&(h=v),h},clampY:function(h){var f=this._bounds,g=this.displayHeight,p=f.y+(g-this.height)/2,v=Math.max(p,p+f.height-g);return h<p?h=p:v<h&&(h=v),h},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(h){return h===void 0&&(h=0),this.rotation=r(h),this},setBackgroundColor:function(h){return h===void 0&&(h="rgba(0,0,0,0)"),this.backgroundColor=u(h),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(h,f,g,p,v){return v===void 0&&(v=!1),this._bounds.setTo(h,f,g,p),this.dirty=!0,this.useBounds=!0,v?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(h){h===void 0&&(h=new s);var f=this._bounds;return h.setTo(f.x,f.y,f.width,f.height),h},setName:function(h){return h===void 0&&(h=""),this.name=h,this},setPosition:function(h,f){return f===void 0&&(f=h),this.x=h,this.y=f,this},setRotation:function(h){return h===void 0&&(h=0),this.rotation=h,this},setRoundPixels:function(h){return this.roundPixels=h,this},setScene:function(h){this.scene&&this._customViewport&&this.sceneManager.customViewports--;var f=(this.scene=h).sys;this.sceneManager=f.game.scene,this.scaleManager=f.scale,this.cameraManager=f.cameras;var g=this.scaleManager.resolution;return this.resolution=g,this._cx=this._x*g,this._cy=this._y*g,this._cw=this._width*g,this._ch=this._height*g,this.updateSystem(),this},setScroll:function(h,f){return f===void 0&&(f=h),this.scrollX=h,this.scrollY=f,this},setSize:function(h,f){return f===void 0&&(f=h),this.width=h,this.height=f,this},setViewport:function(h,f,g,p){return this.x=h,this.y=f,this.width=g,this.height=p,this},setZoom:function(h){return h===void 0&&(h=1),h===0&&(h=.001),this.zoom=h,this},setMask:function(h,f){return f===void 0&&(f=!0),this.mask=h,this._maskCamera=f?this.cameraManager.default:this,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var h={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(h.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),h},update:function(){},updateSystem:function(){var h,f;this.scaleManager&&(h=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,f=this.sceneManager,h&&!this._customViewport?f.customViewports++:!h&&this._customViewport&&f.customViewports--,this.dirty=!0,this._customViewport=h)},destroy:function(){this.emit(i.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(h){this._x=h,this._cx=h*this.resolution,this.updateSystem()}},y:{get:function(){return this._y},set:function(h){this._y=h,this._cy=h*this.resolution,this.updateSystem()}},width:{get:function(){return this._width},set:function(h){this._width=h,this._cw=h*this.resolution,this.updateSystem()}},height:{get:function(){return this._height},set:function(h){this._height=h,this._ch=h*this.resolution,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(h){this._scrollX=h,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(h){this._scrollY=h,this.dirty=!0}},zoom:{get:function(){return this._zoom},set:function(h){this._zoom=h,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=h,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});d.exports=c},function(d,w,e){"use strict";function n(E,M,A){A=A||2;var C,P,R,D,I,W,G,Y=M&&M.length,j=Y?M[0]*A:E.length,ee=t(E,0,j,A,!0),te=[];if(!ee||ee.next===ee.prev)return te;if(Y&&(ee=function(U,K,oe,ae){var ce,re,ve,Se,de,pe=[];for(ce=0,re=K.length;ce<re;ce++)ve=K[ce]*ae,Se=ce<re-1?K[ce+1]*ae:U.length,(de=t(U,ve,Se,ae,!1))===de.next&&(de.steiner=!0),pe.push(function(Ae){for(var Oe=Ae,Fe=Ae;Oe.x<Fe.x&&(Fe=Oe),Oe=Oe.next,Oe!==Ae;);return Fe}(de));for(pe.sort(i),ce=0;ce<pe.length;ce++)(function(Ae,Oe){{var Fe;(Oe=function(Ve,ze){var Xe,Ge=ze,pt=Ve.x,lt=Ve.y,xt=-1/0;do{if(lt<=Ge.y&&lt>=Ge.next.y&&Ge.next.y!==Ge.y){var it=Ge.x+(lt-Ge.y)*(Ge.next.x-Ge.x)/(Ge.next.y-Ge.y);if(it<=pt&&xt<it){if((xt=it)===pt){if(lt===Ge.y)return Ge;if(lt===Ge.next.y)return Ge.next}Xe=Ge.x<Ge.next.x?Ge:Ge.next}}Ge=Ge.next}while(Ge!==ze);if(!Xe)return null;if(pt===xt)return Xe.prev;var Et,gt=Xe,dt=Xe.x,St=Xe.y,mt=1/0;for(Ge=Xe.next;Ge!==gt;)pt>=Ge.x&&Ge.x>=dt&&pt!==Ge.x&&a(lt<St?pt:xt,lt,dt,St,lt<St?xt:pt,lt,Ge.x,Ge.y)&&((Et=Math.abs(lt-Ge.y)/(pt-Ge.x))<mt||Et===mt&&Ge.x>Xe.x)&&h(Ge,Ve)&&(Xe=Ge,mt=Et),Ge=Ge.next;return Xe}(Ae,Oe))&&r(Fe=f(Oe,Ae),Fe.next)}})(pe[ce],oe),oe=r(oe,oe.next);return oe}(E,M,ee,A)),E.length>80*A){C=R=E[0],P=D=E[1];for(var F=A;F<j;F+=A)(I=E[F])<C&&(C=I),(W=E[F+1])<P&&(P=W),R<I&&(R=I),D<W&&(D=W);G=(G=Math.max(R-C,D-P))!==0?1/G:0}return o(ee,te,A,C,P,G),te}function t(E,M,A,C,P){var R,D;if(P===0<T(E,M,A,C))for(R=M;R<A;R+=C)D=g(R,E[R],E[R+1],D);else for(R=A-C;M<=R;R-=C)D=g(R,E[R],E[R+1],D);return D&&l(D,D.next)&&(p(D),D=D.next),D}function r(E,M){if(!E)return E;M=M||E;var A,C=E;do if(A=!1,C.steiner||!l(C,C.next)&&u(C.prev,C,C.next)!==0)C=C.next;else{if(p(C),(C=M=C.prev)===C.next)break;A=!0}while(A||C!==M);return M}function o(E,M,A,C,P,R,D){if(E){!D&&R&&function(Y,j,ee,te){for(var F=Y;F.z===null&&(F.z=s(F.x,F.y,j,ee,te)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next,F!==Y;);F.prevZ.nextZ=null,F.prevZ=null,function(U){var K,oe,ae,ce,re,ve,Se,de,pe=1;do{for(oe=U,re=U=null,ve=0;oe;){for(ve++,ae=oe,K=Se=0;K<pe&&(Se++,ae=ae.nextZ);K++);for(de=pe;0<Se||0<de&&ae;)Se!==0&&(de===0||!ae||oe.z<=ae.z)?(oe=(ce=oe).nextZ,Se--):(ae=(ce=ae).nextZ,de--),re?re.nextZ=ce:U=ce,ce.prevZ=re,re=ce;oe=ae}re.nextZ=null,pe*=2}while(1<ve)}(F)}(E,C,P,R);for(var I,W,G=E;E.prev!==E.next;)if(I=E.prev,W=E.next,R?function(Y,j,ee,te){var F=Y.prev,U=Y,K=Y.next;if(0<=u(F,U,K))return!1;for(var oe=F.x<U.x?F.x<K.x?F.x:K.x:U.x<K.x?U.x:K.x,ae=F.y<U.y?F.y<K.y?F.y:K.y:U.y<K.y?U.y:K.y,ce=F.x>U.x?F.x>K.x?F.x:K.x:U.x>K.x?U.x:K.x,re=F.y>U.y?F.y>K.y?F.y:K.y:U.y>K.y?U.y:K.y,ve=s(oe,ae,j,ee,te),Se=s(ce,re,j,ee,te),de=Y.prevZ,pe=Y.nextZ;de&&de.z>=ve&&pe&&pe.z<=Se;){if(de!==Y.prev&&de!==Y.next&&a(F.x,F.y,U.x,U.y,K.x,K.y,de.x,de.y)&&0<=u(de.prev,de,de.next)||(de=de.prevZ,pe!==Y.prev&&pe!==Y.next&&a(F.x,F.y,U.x,U.y,K.x,K.y,pe.x,pe.y)&&0<=u(pe.prev,pe,pe.next)))return!1;pe=pe.nextZ}for(;de&&de.z>=ve;){if(de!==Y.prev&&de!==Y.next&&a(F.x,F.y,U.x,U.y,K.x,K.y,de.x,de.y)&&0<=u(de.prev,de,de.next))return!1;de=de.prevZ}for(;pe&&pe.z<=Se;){if(pe!==Y.prev&&pe!==Y.next&&a(F.x,F.y,U.x,U.y,K.x,K.y,pe.x,pe.y)&&0<=u(pe.prev,pe,pe.next))return!1;pe=pe.nextZ}return!0}(E,C,P,R):function(Y){var j=Y.prev,ee=Y,te=Y.next;if(0<=u(j,ee,te))return!1;for(var F=Y.next.next;F!==Y.prev;){if(a(j.x,j.y,ee.x,ee.y,te.x,te.y,F.x,F.y)&&0<=u(F.prev,F,F.next))return!1;F=F.next}return!0}(E))M.push(I.i/A),M.push(E.i/A),M.push(W.i/A),p(E),E=W.next,G=W.next;else if((E=W)===G){D?D===1?o(E=function(Y,j,ee){var te=Y;do{var F=te.prev,U=te.next.next;!l(F,U)&&c(F,te,te.next,U)&&h(F,U)&&h(U,F)&&(j.push(F.i/ee),j.push(te.i/ee),j.push(U.i/ee),p(te),p(te.next),te=Y=U),te=te.next}while(te!==Y);return te}(E,M,A),M,A,C,P,R,2):D===2&&function(Y,j,ee,te,F,U){var K=Y;do{for(var oe=K.next.next;oe!==K.prev;){if(K.i!==oe.i&&function(ce,re){return ce.next.i!==re.i&&ce.prev.i!==re.i&&!function(ve,Se){var de=ve;do{if(de.i!==ve.i&&de.next.i!==ve.i&&de.i!==Se.i&&de.next.i!==Se.i&&c(de,de.next,ve,Se))return!0;de=de.next}while(de!==ve);return!1}(ce,re)&&h(ce,re)&&h(re,ce)&&function(ve,Se){for(var de=ve,pe=!1,Ae=(ve.x+Se.x)/2,Oe=(ve.y+Se.y)/2;de.y>Oe!=de.next.y>Oe&&de.next.y!==de.y&&Ae<(de.next.x-de.x)*(Oe-de.y)/(de.next.y-de.y)+de.x&&(pe=!pe),de=de.next,de!==ve;);return pe}(ce,re)}(K,oe)){var ae=f(K,oe);return K=r(K,K.next),ae=r(ae,ae.next),o(K,j,ee,te,F,U),o(ae,j,ee,te,F,U)}oe=oe.next}K=K.next}while(K!==Y)}(E,M,A,C,P,R):o(r(E),M,A,C,P,R,1);break}}}function i(E,M){return E.x-M.x}function s(E,M,A,C,P){return(E=1431655765&((E=858993459&((E=252645135&((E=16711935&((E=32767*(E-A)*P)|E<<8))|E<<4))|E<<2))|E<<1))|(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-C)*P)|M<<8))|M<<4))|M<<2))|M<<1))<<1}function a(E,M,A,C,P,R,D,I){return 0<=(P-D)*(M-I)-(E-D)*(R-I)&&0<=(E-D)*(C-I)-(A-D)*(M-I)&&0<=(A-D)*(R-I)-(P-D)*(C-I)}function u(E,M,A){return(M.y-E.y)*(A.x-M.x)-(M.x-E.x)*(A.y-M.y)}function l(E,M){return E.x===M.x&&E.y===M.y}function c(E,M,A,C){return l(E,M)&&l(A,C)||l(E,C)&&l(A,M)||0<u(E,M,A)!=0<u(E,M,C)&&0<u(A,C,E)!=0<u(A,C,M)}function h(E,M){return u(E.prev,E,E.next)<0?0<=u(E,M,E.next)&&0<=u(E,E.prev,M):u(E,M,E.prev)<0||u(E,E.next,M)<0}function f(E,M){var A=new v(E.i,E.x,E.y),C=new v(M.i,M.x,M.y),P=E.next,R=M.prev;return(E.next=M).prev=E,(A.next=P).prev=A,(C.next=A).prev=C,(R.next=C).prev=R,C}function g(E,M,A,C){var P=new v(E,M,A);return C?(P.next=C.next,(P.prev=C).next.prev=P,C.next=P):(P.prev=P).next=P,P}function p(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function v(E,M,A){this.i=E,this.x=M,this.y=A,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(E,M,A,C){for(var P=0,R=M,D=A-C;R<A;R+=C)P+=(E[D]-E[R])*(E[R+1]+E[D+1]),D=R;return P}(d.exports=n).deviation=function(E,M,A,C){var P=M&&M.length,R=P?M[0]*A:E.length,D=Math.abs(T(E,0,R,A));if(P)for(var I=0,W=M.length;I<W;I++){var G=M[I]*A,Y=I<W-1?M[I+1]*A:E.length;D-=Math.abs(T(E,G,Y,A))}for(var j=0,I=0;I<C.length;I+=3){var ee=C[I]*A,te=C[I+1]*A,F=C[I+2]*A;j+=Math.abs((E[ee]-E[F])*(E[1+te]-E[1+ee])-(E[ee]-E[te])*(E[1+F]-E[1+ee]))}return D===0&&j===0?0:Math.abs((j-D)/D)},n.flatten=function(E){for(var M=E[0][0].length,A={vertices:[],holes:[],dimensions:M},C=0,P=0;P<E.length;P++){for(var R=0;R<E[P].length;R++)for(var D=0;D<M;D++)A.vertices.push(E[P][R][D]);0<P&&(C+=E[P-1].length,A.holes.push(C))}return A}},function(d,w,e){var n=e(0),t=e(82),r=e(324),o=e(325),i=e(35),s=e(162),a=new n({initialize:function(u,l,c,h){u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=0),this.type=i.ELLIPSE,this.x=u,this.y=l,this.width=c,this.height=h},contains:function(u,l){return t(this,u,l)},getPoint:function(u,l){return r(this,u,l)},getPoints:function(u,l,c){return o(this,u,l,c)},getRandomPoint:function(u){return s(this,u)},setTo:function(u,l,c,h){return this.x=u,this.y=l,this.width=c,this.height=h,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,l){return l===void 0&&(l=u),this.x=u,this.y=l,this},setSize:function(u,l){return l===void 0&&(l=u),this.width=u,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});d.exports=a},function(d,w,e){var n=e(0),t=e(24),r=e(26),o=e(11),i=e(2),s=e(5),a=e(9),u=new n({Extends:r,initialize:function(l,c,h,f,g){var p,v="json";a(c)&&(c=i(p=c,"key"),h=i(p,"url"),f=i(p,"xhrSettings"),v=i(p,"extension",v),g=i(p,"dataKey",g));var T={type:"json",cache:l.cacheManager.json,extension:v,responseType:"text",key:c,url:h,xhrSettings:f,config:g};r.call(this,l,T),a(h)&&(this.data=g?s(h,g):h,this.state=t.FILE_POPULATED)},onProcess:function(){var l,c;this.state!==t.FILE_POPULATED&&(this.state=t.FILE_PROCESSING,l=JSON.parse(this.xhrLoader.responseText),c=this.config,this.data=typeof c=="string"?s(l,c,l):l),this.onProcessComplete()}});o.register("json",function(l,c,h,f){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new u(this,l[g]));else this.addFile(new u(this,l,c,f,h));return this}),d.exports=u},function(d,w,e){d.exports={ADD_ANIMATION:e(470),ANIMATION_COMPLETE:e(471),ANIMATION_REPEAT:e(472),ANIMATION_RESTART:e(473),ANIMATION_START:e(474),PAUSE_ALL:e(475),REMOVE_ANIMATION:e(476),RESUME_ALL:e(477),SPRITE_ANIMATION_COMPLETE:e(478),SPRITE_ANIMATION_KEY_COMPLETE:e(479),SPRITE_ANIMATION_KEY_REPEAT:e(480),SPRITE_ANIMATION_KEY_RESTART:e(481),SPRITE_ANIMATION_KEY_START:e(482),SPRITE_ANIMATION_KEY_UPDATE:e(483),SPRITE_ANIMATION_REPEAT:e(484),SPRITE_ANIMATION_RESTART:e(485),SPRITE_ANIMATION_START:e(486),SPRITE_ANIMATION_UPDATE:e(487)}},function(d,w){d.exports=function(e){return 2*(e.width+e.height)}},function(d,w){d.exports=function(e,n,t){return t===void 0&&(t=1e-4),Math.abs(e-n)<t}},function(d,w,e){var n=e(245),t=e(246),r=e(247),o=e(248),i=e(249),s=e(250),a=e(251),u=e(252),l=e(253),c=e(254),h=e(255),f=e(256);d.exports={Power0:a,Power1:u.Out,Power2:o.Out,Power3:l.Out,Power4:c.Out,Linear:a,Quad:u.Out,Cubic:o.Out,Quart:l.Out,Quint:c.Out,Sine:h.Out,Expo:s.Out,Circ:r.Out,Elastic:i.Out,Back:n.Out,Bounce:t.Out,Stepped:f,"Quad.easeIn":u.In,"Cubic.easeIn":o.In,"Quart.easeIn":l.In,"Quint.easeIn":c.In,"Sine.easeIn":h.In,"Expo.easeIn":s.In,"Circ.easeIn":r.In,"Elastic.easeIn":i.In,"Back.easeIn":n.In,"Bounce.easeIn":t.In,"Quad.easeOut":u.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":l.Out,"Quint.easeOut":c.Out,"Sine.easeOut":h.Out,"Expo.easeOut":s.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":i.Out,"Back.easeOut":n.Out,"Bounce.easeOut":t.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":c.InOut,"Sine.easeInOut":h.InOut,"Expo.easeInOut":s.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":i.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":t.InOut}},function(d,w){d.exports=function(e,n,t){return(n-e)*t+e}},function(d,w,e){(function(n){var t={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};d.exports=function(){var r=navigator.userAgent;/Windows/.test(r)?t.windows=!0:/Mac OS/.test(r)&&!/like Mac OS/.test(r)?t.macOS=!0:/Android/.test(r)?t.android=!0:/Linux/.test(r)?t.linux=!0:/iP[ao]d|iPhone/i.test(r)?(t.iOS=!0,navigator.appVersion.match(/OS (\d+)/),t.iOSVersion=parseInt(RegExp.$1,10),t.iPhone=r.toLowerCase().indexOf("iphone")!==-1,t.iPad=r.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(r)||/\bKF[A-Z][A-Z]+/.test(r)||/Silk.*Mobile Safari/.test(r)?t.kindle=!0:/CrOS/.test(r)&&(t.chromeOS=!0),(/Windows Phone/i.test(r)||/IEMobile/i.test(r))&&(t.android=!1,t.iOS=!1,t.macOS=!1,t.windows=!0,t.windowsPhone=!0);var o=/Silk/.test(r);return(t.windows||t.macOS||t.linux&&!o||t.chromeOS)&&(t.desktop=!0),(t.windowsPhone||/Windows NT/i.test(r)&&/Touch/i.test(r))&&(t.desktop=!1),navigator.standalone&&(t.webApp=!0),window.cordova!==void 0&&(t.cordova=!0),n!==void 0&&n.versions&&n.versions.node&&(t.node=!0),t.node&&typeof n.versions=="object"&&(t.nodeWebkit=!!n.versions["node-webkit"],t.electron=!!n.versions.electron),window.ejecta!==void 0&&(t.ejecta=!0),/Crosswalk/.test(r)&&(t.crosswalk=!0),t.pixelRatio=window.devicePixelRatio||1,t}()}).call(this,e(602))},function(d,w,e){var n,t=e(99),r={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};d.exports=(n=navigator.userAgent,/Edge\/\d+/.test(n)?r.edge=!0:/Chrome\/(\d+)/.test(n)&&!t.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(n)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(n)&&t.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(n)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(n)?r.opera=!0:/Safari/.test(n)&&!t.windowsPhone?r.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(n)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(n)&&(r.silk=!0),r)},function(d,w){d.exports=function(e,n){return 0<e&&(e&e-1)==0&&0<n&&(n&n-1)==0}},function(d,w,e){d.exports={ADD:e(654),ERROR:e(655),LOAD:e(656),READY:e(657),REMOVE:e(658)}},function(d,w,e){var n=e(0),t=e(285),r=new n({initialize:function(o,i){this.parent=o,(this.events=i)||(this.events=o.events?o.events:o),this.list={},this.values={},this._frozen=!1,!o.hasOwnProperty("sys")&&this.events&&this.events.once("destroy",this.destroy,this)},get:function(o){var i=this.list;if(Array.isArray(o)){for(var s=[],a=0;a<o.length;a++)s.push(i[o[a]]);return s}return i[o]},getAll:function(){var o={};for(var i in this.list)this.list.hasOwnProperty(i)&&(o[i]=this.list[i]);return o},query:function(o){var i={};for(var s in this.list)this.list.hasOwnProperty(s)&&s.match(o)&&(i[s]=this.list[s]);return i},set:function(o,i){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,i);for(var s in o)this.setValue(s,o[s]);return this},inc:function(o,i){if(this._frozen)return this;i===void 0&&(i=1);var s=this.get(o);return s===void 0&&(s=0),this.set(o,s+i),this},toggle:function(o){return this._frozen||this.set(o,!this.get(o)),this},setValue:function(o,i){return this._frozen||(this.has(o)?this.values[o]=i:(a=(s=this).list,u=this.events,l=this.parent,Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return a[o]},set:function(c){var h;s._frozen||(h=a[o],a[o]=c,u.emit(t.CHANGE_DATA,l,o,c,h),u.emit(t.CHANGE_DATA_KEY+o,l,c,h))}}),a[o]=i,u.emit(t.SET_DATA,l,o,i))),this;var s,a,u,l},each:function(o,i){for(var s=[this.parent,null,void 0],a=1;a<arguments.length;a++)s.push(arguments[a]);for(var u in this.list)s[1]=u,s[2]=this.list[u],o.apply(i,s);return this},merge:function(o,i){for(var s in i===void 0&&(i=!0),o)o.hasOwnProperty(s)&&(i||!i&&!this.has(s))&&this.setValue(s,o[s]);return this},remove:function(o){if(this._frozen)return this;if(!Array.isArray(o))return this.removeValue(o);for(var i=0;i<o.length;i++)this.removeValue(o[i]);return this},removeValue:function(o){var i;return this.has(o)&&(i=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(t.REMOVE_DATA,this.parent,o,i)),this},pop:function(o){var i=void 0;return!this._frozen&&this.has(o)&&(i=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(t.REMOVE_DATA,this.parent,o,i)),i},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(t.CHANGE_DATA),this.events.off(t.SET_DATA),this.events.off(t.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var i in this.list)this.list[i]!==void 0&&o++;return o}}});d.exports=r},function(d,w,e){var n=e(65);d.exports=function(t,r,o,i){if(i===void 0&&(i=t),!Array.isArray(r))return(a=t.indexOf(r))!==-1?(n(t,a),o&&o.call(i,r),r):null;for(var s=r.length-1;0<=s;){var a,u=r[s];(a=t.indexOf(u))!==-1?(n(t,a),o&&o.call(i,u)):r.pop(),s--}return r}},function(d,w){d.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(d,w){d.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(d,w,e){var n=e(0),t=e(66),r=e(6),o=e(55),i=e(15),s=e(1),a=e(310),u=e(311),l=new n({Extends:r,initialize:function(c){r.call(this),this.game=c,this.jsonCache=c.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,c.events.on(i.BLUR,this.onGameBlur,this),c.events.on(i.FOCUS,this.onGameFocus,this),c.events.on(i.PRE_STEP,this.update,this),c.events.once(i.DESTROY,this.destroy,this)},add:s,addAudioSprite:function(c,h){h===void 0&&(h={});var f,g,p=this.add(c,h);for(var v in p.spritemap=this.jsonCache.get(c).spritemap,p.spritemap)p.spritemap.hasOwnProperty(v)&&(f=t(h),g=p.spritemap[v],f.loop=!!g.hasOwnProperty("loop")&&g.loop,p.addMarker({name:v,start:g.start,duration:g.end-g.start,config:f}));return p},get:function(c){return u(this.sounds,"key",c)},getAll:function(c){return a(this.sounds,"key",c)},play:function(c,h){var f=this.add(c);return f.once(o.COMPLETE,f.destroy,f),h?h.name?(f.addMarker(h),f.play(h.name)):f.play(h):f.play()},playAudioSprite:function(c,h,f){var g=this.addAudioSprite(c);return g.once(o.COMPLETE,g.destroy,g),g.play(h,f)},remove:function(c){var h=this.sounds.indexOf(c);return h!==-1&&(c.destroy(),this.sounds.splice(h,1),!0)},removeAll:function(){this.sounds.forEach(function(c){c.destroy()}),this.sounds.length=0},removeByKey:function(c){for(var h=0,f=this.sounds.length-1;0<=f;f--){var g=this.sounds[f];g.key===c&&(g.destroy(),this.sounds.splice(f,1),h++)}return h},pauseAll:function(){this.forEachActiveSound(function(c){c.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(c){c.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(c){c.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(c){var h=0;return this.getAll(c).forEach(function(f){f.stop()&&h++}),h},unlock:s,onBlur:s,onFocus:s,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(c,h){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var f=this.sounds.length-1;0<=f;f--)this.sounds[f].pendingRemove&&this.sounds.splice(f,1);this.sounds.forEach(function(g){g.update(c,h)})},destroy:function(){this.game.events.off(i.BLUR,this.onGameBlur,this),this.game.events.off(i.FOCUS,this.onGameFocus,this),this.game.events.off(i.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(c,h){var f=this;this.sounds.forEach(function(g,p){g&&!g.pendingRemove&&c.call(h||f,g,p,f.sounds)})},setRate:function(c){return this.rate=c,this},rate:{get:function(){return this._rate},set:function(c){this._rate=c,this.forEachActiveSound(function(h){h.calculateRate()}),this.emit(o.GLOBAL_RATE,this,c)}},setDetune:function(c){return this.detune=c,this},detune:{get:function(){return this._detune},set:function(c){this._detune=c,this.forEachActiveSound(function(h){h.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,c)}}});d.exports=l},function(d,w,e){var n=e(0),t=e(6),r=e(55),o=e(16),i=e(1),s=new n({Extends:t,initialize:function(a,u,l){t.call(this),this.manager=a,this.key=u,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},this.currentConfig=this.config,this.config=o(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(a){return!(!a||!a.name||typeof a.name!="string")&&(this.markers[a.name]?(console.error("addMarker "+a.name+" already exists in Sound"),!1):(a=o(!0,{name:"",start:0,duration:this.totalDuration-(a.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},a),this.markers[a.name]=a,!0))},updateMarker:function(a){return!(!a||!a.name||typeof a.name!="string")&&(this.markers[a.name]?(this.markers[a.name]=o(!0,this.markers[a.name],a),!0):(console.warn("Audio Marker: "+a.name+" missing in Sound: "+this.key),!1))},removeMarker:function(a){var u=this.markers[a];return u?(this.markers[a]=null,u):null},play:function(a,u){if(a===void 0&&(a=""),typeof a=="object"&&(u=a,a=""),typeof a!="string")return!1;if(a){if(!this.markers[a])return console.warn("Marker: "+a+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[a],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=o(this.currentConfig,u),this.isPlaying=!0,!(this.isPaused=!1)},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0)},resume:function(){return!(!this.isPaused||this.isPlaying)&&(this.isPlaying=!0,!(this.isPaused=!1))},stop:function(){return!(!this.isPaused&&!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:i,calculateRate:function(){var a=this.currentConfig.detune+this.manager.detune,u=Math.pow(1.0005777895065548,a);this.totalRate=this.currentConfig.rate*this.manager.rate*u},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});d.exports=s},function(d,w,e){d.exports={DESTROY:e(765),VIDEO_COMPLETE:e(766),VIDEO_CREATED:e(767),VIDEO_ERROR:e(768),VIDEO_LOOP:e(769),VIDEO_PLAY:e(770),VIDEO_SEEKED:e(771),VIDEO_SEEKING:e(772),VIDEO_STOP:e(773),VIDEO_TIMEOUT:e(774),VIDEO_UNLOCKED:e(775)}},function(d,w,e){var n=e(158),t=e(318);d.exports=function(r,o){if(o===void 0&&(o=90),!n(r))return null;if(typeof o!="string"&&(o=(o%360+360)%360),o===90||o===-270||o==="rotateLeft")(r=t(r)).reverse();else if(o===-90||o===270||o==="rotateRight")r.reverse(),r=t(r);else if(Math.abs(o)===180||o==="rotate180"){for(var i=0;i<r.length;i++)r[i].reverse();r.reverse()}return r}},function(d,w){d.exports=function(e){for(var n=e.length-1;0<n;n--){var t=Math.floor(Math.random()*(n+1)),r=e[n];e[n]=e[t],e[t]=r}return e}},function(d,w,e){var n=e(0),t=e(13),r=e(19),o=e(812),i=new n({Extends:r,Mixins:[t.Alpha,t.BlendMode,t.Depth,t.Flip,t.GetBounds,t.Mask,t.Origin,t.Pipeline,t.ScrollFactor,t.Size,t.TextureCrop,t.Tint,t.Transform,t.Visible,o],initialize:function(s,a,u,l,c){r.call(this,s,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,c),this.setPosition(a,u),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});d.exports=i},function(d,w,e){var n=e(14);d.exports=function(t,r,o,i,s){var a=t.strokeTint,u=n.getTintAppendFloatAlphaAndSwap(r.strokeColor,r.strokeAlpha*o);a.TL=u,a.TR=u,a.BL=u,a.BR=u;var l=r.pathData,c=l.length-1,h=r.lineWidth,f=h/2,g=l[0]-i,p=l[1]-s;r.closePath||(c-=2);for(var v=2;v<c;v+=2){var T=l[v]-i,E=l[v+1]-s;t.setTexture2D(),t.batchLine(g,p,T,E,f,f,h,v-2,!!r.closePath&&v===c-1),g=T,p=E}}},function(d,w,e){var n=e(5),t={},r={register:function(o,i,s,a,u){t[o]={plugin:i,mapping:s,settingsKey:a,configKey:u}},getPlugin:function(o){return t[o]},install:function(o){var i=o.scene.sys,s=i.settings.input,a=i.game.config;for(var u in t){var l=t[u].plugin,c=t[u].mapping,h=t[u].settingsKey,f=t[u].configKey;n(s,h,a[f])&&(o[c]=new l(o))}},remove:function(o){t.hasOwnProperty(o)&&delete t[o]}};d.exports=r},function(d,w,e){d.exports={ANY_KEY_DOWN:e(857),ANY_KEY_UP:e(858),COMBO_MATCH:e(859),DOWN:e(860),KEY_DOWN:e(861),KEY_UP:e(862),UP:e(863)}},function(d,w){d.exports=function(e,n,t,r,o,i){return e===void 0&&(e=""),n===void 0&&(n=!0),t===void 0&&(t=""),r===void 0&&(r=""),o===void 0&&(o=0),i===void 0&&(i=!1),{responseType:e,async:n,user:t,password:r,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:i}}},function(d,w,e){var n=e(0),t=e(168),r=e(71),o=new n({Extends:r,Mixins:[t.Acceleration,t.Angular,t.Bounce,t.Debug,t.Drag,t.Enable,t.Friction,t.Gravity,t.Immovable,t.Mass,t.Size,t.Velocity],initialize:function(i,s,a,u,l){r.call(this,i,s,a,u,l),this.body=null}});d.exports=o},function(d,w,e){d.exports={CalculateFacesAt:e(172),CalculateFacesWithin:e(42),Copy:e(966),CreateFromTiles:e(967),CullTiles:e(968),Fill:e(969),FilterTiles:e(970),FindByIndex:e(971),FindTile:e(972),ForEachTile:e(973),GetTileAt:e(119),GetTileAtWorldXY:e(974),GetTilesWithin:e(17),GetTilesWithinShape:e(975),GetTilesWithinWorldXY:e(1087),HasTileAt:e(377),HasTileAtWorldXY:e(1088),IsInLayerBounds:e(86),PutTileAt:e(181),PutTileAtWorldXY:e(1089),PutTilesAt:e(1090),Randomize:e(1091),RemoveTileAt:e(378),RemoveTileAtWorldXY:e(1092),RenderDebug:e(1093),ReplaceByIndex:e(356),SetCollision:e(1100),SetCollisionBetween:e(1101),SetCollisionByExclusion:e(1102),SetCollisionByProperty:e(1103),SetCollisionFromCollisionGroup:e(1104),SetTileIndexCallback:e(1105),SetTileLocationCallback:e(1106),Shuffle:e(1107),SwapByIndex:e(1108),TileToWorldX:e(120),TileToWorldXY:e(1109),TileToWorldY:e(121),WeightedRandomize:e(1110),WorldToTileX:e(51),WorldToTileXY:e(1111),WorldToTileY:e(52)}},function(d,w,e){var n=e(86);d.exports=function(t,r,o,i){if(o===void 0&&(o=!1),n(t,r,i)){var s=i.data[r][t]||null;return s!==null&&(s.index!==-1||o)?s:null}return null}},function(d,w){d.exports=function(e,n,t){var r=t.baseTileWidth,o=t.tilemapLayer,i=0;return o&&(n===void 0&&(n=o.scene.cameras.main),i=o.x+n.scrollX*(1-o.scrollFactorX),r*=o.scaleX),i+e*r}},function(d,w){d.exports=function(e,n,t){var r=t.baseTileHeight,o=t.tilemapLayer,i=0;return o&&(n===void 0&&(n=o.scene.cameras.main),i=o.y+n.scrollY*(1-o.scrollFactorY),r*=o.scaleY),i+e*r}},function(d,w){d.exports=function(e,n){return!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)&&!(e.right<n.x||e.bottom<n.y||e.x>n.right||e.y>n.bottom)}},function(d,w){d.exports=function(e,n,t){return e.hasOwnProperty(n)?typeof e[n]=="function"?function(r,o,i,s,a,u){return e[n](r,o,i,s,a,u)}:function(){return e[n]}:typeof t=="function"?t:function(){return t}}},function(d,w,e){var n=e(191),t=e(20),r=e(76),o=e(64),i=e(123),s=e(400),a=e(189),u=e(5),l=e(190),c=e(192),h=e(194);d.exports=function(f,g,p){p===void 0&&(p=n);for(var v=p.targets?p.targets:a(g),T=s(g),E=i(g,"delay",p.delay),M=i(g,"duration",p.duration),A=u(g,"easeParams",p.easeParams),C=o(u(g,"ease",p.ease),A),P=i(g,"hold",p.hold),R=i(g,"repeat",p.repeat),D=i(g,"repeatDelay",p.repeatDelay),I=r(g,"yoyo",p.yoyo),W=r(g,"flipX",p.flipX),G=r(g,"flipY",p.flipY),Y=[],j=0;j<T.length;j++)for(var ee=T[j].key,te=T[j].value,F=0;F<v.length;F++){var U=l(ee,te),K=h(v[F],F,ee,U.getEnd,U.getStart,U.getActive,o(u(te,"ease",C),A),i(te,"delay",E),i(te,"duration",M),r(te,"yoyo",I),i(te,"hold",P),i(te,"repeat",R),i(te,"repeatDelay",D),r(te,"flipX",W),r(te,"flipY",G));Y.push(K)}var oe=new c(f,Y,v);oe.offset=t(g,"offset",null),oe.completeDelay=t(g,"completeDelay",0),oe.loop=Math.round(t(g,"loop",0)),oe.loopDelay=Math.round(t(g,"loopDelay",0)),oe.paused=r(g,"paused",!1),oe.useFrames=r(g,"useFrames",!1);for(var ae=u(g,"callbackScope",oe),ce=[oe,null],re=c.TYPES,ve=0;ve<re.length;ve++){var Se,de,pe=re[ve],Ae=u(g,pe,!1);Ae&&(Se=u(g,pe+"Scope",ae),de=u(g,pe+"Params",[]),oe.setCallback(pe,Ae,ce.concat(de),Se))}return oe}},function(d,w){d.exports=function(e,n){return Math.random()*(n-e)+e}},function(d,w,e){var n=e(0),t=e(14),r=new n({initialize:function(o){this.name="WebGLPipeline",this.game=o.game,this.view=o.game.canvas,this.resolution=1,this.width=0,this.height=0,this.gl=o.gl,this.vertexCount=0,this.vertexCapacity=o.vertexCapacity,this.renderer=o.renderer,this.vertexData=o.vertices?o.vertices:new ArrayBuffer(o.vertexCapacity*o.vertexSize),this.vertexBuffer=this.renderer.createVertexBuffer(o.vertices?o.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=this.renderer.createProgram(o.vertShader,o.fragShader),this.attributes=o.attributes,this.vertexSize=o.vertexSize,this.topology=o.topology,this.bytes=new Uint8Array(this.vertexData),this.vertexComponentCount=t.getComponentCount(o.attributes,this.gl),this.flushLocked=!1,this.active=!1},boot:function(){},addAttribute:function(o,i,s,a,u){return this.attributes.push({name:o,size:i,type:this.renderer.glFormats[s],normalized:a,offset:u}),this.vertexComponentCount=t.getComponentCount(this.attributes,this.gl),this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(o,i,s){return this.width=o*s,this.height=i*s,this.resolution=s,this},bind:function(){var o=this.gl,i=this.vertexBuffer,s=this.attributes,a=this.program,u=this.renderer,l=this.vertexSize;u.setProgram(a),u.setVertexBuffer(i);for(var c=0;c<s.length;++c){var h=s[c],f=o.getAttribLocation(a,h.name);0<=f?(o.enableVertexAttribArray(f),o.vertexAttribPointer(f,h.size,h.type,h.normalized,l,h.offset)):f!==-1&&o.disableVertexAttribArray(f)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var o=this.gl,i=this.vertexCount,s=this.topology,a=this.vertexSize;if(i!==0)return o.bufferSubData(o.ARRAY_BUFFER,0,this.bytes.subarray(0,i*a)),o.drawArrays(s,0,i),this.vertexCount=0,this.flushLocked=!1,this;this.flushLocked=!1},destroy:function(){var o=this.gl;return o.deleteProgram(this.program),o.deleteBuffer(this.vertexBuffer),delete this.program,delete this.vertexBuffer,delete this.gl,this},setFloat1:function(o,i){return this.renderer.setFloat1(this.program,o,i),this},setFloat2:function(o,i,s){return this.renderer.setFloat2(this.program,o,i,s),this},setFloat3:function(o,i,s,a){return this.renderer.setFloat3(this.program,o,i,s,a),this},setFloat4:function(o,i,s,a,u){return this.renderer.setFloat4(this.program,o,i,s,a,u),this},setFloat1v:function(o,i){return this.renderer.setFloat1v(this.program,o,i),this},setFloat2v:function(o,i){return this.renderer.setFloat2v(this.program,o,i),this},setFloat3v:function(o,i){return this.renderer.setFloat3v(this.program,o,i),this},setFloat4v:function(o,i){return this.renderer.setFloat4v(this.program,o,i),this},setInt1:function(o,i){return this.renderer.setInt1(this.program,o,i),this},setInt2:function(o,i,s){return this.renderer.setInt2(this.program,o,i,s),this},setInt3:function(o,i,s,a){return this.renderer.setInt3(this.program,o,i,s,a),this},setInt4:function(o,i,s,a,u){return this.renderer.setInt4(this.program,o,i,s,a,u),this},setMatrix2:function(o,i,s){return this.renderer.setMatrix2(this.program,o,i,s),this},setMatrix3:function(o,i,s){return this.renderer.setMatrix3(this.program,o,i,s),this},setMatrix4:function(o,i,s){return this.renderer.setMatrix4(this.program,o,i,s),this}});d.exports=r},function(d,w,e){var n=e(0),t=e(203),r=e(7),o=e(4),i=new n({initialize:function(s){this.type=s,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(s,a){return a===void 0&&(a=32),s.strokePoints(this.getPoints(a))},getBounds:function(s,a){s=s||new r,a===void 0&&(a=16);var u=this.getLength();u<a&&(a=u/2);var l=Math.max(1,Math.round(u/a));return t(this.getSpacedPoints(l),s)},getDistancePoints:function(s){var a=this.getLength(),u=Math.max(1,a/s);return this.getSpacedPoints(u)},getEndPoint:function(s){return s===void 0&&(s=new o),this.getPointAt(1,s)},getLength:function(){var s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a,u=[],l=this.getPoint(0,this._tmpVec2A),c=0;u.push(0);for(var h=1;h<=s;h++)c+=(a=this.getPoint(h/s,this._tmpVec2B)).distance(l),u.push(c),l.copy(a);return this.cacheArcLengths=u},getPointAt:function(s,a){var u=this.getUtoTmapping(s);return this.getPoint(u,a)},getPoints:function(s,a,u){u===void 0&&(u=[]),s=s||(a?this.getLength()/a:this.defaultDivisions);for(var l=0;l<=s;l++)u.push(this.getPoint(l/s));return u},getRandomPoint:function(s){return s===void 0&&(s=new o),this.getPoint(Math.random(),s)},getSpacedPoints:function(s,a,u){u===void 0&&(u=[]),s=s||(a?this.getLength()/a:this.defaultDivisions);for(var l=0;l<=s;l++){var c=this.getUtoTmapping(l/s,null,s);u.push(this.getPoint(c))}return u},getStartPoint:function(s){return s===void 0&&(s=new o),this.getPointAt(0,s)},getTangent:function(s,a){a===void 0&&(a=new o);var u=s-1e-4,l=s+1e-4;return u<0&&(u=0),1<l&&(l=1),this.getPoint(u,this._tmpVec2A),this.getPoint(l,a),a.subtract(this._tmpVec2A).normalize()},getTangentAt:function(s,a){var u=this.getUtoTmapping(s);return this.getTangent(u,a)},getTFromDistance:function(s,a){return s<=0?0:this.getUtoTmapping(0,s,a)},getUtoTmapping:function(s,a,u){for(var l,c=this.getLengths(u),h=0,f=c.length,g=a?Math.min(a,c[f-1]):s*c[f-1],p=0,v=f-1;p<=v;)if((l=c[h=Math.floor(p+(v-p)/2)]-g)<0)p=h+1;else{if(!(0<l)){v=h;break}v=h-1}if(c[h=v]===g)return h/(f-1);var T=c[h];return(h+(g-T)/(c[h+1]-T))/(f-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});d.exports=i},function(d,w){d.exports=function(e,n){var t;if(n)typeof n=="string"?t=document.getElementById(n):typeof n=="object"&&n.nodeType===1&&(t=n);else if(e.parentElement||n===null)return e;return(t=t||document.body).appendChild(e),e}},function(d,w,e){var n=e(0),t=e(12),r=e(16),o=new n({initialize:function(i,s,a,u,l,c,h){this.texture=i,this.name=s,this.source=i.source[a],this.sourceIndex=a,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(c,h,u,l)},setSize:function(i,s,a,u){a===void 0&&(a=0),u===void 0&&(u=0),this.cutX=a,this.cutY=u,this.cutWidth=i,this.cutHeight=s,this.width=i,this.height=s,this.halfWidth=Math.floor(.5*i),this.halfHeight=Math.floor(.5*s),this.centerX=Math.floor(i/2),this.centerY=Math.floor(s/2);var l=this.data,c=l.cut;c.x=a,c.y=u,c.w=i,c.h=s,c.r=a+i,c.b=u+s,l.sourceSize.w=i,l.sourceSize.h=s,l.spriteSourceSize.w=i,l.spriteSourceSize.h=s,l.radius=.5*Math.sqrt(i*i+s*s);var h=l.drawImage;return h.x=a,h.y=u,h.width=i,h.height=s,this.updateUVs()},setTrim:function(i,s,a,u,l,c){var h=this.data,f=h.spriteSourceSize;return h.trim=!0,h.sourceSize.w=i,h.sourceSize.h=s,f.x=a,f.y=u,f.w=l,f.h=c,f.r=a+l,f.b=u+c,this.x=a,this.y=u,this.width=l,this.height=c,this.halfWidth=.5*l,this.halfHeight=.5*c,this.centerX=Math.floor(l/2),this.centerY=Math.floor(c/2),this.updateUVs()},setCropUVs:function(i,s,a,u,l,c,h){var f,g,p,v,T,E,M,A=this.cutX,C=this.cutY,P=this.cutWidth,R=this.cutHeight,D=this.realWidth,I=this.realHeight,W=A+(s=t(s,0,D)),G=C+(a=t(a,0,I)),Y=u=t(u,0,D-s),j=l=t(l,0,I-a),ee=this.data;ee.trim?(f=ee.spriteSourceSize,g=s+(u=t(u,0,P-s)),p=a+(l=t(l,0,R-a)),f.r<s||f.b<a||f.x>g||f.y>p?j=Y=G=W=0:(v=Math.max(f.x,s),T=Math.max(f.y,a),Y=E=Math.min(f.r,g)-v,j=M=Math.min(f.b,p)-T,W=c?A+(P-(v-f.x)-E):A+(v-f.x),G=h?C+(R-(T-f.y)-M):C+(T-f.y),s=v,a=T,u=E,l=M)):(c&&(W=A+(P-s-u)),h&&(G=C+(R-a-l)));var te=this.source.width,F=this.source.height;return i.u0=Math.max(0,W/te),i.v0=Math.max(0,G/F),i.u1=Math.min(1,(W+Y)/te),i.v1=Math.min(1,(G+j)/F),i.x=s,i.y=a,i.cx=W,i.cy=G,i.cw=Y,i.ch=j,i.width=u,i.height=l,i.flipX=c,i.flipY=h,i},updateCropUVs:function(i,s,a){return this.setCropUVs(i,i.x,i.y,i.width,i.height,s,a)},updateUVs:function(){var i=this.cutX,s=this.cutY,a=this.cutWidth,u=this.cutHeight,l=this.data.drawImage;l.width=a,l.height=u;var c=this.source.width,h=this.source.height;return this.u0=i/c,this.v0=s/h,this.u1=(i+a)/c,this.v1=(s+u)/h,this},updateUVsInverted:function(){var i=this.source.width,s=this.source.height;return this.u0=(this.cutX+this.cutHeight)/i,this.v0=this.cutY/s,this.u1=this.cutX/i,this.v1=(this.cutY+this.cutWidth)/s,this},clone:function(){var i=new o(this.texture,this.name,this.sourceIndex);return i.cutX=this.cutX,i.cutY=this.cutY,i.cutWidth=this.cutWidth,i.cutHeight=this.cutHeight,i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i.halfWidth=this.halfWidth,i.halfHeight=this.halfHeight,i.centerX=this.centerX,i.centerY=this.centerY,i.rotated=this.rotated,i.data=r(!0,i.data,this.data),i.updateUVs(),i},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});d.exports=o},function(d,w,e){var n=e(0),t=e(13),r=e(19),o=e(776),i=e(777),s=e(156),a=e(778),u=new n({Extends:r,Mixins:[t.Alpha,t.BlendMode,t.Depth,t.Mask,t.Origin,t.Pipeline,t.ScrollFactor,t.Texture,t.Tint,t.Transform,t.Visible,a],initialize:function(l,c,h,f,g,p,v){g===void 0&&(g=""),v===void 0&&(v=0),r.call(this,l,"BitmapText"),this.font=f;var T=this.scene.sys.cache.bitmapFont.get(f);this.fontData=T.data,this._text="",this._fontSize=p||this.fontData.size,this._letterSpacing=0,this._align=v,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.setTexture(T.texture,T.frame),this.setPosition(c,h),this.setOrigin(0,0),this.initPipeline(),this.setText(g)},setLeftAlign:function(){return this._align=u.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=u.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=u.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(l){return this._fontSize=l,this._dirty=!0,this},setLetterSpacing:function(l){return l===void 0&&(l=0),this._letterSpacing=l,this._dirty=!0,this},setText:function(l){return l||l===0||(l=""),Array.isArray(l)&&(l=l.join(`
`)),l!==this.text&&(this._text=l.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},getTextBounds:function(l){var c=this._bounds;return!this._dirty&&this.scaleX===c.scaleX&&this.scaleY===c.scaleY||(o(this,l,c),this._dirty=!1,this.updateDisplayOrigin()),c},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this._dirty=!0,this},setFont:function(l,c,h){var f;return c===void 0&&(c=this._fontSize),h===void 0&&(h=this._align),l===this.font||(f=this.scene.sys.cache.bitmapFont.get(l))&&(this.font=l,this.fontData=f.data,this._fontSize=c,this._align=h,this.setTexture(f.texture,f.frame),o(this,!1,this._bounds)),this},setMaxWidth:function(l,c){return this._maxWidth=l,this._dirty=!0,c!==void 0&&(this.wordWrapCharCode=c),this},align:{set:function(l){this._align=l,this._dirty=!0},get:function(){return this._align}},text:{set:function(l){this.setText(l)},get:function(){return this._text}},fontSize:{set:function(l){this._fontSize=l,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(l){this._letterSpacing=l,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(l){this._maxWidth=l,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var l=t.ToJSON(this),c={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return l.data=c,l}});u.ALIGN_LEFT=0,u.ALIGN_CENTER=1,u.ALIGN_RIGHT=2,u.ParseFromAtlas=i,u.ParseXMLBitmapFont=s,d.exports=u},function(d,w,e){(function(){function n(o,i){return t(o.slice(),i)}function t(o,i){typeof i!="function"&&(i=function(c,h){return String(c).localeCompare(h)});var s=o.length;if(s<=1)return o;for(var a=new Array(s),u=1;u<s;u*=2){r(o,i,u,a);var l=o;o=a,a=l}return o}n.inplace=function(o,i){var s=t(o,i);return s!==o&&r(s,null,o.length,o),o};var r=function(o,i,s,a){for(var u,l,c,h,f=o.length,g=0,p=2*s,v=0;v<f;v+=p)for(l=(u=v+s)+s,f<u&&(u=f),f<l&&(l=f),c=v,h=u;;)if(c<u&&h<l)i(o[c],o[h])<=0?a[g++]=o[c++]:a[g++]=o[h++];else if(c<u)a[g++]=o[c++];else{if(!(h<l))break;a[g++]=o[h++]}};d.exports=n})()},function(d,w){d.exports=function(e,n){return!!e.url&&(e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e.url:n+e.url)}},function(d,w,e){var n=new(e(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var r=0;r<t.length;r++)this.set(t[r])},set:function(t){return this.entries.indexOf(t)===-1&&this.entries.push(t),this},get:function(t,r){for(var o=0;o<this.entries.length;o++){var i=this.entries[o];if(i[t]===r)return i}},getArray:function(){return this.entries.slice(0)},delete:function(t){var r=this.entries.indexOf(t);return-1<r&&this.entries.splice(r,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var r=this.entries[t];console.log(r)}console.groupEnd()},each:function(t,r){var o,i=this.entries.slice(),s=i.length;if(r)for(o=0;o<s&&t.call(r,i[o],o)!==!1;o++);else for(o=0;o<s&&t(i[o],o)!==!1;o++);return this},iterate:function(t,r){var o,i=this.entries.length;if(r)for(o=0;o<i&&t.call(r,this.entries[o],o)!==!1;o++);else for(o=0;o<i&&t(this.entries[o],o)!==!1;o++);return this},iterateLocal:function(t){for(var r=[],o=1;o<arguments.length;o++)r.push(arguments[o]);var i=this.entries.length;for(o=0;o<i;o++){var s=this.entries[o];s[t].apply(s,r)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return-1<this.entries.indexOf(t)},union:function(t){var r=new n;return t.entries.forEach(function(o){r.set(o)}),this.entries.forEach(function(o){r.set(o)}),r},intersect:function(t){var r=new n;return this.entries.forEach(function(o){t.contains(o)&&r.set(o)}),r},difference:function(t){var r=new n;return this.entries.forEach(function(o){t.contains(o)||r.set(o)}),r},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});d.exports=n},function(d,w,e){var n=e(427),t=e(0),r=e(109),o=e(2),i=e(5),s=e(9),a=e(320),u=e(133),l=e(71),c=new t({initialize:function(h,f,g){g?f&&!Array.isArray(f)&&(f=[f]):Array.isArray(f)?s(f[0])&&(g=f,f=null):s(f)&&(g=f,f=null),this.scene=h,this.children=new u,this.isParent=!0,this.type="Group",this.classType=o(g,"classType",l),this.name=o(g,"name",""),this.active=o(g,"active",!0),this.maxSize=o(g,"maxSize",-1),this.defaultKey=o(g,"defaultKey",null),this.defaultFrame=o(g,"defaultFrame",null),this.runChildUpdate=o(g,"runChildUpdate",!1),this.createCallback=o(g,"createCallback",null),this.removeCallback=o(g,"removeCallback",null),this.createMultipleCallback=o(g,"createMultipleCallback",null),this.internalCreateCallback=o(g,"internalCreateCallback",null),this.internalRemoveCallback=o(g,"internalRemoveCallback",null),f&&this.addMultiple(f),g&&this.createMultiple(g)},create:function(h,f,g,p,v,T){if(h===void 0&&(h=0),f===void 0&&(f=0),g===void 0&&(g=this.defaultKey),p===void 0&&(p=this.defaultFrame),v===void 0&&(v=!0),T===void 0&&(T=!0),this.isFull())return null;var E=new this.classType(this.scene,h,f,g,p);return this.scene.sys.displayList.add(E),E.preUpdate&&this.scene.sys.updateList.add(E),E.visible=v,E.setActive(T),this.add(E),E},createMultiple:function(h){if(this.isFull())return[];Array.isArray(h)||(h=[h]);var f=[];if(h[0].key)for(var g=0;g<h.length;g++)var p=this.createFromConfig(h[g]),f=f.concat(p);return f},createFromConfig:function(h){if(this.isFull())return[];this.classType=o(h,"classType",this.classType);var f=o(h,"key",void 0),g=o(h,"frame",null),p=o(h,"visible",!0),v=o(h,"active",!0),T=[];if(f===void 0)return T;Array.isArray(f)||(f=[f]),Array.isArray(g)||(g=[g]);var E=o(h,"repeat",0),M=o(h,"randomKey",!1),A=o(h,"randomFrame",!1),C=o(h,"yoyo",!1),P=o(h,"quantity",!1),R=o(h,"frameQuantity",1),D=o(h,"max",0),I=a(f,g,{max:D,qty:P||R,random:M,randomB:A,repeat:E,yoyo:C});h.createCallback&&(this.createCallback=h.createCallback),h.removeCallback&&(this.removeCallback=h.removeCallback);for(var W=0;W<I.length;W++){var G=this.create(0,0,I[W].a,I[W].b,p,v);if(!G)break;T.push(G)}var Y=i(h,"setXY.x",0),j=i(h,"setXY.y",0),ee=i(h,"setXY.stepX",0),te=i(h,"setXY.stepY",0);n.SetXY(T,Y,j,ee,te);var F=i(h,"setRotation.value",0),U=i(h,"setRotation.step",0);n.SetRotation(T,F,U);var K=i(h,"setScale.x",1),oe=i(h,"setScale.y",K),ae=i(h,"setScale.stepX",0),ce=i(h,"setScale.stepY",0);n.SetScale(T,K,oe,ae,ce);var re=i(h,"setAlpha.value",1),ve=i(h,"setAlpha.step",0);n.SetAlpha(T,re,ve);var Se=i(h,"setDepth.value",0),de=i(h,"setDepth.step",0);n.SetDepth(T,Se,de);var pe=i(h,"setScrollFactor.x",1),Ae=i(h,"setScrollFactor.y",pe),Oe=i(h,"setScrollFactor.stepX",0),Fe=i(h,"setScrollFactor.stepY",0);n.SetScrollFactor(T,pe,Ae,Oe,Fe);var Ve=o(h,"hitArea",null),ze=o(h,"hitAreaCallback",null);Ve&&n.SetHitArea(T,Ve,ze);var Xe=o(h,"gridAlign",!1);return Xe&&n.GridAlign(T,Xe),this.createMultipleCallback&&this.createMultipleCallback.call(this,T),T},preUpdate:function(h,f){if(this.runChildUpdate&&this.children.size!==0)for(var g=this.children.entries.slice(),p=0;p<g.length;p++){var v=g[p];v.active&&v.update(h,f)}},add:function(h,f){return f===void 0&&(f=!1),this.isFull()||(this.children.set(h),this.internalCreateCallback&&this.internalCreateCallback.call(this,h),this.createCallback&&this.createCallback.call(this,h),f&&(this.scene.sys.displayList.add(h),h.preUpdate&&this.scene.sys.updateList.add(h)),h.on(r.DESTROY,this.remove,this)),this},addMultiple:function(h,f){if(f===void 0&&(f=!1),Array.isArray(h))for(var g=0;g<h.length;g++)this.add(h[g],f);return this},remove:function(h,f,g){return f===void 0&&(f=!1),g===void 0&&(g=!1),this.children.contains(h)&&(this.children.delete(h),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,h),this.removeCallback&&this.removeCallback.call(this,h),h.off(r.DESTROY,this.remove,this),g?h.destroy():f&&(h.scene.sys.displayList.remove(h),h.preUpdate&&h.scene.sys.updateList.remove(h))),this},clear:function(h,f){h===void 0&&(h=!1),f===void 0&&(f=!1);for(var g=this.children,p=0;p<g.size;p++){var v=g.entries[p];v.off(r.DESTROY,this.remove,this),f?v.destroy():h&&(v.scene.sys.displayList.remove(v),v.preUpdate&&v.scene.sys.updateList.remove(v))}return this.children.clear(),this},contains:function(h){return this.children.contains(h)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getFirst:function(h,f,g,p,v,T,E){return this.getHandler(!0,1,h,f,g,p,v,T,E)},getFirstNth:function(h,f,g,p,v,T,E,M){return this.getHandler(!0,h,f,g,p,v,T,E,M)},getLast:function(h,f,g,p,v,T,E){return this.getHandler(!1,1,h,f,g,p,v,T,E)},getLastNth:function(h,f,g,p,v,T,E,M){return this.getHandler(!1,h,f,g,p,v,T,E,M)},getHandler:function(h,f,g,p,v,T,E,M,A){var C,P;g===void 0&&(g=!1),p===void 0&&(p=!1);var R=0,D=this.children.entries;if(h)for(P=0;P<D.length;P++)if((C=D[P]).active===g){if(++R===f)break}else C=null;else for(P=D.length-1;0<=P;P--)if((C=D[P]).active===g){if(++R===f)break}else C=null;return C?(typeof v=="number"&&(C.x=v),typeof T=="number"&&(C.y=T),C):p?this.create(v,T,E,M,A):null},get:function(h,f,g,p,v){return this.getFirst(!1,!0,h,f,g,p,v)},getFirstAlive:function(h,f,g,p,v,T){return this.getFirst(!0,h,f,g,p,v,T)},getFirstDead:function(h,f,g,p,v,T){return this.getFirst(!1,h,f,g,p,v,T)},playAnimation:function(h,f){return n.PlayAnimation(this.children.entries,h,f),this},isFull:function(){return this.maxSize!==-1&&this.children.size>=this.maxSize},countActive:function(h){h===void 0&&(h=!0);for(var f=0,g=0;g<this.children.size;g++)this.children.entries[g].active===h&&f++;return f},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var h=this.getTotalUsed();return(this.maxSize===-1?999999999999:this.maxSize)-h},setActive:function(h){return this.active=h,this},setName:function(h){return this.name=h,this},propertyValueSet:function(h,f,g,p,v){return n.PropertyValueSet(this.children.entries,h,f,g,p,v),this},propertyValueInc:function(h,f,g,p,v){return n.PropertyValueInc(this.children.entries,h,f,g,p,v),this},setX:function(h,f){return n.SetX(this.children.entries,h,f),this},setY:function(h,f){return n.SetY(this.children.entries,h,f),this},setXY:function(h,f,g,p){return n.SetXY(this.children.entries,h,f,g,p),this},incX:function(h,f){return n.IncX(this.children.entries,h,f),this},incY:function(h,f){return n.IncY(this.children.entries,h,f),this},incXY:function(h,f,g,p){return n.IncXY(this.children.entries,h,f,g,p),this},shiftPosition:function(h,f,g){return n.ShiftPosition(this.children.entries,h,f,g),this},angle:function(h,f){return n.Angle(this.children.entries,h,f),this},rotate:function(h,f){return n.Rotate(this.children.entries,h,f),this},rotateAround:function(h,f){return n.RotateAround(this.children.entries,h,f),this},rotateAroundDistance:function(h,f,g){return n.RotateAroundDistance(this.children.entries,h,f,g),this},setAlpha:function(h,f){return n.SetAlpha(this.children.entries,h,f),this},setTint:function(h,f,g,p){return n.SetTint(this.children.entries,h,f,g,p),this},setOrigin:function(h,f,g,p){return n.SetOrigin(this.children.entries,h,f,g,p),this},scaleX:function(h,f){return n.ScaleX(this.children.entries,h,f),this},scaleY:function(h,f){return n.ScaleY(this.children.entries,h,f),this},scaleXY:function(h,f,g,p){return n.ScaleXY(this.children.entries,h,f,g,p),this},setDepth:function(h,f){return n.SetDepth(this.children.entries,h,f),this},setBlendMode:function(h){return n.SetBlendMode(this.children.entries,h),this},setHitArea:function(h,f){return n.SetHitArea(this.children.entries,h,f),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(h){this.children.contains(h)&&h.setActive(!1)},killAndHide:function(h){this.children.contains(h)&&(h.setActive(!1),h.setVisible(!1))},setVisible:function(h,f,g){return n.SetVisible(this.children.entries,h,f,g),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(h){h===void 0&&(h=!1),this.scene&&!this.ignoreDestroy&&(this.clear(!1,h),this.scene=void 0,this.children=void 0)}});d.exports=c},function(d,w){d.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(d,w,e){var n=e(12),t=e(0),r=e(6),o=e(94),i=e(214),s=e(215),a=e(5),u=new t({Extends:r,initialize:function(l,c,h){r.call(this),this.manager=l,this.key=c,this.type="frame",this.frames=this.getFrames(l.textureManager,a(h,"frames",[]),a(h,"defaultTextureKey",null)),this.frameRate=a(h,"frameRate",null),this.duration=a(h,"duration",null),this.duration===null&&this.frameRate===null?(this.frameRate=24,this.duration=this.frameRate/this.frames.length*1e3):this.duration&&this.frameRate===null?this.frameRate=this.frames.length/(this.duration/1e3):this.duration=this.frames.length/this.frameRate*1e3,this.msPerFrame=1e3/this.frameRate,this.skipMissedFrames=a(h,"skipMissedFrames",!0),this.delay=a(h,"delay",0),this.repeat=a(h,"repeat",0),this.repeatDelay=a(h,"repeatDelay",0),this.yoyo=a(h,"yoyo",!1),this.showOnStart=a(h,"showOnStart",!1),this.hideOnComplete=a(h,"hideOnComplete",!1),this.paused=!1,this.manager.on(o.PAUSE_ALL,this.pause,this),this.manager.on(o.RESUME_ALL,this.resume,this)},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,c){var h,f,g=this.getFrames(this.manager.textureManager,c);return 0<g.length&&(l===0?this.frames=g.concat(this.frames):l===this.frames.length?this.frames=this.frames.concat(g):(h=this.frames.slice(0,l),f=this.frames.slice(l),this.frames=h.concat(g,f)),this.updateFrameSequence()),this},checkFrame:function(l){return 0<=l&&l<this.frames.length},completeAnimation:function(l){this.hideOnComplete&&(l.parent.visible=!1),l.stop()},getFirstTick:function(l,c){c===void 0&&(c=!0),l.accumulator=0,l.nextTick=l.msPerFrame+l.currentFrame.duration,c&&(l.nextTick+=l._delay)},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,c,h){var f,g,p,v=[],T=1;if(typeof c=="string"&&(g=c,p=l.get(g).getFrameNames(),c=[],p.forEach(function(I,W){c.push({key:g,frame:W})})),!Array.isArray(c)||c.length===0)return v;for(D=0;D<c.length;D++){var E,M,A,C=c[D],P=a(C,"key",h);P&&(E=a(C,"frame",0),M=l.getFrame(P,E),(A=new s(P,E,T,M)).duration=a(C,"duration",0),A.isFirst=!f,f&&((f.nextFrame=A).prevFrame=f),v.push(A),f=A,T++)}if(0<v.length){A.isLast=!0,A.nextFrame=v[0],v[0].prevFrame=A;for(var R=1/(v.length-1),D=0;D<v.length;D++)v[D].progress=D*R}return v},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.msPerFrame+l.currentFrame.duration},load:function(l,c){c>=this.frames.length&&(c=0),l.currentAnim!==this&&(l.currentAnim=this,l.frameRate=this.frameRate,l.duration=this.duration,l.msPerFrame=this.msPerFrame,l.skipMissedFrames=this.skipMissedFrames,l._delay=this.delay,l._repeat=this.repeat,l._repeatDelay=this.repeatDelay,l._yoyo=this.yoyo);var h=this.frames[c];c!==0||l.forward||(h=this.getLastFrame()),l.updateFrame(h)},getFrameByProgress:function(l){return l=n(l,0,1),i(l,this.frames,"progress")},nextFrame:function(l){var c=l.currentFrame;c.isLast?l._yoyo?this.handleYoyoFrame(l,!1):0<l.repeatCounter?l._reverse&&l.forward?l.forward=!1:this.repeatAnimation(l):this.completeAnimation(l):this.updateAndGetNextTick(l,c.nextFrame)},handleYoyoFrame:function(l,c){if(c=c||!1,l._reverse===!c&&0<l.repeatCounter)return l._repeatDelay&&!l.pendingRepeat||(l.forward=c),void this.repeatAnimation(l);var h;l._reverse===c||l.repeatCounter!==0?(h=(l.forward=c)?l.currentFrame.nextFrame:l.currentFrame.prevFrame,this.updateAndGetNextTick(l,h)):this.completeAnimation(l)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var c=l.currentFrame;c.isFirst?l._yoyo?this.handleYoyoFrame(l,!0):0<l.repeatCounter?(l._reverse&&!l.forward?l.currentFrame=this.getLastFrame():l.forward=!0,this.repeatAnimation(l)):this.completeAnimation(l):this.updateAndGetNextTick(l,c.prevFrame)},updateAndGetNextTick:function(l,c){l.updateFrame(c),this.getNextTick(l)},removeFrame:function(l){var c=this.frames.indexOf(l);return c!==-1&&this.removeFrameAt(c),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2)return this.completeAnimation(l);var c,h;0<l._repeatDelay&&l.pendingRepeat===!1?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l._repeatDelay):(l.repeatCounter--,l.updateFrame(l.currentFrame[l.forward?"nextFrame":"prevFrame"]),l.isPlaying&&(this.getNextTick(l),l.pendingRepeat=!1,c=l.currentFrame,h=l.parent,this.emit(o.ANIMATION_REPEAT,this,c),h.emit(o.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,c,l.repeatCounter,h),h.emit(o.SPRITE_ANIMATION_REPEAT,this,c,l.repeatCounter,h)))},setFrame:function(l){l.forward?this.nextFrame(l):this.previousFrame(l)},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(c){l.frames.push(c.toJSON())}),l},updateFrameSequence:function(){for(var l,c=this.frames.length,h=1/(c-1),f=0;f<c;f++)(l=this.frames[f]).index=f+1,l.isFirst=!1,l.isLast=!1,l.progress=f*h,f===0?(l.isFirst=!0,c===1?(l.isLast=!0,(l.nextFrame=l).prevFrame=l):(l.isLast=!1,l.prevFrame=this.frames[c-1],l.nextFrame=this.frames[f+1])):f===c-1&&1<c?(l.isLast=!0,l.prevFrame=this.frames[c-2],l.nextFrame=this.frames[0]):1<c&&(l.prevFrame=this.frames[f-1],l.nextFrame=this.frames[f+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.removeAllListeners(),this.manager.off(o.PAUSE_ALL,this.pause,this),this.manager.off(o.RESUME_ALL,this.resume,this),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});d.exports=u},function(d,w,e){var n=e(95),t=e(3);d.exports=function(r,o,i){if(i===void 0&&(i=new t),o<=0||1<=o)return i.x=r.x,i.y=r.y,i;var s=n(r)*o;return .5<o?(s-=r.width+r.height)<=r.width?(i.x=r.right-s,i.y=r.bottom):(i.x=r.x,i.y=r.bottom-(s-r.width)):s<=r.width?(i.x=r.x+s,i.y=r.y):(i.x=r.right,i.y=r.y+(s-r.width)),i}},function(d,w,e){var n=e(47),t=e(3);d.exports=function(r,o,i,s){s===void 0&&(s=[]),!o&&0<i&&(o=n(r)/i);for(var a=r.x1,u=r.y1,l=r.x2,c=r.y2,h=0;h<o;h++){var f=h/o,g=a+(l-a)*f,p=u+(c-u)*f;s.push(new t(g,p))}return s}},function(d,w,e){var n=e(3);d.exports=function(t,r){r===void 0&&(r=new n);var o=Math.random();return r.x=t.x1+o*(t.x2-t.x1),r.y=t.y1+o*(t.y2-t.y1),r}},function(d,w,e){var n=e(3);d.exports=function(t,r){return r===void 0&&(r=new n),r.x=t.x+Math.random()*t.width,r.y=t.y+Math.random()*t.height,r}},function(d,w,e){var n=e(237),t=e(240),r=e(242),o=e(243);d.exports=function(i){switch(typeof i){case"string":return(i.substr(0,3).toLowerCase()==="rgb"?o:n)(i);case"number":return t(i);case"object":return r(i)}}},function(d,w){d.exports=function(e,n,t){return e<<16|n<<8|t}},function(d,w,e){var n=e(142);d.exports=function(t,r,o,i){r===void 0&&(r=1),o===void 0&&(o=1);var s=Math.floor(6*t),a=6*t-s,u=Math.floor(o*(1-r)*255),l=Math.floor(o*(1-a*r)*255),c=Math.floor(o*(1-(1-a)*r)*255),h=o=Math.floor(o*=255),f=o,g=o,p=s%6;return p==0?(f=c,g=u):p==1?(h=l,g=u):p==2?(h=u,g=c):p==3?(h=u,f=l):p==4?(h=c,f=u):p==5&&(f=u,g=l),i?i.setTo?i.setTo(h,f,g,i.alpha,!1):(i.r=h,i.g=f,i.b=g,i.color=n(h,f,g),i):{r:h,g:f,b:g,color:n(h,f,g)}}},function(d,w){d.exports=function(e,n,t){return e.x=n-e.width/2,e.y=t-e.height/2,e}},function(d,w,e){var n=e(99),t=e(100),r=e(25),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};d.exports=function(){o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(l){o.localStorage=!1}o.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),o.fileSystem=!!window.requestFileSystem;var i,s,a,u=!1;return o.webGL=function(){if(window.WebGLRenderingContext)try{var l=r.createWebGL(this),c=l.getContext("webgl")||l.getContext("experimental-webgl"),h=r.create2D(this),f=h.getContext("2d").createImageData(1,1);return u=f.data instanceof Uint8ClampedArray,r.remove(l),r.remove(h),!!c}catch(g){return!1}return!1}(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,t.firefox&&t.firefoxVersion<21&&(o.getUserMedia=!1),!n.iOS&&(t.ie||t.firefox||t.chrome)&&(o.canvasBitBltShift=!0),(t.safari||t.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(o.littleEndian=(i=new ArrayBuffer(4),s=new Uint8Array(i),a=new Uint32Array(i),s[0]=161,s[1]=178,s[2]=195,s[3]=212,a[0]===3569595041||a[0]!==2712847316&&null)),o.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&o.littleEndian!==null&&u,o}()},function(d,w){d.exports=function(e,n,t,r,o){var i=.5*(r-n),s=.5*(o-t),a=e*e;return(2*t-2*r+i+s)*(e*a)+(-3*t+3*r-2*i-s)*a+i*e+t}},function(d,w){d.exports=function(e,n,t){return e<=n?0:t<=e?1:(e=(e-n)/(t-n))*e*(3-2*e)}},function(d,w){d.exports=function(e,n,t){return(e=Math.max(0,Math.min(1,(e-n)/(t-n))))*e*e*(e*(6*e-15)+10)}},function(d,w){d.exports=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)}},function(d,w){d.exports=function(e,n,t,r,o){var i=r+Math.atan2(e.y-t,e.x-n);return e.x=n+o*Math.cos(i),e.y=t+o*Math.sin(i),e}},function(d,w,e){var n=new(e(0))({initialize:function(t,r,o){this.x=0,this.y=0,this.z=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=r||0,this.z=o||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},clone:function(){return new n(this.x,this.y,this.z)},crossVectors:function(t,r){var o=t.x,i=t.y,s=t.z,a=r.x,u=r.y,l=r.z;return this.x=i*l-s*u,this.y=s*a-o*l,this.z=o*u-i*a,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,r,o){return typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=r||0,this.z=o||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var r=t.x-this.x,o=t.y-this.y,i=t.z-this.z||0;return Math.sqrt(r*r+o*o+i*i)},distanceSq:function(t){var r=t.x-this.x,o=t.y-this.y,i=t.z-this.z||0;return r*r+o*o+i*i},length:function(){var t=this.x,r=this.y,o=this.z;return Math.sqrt(t*t+r*r+o*o)},lengthSq:function(){var t=this.x,r=this.y,o=this.z;return t*t+r*r+o*o},normalize:function(){var t=this.x,r=this.y,o=this.z,i=t*t+r*r+o*o;return 0<i&&(i=1/Math.sqrt(i),this.x=t*i,this.y=r*i,this.z=o*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var r=this.x,o=this.y,i=this.z,s=t.x,a=t.y,u=t.z;return this.x=o*u-i*a,this.y=i*s-r*u,this.z=r*a-o*s,this},lerp:function(t,r){r===void 0&&(r=0);var o=this.x,i=this.y,s=this.z;return this.x=o+r*(t.x-o),this.y=i+r*(t.y-i),this.z=s+r*(t.z-s),this},transformMat3:function(t){var r=this.x,o=this.y,i=this.z,s=t.val;return this.x=r*s[0]+o*s[3]+i*s[6],this.y=r*s[1]+o*s[4]+i*s[7],this.z=r*s[2]+o*s[5]+i*s[8],this},transformMat4:function(t){var r=this.x,o=this.y,i=this.z,s=t.val;return this.x=s[0]*r+s[4]*o+s[8]*i+s[12],this.y=s[1]*r+s[5]*o+s[9]*i+s[13],this.z=s[2]*r+s[6]*o+s[10]*i+s[14],this},transformCoordinates:function(t){var r=this.x,o=this.y,i=this.z,s=t.val,a=r*s[0]+o*s[4]+i*s[8]+s[12],u=r*s[1]+o*s[5]+i*s[9]+s[13],l=r*s[2]+o*s[6]+i*s[10]+s[14],c=r*s[3]+o*s[7]+i*s[11]+s[15];return this.x=a/c,this.y=u/c,this.z=l/c,this},transformQuat:function(t){var r=this.x,o=this.y,i=this.z,s=t.x,a=t.y,u=t.z,l=t.w,c=l*r+a*i-u*o,h=l*o+u*r-s*i,f=l*i+s*o-a*r,g=-s*r-a*o-u*i;return this.x=c*l+g*-s+h*-u-f*-a,this.y=h*l+g*-a+f*-s-c*-u,this.z=f*l+g*-u+c*-a-h*-s,this},project:function(t){var r=this.x,o=this.y,i=this.z,s=t.val,a=s[0],u=s[1],l=s[2],c=s[3],h=s[4],f=s[5],g=s[6],p=s[7],v=s[8],T=s[9],E=s[10],M=s[11],A=s[12],C=s[13],P=s[14],R=1/(r*c+o*p+i*M+s[15]);return this.x=(r*a+o*h+i*v+A)*R,this.y=(r*u+o*f+i*T+C)*R,this.z=(r*l+o*g+i*E+P)*R,this},unproject:function(t,r){var o=t.x,i=t.y,s=t.z,a=t.w,u=this.x-o,l=a-this.y-1-i,c=this.z;return this.x=2*u/s-1,this.y=2*l/a-1,this.z=2*c-1,this.project(r)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});n.ZERO=new n,n.RIGHT=new n(1,0,0),n.LEFT=new n(-1,0,0),n.UP=new n(0,-1,0),n.DOWN=new n(0,1,0),n.FORWARD=new n(0,0,1),n.BACK=new n(0,0,-1),n.ONE=new n(1,1,1),d.exports=n},function(d,w,e){var n={CENTER:e(288),ORIENTATION:e(289),SCALE_MODE:e(290),ZOOM:e(291)};d.exports=n},function(d,w){d.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(d,w,e){var n=e(0),t=e(106),r=e(200),o=e(18),i=e(731),s=e(732),a=e(1),u=e(303),l=new n({initialize:function(c,h){this.scene=c,this.game,this.renderer,this.config=h,this.settings=u.create(h),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=a},init:function(c){this.settings.status=t.INIT,this.sceneUpdate=a,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context;var h=c.plugins;(this.plugins=h).addToScene(this,r.Global,[r.CoreScene,s(this),i(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},install:function(c){Array.isArray(c)||(c=[c]),this.plugins.installLocal(this,c)},step:function(c,h){this.events.emit(o.PRE_UPDATE,c,h),this.events.emit(o.UPDATE,c,h),this.sceneUpdate.call(this.scene,c,h),this.events.emit(o.POST_UPDATE,c,h)},render:function(c){var h=this.displayList;h.depthSort(),this.cameras.render(c,h),this.events.emit(o.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){return this.settings.active&&(this.settings.status=t.PAUSED,this.settings.active=!1,this.events.emit(o.PAUSE,this,c)),this},resume:function(c){return this.settings.active||(this.settings.status=t.RUNNING,this.settings.active=!0,this.events.emit(o.RESUME,this,c)),this},sleep:function(c){return this.settings.status=t.SLEEPING,this.settings.active=!1,this.settings.visible=!1,this.events.emit(o.SLEEP,this,c),this},wake:function(c){var h=this.settings;return h.status=t.RUNNING,h.active=!0,h.visible=!0,this.events.emit(o.WAKE,this,c),h.isTransition&&this.events.emit(o.TRANSITION_WAKE,h.transitionFrom,h.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===t.SLEEPING},isActive:function(){return this.settings.status===t.RUNNING},isPaused:function(){return this.settings.status===t.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,h){return c?this.resume(h):this.pause(h)},start:function(c){c&&(this.settings.data=c),this.settings.status=t.START,this.settings.active=!0,this.settings.visible=!0,this.events.emit(o.START,this),this.events.emit(o.READY,this,c)},shutdown:function(c){this.events.off(o.TRANSITION_INIT),this.events.off(o.TRANSITION_START),this.events.off(o.TRANSITION_COMPLETE),this.events.off(o.TRANSITION_OUT),this.settings.status=t.SHUTDOWN,this.settings.active=!1,this.settings.visible=!1,this.events.emit(o.SHUTDOWN,this,c)},destroy:function(){this.settings.status=t.DESTROYED,this.settings.active=!1,this.settings.visible=!1,this.events.emit(o.DESTROY,this),this.events.removeAllListeners();for(var c=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],h=0;h<c.length;h++)this[c[h]]=null}});d.exports=l},function(d,w,e){var n=e(0),t=e(129),r=e(306),o="Texture.frame missing: ",i=new n({initialize:function(s,a,u,l,c){Array.isArray(u)||(u=[u]),this.manager=s,this.key=a,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE";for(var h=this.frameTotal=0;h<u.length;h++)this.source.push(new r(this,u[h],l,c))},add:function(s,a,u,l,c,h){if(this.has(s))return null;var f=new t(this,s,a,u,l,c,h);return this.frames[s]=f,this.firstFrame==="__BASE"&&(this.firstFrame=s),this.frameTotal++,f},remove:function(s){return!!this.has(s)&&(this.get(s).destroy(),delete this.frames[s],!0)},has:function(s){return this.frames[s]},get:function(s){s=s||this.firstFrame;var a=this.frames[s];return a||(console.warn(o+s),a=this.frames[this.firstFrame]),a},getTextureSourceIndex:function(s){for(var a=0;a<this.source.length;a++)if(this.source[a]===s)return a;return-1},getFramesFromTextureSource:function(s,a){a===void 0&&(a=!1);var u,l=[];for(var c in this.frames)c==="__BASE"&&!a||(u=this.frames[c]).sourceIndex===s&&l.push(u);return l},getFrameNames:function(s){s===void 0&&(s=!1);var a,u=Object.keys(this.frames);return s||(a=u.indexOf("__BASE"))!==-1&&u.splice(a,1),u},getSourceImage:function(s){s!=null&&this.frameTotal!==1||(s="__BASE");var a=this.frames[s];return a?a.source.image:(console.warn(o+s),this.frames.__BASE.source.image)},getDataSourceImage:function(s){s!=null&&this.frameTotal!==1||(s="__BASE");var a=this.frames[s],u=a?a.sourceIndex:(console.warn(o+s),this.frames.__BASE.sourceIndex);return this.dataSource[u].image},setDataSource:function(s){Array.isArray(s)||(s=[s]);for(var a=0;a<s.length;a++){var u=this.source[a];this.dataSource.push(new r(this,s[a],u.width,u.height))}},setFilter:function(s){for(var a=0;a<this.source.length;a++)this.source[a].setFilter(s);for(a=0;a<this.dataSource.length;a++)this.dataSource[a].setFilter(s)},destroy:function(){for(var s=0;s<this.source.length;s++)this.source[s].destroy();for(s=0;s<this.dataSource.length;s++)this.dataSource[s].destroy();for(var a in this.frames)this.frames[a].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});d.exports=i},function(d,w){function e(n,t){return parseInt(n.getAttribute(t),10)}d.exports=function(n,t,r,o){t===void 0&&(t=0),r===void 0&&(r=0);var i={},s=n.getElementsByTagName("info")[0],a=n.getElementsByTagName("common")[0];i.font=s.getAttribute("face"),i.size=e(s,"size"),i.lineHeight=e(a,"lineHeight")+r,i.chars={};var u,l,c=n.getElementsByTagName("char"),h=o!==void 0&&o.trimmed;h&&(u=o.height,l=o.width);for(var f=0;f<c.length;f++){var g=c[f],p=e(g,"id"),v=e(g,"x"),T=e(g,"y"),E=e(g,"width"),M=e(g,"height");h&&(v<l&&(l=v),T<u&&(u=T)),i.chars[p]={x:v,y:T,width:E,height:M,centerX:Math.floor(E/2),centerY:Math.floor(M/2),xOffset:e(g,"xoffset"),yOffset:e(g,"yoffset"),xAdvance:e(g,"xadvance")+t,data:{},kerning:{}}}if(h&&u!==0&&l!==0)for(var A in i.chars){var C=i.chars[A];C.x-=o.x,C.y-=o.y}for(var P=n.getElementsByTagName("kerning"),f=0;f<P.length;f++){var R=P[f],D=e(R,"first"),I=e(R,"second"),W=e(R,"amount");i.chars[I].kerning[D]=W}return i}},function(d,w,e){var n=e(206),t=e(56),r=e(0),o=e(13),i=e(109),s=e(19),a=e(7),u=e(806),l=e(323),c=e(4),h=new r({Extends:s,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Transform,o.Visible,u],initialize:function(f,g,p,v){s.call(this,f,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._displayList=f.sys.displayList,this._sortKey="",this._sysEvents=f.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.setPosition(g,p),this.clearAlpha(),this.setBlendMode(t.SKIP_CHECK),v&&this.add(v)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return .5*this.width}},displayOriginY:{get:function(){return .5*this.height}},setExclusive:function(f){return f===void 0&&(f=!0),this.exclusive=f,this},getBounds:function(f){var g;if(f===void 0&&(f=new a),f.setTo(this.x,this.y,0,0),this.parentContainer&&(g=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),f.setTo(g.x,g.y,0,0)),0<this.list.length){var p=this.list,v=new a,T=!1;f.setEmpty();for(var E=0;E<p.length;E++){var M=p[E];M.getBounds&&(M.getBounds(v),T?l(v,f,f):(f.setTo(v.x,v.y,v.width,v.height),T=!0))}}return f},addHandler:function(f){f.once(i.DESTROY,this.remove,this),this.exclusive&&(this._displayList.remove(f),f.parentContainer&&f.parentContainer.remove(f),f.parentContainer=this)},removeHandler:function(f){f.off(i.DESTROY,this.remove),this.exclusive&&(f.parentContainer=null)},pointToContainer:function(f,g){g===void 0&&(g=new c),this.parentContainer?this.parentContainer.pointToContainer(f,g):g=new c(f.x,f.y);var p=this.tempTransformMatrix;return p.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),p.invert(),p.transformPoint(f.x,f.y,g),g},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(f){return n.Add(this.list,f,this.maxSize,this.addHandler,this),this},addAt:function(f,g){return n.AddAt(this.list,f,g,this.maxSize,this.addHandler,this),this},getAt:function(f){return this.list[f]},getIndex:function(f){return this.list.indexOf(f)},sort:function(f,g){return f&&(g===void 0&&(g=function(p,v){return p[f]-v[f]}),n.StableSort.inplace(this.list,g)),this},getByName:function(f){return n.GetFirst(this.list,"name",f)},getRandom:function(f,g){return n.GetRandom(this.list,f,g)},getFirst:function(f,g,p,v){return n.GetFirst(this.list,f,g,p,v)},getAll:function(f,g,p,v){return n.GetAll(this.list,f,g,p,v)},count:function(f,g,p,v){return n.CountAllMatching(this.list,f,g,p,v)},swap:function(f,g){return n.Swap(this.list,f,g),this},moveTo:function(f,g){return n.MoveTo(this.list,f,g),this},remove:function(f,g){var p=n.Remove(this.list,f,this.removeHandler,this);if(g&&p){Array.isArray(p)||(p=[p]);for(var v=0;v<p.length;v++)p[v].destroy()}return this},removeAt:function(f,g){var p=n.RemoveAt(this.list,f,this.removeHandler,this);return g&&p&&p.destroy(),this},removeBetween:function(f,g,p){var v=n.RemoveBetween(this.list,f,g,this.removeHandler,this);if(p)for(var T=0;T<v.length;T++)v[T].destroy();return this},removeAll:function(f){var g=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(f)for(var p=0;p<g.length;p++)g[p].destroy();return this},bringToTop:function(f){return n.BringToTop(this.list,f),this},sendToBack:function(f){return n.SendToBack(this.list,f),this},moveUp:function(f){return n.MoveUp(this.list,f),this},moveDown:function(f){return n.MoveDown(this.list,f),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(f,g,p){return n.Replace(this.list,f,g)&&(this.addHandler(g),this.removeHandler(f),p&&f.destroy()),this},exists:function(f){return-1<this.list.indexOf(f)},setAll:function(f,g,p,v){return n.SetAll(this.list,f,g,p,v),this},each:function(f,g){for(var p=[null],v=this.list.slice(),T=v.length,E=2;E<arguments.length;E++)p.push(arguments[E]);for(E=0;E<T;E++)p[0]=v[E],f.apply(g,p);return this},iterate:function(f,g){for(var p=[null],v=2;v<arguments.length;v++)p.push(arguments[v]);for(v=0;v<this.list.length;v++)p[0]=this.list[v],f.apply(g,p);return this},setScrollFactor:function(f,g,p){return g===void 0&&(g=f),p===void 0&&(p=!1),this.scrollFactorX=f,this.scrollFactorY=g,p&&(n.SetAll(this.list,"scrollFactorX",f),n.SetAll(this.list,"scrollFactorY",g)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null}});d.exports=h},function(d,w){d.exports=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var n=e[0].length,t=1;t<e.length;t++)if(e[t].length!==n)return!1;return!0}},function(d,w,e){var n=e(90),t=e(0),r=e(160),o=e(221),i=e(222),s=e(223),a=e(227),u=e(230),l=e(233),c=e(236),h=e(231),f=e(27),g=e(92),p=e(19),v=e(2),T=e(5),E=e(10),M=e(810),A=new t({Extends:p,Mixins:[o,i,s,a,u,l,c,h,M],initialize:function(C,P){var R=T(P,"x",0),D=T(P,"y",0);p.call(this,C,"Graphics"),this.setPosition(R,D),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.setDefaultStyles(P)},setDefaultStyles:function(C){return T(C,"lineStyle",null)&&(this.defaultStrokeWidth=T(C,"lineStyle.width",1),this.defaultStrokeColor=T(C,"lineStyle.color",16777215),this.defaultStrokeAlpha=T(C,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),T(C,"fillStyle",null)&&(this.defaultFillColor=T(C,"fillStyle.color",16777215),this.defaultFillAlpha=T(C,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(C,P,R){return R===void 0&&(R=1),this.commandBuffer.push(r.LINE_STYLE,C,P,R),this._lineWidth=C,this},fillStyle:function(C,P){return P===void 0&&(P=1),this.commandBuffer.push(r.FILL_STYLE,C,P),this},fillGradientStyle:function(C,P,R,D,I){return I===void 0&&(I=1),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,I,C,P,R,D),this},lineGradientStyle:function(C,P,R,D,I,W){return W===void 0&&(W=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,C,W,P,R,D,I),this},setTexture:function(C,P,R){var D;return R===void 0&&(R=0),C===void 0?this.commandBuffer.push(r.CLEAR_TEXTURE):(D=this.scene.sys.textures.getFrame(C,P))&&(R===2&&(R=3),this.commandBuffer.push(r.SET_TEXTURE,D,R)),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(C){return this.fillCircle(C.x,C.y,C.radius)},strokeCircleShape:function(C){return this.strokeCircle(C.x,C.y,C.radius)},fillCircle:function(C,P,R){return this.beginPath(),this.arc(C,P,R,0,E.PI2),this.fillPath(),this},strokeCircle:function(C,P,R){return this.beginPath(),this.arc(C,P,R,0,E.PI2),this.strokePath(),this},fillRectShape:function(C){return this.fillRect(C.x,C.y,C.width,C.height)},strokeRectShape:function(C){return this.strokeRect(C.x,C.y,C.width,C.height)},fillRect:function(C,P,R,D){return this.commandBuffer.push(r.FILL_RECT,C,P,R,D),this},strokeRect:function(C,P,R,D){var I=this._lineWidth/2,W=C-I,G=C+I;return this.beginPath(),this.moveTo(C,P),this.lineTo(C,P+D),this.strokePath(),this.beginPath(),this.moveTo(C+R,P),this.lineTo(C+R,P+D),this.strokePath(),this.beginPath(),this.moveTo(W,P),this.lineTo(G+R,P),this.strokePath(),this.beginPath(),this.moveTo(W,P+D),this.lineTo(G+R,P+D),this.strokePath(),this},fillRoundedRect:function(C,P,R,D,I){I===void 0&&(I=20);var W=I,G=I,Y=I,j=I;return typeof I!="number"&&(W=v(I,"tl",20),G=v(I,"tr",20),Y=v(I,"bl",20),j=v(I,"br",20)),this.beginPath(),this.moveTo(C+W,P),this.lineTo(C+R-G,P),this.arc(C+R-G,P+G,G,-E.TAU,0),this.lineTo(C+R,P+D-j),this.arc(C+R-j,P+D-j,j,0,E.TAU),this.lineTo(C+Y,P+D),this.arc(C+Y,P+D-Y,Y,E.TAU,Math.PI),this.lineTo(C,P+W),this.arc(C+W,P+W,W,-Math.PI,-E.TAU),this.fillPath(),this},strokeRoundedRect:function(C,P,R,D,I){I===void 0&&(I=20);var W=I,G=I,Y=I,j=I;return typeof I!="number"&&(W=v(I,"tl",20),G=v(I,"tr",20),Y=v(I,"bl",20),j=v(I,"br",20)),this.beginPath(),this.moveTo(C+W,P),this.lineTo(C+R-G,P),this.arc(C+R-G,P+G,G,-E.TAU,0),this.lineTo(C+R,P+D-j),this.arc(C+R-j,P+D-j,j,0,E.TAU),this.lineTo(C+Y,P+D),this.arc(C+Y,P+D-Y,Y,E.TAU,Math.PI),this.lineTo(C,P+W),this.arc(C+W,P+W,W,-Math.PI,-E.TAU),this.strokePath(),this},fillPointShape:function(C,P){return this.fillPoint(C.x,C.y,P)},fillPoint:function(C,P,R){return!R||R<1?R=1:(C-=R/2,P-=R/2),this.commandBuffer.push(r.FILL_RECT,C,P,R,R),this},fillTriangleShape:function(C){return this.fillTriangle(C.x1,C.y1,C.x2,C.y2,C.x3,C.y3)},strokeTriangleShape:function(C){return this.strokeTriangle(C.x1,C.y1,C.x2,C.y2,C.x3,C.y3)},fillTriangle:function(C,P,R,D,I,W){return this.commandBuffer.push(r.FILL_TRIANGLE,C,P,R,D,I,W),this},strokeTriangle:function(C,P,R,D,I,W){return this.commandBuffer.push(r.STROKE_TRIANGLE,C,P,R,D,I,W),this},strokeLineShape:function(C){return this.lineBetween(C.x1,C.y1,C.x2,C.y2)},lineBetween:function(C,P,R,D){return this.beginPath(),this.moveTo(C,P),this.lineTo(R,D),this.strokePath(),this},lineTo:function(C,P){return this.commandBuffer.push(r.LINE_TO,C,P),this},moveTo:function(C,P){return this.commandBuffer.push(r.MOVE_TO,C,P),this},strokePoints:function(C,P,R,D){P===void 0&&(P=!1),R===void 0&&(R=!1),D===void 0&&(D=C.length),this.beginPath(),this.moveTo(C[0].x,C[0].y);for(var I=1;I<D;I++)this.lineTo(C[I].x,C[I].y);return P&&this.lineTo(C[0].x,C[0].y),R&&this.closePath(),this.strokePath(),this},fillPoints:function(C,P,R,D){P===void 0&&(P=!1),R===void 0&&(R=!1),D===void 0&&(D=C.length),this.beginPath(),this.moveTo(C[0].x,C[0].y);for(var I=1;I<D;I++)this.lineTo(C[I].x,C[I].y);return P&&this.lineTo(C[0].x,C[0].y),R&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(C,P){P===void 0&&(P=32);var R=C.getPoints(P);return this.strokePoints(R,!0)},strokeEllipse:function(C,P,R,D,I){I===void 0&&(I=32);var W=new g(C,P,R,D).getPoints(I);return this.strokePoints(W,!0)},fillEllipseShape:function(C,P){P===void 0&&(P=32);var R=C.getPoints(P);return this.fillPoints(R,!0)},fillEllipse:function(C,P,R,D,I){I===void 0&&(I=32);var W=new g(C,P,R,D).getPoints(I);return this.fillPoints(W,!0)},arc:function(C,P,R,D,I,W,G){return W===void 0&&(W=!1),G===void 0&&(G=0),this.commandBuffer.push(r.ARC,C,P,R,D,I,W,G),this},slice:function(C,P,R,D,I,W,G){return W===void 0&&(W=!1),G===void 0&&(G=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,C,P),this.commandBuffer.push(r.ARC,C,P,R,D,I,W,G),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(C,P){return this.commandBuffer.push(r.TRANSLATE,C,P),this},scaleCanvas:function(C,P){return this.commandBuffer.push(r.SCALE,C,P),this},rotateCanvas:function(C){return this.commandBuffer.push(r.ROTATE,C),this},clear:function(){return this.commandBuffer.length=0,-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(C,P,R){var D,I,W,G=this.scene.sys,Y=G.game.renderer;return P===void 0&&(P=G.scale.width),R===void 0&&(R=G.scale.height),A.TargetCamera.setScene(this.scene),A.TargetCamera.setViewport(0,0,P,R),A.TargetCamera.scrollX=this.x,A.TargetCamera.scrollY=this.y,typeof C=="string"?G.textures.exists(C)?(W=(D=G.textures.get(C)).getSourceImage())instanceof HTMLCanvasElement&&(I=W.getContext("2d")):I=(D=G.textures.createCanvas(C,P,R)).getSourceImage().getContext("2d"):C instanceof HTMLCanvasElement&&(I=C.getContext("2d")),I&&(this.renderCanvas(Y,this,0,A.TargetCamera,null,I,!1),D&&D.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});A.TargetCamera=new n,d.exports=A},function(d,w){d.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(d,w,e){var n=e(3);d.exports=function(t,r,o){o===void 0&&(o=new n);var i=t.width/2,s=t.height/2;return o.x=t.x+i*Math.cos(r),o.y=t.y+s*Math.sin(r),o}},function(d,w,e){var n=e(3);d.exports=function(t,r){r===void 0&&(r=new n);var o=Math.random()*Math.PI*2,i=Math.sqrt(Math.random());return r.x=t.x+i*Math.cos(o)*t.width/2,r.y=t.y+i*Math.sin(o)*t.height/2,r}},function(d,w,e){d.exports={BUTTON_DOWN:e(843),BUTTON_UP:e(844),CONNECTED:e(845),DISCONNECTED:e(846),GAMEPAD_BUTTON_DOWN:e(847),GAMEPAD_BUTTON_UP:e(848)}},function(d,w,e){var n=e(3);d.exports=function(t,r,o){return o===void 0&&(o=new n),o.x=t.x+t.radius*Math.cos(r),o.y=t.y+t.radius*Math.sin(r),o}},function(d,w,e){var n=e(3);d.exports=function(t,r){r===void 0&&(r=new n);var o=2*Math.PI*Math.random(),i=Math.random()+Math.random(),s=1<i?2-i:i,a=s*Math.cos(o),u=s*Math.sin(o);return r.x=t.x+a*t.radius,r.y=t.y+u*t.radius,r}},function(d,w,e){var n=e(3);d.exports=function(t,r){r===void 0&&(r=new n);var o=t.x2-t.x1,i=t.y2-t.y1,s=t.x3-t.x1,a=t.y3-t.y1,u=Math.random(),l=Math.random();return 1<=u+l&&(u=1-u,l=1-l),r.x=t.x1+(o*u+s*l),r.y=t.y1+(i*u+a*l),r}},function(d,w,e){var n=e(16),t=e(116);d.exports=function(r,o){var i=r===void 0?t():n({},r);if(o)for(var s in o)o[s]!==void 0&&(i[s]=o[s]);return i}},function(d,w,e){d.exports={Acceleration:e(880),Angular:e(881),Bounce:e(882),Debug:e(883),Drag:e(884),Enable:e(885),Friction:e(886),Gravity:e(887),Immovable:e(888),Mass:e(889),Size:e(890),Velocity:e(891)}},function(d,w,e){var n=e(54);d.exports=function(t,r){return n(t.x,t.y,r.x,r.y)<=t.radius+r.radius}},function(d,w){d.exports=function(e,n){var t=n.width/2,r=n.height/2,o=Math.abs(e.x-n.x-t),i=Math.abs(e.y-n.y-r),s=t+e.radius,a=r+e.radius;if(s<o||a<i)return!1;if(o<=t||i<=r)return!0;var u=o-t,l=i-r;return u*u+l*l<=e.radius*e.radius}},function(d,w,e){d.exports={COLLIDE:e(944),OVERLAP:e(945),PAUSE:e(946),RESUME:e(947),TILE_COLLIDE:e(948),TILE_OVERLAP:e(949),WORLD_BOUNDS:e(950),WORLD_STEP:e(951)}},function(d,w,e){var n=e(119);d.exports=function(t,r,o){var i=n(t,r,!0,o),s=n(t,r-1,!0,o),a=n(t,r+1,!0,o),u=n(t-1,r,!0,o),l=n(t+1,r,!0,o),c=i&&i.collides;return c&&(i.faceTop=!0,i.faceBottom=!0,i.faceLeft=!0,i.faceRight=!0),s&&s.collides&&(c&&(i.faceTop=!1),s.faceBottom=!c),a&&a.collides&&(c&&(i.faceBottom=!1),a.faceTop=!c),u&&u.collides&&(c&&(i.faceLeft=!1),u.faceRight=!c),l&&l.collides&&(c&&(i.faceRight=!1),l.faceLeft=!c),i&&!i.collides&&i.resetFaces(),i}},function(d,w,e){var n=e(3),t=e(174);d.exports=function(r,o,i){var s,a,u,l,c,h,f,g,p,v,T,E,M,A,C,P,R;return i===void 0&&(i=[]),t(r,o)&&(s=r.x1,a=r.y1,u=r.x2,l=r.y2,(E=(T=2*((h=u-s)*(g=s-o.x)+(f=l-a)*(p=a-o.y)))*T-4*(v=h*h+f*f)*(g*g+p*p-(c=o.radius)*c))==0?(A=s+(M=-T/(2*v))*h,C=a+M*f,0<=M&&M<=1&&i.push(new n(A,C))):0<E&&(A=s+(P=(-T-Math.sqrt(E))/(2*v))*h,C=a+P*f,0<=P&&P<=1&&i.push(new n(A,C)),A=s+(R=(-T+Math.sqrt(E))/(2*v))*h,C=a+R*f,0<=R&&R<=1&&i.push(new n(A,C)))),i}},function(d,w,e){var n=e(50),t=new(e(3));d.exports=function(r,o,i){if(i===void 0&&(i=t),n(o,r.x1,r.y1))return i.x=r.x1,i.y=r.y1,!0;if(n(o,r.x2,r.y2))return i.x=r.x2,i.y=r.y2,!0;var s,a=r.x2-r.x1,u=r.y2-r.y1,l=o.x-r.x1,c=o.y-r.y1,h=a*a+u*u,f=a,g=u;return 0<h&&(f*=s=(l*a+c*u)/h,g*=s),i.x=r.x1+f,i.y=r.y1+g,f*f+g*g<=h&&0<=f*a+g*u&&n(o,i.x,i.y)}},function(d,w,e){var n=e(3),t=e(68),r=e(358);d.exports=function(o,i,s){if(s===void 0&&(s=[]),r(o,i))for(var a=i.getLineA(),u=i.getLineB(),l=i.getLineC(),c=i.getLineD(),h=[new n,new n,new n,new n],f=[t(a,o,h[0]),t(u,o,h[1]),t(l,o,h[2]),t(c,o,h[3])],g=0;g<4;g++)f[g]&&s.push(h[g]);return s}},function(d,w){d.exports=function(e,n,t,r){t===void 0&&(t=!1),r===void 0&&(r=[]);for(var o,i,s,a,u,l,c=e.x3-e.x1,h=e.y3-e.y1,f=e.x2-e.x1,g=e.y2-e.y1,p=c*c+h*h,v=c*f+h*g,T=f*f+g*g,E=p*T-v*v,M=E==0?0:1/E,A=e.x1,C=e.y1,P=0;P<n.length&&(i=(p*(l=f*(s=n[P].x-A)+g*(a=n[P].y-C))-v*(u=c*s+h*a))*M,!(0<=(o=(T*u-v*l)*M)&&0<=i&&o+i<1&&(r.push({x:n[P].x,y:n[P].y}),t)));P++);return r}},function(d,w){d.exports=function(e,n,t,r){var o=Math.cos(r),i=Math.sin(r),s=e.x1-n,a=e.y1-t;return e.x1=s*o-a*i+n,e.y1=s*i+a*o+t,s=e.x2-n,a=e.y2-t,e.x2=s*o-a*i+n,e.y2=s*i+a*o+t,e}},function(d,w){d.exports=function(e,n,t){for(var r=!1,o=-1,i=e.points.length-1;++o<e.points.length;i=o){var s=e.points[o].x,a=e.points[o].y,u=e.points[i].x,l=e.points[i].y;(a<=t&&t<l||l<=t&&t<a)&&n<(u-s)*(t-a)/(l-a)+s&&(r=!r)}return r}},function(d,w){d.exports=function(e){return e.height===0?NaN:e.width/e.height}},function(d,w){d.exports=function(e,n,t,r){var o=Math.cos(r),i=Math.sin(r),s=e.x1-n,a=e.y1-t;return e.x1=s*o-a*i+n,e.y1=s*i+a*o+t,s=e.x2-n,a=e.y2-t,e.x2=s*o-a*i+n,e.y2=s*i+a*o+t,s=e.x3-n,a=e.y3-t,e.x3=s*o-a*i+n,e.y3=s*i+a*o+t,e}},function(d,w,e){var n=e(60),t=e(86),r=e(172),o=e(59);d.exports=function(i,s,a,u,l){if(!t(s,a,l))return null;u===void 0&&(u=!0);var c,h=l.data[a][s],f=h&&h.collides;i instanceof n?(l.data[a][s]===null&&(l.data[a][s]=new n(l,i.index,s,a,i.width,i.height)),l.data[a][s].copy(i)):(c=i,l.data[a][s]===null?l.data[a][s]=new n(l,c,s,a,l.tileWidth,l.tileHeight):l.data[a][s].index=c);var g=l.data[a][s],p=l.collideIndexes.indexOf(g.index)!==-1;return o(g,p),u&&f!==g.collides&&r(s,a,l),g}},function(d,w){d.exports=function(e,n,t){var r=t.collideIndexes.indexOf(e);n&&r===-1?t.collideIndexes.push(e):n||r===-1||t.collideIndexes.splice(r,1)}},function(d,w){d.exports=function(e,n){return e.hasOwnProperty(n)}},function(d,w,e){var n=e(33),t=e(87),r=e(88),o=e(60);d.exports=function(i,s,a,u,l){for(var c=new t({tileWidth:a,tileHeight:u}),h=new r({name:i,tileWidth:a,tileHeight:u,format:n.ARRAY_2D,layers:[c]}),f=[],g=s.length,p=0,v=0;v<s.length;v++){f[v]=[];for(var T=s[v],E=0;E<T.length;E++){var M=parseInt(T[E],10);isNaN(M)||M===-1?f[v][E]=l?null:new o(c,-1,E,v,a,u):f[v][E]=new o(c,M,E,v,a,u)}p===0&&(p=T.length)}return h.width=c.width=p,h.height=c.height=g,h.widthInPixels=c.widthInPixels=p*a,h.heightInPixels=c.heightInPixels=g*u,c.data=f,h}},function(d,w){d.exports=function(e){var n=Boolean(2147483648&e),t=Boolean(1073741824&e),r=Boolean(536870912&e);e&=536870911;var o=0,i=!1;return n&&t&&r?(o=Math.PI/2,i=!0):n&&t&&!r?(o=Math.PI,i=!1):n&&!t&&r?(o=Math.PI/2,i=!1):!n||t||r?!n&&t&&r?(o=3*Math.PI/2,i=!1):n||!t||r?n||t||!r?n||t||r||(o=0,i=!1):(o=3*Math.PI/2,i=!0):(o=Math.PI,i=!0):i=!(o=0),{gid:e,flippedHorizontal:n,flippedVertical:t,flippedAntiDiagonal:r,rotation:o,flipped:i}}},function(d,w,e){var n=e(2);d.exports=function(t,r,o){if(!r)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var i=r.x+n(r,"startx",0)*t.tilewidth+n(r,"offsetx",0),s=r.y+n(r,"starty",0)*t.tileheight+n(r,"offsety",0);return{i:0,layers:r.layers,name:o.name+r.name+"/",opacity:o.opacity*r.opacity,visible:o.visible&&r.visible,x:o.x+i,y:o.y+s}}},function(d,w,e){function n(i){return{x:i.x,y:i.y}}var t=e(457),r=e(185),o=["id","name","type","rotation","properties","visible","x","y","width","height"];d.exports=function(i,s,a){s===void 0&&(s=0),a===void 0&&(a=0);var u,l=t(i,o);return l.x+=s,l.y+=a,i.gid?(u=r(i.gid),l.gid=u.gid,l.flippedHorizontal=u.flippedHorizontal,l.flippedVertical=u.flippedVertical,l.flippedAntiDiagonal=u.flippedAntiDiagonal):i.polyline?l.polyline=i.polyline.map(n):i.polygon?l.polygon=i.polygon.map(n):i.ellipse?l.ellipse=i.ellipse:i.text?l.text=i.text:i.point?l.point=!0:l.rectangle=!0,l}},function(d,w,e){var n=e(33),t=e(88),r=e(381),o=e(396);d.exports=function(i,s,a,u,l,c,h,f){a===void 0&&(a=32),u===void 0&&(u=32),l===void 0&&(l=10),c===void 0&&(c=10),f===void 0&&(f=!1);var g,p=null;return Array.isArray(h)?p=r(s!==void 0?s:"map",n.ARRAY_2D,h,a,u,f):s!==void 0&&((g=i.cache.tilemap.get(s))?p=r(s,g.format,g.data,a,u,f):console.warn("No map data found for key "+s)),p===null&&(p=new t({tileWidth:a,tileHeight:u,width:l,height:c})),new o(i,p)}},function(d,w,e){var n=e(5);d.exports=function(t){var r=n(t,"targets",null);return r===null||(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r])),r}},function(d,w){function e(o){return!!o.getActive&&typeof o.getActive=="function"}function n(o){return!!o.getStart&&typeof o.getStart=="function"}function t(o){return!!o.getEnd&&typeof o.getEnd=="function"}var r=function(o,i){var s,a,u,l,c,h,f,g=function(A,C,P){return P},p=function(A,C,P){return P},v=null,T=typeof i;if(T=="number")g=function(){return i};else if(T=="string"){var E=i[0],M=parseFloat(i.substr(2));switch(E){case"+":g=function(A,C,P){return P+M};break;case"-":g=function(A,C,P){return P-M};break;case"*":g=function(A,C,P){return P*M};break;case"/":g=function(A,C,P){return P/M};break;default:g=function(){return parseFloat(i)}}}else T=="function"?g=i:T=="object"&&(n(f=i)||t(f)||e(f)?(e(i)&&(v=i.getActive),t(i)&&(g=i.getEnd),n(i)&&(p=i.getStart)):i.hasOwnProperty("value")?h=r(o,i.value):(s=i.hasOwnProperty("to"),a=i.hasOwnProperty("from"),u=i.hasOwnProperty("start"),s&&(a||u)&&(h=r(o,i.to),u&&(l=r(o,i.start),h.getActive=l.getEnd),a&&(c=r(o,i.from),h.getStart=c.getEnd))));return h=h||{getActive:v,getEnd:g,getStart:p}};d.exports=r},function(d,w){d.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(d,w,e){var n=e(0),t=e(6),r=e(193),o=e(22),i=e(8),s=e(77),a=e(10),u=new n({Extends:t,initialize:function(l,c,h){t.call(this),this.parent=l,this.parentIsTimeline=l.hasOwnProperty("isTimeline"),this.data=c,this.totalData=c.length,this.targets=h,this.totalTargets=h.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=s.PENDING_ADD,this._pausedState=s.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(l){return l===void 0&&(l=0),this.data[l].current},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===s.ACTIVE},isPaused:function(){return this.state===s.PAUSED},hasTarget:function(l){return this.targets.indexOf(l)!==-1},updateTo:function(l,c,h){h===void 0&&(h=!1);for(var f=0;f<this.totalData;f++){var g=this.data[f];g.key===l&&(g.end=c,h&&(g.start=g.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===s.ACTIVE?this.seek(0):this.state===s.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===s.PENDING_ADD?this:this.play()},calcDuration:function(){for(var l=0,c=a.MAX_SAFE_INTEGER,h=this.data,f=0;f<this.totalData;f++){var g=h[f];g.t1=g.duration+g.hold,g.yoyo&&(g.t1+=g.duration),g.t2=g.t1+g.repeatDelay,g.totalDuration=g.delay+g.t1,g.repeat===-1?g.totalDuration+=999999999999*g.t2:0<g.repeat&&(g.totalDuration+=g.t2*g.repeat),g.totalDuration>l&&(l=g.totalDuration),g.delay<c&&(c=g.delay)}this.duration=Math.max(l,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=c},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=s.PENDING_ADD,this._pausedState=s.INIT,!1;for(var l=this.data,c=this.totalTargets,h=0;h<this.totalData;h++){var f=l[h],g=f.target,p=f.gen,v=f.key,T=f.index;f.delay=p.delay(g,v,0,T,c,this),f.duration=Math.max(p.duration(g,v,0,T,c,this),.001),f.hold=p.hold(g,v,0,T,c,this),f.repeat=p.repeat(g,v,0,T,c,this),f.repeatDelay=p.repeatDelay(g,v,0,T,c,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=s.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=s.LOOP_DELAY):(this.state=s.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=s.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===s.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=s.PAUSED),this},play:function(l){l===void 0&&(l=!1);var c=this.state;return c!==s.INIT||this.parentIsTimeline?c===s.ACTIVE||c===s.PENDING_ADD&&this._pausedState===s.PENDING_ADD||(this.parentIsTimeline||c!==s.PENDING_REMOVE&&c!==s.REMOVED?this.parentIsTimeline?(this.resetTweenData(l),this.calculatedOffset===0?this.state=s.ACTIVE:(this.countdown=this.calculatedOffset,this.state=s.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(l),this.state=s.ACTIVE),this.makeActive()):(this.seek(0),this.parent.makeActive(this))):(this.resetTweenData(!1),this.state=s.ACTIVE),this},resetTweenData:function(l){for(var c=this.data,h=this.totalData,f=this.totalTargets,g=0;g<h;g++){var p=c[g],v=p.target,T=p.key,E=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,l?(p.start=p.getStartValue(v,T,p.start,E,f,this),p.end=p.getEndValue(v,T,p.end,E,f,this),p.current=p.start,p.state=s.PLAYING_FORWARD):p.state=s.PENDING_RENDER,0<p.delay&&(p.elapsed=p.delay,p.state=s.DELAY),p.getActiveValue&&(v[T]=p.getActiveValue(p.target,p.key,p.start))}},resume:function(){return this.state===s.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(l,c){if(c===void 0&&(c=16.6),36e5<=this.totalDuration)return console.warn("Tween.seek duration too long"),this;this.state===s.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var h=this.data,f=this.totalTargets,g=0;g<this.totalData;g++){var p=h[g],v=p.target,T=p.gen,E=p.key,M=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,p.delay=T.delay(v,E,0,M,f,this),p.duration=Math.max(T.duration(v,E,0,M,f,this),.001),p.hold=T.hold(v,E,0,M,f,this),p.repeat=T.repeat(v,E,0,M,f,this),p.repeatDelay=T.repeatDelay(v,E,0,M,f,this),p.current=p.start,p.state=s.PLAYING_FORWARD,this.updateTweenData(this,p,0,M,f),0<p.delay&&(p.elapsed=p.delay,p.state=s.DELAY)}this.calcDuration();var A=!1;for(this.state===s.PAUSED&&(A=!0,this.state=s.ACTIVE),this.isSeeking=!0;this.update(0,c),this.totalProgress<l;);return this.isSeeking=!1,A&&(this.state=s.PAUSED),this},setCallback:function(l,c,h,f){return this.callbacks[l]={func:c,scope:f,params:h},this},complete:function(l){return l===void 0&&(l=0),l?(this.state=s.COMPLETE_DELAY,this.countdown=l):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(l){return this.state===s.ACTIVE&&l!==void 0&&this.seek(l),this.state!==s.REMOVED&&(this.state!==s.PAUSED&&this.state!==s.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=s.PENDING_REMOVE),this},update:function(l,c){if(this.state===s.PAUSED)return!1;switch(this.useFrames&&(c=+this.parent.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case s.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=c,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var h=!1,f=0;f<this.totalData;f++){var g=this.data[f];this.updateTweenData(this,g,c)&&(h=!0)}h||this.nextState();break;case s.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=s.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case s.OFFSET_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=s.ACTIVE);break;case s.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===s.PENDING_REMOVE},dispatchTweenDataEvent:function(l,c,h){this.isSeeking||(this.emit(l,this,h.key,h.target,h.current,h.previous),c&&(c.params[1]=h.target,c.func.apply(c.scope,c.params)))},dispatchTweenEvent:function(l,c){this.isSeeking||(this.emit(l,this,this.targets),c&&(c.params[1]=this.targets,c.func.apply(c.scope,c.params)))},setStateFromEnd:function(l,c,h){return c.yoyo?(c.elapsed=h,c.progress=h/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,l.callbacks.onYoyo,c),c.start=c.getStartValue(c.target,c.key,c.start,c.index,l.totalTargets,l),s.PLAYING_BACKWARD):0<c.repeatCounter?(c.repeatCounter--,c.elapsed=h,c.progress=h/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.start=c.getStartValue(c.target,c.key,c.start,c.index,l.totalTargets,l),c.end=c.getEndValue(c.target,c.key,c.start,c.index,l.totalTargets,l),0<c.repeatDelay?(c.elapsed=c.repeatDelay-h,c.current=c.start,c.target[c.key]=c.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,l.callbacks.onRepeat,c),s.PLAYING_FORWARD)):s.COMPLETE},setStateFromStart:function(l,c,h){return 0<c.repeatCounter?(c.repeatCounter--,c.elapsed=h,c.progress=h/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.end=c.getEndValue(c.target,c.key,c.start,c.index,l.totalTargets,l),0<c.repeatDelay?(c.elapsed=c.repeatDelay-h,c.current=c.start,c.target[c.key]=c.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,l.callbacks.onRepeat,c),s.PLAYING_FORWARD)):s.COMPLETE},updateTweenData:function(l,c,h){var f=c.target;switch(c.state){case s.PLAYING_FORWARD:case s.PLAYING_BACKWARD:if(!f){c.state=s.COMPLETE;break}var g=c.elapsed,p=c.duration,v=0;p<(g+=h)&&(v=g-p,g=p);var T,E=c.state===s.PLAYING_FORWARD,M=g/p;c.elapsed=g,c.progress=M,c.previous=c.current,M==1?E?(c.current=c.end,f[c.key]=c.end,0<c.hold?(c.elapsed=c.hold-v,c.state=s.HOLD_DELAY):c.state=this.setStateFromEnd(l,c,v)):(c.current=c.start,f[c.key]=c.start,c.state=this.setStateFromStart(l,c,v)):(T=E?c.ease(M):c.ease(1-M),c.current=c.start+(c.end-c.start)*T,f[c.key]=c.current),this.dispatchTweenDataEvent(r.TWEEN_UPDATE,l.callbacks.onUpdate,c);break;case s.DELAY:c.elapsed-=h,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=s.PENDING_RENDER);break;case s.REPEAT_DELAY:c.elapsed-=h,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=s.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,l.callbacks.onRepeat,c));break;case s.HOLD_DELAY:c.elapsed-=h,c.elapsed<=0&&(c.state=this.setStateFromEnd(l,c,Math.abs(c.elapsed)));break;case s.PENDING_RENDER:f?(c.start=c.getStartValue(f,c.key,f[c.key],c.index,l.totalTargets,l),c.end=c.getEndValue(f,c.key,c.start,c.index,l.totalTargets,l),c.current=c.start,f[c.key]=c.start,c.state=s.PLAYING_FORWARD):c.state=s.COMPLETE}return c.state!==s.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],i.register("tween",function(l){return this.scene.sys.tweens.add(l)}),o.register("tween",function(l){return this.scene.sys.tweens.create(l)}),d.exports=u},function(d,w,e){d.exports={TIMELINE_COMPLETE:e(1128),TIMELINE_LOOP:e(1129),TIMELINE_PAUSE:e(1130),TIMELINE_RESUME:e(1131),TIMELINE_START:e(1132),TIMELINE_UPDATE:e(1133),TWEEN_ACTIVE:e(1134),TWEEN_COMPLETE:e(1135),TWEEN_LOOP:e(1136),TWEEN_REPEAT:e(1137),TWEEN_START:e(1138),TWEEN_STOP:e(1139),TWEEN_UPDATE:e(1140),TWEEN_YOYO:e(1141)}},function(d,w){d.exports=function(e,n,t,r,o,i,s,a,u,l,c,h,f,g,p){return{target:e,index:n,key:t,getActiveValue:i,getEndValue:r,getStartValue:o,ease:s,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:g,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:a,duration:u,hold:c,repeat:h,repeatDelay:f},state:0}}},function(d,w,e){var n=new(e(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var r=0;r<t.length;r++)this.set(t[r][0],t[r][1])},set:function(t,r){return this.has(t)||this.size++,this.entries[t]=r,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],r=this.entries;for(var o in r)t.push(r[o]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(t){delete this.entries[t]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],r=this.entries;for(var o in r)t.push(r[o]);return t},dump:function(){var t=this.entries;for(var r in console.group("Map"),t)console.log(r,t[r]);console.groupEnd()},each:function(t){var r=this.entries;for(var o in r)if(t(o,r[o])===!1)break;return this},contains:function(t){var r=this.entries;for(var o in r)if(r[o]===t)return!0;return!1},merge:function(t,r){r===void 0&&(r=!1);var o=this.entries,i=t.entries;for(var s in i)o.hasOwnProperty(s)&&r?o[s]=i[s]:this.set(s,i[s]);return this}});d.exports=n},function(d,w){d.exports=function(e,n,t,r){n===void 0&&(n=0),t===void 0&&(t=" "),r===void 0&&(r=3);var o;if(n+1>=(e=e.toString()).length)switch(r){case 1:e=new Array(n+1-e.length).join(t)+e;break;case 3:var i=Math.ceil((o=n-e.length)/2);e=new Array(1+(o-i)).join(t)+e+new Array(i+1).join(t);break;default:e+=new Array(n+1-e.length).join(t)}return e}},function(d,w){var e="";function n(t){for(var r=["i","webkitI","msI","mozI","oI"],o=0;o<r.length;o++){var i=r[o]+"mageSmoothingEnabled";if(i in t)return i}return null}d.exports={disable:function(t){return e===""&&(e=n(t)),e&&(t[e]=!1),t},enable:function(t){return e===""&&(e=n(t)),e&&(t[e]=!0),t},getPrefix:n,isEnabled:function(t){return e!==null?t[e]:null}}},function(d,w,e){var n=e(10),t=e(16)(!1,t={Angle:e(607),Distance:e(616),Easing:e(621),Fuzzy:e(622),Interpolation:e(625),Pow2:e(630),Snap:e(632),RandomDataGenerator:e(634),Average:e(635),Bernstein:e(267),Between:e(149),CatmullRom:e(146),CeilTo:e(636),Clamp:e(12),DegToRad:e(48),Difference:e(637),Factorial:e(268),FloatBetween:e(125),FloorTo:e(638),FromPercent:e(80),GetSpeed:e(639),IsEven:e(640),IsEvenStrict:e(641),Linear:e(98),MaxAdd:e(642),MinSub:e(643),Percent:e(644),RadToDeg:e(199),RandomXY:e(645),RandomXYZ:e(646),RandomXYZW:e(647),Rotate:e(272),RotateAround:e(226),RotateAroundDistance:e(150),RotateTo:e(648),RoundAwayFromZero:e(273),RoundTo:e(649),SinCosTableGenerator:e(650),SmootherStep:e(148),SmoothStep:e(147),ToXY:e(651),TransformXY:e(274),Within:e(652),Wrap:e(57),Vector2:e(4),Vector3:e(151),Vector4:e(409),Matrix3:e(275),Matrix4:e(276),Quaternion:e(277),RotateVec3:e(653)},n);d.exports=t},function(d,w,e){var n=e(10);d.exports=function(t){return t*n.RAD_TO_DEG}},function(d,w,e){d.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(d,w,e){var n=e(0),t=e(91),r=e(2),o=e(202),i=e(279),s=e(280),a=e(27),u=e(14),l=e(126),c=new n({Extends:l,Mixins:[o],initialize:function(h){var f=h.renderer.config;l.call(this,{game:h.game,renderer:h.renderer,gl:h.renderer.gl,topology:r(h,"topology",h.renderer.gl.TRIANGLES),vertShader:r(h,"vertShader",s),fragShader:r(h,"fragShader",i),vertexCapacity:r(h,"vertexCapacity",6*f.batchSize),vertexSize:r(h,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:h.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:h.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:h.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:h.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=f.batchSize,this.batches=[],this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this._tempMatrix4=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.tintEffect=2,this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[],this.mvpInit()},onBind:function(){return l.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(h,f,g){return l.prototype.resize.call(this,h,f,g),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(h,f){return h===void 0&&(h=this.renderer.blankTexture.glTexture),f===void 0&&(f=0),this.requireTextureBatch(h,f)&&this.pushBatch(h,f),this},requireTextureBatch:function(h,f){var g=this.batches,p=g.length;return!(0<p)||(0<f?g[p-1].textures[f-1]:g[p-1].texture)!==h},pushBatch:function(h,f){var g;f===0?this.batches.push({first:this.vertexCount,texture:h,textures:[]}):((g=[])[f-1]=h,this.batches.push({first:this.vertexCount,texture:null,textures:g}))},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var h,f,g,p=this.gl,v=this.vertexCount,T=this.topology,E=this.vertexSize,M=this.renderer,A=this.batches,C=A.length,P=0,R=null;if(C===0||v===0)return this.flushLocked=!1,this;p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,v*E));for(var D=0;D<C-1;D++){if(R=A[D],h=A[D+1],0<R.textures.length){for(f=0;f<R.textures.length;++f)(g=R.textures[f])&&M.setTexture2D(g,1+f,!1);p.activeTexture(p.TEXTURE0)}P=h.first-R.first,R.texture===null||P<=0||(M.setTexture2D(R.texture,0,!1),p.drawArrays(T,R.first,P))}if(0<(R=A[C-1]).textures.length){for(f=0;f<R.textures.length;++f)(g=R.textures[f])&&M.setTexture2D(g,1+f,!1);p.activeTexture(p.TEXTURE0)}return P=v-R.first,R.texture&&0<P&&(M.setTexture2D(R.texture,0,!1),p.drawArrays(T,R.first,P)),this.vertexCount=0,A.length=0,this.flushLocked=!1,this},batchSprite:function(h,f,g){this.renderer.setPipeline(this);var p,v=this._tempMatrix1,T=this._tempMatrix2,E=this._tempMatrix3,M=h.frame,A=M.glTexture,C=M.u0,P=M.v0,R=M.u1,D=M.v1,I=M.x,W=M.y,G=M.cutWidth,Y=M.cutHeight,j=M.customPivot,ee=h.displayOriginX,te=h.displayOriginY,F=-ee+I,U=-te+W;h.isCropped&&((p=h._crop).flipX===h.flipX&&p.flipY===h.flipY||M.updateCropUVs(p,h.flipX,h.flipY),C=p.u0,P=p.v0,R=p.u1,D=p.v1,G=p.width,Y=p.height,F=-ee+p.x,U=-te+p.y);var K=1,oe=1;h.flipX&&(j||(F+=-M.realWidth+2*ee),K=-1),(h.flipY||M.source.isGLTexture&&!A.flipY)&&(j||(U+=-M.realHeight+2*te),oe=-1),T.applyITRS(h.x,h.y,h.rotation,h.scaleX*K,h.scaleY*oe),v.copyFrom(f.matrix),g?(v.multiplyWithOffset(g,-f.scrollX*h.scrollFactorX,-f.scrollY*h.scrollFactorY),T.e=h.x,T.f=h.y):(T.e-=f.scrollX*h.scrollFactorX,T.f-=f.scrollY*h.scrollFactorY),v.multiply(T,E);var ae=F+G,ce=U+Y,re=E.getX(F,U),ve=E.getY(F,U),Se=E.getX(F,ce),de=E.getY(F,ce),pe=E.getX(ae,ce),Ae=E.getY(ae,ce),Oe=E.getX(ae,U),Fe=E.getY(ae,U),Ve=u.getTintAppendFloatAlpha(h._tintTL,f.alpha*h._alphaTL),ze=u.getTintAppendFloatAlpha(h._tintTR,f.alpha*h._alphaTR),Xe=u.getTintAppendFloatAlpha(h._tintBL,f.alpha*h._alphaBL),Ge=u.getTintAppendFloatAlpha(h._tintBR,f.alpha*h._alphaBR);f.roundPixels&&(re=Math.round(re),ve=Math.round(ve),Se=Math.round(Se),de=Math.round(de),pe=Math.round(pe),Ae=Math.round(Ae),Oe=Math.round(Oe),Fe=Math.round(Fe)),this.setTexture2D(A,0);var pt=h._isTinted&&h.tintFill;this.batchQuad(re,ve,Se,de,pe,Ae,Oe,Fe,C,P,R,D,Ve,ze,Xe,Ge,pt,A,0)},batchQuad:function(h,f,g,p,v,T,E,M,A,C,P,R,D,I,W,G,Y,j,ee){var te=!1;this.vertexCount+6>this.vertexCapacity&&(this.flush(),te=!0,this.setTexture2D(j,ee));var F=this.vertexViewF32,U=this.vertexViewU32,K=this.vertexCount*this.vertexComponentCount-1;return F[++K]=h,F[++K]=f,F[++K]=A,F[++K]=C,F[++K]=Y,U[++K]=D,F[++K]=g,F[++K]=p,F[++K]=A,F[++K]=R,F[++K]=Y,U[++K]=W,F[++K]=v,F[++K]=T,F[++K]=P,F[++K]=R,F[++K]=Y,U[++K]=G,F[++K]=h,F[++K]=f,F[++K]=A,F[++K]=C,F[++K]=Y,U[++K]=D,F[++K]=v,F[++K]=T,F[++K]=P,F[++K]=R,F[++K]=Y,U[++K]=G,F[++K]=E,F[++K]=M,F[++K]=P,F[++K]=C,F[++K]=Y,U[++K]=I,this.vertexCount+=6,te},batchTri:function(h,f,g,p,v,T,E,M,A,C,P,R,D,I,W,G){var Y=!1;this.vertexCount+3>this.vertexCapacity&&(this.flush(),this.setTexture2D(W,G),Y=!0);var j=this.vertexViewF32,ee=this.vertexViewU32,te=this.vertexCount*this.vertexComponentCount-1;return j[++te]=h,j[++te]=f,j[++te]=E,j[++te]=M,j[++te]=I,ee[++te]=P,j[++te]=g,j[++te]=p,j[++te]=E,j[++te]=C,j[++te]=I,ee[++te]=R,j[++te]=v,j[++te]=T,j[++te]=A,j[++te]=C,j[++te]=I,ee[++te]=D,this.vertexCount+=3,Y},batchTexture:function(h,f,g,p,v,T,E,M,A,C,P,R,D,I,W,G,Y,j,ee,te,F,U,K,oe,ae,ce,re,ve,Se,de,pe){this.renderer.setPipeline(this,h);var Ae,Oe,Fe,Ve=this._tempMatrix1,ze=this._tempMatrix2,Xe=this._tempMatrix3,Ge=j/g+re,pt=ee/p+ve,lt=(j+te)/g+re,xt=(ee+F)/p+ve,it=E,Et=M,gt=-G,dt=-Y;h.isCropped&&(it=(Ae=h._crop).width,Et=Ae.height,E=Ae.width,M=Ae.height,Oe=j=Ae.x,Fe=ee=Ae.y,R&&(Oe=te-Ae.x-Ae.width),D&&!f.isRenderTexture&&(Fe=F-Ae.y-Ae.height),Ge=Oe/g+re,pt=Fe/p+ve,lt=(Oe+Ae.width)/g+re,xt=(Fe+Ae.height)/p+ve,gt=-G+j,dt=-Y+ee),R&&(it*=-1,gt+=E),(D^=!pe&&f.isRenderTexture?1:0)&&(Et*=-1,dt+=M);var St=gt+it,mt=dt+Et;ze.applyITRS(v,T,P,A,C),Ve.copyFrom(Se.matrix),de?(Ve.multiplyWithOffset(de,-Se.scrollX*I,-Se.scrollY*W),ze.e=v,ze.f=T):(ze.e-=Se.scrollX*I,ze.f-=Se.scrollY*W),Ve.multiply(ze,Xe);var Mt=Xe.getX(gt,dt),It=Xe.getY(gt,dt),kt=Xe.getX(gt,mt),gi=Xe.getY(gt,mt),ke=Xe.getX(St,mt),m=Xe.getY(St,mt),S=Xe.getX(St,dt),b=Xe.getY(St,dt);Se.roundPixels&&(Mt=Math.round(Mt),It=Math.round(It),kt=Math.round(kt),gi=Math.round(gi),ke=Math.round(ke),m=Math.round(m),S=Math.round(S),b=Math.round(b)),this.setTexture2D(f,0),this.batchQuad(Mt,It,kt,gi,ke,m,S,b,Ge,pt,lt,xt,U,K,oe,ae,ce,f,0)},batchTextureFrame:function(h,f,g,p,v,T,E){this.renderer.setPipeline(this);var M=this._tempMatrix1.copyFrom(T),A=this._tempMatrix2,C=f+h.width,P=g+h.height;E?M.multiply(E,A):A=M;var R=A.getX(f,g),D=A.getY(f,g),I=A.getX(f,P),W=A.getY(f,P),G=A.getX(C,P),Y=A.getY(C,P),j=A.getX(C,g),ee=A.getY(C,g);this.setTexture2D(h.glTexture,0),p=u.getTintAppendFloatAlpha(p,v),this.batchQuad(R,D,I,W,G,Y,j,ee,h.u0,h.v0,h.u1,h.v1,p,p,p,p,0,h.glTexture,0)},drawFillRect:function(h,f,g,p,v,T){var E=h+g,M=f+p;this.setTexture2D();var A=u.getTintAppendFloatAlphaAndSwap(v,T);this.batchQuad(h,f,h,M,E,M,E,f,0,0,1,1,A,A,A,A,2)},batchFillRect:function(h,f,g,p,v,T){this.renderer.setPipeline(this);var E=this._tempMatrix3;T&&T.multiply(v,E);var M=h+g,A=f+p,C=E.getX(h,f),P=E.getY(h,f),R=E.getX(h,A),D=E.getY(h,A),I=E.getX(M,A),W=E.getY(M,A),G=E.getX(M,f),Y=E.getY(M,f),j=this.currentFrame,ee=j.u0,te=j.v0,F=j.u1,U=j.v1;this.batchQuad(C,P,R,D,I,W,G,Y,ee,te,F,U,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(h,f,g,p,v,T,E,M){this.renderer.setPipeline(this);var A=this._tempMatrix3;M&&M.multiply(E,A);var C=A.getX(h,f),P=A.getY(h,f),R=A.getX(g,p),D=A.getY(g,p),I=A.getX(v,T),W=A.getY(v,T),G=this.currentFrame,Y=G.u0,j=G.v0,ee=G.u1,te=G.v1;this.batchTri(C,P,R,D,I,W,Y,j,ee,te,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(h,f,g,p,v,T,E,M,A){var C=this.tempTriangle;C[0].x=h,C[0].y=f,C[0].width=E,C[1].x=g,C[1].y=p,C[1].width=E,C[2].x=v,C[2].y=T,C[2].width=E,C[3].x=h,C[3].y=f,C[3].width=E,this.batchStrokePath(C,E,!1,M,A)},batchFillPath:function(h,f,g){this.renderer.setPipeline(this);var p=this._tempMatrix3;g&&g.multiply(f,p);for(var v,T,E=h.length,M=this.polygonCache,A=this.fillTint.TL,C=this.fillTint.TR,P=this.fillTint.BL,R=this.tintEffect,D=0;D<E;++D)T=h[D],M.push(T.x,T.y);E=(v=t(M)).length;for(var I=this.currentFrame,W=0;W<E;W+=3){var G=2*v[W+0],Y=2*v[W+1],j=2*v[W+2],ee=M[0+G],te=M[1+G],F=M[0+Y],U=M[1+Y],K=M[0+j],oe=M[1+j],ae=p.getX(ee,te),ce=p.getY(ee,te),re=p.getX(F,U),ve=p.getY(F,U),Se=p.getX(K,oe),de=p.getY(K,oe),pe=I.u0,Ae=I.v0,Oe=I.u1,Fe=I.v1;this.batchTri(ae,ce,re,ve,Se,de,pe,Ae,Oe,Fe,A,C,P,R)}M.length=0},batchStrokePath:function(h,f,g,p,v){this.renderer.setPipeline(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=h.length-1,E=0;E<T;E++){var M=h[E],A=h[E+1];this.batchLine(M.x,M.y,A.x,A.y,M.width/2,A.width/2,f,E,!g&&E===T-1,p,v)}},batchLine:function(h,f,g,p,v,T,E,M,A,C,P){this.renderer.setPipeline(this);var R=this._tempMatrix3;P&&P.multiply(C,R);var D,I,W=g-h,G=p-f,Y=Math.sqrt(W*W+G*G),j=v*(p-f)/Y,ee=v*(h-g)/Y,te=T*(p-f)/Y,F=T*(h-g)/Y,U=g-te,K=p-F,oe=h-j,ae=f-ee,ce=g+te,re=p+F,ve=h+j,Se=f+ee,de=R.getX(U,K),pe=R.getY(U,K),Ae=R.getX(oe,ae),Oe=R.getY(oe,ae),Fe=R.getX(ce,re),Ve=R.getY(ce,re),ze=R.getX(ve,Se),Xe=R.getY(ve,Se),Ge=this.strokeTint,pt=this.tintEffect,lt=Ge.TL,xt=Ge.TR,it=Ge.BL,Et=Ge.BR,gt=this.currentFrame,dt=gt.u0,St=gt.v0,mt=gt.u1,Mt=gt.v1;this.batchQuad(ze,Xe,Ae,Oe,de,pe,Fe,Ve,dt,St,mt,Mt,lt,xt,it,Et,pt),E<=2||(D=this.prevQuad,I=this.firstQuad,0<M&&D[4]?this.batchQuad(ze,Xe,Ae,Oe,D[0],D[1],D[2],D[3],dt,St,mt,Mt,lt,xt,it,Et,pt):(I[0]=ze,I[1]=Xe,I[2]=Ae,I[3]=Oe,I[4]=1),A&&I[4]?this.batchQuad(de,pe,Fe,Ve,I[0],I[1],I[2],I[3],dt,St,mt,Mt,lt,xt,it,Et,pt):(D[0]=de,D[1]=pe,D[2]=Fe,D[3]=Ve,D[4]=1))}});d.exports=c},function(d,w){var e={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){return this.modelMatrixDirty=!0,this.viewMatrixDirty=!0,this.projectionMatrixDirty=!0,this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},mvpUpdate:function(){var n=this.program;return this.modelMatrixDirty&&(this.renderer.setMatrix4(n,"uModelMatrix",!1,this.modelMatrix),this.modelMatrixDirty=!1),this.viewMatrixDirty&&(this.renderer.setMatrix4(n,"uViewMatrix",!1,this.viewMatrix),this.viewMatrixDirty=!1),this.projectionMatrixDirty&&(this.renderer.setMatrix4(n,"uProjectionMatrix",!1,this.projectionMatrix),this.projectionMatrixDirty=!1),this},modelIdentity:function(){var n=this.modelMatrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this.modelMatrixDirty=!0,this},modelScale:function(n,t,r){var o=this.modelMatrix;return o[0]=o[0]*n,o[1]=o[1]*n,o[2]=o[2]*n,o[3]=o[3]*n,o[4]=o[4]*t,o[5]=o[5]*t,o[6]=o[6]*t,o[7]=o[7]*t,o[8]=o[8]*r,o[9]=o[9]*r,o[10]=o[10]*r,o[11]=o[11]*r,this.modelMatrixDirty=!0,this},modelTranslate:function(n,t,r){var o=this.modelMatrix;return o[12]=o[0]*n+o[4]*t+o[8]*r+o[12],o[13]=o[1]*n+o[5]*t+o[9]*r+o[13],o[14]=o[2]*n+o[6]*t+o[10]*r+o[14],o[15]=o[3]*n+o[7]*t+o[11]*r+o[15],this.modelMatrixDirty=!0,this},modelRotateX:function(n){var t=this.modelMatrix,r=Math.sin(n),o=Math.cos(n),i=t[4],s=t[5],a=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11];return t[4]=i*o+l*r,t[5]=s*o+c*r,t[6]=a*o+h*r,t[7]=u*o+f*r,t[8]=l*o-i*r,t[9]=c*o-s*r,t[10]=h*o-a*r,t[11]=f*o-u*r,this.modelMatrixDirty=!0,this},modelRotateY:function(n){var t=this.modelMatrix,r=Math.sin(n),o=Math.cos(n),i=t[0],s=t[1],a=t[2],u=t[3],l=t[8],c=t[9],h=t[10],f=t[11];return t[0]=i*o-l*r,t[1]=s*o-c*r,t[2]=a*o-h*r,t[3]=u*o-f*r,t[8]=i*r+l*o,t[9]=s*r+c*o,t[10]=a*r+h*o,t[11]=u*r+f*o,this.modelMatrixDirty=!0,this},modelRotateZ:function(n){var t=this.modelMatrix,r=Math.sin(n),o=Math.cos(n),i=t[0],s=t[1],a=t[2],u=t[3],l=t[4],c=t[5],h=t[6],f=t[7];return t[0]=i*o+l*r,t[1]=s*o+c*r,t[2]=a*o+h*r,t[3]=u*o+f*r,t[4]=l*o-i*r,t[5]=c*o-s*r,t[6]=h*o-a*r,t[7]=f*o-u*r,this.modelMatrixDirty=!0,this},viewIdentity:function(){var n=this.viewMatrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this.viewMatrixDirty=!0,this},viewScale:function(n,t,r){var o=this.viewMatrix;return o[0]=o[0]*n,o[1]=o[1]*n,o[2]=o[2]*n,o[3]=o[3]*n,o[4]=o[4]*t,o[5]=o[5]*t,o[6]=o[6]*t,o[7]=o[7]*t,o[8]=o[8]*r,o[9]=o[9]*r,o[10]=o[10]*r,o[11]=o[11]*r,this.viewMatrixDirty=!0,this},viewTranslate:function(n,t,r){var o=this.viewMatrix;return o[12]=o[0]*n+o[4]*t+o[8]*r+o[12],o[13]=o[1]*n+o[5]*t+o[9]*r+o[13],o[14]=o[2]*n+o[6]*t+o[10]*r+o[14],o[15]=o[3]*n+o[7]*t+o[11]*r+o[15],this.viewMatrixDirty=!0,this},viewRotateX:function(n){var t=this.viewMatrix,r=Math.sin(n),o=Math.cos(n),i=t[4],s=t[5],a=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11];return t[4]=i*o+l*r,t[5]=s*o+c*r,t[6]=a*o+h*r,t[7]=u*o+f*r,t[8]=l*o-i*r,t[9]=c*o-s*r,t[10]=h*o-a*r,t[11]=f*o-u*r,this.viewMatrixDirty=!0,this},viewRotateY:function(n){var t=this.viewMatrix,r=Math.sin(n),o=Math.cos(n),i=t[0],s=t[1],a=t[2],u=t[3],l=t[8],c=t[9],h=t[10],f=t[11];return t[0]=i*o-l*r,t[1]=s*o-c*r,t[2]=a*o-h*r,t[3]=u*o-f*r,t[8]=i*r+l*o,t[9]=s*r+c*o,t[10]=a*r+h*o,t[11]=u*r+f*o,this.viewMatrixDirty=!0,this},viewRotateZ:function(n){var t=this.viewMatrix,r=Math.sin(n),o=Math.cos(n),i=t[0],s=t[1],a=t[2],u=t[3],l=t[4],c=t[5],h=t[6],f=t[7];return t[0]=i*o+l*r,t[1]=s*o+c*r,t[2]=a*o+h*r,t[3]=u*o+f*r,t[4]=l*o-i*r,t[5]=c*o-s*r,t[6]=h*o-a*r,t[7]=f*o-u*r,this.viewMatrixDirty=!0,this},viewLoad2D:function(n){var t=this.viewMatrix;return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=0,t[4]=n[2],t[5]=n[3],t[6]=0,t[7]=0,t[8]=n[4],t[9]=n[5],t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.viewMatrixDirty=!0,this},viewLoad:function(n){var t=this.viewMatrix;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this.viewMatrixDirty=!0,this},projIdentity:function(){var n=this.projectionMatrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this.projectionMatrixDirty=!0,this},projOrtho:function(n,t,r,o,i,s){var a=this.projectionMatrix,u=1/(n-t),l=1/(r-o),c=1/(i-s);return a[0]=-2*u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*l,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*c,a[11]=0,a[12]=(n+t)*u,a[13]=(o+r)*l,a[14]=(s+i)*c,a[15]=1,this.projectionMatrixDirty=!0,this},projPersp:function(n,t,r,o){var i=this.projectionMatrix,s=1/Math.tan(n/2),a=1/(r-o);return i[0]=s/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(o+r)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*o*r*a,i[15]=0,this.projectionMatrixDirty=!0,this}};d.exports=e},function(d,w,e){var n=e(7),t=e(10);d.exports=function(r,o){if(o===void 0&&(o=new n),r.length===0)return o;for(var i,s,a,u=Number.MAX_VALUE,l=Number.MAX_VALUE,c=t.MIN_SAFE_INTEGER,h=t.MIN_SAFE_INTEGER,f=0;f<r.length;f++)i=r[f],a=Array.isArray(i)?(s=i[0],i[1]):(s=i.x,i.y),u=Math.min(u,s),l=Math.min(l,a),c=Math.max(c,s),h=Math.max(h,a);return o.x=u,o.y=l,o.width=c-u,o.height=h-l,o}},function(d,w){d.exports=function(e){return e&&e[0].toUpperCase()+e.slice(1)}},function(d,w,e){var n=e(66);d.exports=function(t,r){var o=n(t);for(var i in r)o.hasOwnProperty(i)||(o[i]=r[i]);return o}},function(d,w,e){d.exports={Matrix:e(781),Add:e(788),AddAt:e(789),BringToTop:e(790),CountAllMatching:e(791),Each:e(792),EachInRange:e(793),FindClosestInSorted:e(214),GetAll:e(310),GetFirst:e(311),GetRandom:e(207),MoveDown:e(794),MoveTo:e(795),MoveUp:e(796),NumberArray:e(797),NumberArrayStep:e(798),QuickSelect:e(319),Range:e(320),Remove:e(104),RemoveAt:e(799),RemoveBetween:e(800),RemoveRandomElement:e(801),Replace:e(802),RotateLeft:e(321),RotateRight:e(322),SafeRange:e(58),SendToBack:e(803),SetAll:e(804),Shuffle:e(111),SpliceOne:e(65),StableSort:e(131),Swap:e(805)}},function(d,w){d.exports=function(e,n,t){n===void 0&&(n=0),t===void 0&&(t=e.length);var r=n+Math.floor(Math.random()*t);return e[r]===void 0?null:e[r]}},function(d,w,e){var n=e(206),t=e(0),r=e(1),o=e(131),i=new t({initialize:function(s){this.parent=s,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(s,a){return a?n.Add(this.list,s):n.Add(this.list,s,0,this.addCallback,this)},addAt:function(s,a,u){return u?n.AddAt(this.list,s,a):n.AddAt(this.list,s,a,0,this.addCallback,this)},getAt:function(s){return this.list[s]},getIndex:function(s){return this.list.indexOf(s)},sort:function(s,a){return s&&(a===void 0&&(a=function(u,l){return u[s]-l[s]}),o.inplace(this.list,a)),this},getByName:function(s){return n.GetFirst(this.list,"name",s)},getRandom:function(s,a){return n.GetRandom(this.list,s,a)},getFirst:function(s,a,u,l){return n.GetFirst(this.list,s,a,u,l)},getAll:function(s,a,u,l){return n.GetAll(this.list,s,a,u,l)},count:function(s,a){return n.CountAllMatching(this.list,s,a)},swap:function(s,a){n.Swap(this.list,s,a)},moveTo:function(s,a){return n.MoveTo(this.list,s,a)},remove:function(s,a){return a?n.Remove(this.list,s):n.Remove(this.list,s,this.removeCallback,this)},removeAt:function(s,a){return a?n.RemoveAt(this.list,s):n.RemoveAt(this.list,s,this.removeCallback,this)},removeBetween:function(s,a,u){return u?n.RemoveBetween(this.list,s,a):n.RemoveBetween(this.list,s,a,this.removeCallback,this)},removeAll:function(s){for(var a=this.list.length;a--;)this.remove(this.list[a],s);return this},bringToTop:function(s){return n.BringToTop(this.list,s)},sendToBack:function(s){return n.SendToBack(this.list,s)},moveUp:function(s){return n.MoveUp(this.list,s),s},moveDown:function(s){return n.MoveDown(this.list,s),s},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(s,a){return n.Replace(this.list,s,a)},exists:function(s){return-1<this.list.indexOf(s)},setAll:function(s,a,u,l){return n.SetAll(this.list,s,a,u,l),this},each:function(s,a){for(var u=[null],l=2;l<arguments.length;l++)u.push(arguments[l]);for(l=0;l<this.list.length;l++)u[0]=this.list[l],s.apply(a,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});d.exports=i},function(d,w,e){var n=e(0),t=e(6),r=e(822),o=new n({Extends:t,initialize:function(){t.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},add:function(i){return this._pending.push(i),this._toProcess++,i},remove:function(i){return this._destroy.push(i),this._toProcess++,i},removeAll:function(){for(var i=this._active,s=this._destroy,a=i.length;a--;)s.push(i[a]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;for(var i,s=this._destroy,a=this._active,u=0;u<s.length;u++){i=s[u];var l=a.indexOf(i);l!==-1&&(a.splice(l,1),this.emit(r.REMOVE,i))}for(s.length=0,s=this._pending,u=0;u<s.length;u++)i=s[u],this._active.push(i),this.emit(r.ADD,i);return s.length=0,this._toProcess=0,this._active},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});d.exports=o},function(d,w,e){var n=e(25),t=e(0),r=e(13),o=e(15),i=e(19),s=e(270),a=e(197),u=e(832),l=e(4),c=new t({Extends:i,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,u],initialize:function(h,f,g,p,v,T,E){var M=h.sys.game.renderer;i.call(this,h,"TileSprite");var A=h.sys.textures.get(T),C=A.get(E);v=p&&v?(p=Math.floor(p),Math.floor(v)):(p=C.width,C.height),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=M,this.canvas=n.create(this,p,v),this.context=this.canvas.getContext("2d"),this.displayTexture=A,this.displayFrame=C,this._crop=this.resetCropObject(),this.texture=h.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=s(C.width),this.potHeight=s(C.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(f,g),this.setSize(p,v),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),h.sys.game.events.on(o.CONTEXT_RESTORED,function(P){var R=P.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=P.createTexture2D(0,R.LINEAR,R.LINEAR,R.REPEAT,R.REPEAT,R.RGBA,this.fillCanvas,this.potWidth,this.potHeight)},this)},setTexture:function(h,f){return this.displayTexture=this.scene.sys.textures.get(h),this.setFrame(f)},setFrame:function(h){var f=this.displayTexture.get(h);return this.potWidth=s(f.width),this.potHeight=s(f.height),this.canvas.width=0,f.cutWidth&&f.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=f,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(h,f){return h!==void 0&&(this.tilePositionX=h),f!==void 0&&(this.tilePositionY=f),this},setTileScale:function(h,f){return h===void 0&&(h=this.tileScaleX),f===void 0&&(f=h),this.tileScaleX=h,this.tileScaleY=f,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var h=this.displayFrame;if(h.source.isRenderTexture||h.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var f=this.fillContext,g=this.fillCanvas,p=this.potWidth,v=this.potHeight;this.renderer.gl||(p=h.cutWidth,v=h.cutHeight),f.clearRect(0,0,p,v),g.width=p,g.height=v,f.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,0,0,p,v),this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(g,this.fillPattern):this.fillPattern=f.createPattern(g,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var h,f,g,p,v,T=this.canvas;T.width===this.width&&T.height===this.height||(T.width=this.width,T.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl||(h=this.context,this.scene.sys.game.config.antialias||a.disable(h),f=this._tileScale.x,g=this._tileScale.y,p=this._tilePosition.x,v=this._tilePosition.y,h.clearRect(0,0,this.width,this.height),h.save(),h.scale(f,g),h.translate(-p,-v),h.fillStyle=this.fillPattern,h.fillRect(p,v,this.width/f,this.height/g),h.restore()),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(h){this._tilePosition.x=h,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(h){this._tilePosition.y=h,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(h){this._tileScale.x=h,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(h){this._tileScale.y=h,this.dirty=!0}}});d.exports=c},function(d,w,e){var n=e(56),t=e(62),r=e(50),o=e(0),i=e(13),s=e(19),a=e(7),u=e(34),l=new o({Extends:s,Mixins:[i.Depth,i.GetBounds,i.Origin,i.Transform,i.ScrollFactor,i.Visible],initialize:function(c,h,f,g,p){g===void 0&&(g=1),p===void 0&&(p=g),s.call(this,c,"Zone"),this.setPosition(h,f),this.width=g,this.height=p,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,h,f){f===void 0&&(f=!0),this.width=c,this.height=h,this.updateDisplayOrigin();var g=this.input;return f&&g&&!g.customHitArea&&(g.hitArea.width=c,g.hitArea.height=h),this},setDisplaySize:function(c,h){return this.displayWidth=c,this.displayHeight=h,this},setCircleDropZone:function(c){return this.setDropZone(new t(0,0,c),r)},setRectangleDropZone:function(c,h){return this.setDropZone(new a(0,0,c,h),u)},setDropZone:function(c,h){return c===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(c,h,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(){},renderWebGL:function(){}});d.exports=l},function(d,w,e){var n=e(0),t=e(178),r=e(370),o=e(35),i=new n({initialize:function(s){this.type=o.POLYGON,this.area=0,this.points=[],s&&this.setTo(s)},contains:function(s,a){return t(this,s,a)},setTo:function(s){if(this.area=0,this.points=[],typeof s=="string"&&(s=s.split(" ")),!Array.isArray(s))return this;for(var a,u=Number.MAX_VALUE,l=0;l<s.length;l++)a={x:0,y:0},typeof s[l]=="number"||typeof s[l]=="string"?(a.x=parseFloat(s[l]),a.y=parseFloat(s[l+1]),l++):Array.isArray(s[l])?(a.x=s[l][0],a.y=s[l][1]):(a.x=s[l].x,a.y=s[l].y),this.points.push(a),a.y<u&&(u=a.y);return this.calculateArea(u),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var s,a,u=0,l=0;l<this.points.length-1;l++)s=this.points[l],u+=((a=this.points[l+1]).x-s.x)*(s.y+a.y);return s=this.points[0],a=this.points[this.points.length-1],u+=(s.x-a.x)*(a.y+s.y),this.area=.5*-u,this.area},getPoints:function(s,a,u){return r(this,s,a,u)}});d.exports=i},function(d,w){d.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(d,w){d.exports=function(e,n,t){if(!n.length)return NaN;if(n.length===1)return n[0];var r,o,i=1;if(t){if(e<n[0][t])return n[0];for(;n[i][t]<e;)i++}else for(;n[i]<e;)i++;return i>n.length&&(i=n.length),t?(r=n[i-1][t],(o=n[i][t])-e<=e-r?n[i]:n[i-1]):(r=n[i-1],(o=n[i])-e<=e-r?o:r)}},function(d,w,e){var n=new(e(0))({initialize:function(t,r,o,i){this.textureKey=t,this.textureFrame=r,this.index=o,this.frame=i,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=void 0}});d.exports=n},function(d,w,e){var n=e(136),t=e(0),r=e(195),o=e(6),i=e(94),s=e(15),a=e(5),u=e(196),l=new t({Extends:o,initialize:function(c){o.call(this),this.game=c,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.paused=!1,this.name="AnimationManager",c.events.once(s.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(s.DESTROY,this.destroy,this)},add:function(c,h){return this.anims.has(c)?console.warn("Animation key exists: "+c):(h.key=c,this.anims.set(c,h),this.emit(i.ADD_ANIMATION,c,h)),this},exists:function(c){return this.anims.has(c)},create:function(c){var h=c.key,f=!1;return h&&((f=this.get(h))||(f=new n(this,h,c),this.anims.set(h,f),this.emit(i.ADD_ANIMATION,h,f))),f},fromJSON:function(c,h){h===void 0&&(h=!1),h&&this.anims.clear(),typeof c=="string"&&(c=JSON.parse(c));var f=[];if(c.hasOwnProperty("anims")&&Array.isArray(c.anims)){for(var g=0;g<c.anims.length;g++)f.push(this.create(c.anims[g]));c.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=c.globalTimeScale)}else c.hasOwnProperty("key")&&c.type==="frame"&&f.push(this.create(c));return f},generateFrameNames:function(c,h){var f=a(h,"prefix",""),g=a(h,"start",0),p=a(h,"end",0),v=a(h,"suffix",""),T=a(h,"zeroPad",0),E=a(h,"outputArray",[]),M=a(h,"frames",!1),A=this.textureManager.get(c);if(!A)return E;var C,P,R=g<p?1:-1;if(p+=R,h)if(Array.isArray(M))for(C=0;C<M.length;C++)P=f+u(M[C],T,"0",1)+v,A.has(P)&&E.push({key:c,frame:P});else for(C=g;C!==p;C+=R)P=f+u(C,T,"0",1)+v,A.has(P)&&E.push({key:c,frame:P});else for(M=A.getFrameNames(),C=0;C<M.length;C++)E.push({key:c,frame:M[C]});return E},generateFrameNumbers:function(c,h){var f,g=a(h,"start",0),p=a(h,"end",-1),v=a(h,"first",!1),T=a(h,"outputArray",[]),E=a(h,"frames",!1),M=this.textureManager.get(c);if(!M)return T;if(v&&M.has(v)&&T.push({key:c,frame:v}),Array.isArray(E))for(f=0;f<E.length;f++)M.has(E[f])&&T.push({key:c,frame:E[f]});else{p===-1&&(p=M.frameTotal);var A=g<p?1:-1;for(p+=A,f=g;f!==p;f+=A)M.has(f)&&T.push({key:c,frame:f})}return T},get:function(c){return this.anims.get(c)},load:function(c,h,f){var g=this.get(h);return g?g.load(c,f):console.warn("Missing animation: "+h),c},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(i.PAUSE_ALL)),this},play:function(c,h){if(Array.isArray(h)||(h=[h]),!this.get(c))return this;for(var f=0;f<h.length;f++)h[f].anims.play(c);return this},remove:function(c){var h=this.get(c);return h&&(this.emit(i.REMOVE_ANIMATION,c,h),this.anims.delete(c)),h},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(i.RESUME_ALL)),this},staggerPlay:function(c,h,f){if(f===void 0&&(f=0),Array.isArray(h)||(h=[h]),!this.get(c))return this;for(var g=0;g<h.length;g++)h[g].anims.delayedPlay(f*g,c);return this},toJSON:function(c){var h={anims:[],globalTimeScale:this.globalTimeScale};return c!==void 0&&c!==""?h.anims.push(this.anims.get(c).toJSON()):this.anims.each(function(f,g){h.anims.push(g.toJSON())}),h},destroy:function(){this.anims.clear(),this.textureManager=null,this.game=null}});d.exports=l},function(d,w,e){var n=e(0),t=e(195),r=e(6),o=e(218),i=new n({initialize:function(){this.entries=new t,this.events=new r},add:function(s,a){return this.entries.set(s,a),this.events.emit(o.ADD,this,s,a),this},has:function(s){return this.entries.has(s)},exists:function(s){return this.entries.has(s)},get:function(s){return this.entries.get(s)},remove:function(s){var a=this.get(s);return a&&(this.entries.delete(s),this.events.emit(o.REMOVE,this,s,a.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});d.exports=i},function(d,w,e){d.exports={ADD:e(505),REMOVE:e(506)}},function(d,w,e){var n=e(217),t=e(0),r=e(15),o=new t({initialize:function(i){this.game=i,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(i){return this.custom.hasOwnProperty(i)||(this.custom[i]=new n),this.custom[i]},destroy:function(){for(var i=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],s=0;s<i.length;s++)this[i[s]].destroy(),this[i[s]]=null;for(var a in this.custom)this.custom[a].destroy();this.custom=null,this.game=null}});d.exports=o},function(d,w,e){var n=e(90),t=e(25),r=e(144),o=e(12),i=e(0),s=e(13),a=e(244),u=e(98),l=e(7),c=e(4),h=new i({Extends:n,Mixins:[s.Flip,s.Tint],initialize:function(f,g,p,v){n.call(this,f,g,p,v),this.inputEnabled=!0,this.fadeEffect=new a.Fade(this),this.flashEffect=new a.Flash(this),this.shakeEffect=new a.Shake(this),this.panEffect=new a.Pan(this),this.rotateToEffect=new a.RotateTo(this),this.zoomEffect=new a.Zoom(this),this.lerp=new c(1,1),this.followOffset=new c,this.deadzone=null,this._follow=null,this.renderToTexture=!1,this.renderToGame=!0,this.canvas=null,this.context=null,this.glTexture=null,this.framebuffer=null,this.pipeline=null},setRenderToTexture:function(f,g){g===void 0&&(g=!0);var p=this.scene.sys.game.renderer;return p.gl?(this.glTexture=p.createTextureFromSource(null,this.width,this.height,0),this.framebuffer=p.createFramebuffer(this.width,this.height,this.glTexture,!1)):(this.canvas=t.create2D(this,this.width,this.height),this.context=this.canvas.getContext("2d")),this.renderToTexture=!0,this.renderToGame=g,f&&this.setPipeline(f),this},setPipeline:function(f){var g;return typeof f=="string"?(g=this.scene.sys.game.renderer).gl&&g.hasPipeline(f)&&(this.pipeline=g.getPipeline(f)):this.pipeline=f,this},clearRenderToTexture:function(){if(this.scene){var f=this.scene.sys.game.renderer;if(f)return f.gl?(this.framebuffer&&f.deleteFramebuffer(this.framebuffer),this.glTexture&&f.deleteTexture(this.glTexture),this.framebuffer=null,this.glTexture=null,this.pipeline=null):(t.remove(this),this.canvas=null,this.context=null),this.renderToTexture=!1,this}},setDeadzone:function(f,g){var p,v,T,E;return f===void 0?this.deadzone=null:(this.deadzone?(this.deadzone.width=f,this.deadzone.height=g):this.deadzone=new l(0,0,f,g),this._follow&&(p=this.width/2,v=this.height/2,T=this._follow.x-this.followOffset.x,E=this._follow.y-this.followOffset.y,this.midPoint.set(T,E),this.scrollX=T-p,this.scrollY=E-v),r(this.deadzone,this.midPoint.x,this.midPoint.y)),this},fadeIn:function(f,g,p,v,T,E){return this.fadeEffect.start(!1,f,g,p,v,!0,T,E)},fadeOut:function(f,g,p,v,T,E){return this.fadeEffect.start(!0,f,g,p,v,!0,T,E)},fadeFrom:function(f,g,p,v,T,E,M){return this.fadeEffect.start(!1,f,g,p,v,T,E,M)},fade:function(f,g,p,v,T,E,M){return this.fadeEffect.start(!0,f,g,p,v,T,E,M)},flash:function(f,g,p,v,T,E,M){return this.flashEffect.start(f,g,p,v,T,E,M)},shake:function(f,g,p,v,T){return this.shakeEffect.start(f,g,p,v,T)},pan:function(f,g,p,v,T,E,M){return this.panEffect.start(f,g,p,v,T,E,M)},rotateTo:function(f,g,p,v,T,E,M){return this.rotateToEffect.start(f,g,p,v,T,E,M)},zoomTo:function(f,g,p,v,T,E){return this.zoomEffect.start(f,g,p,v,T,E)},preRender:function(f){var g,p,v=this.width,T=this.height,E=.5*v,M=.5*T,A=this.zoom*f,C=this.matrix,P=v*this.originX,R=T*this.originY,D=this._follow,I=this.deadzone,W=this.scrollX,G=this.scrollY;I&&r(I,this.midPoint.x,this.midPoint.y),D&&!this.panEffect.isRunning&&(g=D.x-this.followOffset.x,p=D.y-this.followOffset.y,I?(g<I.x?W=u(W,W-(I.x-g),this.lerp.x):g>I.right&&(W=u(W,W+(g-I.right),this.lerp.x)),p<I.y?G=u(G,G-(I.y-p),this.lerp.y):p>I.bottom&&(G=u(G,G+(p-I.bottom),this.lerp.y))):(W=u(W,g-P,this.lerp.x),G=u(G,p-R,this.lerp.y))),this.useBounds&&(W=this.clampX(W),G=this.clampY(G)),this.roundPixels&&(P=Math.round(P),R=Math.round(R));var Y=(this.scrollX=W)+E,j=(this.scrollY=G)+M;this.midPoint.set(Y,j);var ee=v/A,te=T/A;this.worldView.setTo(Y-ee/2,j-te/2,ee,te),C.applyITRS(this.x+P,this.y+R,this.rotation,A,A),C.translate(-P,-R),this.shakeEffect.preRender()},setLerp:function(f,g){return f===void 0&&(f=1),g===void 0&&(g=f),this.lerp.set(f,g),this},setFollowOffset:function(f,g){return f===void 0&&(f=0),g===void 0&&(g=0),this.followOffset.set(f,g),this},startFollow:function(f,g,p,v,T,E){g===void 0&&(g=!1),p===void 0&&(p=1),v===void 0&&(v=p),T===void 0&&(T=0),E===void 0&&(E=T),this._follow=f,this.roundPixels=g,p=o(p,0,1),v=o(v,0,1),this.lerp.set(p,v),this.followOffset.set(T,E);var M=this.width/2,A=this.height/2,C=f.x-T,P=f.y-E;return this.midPoint.set(C,P),this.scrollX=C-M,this.scrollY=P-A,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(f,g){this.visible&&(this.rotateToEffect.update(f,g),this.panEffect.update(f,g),this.zoomEffect.update(f,g),this.shakeEffect.update(f,g),this.flashEffect.update(f,g),this.fadeEffect.update(f,g))},destroy:function(){this.clearRenderToTexture(),this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});d.exports=h},function(d,w,e){var n=e(12),t={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r){return r===void 0&&(r=1),this.alpha=r,this},alpha:{get:function(){return this._alpha},set:function(r){var o=n(r,0,1);(this._alpha=o)===0?this.renderFlags&=-3:this.renderFlags|=2}}};d.exports=t},function(d,w,e){var n=e(56),t={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(r){typeof r=="string"&&(r=n[r]),-1<=(r|=0)&&(this._blendMode=r)}},setBlendMode:function(r){return this.blendMode=r,this}};d.exports=t},function(d,w){var e={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.scene.sys.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this}};d.exports=e},function(d,w,e){var n=e(137),t=e(95);d.exports=function(r,o,i,s){s===void 0&&(s=[]),!o&&0<i&&(o=t(r)/i);for(var a=0;a<o;a++){var u=a/o;s.push(n(r,u))}return s}},function(d,w,e){var n=e(3);d.exports=function(t,r,o){return o===void 0&&(o=new n),o.x=t.x1+(t.x2-t.x1)*r,o.y=t.y1+(t.y2-t.y1)*r,o}},function(d,w){d.exports=function(e,n,t,r){var o=Math.cos(r),i=Math.sin(r),s=e.x-n,a=e.y-t;return e.x=s*o-a*i+n,e.y=s*i+a*o+t,e}},function(d,w,e){var n=e(228),t=e(229),r={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new n(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new t(this.scene,o)}};d.exports=r},function(d,w,e){var n=e(0),t=e(15),r=new n({initialize:function(o,i){var s,a,u,l,c,h,f=o.sys.game.renderer;this.renderer=f,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,f&&f.gl&&(s=f.width,a=f.height,u=(s&s-1)==0&&(a&a-1)==0,l=f.gl,c=u?l.REPEAT:l.CLAMP_TO_EDGE,h=l.LINEAR,this.mainTexture=f.createTexture2D(0,h,h,c,c,l.RGBA,null,s,a),this.maskTexture=f.createTexture2D(0,h,h,c,c,l.RGBA,null,s,a),this.mainFramebuffer=f.createFramebuffer(s,a,this.mainTexture,!0),this.maskFramebuffer=f.createFramebuffer(s,a,this.maskTexture,!0),o.sys.game.events.on(t.CONTEXT_RESTORED,function(g){var p=g.width,v=g.height,T=(p&p-1)==0&&(v&v-1)==0,E=g.gl,M=T?E.REPEAT:E.CLAMP_TO_EDGE,A=E.LINEAR;this.mainTexture=g.createTexture2D(0,A,A,M,M,E.RGBA,null,p,v),this.maskTexture=g.createTexture2D(0,A,A,M,M,E.RGBA,null,p,v),this.mainFramebuffer=g.createFramebuffer(p,v,this.mainTexture,!0),this.maskFramebuffer=g.createFramebuffer(p,v,this.maskTexture,!0)},this))},setBitmap:function(o){this.bitmapMask=o},preRenderWebGL:function(o,i,s){o.pipelines.BitmapMaskPipeline.beginMask(this,i,s)},postRenderWebGL:function(o,i){o.pipelines.BitmapMaskPipeline.endMask(this,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null;var o=this.renderer;o&&o.gl&&(o.deleteTexture(this.mainTexture),o.deleteTexture(this.maskTexture),o.deleteFramebuffer(this.mainFramebuffer),o.deleteFramebuffer(this.maskFramebuffer)),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.renderer=null}});d.exports=r},function(d,w,e){var n=new(e(0))({initialize:function(t,r){this.geometryMask=r,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return t===void 0&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,r,o){var i=t.gl;t.flush(),t.maskStack.length===0&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:o}),this.applyStencil(t,o,!0),t.maskCount++},applyStencil:function(t,r,o){var i=t.gl,s=this.geometryMask,a=t.maskCount;i.colorMask(!1,!1,!1,!1),o?(i.stencilFunc(i.EQUAL,a,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,a+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),s.renderWebGL(t,s,0,r),t.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),o?this.invertAlpha?i.stencilFunc(i.NOTEQUAL,a+1,255):i.stencilFunc(i.EQUAL,a+1,255):this.invertAlpha?i.stencilFunc(i.NOTEQUAL,a,255):i.stencilFunc(i.EQUAL,a,255)},postRenderWebGL:function(t){var r,o=t.gl;t.maskStack.pop(),t.maskCount--,t.maskStack.length===0?(t.flush(),t.currentMask.mask=null,o.disable(o.STENCIL_TEST)):(t.flush(),(r=t.maskStack[t.maskStack.length-1]).mask.applyStencil(t,r.camera,!1),t.currentCameraMask.mask!==r.mask?(t.currentMask.mask=r.mask,t.currentMask.camera=r.camera):t.currentMask.mask=null)},preRenderCanvas:function(t,r,o){var i=this.geometryMask;t.currentContext.save(),i.renderCanvas(t,i,0,o,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});d.exports=n},function(d,w){var e={defaultPipeline:null,pipeline:null,initPipeline:function(n){n===void 0&&(n="TextureTintPipeline");var t=this.scene.sys.game.renderer;return!!(t&&t.gl&&t.hasPipeline(n))&&(this.defaultPipeline=t.getPipeline(n),this.pipeline=this.defaultPipeline,!0)},setPipeline:function(n){var t=this.scene.sys.game.renderer;return t&&t.gl&&t.hasPipeline(n)&&(this.pipeline=t.getPipeline(n)),this},resetPipeline:function(){return this.pipeline=this.defaultPipeline,this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};d.exports=e},function(d,w){var e={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(n,t){return t===void 0&&(t=n),this.scrollFactorX=n,this.scrollFactorY=t,this}};d.exports=e},function(d,w){d.exports=function(e){var n={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(n.textureKey=e.texture.key,n.frameKey=e.frame.name),n}},function(d,w,e){var n=e(10),t=e(27),r=e(234),o=e(235),i={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(s){this._scaleX=s,(this._scaleY=s)===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(s){(this._scaleX=s)===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(s){(this._scaleY=s)===0?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return o(this._rotation*n.RAD_TO_DEG)},set:function(s){this.rotation=o(s)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(s){this._rotation=r(s)}},setPosition:function(s,a,u,l){return s===void 0&&(s=0),a===void 0&&(a=s),u===void 0&&(u=0),l===void 0&&(l=0),this.x=s,this.y=a,this.z=u,this.w=l,this},setRandomPosition:function(s,a,u,l){return s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=this.scene.sys.scale.width),l===void 0&&(l=this.scene.sys.scale.height),this.x=s+Math.random()*u,this.y=a+Math.random()*l,this},setRotation:function(s){return s===void 0&&(s=0),this.rotation=s,this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,this},setScale:function(s,a){return s===void 0&&(s=1),a===void 0&&(a=s),this.scaleX=s,this.scaleY=a,this},setX:function(s){return s===void 0&&(s=0),this.x=s,this},setY:function(s){return s===void 0&&(s=0),this.y=s,this},setZ:function(s){return s===void 0&&(s=0),this.z=s,this},setW:function(s){return s===void 0&&(s=0),this.w=s,this},getLocalTransformMatrix:function(s){return s===void 0&&(s=new t),s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(s,a){s===void 0&&(s=new t),a===void 0&&(a=new t);var u=this.parentContainer;if(!u)return this.getLocalTransformMatrix(s);for(s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);u;)a.applyITRS(u.x,u.y,u._rotation,u._scaleX,u._scaleY),a.multiply(s,s),u=u.parentContainer;return s},getParentRotation:function(){for(var s=0,a=this.parentContainer;a;)s+=a.rotation,a=a.parentContainer;return s}};d.exports=i},function(d,w,e){var n=e(57);d.exports=function(t){return n(t,-Math.PI,Math.PI)}},function(d,w,e){var n=e(57);d.exports=function(t){return n(t,-180,180)}},function(d,w){var e={_visible:!0,visible:{get:function(){return this._visible},set:function(n){n?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(n){return this.visible=n,this}};d.exports=e},function(d,w,e){var n=e(28);d.exports=function(t){var r=new n;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(u,l,c,h){return l+l+c+c+h+h});var o,i,s,a=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a&&(o=parseInt(a[1],16),i=parseInt(a[2],16),s=parseInt(a[3],16),r.setTo(o,i,s)),r}},function(d,w){d.exports=function(e,n,t,r){return r<<24|e<<16|n<<8|t}},function(d,w){d.exports=function(e,n,t,r){r===void 0&&(r={h:0,s:0,v:0}),e/=255,n/=255,t/=255;var o=Math.min(e,n,t),i=Math.max(e,n,t),s=i-o,a=0,u=i===0?0:s/i,l=i;return i!==o&&(i===e?a=(n-t)/s+(n<t?6:0):i===n?a=(t-e)/s+2:i===t&&(a=(e-n)/s+4),a/=6),r.hasOwnProperty("_h")?(r._h=a,r._s=u,r._v=l):(r.h=a,r.s=u,r.v=l),r}},function(d,w,e){var n=e(28),t=e(241);d.exports=function(r){var o=t(r);return new n(o.r,o.g,o.b,o.a)}},function(d,w){d.exports=function(e){return 16777215<e?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:255&e}:{a:255,r:e>>16&255,g:e>>8&255,b:255&e}}},function(d,w,e){var n=e(28);d.exports=function(t){return new n(t.r,t.g,t.b,t.a)}},function(d,w,e){var n=e(28);d.exports=function(t){var r,o,i,s,a=new n,u=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());return u&&(r=parseInt(u[1],10),o=parseInt(u[2],10),i=parseInt(u[3],10),s=u[4]!==void 0?parseFloat(u[4]):1,a.setTo(r,o,i,255*s)),a}},function(d,w,e){d.exports={Fade:e(537),Flash:e(538),Pan:e(539),Shake:e(572),RotateTo:e(573),Zoom:e(574)}},function(d,w,e){d.exports={In:e(540),Out:e(541),InOut:e(542)}},function(d,w,e){d.exports={In:e(543),Out:e(544),InOut:e(545)}},function(d,w,e){d.exports={In:e(546),Out:e(547),InOut:e(548)}},function(d,w,e){d.exports={In:e(549),Out:e(550),InOut:e(551)}},function(d,w,e){d.exports={In:e(552),Out:e(553),InOut:e(554)}},function(d,w,e){d.exports={In:e(555),Out:e(556),InOut:e(557)}},function(d,w,e){d.exports=e(558)},function(d,w,e){d.exports={In:e(559),Out:e(560),InOut:e(561)}},function(d,w,e){d.exports={In:e(562),Out:e(563),InOut:e(564)}},function(d,w,e){d.exports={In:e(565),Out:e(566),InOut:e(567)}},function(d,w,e){d.exports={In:e(568),Out:e(569),InOut:e(570)}},function(d,w,e){d.exports=e(571)},function(d,w,e){var n=e(0),t=e(32),r=e(258),o=e(2),i=e(5),s=e(9),a=e(198),u=e(1),l=e(200),c=e(141),h=new n({initialize:function(f){f===void 0&&(f={}),this.width=i(f,"width",1024),this.height=i(f,"height",768),this.zoom=i(f,"zoom",1),this.resolution=i(f,"resolution",1),this.parent=i(f,"parent",void 0),this.scaleMode=i(f,"scaleMode",0),this.expandParent=i(f,"expandParent",!0),this.autoRound=i(f,"autoRound",!1),this.autoCenter=i(f,"autoCenter",0),this.resizeInterval=i(f,"resizeInterval",500),this.fullscreenTarget=i(f,"fullscreenTarget",null),this.minWidth=i(f,"minWidth",0),this.maxWidth=i(f,"maxWidth",0),this.minHeight=i(f,"minHeight",0),this.maxHeight=i(f,"maxHeight",0);var g=i(f,"scale",null);g&&(this.width=i(g,"width",this.width),this.height=i(g,"height",this.height),this.zoom=i(g,"zoom",this.zoom),this.resolution=i(g,"resolution",this.resolution),this.parent=i(g,"parent",this.parent),this.scaleMode=i(g,"mode",this.scaleMode),this.expandParent=i(g,"expandParent",this.expandParent),this.autoRound=i(g,"autoRound",this.autoRound),this.autoCenter=i(g,"autoCenter",this.autoCenter),this.resizeInterval=i(g,"resizeInterval",this.resizeInterval),this.fullscreenTarget=i(g,"fullscreenTarget",this.fullscreenTarget),this.minWidth=i(g,"min.width",this.minWidth),this.maxWidth=i(g,"max.width",this.maxWidth),this.minHeight=i(g,"min.height",this.minHeight),this.maxHeight=i(g,"max.height",this.maxHeight)),this.renderType=i(f,"type",t.AUTO),this.canvas=i(f,"canvas",null),this.context=i(f,"context",null),this.canvasStyle=i(f,"canvasStyle",null),this.customEnvironment=i(f,"customEnvironment",!1),this.sceneConfig=i(f,"scene",null),this.seed=i(f,"seed",[(Date.now()*Math.random()).toString()]),a.RND=new a.RandomDataGenerator(this.seed),this.gameTitle=i(f,"title",""),this.gameURL=i(f,"url","https://phaser.io"),this.gameVersion=i(f,"version",""),this.autoFocus=i(f,"autoFocus",!0),this.domCreateContainer=i(f,"dom.createContainer",!1),this.domBehindCanvas=i(f,"dom.behindCanvas",!1),this.inputKeyboard=i(f,"input.keyboard",!0),this.inputKeyboardEventTarget=i(f,"input.keyboard.target",window),this.inputKeyboardCapture=i(f,"input.keyboard.capture",[]),this.inputMouse=i(f,"input.mouse",!0),this.inputMouseEventTarget=i(f,"input.mouse.target",null),this.inputMouseCapture=i(f,"input.mouse.capture",!0),this.inputTouch=i(f,"input.touch",r.input.touch),this.inputTouchEventTarget=i(f,"input.touch.target",null),this.inputTouchCapture=i(f,"input.touch.capture",!0),this.inputActivePointers=i(f,"input.activePointers",1),this.inputSmoothFactor=i(f,"input.smoothFactor",0),this.inputWindowEvents=i(f,"input.windowEvents",!0),this.inputGamepad=i(f,"input.gamepad",!1),this.inputGamepadEventTarget=i(f,"input.gamepad.target",window),this.disableContextMenu=i(f,"disableContextMenu",!1),this.audio=i(f,"audio"),this.hideBanner=i(f,"banner",null)===!1,this.hidePhaser=i(f,"banner.hidePhaser",!1),this.bannerTextColor=i(f,"banner.text","#ffffff"),this.bannerBackgroundColor=i(f,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=i(f,"fps",null);var p=i(f,"render",f);this.antialias=i(p,"antialias",!0),this.antialiasGL=i(p,"antialiasGL",!0),this.mipmapFilter=i(p,"mipmapFilter","LINEAR"),this.desynchronized=i(p,"desynchronized",!1),this.roundPixels=i(p,"roundPixels",!1),this.pixelArt=i(p,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.roundPixels=!0),this.transparent=i(p,"transparent",!1),this.clearBeforeRender=i(p,"clearBeforeRender",!0),this.premultipliedAlpha=i(p,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=i(p,"failIfMajorPerformanceCaveat",!1),this.powerPreference=i(p,"powerPreference","default"),this.batchSize=i(p,"batchSize",2e3),this.maxLights=i(p,"maxLights",10);var v=i(f,"backgroundColor",0);this.backgroundColor=c(v),v===0&&this.transparent&&(this.backgroundColor.alpha=0),this.preBoot=i(f,"callbacks.preBoot",u),this.postBoot=i(f,"callbacks.postBoot",u),this.physics=i(f,"physics",{}),this.defaultPhysicsSystem=i(this.physics,"default",!1),this.loaderBaseURL=i(f,"loader.baseURL",""),this.loaderPath=i(f,"loader.path",""),this.loaderMaxParallelDownloads=i(f,"loader.maxParallelDownloads",32),this.loaderCrossOrigin=i(f,"loader.crossOrigin",void 0),this.loaderResponseType=i(f,"loader.responseType",""),this.loaderAsync=i(f,"loader.async",!0),this.loaderUser=i(f,"loader.user",""),this.loaderPassword=i(f,"loader.password",""),this.loaderTimeout=i(f,"loader.timeout",0),this.loaderWithCredentials=i(f,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var T=i(f,"plugins",null),E=l.DefaultScene;T&&(Array.isArray(T)?this.defaultPlugins=T:s(T)&&(this.installGlobalPlugins=o(T,"global",[]),this.installScenePlugins=o(T,"scene",[]),Array.isArray(T.default)?E=T.default:Array.isArray(T.defaultMerge)&&(E=E.concat(T.defaultMerge)))),this.defaultPlugins=E;var M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=i(f,"images.default",M+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=i(f,"images.missing",M+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),window&&(window.FORCE_WEBGL?this.renderType=t.WEBGL:window.FORCE_CANVAS&&(this.renderType=t.CANVAS))}});d.exports=h},function(d,w,e){d.exports={os:e(99),browser:e(100),features:e(145),input:e(603),audio:e(604),video:e(605),fullscreen:e(606),canvasFeatures:e(259)}},function(d,w,e){var n,t,r,o=e(25),i={supportInverseAlpha:!1,supportNewBlendModes:!1};d.exports=(document!==void 0&&(i.supportNewBlendModes=(n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(r=new Image).onload=function(){var s=new Image;s.onload=function(){var a=o.create(s,6,1).getContext("2d");if(a.globalCompositeOperation="multiply",a.drawImage(r,0,0),a.drawImage(s,2,0),!a.getImageData(2,0,1,1))return!1;var u=a.getImageData(2,0,1,1).data;o.remove(s),i.supportNewBlendModes=u[0]===255&&u[1]===0&&u[2]===0},s.src=n+"/wCKxvRF"+t},r.src=n+"AP804Oa6"+t,!1),i.supportInverseAlpha=function(){var s=o.create(this,2,1).getContext("2d");s.fillStyle="rgba(10, 20, 30, 0.5)",s.fillRect(0,0,1,1);var a=s.getImageData(0,0,1,1);if(a===null)return!1;s.putImageData(a,1,0);var u=s.getImageData(1,0,1,1);return u.data[0]===a.data[0]&&u.data[1]===a.data[1]&&u.data[2]===a.data[2]&&u.data[3]===a.data[3]}()),i)},function(d,w){d.exports=function(e,n,t,r){return Math.atan2(r-n,t-e)}},function(d,w){d.exports=function(e,n){return Math.atan2(n.y-e.y,n.x-e.x)}},function(d,w){d.exports=function(e){return 0<=(e%=2*Math.PI)?e:e+2*Math.PI}},function(d,w){d.exports=function(e,n){var t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)}},function(d,w){d.exports=function(e,n,t,r){var o=e-t,i=n-r;return o*o+i*i}},function(d,w){d.exports=function(e,n,t){return t===void 0&&(t=1e-4),n-t<e}},function(d,w){d.exports=function(e,n,t){return t===void 0&&(t=1e-4),e<n+t}},function(d,w,e){var n=e(268);d.exports=function(t,r){return n(t)/n(r)/n(t-r)}},function(d,w){d.exports=function(e){if(e===0)return 1;for(var n=e;--e;)n*=e;return n}},function(d,w,e){var n=e(147);d.exports=function(t,r,o){return r+(o-r)*n(t,0,1)}},function(d,w){d.exports=function(e){var n=Math.log(e)/.6931471805599453;return 1<<Math.ceil(n)}},function(d,w){d.exports=function(e,n,t,r){return t===void 0&&(t=0),n===0?e:(e-=t,e=n*Math.ceil(e/n),r?(t+e)/n:t+e)}},function(d,w){d.exports=function(e,n){var t=e.x,r=e.y;return e.x=t*Math.cos(n)-r*Math.sin(n),e.y=t*Math.sin(n)+r*Math.cos(n),e}},function(d,w){d.exports=function(e){return 0<e?Math.ceil(e):Math.floor(e)}},function(d,w,e){var n=e(4);d.exports=function(t,r,o,i,s,a,u,l){l===void 0&&(l=new n);var c=Math.sin(s),h=Math.cos(s),f=h*a,g=c*a,p=-c*u,v=h*u,T=1/(f*v+p*-g);return l.x=v*T*t+-p*T*r+(i*p-o*v)*T,l.y=f*T*r+-g*T*t+(-i*f+o*g)*T,l}},function(d,w,e){var n=new(e(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new n(this)},set:function(t){return this.copy(t)},copy:function(t){var r=this.val,o=t.val;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],this},fromMat4:function(t){var r=t.val,o=this.val;return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[4],o[4]=r[5],o[5]=r[6],o[6]=r[8],o[7]=r[9],o[8]=r[10],this},fromArray:function(t){var r=this.val;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,r=t[1],o=t[2],i=t[5];return t[1]=t[3],t[2]=t[6],t[3]=r,t[5]=t[7],t[6]=o,t[7]=i,this},invert:function(){var t=this.val,r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=h*a-u*c,g=-h*s+u*l,p=c*s-a*l,v=r*f+o*g+i*p;return v?(v=1/v,t[0]=f*v,t[1]=(-h*o+i*c)*v,t[2]=(u*o-i*a)*v,t[3]=g*v,t[4]=(h*r-i*l)*v,t[5]=(-u*r+i*s)*v,t[6]=p*v,t[7]=(-c*r+o*l)*v,t[8]=(a*r-o*s)*v,this):null},adjoint:function(){var t=this.val,r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],l=t[6],c=t[7],h=t[8];return t[0]=a*h-u*c,t[1]=i*c-o*h,t[2]=o*u-i*a,t[3]=u*l-s*h,t[4]=r*h-i*l,t[5]=i*s-r*u,t[6]=s*c-a*l,t[7]=o*l-r*c,t[8]=r*a-o*s,this},determinant:function(){var t=this.val,r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],l=t[6],c=t[7],h=t[8];return r*(h*a-u*c)+o*(-h*s+u*l)+i*(c*s-a*l)},multiply:function(t){var r=this.val,o=r[0],i=r[1],s=r[2],a=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],g=t.val,p=g[0],v=g[1],T=g[2],E=g[3],M=g[4],A=g[5],C=g[6],P=g[7],R=g[8];return r[0]=p*o+v*a+T*c,r[1]=p*i+v*u+T*h,r[2]=p*s+v*l+T*f,r[3]=E*o+M*a+A*c,r[4]=E*i+M*u+A*h,r[5]=E*s+M*l+A*f,r[6]=C*o+P*a+R*c,r[7]=C*i+P*u+R*h,r[8]=C*s+P*l+R*f,this},translate:function(t){var r=this.val,o=t.x,i=t.y;return r[6]=o*r[0]+i*r[3]+r[6],r[7]=o*r[1]+i*r[4]+r[7],r[8]=o*r[2]+i*r[5]+r[8],this},rotate:function(t){var r=this.val,o=r[0],i=r[1],s=r[2],a=r[3],u=r[4],l=r[5],c=Math.sin(t),h=Math.cos(t);return r[0]=h*o+c*a,r[1]=h*i+c*u,r[2]=h*s+c*l,r[3]=h*a-c*o,r[4]=h*u-c*i,r[5]=h*l-c*s,this},scale:function(t){var r=this.val,o=t.x,i=t.y;return r[0]=o*r[0],r[1]=o*r[1],r[2]=o*r[2],r[3]=i*r[3],r[4]=i*r[4],r[5]=i*r[5],this},fromQuat:function(t){var r=t.x,o=t.y,i=t.z,s=t.w,a=r+r,u=o+o,l=i+i,c=r*a,h=r*u,f=r*l,g=o*u,p=o*l,v=i*l,T=s*a,E=s*u,M=s*l,A=this.val;return A[0]=1-(g+v),A[3]=h+M,A[6]=f-E,A[1]=h-M,A[4]=1-(c+v),A[7]=p+T,A[2]=f+E,A[5]=p-T,A[8]=1-(c+g),this},normalFromMat4:function(t){var r=t.val,o=this.val,i=r[0],s=r[1],a=r[2],u=r[3],l=r[4],c=r[5],h=r[6],f=r[7],g=r[8],p=r[9],v=r[10],T=r[11],E=r[12],M=r[13],A=r[14],C=r[15],P=i*c-s*l,R=i*h-a*l,D=i*f-u*l,I=s*h-a*c,W=s*f-u*c,G=a*f-u*h,Y=g*M-p*E,j=g*A-v*E,ee=g*C-T*E,te=p*A-v*M,F=p*C-T*M,U=v*C-T*A,K=P*U-R*F+D*te+I*ee-W*j+G*Y;return K?(K=1/K,o[0]=(c*U-h*F+f*te)*K,o[1]=(h*ee-l*U-f*j)*K,o[2]=(l*F-c*ee+f*Y)*K,o[3]=(a*F-s*U-u*te)*K,o[4]=(i*U-a*ee+u*j)*K,o[5]=(s*ee-i*F-u*Y)*K,o[6]=(M*G-A*W+C*I)*K,o[7]=(A*D-E*G-C*R)*K,o[8]=(E*W-M*D+C*P)*K,this):null}});d.exports=n},function(d,w,e){var n=e(0),t=new n({initialize:function(i){this.val=new Float32Array(16),i?this.copy(i):this.identity()},clone:function(){return new t(this)},set:function(i){return this.copy(i)},copy:function(i){var s=this.val,a=i.val;return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[6]=a[6],s[7]=a[7],s[8]=a[8],s[9]=a[9],s[10]=a[10],s[11]=a[11],s[12]=a[12],s[13]=a[13],s[14]=a[14],s[15]=a[15],this},fromArray:function(i){var s=this.val;return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],this},zero:function(){var i=this.val;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=0,this},xyz:function(i,s,a){this.identity();var u=this.val;return u[12]=i,u[13]=s,u[14]=a,this},scaling:function(i,s,a){this.zero();var u=this.val;return u[0]=i,u[5]=s,u[10]=a,u[15]=1,this},identity:function(){var i=this.val;return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},transpose:function(){var i=this.val,s=i[1],a=i[2],u=i[3],l=i[6],c=i[7],h=i[11];return i[1]=i[4],i[2]=i[8],i[3]=i[12],i[4]=s,i[6]=i[9],i[7]=i[13],i[8]=a,i[9]=l,i[11]=i[14],i[12]=u,i[13]=c,i[14]=h,this},invert:function(){var i=this.val,s=i[0],a=i[1],u=i[2],l=i[3],c=i[4],h=i[5],f=i[6],g=i[7],p=i[8],v=i[9],T=i[10],E=i[11],M=i[12],A=i[13],C=i[14],P=i[15],R=s*h-a*c,D=s*f-u*c,I=s*g-l*c,W=a*f-u*h,G=a*g-l*h,Y=u*g-l*f,j=p*A-v*M,ee=p*C-T*M,te=p*P-E*M,F=v*C-T*A,U=v*P-E*A,K=T*P-E*C,oe=R*K-D*U+I*F+W*te-G*ee+Y*j;return oe?(oe=1/oe,i[0]=(h*K-f*U+g*F)*oe,i[1]=(u*U-a*K-l*F)*oe,i[2]=(A*Y-C*G+P*W)*oe,i[3]=(T*G-v*Y-E*W)*oe,i[4]=(f*te-c*K-g*ee)*oe,i[5]=(s*K-u*te+l*ee)*oe,i[6]=(C*I-M*Y-P*D)*oe,i[7]=(p*Y-T*I+E*D)*oe,i[8]=(c*U-h*te+g*j)*oe,i[9]=(a*te-s*U-l*j)*oe,i[10]=(M*G-A*I+P*R)*oe,i[11]=(v*I-p*G-E*R)*oe,i[12]=(h*ee-c*F-f*j)*oe,i[13]=(s*F-a*ee+u*j)*oe,i[14]=(A*D-M*W-C*R)*oe,i[15]=(p*W-v*D+T*R)*oe,this):null},adjoint:function(){var i=this.val,s=i[0],a=i[1],u=i[2],l=i[3],c=i[4],h=i[5],f=i[6],g=i[7],p=i[8],v=i[9],T=i[10],E=i[11],M=i[12],A=i[13],C=i[14],P=i[15];return i[0]=h*(T*P-E*C)-v*(f*P-g*C)+A*(f*E-g*T),i[1]=-(a*(T*P-E*C)-v*(u*P-l*C)+A*(u*E-l*T)),i[2]=a*(f*P-g*C)-h*(u*P-l*C)+A*(u*g-l*f),i[3]=-(a*(f*E-g*T)-h*(u*E-l*T)+v*(u*g-l*f)),i[4]=-(c*(T*P-E*C)-p*(f*P-g*C)+M*(f*E-g*T)),i[5]=s*(T*P-E*C)-p*(u*P-l*C)+M*(u*E-l*T),i[6]=-(s*(f*P-g*C)-c*(u*P-l*C)+M*(u*g-l*f)),i[7]=s*(f*E-g*T)-c*(u*E-l*T)+p*(u*g-l*f),i[8]=c*(v*P-E*A)-p*(h*P-g*A)+M*(h*E-g*v),i[9]=-(s*(v*P-E*A)-p*(a*P-l*A)+M*(a*E-l*v)),i[10]=s*(h*P-g*A)-c*(a*P-l*A)+M*(a*g-l*h),i[11]=-(s*(h*E-g*v)-c*(a*E-l*v)+p*(a*g-l*h)),i[12]=-(c*(v*C-T*A)-p*(h*C-f*A)+M*(h*T-f*v)),i[13]=s*(v*C-T*A)-p*(a*C-u*A)+M*(a*T-u*v),i[14]=-(s*(h*C-f*A)-c*(a*C-u*A)+M*(a*f-u*h)),i[15]=s*(h*T-f*v)-c*(a*T-u*v)+p*(a*f-u*h),this},determinant:function(){var i=this.val,s=i[0],a=i[1],u=i[2],l=i[3],c=i[4],h=i[5],f=i[6],g=i[7],p=i[8],v=i[9],T=i[10],E=i[11],M=i[12],A=i[13],C=i[14],P=i[15];return(s*h-a*c)*(T*P-E*C)-(s*f-u*c)*(v*P-E*A)+(s*g-l*c)*(v*C-T*A)+(a*f-u*h)*(p*P-E*M)-(a*g-l*h)*(p*C-T*M)+(u*g-l*f)*(p*A-v*M)},multiply:function(i){var s=this.val,a=s[0],u=s[1],l=s[2],c=s[3],h=s[4],f=s[5],g=s[6],p=s[7],v=s[8],T=s[9],E=s[10],M=s[11],A=s[12],C=s[13],P=s[14],R=s[15],D=i.val,I=D[0],W=D[1],G=D[2],Y=D[3];return s[0]=I*a+W*h+G*v+Y*A,s[1]=I*u+W*f+G*T+Y*C,s[2]=I*l+W*g+G*E+Y*P,s[3]=I*c+W*p+G*M+Y*R,I=D[4],W=D[5],G=D[6],Y=D[7],s[4]=I*a+W*h+G*v+Y*A,s[5]=I*u+W*f+G*T+Y*C,s[6]=I*l+W*g+G*E+Y*P,s[7]=I*c+W*p+G*M+Y*R,I=D[8],W=D[9],G=D[10],Y=D[11],s[8]=I*a+W*h+G*v+Y*A,s[9]=I*u+W*f+G*T+Y*C,s[10]=I*l+W*g+G*E+Y*P,s[11]=I*c+W*p+G*M+Y*R,I=D[12],W=D[13],G=D[14],Y=D[15],s[12]=I*a+W*h+G*v+Y*A,s[13]=I*u+W*f+G*T+Y*C,s[14]=I*l+W*g+G*E+Y*P,s[15]=I*c+W*p+G*M+Y*R,this},multiplyLocal:function(i){var s=[],a=this.val,u=i.val;return s[0]=a[0]*u[0]+a[1]*u[4]+a[2]*u[8]+a[3]*u[12],s[1]=a[0]*u[1]+a[1]*u[5]+a[2]*u[9]+a[3]*u[13],s[2]=a[0]*u[2]+a[1]*u[6]+a[2]*u[10]+a[3]*u[14],s[3]=a[0]*u[3]+a[1]*u[7]+a[2]*u[11]+a[3]*u[15],s[4]=a[4]*u[0]+a[5]*u[4]+a[6]*u[8]+a[7]*u[12],s[5]=a[4]*u[1]+a[5]*u[5]+a[6]*u[9]+a[7]*u[13],s[6]=a[4]*u[2]+a[5]*u[6]+a[6]*u[10]+a[7]*u[14],s[7]=a[4]*u[3]+a[5]*u[7]+a[6]*u[11]+a[7]*u[15],s[8]=a[8]*u[0]+a[9]*u[4]+a[10]*u[8]+a[11]*u[12],s[9]=a[8]*u[1]+a[9]*u[5]+a[10]*u[9]+a[11]*u[13],s[10]=a[8]*u[2]+a[9]*u[6]+a[10]*u[10]+a[11]*u[14],s[11]=a[8]*u[3]+a[9]*u[7]+a[10]*u[11]+a[11]*u[15],s[12]=a[12]*u[0]+a[13]*u[4]+a[14]*u[8]+a[15]*u[12],s[13]=a[12]*u[1]+a[13]*u[5]+a[14]*u[9]+a[15]*u[13],s[14]=a[12]*u[2]+a[13]*u[6]+a[14]*u[10]+a[15]*u[14],s[15]=a[12]*u[3]+a[13]*u[7]+a[14]*u[11]+a[15]*u[15],this.fromArray(s)},translate:function(i){var s=i.x,a=i.y,u=i.z,l=this.val;return l[12]=l[0]*s+l[4]*a+l[8]*u+l[12],l[13]=l[1]*s+l[5]*a+l[9]*u+l[13],l[14]=l[2]*s+l[6]*a+l[10]*u+l[14],l[15]=l[3]*s+l[7]*a+l[11]*u+l[15],this},translateXYZ:function(i,s,a){var u=this.val;return u[12]=u[0]*i+u[4]*s+u[8]*a+u[12],u[13]=u[1]*i+u[5]*s+u[9]*a+u[13],u[14]=u[2]*i+u[6]*s+u[10]*a+u[14],u[15]=u[3]*i+u[7]*s+u[11]*a+u[15],this},scale:function(i){var s=i.x,a=i.y,u=i.z,l=this.val;return l[0]=l[0]*s,l[1]=l[1]*s,l[2]=l[2]*s,l[3]=l[3]*s,l[4]=l[4]*a,l[5]=l[5]*a,l[6]=l[6]*a,l[7]=l[7]*a,l[8]=l[8]*u,l[9]=l[9]*u,l[10]=l[10]*u,l[11]=l[11]*u,this},scaleXYZ:function(i,s,a){var u=this.val;return u[0]=u[0]*i,u[1]=u[1]*i,u[2]=u[2]*i,u[3]=u[3]*i,u[4]=u[4]*s,u[5]=u[5]*s,u[6]=u[6]*s,u[7]=u[7]*s,u[8]=u[8]*a,u[9]=u[9]*a,u[10]=u[10]*a,u[11]=u[11]*a,this},makeRotationAxis:function(i,s){var a=Math.cos(s),u=Math.sin(s),l=1-a,c=i.x,h=i.y,f=i.z,g=l*c,p=l*h;return this.fromArray([g*c+a,g*h-u*f,g*f+u*h,0,g*h+u*f,p*h+a,p*f-u*c,0,g*f-u*h,p*f+u*c,l*f*f+a,0,0,0,0,1]),this},rotate:function(i,s){var a=this.val,u=s.x,l=s.y,c=s.z,h=Math.sqrt(u*u+l*l+c*c);if(Math.abs(h)<1e-6)return null;u*=h=1/h,l*=h,c*=h;var f=Math.sin(i),g=Math.cos(i),p=1-g,v=a[0],T=a[1],E=a[2],M=a[3],A=a[4],C=a[5],P=a[6],R=a[7],D=a[8],I=a[9],W=a[10],G=a[11],Y=u*u*p+g,j=l*u*p+c*f,ee=c*u*p-l*f,te=u*l*p-c*f,F=l*l*p+g,U=c*l*p+u*f,K=u*c*p+l*f,oe=l*c*p-u*f,ae=c*c*p+g;return a[0]=v*Y+A*j+D*ee,a[1]=T*Y+C*j+I*ee,a[2]=E*Y+P*j+W*ee,a[3]=M*Y+R*j+G*ee,a[4]=v*te+A*F+D*U,a[5]=T*te+C*F+I*U,a[6]=E*te+P*F+W*U,a[7]=M*te+R*F+G*U,a[8]=v*K+A*oe+D*ae,a[9]=T*K+C*oe+I*ae,a[10]=E*K+P*oe+W*ae,a[11]=M*K+R*oe+G*ae,this},rotateX:function(i){var s=this.val,a=Math.sin(i),u=Math.cos(i),l=s[4],c=s[5],h=s[6],f=s[7],g=s[8],p=s[9],v=s[10],T=s[11];return s[4]=l*u+g*a,s[5]=c*u+p*a,s[6]=h*u+v*a,s[7]=f*u+T*a,s[8]=g*u-l*a,s[9]=p*u-c*a,s[10]=v*u-h*a,s[11]=T*u-f*a,this},rotateY:function(i){var s=this.val,a=Math.sin(i),u=Math.cos(i),l=s[0],c=s[1],h=s[2],f=s[3],g=s[8],p=s[9],v=s[10],T=s[11];return s[0]=l*u-g*a,s[1]=c*u-p*a,s[2]=h*u-v*a,s[3]=f*u-T*a,s[8]=l*a+g*u,s[9]=c*a+p*u,s[10]=h*a+v*u,s[11]=f*a+T*u,this},rotateZ:function(i){var s=this.val,a=Math.sin(i),u=Math.cos(i),l=s[0],c=s[1],h=s[2],f=s[3],g=s[4],p=s[5],v=s[6],T=s[7];return s[0]=l*u+g*a,s[1]=c*u+p*a,s[2]=h*u+v*a,s[3]=f*u+T*a,s[4]=g*u-l*a,s[5]=p*u-c*a,s[6]=v*u-h*a,s[7]=T*u-f*a,this},fromRotationTranslation:function(i,s){var a=this.val,u=i.x,l=i.y,c=i.z,h=i.w,f=u+u,g=l+l,p=c+c,v=u*f,T=u*g,E=u*p,M=l*g,A=l*p,C=c*p,P=h*f,R=h*g,D=h*p;return a[0]=1-(M+C),a[1]=T+D,a[2]=E-R,a[3]=0,a[4]=T-D,a[5]=1-(v+C),a[6]=A+P,a[7]=0,a[8]=E+R,a[9]=A-P,a[10]=1-(v+M),a[11]=0,a[12]=s.x,a[13]=s.y,a[14]=s.z,a[15]=1,this},fromQuat:function(i){var s=this.val,a=i.x,u=i.y,l=i.z,c=i.w,h=a+a,f=u+u,g=l+l,p=a*h,v=a*f,T=a*g,E=u*f,M=u*g,A=l*g,C=c*h,P=c*f,R=c*g;return s[0]=1-(E+A),s[1]=v+R,s[2]=T-P,s[3]=0,s[4]=v-R,s[5]=1-(p+A),s[6]=M+C,s[7]=0,s[8]=T+P,s[9]=M-C,s[10]=1-(p+E),s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this},frustum:function(i,s,a,u,l,c){var h=this.val,f=1/(s-i),g=1/(u-a),p=1/(l-c);return h[0]=2*l*f,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2*l*g,h[6]=0,h[7]=0,h[8]=(s+i)*f,h[9]=(u+a)*g,h[10]=(c+l)*p,h[11]=-1,h[12]=0,h[13]=0,h[14]=c*l*2*p,h[15]=0,this},perspective:function(i,s,a,u){var l=this.val,c=1/Math.tan(i/2),h=1/(a-u);return l[0]=c/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=c,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(u+a)*h,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*u*a*h,l[15]=0,this},perspectiveLH:function(i,s,a,u){var l=this.val;return l[0]=2*a/i,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2*a/s,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=-u/(a-u),l[11]=1,l[12]=0,l[13]=0,l[14]=a*u/(a-u),l[15]=0,this},ortho:function(i,s,a,u,l,c){var h=this.val,f=(f=i-s)===0?f:1/f,g=(g=a-u)===0?g:1/g,p=(p=l-c)===0?p:1/p;return h[0]=-2*f,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*g,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*p,h[11]=0,h[12]=(i+s)*f,h[13]=(u+a)*g,h[14]=(c+l)*p,h[15]=1,this},lookAt:function(i,s,a){var u=this.val,l=i.x,c=i.y,h=i.z,f=a.x,g=a.y,p=a.z,v=s.x,T=s.y,E=s.z;if(Math.abs(l-v)<1e-6&&Math.abs(c-T)<1e-6&&Math.abs(h-E)<1e-6)return this.identity();var M=l-v,A=c-T,C=h-E,P=1/Math.sqrt(M*M+A*A+C*C),R=g*(C*=P)-p*(A*=P),D=p*(M*=P)-f*C,I=f*A-g*M;(P=Math.sqrt(R*R+D*D+I*I))?(R*=P=1/P,D*=P,I*=P):I=D=R=0;var W=A*I-C*D,G=C*R-M*I,Y=M*D-A*R;return(P=Math.sqrt(W*W+G*G+Y*Y))?(W*=P=1/P,G*=P,Y*=P):Y=G=W=0,u[0]=R,u[1]=W,u[2]=M,u[3]=0,u[4]=D,u[5]=G,u[6]=A,u[7]=0,u[8]=I,u[9]=Y,u[10]=C,u[11]=0,u[12]=-(R*l+D*c+I*h),u[13]=-(W*l+G*c+Y*h),u[14]=-(M*l+A*c+C*h),u[15]=1,this},yawPitchRoll:function(i,s,a){this.zero(),r.zero(),o.zero();var u=this.val,l=r.val,c=o.val,h=Math.sin(a),f=Math.cos(a);return u[10]=1,u[15]=1,u[0]=f,u[1]=h,u[4]=-h,u[5]=f,h=Math.sin(s),f=Math.cos(s),l[0]=1,l[15]=1,l[5]=f,l[10]=f,l[9]=-h,l[6]=h,h=Math.sin(i),f=Math.cos(i),c[5]=1,c[15]=1,c[0]=f,c[2]=-h,c[8]=h,c[10]=f,this.multiplyLocal(r),this.multiplyLocal(o),this},setWorldMatrix:function(i,s,a,u,l){return this.yawPitchRoll(i.y,i.x,i.z),r.scaling(a.x,a.y,a.z),o.xyz(s.x,s.y,s.z),this.multiplyLocal(r),this.multiplyLocal(o),u!==void 0&&this.multiplyLocal(u),l!==void 0&&this.multiplyLocal(l),this}}),r=new t,o=new t;d.exports=t},function(d,w,e){var n=e(0),t=e(151),r=e(275),o=new Int8Array([1,2,0]),i=new Float32Array([0,0,0]),s=new t(1,0,0),a=new t(0,1,0),u=new t,l=new r,c=new n({initialize:function(h,f,g,p){typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=f||0,this.z=g||0,this.w=p||0)},copy:function(h){return this.x=h.x,this.y=h.y,this.z=h.z,this.w=h.w,this},set:function(h,f,g,p){return typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=f||0,this.z=g||0,this.w=p||0),this},add:function(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z,this.w+=h.w,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z,this.w-=h.w,this},scale:function(h){return this.x*=h,this.y*=h,this.z*=h,this.w*=h,this},length:function(){var h=this.x,f=this.y,g=this.z,p=this.w;return Math.sqrt(h*h+f*f+g*g+p*p)},lengthSq:function(){var h=this.x,f=this.y,g=this.z,p=this.w;return h*h+f*f+g*g+p*p},normalize:function(){var h=this.x,f=this.y,g=this.z,p=this.w,v=h*h+f*f+g*g+p*p;return 0<v&&(v=1/Math.sqrt(v),this.x=h*v,this.y=f*v,this.z=g*v,this.w=p*v),this},dot:function(h){return this.x*h.x+this.y*h.y+this.z*h.z+this.w*h.w},lerp:function(h,f){f===void 0&&(f=0);var g=this.x,p=this.y,v=this.z,T=this.w;return this.x=g+f*(h.x-g),this.y=p+f*(h.y-p),this.z=v+f*(h.z-v),this.w=T+f*(h.w-T),this},rotationTo:function(h,f){var g=h.x*f.x+h.y*f.y+h.z*f.z;return g<-.999999?(u.copy(s).cross(h).length()<1e-6&&u.copy(a).cross(h),u.normalize(),this.setAxisAngle(u,Math.PI)):.999999<g?(this.x=0,this.y=0,this.z=0,this.w=1,this):(u.copy(h).cross(f),this.x=u.x,this.y=u.y,this.z=u.z,this.w=1+g,this.normalize())},setAxes:function(h,f,g){var p=l.val;return p[0]=f.x,p[3]=f.y,p[6]=f.z,p[1]=g.x,p[4]=g.y,p[7]=g.z,p[2]=-h.x,p[5]=-h.y,p[8]=-h.z,this.fromMat3(l).normalize()},identity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},setAxisAngle:function(h,f){f*=.5;var g=Math.sin(f);return this.x=g*h.x,this.y=g*h.y,this.z=g*h.z,this.w=Math.cos(f),this},multiply:function(h){var f=this.x,g=this.y,p=this.z,v=this.w,T=h.x,E=h.y,M=h.z,A=h.w;return this.x=f*A+v*T+g*M-p*E,this.y=g*A+v*E+p*T-f*M,this.z=p*A+v*M+f*E-g*T,this.w=v*A-f*T-g*E-p*M,this},slerp:function(h,f){var g=this.x,p=this.y,v=this.z,T=this.w,E=h.x,M=h.y,A=h.z,C=h.w,P=g*E+p*M+v*A+T*C;P<0&&(P=-P,E=-E,M=-M,A=-A,C=-C);var R,D,I=1-f,W=f;return 1e-6<1-P&&(R=Math.acos(P),D=Math.sin(R),I=Math.sin((1-f)*R)/D,W=Math.sin(f*R)/D),this.x=I*g+W*E,this.y=I*p+W*M,this.z=I*v+W*A,this.w=I*T+W*C,this},invert:function(){var h=this.x,f=this.y,g=this.z,p=this.w,v=h*h+f*f+g*g+p*p,T=v?1/v:0;return this.x=-h*T,this.y=-f*T,this.z=-g*T,this.w=p*T,this},conjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},rotateX:function(h){h*=.5;var f=this.x,g=this.y,p=this.z,v=this.w,T=Math.sin(h),E=Math.cos(h);return this.x=f*E+v*T,this.y=g*E+p*T,this.z=p*E-g*T,this.w=v*E-f*T,this},rotateY:function(h){h*=.5;var f=this.x,g=this.y,p=this.z,v=this.w,T=Math.sin(h),E=Math.cos(h);return this.x=f*E-p*T,this.y=g*E+v*T,this.z=p*E+f*T,this.w=v*E-g*T,this},rotateZ:function(h){h*=.5;var f=this.x,g=this.y,p=this.z,v=this.w,T=Math.sin(h),E=Math.cos(h);return this.x=f*E+g*T,this.y=g*E-f*T,this.z=p*E+v*T,this.w=v*E-p*T,this},calculateW:function(){var h=this.x,f=this.y,g=this.z;return this.w=-Math.sqrt(1-h*h-f*f-g*g),this},fromMat3:function(h){var f,g,p,v,T=h.val,E=T[0]+T[4]+T[8];return 0<E?(v=Math.sqrt(E+1),this.w=.5*v,v=.5/v,this.x=(T[7]-T[5])*v,this.y=(T[2]-T[6])*v,this.z=(T[3]-T[1])*v):(f=0,T[4]>T[0]&&(f=1),T[8]>T[3*f+f]&&(f=2),g=o[f],p=o[g],v=Math.sqrt(T[3*f+f]-T[3*g+g]-T[3*p+p]+1),i[f]=.5*v,v=.5/v,i[g]=(T[3*g+f]+T[3*f+g])*v,i[p]=(T[3*p+f]+T[3*f+p])*v,this.x=i[0],this.y=i[1],this.z=i[2],this.w=(T[3*p+g]-T[3*g+p])*v),this}});d.exports=c},function(d,w,e){var n=e(410),t=e(25),r=e(32),o=e(145);d.exports=function(i){var s=i.config;if((s.customEnvironment||s.canvas)&&s.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!s.customEnvironment&&!s.canvas&&s.renderType!==r.HEADLESS)if(s.renderType===r.CANVAS||s.renderType!==r.CANVAS&&!o.webGL){if(!o.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");s.renderType=r.CANVAS}else s.renderType=r.WEBGL;s.antialias||t.disableSmoothing();var a,u,l=i.scale.baseSize,c=l.width,h=l.height;s.canvas?(i.canvas=s.canvas,i.canvas.width=c,i.canvas.height=h):i.canvas=t.create(i,c,h,s.renderType),s.canvasStyle&&(i.canvas.style=s.canvasStyle),s.antialias||n.setCrisp(i.canvas),s.renderType!==r.HEADLESS&&(a=e(411),u=e(414),s.renderType===r.WEBGL?i.renderer=new u(i):(i.renderer=new a(i),i.context=i.renderer.gameContext))}},function(d,w){d.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);","    vec4 color = texture;","","    if (outTintEffect == 0.0)","    {","        //  Multiply texture tint","        color = texture * texel;","    }","    else if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);","        color.a = texture.a * texel.a;","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(d,w){d.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform mat4 uModelMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}","",""].join(`
`)},function(d,w,e){var n=e(32);d.exports=function(t){var r,o,i,s,a,u,l,c=t.config;c.hideBanner||(r="WebGL",c.renderType===n.CANVAS?r="Canvas":c.renderType===n.HEADLESS&&(r="Headless"),o=c.audio,l=!(i=t.device.audio).webAudio||o&&o.disableWebAudio?o&&o.noAudio||!i.webAudio&&!i.audioData?"No Audio":"HTML5 Audio":"Web Audio",t.device.browser.ie?window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io"):(a=[s=""],Array.isArray(c.bannerBackgroundColor)?(c.bannerBackgroundColor.forEach(function(h){s=s.concat("%c "),a.push("background: "+h),u=h}),a[a.length-1]="color: "+c.bannerTextColor+"; background: "+u):(s=s.concat("%c "),a.push("color: "+c.bannerTextColor+"; background: "+c.bannerBackgroundColor)),a.push("background: #fff"),c.gameTitle&&(s=s.concat(c.gameTitle),c.gameVersion&&(s=s.concat(" v"+c.gameVersion)),c.hidePhaser||(s=s.concat(" / "))),c.hidePhaser||(s=s.concat("Phaser v"+n.VERSION+" ("+r+" | "+l+")")),s=s.concat(" %c "+c.gameURL),a[0]=s,console.log.apply(console,a)))}},function(d,w,e){var n=e(0),t=e(5),r=e(1),o=e(283),i=new n({initialize:function(s,a){this.game=s,this.raf=new o,this.started=!1,this.running=!1,this.minFps=t(a,"min",5),this.targetFps=t(a,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=t(a,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=t(a,"deltaHistory",10),this.panicMax=t(a,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=t(a,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var s=window.performance.now();this.time=s,this.lastTime=s,this.nextFpsUpdate=s+1e3;for(var a=this.framesThisSecond=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=Math.min(this._target,this.deltaHistory[a]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(s){if(this.started)return this;this.started=!0,this.running=!0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=s,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var s=window.performance.now(),a=(this.now=s)-this.lastTime;a<0&&(a=0),this.rawDelta=a;var u=this.deltaIndex,l=this.deltaHistory,c=this.deltaSmoothingMax,h=a,f=a;if(this.smoothStep){(0<this._coolDown||!this.inFocus)&&(this._coolDown--,h=Math.min(h,this._target)),h>this._min&&(h=l[u],h=Math.min(h,this._min)),l[u]=h,this.deltaIndex++,this.deltaIndex>c&&(this.deltaIndex=0);for(var g=f=0;g<c;g++)f+=l[g];f/=c}this.delta=f,this.time+=this.rawDelta,s>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0),this.framesThisSecond++;var p=f/this._target;this.callback(s,f,p),this.lastTime=s,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(s){this.running||(s&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});d.exports=i},function(d,w,e){var n=e(0),t=e(1),r=new n({initialize:function(){this.isRunning=!1,this.callback=t,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var o=this;this.step=function i(){var s=window.performance.now();o.lastTime=o.tick,o.tick=s,o.callback(s),o.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var s=Date.now(),a=Math.min(Math.max(2*o.target+o.tick-s,0),o.target);o.lastTime=o.tick,o.tick=s,o.callback(s),o.timeOutID=window.setTimeout(i,a)}},start:function(o,i,s){this.isRunning||(this.callback=o,this.isSetTimeOut=i,this.target=s,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=t}});d.exports=r},function(d,w,e){var n=e(15);d.exports=function(t){var r,o=t.events;document.hidden!==void 0?r="visibilitychange":["webkit","moz","ms"].forEach(function(i){document[i+"Hidden"]!==void 0&&(document.hidden=function(){return document[i+"Hidden"]},r=i+"visibilitychange")}),r&&document.addEventListener(r,function(i){document.hidden||i.type==="pause"?o.emit(n.HIDDEN):o.emit(n.VISIBLE)},!1),window.onblur=function(){o.emit(n.BLUR)},window.onfocus=function(){o.emit(n.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(d,w,e){d.exports={CHANGE_DATA:e(663),CHANGE_DATA_KEY:e(664),REMOVE_DATA:e(665),SET_DATA:e(666)}},function(d,w,e){var n=e(99);d.exports=function(t){var r;document.readyState!=="complete"&&document.readyState!=="interactive"?(r=function(){document.removeEventListener("deviceready",r,!0),document.removeEventListener("DOMContentLoaded",r,!0),window.removeEventListener("load",r,!0),t()},document.body?n.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)):t()}},function(d,w,e){var n=e(152);d.exports=function(t,r){var o=window.screen,i=!!o&&(o.orientation||o.mozOrientation||o.msOrientation);if(i&&typeof i.type=="string")return i.type;if(typeof i=="string")return i;if(o)return o.height>o.width?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}return t<r?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE}},function(d,w){d.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(d,w){d.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(d,w){d.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(d,w){d.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(d,w){d.exports=function(e){var n;return e!==""&&(typeof e=="string"?n=document.getElementById(e):e&&e.nodeType===1&&(n=e)),n=n||document.body}},function(d,w){d.exports=function(e){var n="";try{window.DOMParser?n=new DOMParser().parseFromString(e,"text/xml"):(n=new ActiveXObject("Microsoft.XMLDOM")).loadXML(e)}catch(t){n=null}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length?n:null}},function(d,w){d.exports=function(e){e.parentNode&&e.parentNode.removeChild(e)}},function(d,w,e){var n=e(0),t=e(153),r=e(6),o=e(49),i=e(15),s=e(296),a=e(297),u=e(298),l=e(299),c=e(27),h=e(274),f=new n({initialize:function(g,p){this.game=g,this.scaleManager,this.canvas,this.config=p,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=p.inputKeyboard?new s(this):null,this.mouse=p.inputMouse?new a(this):null,this.touch=p.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=p.inputActivePointers,p.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var v=0;v<=this.pointersTotal;v++){var T=new u(this,v);T.smoothFactor=p.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=p.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new c,this._tempMatrix2=new c,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],g.events.once(i.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(i.PRE_RENDER,this.preRender,this),this.game.events.once(i.DESTROY,this.destroy,this)},setCanvasOver:function(g){this.isOver=!0,this.events.emit(o.GAME_OVER,g)},setCanvasOut:function(g){this.isOver=!1,this.events.emit(o.GAME_OUT,g)},preRender:function(){var g=this.game.loop.now,p=this.game.loop.delta,v=this.game.scene.getScenes(!0,!0);this.time=g,this.events.emit(o.MANAGER_UPDATE);for(var T=0;T<v.length;T++){var E=v[T];if(E.sys.input&&E.sys.input.updatePoll(g,p)&&this.globalTopOnly)return}},setDefaultCursor:function(g){this.defaultCursor=g,this.canvas.style.cursor!==g&&(this.canvas.style.cursor=g)},setCursor:function(g){g.cursor&&(this.canvas.style.cursor=g.cursor)},resetCursor:function(g){g.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(g){g===void 0&&(g=1);var p=[];10<this.pointersTotal+g&&(g=10-this.pointersTotal);for(var v=0;v<g;v++){var T=this.pointers.length,E=new u(this,T);E.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(E),this.pointersTotal++,p.push(E)}return p},updateInputPlugins:function(g,p){var v=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<v.length;T++){var E=v[T];if(E.sys.input&&(E.sys.input.update(g,p)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(g){for(var p=this.pointers,v=[],T=0;T<g.changedTouches.length;T++)for(var E=g.changedTouches[T],M=1;M<this.pointersTotal;M++){var A=p[M];if(!A.active){A.touchstart(E,g),this.activePointer=A,v.push(A);break}}this.updateInputPlugins(t.TOUCH_START,v)},onTouchMove:function(g){for(var p=this.pointers,v=[],T=0;T<g.changedTouches.length;T++)for(var E=g.changedTouches[T],M=1;M<this.pointersTotal;M++){var A=p[M];if(A.active&&A.identifier===E.identifier){A.touchmove(E,g),this.activePointer=A,v.push(A);break}}this.updateInputPlugins(t.TOUCH_MOVE,v)},onTouchEnd:function(g){for(var p=this.pointers,v=[],T=0;T<g.changedTouches.length;T++)for(var E=g.changedTouches[T],M=1;M<this.pointersTotal;M++){var A=p[M];if(A.active&&A.identifier===E.identifier){A.touchend(E,g),v.push(A);break}}this.updateInputPlugins(t.TOUCH_END,v)},onTouchCancel:function(g){for(var p=this.pointers,v=[],T=0;T<g.changedTouches.length;T++)for(var E=g.changedTouches[T],M=1;M<this.pointersTotal;M++){var A=p[M];if(A.active&&A.identifier===E.identifier){A.touchcancel(E,g),v.push(A);break}}this.updateInputPlugins(t.TOUCH_CANCEL,v)},onMouseDown:function(g){this.mousePointer.down(g),this.mousePointer.updateMotion(),this.updateInputPlugins(t.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(g){this.mousePointer.move(g),this.mousePointer.updateMotion(),this.updateInputPlugins(t.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(g){this.mousePointer.up(g),this.mousePointer.updateMotion(),this.updateInputPlugins(t.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(g){this.mousePointer.wheel(g),this.updateInputPlugins(t.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(g){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(o.POINTERLOCK_CHANGE,g,p)},inputCandidate:function(g,p){var v=g.input;if(!v||!v.enabled||!v.alwaysEnabled&&!g.willRender(p))return!1;var T=!0,E=g.parentContainer;if(E)do{if(!E.willRender(p)){T=!1;break}E=E.parentContainer}while(E);return T},hitTest:function(g,p,v,T){T===void 0&&(T=this._tempHitTest);var E=this._tempPoint,M=v.scrollX,A=v.scrollY;T.length=0;var C=g.x,P=g.y;v.resolution!==1&&(C+=v._x,P+=v._y),v.getWorldPoint(C,P,E),g.worldX=E.x,g.worldY=E.y;for(var R={x:0,y:0},D=this._tempMatrix,I=this._tempMatrix2,W=0;W<p.length;W++){var G,Y,j=p[W];this.inputCandidate(j,v)&&(G=E.x+M*j.scrollFactorX-M,Y=E.y+A*j.scrollFactorY-A,j.parentContainer?(j.getWorldTransformMatrix(D,I),D.applyInverse(G,Y,R)):h(G,Y,j.x,j.y,j.rotation,j.scaleX,j.scaleY,R),this.pointWithinHitArea(j,R.x,R.y)&&T.push(j))}return T},pointWithinHitArea:function(g,p,v){p+=g.displayOriginX,v+=g.displayOriginY;var T=g.input;return!(!T||!T.hitAreaCallback(T.hitArea,p,v,g))&&(T.localX=p,T.localY=v,!0)},pointWithinInteractiveObject:function(g,p,v){return!!g.hitArea&&(p+=g.gameObject.displayOriginX,v+=g.gameObject.displayOriginY,g.localX=p,g.localY=v,g.hitAreaCallback(g.hitArea,p,v,g))},transformPointer:function(g,p,v,T){var E=g.position,M=g.prevPosition;M.x=E.x,M.y=E.y;var A=this.scaleManager.transformX(p),C=this.scaleManager.transformY(v),P=g.smoothFactor;T&&P!==0?(E.x=A*P+M.x*(1-P),E.y=C*P+M.y*(1-P)):(E.x=A,E.y=C)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(i.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var g=0;g<this.pointers.length;g++)this.pointers[g].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});d.exports=f},function(d,w,e){var n=e(104),t=e(0),r=e(15),o=e(49),i=e(105),s=e(1),a=new t({initialize:function(u){this.manager=u,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=s,this.onKeyUp=s,u.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(c){var h;!c.defaultPrevented&&u.enabled&&u.manager&&(u.queue.push(c),u.manager.useQueue||u.manager.events.emit(o.MANAGER_PROCESS),h=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey,u.preventDefault&&!h&&-1<u.captures.indexOf(c.keyCode)&&c.preventDefault())},this.onKeyUp=function(c){var h;!c.defaultPrevented&&u.enabled&&u.manager&&(u.queue.push(c),u.manager.useQueue||u.manager.events.emit(o.MANAGER_PROCESS),h=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey,u.preventDefault&&!h&&-1<u.captures.indexOf(c.keyCode)&&c.preventDefault())};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var l=this.captures,c=0;c<u.length;c++){var h=u[c];typeof h=="string"&&(h=i[h.trim().toUpperCase()]),l.indexOf(h)===-1&&l.push(h)}this.preventDefault=0<l.length},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var l=this.captures,c=0;c<u.length;c++){var h=u[c];typeof h=="string"&&(h=i[h.toUpperCase()]),n(l,h)}this.preventDefault=0<l.length},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});d.exports=a},function(d,w,e){var n=e(0),t=e(145),r=e(49),o=e(1),i=new n({initialize:function(s){this.manager=s,this.capture=!0,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,s.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputMouse,this.target=s.inputMouseEventTarget,this.capture=s.inputMouseCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},requestPointerLock:function(){var s;t.pointerLock&&((s=this.target).requestPointerLock=s.requestPointerLock||s.mozRequestPointerLock||s.webkitRequestPointerLock,s.requestPointerLock())},releasePointerLock:function(){t.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var s=this,a=this.manager.canvas,u=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(f){!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&(s.manager.onMouseMove(f),s.capture&&f.preventDefault())},this.onMouseDown=function(f){u&&window.focus(),!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&(s.manager.onMouseDown(f),s.capture&&f.target===a&&f.preventDefault())},this.onMouseDownWindow=function(f){!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&f.target!==a&&s.manager.onMouseDown(f)},this.onMouseUp=function(f){!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&(s.manager.onMouseUp(f),s.capture&&f.target===a&&f.preventDefault())},this.onMouseUpWindow=function(f){!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&f.target!==a&&s.manager.onMouseUp(f)},this.onMouseOver=function(f){!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&s.manager.setCanvasOver(f)},this.onMouseOut=function(f){!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&s.manager.setCanvasOut(f)},this.onMouseWheel=function(f){!f.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&s.manager.onMouseWheel(f)};var l,c,h=this.target;h&&(c={passive:!(l={passive:!0})},h.addEventListener("mousemove",this.onMouseMove,this.capture?c:l),h.addEventListener("mousedown",this.onMouseDown,this.capture?c:l),h.addEventListener("mouseup",this.onMouseUp,this.capture?c:l),h.addEventListener("mouseover",this.onMouseOver,this.capture?c:l),h.addEventListener("mouseout",this.onMouseOut,this.capture?c:l),h.addEventListener("wheel",this.onMouseWheel,this.capture?c:l),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c)),t.pointerLock&&(this.pointerLockChange=function(f){var g=s.target;s.locked=document.pointerLockElement===g||document.mozPointerLockElement===g||document.webkitPointerLockElement===g,s.manager.onPointerLockChange(f)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0)},stopListeners:function(){var s=this.target;s.removeEventListener("mousemove",this.onMouseMove),s.removeEventListener("mousedown",this.onMouseDown),s.removeEventListener("mouseup",this.onMouseUp),s.removeEventListener("mouseover",this.onMouseOver),s.removeEventListener("mouseout",this.onMouseOut),window&&(window.removeEventListener("mousedown",this.onMouseDownWindow),window.removeEventListener("mouseup",this.onMouseUpWindow)),t.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});d.exports=i},function(d,w,e){var n=e(260),t=e(0),r=e(54),o=e(96),i=e(269),s=e(4),a=new t({initialize:function(u,l){this.manager=u,this.id=l,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new s,this.prevPosition=new s,this.midPoint=new s(-1,-1),this.velocity=new s,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=l===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(u){var l=this.x,c=this.y;u.resolution!==1&&(l+=u._x,c+=u._y);var h=u.getWorldPoint(l,c);return this.worldX=h.x,this.worldY=h.y,this},positionToCamera:function(u,l){return u.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var u,l,c,h,f=this.position.x,g=this.position.y,p=this.midPoint.x,v=this.midPoint.y;f===p&&g===v||(u=i(this.motionFactor,p,f),l=i(this.motionFactor,v,g),o(u,f,.1)&&(u=f),o(l,g,.1)&&(l=g),this.midPoint.set(u,l),c=f-u,h=g-l,this.velocity.set(c,h),this.angle=n(u,l,f,g),this.distance=Math.sqrt(c*c+h*h))},up:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=u.timeStamp),this.isDown=!1,this.wasTouch=!1},down:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=u.timeStamp),this.isDown=!0,this.wasTouch=!1},move:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.locked&&(this.movementX=u.movementX||u.mozMovementX||u.webkitMovementX||0,this.movementY=u.movementY||u.mozMovementY||u.webkitMovementY||0),this.moveTime=u.timeStamp,this.wasTouch=!1},wheel:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.deltaX=u.deltaX,this.deltaY=u.deltaY,this.deltaZ=u.deltaZ,this.wasTouch=!1},touchstart:function(u,l){u.pointerId&&(this.pointerId=u.pointerId),this.identifier=u.identifier,this.target=u.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(u,l){this.event=l,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(u,l){this.buttons=0,this.event=l,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(u,l){this.buttons=0,this.event=l,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(u,l){u===void 0&&(u=10),l===void 0&&(l=[]);for(var c=this.prevPosition.x,h=this.prevPosition.y,f=this.position.x,g=this.position.y,p=0;p<u;p++){var v=1/u*p;l[p]={x:i(v,c,f),y:i(v,h,g)}}return l},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(u){this.position.x=u}},y:{get:function(){return this.position.y},set:function(u){this.position.y=u}},time:{get:function(){return this.event?this.event.timeStamp:0}}});d.exports=a},function(d,w,e){var n=e(0),t=e(49),r=e(1),o=new n({initialize:function(i){this.manager=i,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,i.events.once(t.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputTouch,this.target=i.inputTouchEventTarget,this.capture=i.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},startListeners:function(){var i=this,s=this.manager.canvas,a=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(h){a&&window.focus(),!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchStart(h),i.capture&&h.cancelable&&h.target===s&&h.preventDefault())},this.onTouchStartWindow=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&h.target!==s&&i.manager.onTouchStart(h)},this.onTouchMove=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchMove(h),i.capture&&h.cancelable&&h.preventDefault())},this.onTouchEnd=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchEnd(h),i.capture&&h.cancelable&&h.target===s&&h.preventDefault())},this.onTouchEndWindow=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&h.target!==s&&i.manager.onTouchEnd(h)},this.onTouchCancel=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchCancel(h),i.capture&&h.preventDefault())},this.onTouchCancelWindow=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.onTouchCancel(h)},this.onTouchOver=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.setCanvasOver(h)},this.onTouchOut=function(h){!h.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.setCanvasOut(h)};var u,l,c=this.target;c&&(l={passive:!(u={passive:!0})},c.addEventListener("touchstart",this.onTouchStart,this.capture?l:u),c.addEventListener("touchmove",this.onTouchMove,this.capture?l:u),c.addEventListener("touchend",this.onTouchEnd,this.capture?l:u),c.addEventListener("touchcancel",this.onTouchCancel,this.capture?l:u),c.addEventListener("touchover",this.onTouchOver,this.capture?l:u),c.addEventListener("touchout",this.onTouchOut,this.capture?l:u),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,l),window.addEventListener("touchend",this.onTouchEndWindow,l),window.addEventListener("touchcancel",this.onTouchCancelWindow,l)),this.enabled=!0)},stopListeners:function(){var i=this.target;i.removeEventListener("touchstart",this.onTouchStart),i.removeEventListener("touchmove",this.onTouchMove),i.removeEventListener("touchend",this.onTouchEnd),i.removeEventListener("touchcancel",this.onTouchCancel),i.removeEventListener("touchover",this.onTouchOver),i.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});d.exports=o},function(d,w,e){var n=e(152),t=e(0),r=e(6),o=e(78),i=e(15),s=e(720),a=e(292),u=e(287),l=e(1),c=e(7),h=e(421),f=e(79),g=e(4),p=new t({Extends:r,initialize:function(v){r.call(this),this.game=v,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new h,this.gameSize=new h,this.baseSize=new h,this.displaySize=new h,this.scaleMode=n.SCALE_MODE.NONE,this.resolution=1,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once("boot",this.boot,this)},boot:function(){var v=this.game;this.canvas=v.canvas,this.fullscreen=v.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh()),v.events.on(i.PRE_STEP,this.step,this),v.events.once(i.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(v){this.getParent(v),this.getParentBounds();var T,E,M,A,C=v.width,P=v.height,R=v.scaleMode,D=v.resolution,I=v.zoom,W=v.autoRound;typeof C=="string"&&((T=this.parentSize.width)===0&&(T=window.innerWidth),E=parseInt(C,10)/100,C=Math.floor(T*E)),typeof P=="string"&&((M=this.parentSize.height)===0&&(M=window.innerHeight),A=parseInt(P,10)/100,P=Math.floor(M*A)),this.resolution=1,this.scaleMode=R,this.autoRound=W,this.autoCenter=v.autoCenter,this.resizeInterval=v.resizeInterval,W&&(C=Math.floor(C),P=Math.floor(P)),this.gameSize.setSize(C,P),I===n.ZOOM.MAX_ZOOM&&(I=this.getMaxZoom()),(this.zoom=I)!==1&&(this._resetZoom=!0),this.baseSize.setSize(C*D,P*D),W&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),0<v.minWidth&&this.displaySize.setMin(v.minWidth*I,v.minHeight*I),0<v.maxWidth&&this.displaySize.setMax(v.maxWidth*I,v.maxHeight*I),this.displaySize.setSize(C,P),this.orientation=u(C,P)},getParent:function(v){var T,E=v.parent;E!==null&&(this.parent=a(E),this.parentIsWindow=this.parent===document.body,v.expandParent&&v.scaleMode!==n.SCALE_MODE.NONE&&(T=this.parent.getBoundingClientRect(),!this.parentIsWindow&&T.height!==0||(document.documentElement.style.height="100%",document.body.style.height="100%",T=this.parent.getBoundingClientRect(),this.parentIsWindow||T.height!==0||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))),v.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=a(v.fullscreenTarget)))},getParentBounds:function(){if(!this.parent)return!1;var v=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=s(!0));var E=this.resolution,M=T.width*E,A=T.height*E;return(v.width!==M||v.height!==A)&&(v.setSize(M,A),!0)},lockOrientation:function(v){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!T&&T.call(screen,v)},setParentSize:function(v,T){return this.parentSize.setSize(v,T),this.refresh()},setGameSize:function(v,T){var E=this.autoRound,M=this.resolution;E&&(v=Math.floor(v),T=Math.floor(T));var A=this.width,C=this.height;return this.gameSize.resize(v,T),this.baseSize.resize(v*M,T*M),E&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(v/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,C)},resize:function(v,T){var E=this.zoom,M=this.resolution,A=this.autoRound;A&&(v=Math.floor(v),T=Math.floor(T));var C=this.width,P=this.height;this.gameSize.resize(v,T),this.baseSize.resize(v*M,T*M),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(v*E*M,T*E*M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,D=v*E,I=T*E;return A&&(D=Math.floor(D),I=Math.floor(I)),D===v&&I===T||(R.width=D+"px",R.height=I+"px"),this.refresh(C,P)},setZoom:function(v){return this.zoom=v,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(v,T){v===void 0&&(v=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var E,M,A=this.game.domContainer;return A&&(this.baseSize.setCSS(A),E=this.canvas.style,(M=A.style).transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",M.marginLeft=E.marginLeft,M.marginTop=E.marginTop),this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,v,T),this},updateOrientation:function(){var v;this._checkOrientation&&(this._checkOrientation=!1,(v=u(this.width,this.height))!==this.orientation&&(this.orientation=v,this.emit(o.ORIENTATION_CHANGE,v)))},updateScale:function(){var v,T,E=this.canvas.style,M=this.gameSize.width,A=this.gameSize.height,C=this.zoom,P=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(M*C*1,A*C*1),v=+this.displaySize.width,T=+this.displaySize.height,P&&(v=Math.floor(v),T=Math.floor(T)),this._resetZoom&&(E.width=v+"px",E.height=T+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(+this.displaySize.width,+this.displaySize.height),v=+this.displaySize.width,T=+this.displaySize.height,P&&(v=Math.floor(v),T=Math.floor(T)),this.canvas.width=v,this.canvas.height=T):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),v=+this.displaySize.width,T=+this.displaySize.height,P&&(v=Math.floor(v),T=Math.floor(T)),E.width=v+"px",E.height=T+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var v=f(this.parentSize.width,this.gameSize.width,0,!0),T=f(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(v,T),1)},updateCenter:function(){var v,T,E,M,A,C,P,R=this.autoCenter;R!==n.CENTER.NO_CENTER&&(T=(v=this.canvas).style,M=(E=v.getBoundingClientRect()).width,A=E.height,C=Math.floor((this.parentSize.width-M)/2),P=Math.floor((this.parentSize.height-A)/2),R===n.CENTER.CENTER_HORIZONTALLY?P=0:R===n.CENTER.CENTER_VERTICALLY&&(C=0),T.marginLeft=C+"px",T.marginTop=P+"px")},updateBounds:function(){var v=this.canvasBounds,T=this.canvas.getBoundingClientRect();v.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),v.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),v.width=T.width,v.height=T.height},transformX:function(v){return(v-this.canvasBounds.left)*this.displayScale.x},transformY:function(v){return(v-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(v){v===void 0&&(v={navigationUI:"hide"});var T,E=this.fullscreen;E.available?E.active||(T=this.getFullscreenTarget(),E.keyboard?T[E.request](Element.ALLOW_KEYBOARD_INPUT):T[E.request](v)):this.emit(o.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(v){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,v)},getFullscreenTarget:function(){var v;return this.fullscreenTarget||((v=document.createElement("div")).style.margin="0",v.style.padding="0",v.style.width="100%",v.style.height="100%",this.fullscreenTarget=v,this._createdFullscreenTarget=!0),this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){var v,T;!this._createdFullscreenTarget||(v=this.fullscreenTarget)&&v.parentNode&&((T=v.parentNode).insertBefore(this.canvas,v),T.removeChild(v))},stopFullscreen:function(){var v=this.fullscreen;if(!v.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;v.active&&document[v.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(v){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(v)},startListeners:function(){var v=this,T=this.listeners;T.orientationChange=function(){v._checkOrientation=!0,v.dirty=!0},T.windowResize=function(){v.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available&&(T.fullScreenChange=function(E){return v.onFullScreenChange(E)},T.fullScreenError=function(E){return v.onFullScreenError(E)},["webkit","moz",""].forEach(function(E){document.addEventListener(E+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(E+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(v,T){this.parent&&(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var v=this.listeners;window.removeEventListener("orientationchange",v.orientationChange,!1),window.removeEventListener("resize",v.windowResize,!1),["webkit","moz",""].forEach(function(T){document.removeEventListener(T+"fullscreenchange",v.fullScreenChange,!1),document.removeEventListener(T+"fullscreenerror",v.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",v.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",v.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});d.exports=p},function(d,w,e){var n=e(0),t=e(106),r=e(18),o=e(15),i=e(5),s=e(81),a=e(1),u=e(302),l=e(154),c=new n({initialize:function(h,f){if(this.game=h,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,f){Array.isArray(f)||(f=[f]);for(var g=0;g<f.length;g++)this._pending.push({key:"default",scene:f[g],autoStart:g===0,data:{}})}h.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){for(var h=0;h<this._pending.length;h++){var f,g,p,v=(g=this._pending[h]).key;(p=g.scene)instanceof u?f=this.createSceneFromInstance(v,p):typeof p=="object"?f=this.createSceneFromObject(v,p):typeof p=="function"&&(f=this.createSceneFromFunction(v,p)),v=f.sys.settings.key,this.keys[v]=f,this.scenes.push(f),this._data[v]&&(f.sys.settings.data=this._data[v].data,this._data[v].autoStart&&(g.autoStart=!0)),(g.autoStart||f.sys.settings.active)&&this._start.push(v)}for(this._pending.length=0,this._data={},this.isBooted=!0,h=0;h<this._start.length;h++)g=this._start[h],this.start(g);this._start.length=0}},processQueue:function(){var h,f,g=this._pending.length,p=this._queue.length;if(g!==0||p!==0){if(g){for(h=0;h<g;h++)f=this._pending[h],this.add(f.key,f.scene,f.autoStart,f.data);for(h=0;h<this._start.length;h++)f=this._start[h],this.start(f);return this._start.length=0,void(this._pending.length=0)}for(h=0;h<this._queue.length;h++)this[(f=this._queue[h]).op](f.keyA,f.keyB);this._queue.length=0}},add:function(h,f,g,p){return g===void 0&&(g=!1),p===void 0&&(p={}),this.isProcessing||!this.isBooted?(this._pending.push({key:h,scene:f,autoStart:g,data:p}),this.isBooted||(this._data[h]={data:p}),null):(h=this.getKey(h,f),f instanceof u?v=this.createSceneFromInstance(h,f):typeof f=="object"?(f.key=h,v=this.createSceneFromObject(h,f)):typeof f=="function"&&(v=this.createSceneFromFunction(h,f)),v.sys.settings.data=p,h=v.sys.settings.key,this.keys[h]=v,this.scenes.push(v),(g||v.sys.settings.active)&&(this._pending.length?this._start.push(h):this.start(h)),v);var v},remove:function(h){if(this.isProcessing)this._queue.push({op:"remove",keyA:h,keyB:null});else{var f=this.getScene(h);if(!f||f.sys.isTransitioning())return this;var g=this.scenes.indexOf(f),p=f.sys.settings.key;-1<g&&(delete this.keys[p],this.scenes.splice(g,1),-1<this._start.indexOf(p)&&(g=this._start.indexOf(p),this._start.splice(g,1)),f.sys.destroy())}return this},bootScene:function(h){var f,g=h.sys,p=g.settings;g.sceneUpdate=a,h.init&&(h.init.call(h,p.data),p.status=t.INIT,p.isTransition&&g.events.emit(r.TRANSITION_INIT,p.transitionFrom,p.transitionDuration)),g.load&&(f=g.load).reset(),f&&h.preload?(h.preload.call(h),f.list.size===0?this.create(h):(p.status=t.LOADING,f.once(s.COMPLETE,this.loadComplete,this),f.start())):this.create(h)},loadComplete:function(h){var f=h.scene;this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(f)},payloadComplete:function(h){this.bootScene(h.scene)},update:function(h,f){this.processQueue(),this.isProcessing=!0;for(var g=this.scenes.length-1;0<=g;g--){var p=this.scenes[g].sys;p.settings.status>t.START&&p.settings.status<=t.RUNNING&&p.step(h,f)}},render:function(h){for(var f=0;f<this.scenes.length;f++){var g=this.scenes[f].sys;g.settings.visible&&g.settings.status>=t.LOADING&&g.settings.status<t.SLEEPING&&g.render(h)}this.isProcessing=!1},create:function(h){var f=h.sys,g=f.settings;h.create&&(g.status=t.CREATING,h.create.call(h,g.data),g.status===t.DESTROYED)||(g.isTransition&&f.events.emit(r.TRANSITION_START,g.transitionFrom,g.transitionDuration),h.update&&(f.sceneUpdate=h.update),g.status=t.RUNNING,f.events.emit(r.CREATE,h))},createSceneFromFunction:function(h,f){var g=new f;if(g instanceof u){var p=g.sys.settings.key;if(p!==""&&(h=p),this.keys.hasOwnProperty(h))throw new Error("Cannot add a Scene with duplicate key: "+h);return this.createSceneFromInstance(h,g)}return g.sys=new l(g),g.sys.settings.key=h,g.sys.init(this.game),g},createSceneFromInstance:function(h,f){return f.sys.settings.key===""&&(f.sys.settings.key=h),f.sys.init(this.game),f},createSceneFromObject:function(h,f){var g=new u(f),p=g.sys.settings.key;p!==""?h=p:g.sys.settings.key=h,g.sys.init(this.game);for(var v,T=["init","preload","create","update","render"],E=0;E<T.length;E++){var M=i(f,T[E],null);M&&(g[T[E]]=M)}if(f.hasOwnProperty("extend"))for(var A in f.extend)f.extend.hasOwnProperty(A)&&(v=f.extend[A],A==="data"&&g.hasOwnProperty("data")&&typeof v=="object"?g.data.merge(v):A!=="sys"&&(g[A]=v));return g},getKey:function(h,f){if(h=h||"default",typeof f=="function")return h;if(f instanceof u?h=f.sys.settings.key:typeof f=="object"&&f.hasOwnProperty("key")&&(h=f.key),this.keys.hasOwnProperty(h))throw new Error("Cannot add a Scene with duplicate key: "+h);return h},getScenes:function(h,f){h===void 0&&(h=!0),f===void 0&&(f=!1);for(var g=[],p=this.scenes,v=0;v<p.length;v++){var T=p[v];T&&(!h||h&&T.sys.isActive())&&g.push(T)}return f?g.reverse():g},getScene:function(h){if(typeof h=="string"){if(this.keys[h])return this.keys[h]}else for(var f=0;f<this.scenes.length;f++)if(h===this.scenes[f])return h;return null},isActive:function(h){var f=this.getScene(h);return f?f.sys.isActive():null},isPaused:function(h){var f=this.getScene(h);return f?f.sys.isPaused():null},isVisible:function(h){var f=this.getScene(h);return f?f.sys.isVisible():null},isSleeping:function(h){var f=this.getScene(h);return f?f.sys.isSleeping():null},pause:function(h,f){var g=this.getScene(h);return g&&g.sys.pause(f),this},resume:function(h,f){var g=this.getScene(h);return g&&g.sys.resume(f),this},sleep:function(h,f){var g=this.getScene(h);return g&&!g.sys.isTransitioning()&&g.sys.sleep(f),this},wake:function(h,f){var g=this.getScene(h);return g&&g.sys.wake(f),this},run:function(h,f){var g=this.getScene(h);if(!g){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===h){this.queueOp("start",h,f);break}return this}g.sys.isSleeping()?g.sys.wake(f):g.sys.isPaused()?g.sys.resume(f):this.start(h,f)},start:function(h,f){if(!this.isBooted)return this._data[h]={autoStart:!0,data:f},this;var g,p=this.getScene(h);if(p){if(p.sys.isActive()||p.sys.isPaused())p.sys.shutdown(),p.sys.start(f);else if(p.sys.start(f),p.sys.load&&(g=p.sys.load),g&&p.sys.settings.hasOwnProperty("pack")&&(g.reset(),g.addPack({payload:p.sys.settings.pack})))return p.sys.settings.status=t.LOADING,g.once(s.COMPLETE,this.payloadComplete,this),g.start(),this;this.bootScene(p)}return this},stop:function(h,f){var g=this.getScene(h);return g&&!g.sys.isTransitioning()&&g.sys.shutdown(f),this},switch:function(h,f){var g=this.getScene(h),p=this.getScene(f);return g&&p&&g!==p&&(this.sleep(h),this.isSleeping(f)?this.wake(f):this.start(f)),this},getAt:function(h){return this.scenes[h]},getIndex:function(h){var f=this.getScene(h);return this.scenes.indexOf(f)},bringToTop:function(h){var f,g;return this.isProcessing?this._queue.push({op:"bringToTop",keyA:h,keyB:null}):(f=this.getIndex(h))!==-1&&f<this.scenes.length&&(g=this.getScene(h),this.scenes.splice(f,1),this.scenes.push(g)),this},sendToBack:function(h){var f,g;return this.isProcessing?this._queue.push({op:"sendToBack",keyA:h,keyB:null}):(f=this.getIndex(h))!==-1&&0<f&&(g=this.getScene(h),this.scenes.splice(f,1),this.scenes.unshift(g)),this},moveDown:function(h){var f,g,p,v;return this.isProcessing?this._queue.push({op:"moveDown",keyA:h,keyB:null}):0<(f=this.getIndex(h))&&(g=f-1,p=this.getScene(h),v=this.getAt(g),this.scenes[f]=v,this.scenes[g]=p),this},moveUp:function(h){var f,g,p,v;return this.isProcessing?this._queue.push({op:"moveUp",keyA:h,keyB:null}):(f=this.getIndex(h))<this.scenes.length-1&&(g=f+1,p=this.getScene(h),v=this.getAt(g),this.scenes[f]=v,this.scenes[g]=p),this},moveAbove:function(h,f){return h===f||(this.isProcessing?this._queue.push({op:"moveAbove",keyA:h,keyB:f}):(g=this.getIndex(h),p=this.getIndex(f),g!==-1&&p!==-1&&(v=this.getAt(p),this.scenes.splice(p,1),this.scenes.splice(g+1,0,v)))),this;var g,p,v},moveBelow:function(h,f){return h===f||(this.isProcessing?this._queue.push({op:"moveBelow",keyA:h,keyB:f}):(g=this.getIndex(h),p=this.getIndex(f),g!==-1&&p!==-1&&(v=this.getAt(p),this.scenes.splice(p,1),g===0?this.scenes.unshift(v):this.scenes.splice(g,0,v)))),this;var g,p,v},queueOp:function(h,f,g){return this._queue.push({op:h,keyA:f,keyB:g}),this},swapPosition:function(h,f){return h===f||(this.isProcessing?this._queue.push({op:"swapPosition",keyA:h,keyB:f}):(g=this.getIndex(h))!==(p=this.getIndex(f))&&g!==-1&&p!==-1&&(v=this.getAt(g),this.scenes[g]=this.scenes[p],this.scenes[p]=v)),this;var g,p,v},dump:function(){for(var h=[],f=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],g=0;g<this.scenes.length;g++){var p=this.scenes[g].sys,v=!p.settings.visible||p.settings.status!==t.RUNNING&&p.settings.status!==t.PAUSED?"[-] ":"[*] ";v+=p.settings.key+" ("+f[p.settings.status]+")",h.push(v)}console.log(h.join(`
`))},destroy:function(){for(var h=0;h<this.scenes.length;h++)this.scenes[h].sys.destroy();this.update=a,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});d.exports=c},function(d,w,e){var n=e(0),t=e(154),r=new n({initialize:function(o){this.sys=new t(this,o),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins},update:function(){}});d.exports=r},function(d,w,e){var n=e(106),t=e(5),r=e(205),o=e(733),i={create:function(s){return typeof s=="string"?s={key:s}:s===void 0&&(s={}),{status:n.PENDING,key:t(s,"key",""),active:t(s,"active",!1),visible:t(s,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:t(s,"pack",!1),cameras:t(s,"cameras",null),map:t(s,"map",r(o,t(s,"mapAdd",{}))),physics:t(s,"physics",{}),loader:t(s,"loader",{}),plugins:t(s,"plugins",!1),input:t(s,"input",{})}}};d.exports=i},function(d,w,e){var n=e(25),t=e(305),r=e(0),o=e(28),i=e(32),s=e(6),a=e(102),u=e(15),l=e(422),c=e(5),h=e(307),f=e(155),g=new r({Extends:s,initialize:function(p){s.call(this),this.game=p,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,p.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=2,this.on(a.LOAD,this.updatePending,this),this.on(a.ERROR,this.updatePending,this),this.addBase64("__DEFAULT",this.game.config.defaultImage),this.addBase64("__MISSING",this.game.config.missingImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(a.LOAD),this.off(a.ERROR),this.emit(a.READY))},checkKey:function(p){return!this.exists(p)||(console.error("Texture key already in use: "+p),!1)},remove:function(p){if(typeof p=="string"){if(!this.exists(p))return console.warn("No texture found matching key: "+p),this;p=this.get(p)}return this.list.hasOwnProperty(p.key)&&(p.destroy(),this.emit(a.REMOVE,p.key)),this},removeKey:function(p){return this.list.hasOwnProperty(p)&&delete this.list[p],this},addBase64:function(p,v){var T,E;return this.checkKey(p)&&(T=this,(E=new Image).onerror=function(){T.emit(a.ERROR,p)},E.onload=function(){var M=T.create(p,E);h.Image(M,0),T.emit(a.ADD,p,M),T.emit(a.LOAD,p,M)},E.src=v),this},getBase64:function(p,v,T,E){T===void 0&&(T="image/png"),E===void 0&&(E=.92);var M,A,C="",P=this.getFrame(p,v);return P&&(P.source.isRenderTexture||P.source.isGLTexture)?console.warn("Cannot getBase64 from WebGL Texture"):P&&(M=P.canvasData,(A=n.create2D(this,M.width,M.height)).getContext("2d").drawImage(P.source.image,M.x,M.y,M.width,M.height,0,0,M.width,M.height),C=A.toDataURL(T,E),n.remove(A)),C},addImage:function(p,v,T){var E=null;return this.checkKey(p)&&(E=this.create(p,v),h.Image(E,0),T&&E.setDataSource(T),this.emit(a.ADD,p,E)),E},addGLTexture:function(p,v,T,E){var M=null;return this.checkKey(p)&&((M=this.create(p,v,T,E)).add("__BASE",0,0,0,T,E),this.emit(a.ADD,p,M)),M},addRenderTexture:function(p,v){var T=null;return this.checkKey(p)&&((T=this.create(p,v)).add("__BASE",0,0,0,v.width,v.height),this.emit(a.ADD,p,T)),T},generate:function(p,v){if(this.checkKey(p)){var T=n.create(this,1,1);return v.canvas=T,l(v),this.addCanvas(p,T)}return null},createCanvas:function(p,v,T){if(v===void 0&&(v=256),T===void 0&&(T=256),this.checkKey(p)){var E=n.create(this,v,T,i.CANVAS,!0);return this.addCanvas(p,E)}return null},addCanvas:function(p,v,T){T===void 0&&(T=!1);var E=null;return T?E=new t(this,p,v,v.width,v.height):this.checkKey(p)&&(E=new t(this,p,v,v.width,v.height),this.list[p]=E,this.emit(a.ADD,p,E)),E},addAtlas:function(p,v,T,E){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(p,v,T,E):this.addAtlasJSONHash(p,v,T,E)},addAtlasJSONArray:function(p,v,T,E){var M=null;if(this.checkKey(p)){if(M=this.create(p,v),Array.isArray(T))for(var A=T.length===1,C=0;C<M.source.length;C++){var P=A?T[0]:T[C];h.JSONArray(M,C,P)}else h.JSONArray(M,0,T);E&&M.setDataSource(E),this.emit(a.ADD,p,M)}return M},addAtlasJSONHash:function(p,v,T,E){var M=null;if(this.checkKey(p)){if(M=this.create(p,v),Array.isArray(T))for(var A=0;A<T.length;A++)h.JSONHash(M,A,T[A]);else h.JSONHash(M,0,T);E&&M.setDataSource(E),this.emit(a.ADD,p,M)}return M},addAtlasXML:function(p,v,T,E){var M=null;return this.checkKey(p)&&(M=this.create(p,v),h.AtlasXML(M,0,T),E&&M.setDataSource(E),this.emit(a.ADD,p,M)),M},addUnityAtlas:function(p,v,T,E){var M=null;return this.checkKey(p)&&(M=this.create(p,v),h.UnityYAML(M,0,T),E&&M.setDataSource(E),this.emit(a.ADD,p,M)),M},addSpriteSheet:function(p,v,T){var E,M,A=null;return this.checkKey(p)&&(E=(A=this.create(p,v)).source[0].width,M=A.source[0].height,h.SpriteSheet(A,0,0,0,E,M,T),this.emit(a.ADD,p,A)),A},addSpriteSheetFromAtlas:function(p,v){if(!this.checkKey(p))return null;var T=c(v,"atlas",null),E=c(v,"frame",null);if(T&&E){var M=this.get(T).get(E);if(M){var A=this.create(p,M.source.image);return M.trimmed?h.SpriteSheetFromAtlas(A,M,v):h.SpriteSheet(A,0,M.cutX,M.cutY,M.cutWidth,M.cutHeight,v),this.emit(a.ADD,p,A),A}}},create:function(p,v,T,E){var M=null;return this.checkKey(p)&&(M=new f(this,p,v,T,E),this.list[p]=M),M},exists:function(p){return this.list.hasOwnProperty(p)},get:function(p){return p===void 0&&(p="__DEFAULT"),this.list[p]?this.list[p]:p instanceof f?p:this.list.__MISSING},cloneFrame:function(p,v){if(this.list[p])return this.list[p].get(v).clone()},getFrame:function(p,v){if(this.list[p])return this.list[p].get(v)},getTextureKeys:function(){var p=[];for(var v in this.list)v!=="__DEFAULT"&&v!=="__MISSING"&&p.push(v);return p},getPixel:function(p,v,T,E){var M=this.getFrame(T,E);if(M){p-=M.x,v-=M.y;var A=M.data.cut;if(p+=A.x,v+=A.y,p>=A.x&&p<A.r&&v>=A.y&&v<A.b){var C=this._tempContext;C.clearRect(0,0,1,1),C.drawImage(M.source.image,p,v,1,1,0,0,1,1);var P=C.getImageData(0,0,1,1);return new o(P.data[0],P.data[1],P.data[2],P.data[3])}}return null},getPixelAlpha:function(p,v,T,E){var M=this.getFrame(T,E);if(M){p-=M.x,v-=M.y;var A=M.data.cut;if(p+=A.x,v+=A.y,p>=A.x&&p<A.r&&v>=A.y&&v<A.b){var C=this._tempContext;return C.clearRect(0,0,1,1),C.drawImage(M.source.image,p,v,1,1,0,0,1,1),C.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(p,v,T){return this.list[v]&&(p.texture=this.list[v],p.frame=p.texture.get(T)),p},renameTexture:function(p,v){var T=this.get(p);return!(!T||p===v)&&(T.key=v,this.list[v]=T,delete this.list[p],!0)},each:function(p,v){for(var T=[null],E=1;E<arguments.length;E++)T.push(arguments[E]);for(var M in this.list)T[0]=this.list[M],p.apply(v,T)},destroy:function(){for(var p in this.list)this.list[p].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});d.exports=g},function(d,w,e){var n=e(0),t=e(12),r=e(28),o=e(32),i=e(101),s=e(155),a=new n({Extends:s,initialize:function(u,l,c,h,f){s.call(this,u,l,c,h,f),this.add("__BASE",0,0,0,h,f),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=h,this.height=f,this.imageData=this.context.getImageData(0,0,h,f),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(u,l,c){return this.context.drawImage(c,u,l),this.update()},drawFrame:function(u,l,c,h){c===void 0&&(c=0),h===void 0&&(h=0);var f=this.manager.getFrame(u,l);if(f){var g=f.canvasData,p=f.cutWidth,v=f.cutHeight,T=f.source.resolution;return this.context.drawImage(f.source.image,g.x,g.y,p,v,c,h,p/T,v/T),this.update()}return this},setPixel:function(u,l,c,h,f,g){var p;return g===void 0&&(g=255),u=Math.abs(Math.floor(u)),l=Math.abs(Math.floor(l)),-1<this.getIndex(u,l)&&((p=this.context.getImageData(u,l,1,1)).data[0]=c,p.data[1]=h,p.data[2]=f,p.data[3]=g,this.context.putImageData(p,u,l)),this},putData:function(u,l,c,h,f,g,p){return h===void 0&&(h=0),f===void 0&&(f=0),g===void 0&&(g=u.width),p===void 0&&(p=u.height),this.context.putImageData(u,l,c,h,f,g,p),this},getData:function(u,l,c,h){return u=t(Math.floor(u),0,this.width-1),l=t(Math.floor(l),0,this.height-1),c=t(c,1,this.width-u),h=t(h,1,this.height-l),this.context.getImageData(u,l,c,h)},getPixel:function(u,l,c){c=c||new r;var h,f,g,p,v,T=this.getIndex(u,l);return-1<T&&(f=(h=this.data)[T+0],g=h[T+1],p=h[T+2],v=h[T+3],c.setTo(f,g,p,v)),c},getPixels:function(u,l,c,h){u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=this.width),h===void 0&&(h=c),u=Math.abs(Math.round(u)),l=Math.abs(Math.round(l));for(var f=t(u,0,this.width),g=t(u+c,0,this.width),p=t(l,0,this.height),v=t(l+h,0,this.height),T=new r,E=[],M=p;M<v;M++){for(var A=[],C=f;C<g;C++)T=this.getPixel(C,M,T),A.push({x:C,y:M,color:T.color,alpha:T.alphaGL});E.push(A)}return E},getIndex:function(u,l){return u=Math.abs(Math.round(u)),l=Math.abs(Math.round(l)),u<this.width&&l<this.height?4*(u+l*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,l,c,h){return u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=this.width),h===void 0&&(h=this.height),this.context.clearRect(u,l,c,h),this.update()},setSize:function(u,l){return l===void 0&&(l=u),u===this.width&&l===this.height||(this.canvas.width=u,this.canvas.height=l,this._source.width=u,this._source.height=l,this._source.isPowerOf2=i(u,l),this.frames.__BASE.setSize(u,l,0,0),this.width=u,this.height=l,this.refresh()),this},destroy:function(){s.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});d.exports=a},function(d,w,e){var n=e(25),t=e(0),r=e(101),o=e(213),i=new t({initialize:function(s,a,u,l,c){c===void 0&&(c=!1);var h=s.manager.game;this.renderer=h.renderer,this.texture=s,this.source=a,this.image=a,this.compressionAlgorithm=null,this.resolution=1,this.width=u||a.naturalWidth||a.videoWidth||a.width||0,this.height=l||a.naturalHeight||a.videoHeight||a.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=a instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&a instanceof HTMLVideoElement,this.isRenderTexture=a.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&a instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.flipY=c,this.init(h)},init:function(s){this.renderer&&(this.renderer.gl?this.isCanvas?this.glTexture=this.renderer.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=this.renderer.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),s.config.antialias||this.setFilter(1)},setFilter:function(s){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,s),this.scaleMode=s},setFlipY:function(s){return s===void 0&&(s=!0),this.flipY=s,this},update:function(){var s=this.renderer.gl;s&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):s&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});d.exports=i},function(d,w,e){d.exports={AtlasXML:e(734),Canvas:e(735),Image:e(736),JSONArray:e(737),JSONHash:e(738),SpriteSheet:e(739),SpriteSheetFromAtlas:e(740),UnityYAML:e(741)}},function(d,w,e){var n=e(309),t=e(313),r=e(315),o={create:function(i){var s=i.config.audio,a=i.device.audio;return new(s&&s.noAudio||!a.webAudio&&!a.audioData?t:!a.webAudio||s&&s.disableWebAudio?n:r)(i)}};d.exports=o},function(d,w,e){var n=e(107),t=e(0),r=e(55),o=e(312),i=new t({Extends:n,initialize:function(s){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,s)},add:function(s,a){var u=new o(this,s,a);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var s,a,u,l=this;this.game.cache.audio.entries.each(function(c,h){for(var f=0;f<h.length;f++)if(h[f].dataset.locked==="true")return!(l.locked=!0);return!0}),this.locked&&(s=!1,a=function(){s=!0},u=function(){var c,h;s?s=!1:(document.body.removeEventListener("touchmove",a),document.body.removeEventListener("touchend",u),c=[],l.game.cache.audio.entries.each(function(f,g){for(var p=0;p<g.length;p++){var v=g[p];v.dataset.locked==="true"&&c.push(v)}return!0}),c.length!==0&&((h=c[c.length-1]).oncanplaythrough=function(){h.oncanplaythrough=null,c.forEach(function(f){f.dataset.locked="false"}),l.unlocked=!0},c.forEach(function(f){f.load()})))},this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(h){h.currentMarker===null&&h.duration===0&&(h.duration=h.tags[0].duration),h.totalDuration=h.tags[0].duration});this.lockedActionsQueue.length;){var c=this.lockedActionsQueue.shift();c.sound[c.prop].apply?c.sound[c.prop].apply(c.sound,c.value||[]):c.sound[c.prop]=c.value}},this),document.body.addEventListener("touchmove",a,!1),document.body.addEventListener("touchend",u,!1))},onBlur:function(){this.forEachActiveSound(function(s){s.isPlaying&&(this.onBlurPausedSounds.push(s),s.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(s){s.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(s,a,u){return s.tags[0].dataset.locked==="true"&&(this.lockedActionsQueue.push({sound:s,prop:a,value:u}),!0)},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this._mute},set:function(s){this._mute=s,this.forEachActiveSound(function(a){a.updateMute()}),this.emit(r.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this._volume},set:function(s){this._volume=s,this.forEachActiveSound(function(a){a.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,s)}}});d.exports=i},function(d,w,e){var n=e(58);d.exports=function(t,r,o,i,s){i===void 0&&(i=0),s===void 0&&(s=t.length);var a=[];if(n(t,i,s))for(var u=i;u<s;u++){var l=t[u];(!r||r&&o===void 0&&l.hasOwnProperty(r)||r&&o!==void 0&&l[r]===o)&&a.push(l)}return a}},function(d,w,e){var n=e(58);d.exports=function(t,r,o,i,s){if(i===void 0&&(i=0),s===void 0&&(s=t.length),n(t,i,s))for(var a=i;a<s;a++){var u=t[a];if(!r||r&&o===void 0&&u.hasOwnProperty(r)||r&&o!==void 0&&u[r]===o)return u}return null}},function(d,w,e){var n=e(108),t=e(0),r=e(55),o=e(12),i=new t({Extends:n,initialize:function(s,a,u){if(u===void 0&&(u={}),this.tags=s.game.cache.audio.get(a),!this.tags)throw new Error('There is no audio asset with key "'+a+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,s,a,u)},play:function(s,a){return!this.manager.isLocked(this,"play",[s,a])&&!!n.prototype.play.call(this,s,a)&&!!this.pickAndPlayAudioTag()&&(this.emit(r.PLAY,this),!0)},pause:function(){return!this.manager.isLocked(this,"pause")&&!(0<this.startTime)&&!!n.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),!0)},resume:function(){return!this.manager.isLocked(this,"resume")&&!(0<this.startTime)&&!!n.prototype.resume.call(this)&&!!this.pickAndPlayAudioTag()&&(this.emit(r.RESUME,this),!0)},stop:function(){return!this.manager.isLocked(this,"stop")&&!!n.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var s=this.currentConfig.seek,a=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+s;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),a===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*a,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var s=0;s<this.tags.length;s++){var a=this.tags[s];if(a.dataset.used==="false")return a.dataset.used="true",this.audio=a,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(c){c.key===this.key&&c.audio&&u.push(c)},this),u.sort(function(c,h){return c.loop===h.loop?h.seek/h.duration-c.seek/c.duration:c.loop?1:-1});var l=u[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,!(l.previousTime=0)},playCatchPromise:function(){var s=this.audio.play();s&&s.catch(function(a){console.warn(a)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(s,a){if(this.isPlaying)if(0<this.startTime)this.startTime<s-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,s-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var u=this.currentMarker?this.currentMarker.start:0,l=u+this.duration,c=this.audio.currentTime;if(this.currentConfig.loop)c>=l-this.manager.loopEndOffset?(this.audio.currentTime=u+Math.max(0,c-l),c=this.audio.currentTime):c<u&&(this.audio.currentTime+=u,c=this.audio.currentTime),c<this.previousTime&&this.emit(r.LOOPED,this);else if(l<=c)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(r.COMPLETE,this);this.previousTime=c}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(s){this.currentConfig.mute=s,this.manager.isLocked(this,"mute",s)||(this.updateMute(),this.emit(r.MUTE,this,s))}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.currentConfig.volume},set:function(s){this.currentConfig.volume=s,this.manager.isLocked(this,"volume",s)||(this.updateVolume(),this.emit(r.VOLUME,this,s))}},setVolume:function(s){return this.volume=s,this},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,this.manager.isLocked(this,r.RATE,s)||(this.calculateRate(),this.emit(r.RATE,this,s))}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,this.manager.isLocked(this,r.DETUNE,s)||(this.calculateRate(),this.emit(r.DETUNE,this,s))}},setDetune:function(s){return this.detune=s,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.isLocked(this,"seek",s)||0<this.startTime||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.isPlaying?(this.previousTime=s,this.audio.currentTime=s):this.isPaused&&(this.currentConfig.seek=s),this.emit(r.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,this.manager.isLocked(this,"loop",s)||(this.audio&&(this.audio.loop=s),this.emit(r.LOOP,this,s))}},setLoop:function(s){return this.loop=s,this}});d.exports=i},function(d,w,e){var n=e(107),t=e(0),r=e(6),o=e(314),i=e(1),s=new t({Extends:r,initialize:function(a){r.call(this),this.game=a,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(a,u){var l=new o(this,a,u);return this.sounds.push(l),l},addAudioSprite:function(a,u){var l=this.add(a,u);return l.spritemap={},l},play:function(a,u){return!1},playAudioSprite:function(a,u,l){return!1},remove:function(a){return n.prototype.remove.call(this,a)},removeByKey:function(a){return n.prototype.removeByKey.call(this,a)},pauseAll:i,resumeAll:i,stopAll:i,update:i,setRate:i,setDetune:i,setMute:i,setVolume:i,forEachActiveSound:function(a,u){n.prototype.forEachActiveSound.call(this,a,u)},destroy:function(){n.prototype.destroy.call(this)}});d.exports=s},function(d,w,e){function n(){return!1}function t(){return this}var r=e(108),o=e(0),i=e(6),s=e(16),a=new o({Extends:i,initialize:function(u,l,c){c===void 0&&(c={}),i.call(this),this.manager=u,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=s({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},c),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:function(){return null},play:n,pause:n,resume:n,stop:n,destroy:function(){r.prototype.destroy.call(this)},setMute:t,setVolume:t,setRate:t,setDetune:t,setSeek:t,setLoop:t});d.exports=a},function(d,w,e){var n=e(424),t=e(107),r=e(0),o=e(55),i=e(316),s=new r({Extends:t,initialize:function(a){this.context=this.createAudioContext(a),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),t.call(this,a),this.locked&&this.unlock()},createAudioContext:function(a){var u=a.config.audio;return u&&u.context?(u.context.resume(),u.context):new AudioContext},setAudioContext:function(a){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=a,this.masterMuteNode=a.createGain(),this.masterVolumeNode=a.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(a.destination),this.destination=this.masterMuteNode,this},add:function(a,u){var l=new i(this,a,u);return this.sounds.push(l),l},decodeAudio:function(a,u){for(var l=Array.isArray(a)?a:[{key:a,data:u}],c=this.game.cache.audio,h=l.length,f=0;f<l.length;f++){var g=l[f],p=g.key,v=g.data;typeof v=="string"&&(v=n(v));var T=function(M,A){c.add(M,A),this.emit(o.DECODED,M),--h===0&&this.emit(o.DECODED_ALL)}.bind(this,p),E=function(M,A){console.error("Error decoding audio: "+M+" - ",A?A.message:""),--h===0&&this.emit(o.DECODED_ALL)}.bind(this,p);this.context.decodeAudioData(v,T,E)}},unlock:function(){function a(){u.context&&u.context.resume().then(function(){l.removeEventListener("touchstart",a),l.removeEventListener("touchend",a),l.removeEventListener("click",a),l.removeEventListener("keydown",a),u.unlocked=!0},function(){l.removeEventListener("touchstart",a),l.removeEventListener("touchend",a),l.removeEventListener("click",a),l.removeEventListener("keydown",a)})}var u=this,l=document.body;l&&(l.addEventListener("touchstart",a,!1),l.addEventListener("touchend",a,!1),l.addEventListener("click",a,!1),l.addEventListener("keydown",a,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){this.locked||this.context.resume()},destroy:function(){var a;this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio&&this.game.config.audio.context?this.context.suspend():(a=this).context.close().then(function(){a.context=null}),t.prototype.destroy.call(this)},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(a){this.masterMuteNode.gain.setValueAtTime(a?0:1,0),this.emit(o.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(a){this.masterVolumeNode.gain.setValueAtTime(a,0),this.emit(o.GLOBAL_VOLUME,this,a)}}});d.exports=s},function(d,w,e){var n=e(108),t=e(0),r=e(55),o=new t({Extends:n,initialize:function(i,s,a){if(a===void 0&&(a={}),this.audioBuffer=i.game.cache.audio.get(s),!this.audioBuffer)throw new Error('There is no audio asset with key "'+s+'" in the audio cache');this.source=null,this.loopSource=null,this.muteNode=i.context.createGain(),this.volumeNode=i.context.createGain(),this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),this.volumeNode.connect(i.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,i,s,a)},play:function(i,s){return!!n.prototype.play.call(this,i,s)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&!!n.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),!0)},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&!!n.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit(r.RESUME,this),!0)},stop:function(){return!!n.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0)},createAndStartBufferSource:function(){var i=this.currentConfig.seek,s=this.currentConfig.delay,a=this.manager.context.currentTime+s,u=(this.currentMarker?this.currentMarker.start:0)+i,l=this.duration-i;this.playTime=a-i,this.startTime=a,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,a),Math.max(0,u),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var i=this.getLoopTime(),s=this.currentMarker?this.currentMarker.start:0,a=this.duration;this.loopTime=i,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,i),Math.max(0,s),Math.max(0,a))},createBufferSource:function(){var i=this,s=this.manager.context.createBufferSource();return s.buffer=this.audioBuffer,s.connect(this.muteNode),s.onended=function(a){a.target===i.source&&(i.currentConfig.loop?i.hasLooped=!0:i.hasEnded=!0)},s},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(i,s){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var i=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,i),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,i)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var i=0,s=0;s<this.rateUpdates.length;s++)i+=((s<this.rateUpdates.length-1?this.rateUpdates[s+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[s].time)*this.rateUpdates[s].rate;return i},getLoopTime:function(){for(var i=0,s=0;s<this.rateUpdates.length-1;s++)i+=(this.rateUpdates[s+1].time-this.rateUpdates[s].time)*this.rateUpdates[s].rate;var a=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+a.time+(this.duration-i)/a.rate},rate:{get:function(){return this.currentConfig.rate},set:function(i){this.currentConfig.rate=i,this.calculateRate(),this.emit(r.RATE,this,i)}},setRate:function(i){return this.rate=i,this},detune:{get:function(){return this.currentConfig.detune},set:function(i){this.currentConfig.detune=i,this.calculateRate(),this.emit(r.DETUNE,this,i)}},setDetune:function(i){return this.detune=i,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(i){this.currentConfig.mute=i,this.muteNode.gain.setValueAtTime(i?0:1,0),this.emit(r.MUTE,this,i)}},setMute:function(i){return this.mute=i,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(i){this.currentConfig.volume=i,this.volumeNode.gain.setValueAtTime(i,0),this.emit(r.VOLUME,this,i)}},setVolume:function(i){return this.volume=i,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(i){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(i=Math.min(Math.max(0,i),this.duration),this.currentConfig.seek=i,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,i))}},setSeek:function(i){return this.seek=i,this},loop:{get:function(){return this.currentConfig.loop},set:function(i){this.currentConfig.loop=i,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),i&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,i)}},setLoop:function(i){return this.loop=i,this}});d.exports=o},function(d,w,e){var n=e(20);d.exports=function(t,r){var o,i,s,a,u,l,c,h,f,g=n(r,"anims",null);return g===null||(typeof g=="string"?t.anims.play(g):typeof g=="object"&&(o=t.anims,i=n(g,"key",void 0),s=n(g,"startFrame",void 0),a=n(g,"delay",0),u=n(g,"repeat",0),l=n(g,"repeatDelay",0),c=n(g,"yoyo",!1),h=n(g,"play",!1),f=n(g,"delayedPlay",0),o.setDelay(a),o.setRepeat(u),o.setRepeatDelay(l),o.setYoyo(c),h?o.play(i,s):0<f?o.delayedPlay(f,i,s):o.load(i))),t}},function(d,w){d.exports=function(e){for(var n=e.length,t=e[0].length,r=new Array(t),o=0;o<t;o++){r[o]=new Array(n);for(var i=n-1;-1<i;i--)r[o][i]=e[i][o]}return r}},function(d,w){function e(r,o,i){var s=r[o];r[o]=r[i],r[i]=s}function n(r,o){return r<o?-1:o<r?1:0}var t=function(r,o,i,s,a){for(i===void 0&&(i=0),s===void 0&&(s=r.length-1),a===void 0&&(a=n);i<s;){var u,l,c,h,f,g,p;600<s-i&&(u=s-i+1,l=o-i+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),g=Math.max(i,Math.floor(o-l*h/u+f)),p=Math.min(s,Math.floor(o+(u-l)*h/u+f)),t(r,o,g,p,a));var v=r[o],T=i,E=s;for(e(r,i,o),0<a(r[s],v)&&e(r,i,s);T<E;){for(e(r,T,E),T++,E--;a(r[T],v)<0;)T++;for(;0<a(r[E],v);)E--}a(r[i],v)===0?e(r,i,E):e(r,++E,s),E<=o&&(i=E+1),o<=E&&(s=E-1)}};d.exports=t},function(d,w,e){var n=e(5),t=e(111);d.exports=function(r,o,i){var s,a=n(i,"max",0),u=n(i,"qty",1),l=n(i,"random",!1),c=n(i,"randomB",!1),h=n(i,"repeat",0),f=n(i,"yoyo",!1),g=[];c&&t(o),h===-1&&(h=a===0?0:(s=r.length*o.length*u,f&&(s*=2),Math.ceil(a/s)));for(var p=0;p<=h;p++){var v=function(T,E,M){for(var A=[],C=0;C<T.length;C++)for(var P=0;P<E.length;P++)for(var R=0;R<M;R++)A.push({a:T[C],b:E[P]});return A}(r,o,u);l&&t(v),g=g.concat(v),f&&(v.reverse(),g=g.concat(v))}return a&&g.splice(a),g}},function(d,w){d.exports=function(e,n){n===void 0&&(n=1);for(var t=null,r=0;r<n;r++)t=e.shift(),e.push(t);return t}},function(d,w){d.exports=function(e,n){n===void 0&&(n=1);for(var t=null,r=0;r<n;r++)t=e.pop(),e.unshift(t);return t}},function(d,w,e){var n=e(7);d.exports=function(t,r,o){o===void 0&&(o=new n);var i=Math.min(t.x,r.x),s=Math.min(t.y,r.y),a=Math.max(t.right,r.right)-i,u=Math.max(t.bottom,r.bottom)-s;return o.setTo(i,s,a,u)}},function(d,w,e){var n=e(161),t=e(80),r=e(10),o=e(3);d.exports=function(i,s,a){a===void 0&&(a=new o);var u=t(s,0,r.PI2);return n(i,u,a)}},function(d,w,e){var n=e(326),t=e(161),r=e(80),o=e(10);d.exports=function(i,s,a,u){u===void 0&&(u=[]),!s&&0<a&&(s=n(i)/a);for(var l=0;l<s;l++){var c=r(l/s,0,o.PI2);u.push(t(i,c))}return u}},function(d,w){d.exports=function(e){var n=e.width/2,t=e.height/2,r=Math.pow(n-t,2)/Math.pow(n+t,2);return Math.PI*(n+t)*(1+3*r/(10+Math.sqrt(4-3*r)))}},function(d,w,e){var n=e(160),t=e(36);d.exports=function(r,o,i,s,a,u,l){var c=o.commandBuffer,h=c.length,f=u||r.currentContext;if(h!==0&&t(r,f,o,s,a)){var g,p,v,T,E,M=0,A=0,C=0;f.beginPath();for(var P=0;P<h;++P)switch(c[P]){case n.ARC:f.arc(c[P+1],c[P+2],c[P+3],c[P+4],c[P+5],c[P+6]),P+=7;break;case n.LINE_STYLE:E=c[P+1],v=c[P+2],g=c[P+3],M=(16711680&v)>>>16,A=(65280&v)>>>8,C=255&v,f.strokeStyle="rgba("+M+","+A+","+C+","+g+")",f.lineWidth=E,P+=3;break;case n.FILL_STYLE:T=c[P+1],p=c[P+2],M=(16711680&T)>>>16,A=(65280&T)>>>8,C=255&T,f.fillStyle="rgba("+M+","+A+","+C+","+p+")",P+=2;break;case n.BEGIN_PATH:f.beginPath();break;case n.CLOSE_PATH:f.closePath();break;case n.FILL_PATH:l||f.fill();break;case n.STROKE_PATH:l||f.stroke();break;case n.FILL_RECT:l?f.rect(c[P+1],c[P+2],c[P+3],c[P+4]):f.fillRect(c[P+1],c[P+2],c[P+3],c[P+4]),P+=4;break;case n.FILL_TRIANGLE:f.beginPath(),f.moveTo(c[P+1],c[P+2]),f.lineTo(c[P+3],c[P+4]),f.lineTo(c[P+5],c[P+6]),f.closePath(),l||f.fill(),P+=6;break;case n.STROKE_TRIANGLE:f.beginPath(),f.moveTo(c[P+1],c[P+2]),f.lineTo(c[P+3],c[P+4]),f.lineTo(c[P+5],c[P+6]),f.closePath(),l||f.stroke(),P+=6;break;case n.LINE_TO:f.lineTo(c[P+1],c[P+2]),P+=2;break;case n.MOVE_TO:f.moveTo(c[P+1],c[P+2]),P+=2;break;case n.LINE_FX_TO:f.lineTo(c[P+1],c[P+2]),P+=5;break;case n.MOVE_FX_TO:f.moveTo(c[P+1],c[P+2]),P+=5;break;case n.SAVE:f.save();break;case n.RESTORE:f.restore();break;case n.TRANSLATE:f.translate(c[P+1],c[P+2]),P+=2;break;case n.SCALE:f.scale(c[P+1],c[P+2]),P+=2;break;case n.ROTATE:f.rotate(c[P+1]),P+=1;break;case n.GRADIENT_FILL_STYLE:P+=5;break;case n.GRADIENT_LINE_STYLE:P+=6;break;case n.SET_TEXTURE:P+=2}f.restore()}}},function(d,w,e){var n=e(0),t=e(7),r=e(61),o=e(815),i=new n({Extends:r,Mixins:[o],initialize:function(s,a,u,l,c,h,f){a===void 0&&(a=0),u===void 0&&(u=0),l===void 0&&(l=128),c===void 0&&(c=128),r.call(this,s,"Rectangle",new t(0,0,l,c)),this.setPosition(a,u),this.setSize(l,c),h!==void 0&&this.setFillStyle(h,f),this.updateDisplayOrigin(),this.updateData()},updateData:function(){var s=[],a=this.geom,u=this._tempLine;return a.getLineA(u),s.push(u.x1,u.y1,u.x2,u.y2),a.getLineB(u),s.push(u.x2,u.y2),a.getLineC(u),s.push(u.x2,u.y2),a.getLineD(u),s.push(u.x2,u.y2),this.pathData=s,this}});d.exports=i},function(d,w){d.exports=function(e,n,t){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:n,hitAreaCallback:t,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(d,w,e){var n=new(e(0))({initialize:function(t,r){this.pad=t,this.events=t.events,this.index=r,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});d.exports=n},function(d,w,e){var n=e(0),t=e(163),r=new n({initialize:function(o,i){this.pad=o,this.events=o.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var i=this.pad,s=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(t.BUTTON_DOWN,i,this,o),this.pad.emit(t.GAMEPAD_BUTTON_DOWN,s,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(t.BUTTON_UP,i,this,o),this.pad.emit(t.GAMEPAD_BUTTON_UP,s,o,this))},destroy:function(){this.pad=null,this.events=null}});d.exports=r},function(d,w,e){var n=e(330),t=e(331),r=e(0),o=e(6),i=e(4),s=new r({Extends:o,initialize:function(a,u){o.call(this),this.manager=a,this.pad=u,this.id=u.id,this.index=u.index;for(var l=[],c=0;c<u.buttons.length;c++)l.push(new t(this,c));this.buttons=l;for(var h=[],c=0;c<u.axes.length;c++)h.push(new n(this,c));this.axes=h,this.vibration=u.vibrationActuator;var f={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:f,this._LCRight=l[15]?l[15]:f,this._LCTop=l[12]?l[12]:f,this._LCBottom=l[13]?l[13]:f,this._RCLeft=l[2]?l[2]:f,this._RCRight=l[1]?l[1]:f,this._RCTop=l[3]?l[3]:f,this._RCBottom=l[0]?l[0]:f,this._FBLeftTop=l[4]?l[4]:f,this._FBLeftBottom=l[6]?l[6]:f,this._FBRightTop=l[5]?l[5]:f,this._FBRightBottom=l[7]?l[7]:f;var g={value:0};this._HAxisLeft=h[0]?h[0]:g,this._VAxisLeft=h[1]?h[1]:g,this._HAxisRight=h[2]?h[2]:g,this._VAxisRight=h[3]?h[3]:g,this.leftStick=new i,this.rightStick=new i},getAxisTotal:function(){return this.axes.length},getAxisValue:function(a){return this.axes[a].getValue()},setAxisThreshold:function(a){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=a},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(a){return this.buttons[a].value},isButtonDown:function(a){return this.buttons[a].pressed},update:function(a){for(var u=this.buttons,l=a.buttons,g=u.length,c=0;c<g;c++)u[c].update(l[c].value);var h=this.axes,f=a.axes,g=h.length;for(c=0;c<g;c++)h[c].update(f[c]);2<=g&&(this.leftStick.set(h[0].getValue(),h[1].getValue()),4<=g&&this.rightStick.set(h[2].getValue(),h[3].getValue()))},destroy:function(){var a;for(this.removeAllListeners(),this.manager=null,this.pad=null,a=0;a<this.buttons.length;a++)this.buttons[a].destroy();for(a=0;a<this.axes.length;a++)this.axes[a].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});d.exports=s},function(d,w,e){var n=e(164),t=e(80),r=e(10),o=e(3);d.exports=function(i,s,a){a===void 0&&(a=new o);var u=t(s,0,r.PI2);return n(i,u,a)}},function(d,w,e){var n=e(335),t=e(164),r=e(80),o=e(10);d.exports=function(i,s,a,u){u===void 0&&(u=[]),!s&&0<a&&(s=n(i)/a);for(var l=0;l<s;l++){var c=r(l/s,0,o.PI2);u.push(t(i,c))}return u}},function(d,w){d.exports=function(e){return Math.PI*e.radius*2}},function(d,w,e){var n=e(3),t=e(47);d.exports=function(r,o,i){i===void 0&&(i=new n);var s=r.getLineA(),a=r.getLineB(),u=r.getLineC();if(o<=0||1<=o)return i.x=s.x1,i.y=s.y1,i;var l=t(s),c=t(a),h=t(u),f=(l+c+h)*o,g=0;return f<l?(g=f/l,i.x=s.x1+(s.x2-s.x1)*g,i.y=s.y1+(s.y2-s.y1)*g):l+c<f?(g=(f-=l+c)/h,i.x=u.x1+(u.x2-u.x1)*g,i.y=u.y1+(u.y2-u.y1)*g):(g=(f-=l)/c,i.x=a.x1+(a.x2-a.x1)*g,i.y=a.y1+(a.y2-a.y1)*g),i}},function(d,w,e){var n=e(47),t=e(3);d.exports=function(r,o,i,s){s===void 0&&(s=[]);var a=r.getLineA(),u=r.getLineB(),l=r.getLineC(),c=n(a),h=n(u),f=n(l),g=c+h+f;!o&&0<i&&(o=g/i);for(var p=0;p<o;p++){var v=g*(p/o),T=0,E=new t;v<c?(T=v/c,E.x=a.x1+(a.x2-a.x1)*T,E.y=a.y1+(a.y2-a.y1)*T):c+h<v?(T=(v-=c+h)/f,E.x=l.x1+(l.x2-l.x1)*T,E.y=l.y1+(l.y2-l.y1)*T):(T=(v-=c)/h,E.x=u.x1+(u.x2-u.x1)*T,E.y=u.y1+(u.y2-u.y1)*T),s.push(E)}return s}},function(d,w,e){var n=e(0),t=e(6),r=e(115),o=new n({Extends:t,initialize:function(i,s){t.call(this),this.plugin=i,this.keyCode=s,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(i){return this.emitOnRepeat=i,this},onDown:function(i){this.originalEvent=i,this.enabled&&(this.altKey=i.altKey,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.location=i.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,i):(this.isDown=!0,this.isUp=!1,this.timeDown=i.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,i)))},onUp:function(i){this.originalEvent=i,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=i.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,i))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});d.exports=o},function(d,w,e){var n=e(0),t=e(115),r=e(2),o=e(865),i=e(867),s=new n({initialize:function(a,u,l){if(l===void 0&&(l={}),u.length<2)return!1;this.manager=a,this.enabled=!0,this.keyCodes=[];for(var c=0;c<u.length;c++){var h=u[c];typeof h=="string"?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):typeof h=="number"?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(l,"resetOnWrongKey",!0),this.maxKeyDelay=r(l,"maxKeyDelay",0),this.resetOnMatch=r(l,"resetOnMatch",!1),this.deleteOnMatch=r(l,"deleteOnMatch",!1);var f=this;this.onKeyDown=function(g){!f.matched&&f.enabled&&o(g,f)&&(f.manager.emit(t.COMBO_MATCH,f,g),f.resetOnMatch?i(f):f.deleteOnMatch&&f.destroy())},this.manager.on(t.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(t.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});d.exports=s},function(d,w,e){var n=e(167);d.exports=function(t,r){var o=n(r,t.xhrSettings),i=new XMLHttpRequest;if(i.open("GET",t.src,o.async,o.user,o.password),i.responseType=t.xhrSettings.responseType,i.timeout=o.timeout,o.headers)for(var s in o.headers)i.setRequestHeader(s,o.headers[s]);return o.header&&o.headerValue&&i.setRequestHeader(o.header,o.headerValue),o.requestedWith&&i.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&i.overrideMimeType(o.overrideMimeType),o.withCredentials&&(i.withCredentials=!0),i.onload=t.onLoad.bind(t,i),i.onerror=t.onError.bind(t,i),i.onprogress=t.onProgress.bind(t),i.send(),i}},function(d,w,e){var n=e(0),t=e(24),r=e(26),o=e(11),i=e(2),s=e(9),a=e(293),u=new n({Extends:r,initialize:function(l,c,h,f){var g,p="xml";s(c)&&(c=i(g=c,"key"),h=i(g,"url"),f=i(g,"xhrSettings"),p=i(g,"extension",p));var v={type:"xml",cache:l.cacheManager.xml,extension:p,responseType:"text",key:c,url:h,xhrSettings:f};r.call(this,l,v)},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=a(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(l,c,h){if(Array.isArray(l))for(var f=0;f<l.length;f++)this.addFile(new u(this,l[f]));else this.addFile(new u(this,l,c,h));return this}),d.exports=u},function(d,w,e){var n=e(343),t=e(117),r=e(0),o=e(37),i=e(344),s=e(347),a=new r({initialize:function(u){this.world=u,this.scene=u.scene,this.sys=u.scene.sys},collider:function(u,l,c,h,f){return this.world.addCollider(u,l,c,h,f)},overlap:function(u,l,c,h,f){return this.world.addOverlap(u,l,c,h,f)},existing:function(u,l){var c=l?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(u,c),u},staticImage:function(u,l,c,h){var f=new n(this.scene,u,l,c,h);return this.sys.displayList.add(f),this.world.enableBody(f,o.STATIC_BODY),f},image:function(u,l,c,h){var f=new n(this.scene,u,l,c,h);return this.sys.displayList.add(f),this.world.enableBody(f,o.DYNAMIC_BODY),f},staticSprite:function(u,l,c,h){var f=new t(this.scene,u,l,c,h);return this.sys.displayList.add(f),this.sys.updateList.add(f),this.world.enableBody(f,o.STATIC_BODY),f},sprite:function(u,l,c,h){var f=new t(this.scene,u,l,c,h);return this.sys.displayList.add(f),this.sys.updateList.add(f),this.world.enableBody(f,o.DYNAMIC_BODY),f},staticGroup:function(u,l){return this.sys.updateList.add(new s(this.world,this.world.scene,u,l))},group:function(u,l){return this.sys.updateList.add(new i(this.world,this.world.scene,u,l))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});d.exports=a},function(d,w,e){var n=e(0),t=e(168),r=e(112),o=new n({Extends:r,Mixins:[t.Acceleration,t.Angular,t.Bounce,t.Debug,t.Drag,t.Enable,t.Friction,t.Gravity,t.Immovable,t.Mass,t.Size,t.Velocity],initialize:function(i,s,a,u,l){r.call(this,i,s,a,u,l),this.body=null}});d.exports=o},function(d,w,e){var n=e(117),t=e(0),r=e(37),o=e(2),i=e(134),s=e(9),a=new t({Extends:i,initialize:function(u,l,c,h){var f;c||h?s(c)?(h=c,c=null,h.internalCreateCallback=this.createCallbackHandler,h.internalRemoveCallback=this.removeCallbackHandler):Array.isArray(c)&&s(c[0])?(h=c[0],f=this,c.forEach(function(g){g.internalCreateCallback=f.createCallbackHandler,g.internalRemoveCallback=f.removeCallbackHandler}),c=null):h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=u,h.classType=o(h,"classType",n),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(h,"collideWorldBounds",!1),setBoundsRectangle:o(h,"customBoundsRectangle",null),setAccelerationX:o(h,"accelerationX",0),setAccelerationY:o(h,"accelerationY",0),setAllowDrag:o(h,"allowDrag",!0),setAllowGravity:o(h,"allowGravity",!0),setAllowRotation:o(h,"allowRotation",!0),setBounceX:o(h,"bounceX",0),setBounceY:o(h,"bounceY",0),setDragX:o(h,"dragX",0),setDragY:o(h,"dragY",0),setEnable:o(h,"enable",!0),setGravityX:o(h,"gravityX",0),setGravityY:o(h,"gravityY",0),setFrictionX:o(h,"frictionX",0),setFrictionY:o(h,"frictionY",0),setVelocityX:o(h,"velocityX",0),setVelocityY:o(h,"velocityY",0),setAngularVelocity:o(h,"angularVelocity",0),setAngularAcceleration:o(h,"angularAcceleration",0),setAngularDrag:o(h,"angularDrag",0),setMass:o(h,"mass",1),setImmovable:o(h,"immovable",!1)},i.call(this,l,c,h),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.DYNAMIC_BODY);var l=u.body;for(var c in this.defaults)l[c](this.defaults[c])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,l,c){c===void 0&&(c=0);for(var h=this.getChildren(),f=0;f<h.length;f++)h[f].body.velocity.set(u+f*c,l+f*c);return this},setVelocityX:function(u,l){l===void 0&&(l=0);for(var c=this.getChildren(),h=0;h<c.length;h++)c[h].body.velocity.x=u+h*l;return this},setVelocityY:function(u,l){l===void 0&&(l=0);for(var c=this.getChildren(),h=0;h<c.length;h++)c[h].body.velocity.y=u+h*l;return this}});d.exports=a},function(d,w,e){var n=e(95),t=e(3);d.exports=function(r,o,i,s){if(s===void 0&&(s=[]),!o&&!i)return s;o?i=Math.round(n(r)/o):o=n(r)/i;for(var a=r.x,u=r.y,l=0,c=0;c<i;c++)switch(s.push(new t(a,u)),l){case 0:(a+=o)>=r.right&&(l=1,u+=a-r.right,a=r.right);break;case 1:(u+=o)>=r.bottom&&(l=2,a-=u-r.bottom,u=r.bottom);break;case 2:(a-=o)<=r.left&&(l=3,u-=r.left-a,a=r.left);break;case 3:(u-=o)<=r.top&&(l=0,u=r.top)}return s}},function(d,w){d.exports=function(e,n,t){n===void 0&&(n=1),t===void 0&&(t=[]);var r=Math.round(e.x1),o=Math.round(e.y1),i=Math.round(e.x2),s=Math.round(e.y2),a=Math.abs(i-r),u=Math.abs(s-o),l=r<i?1:-1,c=o<s?1:-1,h=a-u;t.push({x:r,y:o});for(var f=1;r!==i||o!==s;){var g=h<<1;-u<g&&(h-=u,r+=l),g<a&&(h+=a,o+=c),f%n==0&&t.push({x:r,y:o}),f++}return t}},function(d,w,e){var n=e(117),t=e(0),r=e(37),o=e(2),i=e(134),s=e(9),a=new t({Extends:i,initialize:function(u,l,c,h){c||h?s(c)?(h=c,c=null,h.internalCreateCallback=this.createCallbackHandler,h.internalRemoveCallback=this.removeCallbackHandler,h.createMultipleCallback=this.createMultipleCallbackHandler,h.classType=o(h,"classType",n)):Array.isArray(c)&&s(c[0])?(h=c,c=null,h.forEach(function(f){f.internalCreateCallback=this.createCallbackHandler,f.internalRemoveCallback=this.removeCallbackHandler,f.createMultipleCallback=this.createMultipleCallbackHandler,f.classType=o(f,"classType",n)})):h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n},this.world=u,this.physicsType=r.STATIC_BODY,i.call(this,l,c,h),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,l=0;l<u.length;l++)u[l].body.reset();return this}});d.exports=a},function(d,w){d.exports=function(e,n,t,r,o,i,s){i===void 0&&(i=!0),s===void 0&&(s=!1);var a,u,l,c=[],h=[],f=e.treeMinMax;return f.minX=n,f.minY=t,f.maxX=n+r,f.maxY=t+o,s&&(h=e.staticTree.search(f)),i&&e.useTree?c=e.tree.search(f):i&&(a=e.bodies,u={position:{x:n,y:t},left:n,top:t,right:n+r,bottom:t+o,isCircle:!1},l=e.intersects,a.iterate(function(g){l(g,u)&&c.push(g)})),h.concat(c)}},function(d,w,e){var n=e(261),t=e(350),r=e(12),o=e(0),i=e(351),s=e(37),a=e(54),u=e(6),l=e(171),c=e(96),h=e(265),f=e(266),g=e(352),p=e(353),v=e(5),T=e(10),E=e(209),M=e(952),A=e(7),C=e(452),P=e(953),R=e(958),D=e(959),I=e(133),W=e(355),G=e(354),Y=e(27),j=e(4),ee=e(57),te=new o({Extends:u,initialize:function(F,U){u.call(this),this.scene=F,this.bodies=new I,this.staticBodies=new I,this.pendingDestroy=new I,this.colliders=new E,this.gravity=new j(v(U,"gravity.x",0),v(U,"gravity.y",0)),this.bounds=new A(v(U,"x",0),v(U,"y",0),v(U,"width",F.sys.scale.width),v(U,"height",F.sys.scale.height)),this.checkCollision={up:v(U,"checkCollision.up",!0),down:v(U,"checkCollision.down",!0),left:v(U,"checkCollision.left",!0),right:v(U,"checkCollision.right",!0)},this.fps=v(U,"fps",60),this.fixedStep=!0,this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=v(U,"timeScale",1),this.OVERLAP_BIAS=v(U,"overlapBias",4),this.TILE_BIAS=v(U,"tileBias",16),this.forceX=v(U,"forceX",!1),this.isPaused=v(U,"isPaused",!1),this._total=0,this.drawDebug=v(U,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:v(U,"debugShowBody",!0),debugShowStaticBody:v(U,"debugShowStaticBody",!0),debugShowVelocity:v(U,"debugShowVelocity",!0),bodyDebugColor:v(U,"debugBodyColor",16711935),staticBodyDebugColor:v(U,"debugStaticBodyColor",255),velocityDebugColor:v(U,"debugVelocityColor",65280)},this.maxEntries=v(U,"maxEntries",16),this.useTree=v(U,"useTree",!0),this.tree=new C(this.maxEntries),this.staticTree=new C(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new Y,this._tempMatrix2=new Y,this.drawDebug&&this.createDebugGraphic()},enable:function(F,U){U===void 0&&(U=s.DYNAMIC_BODY),Array.isArray(F)||(F=[F]);for(var K=0;K<F.length;K++){var oe=F[K];if(oe.isParent)for(var ae=oe.getChildren(),ce=0;ce<ae.length;ce++){var re=ae[ce];re.isParent?this.enable(re,U):this.enableBody(re,U)}else this.enableBody(oe,U)}},enableBody:function(F,U){return U===void 0&&(U=s.DYNAMIC_BODY),F.body||(U===s.DYNAMIC_BODY?F.body=new t(this,F):U===s.STATIC_BODY&&(F.body=new W(this,F))),this.add(F.body),F},add:function(F){return F.physicsType===s.DYNAMIC_BODY?this.bodies.set(F):F.physicsType===s.STATIC_BODY&&(this.staticBodies.set(F),this.staticTree.insert(F)),F.enable=!0,F},disable:function(F){Array.isArray(F)||(F=[F]);for(var U=0;U<F.length;U++){var K=F[U];if(K.isParent)for(var oe=K.getChildren(),ae=0;ae<oe.length;ae++){var ce=oe[ae];ce.isParent?this.disable(ce):this.disableBody(ce.body)}else this.disableBody(K.body)}},disableBody:function(F){this.remove(F),F.enable=!1},remove:function(F){F.physicsType===s.DYNAMIC_BODY?(this.tree.remove(F),this.bodies.delete(F)):F.physicsType===s.STATIC_BODY&&(this.staticBodies.delete(F),this.staticTree.remove(F))},createDebugGraphic:function(){var F=this.scene.sys.add.graphics({x:0,y:0});return F.setDepth(Number.MAX_VALUE),this.debugGraphic=F,this.drawDebug=!0,F},setBounds:function(F,U,K,oe,ae,ce,re,ve){return this.bounds.setTo(F,U,K,oe),ae!==void 0&&this.setBoundsCollision(ae,ce,re,ve),this},setBoundsCollision:function(F,U,K,oe){return F===void 0&&(F=!0),U===void 0&&(U=!0),K===void 0&&(K=!0),oe===void 0&&(oe=!0),this.checkCollision.left=F,this.checkCollision.right=U,this.checkCollision.up=K,this.checkCollision.down=oe,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(F,U,K,oe,ae){K===void 0&&(K=null),oe===void 0&&(oe=null),ae===void 0&&(ae=K);var ce=new i(this,!1,F,U,K,oe,ae);return this.colliders.add(ce),ce},addOverlap:function(F,U,K,oe,ae){K===void 0&&(K=null),oe===void 0&&(oe=null),ae===void 0&&(ae=K);var ce=new i(this,!0,F,U,K,oe,ae);return this.colliders.add(ce),ce},removeCollider:function(F){return this.colliders.remove(F),this},setFPS:function(F){return this.fps=F,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(F,U){if(!this.isPaused&&this.bodies.size!==0){var K,oe=this._frameTime,ae=this._frameTimeMS*this.timeScale;this._elapsed+=U;var ce=this.bodies.entries,re=this._elapsed>=ae;for(this.fixedStep||(oe=.001*U,re=!0,this._elapsed=0),Se=0;Se<ce.length;Se++)(K=ce[Se]).enable&&K.preUpdate(re,oe);if(re){this._elapsed-=ae,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(ce));for(var ve=this.colliders.update(),Se=0;Se<ve.length;Se++){var de=ve[Se];de.active&&de.update()}this.emit(l.WORLD_STEP)}for(;this._elapsed>=ae;)this._elapsed-=ae,this.step(oe)}},step:function(F){for(var U,K=this.bodies.entries,oe=K.length,ae=0;ae<oe;ae++)(U=K[ae]).enable&&U.update(F);this.useTree&&(this.tree.clear(),this.tree.load(K));var ce=this.colliders.update();for(ae=0;ae<ce.length;ae++){var re=ce[ae];re.active&&re.update()}this.emit(l.WORLD_STEP),this.stepsLastFrame++},postUpdate:function(){var F,U=(re=this.bodies.entries).length,K=this.bodies,oe=this.staticBodies;if(this.stepsLastFrame)for(de=this.stepsLastFrame=0;de<U;de++)(F=re[de]).enable&&F.postUpdate();if(this.drawDebug){var ae=this.debugGraphic;for(ae.clear(),de=0;de<U;de++)(F=re[de]).willDrawDebug()&&F.drawDebug(ae);for(U=(re=oe.entries).length,de=0;de<U;de++)(F=re[de]).willDrawDebug()&&F.drawDebug(ae)}var ce=this.pendingDestroy;if(0<ce.size){for(var re,ve=this.tree,Se=this.staticTree,U=(re=ce.entries).length,de=0;de<U;de++)(F=re[de]).physicsType===s.DYNAMIC_BODY?(ve.remove(F),K.delete(F)):F.physicsType===s.STATIC_BODY&&(Se.remove(F),oe.delete(F)),F.world=void 0,F.gameObject=void 0;ce.clear()}},updateMotion:function(F,U){F.allowRotation&&this.computeAngularVelocity(F,U),this.computeVelocity(F,U)},computeAngularVelocity:function(F,U){var K=F.angularVelocity,oe=F.angularAcceleration,ae=F.angularDrag,ce=F.maxAngular;oe?K+=oe*U:F.allowDrag&&ae&&(h(K-(ae*=U),0,.1)?K-=ae:f(K+ae,0,.1)?K+=ae:K=0);var re=(K=r(K,-ce,ce))-F.angularVelocity;F.angularVelocity+=re,F.rotation+=F.angularVelocity*U},computeVelocity:function(F,U){var K=F.velocity.x,oe=F.acceleration.x,ae=F.drag.x,ce=F.maxVelocity.x,re=F.velocity.y,ve=F.acceleration.y,Se=F.drag.y,de=F.maxVelocity.y,pe=F.speed,Ae=F.maxSpeed,Oe=F.allowDrag,Fe=F.useDamping;F.allowGravity&&(K+=(this.gravity.x+F.gravity.x)*U,re+=(this.gravity.y+F.gravity.y)*U),oe?K+=oe*U:Oe&&ae&&(Fe?(K*=ae,pe=Math.sqrt(K*K+re*re),c(pe,0,.001)&&(K=0)):h(K-(ae*=U),0,.01)?K-=ae:f(K+ae,0,.01)?K+=ae:K=0),ve?re+=ve*U:Oe&&Se&&(Fe?(re*=Se,pe=Math.sqrt(K*K+re*re),c(pe,0,.001)&&(re=0)):h(re-(Se*=U),0,.01)?re-=Se:f(re+Se,0,.01)?re+=Se:re=0),K=r(K,-ce,ce),re=r(re,-de,de),F.velocity.set(K,re),-1<Ae&&Ae<pe&&(F.velocity.normalize().scale(Ae),pe=Ae),F.speed=pe},separate:function(F,U,K,oe,ae,ce){if(!ce&&!F.enable||!U.enable||F.checkCollision.none||U.checkCollision.none||!this.intersects(F,U)||K&&K.call(oe,F.gameObject,U.gameObject)===!1)return!1;if(F.isCircle&&U.isCircle)return this.separateCircle(F,U,ae);if(F.isCircle!==U.isCircle){var re=F.isCircle?U:F,ve=F.isCircle?F:U,Se=re.x,de=re.y,pe=re.right,Ae=re.bottom,Oe=ve.center;if((Oe.y<de||Oe.y>Ae)&&(Oe.x<Se||Oe.x>pe))return this.separateCircle(F,U,ae)}var Fe=!1,Ve=!1;ae?(Fe=R(F,U,ae,this.OVERLAP_BIAS),Ve=D(F,U,ae,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+F.gravity.y)<Math.abs(this.gravity.x+F.gravity.x)?(Fe=R(F,U,ae,this.OVERLAP_BIAS),this.intersects(F,U)&&(Ve=D(F,U,ae,this.OVERLAP_BIAS))):(Ve=D(F,U,ae,this.OVERLAP_BIAS),this.intersects(F,U)&&(Fe=R(F,U,ae,this.OVERLAP_BIAS)));var ze=Fe||Ve;return ze&&(ae?(F.onOverlap||U.onOverlap)&&this.emit(l.OVERLAP,F.gameObject,U.gameObject,F,U):(F.onCollide||U.onCollide)&&this.emit(l.COLLIDE,F.gameObject,U.gameObject,F,U)),ze},separateCircle:function(F,U,K,oe){F.updateCenter(),U.updateCenter(),g(F,U,!1,oe),p(F,U,!1,oe);var ae,ce,re=0;if(F.isCircle!==U.isCircle?(ae={x:U.isCircle?F.position.x:U.position.x,y:U.isCircle?F.position.y:U.position.y,right:U.isCircle?F.right:U.right,bottom:U.isCircle?F.bottom:U.bottom},(ce={x:F.isCircle?F.center.x:U.center.x,y:F.isCircle?F.center.y:U.center.y,radius:F.isCircle?F.halfWidth:U.halfWidth}).y<ae.y?ce.x<ae.x?re=a(ce.x,ce.y,ae.x,ae.y)-ce.radius:ae.right<ce.x&&(re=a(ce.x,ce.y,ae.right,ae.y)-ce.radius):ae.bottom<ce.y&&(ce.x<ae.x?re=a(ce.x,ce.y,ae.x,ae.bottom)-ce.radius:ae.right<ce.x&&(re=a(ce.x,ce.y,ae.right,ae.bottom)-ce.radius)),re*=-1):re=F.halfWidth+U.halfWidth-a(F.center.x,F.center.y,U.center.x,U.center.y),K||re===0||F.immovable&&U.immovable||F.customSeparateX||U.customSeparateX)return re!==0&&(F.onOverlap||U.onOverlap)&&this.emit(l.OVERLAP,F.gameObject,U.gameObject,F,U),re!==0;var ve=F.center.x-U.center.x,Se=F.center.y-U.center.y,de=Math.sqrt(Math.pow(ve,2)+Math.pow(Se,2)),pe=(U.center.x-F.center.x)/de||0,Ae=(U.center.y-F.center.y)/de||0,Oe=2*(F.velocity.x*pe+F.velocity.y*Ae-U.velocity.x*pe-U.velocity.y*Ae)/(F.mass+U.mass);(F.immovable||U.immovable)&&(Oe*=2),F.immovable||(F.velocity.x=F.velocity.x-Oe/F.mass*pe,F.velocity.y=F.velocity.y-Oe/F.mass*Ae),U.immovable||(U.velocity.x=U.velocity.x+Oe/U.mass*pe,U.velocity.y=U.velocity.y+Oe/U.mass*Ae),F.immovable||U.immovable||(re/=2);var Fe=n(F.center,U.center),Ve=(re+T.EPSILON)*Math.cos(Fe),ze=(re+T.EPSILON)*Math.sin(Fe);return F.immovable||(F.x-=Ve,F.y-=ze,F.updateCenter()),U.immovable||(U.x+=Ve,U.y+=ze,U.updateCenter()),F.velocity.x*=F.bounce.x,F.velocity.y*=F.bounce.y,U.velocity.x*=U.bounce.x,U.velocity.y*=U.bounce.y,(F.onCollide||U.onCollide)&&this.emit(l.COLLIDE,F.gameObject,U.gameObject,F,U),!0},intersects:function(F,U){return F!==U&&(F.isCircle||U.isCircle?F.isCircle?U.isCircle?a(F.center.x,F.center.y,U.center.x,U.center.y)<=F.halfWidth+U.halfWidth:this.circleBodyIntersects(F,U):this.circleBodyIntersects(U,F):!(F.right<=U.position.x||F.bottom<=U.position.y||F.position.x>=U.right||F.position.y>=U.bottom))},circleBodyIntersects:function(F,U){var K=r(F.center.x,U.left,U.right),oe=r(F.center.y,U.top,U.bottom);return(F.center.x-K)*(F.center.x-K)+(F.center.y-oe)*(F.center.y-oe)<=F.halfWidth*F.halfWidth},overlap:function(F,U,K,oe,ae){return K===void 0&&(K=null),oe===void 0&&(oe=null),ae===void 0&&(ae=K),this.collideObjects(F,U,K,oe,ae,!0)},collide:function(F,U,K,oe,ae){return K===void 0&&(K=null),oe===void 0&&(oe=null),ae===void 0&&(ae=K),this.collideObjects(F,U,K,oe,ae,!1)},collideObjects:function(F,U,K,oe,ae,ce){var re;F.isParent&&F.physicsType===void 0&&(F=F.children.entries),U&&U.isParent&&U.physicsType===void 0&&(U=U.children.entries);var ve=Array.isArray(F),Se=Array.isArray(U);if(this._total=0,ve||Se)if(!ve&&Se)for(re=0;re<U.length;re++)this.collideHandler(F,U[re],K,oe,ae,ce);else if(ve&&!Se)if(U)for(re=0;re<F.length;re++)this.collideHandler(F[re],U,K,oe,ae,ce);else for(re=0;re<F.length;re++)for(var de=F[re],pe=re+1;pe<F.length;pe++)re!==pe&&this.collideHandler(de,F[pe],K,oe,ae,ce);else for(re=0;re<F.length;re++)for(pe=0;pe<U.length;pe++)this.collideHandler(F[re],U[pe],K,oe,ae,ce);else this.collideHandler(F,U,K,oe,ae,ce);return 0<this._total},collideHandler:function(F,U,K,oe,ae,ce){if(U===void 0&&F.isParent)return this.collideGroupVsGroup(F,F,K,oe,ae,ce);if(!F||!U)return!1;if(F.body){if(U.body)return this.collideSpriteVsSprite(F,U,K,oe,ae,ce);if(U.isParent)return this.collideSpriteVsGroup(F,U,K,oe,ae,ce);if(U.isTilemap)return this.collideSpriteVsTilemapLayer(F,U,K,oe,ae,ce)}else if(F.isParent){if(U.body)return this.collideSpriteVsGroup(U,F,K,oe,ae,ce);if(U.isParent)return this.collideGroupVsGroup(F,U,K,oe,ae,ce);if(U.isTilemap)return this.collideGroupVsTilemapLayer(F,U,K,oe,ae,ce)}else if(F.isTilemap){if(U.body)return this.collideSpriteVsTilemapLayer(U,F,K,oe,ae,ce);if(U.isParent)return this.collideGroupVsTilemapLayer(U,F,K,oe,ae,ce)}},collideSpriteVsSprite:function(F,U,K,oe,ae,ce){return!(!F.body||!U.body)&&(this.separate(F.body,U.body,oe,ae,ce)&&(K&&K.call(ae,F,U),this._total++),!0)},collideSpriteVsGroup:function(F,U,K,oe,ae,ce){var re,ve=F.body;if(U.length!==0&&ve&&ve.enable&&!ve.checkCollision.none)if(this.useTree||U.physicsType===s.STATIC_BODY){var Se=this.treeMinMax;Se.minX=ve.left,Se.minY=ve.top,Se.maxX=ve.right,Se.maxY=ve.bottom;for(var de=U.physicsType===s.DYNAMIC_BODY?this.tree.search(Se):this.staticTree.search(Se),pe=de.length,Ae=0;Ae<pe;Ae++)ve!==(re=de[Ae])&&re.enable&&!re.checkCollision.none&&U.contains(re.gameObject)&&this.separate(ve,re,oe,ae,ce,!0)&&(K&&K.call(ae,ve.gameObject,re.gameObject),this._total++)}else{var Oe=U.getChildren(),Fe=U.children.entries.indexOf(F);for(pe=Oe.length,Ae=0;Ae<pe;Ae++)(re=Oe[Ae].body)&&Ae!==Fe&&re.enable&&this.separate(ve,re,oe,ae,ce)&&(K&&K.call(ae,ve.gameObject,re.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(F,U,K,oe,ae,ce){var re=F.getChildren();if(re.length===0)return!1;for(var ve=!1,Se=0;Se<re.length;Se++)re[Se].body&&this.collideSpriteVsTilemapLayer(re[Se],U,K,oe,ae,ce)&&(ve=!0);return ve},collideTiles:function(F,U,K,oe,ae){return!(!F.body.enable||U.length===0)&&this.collideSpriteVsTilesHandler(F,U,K,oe,ae,!1,!1)},overlapTiles:function(F,U,K,oe,ae){return!(!F.body.enable||U.length===0)&&this.collideSpriteVsTilesHandler(F,U,K,oe,ae,!0,!1)},collideSpriteVsTilemapLayer:function(F,U,K,oe,ae,ce){var re=F.body;if(!re.enable||re.checkCollision.none)return!1;var ve,Se=re.position.x,de=re.position.y,pe=re.width,Ae=re.height,Oe=U.layer;Oe.tileWidth>Oe.baseTileWidth&&(Se-=ve=(Oe.tileWidth-Oe.baseTileWidth)*U.scaleX,pe+=ve),Oe.tileHeight>Oe.baseTileHeight&&(Ae+=(Oe.tileHeight-Oe.baseTileHeight)*U.scaleY);var Fe=U.getTilesWithinWorldXY(Se,de,pe,Ae);return Fe.length!==0&&this.collideSpriteVsTilesHandler(F,Fe,K,oe,ae,ce,!0)},collideSpriteVsTilesHandler:function(F,U,K,oe,ae,ce,re){for(var ve,Se,de=F.body,pe={left:0,right:0,top:0,bottom:0},Ae=!1,Oe=0;Oe<U.length;Oe++)Se=(ve=U[Oe]).tilemapLayer,pe.left=Se.tileToWorldX(ve.x),pe.top=Se.tileToWorldY(ve.y),ve.baseHeight!==ve.height&&(pe.top-=(ve.height-ve.baseHeight)*Se.scaleY),pe.right=pe.left+ve.width*Se.scaleX,pe.bottom=pe.top+ve.height*Se.scaleY,G(pe,de)&&(!oe||oe.call(ae,F,ve))&&M(ve,F)&&(ce||P(Oe,de,ve,pe,Se,this.TILE_BIAS,re))&&(this._total++,Ae=!0,K&&K.call(ae,F,ve),ce&&de.onOverlap?this.emit(l.TILE_OVERLAP,F,ve,de):de.onCollide&&this.emit(l.TILE_COLLIDE,F,ve,de));return Ae},collideGroupVsGroup:function(F,U,K,oe,ae,ce){if(F.length!==0&&U.length!==0)for(var re=F.getChildren(),ve=0;ve<re.length;ve++)this.collideSpriteVsGroup(re[ve],U,K,oe,ae,ce)},wrap:function(F,U){F.body?this.wrapObject(F,U):F.getChildren?this.wrapArray(F.getChildren(),U):Array.isArray(F)?this.wrapArray(F,U):this.wrapObject(F,U)},wrapArray:function(F,U){for(var K=0;K<F.length;K++)this.wrapObject(F[K],U)},wrapObject:function(F,U){U===void 0&&(U=0),F.x=ee(F.x,this.bounds.left-U,this.bounds.right+U),F.y=ee(F.y,this.bounds.top-U,this.bounds.bottom+U)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});d.exports=te},function(d,w,e){var n=e(0),t=e(37),r=e(171),o=e(199),i=e(7),s=e(34),a=e(4),u=new n({initialize:function(l,c){var h=c.displayWidth?c.displayWidth:64,f=c.displayHeight?c.displayHeight:64;this.world=l,this.gameObject=c,this.transform={x:c.x,y:c.y,rotation:c.angle,scaleX:c.scaleX,scaleY:c.scaleY,displayOriginX:c.displayOriginX,displayOriginY:c.displayOriginY},this.debugShowBody=l.defaults.debugShowBody,this.debugShowVelocity=l.defaults.debugShowVelocity,this.debugBodyColor=l.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(c.x-c.scaleX*c.displayOriginX,c.y-c.scaleY*c.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=c.angle,this.preRotation=c.angle,this.width=h,this.height=f,this.sourceWidth=h,this.sourceHeight=f,c.frame&&(this.sourceWidth=c.frame.realWidth,this.sourceHeight=c.frame.realHeight),this.halfWidth=Math.abs(h/2),this.halfHeight=Math.abs(f/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new a,this.newVelocity=new a,this.deltaMax=new a,this.acceleration=new a,this.allowDrag=!0,this.drag=new a,this.allowGravity=!0,this.gravity=new a,this.bounce=new a,this.worldBounce=null,this.customBoundsRectangle=l.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new a(1e4,1e4),this.maxSpeed=-1,this.friction=new a(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=t.FACING_NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=t.DYNAMIC_BODY,this._sx=c.scaleX,this._sy=c.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new i},updateBounds:function(){var l,c=this.gameObject,h=this.transform;c.parentContainer?(l=c.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2),h.x=l.tx,h.y=l.ty,h.rotation=o(l.rotation),h.scaleX=l.scaleX,h.scaleY=l.scaleY):(h.x=c.x,h.y=c.y,h.rotation=c.angle,h.scaleX=c.scaleX,h.scaleY=c.scaleY),h.displayOriginX=c.displayOriginX,h.displayOriginY=c.displayOriginY;var f,g,p,v=!1;this.syncBounds?(f=c.getBounds(this._bounds),this.width=f.width,this.height=f.height,v=!0):(g=Math.abs(h.scaleX),p=Math.abs(h.scaleY),this._sx===g&&this._sy===p||(this.width=this.sourceWidth*g,this.height=this.sourceHeight*p,this._sx=g,this._sy=p,v=!0)),v&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var l=this.transform;this.position.x=l.x+l.scaleX*(this.offset.x-l.displayOriginX),this.position.y=l.y+l.scaleY*(this.offset.y-l.displayOriginY),this.updateCenter()},resetFlags:function(){var l=this.wasTouching,c=this.touching,h=this.blocked;l.none=c.none,l.up=c.up,l.down=c.down,l.left=c.left,l.right=c.right,c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1,h.none=!0,h.up=!1,h.down=!1,h.left=!1,h.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(l,c){l&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),l&&this.update(c)},update:function(l){var c,h;this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves&&(this.world.updateMotion(this,l),c=this.velocity.x,h=this.velocity.y,this.newVelocity.set(c*l,h*l),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(h,c),this.speed=Math.sqrt(c*c+h*h),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var l,c,h=this.position.x-this.prevFrame.x,f=this.position.y-this.prevFrame.y;this.moves&&((l=this.deltaMax.x)!==0&&h!==0&&(h<0&&h<-l?h=-l:0<h&&l<h&&(h=l)),(c=this.deltaMax.y)!==0&&f!==0&&(f<0&&f<-c?f=-c:0<f&&c<f&&(f=c)),this.gameObject.x+=h,this.gameObject.y+=f),h<0?this.facing=t.FACING_LEFT:0<h&&(this.facing=t.FACING_RIGHT),f<0?this.facing=t.FACING_UP:0<f&&(this.facing=t.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=h,this._ty=f},setBoundsRectangle:function(l){return this.customBoundsRectangle=l||this.world.bounds,this},checkWorldBounds:function(){var l=this.position,c=this.customBoundsRectangle,h=this.world.checkCollision,f=this.worldBounce?-this.worldBounce.x:-this.bounce.x,g=this.worldBounce?-this.worldBounce.y:-this.bounce.y,p=!1;return l.x<c.x&&h.left?(l.x=c.x,this.velocity.x*=f,p=this.blocked.left=!0):this.right>c.right&&h.right&&(l.x=c.right-this.width,this.velocity.x*=f,p=this.blocked.right=!0),l.y<c.y&&h.up?(l.y=c.y,this.velocity.y*=g,p=this.blocked.up=!0):this.bottom>c.bottom&&h.down&&(l.y=c.bottom-this.height,this.velocity.y*=g,p=this.blocked.down=!0),p&&(this.blocked.none=!1),p},setOffset:function(l,c){return c===void 0&&(c=l),this.offset.set(l,c),this.updateCenter(),this},setSize:function(l,c,h){h===void 0&&(h=!0);var f,g,p=this.gameObject;return!l&&p.frame&&(l=p.frame.realWidth),!c&&p.frame&&(c=p.frame.realHeight),this.sourceWidth=l,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),h&&p.getCenter&&(f=(p.width-l)/2,g=(p.height-c)/2,this.offset.set(f,g)),this.isCircle=!1,this.radius=0,this},setCircle:function(l,c,h){return c===void 0&&(c=this.offset.x),h===void 0&&(h=this.offset.y),0<l?(this.isCircle=!0,this.radius=l,this.sourceWidth=2*l,this.sourceHeight=2*l,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,h),this.updateCenter()):this.isCircle=!1,this},reset:function(l,c){this.stop();var h=this.gameObject;h.setPosition(l,c),h.getTopLeft?h.getTopLeft(this.position):this.position.set(l,c),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=h.angle,this.preRotation=h.angle,this.updateBounds(),this.updateCenter()},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,c){return this.isCircle?0<this.radius&&l>=this.left&&l<=this.right&&c>=this.top&&c<=this.bottom&&(this.center.x-l)*(this.center.x-l)+(this.center.y-c)*(this.center.y-c)<=this.radius*this.radius:s(this,l,c)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function(){return 0<this._dy?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(l){var c=this.position,h=c.x+this.halfWidth,f=c.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor),this.isCircle?l.strokeCircle(h,f,this.width/2):(this.checkCollision.up&&l.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&l.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&l.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&l.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(l.lineStyle(l.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),l.lineBetween(h,f,h+this.velocity.x/2,f+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(l,c,h){l===void 0&&(l=!0),this.collideWorldBounds=l;var f=c!==void 0,g=h!==void 0;return(f||g)&&(this.worldBounce||(this.worldBounce=new a),f&&(this.worldBounce.x=c),g&&(this.worldBounce.y=h)),this},setVelocity:function(l,c){return this.velocity.set(l,c),l=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(l*l+c*c),this},setVelocityX:function(l){this.velocity.x=l;var c=this.velocity.y;return this.speed=Math.sqrt(l*l+c*c),this},setVelocityY:function(l){this.velocity.y=l;var c=this.velocity.x;return this.speed=Math.sqrt(c*c+l*l),this},setMaxVelocity:function(l,c){return this.maxVelocity.set(l,c),this},setMaxSpeed:function(l){return this.maxSpeed=l,this},setBounce:function(l,c){return this.bounce.set(l,c),this},setBounceX:function(l){return this.bounce.x=l,this},setBounceY:function(l){return this.bounce.y=l,this},setAcceleration:function(l,c){return this.acceleration.set(l,c),this},setAccelerationX:function(l){return this.acceleration.x=l,this},setAccelerationY:function(l){return this.acceleration.y=l,this},setAllowDrag:function(l){return l===void 0&&(l=!0),this.allowDrag=l,this},setAllowGravity:function(l){return l===void 0&&(l=!0),this.allowGravity=l,this},setAllowRotation:function(l){return l===void 0&&(l=!0),this.allowRotation=l,this},setDrag:function(l,c){return this.drag.set(l,c),this},setDragX:function(l){return this.drag.x=l,this},setDragY:function(l){return this.drag.y=l,this},setGravity:function(l,c){return this.gravity.set(l,c),this},setGravityX:function(l){return this.gravity.x=l,this},setGravityY:function(l){return this.gravity.y=l,this},setFriction:function(l,c){return this.friction.set(l,c),this},setFrictionX:function(l){return this.friction.x=l,this},setFrictionY:function(l){return this.friction.y=l,this},setAngularVelocity:function(l){return this.angularVelocity=l,this},setAngularAcceleration:function(l){return this.angularAcceleration=l,this},setAngularDrag:function(l){return this.angularDrag=l,this},setMass:function(l){return this.mass=l,this},setImmovable:function(l){return l===void 0&&(l=!0),this.immovable=l,this},setEnable:function(l){return l===void 0&&(l=!0),this.enable=l,this},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});d.exports=u},function(d,w,e){var n=new(e(0))({initialize:function(t,r,o,i,s,a,u){this.world=t,this.name="",this.active=!0,this.overlapOnly=r,this.object1=o,this.object2=i,this.collideCallback=s,this.processCallback=a,this.callbackContext=u},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});d.exports=n},function(d,w,e){var n=e(37);d.exports=function(t,r,o,i){var s=0,a=t.deltaAbsX()+r.deltaAbsX()+i;return t._dx===0&&r._dx===0?(t.embedded=!0,r.embedded=!0):t._dx>r._dx?a<(s=t.right-r.x)&&!o||t.checkCollision.right===!1||r.checkCollision.left===!1?s=0:(t.touching.none=!1,t.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.right=!0),t.physicsType===n.STATIC_BODY&&(r.blocked.none=!1,r.blocked.left=!0)):t._dx<r._dx&&(a<-(s=t.x-r.width-r.x)&&!o||t.checkCollision.left===!1||r.checkCollision.right===!1?s=0:(t.touching.none=!1,t.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.left=!0),t.physicsType===n.STATIC_BODY&&(r.blocked.none=!1,r.blocked.right=!0))),t.overlapX=s,r.overlapX=s}},function(d,w,e){var n=e(37);d.exports=function(t,r,o,i){var s=0,a=t.deltaAbsY()+r.deltaAbsY()+i;return t._dy===0&&r._dy===0?(t.embedded=!0,r.embedded=!0):t._dy>r._dy?a<(s=t.bottom-r.y)&&!o||t.checkCollision.down===!1||r.checkCollision.up===!1?s=0:(t.touching.none=!1,t.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.down=!0),t.physicsType===n.STATIC_BODY&&(r.blocked.none=!1,r.blocked.up=!0)):t._dy<r._dy&&(a<-(s=t.y-r.bottom)&&!o||t.checkCollision.up===!1||r.checkCollision.down===!1?s=0:(t.touching.none=!1,t.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType===n.STATIC_BODY&&(t.blocked.none=!1,t.blocked.up=!0),t.physicsType===n.STATIC_BODY&&(r.blocked.none=!1,r.blocked.down=!0))),t.overlapY=s,r.overlapY=s}},function(d,w){d.exports=function(e,n){return!(n.right<=e.left||n.bottom<=e.top||n.position.x>=e.right||n.position.y>=e.bottom)}},function(d,w,e){var n=e(50),t=e(0),r=e(37),o=e(34),i=e(4),s=new t({initialize:function(a,u){var l=u.displayWidth?u.displayWidth:64,c=u.displayHeight?u.displayHeight:64;this.world=a,this.gameObject=u,this.debugShowBody=a.defaults.debugShowStaticBody,this.debugBodyColor=a.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new i,this.position=new i(u.x-l*u.originX,u.y-c*u.originY),this.width=l,this.height=c,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new i(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=i.ZERO,this.allowGravity=!1,this.gravity=i.ZERO,this.bounce=i.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(a,u){return a&&a!==this.gameObject&&(this.gameObject.body=null,(a.body=this).gameObject=a),u&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var a=this.gameObject;return a.getTopLeft(this.position),this.width=a.displayWidth,this.height=a.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(a,u){return u===void 0&&(u=a),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a,u),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(a,u,l){l===void 0&&(l=!0);var c,h,f=this.gameObject;return!a&&f.frame&&(a=f.frame.realWidth),!u&&f.frame&&(u=f.frame.realHeight),this.world.staticTree.remove(this),this.width=a,this.height=u,this.halfWidth=Math.floor(a/2),this.halfHeight=Math.floor(u/2),l&&f.getCenter&&(c=f.displayWidth/2,h=f.displayHeight/2,this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(c-this.halfWidth,h-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y),this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(a,u,l){return u===void 0&&(u=this.offset.x),l===void 0&&(l=this.offset.y),0<a?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=a,this.width=2*a,this.height=2*a,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,l),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(a,u){var l=this.gameObject;a===void 0&&(a=l.x),u===void 0&&(u=l.y),this.world.staticTree.remove(this),l.setPosition(a,u),l.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,u){return(this.isCircle?n:o)(this,a,u)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(a){var u=this.position,l=u.x+this.halfWidth,c=u.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?a.strokeCircle(l,c,this.width/2):a.strokeRect(u.x,u.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(a){return a<=0&&(a=.1),this.mass=a,this},x:{get:function(){return this.position.x},set:function(a){this.world.staticTree.remove(this),this.position.x=a,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(a){this.world.staticTree.remove(this),this.position.y=a,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});d.exports=s},function(d,w,e){var n=e(17);d.exports=function(t,r,o,i,s,a,u){for(var l=n(o,i,s,a,null,u),c=0;c<l.length;c++)l[c]&&l[c].index===t&&(l[c].index=r)}},function(d,w,e){d.exports={CircleToCircle:e(169),CircleToRectangle:e(170),GetCircleToCircle:e(996),GetCircleToRectangle:e(997),GetLineToCircle:e(173),GetLineToRectangle:e(175),GetRectangleIntersection:e(998),GetRectangleToRectangle:e(999),GetRectangleToTriangle:e(1e3),GetTriangleToCircle:e(1001),GetTriangleToLine:e(362),GetTriangleToTriangle:e(1002),LineToCircle:e(174),LineToLine:e(68),LineToRectangle:e(358),PointToLine:e(366),PointToLineSegment:e(1003),RectangleToRectangle:e(122),RectangleToTriangle:e(359),RectangleToValues:e(1004),TriangleToCircle:e(361),TriangleToLine:e(363),TriangleToTriangle:e(364)}},function(d,w){d.exports=function(e,n){var t=e.x1,r=e.y1,o=e.x2,i=e.y2,s=n.x,a=n.y,u=n.right,l=n.bottom,c=0;if(s<=t&&t<=u&&a<=r&&r<=l||s<=o&&o<=u&&a<=i&&i<=l)return!0;if(t<s&&s<=o){if(a<(c=r+(i-r)*(s-t)/(o-t))&&c<=l)return!0}else if(u<t&&o<=u&&a<=(c=r+(i-r)*(u-t)/(o-t))&&c<=l)return!0;if(r<a&&a<=i){if(s<=(c=t+(o-t)*(a-r)/(i-r))&&c<=u)return!0}else if(l<r&&i<=l&&s<=(c=t+(o-t)*(l-r)/(i-r))&&c<=u)return!0;return!1}},function(d,w,e){var n=e(68),t=e(34),r=e(176),o=e(360);d.exports=function(i,s){if(s.left>i.right||s.right<i.left||s.top>i.bottom||s.bottom<i.top)return!1;var a=s.getLineA(),u=s.getLineB(),l=s.getLineC();if(t(i,a.x1,a.y1)||t(i,a.x2,a.y2)||t(i,u.x1,u.y1)||t(i,u.x2,u.y2)||t(i,l.x1,l.y1)||t(i,l.x2,l.y2))return!0;var c=i.getLineA(),h=i.getLineB(),f=i.getLineC(),g=i.getLineD();if(n(a,c)||n(a,h)||n(a,f)||n(a,g)||n(u,c)||n(u,h)||n(u,f)||n(u,g)||n(l,c)||n(l,h)||n(l,f)||n(l,g))return!0;var p=o(i);return 0<r(s,p,!0).length}},function(d,w){d.exports=function(e,n){return n===void 0&&(n=[]),n.push({x:e.x,y:e.y}),n.push({x:e.right,y:e.y}),n.push({x:e.right,y:e.bottom}),n.push({x:e.x,y:e.bottom}),n}},function(d,w,e){var n=e(174),t=e(67);d.exports=function(r,o){return!(r.left>o.right||r.right<o.left||r.top>o.bottom||r.bottom<o.top)&&(!!t(r,o.x,o.y)||!!n(r.getLineA(),o)||!!n(r.getLineB(),o)||!!n(r.getLineC(),o))}},function(d,w,e){var n=e(3),t=e(363),r=e(68);d.exports=function(o,i,s){if(s===void 0&&(s=[]),t(o,i))for(var a=o.getLineA(),u=o.getLineB(),l=o.getLineC(),c=[new n,new n,new n],h=[r(a,i,c[0]),r(u,i,c[1]),r(l,i,c[2])],f=0;f<3;f++)h[f]&&s.push(c[f]);return s}},function(d,w,e){var n=e(67),t=e(68);d.exports=function(r,o){return!(!n(r,o.getPointA())&&!n(r,o.getPointB()))||!!t(r.getLineA(),o)||!!t(r.getLineB(),o)||!!t(r.getLineC(),o)}},function(d,w,e){var n=e(176),t=e(365),r=e(68);d.exports=function(o,i){if(o.left>i.right||o.right<i.left||o.top>i.bottom||o.bottom<i.top)return!1;var s=o.getLineA(),a=o.getLineB(),u=o.getLineC(),l=i.getLineA(),c=i.getLineB(),h=i.getLineC();if(r(s,l)||r(s,c)||r(s,h)||r(a,l)||r(a,c)||r(a,h)||r(u,l)||r(u,c)||r(u,h))return!0;var f=t(o),g=n(i,f,!0);return 0<g.length||(f=t(i),0<n(o,f,!0).length)}},function(d,w){d.exports=function(e,n){return n===void 0&&(n=[]),n.push({x:e.x1,y:e.y1}),n.push({x:e.x2,y:e.y2}),n.push({x:e.x3,y:e.y3}),n}},function(d,w){d.exports=function(e,n,t){t===void 0&&(t=1);var r=n.x1,o=n.y1,i=n.x2,s=n.y2,a=e.x,u=e.y,l=(i-r)*(i-r)+(s-o)*(s-o);if(l==0)return!1;var c=((a-r)*(i-r)+(u-o)*(s-o))/l;if(c<0)return Math.sqrt((r-a)*(r-a)+(o-u)*(o-u))<=t;if(0<=c&&c<=1){var h=((o-u)*(i-r)-(r-a)*(s-o))/l;return Math.abs(h)*Math.sqrt(l)<=t}return Math.sqrt((i-a)*(i-a)+(s-u)*(s-u))<=t}},function(d,w,e){var n=e(10),t=e(57),r=e(69);d.exports=function(o){var i=r(o)-n.TAU;return t(i,-Math.PI,Math.PI)}},function(d,w){d.exports=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)}},function(d,w){d.exports=function(e){return e.x*e.x+e.y*e.y}},function(d,w,e){var n=e(47),t=e(53),r=e(371);d.exports=function(o,i,s,a){a===void 0&&(a=[]);var u=o.points,l=r(o);!i&&0<s&&(i=l/s);for(var c=0;c<i;c++)for(var h=l*(c/i),f=0,g=0;g<u.length;g++){var p=u[g],v=u[(g+1)%u.length],T=new t(p.x,p.y,v.x,v.y),E=n(T);if(!(h<f||f+E<h)){var M=T.getPoint((h-f)/E);a.push(M);break}f+=E}return a}},function(d,w,e){var n=e(47),t=e(53);d.exports=function(r){for(var o=r.points,i=0,s=0;s<o.length;s++){var a=o[s],u=o[(s+1)%o.length],l=new t(a.x,a.y,u.x,u.y);i+=n(l)}return i}},function(d,w,e){var n=e(7);n.Area=e(1046),n.Ceil=e(1047),n.CeilAll=e(1048),n.CenterOn=e(144),n.Clone=e(1049),n.Contains=e(34),n.ContainsPoint=e(1050),n.ContainsRect=e(373),n.CopyFrom=e(1051),n.Decompose=e(360),n.Equals=e(1052),n.FitInside=e(1053),n.FitOutside=e(1054),n.Floor=e(1055),n.FloorAll=e(1056),n.FromPoints=e(203),n.FromXY=e(1057),n.GetAspectRatio=e(179),n.GetCenter=e(1058),n.GetPoint=e(137),n.GetPoints=e(224),n.GetSize=e(1059),n.Inflate=e(1060),n.Intersection=e(1061),n.MarchingAnts=e(345),n.MergePoints=e(1062),n.MergeRect=e(1063),n.MergeXY=e(1064),n.Offset=e(1065),n.OffsetPoint=e(1066),n.Overlaps=e(1067),n.Perimeter=e(95),n.PerimeterPoint=e(1068),n.Random=e(140),n.RandomOutside=e(1069),n.SameDimensions=e(1070),n.Scale=e(1071),n.Union=e(323),d.exports=n},function(d,w){d.exports=function(e,n){return!(n.width*n.height>e.width*e.height)&&n.x>e.x&&n.x<e.right&&n.right>e.x&&n.right<e.right&&n.y>e.y&&n.y<e.bottom&&n.bottom>e.y&&n.bottom<e.bottom}},function(d,w,e){var n=e(3);d.exports=function(t,r){return r===void 0&&(r=new n),r.x=(t.x1+t.x2+t.x3)/3,r.y=(t.y1+t.y2+t.y3)/3,r}},function(d,w){d.exports=function(e,n,t){return e.x1+=n,e.y1+=t,e.x2+=n,e.y2+=t,e.x3+=n,e.y3+=t,e}},function(d,w,e){var n=e(3);function t(r,o,i,s){var a=r-i,u=o-s,l=a*a+u*u;return Math.sqrt(l)}d.exports=function(r,o){o===void 0&&(o=new n);var i=r.x1,s=r.y1,a=r.x2,u=r.y2,l=r.x3,c=r.y3,h=t(l,c,a,u),f=t(i,s,l,c),g=t(a,u,i,s),p=h+f+g;return o.x=(i*h+a*f+l*g)/p,o.y=(s*h+u*f+c*g)/p,o}},function(d,w,e){var n=e(86);d.exports=function(t,r,o){if(n(t,r,o)){var i=o.data[r][t];return i!==null&&-1<i.index}return!1}},function(d,w,e){var n=e(60),t=e(86),r=e(172);d.exports=function(o,i,s,a,u){if(s===void 0&&(s=!1),a===void 0&&(a=!0),!t(o,i,u))return null;var l=u.data[i][o];return l?(u.data[i][o]=s?null:new n(u,-1,o,i,l.width,l.height),a&&l&&l.collides&&r(o,i,u),l):null}},function(d,w){d.exports=function(e){var n=e.toString(16);return n.length===1?"0"+n:n}},function(d,w){d.exports=function(e,n,t){return t<0&&(t+=1),1<t&&--t,t<1/6?e+6*(n-e)*t:t<.5?n:t<2/3?e+(n-e)*(2/3-t)*6:e}},function(d,w,e){var n=e(33),t=e(184),r=e(382),o=e(383),i=e(393);d.exports=function(s,a,u,l,c,h){var f;switch(a){case n.ARRAY_2D:f=t(s,u,l,c,h);break;case n.CSV:f=r(s,u,l,c,h);break;case n.TILED_JSON:f=o(s,u,h);break;case n.WELTMEISTER:f=i(s,u,h);break;default:console.warn("Unrecognized tilemap data format: "+a),f=null}return f}},function(d,w,e){var n=e(33),t=e(184);d.exports=function(r,o,i,s,a){var u=o.trim().split(`
`).map(function(c){return c.split(",")}),l=t(r,u,i,s,a);return l.format=n.CSV,l}},function(d,w,e){var n=e(33),t=e(88),r=e(384),o=e(386),i=e(387),s=e(389),a=e(391),u=e(392);d.exports=function(l,c,h){if(c.orientation!=="orthogonal")return console.warn("Only orthogonal map types are supported in this version of Phaser"),null;var f=new t({width:c.width,height:c.height,name:l,tileWidth:c.tilewidth,tileHeight:c.tileheight,orientation:c.orientation,format:n.TILED_JSON,version:c.version,properties:c.properties,renderOrder:c.renderorder,infinite:c.infinite});f.layers=r(c,h),f.images=o(c);var g=i(c);return f.tilesets=g.tilesets,f.imageCollections=g.imageCollections,f.objects=s(c),f.tiles=a(f),u(f),f}},function(d,w,e){var n=e(385),t=e(2),r=e(87),o=e(185),i=e(60),s=e(186);d.exports=function(a,u){for(var l=t(a,"infinite",!1),c=[],h=[],f=s(a);f.i<f.layers.length||0<h.length;)if(f.i>=f.layers.length){if(h.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=h.pop()}else{var g,p=f.layers[f.i];if(f.i++,p.type==="tilelayer")if(p.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+p.name+"'");else{if(p.encoding&&p.encoding==="base64"){if(p.chunks)for(var v=0;v<p.chunks.length;v++)p.chunks[v].data=n(p.chunks[v].data);p.data&&(p.data=n(p.data)),delete p.encoding}var T,E,M=[],A=0;if(l){for(var C=t(p,"startx",0)+p.x,P=t(p,"starty",0)+p.y,R=new r({name:f.name+p.name,x:f.x+t(p,"offsetx",0)+C*a.tilewidth,y:f.y+t(p,"offsety",0)+P*a.tileheight,width:p.width,height:p.height,tileWidth:a.tilewidth,tileHeight:a.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:t(p,"properties",[])}),D=0;D<p.height;D++){M.push([null]);for(var I=0;I<p.width;I++)M[D][I]=null}for(D=0,ce=p.chunks.length;D<ce;D++)for(var W=p.chunks[D],G=W.x-C,Y=W.y-P,j=0,ee=0,te=W.data.length;ee<te;ee++){var F,U=A+G,K=j+Y;0<(F=o(W.data[ee])).gid?((T=new i(R,F.gid,U,K,a.tilewidth,a.tileheight)).rotation=F.rotation,T.flipX=F.flipped,M[K][U]=T):(E=u?null:new i(R,-1,U,K,a.tilewidth,a.tileheight),M[K][U]=E),++A===W.width&&(j++,A=0)}}else{R=new r({name:f.name+p.name,x:f.x+t(p,"offsetx",0)+p.x,y:f.y+t(p,"offsety",0)+p.y,width:p.width,height:p.height,tileWidth:a.tilewidth,tileHeight:a.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:t(p,"properties",[])});for(var oe=[],ae=0,ce=p.data.length;ae<ce;ae++)0<(F=o(p.data[ae])).gid?((T=new i(R,F.gid,A,M.length,a.tilewidth,a.tileheight)).rotation=F.rotation,T.flipX=F.flipped,oe.push(T)):(E=u?null:new i(R,-1,A,M.length,a.tilewidth,a.tileheight),oe.push(E)),++A===p.width&&(M.push(oe),A=0,oe=[])}R.data=M,c.push(R)}else p.type==="group"&&(g=s(a,p,f),h.push(f),f=g)}return c}},function(d,w){d.exports=function(e){for(var n=window.atob(e),t=n.length,r=new Array(t/4),o=0;o<t;o+=4)r[o/4]=(n.charCodeAt(o)|n.charCodeAt(o+1)<<8|n.charCodeAt(o+2)<<16|n.charCodeAt(o+3)<<24)>>>0;return r}},function(d,w,e){var n=e(2),t=e(186);d.exports=function(r){for(var o=[],i=[],s=t(r);s.i<s.layers.length||0<i.length;)if(s.i>=s.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop()}else{var a,u,l,c=s.layers[s.i];s.i++,c.type==="imagelayer"?(a=n(c,"offsetx",0)+n(c,"startx",0),u=n(c,"offsety",0)+n(c,"starty",0),o.push({name:s.name+c.name,image:c.image,x:s.x+a+c.x,y:s.y+u+c.y,alpha:s.opacity*c.opacity,visible:s.visible&&c.visible,properties:n(c,"properties",{})})):c.type==="group"&&(l=t(r,c,s),i.push(s),s=l)}return o}},function(d,w,e){var n=e(89),t=e(388),r=e(187);d.exports=function(o){for(var i,s=[],a=[],u=null,l=0;l<o.tilesets.length;l++){var c=o.tilesets[l];if(c.source)console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.");else if(c.image){var h=new n(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing);if(1<o.version){if(Array.isArray(c.tiles)){for(var f={},g={},p=0;p<c.tiles.length;p++){var v,T,E=c.tiles[p];E.properties&&(v={},E.properties.forEach(function(D){v[D.name]=D.value}),g[E.id]=v),E.objectgroup&&(f[E.id]={objectgroup:E.objectgroup},E.objectgroup.objects&&(T=E.objectgroup.objects.map(function(D){return r(D)}),f[E.id].objectgroup.objects=T)),E.animation&&(f.hasOwnProperty(E.id)?f[E.id].animation=E.animation:f[E.id]={animation:E.animation})}h.tileData=f,h.tileProperties=g}}else if(c.tileproperties&&(h.tileProperties=c.tileproperties),c.tiles)for(i in h.tileData=c.tiles,h.tileData){var M,A=h.tileData[i].objectgroup;A&&A.objects&&(M=A.objects.map(function(D){return r(D)}),h.tileData[i].objectgroup.objects=M)}h.updateTileData(c.imagewidth,c.imageheight),s.push(h)}else{var C=new t(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties);for(i in c.tiles){var P=c.tiles[i].image,R=c.firstgid+parseInt(i,10);C.addImage(R,P)}a.push(C)}u&&(u.lastgid=c.firstgid-1),u=c}return{tilesets:s,imageCollections:a}}},function(d,w,e){var n=new(e(0))({initialize:function(t,r,o,i,s,a,u){(o===void 0||o<=0)&&(o=32),(i===void 0||i<=0)&&(i=32),s===void 0&&(s=0),a===void 0&&(a=0),this.name=t,this.firstgid=0|r,this.imageWidth=0|o,this.imageHeight=0|i,this.imageMargin=0|s,this.imageSpacing=0|a,this.properties=u||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,r){return this.images.push({gid:t,image:r}),this.total++,this}});d.exports=n},function(d,w,e){var n=e(2),t=e(187),r=e(390),o=e(186);d.exports=function(i){for(var s=[],a=[],u=o(i);u.i<u.layers.length||0<a.length;)if(u.i>=u.layers.length){if(a.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=a.pop()}else{var l,c=u.layers[u.i];if(u.i++,c.opacity*=u.opacity,c.visible=u.visible&&c.visible,c.type==="objectgroup"){c.name=u.name+c.name;for(var h=u.x+n(c,"startx",0)+n(c,"offsetx",0),f=u.y+n(c,"starty",0)+n(c,"offsety",0),g=[],p=0;p<c.objects.length;p++){var v=t(c.objects[p],h,f);g.push(v)}var T=new r(c);T.objects=g,s.push(T)}else c.type==="group"&&(l=o(i,c,u),a.push(u),u=l)}return s}},function(d,w,e){var n=e(0),t=e(2),r=new n({initialize:function(o){o===void 0&&(o={}),this.name=t(o,"name","object layer"),this.opacity=t(o,"opacity",1),this.properties=t(o,"properties",{}),this.propertyTypes=t(o,"propertytypes",{}),this.type=t(o,"type","objectgroup"),this.visible=t(o,"visible",!0),this.objects=t(o,"objects",[])}});d.exports=r},function(d,w,e){var n=e(89);d.exports=function(t){for(var r=[],o=0;o<t.imageCollections.length;o++)for(var i=t.imageCollections[o],s=i.images,a=0;a<s.length;a++){var u,l=s[a];(u=new n(l.image,l.gid,i.imageWidth,i.imageHeight,0,0)).updateTileData(i.imageWidth,i.imageHeight),t.tilesets.push(u)}for(o=0;o<t.tilesets.length;o++)for(var c=(u=t.tilesets[o]).tileMargin,h=u.tileMargin,f=0,g=0,p=0,v=u.firstgid;v<u.firstgid+u.total&&(r[v]=[c,h,o],c+=u.tileWidth+u.tileSpacing,++f!==u.total)&&(++g!==u.columns||(c=u.tileMargin,h+=u.tileHeight+u.tileSpacing,g=0,++p!==u.rows));v++);return r}},function(d,w,e){var n=e(16);d.exports=function(t){for(var r,o,i,s,a,u=0;u<t.layers.length;u++){r=t.layers[u];for(var l=0;l<r.data.length;l++){a=r.data[l];for(var c=0;c<a.length;c++)(o=a[c])===null||o.index<0||(i=t.tiles[o.index][2],s=t.tilesets[i],o.width=s.tileWidth,o.height=s.tileHeight,s.tileProperties&&s.tileProperties[o.index-s.firstgid]&&(o.properties=n(o.properties,s.tileProperties[o.index-s.firstgid])))}}}},function(d,w,e){var n=e(33),t=e(88),r=e(394),o=e(395);d.exports=function(i,s,a){if(s.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+i),null;for(var u=0,l=0,c=0;c<s.layer.length;c++)s.layer[c].width>u&&(u=s.layer[c].width),s.layer[c].height>l&&(l=s.layer[c].height);var h=new t({width:u,height:l,name:i,tileWidth:s.layer[0].tilesize,tileHeight:s.layer[0].tilesize,format:n.WELTMEISTER});return h.layers=r(s,a),h.tilesets=o(s),h}},function(d,w,e){var n=e(87),t=e(60);d.exports=function(r,o){for(var i=[],s=0;s<r.layer.length;s++){for(var a=r.layer[s],u=new n({name:a.name,width:a.width,height:a.height,tileWidth:a.tilesize,tileHeight:a.tilesize,visible:a.visible===1}),l=[],c=[],h=0;h<a.data.length;h++){for(var f=0;f<a.data[h].length;f++){var g=a.data[h][f]-1,p=-1<g?new t(u,g,f,h,a.tilesize,a.tilesize):o?null:new t(u,-1,f,h,a.tilesize,a.tilesize);l.push(p)}c.push(l),l=[]}u.data=c,i.push(u)}return i}},function(d,w,e){var n=e(89);d.exports=function(t){for(var r=[],o=[],i=0;i<t.layer.length;i++){var s=t.layer[i],a=s.tilesetName;a!==""&&o.indexOf(a)===-1&&(o.push(a),r.push(new n(a,0,s.tilesize,s.tilesize,0,0)))}return r}},function(d,w,e){var n=e(0),t=e(48),r=e(397),o=e(16),i=e(33),s=e(87),a=e(272),u=e(65),l=e(398),c=e(60),h=e(118),f=e(89),g=new n({initialize:function(p,v){this.scene=p,this.tileWidth=v.tileWidth,this.tileHeight=v.tileHeight,this.width=v.width,this.height=v.height,this.orientation=v.orientation,this.renderOrder=v.renderOrder,this.format=v.format,this.version=v.version,this.properties=v.properties,this.widthInPixels=v.widthInPixels,this.heightInPixels=v.heightInPixels,this.imageCollections=v.imageCollections,this.images=v.images,this.layers=v.layers,this.tilesets=v.tilesets,this.objects=v.objects,this.currentLayerIndex=0},setRenderOrder:function(p){var v=["right-down","left-down","right-up","left-up"];return typeof p=="number"&&(p=v[p]),-1<v.indexOf(p)&&(this.renderOrder=p),this},addTilesetImage:function(p,v,T,E,M,A,C){if(p===void 0)return null;if(v==null&&(v=p),!this.scene.sys.textures.exists(v))return console.warn("Invalid Tileset Image: "+v),null;var P=this.scene.sys.textures.get(v),R=this.getTilesetIndex(p);if(R===null&&this.format===i.TILED_JSON)return console.warn("No data found for Tileset: "+p),null;var D=this.tilesets[R];return D?(D.setTileSize(T,E),D.setSpacing(M,A),D.setImage(P)):(T===void 0&&(T=this.tileWidth),E===void 0&&(E=this.tileHeight),M===void 0&&(M=0),A===void 0&&(A=0),C===void 0&&(C=0),(D=new f(p,C,T,E,M,A)).setImage(P),this.tilesets.push(D)),D},convertLayerToStatic:function(p){if((p=this.getLayer(p))===null)return null;var v=p.tilemapLayer;if(!(v&&v instanceof r))return null;var T=new l(v.scene,v.tilemap,v.layerIndex,v.tileset,v.x,v.y);return this.scene.sys.displayList.add(T),v.destroy(),T},copy:function(p,v,T,E,M,A,C,P){return P=this.getLayer(P),this._isStaticCall(P,"copy")?this:P!==null?(h.Copy(p,v,T,E,M,A,C,P),this):null},createBlankDynamicLayer:function(p,v,T,E,M,A,C,P){if(T===void 0&&(T=0),E===void 0&&(E=0),M===void 0&&(M=this.width),A===void 0&&(A=this.height),C===void 0&&(C=this.tileWidth),P===void 0&&(P=this.tileHeight),this.getLayerIndex(p)!==null)return console.warn("Invalid Tilemap Layer ID: "+p),null;for(var R,D=new s({name:p,tileWidth:C,tileHeight:P,width:M,height:A}),I=0;I<A;I++){R=[];for(var W=0;W<M;W++)R.push(new c(D,-1,W,I,C,P,this.tileWidth,this.tileHeight));D.data.push(R)}this.layers.push(D),this.currentLayerIndex=this.layers.length-1;var G=new r(this.scene,this,this.currentLayerIndex,v,T,E);return G.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(G),G},createDynamicLayer:function(p,v,T,E){var M=this.getLayerIndex(p);if(M===null)return console.warn("Invalid Tilemap Layer ID: "+p),typeof p=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var A=this.layers[M];if(A.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+p),null;this.currentLayerIndex=M,T===void 0&&(T=A.x),E===void 0&&(E=A.y);var C=new r(this.scene,this,M,v,T,E);return C.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(C),C},createFromObjects:function(p,v,T,E){T===void 0&&(T={}),E===void 0&&(E=this.scene);var M=this.getObjectLayer(p);if(!M)return console.warn("Cannot create from object. Invalid objectgroup name given: "+p),typeof layerID=="string"&&console.warn(`Valid objectgroup names:
	`+this.getObjectLayerNames().join(`,
	`)),null;for(var A=M.objects,C=[],P=0;P<A.length;P++){var R=!1,D=A[P];if((D.gid!==void 0&&typeof v=="number"&&D.gid===v||D.id!==void 0&&typeof v=="number"&&D.id===v||D.name!==void 0&&typeof v=="string"&&D.name===v)&&(R=!0),R){var I=o({},T,D.properties);I.x=D.x,I.y=D.y;var W=E.make.sprite(I);W.name=D.name,D.width&&(W.displayWidth=D.width),D.height&&(W.displayHeight=D.height);var G,Y={x:W.originX*D.width,y:(W.originY-1)*D.height};for(var j in D.rotation&&(G=t(D.rotation),a(Y,G),W.rotation=G),W.x+=Y.x,W.y+=Y.y,D.flippedHorizontal===void 0&&D.flippedVertical===void 0||W.setFlip(D.flippedHorizontal,D.flippedVertical),D.visible||(W.visible=!1),D.properties)W.hasOwnProperty(j)||W.setData(j,D.properties[j]);C.push(W)}}return C},createFromTiles:function(p,v,T,E,M,A){return(A=this.getLayer(A))===null?null:h.CreateFromTiles(p,v,T,E,M,A)},createStaticLayer:function(p,v,T,E){var M=this.getLayerIndex(p);if(M===null)return console.warn("Invalid Tilemap Layer ID: "+p),typeof p=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;if(this.layers[M].tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+p),null;this.currentLayerIndex=M,T===void 0&&this.layers[M].x&&(T=this.layers[M].x),E===void 0&&this.layers[M].y&&(E=this.layers[M].y);var A=new l(this.scene,this,M,v,T,E);return A.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(A),A},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=void 0},fill:function(p,v,T,E,M,A,C){return(C=this.getLayer(C))===null?null:(this._isStaticCall(C,"fill")||h.Fill(p,v,T,E,M,A,C),this)},filterObjects:function(p,v,T){if(typeof p=="string"){var E=p;if(!(p=this.getObjectLayer(p)))return console.warn("No object layer found with the name: "+E),null}return p.objects.filter(v,T)},filterTiles:function(p,v,T,E,M,A,C,P){return(P=this.getLayer(P))===null?null:h.FilterTiles(p,v,T,E,M,A,C,P)},findByIndex:function(p,v,T,E){return(E=this.getLayer(E))===null?null:h.FindByIndex(p,v,T,E)},findObject:function(p,v,T){if(typeof p=="string"){var E=p;if(!(p=this.getObjectLayer(p)))return console.warn("No object layer found with the name: "+E),null}return p.objects.find(v,T)||null},findTile:function(p,v,T,E,M,A,C,P){return(P=this.getLayer(P))===null?null:h.FindTile(p,v,T,E,M,A,C,P)},forEachTile:function(p,v,T,E,M,A,C,P){return(P=this.getLayer(P))===null?null:(h.ForEachTile(p,v,T,E,M,A,C,P),this)},getImageIndex:function(p){return this.getIndex(this.images,p)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(p){return p.name}):[]},getIndex:function(p,v){for(var T=0;T<p.length;T++)if(p[T].name===v)return T;return null},getLayer:function(p){var v=this.getLayerIndex(p);return v!==null?this.layers[v]:null},getObjectLayer:function(p){var v=this.getIndex(this.objects,p);return v!==null?this.objects[v]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(p){return p.name}):[]},getLayerIndex:function(p){return p===void 0?this.currentLayerIndex:typeof p=="string"?this.getLayerIndexByName(p):typeof p=="number"&&p<this.layers.length?p:p instanceof l||p instanceof r?p.layerIndex:null},getLayerIndexByName:function(p){return this.getIndex(this.layers,p)},getTileAt:function(p,v,T,E){return(E=this.getLayer(E))===null?null:h.GetTileAt(p,v,T,E)},getTileAtWorldXY:function(p,v,T,E,M){return(M=this.getLayer(M))===null?null:h.GetTileAtWorldXY(p,v,T,E,M)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map(function(p){return p.name}):[]},getTilesWithin:function(p,v,T,E,M,A){return(A=this.getLayer(A))===null?null:h.GetTilesWithin(p,v,T,E,M,A)},getTilesWithinShape:function(p,v,T,E){return(E=this.getLayer(E))===null?null:h.GetTilesWithinShape(p,v,T,E)},getTilesWithinWorldXY:function(p,v,T,E,M,A,C){return(C=this.getLayer(C))===null?null:h.GetTilesWithinWorldXY(p,v,T,E,M,A,C)},getTileset:function(p){var v=this.getIndex(this.tilesets,p);return v!==null?this.tilesets[v]:null},getTilesetIndex:function(p){return this.getIndex(this.tilesets,p)},hasTileAt:function(p,v,T){return(T=this.getLayer(T))===null?null:h.HasTileAt(p,v,T)},hasTileAtWorldXY:function(p,v,T,E){return(E=this.getLayer(E))===null?null:h.HasTileAtWorldXY(p,v,T,E)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(p){this.setLayer(p)}},putTileAt:function(p,v,T,E,M){return M=this.getLayer(M),this._isStaticCall(M,"putTileAt")||M===null?null:h.PutTileAt(p,v,T,E,M)},putTileAtWorldXY:function(p,v,T,E,M,A){return A=this.getLayer(A),this._isStaticCall(A,"putTileAtWorldXY")||A===null?null:h.PutTileAtWorldXY(p,v,T,E,M,A)},putTilesAt:function(p,v,T,E,M){return M=this.getLayer(M),this._isStaticCall(M,"putTilesAt")?this:M===null?null:(h.PutTilesAt(p,v,T,E,M),this)},randomize:function(p,v,T,E,M,A){return A=this.getLayer(A),this._isStaticCall(A,"randomize")?this:A===null?null:(h.Randomize(p,v,T,E,M,A),this)},calculateFacesAt:function(p,v,T){return(T=this.getLayer(T))===null?null:(h.CalculateFacesAt(p,v,T),this)},calculateFacesWithin:function(p,v,T,E,M){return(M=this.getLayer(M))===null?null:(h.CalculateFacesWithin(p,v,T,E,M),this)},removeLayer:function(p){var v=this.getLayerIndex(p);if(v===null)return null;u(this.layers,v);for(var T=v;T<this.layers.length;T++)this.layers[T].tilemapLayer&&this.layers[T].tilemapLayer.layerIndex--;return this.currentLayerIndex===v&&(this.currentLayerIndex=0),this},destroyLayer:function(p){var v=this.getLayerIndex(p);return v!==null?((p=this.layers[v]).destroy(),u(this.layers,v),this.currentLayerIndex===v&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var p=this.layers,v=0;v<p.length;v++)p[v].tilemapLayer&&p[v].tilemapLayer.destroy(!1);return p.length=0,this.currentLayerIndex=0,this},removeTile:function(p,v,T){v===void 0&&(v=-1),T===void 0&&(T=!0);var E=[];Array.isArray(p)||(p=[p]);for(var M=0;M<p.length;M++){var A=p[M];E.push(this.removeTileAt(A.x,A.y,!0,T,A.tilemapLayer)),-1<v&&this.putTileAt(v,A.x,A.y,T,A.tilemapLayer)}return E},removeTileAt:function(p,v,T,E,M){return M=this.getLayer(M),this._isStaticCall(M,"removeTileAt")||M===null?null:h.RemoveTileAt(p,v,T,E,M)},removeTileAtWorldXY:function(p,v,T,E,M,A){return A=this.getLayer(A),this._isStaticCall(A,"removeTileAtWorldXY")||A===null?null:h.RemoveTileAtWorldXY(p,v,T,E,M,A)},renderDebug:function(p,v,T){return(T=this.getLayer(T))===null?null:(h.RenderDebug(p,v,T),this)},renderDebugFull:function(p,v){for(var T=this.layers,E=0;E<T.length;E++)h.RenderDebug(p,v,T[E]);return this},replaceByIndex:function(p,v,T,E,M,A,C){return C=this.getLayer(C),this._isStaticCall(C,"replaceByIndex")?this:C===null?null:(h.ReplaceByIndex(p,v,T,E,M,A,C),this)},setCollision:function(p,v,T,E,M){return(E=this.getLayer(E))===null?null:(h.SetCollision(p,v,T,E,M),this)},setCollisionBetween:function(p,v,T,E,M){return(M=this.getLayer(M))===null?null:(h.SetCollisionBetween(p,v,T,E,M),this)},setCollisionByProperty:function(p,v,T,E){return(E=this.getLayer(E))===null?null:(h.SetCollisionByProperty(p,v,T,E),this)},setCollisionByExclusion:function(p,v,T,E){return(E=this.getLayer(E))===null?null:(h.SetCollisionByExclusion(p,v,T,E),this)},setCollisionFromCollisionGroup:function(p,v,T){return(T=this.getLayer(T))===null?null:(h.SetCollisionFromCollisionGroup(p,v,T),this)},setTileIndexCallback:function(p,v,T,E){return(E=this.getLayer(E))===null?null:(h.SetTileIndexCallback(p,v,T,E),this)},setTileLocationCallback:function(p,v,T,E,M,A,C){return(C=this.getLayer(C))===null?null:(h.SetTileLocationCallback(p,v,T,E,M,A,C),this)},setLayer:function(p){var v=this.getLayerIndex(p);return v!==null&&(this.currentLayerIndex=v),this},setBaseTileSize:function(p,v){this.tileWidth=p,this.tileHeight=v,this.widthInPixels=this.width*p,this.heightInPixels=this.height*v;for(var T=0;T<this.layers.length;T++){this.layers[T].baseTileWidth=p,this.layers[T].baseTileHeight=v;for(var E=this.layers[T].data,M=this.layers[T].width,A=this.layers[T].height,C=0;C<A;C++)for(var P=0;P<M;P++){var R=E[C][P];R!==null&&R.setSize(void 0,void 0,p,v)}}return this},setLayerTileSize:function(p,v,T){if((T=this.getLayer(T))===null)return this;T.tileWidth=p,T.tileHeight=v;for(var E=T.data,M=T.width,A=T.height,C=0;C<A;C++)for(var P=0;P<M;P++){var R=E[C][P];R!==null&&R.setSize(p,v)}return this},shuffle:function(p,v,T,E,M){return M=this.getLayer(M),this._isStaticCall(M,"shuffle")?this:M===null?null:(h.Shuffle(p,v,T,E,M),this)},swapByIndex:function(p,v,T,E,M,A,C){return C=this.getLayer(C),this._isStaticCall(C,"swapByIndex")?this:C===null?null:(h.SwapByIndex(p,v,T,E,M,A,C),this)},tileToWorldX:function(p,v,T){return(T=this.getLayer(T))===null?null:h.TileToWorldX(p,v,T)},tileToWorldY:function(p,v,T){return(T=this.getLayer(T))===null?null:h.TileToWorldY(p,v,T)},tileToWorldXY:function(p,v,T,E,M){return(M=this.getLayer(M))===null?null:h.TileToWorldXY(p,v,T,E,M)},weightedRandomize:function(p,v,T,E,M,A){return A=this.getLayer(A),this._isStaticCall(A,"weightedRandomize")?this:A===null?null:(h.WeightedRandomize(p,v,T,E,M,A),this)},worldToTileX:function(p,v,T,E){return(E=this.getLayer(E))===null?null:h.WorldToTileX(p,v,T,E)},worldToTileY:function(p,v,T,E){return(E=this.getLayer(E))===null?null:h.WorldToTileY(p,v,T,E)},worldToTileXY:function(p,v,T,E,M,A){return(A=this.getLayer(A))===null?null:h.WorldToTileXY(p,v,T,E,M,A)},_isStaticCall:function(p,v){return p.tilemapLayer instanceof l&&(console.warn(v+": You cannot change the tiles in a static tilemap layer"),!0)}});d.exports=g},function(d,w,e){var n=e(0),t=e(13),r=e(1115),o=e(19),i=e(118),s=new n({Extends:o,Mixins:[t.Alpha,t.BlendMode,t.ComputedSize,t.Depth,t.Flip,t.GetBounds,t.Origin,t.Pipeline,t.Transform,t.Visible,t.ScrollFactor,r],initialize:function(a,u,l,c,h,f){o.call(this,a,"DynamicTilemapLayer"),this.isTilemap=!0,this.tilemap=u,this.layerIndex=l,this.layer=u.layers[l],(this.layer.tilemapLayer=this).tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=i.CullTiles,this._renderOrder=0,this.gidMap=[],this.setTilesets(c),this.setAlpha(this.layer.alpha),this.setPosition(h,f),this.setOrigin(),this.setSize(u.tileWidth*this.layer.width,u.tileHeight*this.layer.height),this.initPipeline("TextureTintPipeline")},setTilesets:function(a){var u=[],l=[],c=this.tilemap;Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;h++){var f=a[h];if(typeof f=="string"&&(f=c.getTileset(f)),f){l.push(f);for(var g=f.firstgid,p=0;p<f.total;p++)u[g+p]=f}}this.gidMap=u,this.tileset=l},setRenderOrder:function(a){return typeof a=="string"&&(a=["right-down","left-down","right-up","left-up"].indexOf(a)),0<=a&&a<4&&(this._renderOrder=a),this},calculateFacesAt:function(a,u){return i.CalculateFacesAt(a,u,this.layer),this},calculateFacesWithin:function(a,u,l,c){return i.CalculateFacesWithin(a,u,l,c,this.layer),this},createFromTiles:function(a,u,l,c,h){return i.CreateFromTiles(a,u,l,c,h,this.layer)},cull:function(a){return this.cullCallback(this.layer,a,this.culledTiles,this._renderOrder)},copy:function(a,u,l,c,h,f,g){return i.Copy(a,u,l,c,h,f,g,this.layer),this},destroy:function(a){a===void 0&&(a=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),a&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],o.prototype.destroy.call(this))},fill:function(a,u,l,c,h,f){return i.Fill(a,u,l,c,h,f,this.layer),this},filterTiles:function(a,u,l,c,h,f,g){return i.FilterTiles(a,u,l,c,h,f,g,this.layer)},findByIndex:function(a,u,l){return i.FindByIndex(a,u,l,this.layer)},findTile:function(a,u,l,c,h,f,g){return i.FindTile(a,u,l,c,h,f,g,this.layer)},forEachTile:function(a,u,l,c,h,f,g){return i.ForEachTile(a,u,l,c,h,f,g,this.layer),this},getTileAt:function(a,u,l){return i.GetTileAt(a,u,l,this.layer)},getTileAtWorldXY:function(a,u,l,c){return i.GetTileAtWorldXY(a,u,l,c,this.layer)},getTilesWithin:function(a,u,l,c,h){return i.GetTilesWithin(a,u,l,c,h,this.layer)},getTilesWithinShape:function(a,u,l){return i.GetTilesWithinShape(a,u,l,this.layer)},getTilesWithinWorldXY:function(a,u,l,c,h,f){return i.GetTilesWithinWorldXY(a,u,l,c,h,f,this.layer)},hasTileAt:function(a,u){return i.HasTileAt(a,u,this.layer)},hasTileAtWorldXY:function(a,u,l){return i.HasTileAtWorldXY(a,u,l,this.layer)},putTileAt:function(a,u,l,c){return i.PutTileAt(a,u,l,c,this.layer)},putTileAtWorldXY:function(a,u,l,c,h){return i.PutTileAtWorldXY(a,u,l,c,h,this.layer)},putTilesAt:function(a,u,l,c){return i.PutTilesAt(a,u,l,c,this.layer),this},randomize:function(a,u,l,c,h){return i.Randomize(a,u,l,c,h,this.layer),this},removeTileAt:function(a,u,l,c){return i.RemoveTileAt(a,u,l,c,this.layer)},removeTileAtWorldXY:function(a,u,l,c,h){return i.RemoveTileAtWorldXY(a,u,l,c,h,this.layer)},renderDebug:function(a,u){return i.RenderDebug(a,u,this.layer),this},replaceByIndex:function(a,u,l,c,h,f){return i.ReplaceByIndex(a,u,l,c,h,f,this.layer),this},setSkipCull:function(a){return a===void 0&&(a=!0),this.skipCull=a,this},setCullPadding:function(a,u){return a===void 0&&(a=1),u===void 0&&(u=1),this.cullPaddingX=a,this.cullPaddingY=u,this},setCollision:function(a,u,l,c){return i.SetCollision(a,u,l,this.layer,c),this},setCollisionBetween:function(a,u,l,c){return i.SetCollisionBetween(a,u,l,c,this.layer),this},setCollisionByProperty:function(a,u,l){return i.SetCollisionByProperty(a,u,l,this.layer),this},setCollisionByExclusion:function(a,u,l){return i.SetCollisionByExclusion(a,u,l,this.layer),this},setCollisionFromCollisionGroup:function(a,u){return i.SetCollisionFromCollisionGroup(a,u,this.layer),this},setTileIndexCallback:function(a,u,l){return i.SetTileIndexCallback(a,u,l,this.layer),this},setTileLocationCallback:function(a,u,l,c,h,f){return i.SetTileLocationCallback(a,u,l,c,h,f,this.layer),this},shuffle:function(a,u,l,c){return i.Shuffle(a,u,l,c,this.layer),this},swapByIndex:function(a,u,l,c,h,f){return i.SwapByIndex(a,u,l,c,h,f,this.layer),this},tileToWorldX:function(a,u){return i.TileToWorldX(a,u,this.layer)},tileToWorldY:function(a,u){return i.TileToWorldY(a,u,this.layer)},tileToWorldXY:function(a,u,l,c){return i.TileToWorldXY(a,u,l,c,this.layer)},weightedRandomize:function(a,u,l,c,h){return i.WeightedRandomize(a,u,l,c,h,this.layer),this},worldToTileX:function(a,u,l){return i.WorldToTileX(a,u,l,this.layer)},worldToTileY:function(a,u,l){return i.WorldToTileY(a,u,l,this.layer)},worldToTileXY:function(a,u,l,c,h){return i.WorldToTileXY(a,u,l,c,h,this.layer)}});d.exports=s},function(d,w,e){var n=e(0),t=e(13),r=e(15),o=e(19),i=e(1118),s=e(118),a=e(27),u=e(14),l=new n({Extends:o,Mixins:[t.Alpha,t.BlendMode,t.ComputedSize,t.Depth,t.Flip,t.GetBounds,t.Origin,t.Pipeline,t.Transform,t.Visible,t.ScrollFactor,i],initialize:function(c,h,f,g,p,v){o.call(this,c,"StaticTilemapLayer"),this.isTilemap=!0,this.tilemap=h,this.layerIndex=f,this.layer=h.layers[f],(this.layer.tilemapLayer=this).tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=s.CullTiles,this.renderer=c.sys.game.renderer,this.vertexBuffer=[],this.bufferData=[],this.vertexViewF32=[],this.vertexViewU32=[],this.dirty=[],this.vertexCount=[],this._renderOrder=0,this._tempMatrix=new a,this.gidMap=[],this.setTilesets(g),this.setAlpha(this.layer.alpha),this.setPosition(p,v),this.setOrigin(),this.setSize(h.tileWidth*this.layer.width,h.tileHeight*this.layer.height),this.updateVBOData(),this.initPipeline("TextureTintPipeline"),c.sys.game.events.on(r.CONTEXT_RESTORED,function(){this.updateVBOData()},this)},setTilesets:function(c){var h=[],f=[],g=this.tilemap;Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var v=c[p];if(typeof v=="string"&&(v=g.getTileset(v)),v){f.push(v);for(var T=v.firstgid,E=0;E<v.total;E++)h[T+E]=v}}this.gidMap=h,this.tileset=f},updateVBOData:function(){for(var c=0;c<this.tileset.length;c++)this.dirty[c]=!0,this.vertexCount[c]=0,this.vertexBuffer[c]=null,this.bufferData[c]=null,this.vertexViewF32[c]=null,this.vertexViewU32[c]=null;return this},upload:function(c,h){var f=this.renderer,g=f.gl,p=f.pipelines.TextureTintPipeline;if(this.dirty[h]){var v,T,E,M=this.tileset[h],A=this.layer.width,C=this.layer.height,P=M.image.source[0].width,R=M.image.source[0].height,D=this.layer.data,I=this._renderOrder,W=M.firstgid,G=M.firstgid+M.total,Y=this.vertexBuffer[h],j=this.bufferData[h],ee=-1,te=A*C*p.vertexSize*6;if(this.vertexCount[h]=0,j===null&&(j=new ArrayBuffer(te),this.bufferData[h]=j,this.vertexViewF32[h]=new Float32Array(j),this.vertexViewU32[h]=new Uint32Array(j)),I===0)for(T=0;T<C;T++)for(E=0;E<A;E++)!(v=D[T][E])||v.index<W||v.index>G||!v.visible||(ee=this.batchTile(ee,v,M,P,R,c,h));else if(I===1)for(T=0;T<C;T++)for(E=A-1;0<=E;E--)!(v=D[T][E])||v.index<W||v.index>G||!v.visible||(ee=this.batchTile(ee,v,M,P,R,c,h));else if(I===2)for(T=C-1;0<=T;T--)for(E=0;E<A;E++)!(v=D[T][E])||v.index<W||v.index>G||!v.visible||(ee=this.batchTile(ee,v,M,P,R,c,h));else if(I===3)for(T=C-1;0<=T;T--)for(E=A-1;0<=E;E--)!(v=D[T][E])||v.index<W||v.index>G||!v.visible||(ee=this.batchTile(ee,v,M,P,R,c,h));this.dirty[h]=!1,Y===null?(Y=f.createVertexBuffer(j,g.STATIC_DRAW),this.vertexBuffer[h]=Y):(f.setVertexBuffer(Y),g.bufferSubData(g.ARRAY_BUFFER,0,j))}return this},batchTile:function(c,h,f,g,p,v,T){var E=f.getTileTextureCoordinates(h.index);if(!E)return c;var M=f.tileWidth,A=f.tileHeight,C=M/2,P=A/2,R=E.x/g,D=E.y/p,I=(E.x+M)/g,W=(E.y+A)/p,G=this._tempMatrix,Y=-C,j=-P;h.flipX&&(M*=-1,Y+=f.tileWidth),h.flipY&&(A*=-1,j+=f.tileHeight);var ee=Y+M,te=j+A;G.applyITRS(C+h.pixelX,P+h.pixelY,h.rotation,1,1);var F=u.getTintAppendFloatAlpha(16777215,v.alpha*this.alpha*h.alpha),U=G.getX(Y,j),K=G.getY(Y,j),oe=G.getX(Y,te),ae=G.getY(Y,te),ce=G.getX(ee,te),re=G.getY(ee,te),ve=G.getX(ee,j),Se=G.getY(ee,j);v.roundPixels&&(U=Math.round(U),K=Math.round(K),oe=Math.round(oe),ae=Math.round(ae),ce=Math.round(ce),re=Math.round(re),ve=Math.round(ve),Se=Math.round(Se));var de=this.vertexViewF32[T],pe=this.vertexViewU32[T];return de[++c]=U,de[++c]=K,de[++c]=R,de[++c]=D,de[++c]=0,pe[++c]=F,de[++c]=oe,de[++c]=ae,de[++c]=R,de[++c]=W,de[++c]=0,pe[++c]=F,de[++c]=ce,de[++c]=re,de[++c]=I,de[++c]=W,de[++c]=0,pe[++c]=F,de[++c]=U,de[++c]=K,de[++c]=R,de[++c]=D,de[++c]=0,pe[++c]=F,de[++c]=ce,de[++c]=re,de[++c]=I,de[++c]=W,de[++c]=0,pe[++c]=F,de[++c]=ve,de[++c]=Se,de[++c]=I,de[++c]=D,de[++c]=0,pe[++c]=F,this.vertexCount[T]+=6,c},setRenderOrder:function(c){if(typeof c=="string"&&(c=["right-down","left-down","right-up","left-up"].indexOf(c)),0<=c&&c<4){this._renderOrder=c;for(var h=0;h<this.tileset.length;h++)this.dirty[h]=!0}return this},calculateFacesAt:function(c,h){return s.CalculateFacesAt(c,h,this.layer),this},calculateFacesWithin:function(c,h,f,g){return s.CalculateFacesWithin(c,h,f,g,this.layer),this},createFromTiles:function(c,h,f,g,p){return s.CreateFromTiles(c,h,f,g,p,this.layer)},cull:function(c){return this.cullCallback(this.layer,c,this.culledTiles)},setSkipCull:function(c){return c===void 0&&(c=!0),this.skipCull=c,this},setCullPadding:function(c,h){return c===void 0&&(c=1),h===void 0&&(h=1),this.cullPaddingX=c,this.cullPaddingY=h,this},findByIndex:function(c,h,f){return s.FindByIndex(c,h,f,this.layer)},findTile:function(c,h,f,g,p,v,T){return s.FindTile(c,h,f,g,p,v,T,this.layer)},filterTiles:function(c,h,f,g,p,v,T){return s.FilterTiles(c,h,f,g,p,v,T,this.layer)},forEachTile:function(c,h,f,g,p,v,T){return s.ForEachTile(c,h,f,g,p,v,T,this.layer),this},getTileAt:function(c,h,f){return s.GetTileAt(c,h,f,this.layer)},getTileAtWorldXY:function(c,h,f,g){return s.GetTileAtWorldXY(c,h,f,g,this.layer)},getTilesWithin:function(c,h,f,g,p){return s.GetTilesWithin(c,h,f,g,p,this.layer)},getTilesWithinWorldXY:function(c,h,f,g,p,v){return s.GetTilesWithinWorldXY(c,h,f,g,p,v,this.layer)},getTilesWithinShape:function(c,h,f){return s.GetTilesWithinShape(c,h,f,this.layer)},hasTileAt:function(c,h){return s.HasTileAt(c,h,this.layer)},hasTileAtWorldXY:function(c,h,f){return s.HasTileAtWorldXY(c,h,f,this.layer)},renderDebug:function(c,h){return s.RenderDebug(c,h,this.layer),this},setCollision:function(c,h,f,g){return s.SetCollision(c,h,f,this.layer,g),this},setCollisionBetween:function(c,h,f,g){return s.SetCollisionBetween(c,h,f,g,this.layer),this},setCollisionByProperty:function(c,h,f){return s.SetCollisionByProperty(c,h,f,this.layer),this},setCollisionByExclusion:function(c,h,f){return s.SetCollisionByExclusion(c,h,f,this.layer),this},setTileIndexCallback:function(c,h,f){return s.SetTileIndexCallback(c,h,f,this.layer),this},setCollisionFromCollisionGroup:function(c,h){return s.SetCollisionFromCollisionGroup(c,h,this.layer),this},setTileLocationCallback:function(c,h,f,g,p,v){return s.SetTileLocationCallback(c,h,f,g,p,v,this.layer),this},tileToWorldX:function(c,h){return s.TileToWorldX(c,h,this.layer)},tileToWorldY:function(c,h){return s.TileToWorldY(c,h,this.layer)},tileToWorldXY:function(c,h,f,g){return s.TileToWorldXY(c,h,f,g,this.layer)},worldToTileX:function(c,h,f){return s.WorldToTileX(c,h,f,this.layer)},worldToTileY:function(c,h,f){return s.WorldToTileY(c,h,f,this.layer)},worldToTileXY:function(c,h,f,g,p){return s.WorldToTileXY(c,h,f,g,p,this.layer)},destroy:function(c){if(c===void 0&&(c=!0),this.tilemap){this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),c&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null;for(var h=0;h<this.tileset.length;h++)this.dirty[h]=!0,this.vertexCount[h]=0,this.vertexBuffer[h]=null,this.bufferData[h]=null,this.vertexViewF32[h]=null,this.vertexViewU32[h]=null;this.gidMap=[],this.tileset=[],o.prototype.destroy.call(this)}}});d.exports=l},function(d,w,e){var n=e(0),t=e(2),r=new n({initialize:function(o){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(o)},reset:function(o){return this.delay=t(o,"delay",0),this.repeat=t(o,"repeat",0),this.loop=t(o,"loop",!1),this.callback=t(o,"callback",void 0),this.callbackScope=t(o,"callbackScope",this.callback),this.args=t(o,"args",[]),this.timeScale=t(o,"timeScale",1),this.startAt=t(o,"startAt",0),this.paused=t(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(0<this.repeat){var o=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/o}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return .001*this.elapsed},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});d.exports=r},function(d,w,e){var n=e(1127);d.exports=function(t){var r,o=[];if(t.hasOwnProperty("props"))for(r in t.props)r.substr(0,1)!=="_"&&o.push({key:r,value:t.props[r]});else for(r in t)n.indexOf(r)===-1&&r.substr(0,1)!=="_"&&o.push({key:r,value:t[r]});return o}},function(d,w,e){var n=e(5);d.exports=function(t){var r=n(t,"tweens",null);return r===null?[]:(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r]),r)}},function(d,w,e){var n=e(191),t=e(20),r=e(76),o=e(64),i=e(123),s=e(5),a=e(190),u=e(192),l=e(194);d.exports=function(c,h,f){f===void 0&&(f=n);var g=s(h,"from",0),p=s(h,"to",1),v=[{value:g}],T=i(h,"delay",f.delay),E=i(h,"duration",f.duration),M=s(h,"easeParams",f.easeParams),A=o(s(h,"ease",f.ease),M),C=i(h,"hold",f.hold),P=i(h,"repeat",f.repeat),R=i(h,"repeatDelay",f.repeatDelay),D=r(h,"yoyo",f.yoyo),I=[],W=a("value",p),G=l(v[0],0,"value",W.getEnd,W.getStart,W.getActive,A,T,E,D,C,P,R,!1,!1);G.start=g,G.current=g,G.to=p,I.push(G);var Y=new u(c,I,v);Y.offset=t(h,"offset",null),Y.completeDelay=t(h,"completeDelay",0),Y.loop=Math.round(t(h,"loop",0)),Y.loopDelay=Math.round(t(h,"loopDelay",0)),Y.paused=r(h,"paused",!1),Y.useFrames=r(h,"useFrames",!1);for(var j=s(h,"callbackScope",Y),ee=[Y,null],te=u.TYPES,F=0;F<te.length;F++){var U,K,oe=te[F],ae=s(h,oe,!1);ae&&(U=s(h,oe+"Scope",j),K=s(h,oe+"Params",[]),Y.setCallback(oe,ae,ee.concat(K),U))}return Y}},function(d,w,e){var n=e(64),t=e(5),r=e(10);d.exports=function(o,i){i===void 0&&(i={});var s=t(i,"start",0),a=t(i,"ease",null),u=t(i,"grid",null),l=t(i,"from",0),c=l==="first",h=l==="center",f=l==="last",g=typeof l=="number",p=Array.isArray(o),v=parseFloat(p?o[0]:o),T=p?parseFloat(o[1]):0,E=Math.max(v,T);if(p&&(s+=v),u){var M,A,C=u[0],P=u[1],R=0,D=0,I=[];f?(R=C-1,D=P-1):g?(R=l%C,D=Math.floor(l/C)):h&&(R=(C-1)/2,D=(P-1)/2);for(var W=r.MIN_SAFE_INTEGER,G=0;G<P;G++){I[G]=[];for(var Y=0;Y<C;Y++){M=R-Y,A=D-G;var j=Math.sqrt(M*M+A*A);W<j&&(W=j),I[G][Y]=j}}}var ee=a?n(a):null;return u?function(te,F,U,K){var oe,ae=0,ce=K%C,re=Math.floor(K/C);return 0<=ce&&ce<C&&0<=re&&re<P&&(ae=I[re][ce]),(p?(oe=T-v,ee?ae/W*oe*ee(ae/W):ae/W*oe):ee?ae*v*ee(ae/W):ae*v)+s}:function(te,F,U,K,oe){var ae,ce;return oe--,c?ae=K:h?ae=Math.abs(oe/2-K):f?ae=oe-K:g&&(ae=Math.abs(l-K)),(p?(ce=h?(T-v)/oe*(2*ae):(T-v)/oe*ae,ee?ce*ee(ae/oe):ce):ee?oe*E*ee(ae/oe):ae*v)+s}}},function(d,w,e){var n=e(66),t=e(191),r=e(20),o=e(76),i=e(64),s=e(123),a=e(189),u=e(401),l=e(5),c=e(405),h=e(124);d.exports=function(f,g){var p=new c(f);p.completeDelay=r(g,"completeDelay",0),p.loop=Math.round(r(g,"loop",0)),p.loopDelay=Math.round(r(g,"loopDelay",0)),p.paused=o(g,"paused",!1),p.useFrames=o(g,"useFrames",!1);var v,T,E=l(g,"callbackScope",p),M=[p],A=l(g,"onStart",!1);A&&(v=l(g,"onStartScope",E),T=l(g,"onStartParams",[]),p.setCallback("onStart",A,M.concat(T),v));var C,P,R=l(g,"onUpdate",!1);R&&(C=l(g,"onUpdateScope",E),P=l(g,"onUpdateParams",[]),p.setCallback("onUpdate",R,M.concat(P),C));var D,I,W=l(g,"onLoop",!1);W&&(D=l(g,"onLoopScope",E),I=l(g,"onLoopParams",[]),p.setCallback("onLoop",W,M.concat(I),D));var G,Y,j=l(g,"onYoyo",!1);j&&(G=l(g,"onYoyoScope",E),Y=l(g,"onYoyoParams",[]),p.setCallback("onYoyo",j,M.concat(null,Y),G));var ee,te,F=l(g,"onComplete",!1);F&&(ee=l(g,"onCompleteScope",E),te=l(g,"onCompleteParams",[]),p.setCallback("onComplete",F,M.concat(te),ee));var U=u(g);if(U.length===0)return p.paused=!0,p;var K=n(t);K.targets=a(g);var oe=r(g,"totalDuration",0);K.duration=0<oe?Math.floor(oe/U.length):s(g,"duration",K.duration),K.delay=s(g,"delay",K.delay),K.easeParams=l(g,"easeParams",K.easeParams),K.ease=i(l(g,"ease",K.ease),K.easeParams),K.hold=s(g,"hold",K.hold),K.repeat=s(g,"repeat",K.repeat),K.repeatDelay=s(g,"repeatDelay",K.repeatDelay),K.yoyo=o(g,"yoyo",K.yoyo),K.flipX=o(g,"flipX",K.flipX),K.flipY=o(g,"flipY",K.flipY);for(var ae=0;ae<U.length;ae++)p.queue(h(p,U[ae],K));return p}},function(d,w,e){var n=e(0),t=e(6),r=e(193),o=e(124),i=e(77),s=new n({Extends:t,initialize:function(a){t.call(this),this.manager=a,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=i.PENDING_ADD,this._pausedState=i.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(a,u){this.emit(a,this),u&&u.func.apply(u.scope,u.params)},setTimeScale:function(a){return this.timeScale=a,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===i.ACTIVE},add:function(a){return this.queue(o(this,a))},queue:function(a){return this.isPlaying()||(a.parent=this,a.parentIsTimeline=!0,this.data.push(a),this.totalData=this.data.length),this},hasOffset:function(a){return a.offset!==null},isOffsetAbsolute:function(a){return typeof a=="number"},isOffsetRelative:function(a){if(typeof a=="string"){var u=a[0];if(u==="-"||u==="+")return!0}return!1},getRelativeOffset:function(a,u){var l=a[0],c=parseFloat(a.substr(2)),h=u;switch(l){case"+":h+=c;break;case"-":h-=c}return Math.max(0,h)},calcDuration:function(){for(var a=0,u=0,l=0,c=0;c<this.totalData;c++){var h=this.data[c];h.init(),this.hasOffset(h)?this.isOffsetAbsolute(h.offset)?(h.calculatedOffset=h.offset,h.offset===0&&(l=0)):this.isOffsetRelative(h.offset)&&(h.calculatedOffset=this.getRelativeOffset(h.offset,a)):h.calculatedOffset=l,a=h.totalDuration+h.calculatedOffset,u+=h.totalDuration,l+=h.totalDuration}this.duration=u,this.loopCounter=this.loop===-1?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=i.PAUSED,!1)},resetTweens:function(a){for(var u=0;u<this.totalData;u++)this.data[u].play(a)},setCallback:function(a,u,l,c){return s.TYPES.indexOf(a)!==-1&&(this.callbacks[a]={func:u,scope:c,params:l}),this},makeActive:function(a){return this.manager.makeActive(a)},play:function(){if(this.state!==i.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=i.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=i.LOOP_DELAY):(this.state=i.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=i.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=i.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(a,u){if(this.state!==i.PAUSED){switch(this.useFrames&&(u=+this.manager.timeScale),u*=this.timeScale,this.elapsed+=u,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case i.ACTIVE:for(var l=this.totalData,c=0;c<this.totalData;c++)this.data[c].update(a,u)&&l--;this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),l===0&&this.nextState();break;case i.LOOP_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=i.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case i.COMPLETE_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=i.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===i.PENDING_REMOVE}},stop:function(){this.state=i.PENDING_REMOVE},pause:function(){if(this.state!==i.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=i.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===i.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(a){for(var u=0;u<this.data.length;u++)if(this.data[u].hasTarget(a))return!0;return!1},destroy:function(){for(var a=0;a<this.data.length;a++)this.data[a].stop()}});s.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],d.exports=s},,function(d,w){d.exports=function(e,n,t,r,o){return(l=1-e)*l*l*n+3*(u=1-(a=e))*u*a*t+3*(1-(s=e))*s*s*r+(i=e)*i*i*o;var i,s,a,u,l}},function(d,w){d.exports=function(e,n,t,r){return(s=1-e)*s*n+2*(1-(i=e))*i*t+(o=e)*o*r;var o,i,s}},function(d,w,e){var n=new(e(0))({initialize:function(t,r,o,i){this.x=0,this.y=0,this.z=0,this.w=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=r||0,this.z=o||0,this.w=i||0)},clone:function(){return new n(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,r,o,i){return typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=r||0,this.z=o||0,this.w=i||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,r=this.y,o=this.z,i=this.w;return Math.sqrt(t*t+r*r+o*o+i*i)},lengthSq:function(){var t=this.x,r=this.y,o=this.z,i=this.w;return t*t+r*r+o*o+i*i},normalize:function(){var t=this.x,r=this.y,o=this.z,i=this.w,s=t*t+r*r+o*o+i*i;return 0<s&&(s=1/Math.sqrt(s),this.x=t*s,this.y=r*s,this.z=o*s,this.w=i*s),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,r){r===void 0&&(r=0);var o=this.x,i=this.y,s=this.z,a=this.w;return this.x=o+r*(t.x-o),this.y=i+r*(t.y-i),this.z=s+r*(t.z-s),this.w=a+r*(t.w-a),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var r=t.x-this.x,o=t.y-this.y,i=t.z-this.z||0,s=t.w-this.w||0;return Math.sqrt(r*r+o*o+i*i+s*s)},distanceSq:function(t){var r=t.x-this.x,o=t.y-this.y,i=t.z-this.z||0,s=t.w-this.w||0;return r*r+o*o+i*i+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var r=this.x,o=this.y,i=this.z,s=this.w,a=t.val;return this.x=a[0]*r+a[4]*o+a[8]*i+a[12]*s,this.y=a[1]*r+a[5]*o+a[9]*i+a[13]*s,this.z=a[2]*r+a[6]*o+a[10]*i+a[14]*s,this.w=a[3]*r+a[7]*o+a[11]*i+a[15]*s,this},transformQuat:function(t){var r=this.x,o=this.y,i=this.z,s=t.x,a=t.y,u=t.z,l=t.w,c=l*r+a*i-u*o,h=l*o+u*r-s*i,f=l*i+s*o-a*r,g=-s*r-a*o-u*i;return this.x=c*l+g*-s+h*-u-f*-a,this.y=h*l+g*-a+f*-s-c*-u,this.z=f*l+g*-u+c*-a-h*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});n.prototype.sub=n.prototype.subtract,n.prototype.mul=n.prototype.multiply,n.prototype.div=n.prototype.divide,n.prototype.dist=n.prototype.distance,n.prototype.distSq=n.prototype.distanceSq,n.prototype.len=n.prototype.length,n.prototype.lenSq=n.prototype.lengthSq,d.exports=n},function(d,w){d.exports={setCrisp:function(e){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(n){e.style["image-rendering"]=n}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}}},function(d,w,e){var n=e(412),t=e(30),r=e(0),o=e(32),i=e(413),s=e(78),a=e(27),u=new r({initialize:function(l){this.game=l,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.config={clearBeforeRender:l.config.clearBeforeRender,backgroundColor:l.config.backgroundColor,resolution:l.config.resolution,antialias:l.config.antialias,roundPixels:l.config.roundPixels},this.gameCanvas=l.canvas;var c={alpha:l.config.transparent,desynchronized:l.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",c),this.currentContext=this.gameContext,this.antialias=l.config.antialias,this.blendModes=i(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this._tempMatrix4=new a,this.init()},init:function(){this.game.scale.on(s.RESIZE,this.onResize,this);var l=this.game.scale.baseSize;this.resize(l.width,l.height)},onResize:function(l,c){c.width===this.width&&c.height===this.height||this.resize(c.width,c.height)},resize:function(l,c){this.width=l,this.height=c},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(l){return this.currentContext.globalCompositeOperation=l,this},setContext:function(l){return this.currentContext=l||this.gameContext,this},setAlpha:function(l){return this.currentContext.globalAlpha=l,this},preRender:function(){var l=this.gameContext,c=this.config,h=this.width,f=this.height;l.globalAlpha=1,l.globalCompositeOperation="source-over",l.setTransform(1,0,0,1,0,0),c.clearBeforeRender&&l.clearRect(0,0,h,f),c.transparent||(l.fillStyle=c.backgroundColor.rgba,l.fillRect(0,0,h,f)),l.save(),this.drawCount=0},render:function(l,c,h,f){var g=c.list,p=g.length,v=f._cx,T=f._cy,E=f._cw,M=f._ch,A=f.renderToTexture?f.context:l.sys.context;A.save(),this.game.scene.customViewports&&(A.beginPath(),A.rect(v,T,E,M),A.clip()),this.currentContext=A;var C=f.mask;C&&C.preRenderCanvas(this,null,f._maskCamera),f.transparent||(A.fillStyle=f.backgroundColor.rgba,A.fillRect(v,T,E,M)),A.globalAlpha=f.alpha,A.globalCompositeOperation="source-over",this.drawCount+=g.length,f.renderToTexture&&f.emit(t.PRE_RENDER,f),f.matrix.copyToContext(A);for(var P=0;P<p;P++){var R=g[P];R.willRender(f)&&(R.mask&&R.mask.preRenderCanvas(this,R,f),R.renderCanvas(this,R,h,f),R.mask&&R.mask.postRenderCanvas(this,R,f))}A.setTransform(1,0,0,1,0,0),A.globalCompositeOperation="source-over",A.globalAlpha=1,f.flashEffect.postRenderCanvas(A),f.fadeEffect.postRenderCanvas(A),f.dirty=!1,C&&C.postRenderCanvas(this),A.restore(),f.renderToTexture&&(f.emit(t.POST_RENDER,f),f.renderToGame&&l.sys.context.drawImage(f.canvas,v,T))},postRender:function(){this.gameContext.restore();var l=this.snapshotState;l.callback&&(n(this.gameCanvas,l),l.callback=null)},snapshotCanvas:function(l,c,h,f,g,p,v,T,E){h===void 0&&(h=!1),this.snapshotArea(f,g,p,v,c,T,E);var M=this.snapshotState;return M.getPixel=h,n(this.canvas,M),M.callback=null,this},snapshot:function(l,c,h){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,l,c,h)},snapshotArea:function(l,c,h,f,g,p,v){var T=this.snapshotState;return T.callback=g,T.type=p,T.encoder=v,T.getPixel=!1,T.x=l,T.y=c,T.width=Math.min(h,this.gameCanvas.width),T.height=Math.min(f,this.gameCanvas.height),this},snapshotPixel:function(l,c,h){return this.snapshotArea(l,c,1,1,h),this.snapshotState.getPixel=!0,this},batchSprite:function(l,c,h,f){var g,p,v,T,E,M,A,C,P,R,D,I,W,G,Y,j,ee,te,F=h.alpha*l.alpha;F!=0&&(g=this.currentContext,p=this._tempMatrix1,v=this._tempMatrix2,T=this._tempMatrix3,M=(E=c.canvasData).x,A=E.y,C=c.cutWidth,P=c.cutHeight,R=c.customPivot,D=c.source.resolution,I=l.displayOriginX,W=l.displayOriginY,G=-I+c.x,Y=-W+c.y,l.isCropped&&((j=l._crop).flipX===l.flipX&&j.flipY===l.flipY||c.updateCropUVs(j,l.flipX,l.flipY),C=j.cw,P=j.ch,M=j.cx,A=j.cy,G=-I+j.x,Y=-W+j.y,l.flipX&&(0<=G?G=-(G+C):G<0&&(G=Math.abs(G)-C)),l.flipY&&(0<=Y?Y=-(Y+P):Y<0&&(Y=Math.abs(Y)-P))),te=ee=1,l.flipX&&(R||(G+=-c.realWidth+2*I),ee=-1),l.flipY&&(R||(Y+=-c.realHeight+2*W),te=-1),v.applyITRS(l.x,l.y,l.rotation,l.scaleX*ee,l.scaleY*te),p.copyFrom(h.matrix),f?(p.multiplyWithOffset(f,-h.scrollX*l.scrollFactorX,-h.scrollY*l.scrollFactorY),v.e=l.x,v.f=l.y):(v.e-=h.scrollX*l.scrollFactorX,v.f-=h.scrollY*l.scrollFactorY),p.multiply(v,T),g.save(),T.setToContext(g),g.globalCompositeOperation=this.blendModes[l.blendMode],g.globalAlpha=F,g.imageSmoothingEnabled=!(!this.antialias||c.source.scaleMode),l.mask&&l.mask.preRenderCanvas(this,l,h),g.drawImage(c.source.image,M,A,C,P,G,Y,C/D,P/D),l.mask&&l.mask.postRenderCanvas(this,l,h),g.restore())},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});d.exports=u},function(d,w,e){var n=e(25),t=e(28),r=e(2);d.exports=function(o,i){var s,a,u,l,c=r(i,"callback"),h=r(i,"type","image/png"),f=r(i,"encoder",.92),g=Math.abs(Math.round(r(i,"x",0))),p=Math.abs(Math.round(r(i,"y",0))),v=r(i,"width",o.width),T=r(i,"height",o.height);r(i,"getPixel",!1)?(s=o.getContext("2d").getImageData(g,p,1,1).data,c.call(null,new t(s[0],s[1],s[2],s[3]/255))):g!==0||p!==0||v!==o.width||T!==o.height?((a=n.createWebGL(this,v,T)).getContext("2d").drawImage(o,g,p,v,T,0,0,v,T),(u=new Image).onerror=function(){c.call(null),n.remove(a)},u.onload=function(){c.call(null,u),n.remove(a)},u.src=a.toDataURL(h,f)):((l=new Image).onerror=function(){c.call(null)},l.onload=function(){c.call(null,l)},l.src=o.toDataURL(h,f))}},function(d,w,e){var n=e(56),t=e(259);d.exports=function(){var r=[],o=t.supportNewBlendModes,i="source-over";return r[n.NORMAL]=i,r[n.ADD]="lighter",r[n.MULTIPLY]=o?"multiply":i,r[n.SCREEN]=o?"screen":i,r[n.OVERLAY]=o?"overlay":i,r[n.DARKEN]=o?"darken":i,r[n.LIGHTEN]=o?"lighten":i,r[n.COLOR_DODGE]=o?"color-dodge":i,r[n.COLOR_BURN]=o?"color-burn":i,r[n.HARD_LIGHT]=o?"hard-light":i,r[n.SOFT_LIGHT]=o?"soft-light":i,r[n.DIFFERENCE]=o?"difference":i,r[n.EXCLUSION]=o?"exclusion":i,r[n.HUE]=o?"hue":i,r[n.SATURATION]=o?"saturation":i,r[n.COLOR]=o?"color":i,r[n.LUMINOSITY]=o?"luminosity":i,r[n.ERASE]="destination-out",r[n.SOURCE_IN]="source-in",r[n.SOURCE_OUT]="source-out",r[n.SOURCE_ATOP]="source-atop",r[n.DESTINATION_OVER]="destination-over",r[n.DESTINATION_IN]="destination-in",r[n.DESTINATION_OUT]="destination-out",r[n.DESTINATION_ATOP]="destination-atop",r[n.LIGHTER]="lighter",r[n.COPY]="copy",r[n.XOR]="xor",r}},function(d,w,e){var n=e(90),t=e(30),r=e(0),o=e(32),i=e(15),s=e(101),a=e(1),u=e(78),l=e(65),c=e(102),h=e(27),f=e(14),g=e(415),p=e(416),v=e(417),T=e(201),E=e(418),M=new r({initialize:function(A){var C=A.config,P={alpha:C.transparent,desynchronized:C.desynchronized,depth:!1,antialias:C.antialiasGL,premultipliedAlpha:C.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:C.failIfMajorPerformanceCaveat,powerPreference:C.powerPreference};this.config={clearBeforeRender:C.clearBeforeRender,antialias:C.antialias,backgroundColor:C.backgroundColor,contextCreation:P,resolution:C.resolution,roundPixels:C.roundPixels,maxTextures:C.maxTextures,maxTextureSize:C.maxTextureSize,batchSize:C.batchSize,maxLights:C.maxLights,mipmapFilter:C.mipmapFilter},this.game=A,this.type=o.WEBGL,this.width=0,this.height=0,this.canvas=A.canvas,this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=a,this.contextRestoredHandler=a,this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.defaultCamera=new n(0,0,0,0),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this._tempMatrix4=new h,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.mipmapFilter=null,this.init(this.config)},init:function(A){var C=this.game,P=this.canvas,R=A.backgroundColor,D=C.config.context?C.config.context:P.getContext("webgl",A.contextCreation)||P.getContext("experimental-webgl",A.contextCreation);if(!D||D.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=D;var I=this;this.contextLostHandler=function(te){I.contextLost=!0,I.game.events.emit(i.CONTEXT_LOST,I),te.preventDefault()},this.contextRestoredHandler=function(){I.contextLost=!1,I.init(I.config),I.game.events.emit(i.CONTEXT_RESTORED,I)},P.addEventListener("webglcontextlost",this.contextLostHandler,!1),P.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),C.context=D;for(var W=0;W<=27;W++)this.blendModes.push({func:[D.ONE,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_ADD});this.blendModes[1].func=[D.ONE,D.DST_ALPHA],this.blendModes[2].func=[D.DST_COLOR,D.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[D.ONE,D.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[D.ZERO,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=D.BYTE,this.glFormats[1]=D.SHORT,this.glFormats[2]=D.UNSIGNED_BYTE,this.glFormats[3]=D.UNSIGNED_SHORT,this.glFormats[4]=D.FLOAT,this.glFuncMap={mat2:{func:D.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:D.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:D.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:D.uniform1f,length:1},"1fv":{func:D.uniform1fv,length:1},"1i":{func:D.uniform1i,length:1},"1iv":{func:D.uniform1iv,length:1},"2f":{func:D.uniform2f,length:2},"2fv":{func:D.uniform2fv,length:1},"2i":{func:D.uniform2i,length:2},"2iv":{func:D.uniform2iv,length:1},"3f":{func:D.uniform3f,length:3},"3fv":{func:D.uniform3fv,length:1},"3i":{func:D.uniform3i,length:3},"3iv":{func:D.uniform3iv,length:1},"4f":{func:D.uniform4f,length:4},"4fv":{func:D.uniform4fv,length:1},"4i":{func:D.uniform4i,length:4},"4iv":{func:D.uniform4iv,length:1}};var G=D.getSupportedExtensions();A.maxTextures||(A.maxTextures=D.getParameter(D.MAX_TEXTURE_IMAGE_UNITS)),A.maxTextureSize||(A.maxTextureSize=D.getParameter(D.MAX_TEXTURE_SIZE));var Y="WEBGL_compressed_texture_",j="WEBKIT_"+Y;this.compression.ETC1=D.getExtension(Y+"etc1")||D.getExtension(j+"etc1"),this.compression.PVRTC=D.getExtension(Y+"pvrtc")||D.getExtension(j+"pvrtc"),this.compression.S3TC=D.getExtension(Y+"s3tc")||D.getExtension(j+"s3tc"),this.supportedExtensions=G,D.disable(D.DEPTH_TEST),D.disable(D.CULL_FACE),D.enable(D.BLEND),D.clearColor(R.redGL,R.greenGL,R.blueGL,R.alphaGL),this.mipmapFilter=D[A.mipmapFilter];for(var ee=0;ee<this.currentTextures.length;++ee)this.currentTextures[ee]=null;return this.pipelines={},this.addPipeline("TextureTintPipeline",new T({game:C,renderer:this})),this.addPipeline("TextureTintStripPipeline",new E({game:C,renderer:this})),this.addPipeline("BitmapMaskPipeline",new p({game:C,renderer:this})),this.addPipeline("Light2D",new v({game:C,renderer:this,maxLights:A.maxLights})),this.setBlendMode(o.BlendModes.NORMAL),C.textures.once(c.READY,this.boot,this),this},boot:function(){for(var A in this.pipelines)this.pipelines[A].boot();var C=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=C,this.blankTexture=C;var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,null),P.enable(P.SCISSOR_TEST),this.setPipeline(this.pipelines.TextureTintPipeline),this.game.scale.on(u.RESIZE,this.onResize,this);var R=this.game.scale.baseSize;this.resize(R.width,R.height,this.game.scale.resolution)},onResize:function(A,C,P,R){C.width===this.width&&C.height===this.height&&R===this.resolution||this.resize(C.width,C.height,R)},resize:function(A,C,P){var R=this.gl,D=this.pipelines;for(var I in this.width=A,this.height=C,this.resolution=P,R.viewport(0,0,A,C),D)D[I].resize(A,C,P);return this.drawingBufferHeight=R.drawingBufferHeight,R.scissor(0,R.drawingBufferHeight-C,A,C),this.defaultCamera.setSize(A,C),this},hasExtension:function(A){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(A)},getExtension:function(A){return this.hasExtension(A)?(A in this.extensions||(this.extensions[A]=this.gl.getExtension(A)),this.extensions[A]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(A){return A in this.pipelines},getPipeline:function(A){return this.hasPipeline(A)?this.pipelines[A]:null},removePipeline:function(A){return delete this.pipelines[A],this},addPipeline:function(A,C){return this.hasPipeline(A)?console.warn("Pipeline exists: "+A):this.pipelines[A]=C,C.name=A,this.pipelines[A].resize(this.width,this.height,this.config.resolution),C},pushScissor:function(A,C,P,R,D){D===void 0&&(D=this.drawingBufferHeight);var I=[A,C,P,R];return this.scissorStack.push(I),this.setScissor(A,C,P,R,D),this.currentScissor=I},setScissor:function(A,C,P,R,D){D===void 0&&(D=this.drawingBufferHeight);var I,W,G,Y,j=this.gl,ee=this.currentScissor,te=0<P&&0<R;ee&&te&&(I=ee[0],W=ee[1],G=ee[2],Y=ee[3],te=I!==A||W!==C||G!==P||Y!==R),te&&(this.flush(),j.scissor(A,D-C-R,P,R))},popScissor:function(){var A=this.scissorStack;A.pop();var C=A[A.length-1];C&&this.setScissor(C[0],C[1],C[2],C[3]),this.currentScissor=C},setPipeline:function(A,C){return this.currentPipeline===A&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=A,this.currentPipeline.bind()),this.currentPipeline.onBind(C),this.currentPipeline},hasActiveStencilMask:function(){var A=this.currentMask.mask,C=this.currentCameraMask.mask;return A&&A.isStencil||C&&C.isStencil},rebindPipeline:function(A){var C=this.gl;C.disable(C.DEPTH_TEST),C.disable(C.CULL_FACE),this.hasActiveStencilMask()?C.clear(C.DEPTH_BUFFER_BIT):(C.disable(C.STENCIL_TEST),C.clear(C.DEPTH_BUFFER_BIT|C.STENCIL_BUFFER_BIT)),C.viewport(0,0,this.width,this.height),this.setBlendMode(0,!0),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,this.blankTexture.glTexture),this.currentActiveTextureUnit=0,this.currentTextures[0]=this.blankTexture.glTexture,this.currentPipeline=A,this.currentPipeline.bind(),this.currentPipeline.onBind()},clearPipeline:function(){this.flush(),this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.setBlendMode(0,!0)},setBlendMode:function(A,C){C===void 0&&(C=!1);var P=this.gl,R=this.blendModes[A];return!!(C||A!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==A)&&(this.flush(),P.enable(P.BLEND),P.blendEquation(R.equation),2<R.func.length?P.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):P.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=A,!0)},addBlendMode:function(A,C){return this.blendModes.push({func:A,equation:C})-1},updateBlendMode:function(A,C,P){return this.blendModes[A]&&(this.blendModes[A].func=C,P&&(this.blendModes[A].equation=P)),this},removeBlendMode:function(A){return 17<A&&this.blendModes[A]&&this.blendModes.splice(A,1),this},setBlankTexture:function(A){A===void 0&&(A=!1),!A&&this.currentActiveTextureUnit===0&&this.currentTextures[0]||this.setTexture2D(this.blankTexture.glTexture,0)},setTexture2D:function(A,C,P){P===void 0&&(P=!0);var R=this.gl;return A!==this.currentTextures[C]&&(P&&this.flush(),this.currentActiveTextureUnit!==C&&(R.activeTexture(R.TEXTURE0+C),this.currentActiveTextureUnit=C),R.bindTexture(R.TEXTURE_2D,A),this.currentTextures[C]=A),this},setFramebuffer:function(A,C){C===void 0&&(C=!1);var P=this.gl,R=this.width,D=this.height;return A!==this.currentFramebuffer&&(A&&A.renderTexture?(R=A.renderTexture.width,D=A.renderTexture.height):this.flush(),P.bindFramebuffer(P.FRAMEBUFFER,A),P.viewport(0,0,R,D),C&&(A?(this.drawingBufferHeight=D,this.pushScissor(0,0,R,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=A),this},setProgram:function(A){var C=this.gl;return A!==this.currentProgram&&(this.flush(),C.useProgram(A),this.currentProgram=A),this},setVertexBuffer:function(A){var C=this.gl;return A!==this.currentVertexBuffer&&(this.flush(),C.bindBuffer(C.ARRAY_BUFFER,A),this.currentVertexBuffer=A),this},setIndexBuffer:function(A){var C=this.gl;return A!==this.currentIndexBuffer&&(this.flush(),C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,A),this.currentIndexBuffer=A),this},createTextureFromSource:function(A,C,P,R){var D=this.gl,I=D.NEAREST,W=D.NEAREST,G=D.CLAMP_TO_EDGE;C=A?A.width:C,P=A?A.height:P;var Y=s(C,P);return Y&&(G=D.REPEAT),R===o.ScaleModes.LINEAR&&this.config.antialias&&(I=Y?this.mipmapFilter:D.LINEAR,W=D.LINEAR),A||typeof C!="number"||typeof P!="number"?this.createTexture2D(0,I,W,G,G,D.RGBA,A):this.createTexture2D(0,I,W,G,G,D.RGBA,null,C,P)},createTexture2D:function(A,C,P,R,D,I,W,G,Y,j,ee,te){j=j==null||j,ee===void 0&&(ee=!1),te===void 0&&(te=!1);var F=this.gl,U=F.createTexture();return this.setTexture2D(U,0),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,C),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,P),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,D),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,R),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,te),W==null?F.texImage2D(F.TEXTURE_2D,A,I,G,Y,0,I,F.UNSIGNED_BYTE,null):(ee||(G=W.width,Y=W.height),F.texImage2D(F.TEXTURE_2D,A,I,I,F.UNSIGNED_BYTE,W)),s(G,Y)&&F.generateMipmap(F.TEXTURE_2D),this.setTexture2D(null,0),U.isAlphaPremultiplied=j,U.isRenderTexture=!1,U.width=G,U.height=Y,this.nativeTextures.push(U),U},createFramebuffer:function(A,C,P,R){var D,I,W=this.gl,G=W.createFramebuffer();if(this.setFramebuffer(G),R&&(I=W.createRenderbuffer(),W.bindRenderbuffer(W.RENDERBUFFER,I),W.renderbufferStorage(W.RENDERBUFFER,W.DEPTH_STENCIL,A,C),W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.RENDERBUFFER,I)),P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,P,0),(D=W.checkFramebufferStatus(W.FRAMEBUFFER))===W.FRAMEBUFFER_COMPLETE)return G.renderTexture=P,this.setFramebuffer(null),G;throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[D])},createProgram:function(A,C){var P=this.gl,R=P.createProgram(),D=P.createShader(P.VERTEX_SHADER),I=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(D,A),P.shaderSource(I,C),P.compileShader(D),P.compileShader(I),!P.getShaderParameter(D,P.COMPILE_STATUS))throw new Error(`Failed to compile Vertex Shader:
`+P.getShaderInfoLog(D));if(!P.getShaderParameter(I,P.COMPILE_STATUS))throw new Error(`Failed to compile Fragment Shader:
`+P.getShaderInfoLog(I));if(P.attachShader(R,D),P.attachShader(R,I),P.linkProgram(R),!P.getProgramParameter(R,P.LINK_STATUS))throw new Error(`Failed to link program:
`+P.getProgramInfoLog(R));return R},createVertexBuffer:function(A,C){var P=this.gl,R=P.createBuffer();return this.setVertexBuffer(R),P.bufferData(P.ARRAY_BUFFER,A,C),this.setVertexBuffer(null),R},createIndexBuffer:function(A,C){var P=this.gl,R=P.createBuffer();return this.setIndexBuffer(R),P.bufferData(P.ELEMENT_ARRAY_BUFFER,A,C),this.setIndexBuffer(null),R},deleteTexture:function(A){var C=this.nativeTextures.indexOf(A);return C!==-1&&l(this.nativeTextures,C),this.gl.deleteTexture(A),this.currentTextures[0]!==A||this.game.pendingDestroy||this.setBlankTexture(!0),this},deleteFramebuffer:function(A){return this.gl.deleteFramebuffer(A),this},deleteProgram:function(A){return this.gl.deleteProgram(A),this},deleteBuffer:function(A){return this.gl.deleteBuffer(A),this},preRenderCamera:function(A){var C,P=A._cx,R=A._cy,D=A._cw,I=A._ch,W=this.pipelines.TextureTintPipeline,G=A.backgroundColor;A.renderToTexture?(this.flush(),this.pushScissor(P,R,D,-I),this.setFramebuffer(A.framebuffer),(C=this.gl).clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),W.projOrtho(P,D+P,R,I+R,-1e3,1e3),A.mask&&(this.currentCameraMask.mask=A.mask,this.currentCameraMask.camera=A._maskCamera,A.mask.preRenderWebGL(this,A,A._maskCamera)),0<G.alphaGL&&W.drawFillRect(P,R,D+P,I+R,f.getTintFromFloats(G.redGL,G.greenGL,G.blueGL,1),G.alphaGL),A.emit(t.PRE_RENDER,A)):(this.pushScissor(P,R,D,I),A.mask&&(this.currentCameraMask.mask=A.mask,this.currentCameraMask.camera=A._maskCamera,A.mask.preRenderWebGL(this,A,A._maskCamera)),0<G.alphaGL&&W.drawFillRect(P,R,D,I,f.getTintFromFloats(G.redGL,G.greenGL,G.blueGL,1),G.alphaGL))},getCurrentStencilMask:function(){var A=null,C=this.maskStack,P=this.currentCameraMask;return 0<C.length?A=C[C.length-1]:P.mask&&P.mask.isStencil&&(A=P),A},postRenderCamera:function(A){this.setPipeline(this.pipelines.TextureTintPipeline);var C,P=this.pipelines.TextureTintPipeline;A.flashEffect.postRenderWebGL(P,f.getTintFromFloats),A.fadeEffect.postRenderWebGL(P,f.getTintFromFloats),A.dirty=!1,this.popScissor(),A.renderToTexture&&(P.flush(),this.setFramebuffer(null),A.emit(t.POST_RENDER,A),A.renderToGame&&(P.projOrtho(0,P.width,P.height,0,-1e3,1e3),C=f.getTintAppendFloatAlpha,(A.pipeline?A.pipeline:P).batchTexture(A,A.glTexture,A.width,A.height,A.x,A.y,A.width,A.height,A.zoom,A.zoom,A.rotation,A.flipX,!A.flipY,1,1,0,0,0,0,A.width,A.height,C(A._tintTL,A._alphaTL),C(A._tintTR,A._alphaTR),C(A._tintBL,A._alphaBL),C(A._tintBR,A._alphaBR),A._isTinted&&A.tintFill,0,0,this.defaultCamera,null)),this.setBlankTexture(!0)),A.mask&&(this.currentCameraMask.mask=null,A.mask.postRenderWebGL(this,A._maskCamera))},preRender:function(){if(!this.contextLost){var A,C=this.gl,P=this.pipelines;for(var R in C.bindFramebuffer(C.FRAMEBUFFER,null),this.config.clearBeforeRender&&(A=this.config.backgroundColor,C.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT|C.STENCIL_BUFFER_BIT)),C.enable(C.SCISSOR_TEST),P)P[R].onPreRender();this.currentScissor=[0,0,this.width,this.height],this.scissorStack=[this.currentScissor],this.game.scene.customViewports&&C.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.setPipeline(this.pipelines.TextureTintPipeline)}},render:function(A,C,P,R){if(!this.contextLost){var D=C.list,I=D.length,W=this.pipelines;for(var G in W)W[G].onRender(A,R);if(this.preRenderCamera(R),I===0)return this.setBlendMode(o.BlendModes.NORMAL),void this.postRenderCamera(R);this.currentType="";for(var Y=this.currentMask,j=0;j<I;j++){var ee,te,F=D[j];F.willRender(R)&&(F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode),ee=F.mask,(Y=this.currentMask).mask&&Y.mask!==ee&&Y.mask.postRenderWebGL(this,Y.camera),ee&&Y.mask!==ee&&ee.preRenderWebGL(this,F,R),(te=F.type)!==this.currentType&&(this.newType=!0,this.currentType=te),this.nextTypeMatch=j<I-1&&D[j+1].type===this.currentType,F.renderWebGL(this,F,P,R),this.newType=!1)}(Y=this.currentMask).mask&&Y.mask.postRenderWebGL(this,Y.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(R)}},postRender:function(){if(!this.contextLost){this.flush();var A=this.snapshotState;A.callback&&(g(this.canvas,A),A.callback=null);var C=this.pipelines;for(var P in C)C[P].onPostRender()}},snapshot:function(A,C,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,A,C,P)},snapshotArea:function(A,C,P,R,D,I,W){var G=this.snapshotState;return G.callback=D,G.type=I,G.encoder=W,G.getPixel=!1,G.x=A,G.y=C,G.width=Math.min(P,this.gl.drawingBufferWidth),G.height=Math.min(R,this.gl.drawingBufferHeight),this},snapshotPixel:function(A,C,P){return this.snapshotArea(A,C,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(A,C,P,R,D,I,W,G,Y,j,ee){D===void 0&&(D=!1),I===void 0&&(I=0),W===void 0&&(W=0),G===void 0&&(G=C),Y===void 0&&(Y=P);var te=this.currentFramebuffer;this.snapshotArea(I,W,G,Y,R,j,ee);var F=this.snapshotState;return F.getPixel=D,F.isFramebuffer=!0,F.bufferWidth=C,F.bufferHeight=P,this.setFramebuffer(A),g(this.canvas,F),this.setFramebuffer(te),F.callback=null,F.isFramebuffer=!1,this},canvasToTexture:function(A,C,P,R){return P===void 0&&(P=!1),R===void 0&&(R=!1),C?this.updateCanvasTexture(A,C,R):this.createCanvasTexture(A,P,R)},createCanvasTexture:function(A,C,P){C===void 0&&(C=!1),P===void 0&&(P=!1);var R=this.gl,D=R.NEAREST,I=R.NEAREST,W=A.width,G=A.height,Y=R.CLAMP_TO_EDGE,j=s(W,G);return!C&&j&&(Y=R.REPEAT),this.config.antialias&&(D=j?this.mipmapFilter:R.LINEAR,I=R.LINEAR),this.createTexture2D(0,D,I,Y,Y,R.RGBA,A,W,G,!0,!1,P)},updateCanvasTexture:function(A,C,P){P===void 0&&(P=!1);var R=this.gl,D=A.width,I=A.height;return 0<D&&0<I&&(this.setTexture2D(C,0),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,P),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,A),C.width=D,C.height=I,this.setTexture2D(null,0)),C},createVideoTexture:function(A,C,P){C===void 0&&(C=!1),P===void 0&&(P=!1);var R=this.gl,D=R.NEAREST,I=R.NEAREST,W=A.videoWidth,G=A.videoHeight,Y=R.CLAMP_TO_EDGE,j=s(W,G);return!C&&j&&(Y=R.REPEAT),this.config.antialias&&(D=j?this.mipmapFilter:R.LINEAR,I=R.LINEAR),this.createTexture2D(0,D,I,Y,Y,R.RGBA,A,W,G,!0,!0,P)},updateVideoTexture:function(A,C,P){P===void 0&&(P=!1);var R=this.gl,D=A.videoWidth,I=A.videoHeight;return 0<D&&0<I&&(this.setTexture2D(C,0),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,P),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,A),C.width=D,C.height=I,this.setTexture2D(null,0)),C},setTextureFilter:function(A,C){var P=this.gl,R=[P.LINEAR,P.NEAREST][C];return this.setTexture2D(A,0),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,R),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,R),this.setTexture2D(null,0),this},setFloat1:function(A,C,P){return this.setProgram(A),this.gl.uniform1f(this.gl.getUniformLocation(A,C),P),this},setFloat2:function(A,C,P,R){return this.setProgram(A),this.gl.uniform2f(this.gl.getUniformLocation(A,C),P,R),this},setFloat3:function(A,C,P,R,D){return this.setProgram(A),this.gl.uniform3f(this.gl.getUniformLocation(A,C),P,R,D),this},setFloat4:function(A,C,P,R,D,I){return this.setProgram(A),this.gl.uniform4f(this.gl.getUniformLocation(A,C),P,R,D,I),this},setFloat1v:function(A,C,P){return this.setProgram(A),this.gl.uniform1fv(this.gl.getUniformLocation(A,C),P),this},setFloat2v:function(A,C,P){return this.setProgram(A),this.gl.uniform2fv(this.gl.getUniformLocation(A,C),P),this},setFloat3v:function(A,C,P){return this.setProgram(A),this.gl.uniform3fv(this.gl.getUniformLocation(A,C),P),this},setFloat4v:function(A,C,P){return this.setProgram(A),this.gl.uniform4fv(this.gl.getUniformLocation(A,C),P),this},setInt1:function(A,C,P){return this.setProgram(A),this.gl.uniform1i(this.gl.getUniformLocation(A,C),P),this},setInt2:function(A,C,P,R){return this.setProgram(A),this.gl.uniform2i(this.gl.getUniformLocation(A,C),P,R),this},setInt3:function(A,C,P,R,D){return this.setProgram(A),this.gl.uniform3i(this.gl.getUniformLocation(A,C),P,R,D),this},setInt4:function(A,C,P,R,D,I){return this.setProgram(A),this.gl.uniform4i(this.gl.getUniformLocation(A,C),P,R,D,I),this},setMatrix2:function(A,C,P,R){return this.setProgram(A),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(A,C),P,R),this},setMatrix3:function(A,C,P,R){return this.setProgram(A),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(A,C),P,R),this},setMatrix4:function(A,C,P,R){return this.setProgram(A),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(A,C),P,R),this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var A=0;A<this.nativeTextures.length;A++)this.gl.deleteTexture(this.nativeTextures[A]);for(var C in this.nativeTextures=[],this.pipelines)this.pipelines[C].destroy(),delete this.pipelines[C];this.defaultCamera.destroy(),this.currentMask=null,this.currentCameraMask=null,this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.game=null,this.gl=null,this.canvas=null,this.maskStack=[],this.contextLost=!0,this.extensions={}}});d.exports=M},function(d,w,e){var n=e(25),t=e(28),r=e(2);d.exports=function(o,i){var s=o.getContext("experimental-webgl"),a=r(i,"callback"),u=r(i,"type","image/png"),l=r(i,"encoder",.92),c=r(i,"x",0),h=r(i,"y",0),f=r(i,"getPixel",!1),g=r(i,"isFramebuffer",!1),p=g?r(i,"bufferWidth",1):s.drawingBufferWidth,v=g?r(i,"bufferHeight",1):s.drawingBufferHeight;if(f){var T=new Uint8Array(4),E=g?h:v-h;s.readPixels(c,E,1,1,s.RGBA,s.UNSIGNED_BYTE,T),a.call(null,new t(T[0],T[1],T[2],T[3]/255))}else{var M=r(i,"width",p),A=r(i,"height",v),C=M*A*4,P=new Uint8Array(C);s.readPixels(c,v-h-A,M,A,s.RGBA,s.UNSIGNED_BYTE,P);for(var R=n.createWebGL(this,M,A),D=R.getContext("2d"),I=D.getImageData(0,0,M,A),W=I.data,G=0;G<A;G++)for(var Y=0;Y<M;Y++){var j=4*((A-G)*M+Y),ee=g?C-4*(G*M+(M-Y)):4*(G*M+Y);W[0+ee]=P[0+j],W[1+ee]=P[1+j],W[2+ee]=P[2+j],W[3+ee]=P[3+j]}D.putImageData(I,0,0);var te=new Image;te.onerror=function(){a.call(null),n.remove(R)},te.onload=function(){a.call(null,te),n.remove(R)},te.src=R.toDataURL(u,l)}}},function(d,w,e){var n=e(0),t=e(659),r=e(660),o=e(126),i=new n({Extends:o,initialize:function(s){o.call(this,{game:s.game,renderer:s.renderer,gl:s.renderer.gl,topology:s.topology?s.topology:s.renderer.gl.TRIANGLES,vertShader:s.vertShader?s.vertShader:r,fragShader:s.fragShader?s.fragShader:t,vertexCapacity:s.vertexCapacity?s.vertexCapacity:3,vertexSize:s.vertexSize?s.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:s.renderer.gl.FLOAT,normalized:!1,offset:0}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.maxQuads=1,this.resolutionDirty=!0},onBind:function(){o.prototype.onBind.call(this);var s=this.renderer,a=this.program;return this.resolutionDirty&&(s.setFloat2(a,"uResolution",this.width,this.height),s.setInt1(a,"uMainSampler",0),s.setInt1(a,"uMaskSampler",1),this.resolutionDirty=!1),this},resize:function(s,a,u){return o.prototype.resize.call(this,s,a,u),this.resolutionDirty=!0,this},beginMask:function(s,a,u){var l=this.renderer,c=this.gl;s.bitmapMask&&c&&(l.flush(),s.prevFramebuffer=l.currentFramebuffer,l.setFramebuffer(s.mainFramebuffer),c.disable(c.STENCIL_TEST),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),l.currentCameraMask.mask!==s&&(l.currentMask.mask=s,l.currentMask.camera=u))},endMask:function(s,a){var u,l=this.gl,c=this.renderer,h=s.bitmapMask;h&&l&&(c.flush(),c.setFramebuffer(s.maskFramebuffer),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),c.setBlendMode(0,!0),h.renderWebGL(c,h,0,a),c.flush(),c.setFramebuffer(s.prevFramebuffer),(u=c.getCurrentStencilMask())?(l.enable(l.STENCIL_TEST),u.mask.applyStencil(c,u.camera,!0)):c.currentMask.mask=null,c.setPipeline(this),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,s.maskTexture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,s.mainTexture),l.uniform1i(l.getUniformLocation(this.program,"uInvertMaskAlpha"),s.invertAlpha),l.drawArrays(this.topology,0,3))}});d.exports=i},function(d,w,e){var n=e(0),t=e(661),r=e(201),o=10,i=new n({Extends:r,initialize:function(s){o=s.maxLights,s.fragShader=t.replace("%LIGHT_COUNT%",o.toString()),r.call(this,s),this.defaultNormalMap,this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function(s){r.prototype.onBind.call(this);var a=this.renderer,u=this.program;return this.mvpUpdate(),a.setInt1(u,"uNormSampler",1),a.setFloat2(u,"uResolution",this.width,this.height),s&&this.setNormalMap(s),this},onRender:function(s,a){this.active=!1;var u=s.sys.lights;if(!u||u.lights.length<=0||!u.active)return this;var l=u.cull(a),c=Math.min(l.length,o);if(c===0)return this;this.active=!0;for(var h=this.renderer,f=this.program,g=a.matrix,p={x:0,y:0},v=h.height,T=0;T<o;++T)h.setFloat1(f,"uLights["+T+"].radius",0);for(h.setFloat4(f,"uCamera",a.x,a.y,a.rotation,a.zoom),h.setFloat3(f,"uAmbientLightColor",u.ambientColor.r,u.ambientColor.g,u.ambientColor.b),T=0;T<c;++T){var E=l[T],M="uLights["+T+"].";g.transformPoint(E.x,E.y,p),h.setFloat2(f,M+"position",p.x-a.scrollX*E.scrollFactorX*a.zoom,v-(p.y-a.scrollY*E.scrollFactorY*a.zoom)),h.setFloat3(f,M+"color",E.r,E.g,E.b),h.setFloat1(f,M+"intensity",E.intensity),h.setFloat1(f,M+"radius",E.radius)}return this.currentNormalMapRotation=null,this},batchTexture:function(s,a,u,l,c,h,f,g,p,v,T,E,M,A,C,P,R,D,I,W,G,Y,j,ee,te,F,U,K,oe,ae){var ce,re,ve,Se,de,pe,Ae,Oe,Fe,Ve,ze,Xe,Ge,pt,lt,xt,it,Et,gt,dt,St,mt,Mt,It,kt;this.active&&(this.renderer.setPipeline(this),s.displayTexture?ce=s.displayTexture.dataSource[s.displayFrame.sourceIndex]:s.texture?ce=s.texture.dataSource[s.frame.sourceIndex]:s.tileset&&(ce=Array.isArray(s.tileset)?s.tileset[0].image.dataSource[0]:s.tileset.image.dataSource[0]),ce?(this.setTexture2D(ce.glTexture,1),this.setNormalMapRotation(T),re=this._tempMatrix1,ve=this._tempMatrix2,Se=this._tempMatrix3,de=D/u+U,pe=I/l+K,Ae=(D+W)/u+U,Oe=(I+G)/l+K,Xe=f,Ge=g,Fe=-P,Ve=-R,s.isCropped&&(Xe=(ze=s._crop).width,Ge=ze.height,f=ze.width,g=ze.height,pt=D=ze.x,lt=I=ze.y,E&&(pt=W-ze.x-ze.width),M&&!a.isRenderTexture&&(lt=G-ze.y-ze.height),de=pt/u+U,pe=lt/l+K,Ae=(pt+ze.width)/u+U,Oe=(lt+ze.height)/l+K,Fe=-P+D,Ve=-R+I),E&&(Xe*=-1,Fe+=f),(M^=a.isRenderTexture?1:0)&&(Ge*=-1,Ve+=g),xt=Fe+Xe,it=Ve+Ge,ve.applyITRS(c,h,T,p,v),re.copyFrom(oe.matrix),ae?(re.multiplyWithOffset(ae,-oe.scrollX*A,-oe.scrollY*C),ve.e=c,ve.f=h):(ve.e-=oe.scrollX*A,ve.f-=oe.scrollY*C),re.multiply(ve,Se),Et=Se.getX(Fe,Ve),gt=Se.getY(Fe,Ve),dt=Se.getX(Fe,it),St=Se.getY(Fe,it),mt=Se.getX(xt,it),Mt=Se.getY(xt,it),It=Se.getX(xt,Ve),kt=Se.getY(xt,Ve),oe.roundPixels&&(Et=Math.round(Et),gt=Math.round(gt),dt=Math.round(dt),St=Math.round(St),mt=Math.round(mt),Mt=Math.round(Mt),It=Math.round(It),kt=Math.round(kt)),this.setTexture2D(a,0),this.batchQuad(Et,gt,dt,St,mt,Mt,It,kt,de,pe,Ae,Oe,Y,j,ee,te,F,a,0)):console.warn("Normal map missing or invalid"))},setNormalMap:function(s){var a;this.active&&s&&(s.texture&&(a=s.texture.dataSource[s.frame.sourceIndex]),a=a||this.defaultNormalMap,this.setTexture2D(a.glTexture,1),this.renderer.setPipeline(s.defaultPipeline))},setNormalMapRotation:function(s){var a,u,l,c;s===this.currentNormalMapRotation&&this.batches.length!==0||(0<this.batches.length&&this.flush(),a=this.inverseRotationMatrix,s?(u=-s,l=Math.cos(u),c=Math.sin(u),a[1]=c,a[3]=-c,a[0]=a[4]=l):(a[0]=a[4]=1,a[1]=a[3]=0),this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",!1,a),this.currentNormalMapRotation=s)},batchSprite:function(s,a,u){var l;!this.active||(l=s.texture.dataSource[s.frame.sourceIndex])&&(this.renderer.setPipeline(this),this.setTexture2D(l.glTexture,1),this.setNormalMapRotation(s.rotation),r.prototype.batchSprite.call(this,s,a,u))}});i.LIGHT_COUNT=o,d.exports=i},function(d,w,e){var n=e(0),t=e(2),r=e(202),o=e(279),i=e(280),s=e(27),a=e(126),u=new n({Extends:a,Mixins:[r],initialize:function(l){var c=l.renderer.config;a.call(this,{game:l.game,renderer:l.renderer,gl:l.renderer.gl,topology:l.renderer.gl.TRIANGLE_STRIP,vertShader:t(l,"vertShader",i),fragShader:t(l,"fragShader",o),vertexCapacity:t(l,"vertexCapacity",6*c.batchSize),vertexSize:t(l,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:l.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:l.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:l.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:l.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=c.batchSize,this.batches=[],this._tempMatrix1=new s,this._tempMatrix2=new s,this._tempMatrix3=new s,this.mvpInit()},onBind:function(){return a.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(l,c,h){return a.prototype.resize.call(this,l,c,h),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(l,c){return l===void 0&&(l=this.renderer.blankTexture.glTexture),c===void 0&&(c=0),this.requireTextureBatch(l,c)&&this.pushBatch(l,c),this},requireTextureBatch:function(l,c){var h=this.batches,f=h.length;return!(0<f)||(0<c?h[f-1].textures[c-1]:h[f-1].texture)!==l},pushBatch:function(l,c){var h;c===0?this.batches.push({first:this.vertexCount,texture:l,textures:[]}):((h=[])[c-1]=l,this.batches.push({first:this.vertexCount,texture:null,textures:h}))},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var l,c,h,f=this.gl,g=this.vertexCount,p=this.topology,v=this.vertexSize,T=this.renderer,E=this.batches,M=E.length,A=0,C=null;if(M===0||g===0)return this.flushLocked=!1,this;f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,g*v));for(var P=0;P<M-1;P++){if(C=E[P],l=E[P+1],0<C.textures.length){for(c=0;c<C.textures.length;++c)(h=C.textures[c])&&T.setTexture2D(h,1+c,!1);f.activeTexture(f.TEXTURE0)}A=l.first-C.first,C.texture===null||A<=0||(T.setTexture2D(C.texture,0,!1),f.drawArrays(p,C.first,A))}if(0<(C=E[M-1]).textures.length){for(c=0;c<C.textures.length;++c)(h=C.textures[c])&&T.setTexture2D(h,1+c,!1);f.activeTexture(f.TEXTURE0)}return A=g-C.first,C.texture&&0<A&&(T.setTexture2D(C.texture,0,!1),f.drawArrays(p,C.first,A)),this.vertexCount=0,E.length=0,this.flushLocked=!1,this}});d.exports=u},function(d,w,e){var n=e(146),t=e(0),r=e(127),o=e(4),i=new t({Extends:r,initialize:function(s){s===void 0&&(s=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(s)},addPoints:function(s){for(var a=0;a<s.length;a++){var u=new o;typeof s[a]=="number"?(u.x=s[a],u.y=s[a+1],a++):Array.isArray(s[a])?(u.x=s[a][0],u.y=s[a][1]):(u.x=s[a].x,u.y=s[a].y),this.points.push(u)}return this},addPoint:function(s,a){var u=new o(s,a);return this.points.push(u),u},getStartPoint:function(s){return s===void 0&&(s=new o),s.copy(this.points[0])},getResolution:function(s){return s*this.points.length},getPoint:function(s,a){a===void 0&&(a=new o);var u=this.points,l=(u.length-1)*s,c=Math.floor(l),h=l-c,f=u[c===0?c:c-1],g=u[c],p=u[c>u.length-2?u.length-1:c+1],v=u[c>u.length-3?u.length-1:c+2];return a.set(n(h,f.x,g.x,p.x,v.x),n(h,f.y,g.y,p.y,v.y))},toJSON:function(){for(var s=[],a=0;a<this.points.length;a++)s.push(this.points[a].x),s.push(this.points[a].y);return{type:this.type,points:s}}});i.fromJSON=function(s){return new i(s.points)},d.exports=i},function(d,w,e){var n=e(0),t=e(15),r=e(6),o=e(11),i=e(22),s=e(8),a=e(2),u=e(21),l=e(104),c=new n({Extends:r,initialize:function(h){r.call(this),this.game=h,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],h.isBooted?this.boot():h.events.once(t.BOOT,this.boot,this)},boot:function(){for(var h,f,g,p,v,T,E=this.game.config,M=(M=E.installGlobalPlugins).concat(this._pendingGlobal),A=0;A<M.length;A++)h=M[A],f=a(h,"key",null),g=a(h,"plugin",null),p=a(h,"start",!1),v=a(h,"mapping",null),T=a(h,"data",null),f&&(g?this.install(f,g,p,v,T):console.warn("Missing `plugin` for key: "+f));for(M=(M=E.installScenePlugins).concat(this._pendingScene),A=0;A<M.length;A++)h=M[A],f=a(h,"key",null),g=a(h,"plugin",null),v=a(h,"mapping",null),f&&(g?this.installScenePlugin(f,g,v):console.warn("Missing `plugin` for key: "+f));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(t.DESTROY,this.destroy,this)},addToScene:function(h,f,g){for(var p,v=this.game,T=h.scene,E=h.settings.map,M=h.settings.isBooted,A=0;A<f.length;A++)v[D=f[A]]?(h[D]=v[D],E.hasOwnProperty(D)&&(T[E[D]]=h[D])):D==="game"&&E.hasOwnProperty(D)&&(T[E[D]]=v);for(var C=0;C<g.length;C++)for(p=g[C],A=0;A<p.length;A++){var P,R,D=p[A];u.hasCore(D)&&(R=new(P=u.getCore(D)).plugin(T,this),h[P.mapping]=R,P.custom?T[P.mapping]=R:E.hasOwnProperty(P.mapping)&&(T[E[P.mapping]]=R),M&&R.boot())}for(p=this.plugins,A=0;A<p.length;A++){var I=p[A];I.mapping&&(T[I.mapping]=I.plugin)}},getDefaultScenePlugins:function(){return this.game.config.defaultPlugins.concat(this.scenePlugins)},installScenePlugin:function(h,f,g,p,v){if(v===void 0&&(v=!1),typeof f=="function"){if(u.hasCore(h)){if(!v&&u.hasCore(h))return void console.warn("Scene Plugin key in use: "+h)}else u.register(h,f,g,!0),this.scenePlugins.push(h);var T;p&&(T=new f(p,this),p.sys[h]=T,g&&g!==""&&(p[g]=T),T.boot())}else console.warn("Invalid Scene Plugin: "+h)},install:function(h,f,g,p,v){if(g===void 0&&(g=!1),p===void 0&&(p=null),v===void 0&&(v=null),typeof f!="function")return console.warn("Invalid Plugin: "+h),null;if(u.hasCustom(h))return console.warn("Plugin key in use: "+h),null;if(p!==null&&(g=!0),this.game.isBooted){if(u.registerCustom(h,f,p,v),g)return this.start(h)}else this._pendingGlobal.push({key:h,plugin:f,start:g,mapping:p,data:v});return null},getIndex:function(h){for(var f=this.plugins,g=0;g<f.length;g++)if(f[g].key===h)return g;return-1},getEntry:function(h){var f=this.getIndex(h);if(f!==-1)return this.plugins[f]},isActive:function(h){var f=this.getEntry(h);return f&&f.active},start:function(h,f){f===void 0&&(f=h);var g=this.getEntry(f);return g&&!g.active?(g.active=!0,g.plugin.start()):g=g||this.createEntry(h,f),g?g.plugin:null},createEntry:function(h,f){var g,p=u.getCustom(h);return p&&(p={key:f,plugin:g=new p.plugin(this),active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),g.init(p.data),g.start()),p},stop:function(h){var f=this.getEntry(h);return f&&f.active&&(f.active=!1,f.plugin.stop()),this},get:function(h,f){f===void 0&&(f=!0);var g=this.getEntry(h);if(g)return g.plugin;var p=this.getClass(h);return p&&f?(g=this.createEntry(h,h))?g.plugin:null:p||null},getClass:function(h){return u.getCustomClass(h)},removeGlobalPlugin:function(h){var f=this.getEntry(h);f&&l(this.plugins,f),u.removeCustom(h)},removeScenePlugin:function(h){l(this.scenePlugins,h),u.remove(h)},registerGameObject:function(h,f,g){return f&&s.register(h,f),g&&i.register(h,g),this},removeGameObject:function(h,f,g){return f===void 0&&(f=!0),g===void 0&&(g=!0),f&&s.remove(h),g&&i.remove(h),this},registerFileType:function(h,f,g){o.register(h,f),g&&g.sys.load&&(g.sys.load[h]=f)},destroy:function(){for(var h=0;h<this.plugins.length;h++)this.plugins[h].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});d.exports=c},function(d,w,e){var n=e(12),t=e(0),r=e(79),o=e(4),i=new t({initialize:function(s,a,u,l){s===void 0&&(s=0),a===void 0&&(a=s),u===void 0&&(u=0),l===void 0&&(l=null),this._width=s,this._height=a,this._parent=l,this.aspectMode=u,this.aspectRatio=a===0?1:s/a,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(s){return s===void 0&&(s=0),this.aspectMode=s,this.setSize(this._width,this._height)},setSnap:function(s,a){return s===void 0&&(s=0),a===void 0&&(a=s),this.snapTo.set(s,a),this.setSize(this._width,this._height)},setParent:function(s){return this._parent=s,this.setSize(this._width,this._height)},setMin:function(s,a){return s===void 0&&(s=0),a===void 0&&(a=s),this.minWidth=n(s,0,this.maxWidth),this.minHeight=n(a,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(s,a){return s===void 0&&(s=Number.MAX_VALUE),a===void 0&&(a=s),this.maxWidth=n(s,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(a,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(s,a){switch(s===void 0&&(s=0),a===void 0&&(a=s),this.aspectMode){case i.NONE:this._width=this.getNewWidth(r(s,this.snapTo.x)),this._height=this.getNewHeight(r(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case i.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(s,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case i.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(a,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case i.FIT:this.constrain(s,a,!0);break;case i.ENVELOP:this.constrain(s,a,!1)}return this},setAspectRatio:function(s){return this.aspectRatio=s,this.setSize(this._width,this._height)},resize:function(s,a){return this._width=this.getNewWidth(r(s,this.snapTo.x)),this._height=this.getNewHeight(r(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(s,a){return a===void 0&&(a=!0),s=n(s,this.minWidth,this.maxWidth),a&&this._parent&&s>this._parent.width&&(s=Math.max(this.minWidth,this._parent.width)),s},getNewHeight:function(s,a){return a===void 0&&(a=!0),s=n(s,this.minHeight,this.maxHeight),a&&this._parent&&s>this._parent.height&&(s=Math.max(this.minHeight,this._parent.height)),s},constrain:function(s,a,u){s===void 0&&(s=0),a===void 0&&(a=s),u===void 0&&(u=!0),s=this.getNewWidth(s),a=this.getNewHeight(a);var l=this.snapTo,c=a===0?1:s/a;return u&&this.aspectRatio>c||!u&&this.aspectRatio<c?(a=(s=r(s,l.x))/this.aspectRatio,0<l.y&&(s=(a=r(a,l.y))*this.aspectRatio)):(u&&this.aspectRatio<c||!u&&this.aspectRatio>c)&&(s=(a=r(a,l.y))*this.aspectRatio,0<l.x&&(a=(s=r(s,l.x))*(1/this.aspectRatio))),this._width=s,this._height=a,this},fitTo:function(s,a){return this.constrain(s,a,!0)},envelop:function(s,a){return this.constrain(s,a,!1)},setWidth:function(s){return this.setSize(s,this._height)},setHeight:function(s){return this.setSize(this._width,s)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(s){s&&s.style&&(s.style.width=this._width+"px",s.style.height=this._height+"px")},copy:function(s){return s.setAspectMode(this.aspectMode),s.aspectRatio=this.aspectRatio,s.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(s){this.setSize(s,this._height)}},height:{get:function(){return this._height},set:function(s){this.setSize(this._width,s)}}});i.NONE=0,i.WIDTH_CONTROLS_HEIGHT=1,i.HEIGHT_CONTROLS_WIDTH=2,i.FIT=3,i.ENVELOP=4,d.exports=i},function(d,w,e){var n=e(423),t=e(25),r=e(5);d.exports=function(o){var i=r(o,"data",[]),s=r(o,"canvas",null),a=r(o,"palette",n),u=r(o,"pixelWidth",1),l=r(o,"pixelHeight",u),c=r(o,"resizeCanvas",!0),h=r(o,"clearCanvas",!0),f=r(o,"preRender",null),g=r(o,"postRender",null),p=Math.floor(Math.abs(i[0].length*u)),v=Math.floor(Math.abs(i.length*l));s||(s=t.create2D(this,p,v),h=c=!1),c&&(s.width=p,s.height=v);var T=s.getContext("2d");h&&T.clearRect(0,0,p,v),f&&f(s,T);for(var E=0;E<i.length;E++)for(var M=i[E],A=0;A<M.length;A++){var C=M[A];C!=="."&&C!==" "&&(T.fillStyle=a[C],T.fillRect(A*u,E*l,u,l))}return g&&g(s,T),s}},function(d,w){d.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(d,w){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),t=0;t<e.length;t++)n[e.charCodeAt(t)]=t;d.exports=function(r){var o,i,s,a,u=(r=r.substr(r.indexOf(",")+1)).length,l=.75*u,c=0;r[u-1]==="="&&(l--,r[u-2]==="="&&l--);for(var h=new ArrayBuffer(l),f=new Uint8Array(h),g=0;g<u;g+=4)o=n[r.charCodeAt(g)],i=n[r.charCodeAt(g+1)],s=n[r.charCodeAt(g+2)],a=n[r.charCodeAt(g+3)],f[c++]=o<<2|i>>4,f[c++]=(15&i)<<4|s>>2,f[c++]=(3&s)<<6|63&a;return h}},function(d,w,e){var n=e(0),t=e(24),r=e(26),o=e(11),i=e(2),s=e(426),a=e(9),u=new n({Extends:r,initialize:function(l,c,h,f,g){var p;a(c)&&(c=i(p=c,"key"),f=i(p,"xhrSettings"),g=i(p,"context",g));var v={type:"audio",cache:l.cacheManager.audio,extension:h.type,responseType:"arraybuffer",key:c,url:h.url,xhrSettings:f,config:{context:g}};r.call(this,l,v)},onProcess:function(){this.state=t.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(c){l.data=c,l.onProcessComplete()},function(c){console.error("Error decoding audio: "+l.key+" - ",c?c.message:null),l.onProcessError()}),this.config.context=null}});u.create=function(l,c,h,f,g){var p=l.systems.game,v=p.config.audio,T=p.device.audio;a(c)&&(h=i(c,"url",[]),f=i(c,"config",{}));var E=u.getAudioURL(p,h);return E?!T.webAudio||v&&v.disableWebAudio?new s(l,c,E,f):new u(l,c,E,g,p.sound.context):null},u.getAudioURL=function(l,c){Array.isArray(c)||(c=[c]);for(var h=0;h<c.length;h++){var f=i(c[h],"url",c[h]);if(f.indexOf("blob:")===0||f.indexOf("data:")===0)return{url:f,type:""};var g=f.match(/\.([a-zA-Z0-9]+)($|\?)/),g=i(c[h],"type",g?g[1]:"").toLowerCase();if(l.device.audio[g])return{url:f,type:g}}return null},o.register("audio",function(l,c,h,f){var g,p=this.systems.game,v=p.config.audio,T=p.device.audio;if(v&&v.noAudio||!T.webAudio&&!T.audioData)return this;if(Array.isArray(l))for(var E=0;E<l.length;E++)(g=u.create(this,l[E]))&&this.addFile(g);else(g=u.create(this,l,c,h,f))&&this.addFile(g);return this}),d.exports=u},function(d,w,e){var n=e(0),t=e(81),r=e(26),o=e(2),i=e(132),s=e(9),a=new n({Extends:r,initialize:function(u,l,c,h){var f;s(l)&&(l=o(f=l,"key"),h=o(f,"config",h));var g={type:"audio",cache:u.cacheManager.audio,extension:c.type,key:l,url:c.url,config:h};r.call(this,u,g),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var l=this.data[u];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var l=u.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(t.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0;for(var l=this.percentComplete=0;l<u;l++){var c=new Audio;c.dataset||(c.dataset={}),c.dataset.name=this.key+("0"+l).slice(-2),c.dataset.used="false",this.locked?c.dataset.locked="true":(c.dataset.locked="false",c.preload="auto",c.oncanplaythrough=this.onProgress.bind(this),c.onerror=this.onError.bind(this)),this.data.push(c)}for(l=0;l<this.data.length;l++)(c=this.data[l]).src=i(this,this.loader.baseURL),this.locked||c.load();this.locked&&setTimeout(this.onLoad.bind(this))}});d.exports=a},function(d,w,e){d.exports={AlignTo:e(892),Angle:e(893),Call:e(894),GetFirst:e(895),GetLast:e(896),GridAlign:e(897),IncAlpha:e(898),IncX:e(899),IncXY:e(900),IncY:e(901),PlaceOnCircle:e(902),PlaceOnEllipse:e(903),PlaceOnLine:e(904),PlaceOnRectangle:e(905),PlaceOnTriangle:e(906),PlayAnimation:e(907),PropertyValueInc:e(31),PropertyValueSet:e(23),RandomCircle:e(908),RandomEllipse:e(909),RandomLine:e(910),RandomRectangle:e(911),RandomTriangle:e(912),Rotate:e(913),RotateAround:e(914),RotateAroundDistance:e(915),ScaleX:e(916),ScaleXY:e(917),ScaleY:e(918),SetAlpha:e(919),SetBlendMode:e(920),SetDepth:e(921),SetHitArea:e(922),SetOrigin:e(923),SetRotation:e(924),SetScale:e(925),SetScaleX:e(926),SetScaleY:e(927),SetScrollFactor:e(928),SetScrollFactorX:e(929),SetScrollFactorY:e(930),SetTint:e(931),SetVisible:e(932),SetX:e(933),SetXY:e(934),SetY:e(935),ShiftPosition:e(936),Shuffle:e(937),SmootherStep:e(938),SmoothStep:e(939),Spread:e(940),ToggleVisible:e(941),WrapInRectangle:e(942)}},function(d,w,e){var n=e(135),t=[];t[n.BOTTOM_CENTER]=e(429),t[n.BOTTOM_LEFT]=e(430),t[n.BOTTOM_RIGHT]=e(431),t[n.LEFT_BOTTOM]=e(432),t[n.LEFT_CENTER]=e(433),t[n.LEFT_TOP]=e(434),t[n.RIGHT_BOTTOM]=e(435),t[n.RIGHT_CENTER]=e(436),t[n.RIGHT_TOP]=e(437),t[n.TOP_CENTER]=e(438),t[n.TOP_LEFT]=e(439),t[n.TOP_RIGHT]=e(440),d.exports=function(r,o,i,s,a){return t[i](r,o,s,a)}},function(d,w,e){var n=e(38),t=e(72),r=e(73),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,t(s)+a),o(i,n(s)+u),i}},function(d,w,e){var n=e(38),t=e(39),r=e(44),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,t(s)-a),o(i,n(s)+u),i}},function(d,w,e){var n=e(38),t=e(40),r=e(45),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,t(s)+a),o(i,n(s)+u),i}},function(d,w,e){var n=e(38),t=e(39),r=e(46),o=e(45);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)-a),r(i,n(s)+u),i}},function(d,w,e){var n=e(74),t=e(39),r=e(75),o=e(45);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)-a),r(i,n(s)+u),i}},function(d,w,e){var n=e(39),t=e(41),r=e(45),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,n(s)-a),o(i,t(s)-u),i}},function(d,w,e){var n=e(38),t=e(40),r=e(46),o=e(44);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)+a),r(i,n(s)+u),i}},function(d,w,e){var n=e(74),t=e(40),r=e(75),o=e(44);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)+a),r(i,n(s)+u),i}},function(d,w,e){var n=e(40),t=e(41),r=e(44),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,n(s)+a),o(i,t(s)-u),i}},function(d,w,e){var n=e(72),t=e(41),r=e(46),o=e(73);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,n(s)+a),r(i,t(s)-u),i}},function(d,w,e){var n=e(39),t=e(41),r=e(46),o=e(44);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,n(s)-a),r(i,t(s)-u),i}},function(d,w,e){var n=e(40),t=e(41),r=e(46),o=e(45);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,n(s)+a),r(i,t(s)-u),i}},function(d,w,e){var n=e(135),t=[];t[n.BOTTOM_CENTER]=e(442),t[n.BOTTOM_LEFT]=e(443),t[n.BOTTOM_RIGHT]=e(444),t[n.CENTER]=e(445),t[n.LEFT_CENTER]=e(447),t[n.RIGHT_CENTER]=e(448),t[n.TOP_CENTER]=e(449),t[n.TOP_LEFT]=e(450),t[n.TOP_RIGHT]=e(451),t[n.LEFT_BOTTOM]=t[n.BOTTOM_LEFT],t[n.LEFT_TOP]=t[n.TOP_LEFT],t[n.RIGHT_BOTTOM]=t[n.BOTTOM_RIGHT],t[n.RIGHT_TOP]=t[n.TOP_RIGHT],d.exports=function(r,o,i,s,a){return t[i](r,o,s,a)}},function(d,w,e){var n=e(38),t=e(72),r=e(46),o=e(73);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)+a),r(i,n(s)+u),i}},function(d,w,e){var n=e(38),t=e(39),r=e(46),o=e(44);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)-a),r(i,n(s)+u),i}},function(d,w,e){var n=e(38),t=e(40),r=e(46),o=e(45);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)+a),r(i,n(s)+u),i}},function(d,w,e){var n=e(446),t=e(72),r=e(74);d.exports=function(o,i,s,a){return s===void 0&&(s=0),a===void 0&&(a=0),n(o,t(i)+s,r(i)+a),o}},function(d,w,e){var n=e(73),t=e(75);d.exports=function(r,o,i){return n(r,o),t(r,i)}},function(d,w,e){var n=e(74),t=e(39),r=e(75),o=e(44);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)-a),r(i,n(s)+u),i}},function(d,w,e){var n=e(74),t=e(40),r=e(75),o=e(45);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),o(i,t(s)+a),r(i,n(s)+u),i}},function(d,w,e){var n=e(72),t=e(41),r=e(73),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,n(s)+a),o(i,t(s)-u),i}},function(d,w,e){var n=e(39),t=e(41),r=e(44),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,n(s)-a),o(i,t(s)-u),i}},function(d,w,e){var n=e(40),t=e(41),r=e(45),o=e(43);d.exports=function(i,s,a,u){return a===void 0&&(a=0),u===void 0&&(u=0),r(i,n(s)+a),o(i,t(s)-u),i}},function(d,w,e){var n=e(319);function t(p){if(!(this instanceof t))return new t(p);this._maxEntries=Math.max(4,p||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function r(p,v){o(p,0,p.children.length,v,p)}function o(p,v,T,E,M){(M=M||f(null)).minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var A,C=v;C<T;C++)A=p.children[C],i(M,p.leaf?E(A):A);return M}function i(p,v){return p.minX=Math.min(p.minX,v.minX),p.minY=Math.min(p.minY,v.minY),p.maxX=Math.max(p.maxX,v.maxX),p.maxY=Math.max(p.maxY,v.maxY),p}function s(p,v){return p.minX-v.minX}function a(p,v){return p.minY-v.minY}function u(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function l(p){return p.maxX-p.minX+(p.maxY-p.minY)}function c(p,v){return p.minX<=v.minX&&p.minY<=v.minY&&v.maxX<=p.maxX&&v.maxY<=p.maxY}function h(p,v){return v.minX<=p.maxX&&v.minY<=p.maxY&&v.maxX>=p.minX&&v.maxY>=p.minY}function f(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(p,v,T,E,M){for(var A,C=[v,T];C.length;)(T=C.pop())-(v=C.pop())<=E||(A=v+Math.ceil((T-v)/E/2)*E,n(p,A,v,T,M),C.push(v,A,A,T))}t.prototype={all:function(){return this._all(this.data,[])},search:function(p){var v=this.data,T=[],E=this.toBBox;if(!h(p,v))return T;for(var M,A,C,P,R=[];v;){for(M=0,A=v.children.length;M<A;M++)C=v.children[M],h(p,P=v.leaf?E(C):C)&&(v.leaf?T.push(C):c(p,P)?this._all(C,T):R.push(C));v=R.pop()}return T},collides:function(p){var v=this.data,T=this.toBBox;if(!h(p,v))return!1;for(var E,M,A,C,P=[];v;){for(E=0,M=v.children.length;E<M;E++)if(A=v.children[E],h(p,C=v.leaf?T(A):A)){if(v.leaf||c(p,C))return!0;P.push(A)}v=P.pop()}return!1},load:function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var v=0,T=p.length;v<T;v++)this.insert(p[v]);return this}var E,M=this._build(p.slice(),0,p.length-1,0);return this.data.children.length?this.data.height===M.height?this._splitRoot(this.data,M):(this.data.height<M.height&&(E=this.data,this.data=M,M=E),this._insert(M,this.data.height-M.height-1,!0)):this.data=M,this},insert:function(p){return p&&this._insert(p,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(p,v){if(!p)return this;for(var T,E,M,A,C=this.data,P=this.toBBox(p),R=[],D=[];C||R.length;){if(C||(C=R.pop(),E=R[R.length-1],T=D.pop(),A=!0),C.leaf&&(M=function(I,W,G){if(!G)return W.indexOf(I);for(var Y=0;Y<W.length;Y++)if(G(I,W[Y]))return Y;return-1}(p,C.children,v))!==-1)return C.children.splice(M,1),R.push(C),this._condense(R),this;A||C.leaf||!c(C,P)?E?(T++,C=E.children[T],A=!1):C=null:(R.push(C),D.push(T),T=0,C=(E=C).children[0])}return this},toBBox:function(p){return{minX:p.left,minY:p.top,maxX:p.right,maxY:p.bottom}},compareMinX:function(p,v){return p.left-v.left},compareMinY:function(p,v){return p.top-v.top},toJSON:function(){return this.data},fromJSON:function(p){return this.data=p,this},_all:function(p,v){for(var T=[];p;)p.leaf?v.push.apply(v,p.children):T.push.apply(T,p.children),p=T.pop();return v},_build:function(p,v,T,E){var M,A=T-v+1,C=this._maxEntries;if(A<=C)return r(M=f(p.slice(v,T+1)),this.toBBox),M;E||(E=Math.ceil(Math.log(A)/Math.log(C)),C=Math.ceil(A/Math.pow(C,E-1))),(M=f([])).leaf=!1,M.height=E;var P,R,D,I,W=Math.ceil(A/C),G=W*Math.ceil(Math.sqrt(C));for(g(p,v,T,G,this.compareMinX),P=v;P<=T;P+=G)for(g(p,P,D=Math.min(P+G-1,T),W,this.compareMinY),R=P;R<=D;R+=W)I=Math.min(R+W-1,D),M.children.push(this._build(p,R,I,E-1));return r(M,this.toBBox),M},_chooseSubtree:function(p,v,T,E){for(var M,A,C,P,R,D,I,W,G,Y;E.push(v),!v.leaf&&E.length-1!==T;){for(I=W=1/0,M=0,A=v.children.length;M<A;M++)R=u(C=v.children[M]),G=p,Y=C,(D=(Math.max(Y.maxX,G.maxX)-Math.min(Y.minX,G.minX))*(Math.max(Y.maxY,G.maxY)-Math.min(Y.minY,G.minY))-R)<W?(W=D,I=R<I?R:I,P=C):D===W&&R<I&&(I=R,P=C);v=P||v.children[0]}return v},_insert:function(p,v,T){var E=this.toBBox,M=T?p:E(p),A=[],C=this._chooseSubtree(M,this.data,v,A);for(C.children.push(p),i(C,M);0<=v&&A[v].children.length>this._maxEntries;)this._split(A,v),v--;this._adjustParentBBoxes(M,A,v)},_split:function(p,v){var T=p[v],E=T.children.length,M=this._minEntries;this._chooseSplitAxis(T,M,E);var A=this._chooseSplitIndex(T,M,E),C=f(T.children.splice(A,T.children.length-A));C.height=T.height,C.leaf=T.leaf,r(T,this.toBBox),r(C,this.toBBox),v?p[v-1].children.push(C):this._splitRoot(T,C)},_splitRoot:function(p,v){this.data=f([p,v]),this.data.height=p.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(p,v,T){for(var E,M,A,C,P,R,D,I,W,G,Y,j,ee=P=1/0,te=v;te<=T-v;te++)E=o(p,0,te,this.toBBox),M=o(p,te,T,this.toBBox),D=E,I=M,j=Y=G=W=void 0,W=Math.max(D.minX,I.minX),G=Math.max(D.minY,I.minY),Y=Math.min(D.maxX,I.maxX),j=Math.min(D.maxY,I.maxY),A=Math.max(0,Y-W)*Math.max(0,j-G),C=u(E)+u(M),A<ee?(ee=A,R=te,P=C<P?C:P):A===ee&&C<P&&(P=C,R=te);return R},_chooseSplitAxis:function(p,v,T){var E=p.leaf?this.compareMinX:s,M=p.leaf?this.compareMinY:a;this._allDistMargin(p,v,T,E)<this._allDistMargin(p,v,T,M)&&p.children.sort(E)},_allDistMargin:function(p,v,T,E){p.children.sort(E);for(var M,A=this.toBBox,C=o(p,0,v,A),P=o(p,T-v,T,A),R=l(C)+l(P),D=v;D<T-v;D++)M=p.children[D],i(C,p.leaf?A(M):M),R+=l(C);for(D=T-v-1;v<=D;D--)M=p.children[D],i(P,p.leaf?A(M):M),R+=l(P);return R},_adjustParentBBoxes:function(p,v,T){for(var E=T;0<=E;E--)i(v[E],p)},_condense:function(p){for(var v,T=p.length-1;0<=T;T--)p[T].children.length===0?0<T?(v=p[T-1].children).splice(v.indexOf(p[T]),1):this.clear():r(p[T],this.toBBox)}},d.exports=t},function(d,w,e){var n=e(35),t=e(16)(!1,t={Circle:e(976),Ellipse:e(986),Intersects:e(357),Line:e(1005),Point:e(1027),Polygon:e(1041),Rectangle:e(372),Triangle:e(1072)},n);d.exports=t},function(d,w,e){var n=e(7);d.exports=function(t,r){r===void 0&&(r=new n);for(var o,i=1/0,s=1/0,a=-i,u=-s,l=0;l<t.points.length;l++)o=t.points[l],i=Math.min(i,o.x),s=Math.min(s,o.y),a=Math.max(a,o.x),u=Math.max(u,o.y);return r.x=i,r.y=s,r.width=a-i,r.height=u-s,r}},function(d,w){function e(n,t){return n[0]=t[0],n[1]=t[1],n}d.exports=function(n){for(var t=[],r=n.points,o=0;o<r.length;o++)t.push([r[o].x,r[o].y]);var i=[];for(0<t.length&&i.push(e([0,0],t[0])),o=0;o<t.length-1;o++){var s=t[o],a=t[o+1],u=s[0],l=s[1],c=a[0],h=a[1];i.push([.85*u+.15*c,.85*l+.15*h]),i.push([.15*u+.85*c,.15*l+.85*h])}return 1<t.length&&i.push(e([0,0],t[t.length-1])),n.setTo(i)}},function(d,w,e){var n=e(28);n.ColorToRGBA=e(1094),n.ComponentToHex=e(379),n.GetColor=e(142),n.GetColor32=e(238),n.HexStringToColor=e(237),n.HSLToColor=e(1095),n.HSVColorWheel=e(1096),n.HSVToRGB=e(143),n.HueToComponent=e(380),n.IntegerToColor=e(240),n.IntegerToRGB=e(241),n.Interpolate=e(1097),n.ObjectToColor=e(242),n.RandomRGB=e(1098),n.RGBStringToColor=e(243),n.RGBToHSV=e(239),n.RGBToString=e(1099),n.ValueToColor=e(141),d.exports=n},function(d,w,e){var n=e(183);d.exports=function(t,r){for(var o={},i=0;i<r.length;i++){var s=r[i];n(t,s)&&(o[s]=t[s])}return o}},,function(d,w){var e=function(){return this}();try{e=e||new Function("return this")()}catch(n){typeof window=="object"&&(e=window)}d.exports=e},function(d,w,e){e(461),e(462),e(463),e(464),e(465),e(466),e(467),e(468)},function(d,w){Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(this==null)throw new TypeError;var n=Object(this),t=n.length>>>0;if(typeof e!="function")throw new TypeError;for(var r=2<=arguments.length?arguments[1]:void 0,o=0;o<t;o++)o in n&&e.call(r,n[o],o,n)})},function(d,w){Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"})},function(d,w){function e(n){n&&(n.setTargetAtTime||(n.setTargetAtTime=n.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var n=this.internal_createGain();return e(n.gain),n},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(n){var t=n?this.internal_createDelay(n):this.internal_createDelay();return e(t.delayTime),t},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var n=this.internal_createBufferSource();return n.start?(n.internal_start=n.start,n.start=function(t,r,o){o!==void 0?n.internal_start(t||0,r,o):n.internal_start(t||0,r||0)}):n.start=function(t,r,o){r||o?this.noteGrainOn(t||0,r,o):this.noteOn(t||0)},n.stop?(n.internal_stop=n.stop,n.stop=function(t){n.internal_stop(t||0)}):n.stop=function(t){this.noteOff(t||0)},e(n.playbackRate),n},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var n=this.internal_createDynamicsCompressor();return e(n.threshold),e(n.knee),e(n.ratio),e(n.reduction),e(n.attack),e(n.release),n},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var n=this.internal_createBiquadFilter();return e(n.frequency),e(n.detune),e(n.Q),e(n.gain),n},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var n=this.internal_createOscillator();return n.start?(n.internal_start=n.start,n.start=function(t){n.internal_start(t||0)}):n.start=function(t){this.noteOn(t||0)},n.stop?(n.internal_stop=n.stop,n.stop=function(t){n.internal_stop(t||0)}):n.stop=function(t){this.noteOff(t||0)},n.setPeriodicWave||(n.setPeriodicWave=n.setWaveTable),e(n.frequency),e(n.detune),n})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)},function(d,w){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},function(d,w){Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)})},function(d,w){var e;!("performance"in window)&&(window.performance={}),Date.now=Date.now||function(){return new Date().getTime()},!("now"in window.performance)&&(e=Date.now(),performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e})},function(d,w){for(var e=Date.now(),n=["ms","moz","webkit","o"],t=0;t<n.length&&!window.requestAnimationFrame;t++)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(r){if(typeof r!="function")throw new TypeError(r+"is not a function");var o=Date.now(),i=16+e-o;return i<0&&(i=0),e=o,setTimeout(function(){e=Date.now(),r(performance.now())},i)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){clearTimeout(r)})},function(d,w){var e;typeof window.Uint32Array!="function"&&typeof window.Uint32Array!="object"&&((e=function(n){var t=new Array;window[n]=function(r){if(typeof r=="number"){Array.call(this,r),this.length=r;for(var o=0;o<this.length;o++)this[o]=0}else for(Array.call(this,r.length),this.length=r.length,o=0;o<this.length;o++)this[o]=r[o]},window[n].prototype=t,window[n].constructor=window[n]})("Float32Array"),e("Uint32Array"),e("Uint16Array"),e("Int16Array"),e("ArrayBuffer"))},function(d,w,e){d.exports={Animation:e(136),AnimationFrame:e(215),AnimationManager:e(216),Events:e(94)}},function(d,w){d.exports="add"},function(d,w){d.exports="complete"},function(d,w){d.exports="repeat"},function(d,w){d.exports="restart"},function(d,w){d.exports="start"},function(d,w){d.exports="pauseall"},function(d,w){d.exports="remove"},function(d,w){d.exports="resumeall"},function(d,w){d.exports="animationcomplete"},function(d,w){d.exports="animationcomplete-"},function(d,w){d.exports="animationrepeat-"},function(d,w){d.exports="animationrestart-"},function(d,w){d.exports="animationstart-"},function(d,w){d.exports="animationupdate-"},function(d,w){d.exports="animationrepeat"},function(d,w){d.exports="animationrestart"},function(d,w){d.exports="animationstart"},function(d,w){d.exports="animationupdate"},function(d,w){d.exports="blur"},function(d,w){d.exports="boot"},function(d,w){d.exports="contextlost"},function(d,w){d.exports="contextrestored"},function(d,w){d.exports="destroy"},function(d,w){d.exports="focus"},function(d,w){d.exports="hidden"},function(d,w){d.exports="pause"},function(d,w){d.exports="postrender"},function(d,w){d.exports="poststep"},function(d,w){d.exports="prerender"},function(d,w){d.exports="prestep"},function(d,w){d.exports="ready"},function(d,w){d.exports="resume"},function(d,w){d.exports="step"},function(d,w){d.exports="visible"},function(d,w,e){d.exports={BaseCache:e(217),CacheManager:e(219),Events:e(218)}},function(d,w){d.exports="add"},function(d,w){d.exports="remove"},function(d,w,e){d.exports={Camera:e(220),BaseCamera:e(90),CameraManager:e(575),Effects:e(244),Events:e(30)}},function(d,w,e){var n=e(12),t={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r,o,i,s){return r===void 0&&(r=1),o===void 0?this.alpha=r:(this._alphaTL=n(r,0,1),this._alphaTR=n(o,0,1),this._alphaBL=n(i,0,1),this._alphaBR=n(s,0,1)),this},alpha:{get:function(){return this._alpha},set:function(r){var o=n(r,0,1);this._alpha=o,this._alphaTL=o,this._alphaTR=o,this._alphaBL=o,(this._alphaBR=o)===0?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(r){var o=n(r,0,1);(this._alphaTL=o)!==0&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(r){var o=n(r,0,1);(this._alphaTR=o)!==0&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(r){var o=n(r,0,1);(this._alphaBL=o)!==0&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(r){var o=n(r,0,1);(this._alphaBR=o)!==0&&(this.renderFlags|=2)}}};d.exports=t},function(d,w,e){var n=e(136),t=e(0),r=e(94),o=new t({initialize:function(i){this.parent=i,this.animationManager=i.scene.sys.anims,this.animationManager.once(r.REMOVE_ANIMATION,this.remove,this),this.isPlaying=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this._timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this._delay=0,this._repeat=0,this._repeatDelay=0,this._yoyo=!1,this.forward=!0,this._reverse=!1,this.accumulator=0,this.nextTick=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(i){return i instanceof n&&(i=i.key),this.nextAnim===null?this.nextAnim=i:this.nextAnimsQueue.push(i),this.parent},setDelay:function(i){return i===void 0&&(i=0),this._delay=i,this.parent},getDelay:function(){return this._delay},delayedPlay:function(i,s,a){return this.play(s,!0,a),this.nextTick+=i,this.parent},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},load:function(i,s){return s===void 0&&(s=0),this.isPlaying&&this.stop(),this.animationManager.load(this,i,s),this.parent},pause:function(i){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),i!==void 0&&this.updateFrame(i),this.parent},resume:function(i){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),i!==void 0&&this.updateFrame(i),this.parent},isPaused:{get:function(){return this._paused}},play:function(i,s,a){return s===void 0&&(s=!1),a===void 0&&(a=0),i instanceof n&&(i=i.key),s&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!0,this._reverse=!1,this._paused=!1,this._wasPlaying=!0,this._startAnimation(i,a))},playReverse:function(i,s,a){return s===void 0&&(s=!1),a===void 0&&(a=0),i instanceof n&&(i=i.key),s&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this._reverse=!0,this._startAnimation(i,a))},_startAnimation:function(i,s){this.load(i,s);var a=this.currentAnim,u=this.parent;if(!a)return u;this.repeatCounter=this._repeat===-1?Number.MAX_VALUE:this._repeat,a.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,a.showOnStart&&(u.visible=!0);var l=this.currentFrame;return a.emit(r.ANIMATION_START,a,l,u),u.emit(r.SPRITE_ANIMATION_KEY_START+i,a,l,u),u.emit(r.SPRITE_ANIMATION_START,a,l,u),u},reverse:function(){return this.isPlaying&&(this._reverse=!this._reverse,this.forward=!this.forward),this.parent},getProgress:function(){var i=this.currentFrame.progress;return this.forward||(i=1-i),i},setProgress:function(i){return this.forward||(i=1-i),this.setCurrentFrame(this.currentAnim.getFrameByProgress(i)),this.parent},remove:function(i,s){s===void 0&&(s=this.currentAnim),this.isPlaying&&s.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},getRepeat:function(){return this._repeat},setRepeat:function(i){return this._repeat=i,this.repeatCounter=i===-1?Number.MAX_VALUE:i,this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(i){return this._repeatDelay=i,this.parent},restart:function(i){i===void 0&&(i=!1);var s=this.currentAnim;s.getFirstTick(this,i),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,this._paused=!1,this.updateFrame(s.frames[0]);var a=this.parent,u=this.currentFrame;return s.emit(r.ANIMATION_RESTART,s,u,a),a.emit(r.SPRITE_ANIMATION_KEY_RESTART+s.key,s,u,a),a.emit(r.SPRITE_ANIMATION_RESTART,s,u,a),this.parent},stop:function(){this._pendingStop=0,this.isPlaying=!1;var i,s=this.parent,a=this.currentAnim,u=this.currentFrame;return a&&(a.emit(r.ANIMATION_COMPLETE,a,u,s),s.emit(r.SPRITE_ANIMATION_KEY_COMPLETE+a.key,a,u,s),s.emit(r.SPRITE_ANIMATION_COMPLETE,a,u,s)),this.nextAnim&&(i=this.nextAnim,this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null,this.play(i)),s},stopAfterDelay:function(i){return this._pendingStop=1,this._pendingStopValue=i,this.parent},stopOnRepeat:function(){return this._pendingStop=2,this.parent},stopOnFrame:function(i){return this._pendingStop=3,this._pendingStopValue=i,this.parent},setTimeScale:function(i){return i===void 0&&(i=1),this._timeScale=i,this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(i,s){if(this.currentAnim&&this.isPlaying&&!this.currentAnim.paused){if(this.accumulator+=s*this._timeScale,this._pendingStop===1&&(this._pendingStopValue-=s,this._pendingStopValue<=0))return this.currentAnim.completeAnimation(this);this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this)}},setCurrentFrame:function(i){var s=this.parent;return this.currentFrame=i,s.texture=i.frame.texture,s.frame=i.frame,s.isCropped&&s.frame.updateCropUVs(s._crop,s.flipX,s.flipY),s.setSizeToFrame(),s._originComponent&&(i.frame.customPivot?s.setOrigin(i.frame.pivotX,i.frame.pivotY):s.updateDisplayOrigin()),s},updateFrame:function(i){var s,a=this.setCurrentFrame(i);this.isPlaying&&(i.setAlpha&&(a.alpha=i.alpha),s=this.currentAnim,a.emit(r.SPRITE_ANIMATION_KEY_UPDATE+s.key,s,i,a),a.emit(r.SPRITE_ANIMATION_UPDATE,s,i,a),this._pendingStop===3&&this._pendingStopValue===i&&this.currentAnim.completeAnimation(this))},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},setYoyo:function(i){return i===void 0&&(i=!1),this._yoyo=i,this.parent},getYoyo:function(){return this._yoyo},destroy:function(){this.animationManager.off(r.REMOVE_ANIMATION,this.remove,this),this.animationManager=null,this.parent=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null}});d.exports=o},function(d,w){d.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,n){return this.width=e,this.height=n,this},setDisplaySize:function(e,n){return this.displayWidth=e,this.displayHeight=n,this}}},function(d,w){var e={texture:null,frame:null,isCropped:!1,setCrop:function(n,t,r,o){return n===void 0?this.isCropped=!1:this.frame&&(typeof n=="number"?this.frame.setCropUVs(this._crop,n,t,r,o,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};d.exports=e},function(d,w){d.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,n){return this.flipX=e,this.flipY=n,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(d,w,e){var n=e(7),t=e(226),r=e(4),o={prepareBoundsOutput:function(i,s){return s===void 0&&(s=!1),this.rotation!==0&&t(i,this.x,this.y,this.rotation),s&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(i.x,i.y,i),i},getCenter:function(i){return i===void 0&&(i=new r),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,i},getTopLeft:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,s)},getTopCenter:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,s)},getTopRight:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,s)},getLeftCenter:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,s)},getRightCenter:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,s)},getBottomLeft:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,s)},getBottomCenter:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,s)},getBottomRight:function(i,s){return(i=i||new r).x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,s)},getBounds:function(i){var s,a,u,l,c,h,f,g,p;return i===void 0&&(i=new n),g=(f=(this.parentContainer?(p=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(i),p.transformPoint(i.x,i.y,i),s=i.x,a=i.y,this.getTopRight(i),p.transformPoint(i.x,i.y,i),u=i.x,l=i.y,this.getBottomLeft(i),p.transformPoint(i.x,i.y,i),c=i.x,h=i.y,this.getBottomRight(i),p.transformPoint(i.x,i.y,i)):(this.getTopLeft(i),s=i.x,a=i.y,this.getTopRight(i),u=i.x,l=i.y,this.getBottomLeft(i),c=i.x,h=i.y,this.getBottomRight(i)),i.x),i.y),i.x=Math.min(s,u,c,f),i.y=Math.min(a,l,h,g),i.width=Math.max(s,u,c,f)-i.x,i.height=Math.max(a,l,h,g)-i.y,i}};d.exports=o},function(d,w){var e={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(n){this._displayOriginX=n,this.originX=n/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(n){this._displayOriginY=n,this.originY=n/this.height}},setOrigin:function(n,t){return n===void 0&&(n=.5),t===void 0&&(t=n),this.originX=n,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(n,t){return n===void 0&&(n=0),t===void 0&&(t=n),this.displayOriginX=n,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};d.exports=e},function(d,w,e){var n=e(48),t=e(76),r=e(5),o=e(77),i=e(4),s={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(a,u){u===void 0&&(u=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=a,u&&this.startFollow(u),this},setRotateToPath:function(a,u){return u===void 0&&(u=0),this.rotateToPath=a,this.pathRotationOffset=u,this},isFollowing:function(){var a=this.pathTween;return a&&a.isPlaying()},startFollow:function(a,u){a===void 0&&(a={}),u===void 0&&(u=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof a=="number"&&(a={duration:a}),a.from=r(a,"from",0),a.to=r(a,"to",1);var c=t(a,"positionOnPath",!1);this.rotateToPath=t(a,"rotateToPath",!1),this.pathRotationOffset=r(a,"rotationOffset",0);var h,f=r(a,"startAt",u);return f&&(a.onStart=function(g){var p=g.data[0];p.progress=f,p.elapsed=p.duration*f;var v=p.ease(p.progress);p.current=p.start+(p.end-p.start)*v,p.target[p.key]=p.current}),this.pathOffset||(this.pathOffset=new i(this.x,this.y)),this.pathVector||(this.pathVector=new i),this.pathDelta||(this.pathDelta=new i),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(a),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath&&(h=this.path.getPoint(.1),this.rotation=Math.atan2(h.y-this.y,h.x-this.x)+n(this.pathRotationOffset)),this.pathConfig=a,this},pauseFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.pause(),this},resumeFollow:function(){var a=this.pathTween;return a&&a.isPaused()&&a.resume(),this},stopFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this},pathUpdate:function(){var a=this.pathTween;if(a){var u=a.data[0],l=this.pathDelta,c=this.pathVector;if(l.copy(c).negate(),u.state===o.COMPLETE)return this.path.getPoint(1,c),l.add(c),c.add(this.pathOffset),void this.setPosition(c.x,c.y);if(u.state!==o.PLAYING_FORWARD&&u.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(a.getValue(),c),l.add(c),c.add(this.pathOffset);var h=this.x,f=this.y;this.setPosition(c.x,c.y);var g=this.x-h,p=this.y-f;if(g==0&&p==0)return;if(u.state!==this._prevDirection)return void(this._prevDirection=u.state);this.rotateToPath&&(this.rotation=Math.atan2(p,g)+n(this.pathRotationOffset))}}};d.exports=s},function(d,w){var e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(n){this.scaleX=n/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(n){this.scaleY=n/this.frame.realHeight}},setSizeToFrame:function(n){return n===void 0&&(n=this.frame),this.width=n.realWidth,this.height=n.realHeight,this},setSize:function(n,t){return this.width=n,this.height=t,this},setDisplaySize:function(n,t){return this.displayWidth=n,this.displayHeight=t,this}};d.exports=e},function(d,w){var e={texture:null,frame:null,isCropped:!1,setTexture:function(n,t){return this.texture=this.scene.sys.textures.get(n),this.setFrame(t)},setFrame:function(n,t,r){return t===void 0&&(t=!0),r===void 0&&(r=!0),this.frame=this.texture.get(n),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};d.exports=e},function(d,w){var e={texture:null,frame:null,isCropped:!1,setCrop:function(n,t,r,o){return n===void 0?this.isCropped=!1:this.frame&&(typeof n=="number"?this.frame.setCropUVs(this._crop,n,t,r,o,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(n,t){return this.texture=this.scene.sys.textures.get(n),this.setFrame(t)},setFrame:function(n,t,r){return t===void 0&&(t=!0),r===void 0&&(r=!0),this.frame=this.texture.get(n),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};d.exports=e},function(d,w){function e(t){return(t>>16)+(65280&t)+((255&t)<<16)}var n={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:!1,tintFill:!1,clearTint:function(){return this.setTint(16777215),this._isTinted=!1,this},setTint:function(t,r,o,i){return t===void 0&&(t=16777215),r===void 0&&(i=o=r=t),this._tintTL=e(t),this._tintTR=e(r),this._tintBL=e(o),this._tintBR=e(i),this._isTinted=!0,this.tintFill=!1,this},setTintFill:function(t,r,o,i){return this.setTint(t,r,o,i),this.tintFill=!0,this},tintTopLeft:{get:function(){return this._tintTL},set:function(t){this._tintTL=e(t),this._isTinted=!0}},tintTopRight:{get:function(){return this._tintTR},set:function(t){this._tintTR=e(t),this._isTinted=!0}},tintBottomLeft:{get:function(){return this._tintBL},set:function(t){this._tintBL=e(t),this._isTinted=!0}},tintBottomRight:{get:function(){return this._tintBR},set:function(t){this._tintBR=e(t),this._isTinted=!0}},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){return this._isTinted}}};d.exports=n},function(d,w){d.exports="cameradestroy"},function(d,w){d.exports="camerafadeincomplete"},function(d,w){d.exports="camerafadeinstart"},function(d,w){d.exports="camerafadeoutcomplete"},function(d,w){d.exports="camerafadeoutstart"},function(d,w){d.exports="cameraflashcomplete"},function(d,w){d.exports="cameraflashstart"},function(d,w){d.exports="camerapancomplete"},function(d,w){d.exports="camerapanstart"},function(d,w){d.exports="postrender"},function(d,w){d.exports="prerender"},function(d,w){d.exports="camerarotatecomplete"},function(d,w){d.exports="camerarotatestart"},function(d,w){d.exports="camerashakecomplete"},function(d,w){d.exports="camerashakestart"},function(d,w){d.exports="camerazoomcomplete"},function(d,w){d.exports="camerazoomstart"},function(d,w,e){var n=e(12),t=e(0),r=e(30),o=new t({initialize:function(i){this.camera=i,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,s,a,u,l,c,h,f){if(i===void 0&&(i=!0),s===void 0&&(s=1e3),a===void 0&&(a=0),u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=!1),h===void 0&&(h=null),f===void 0&&(f=this.camera.scene),!c&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=s,this.direction=i,this.progress=0,this.red=a,this.green=u,this.blue=l,this.alpha=i?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=h,this._onUpdateScope=f;var g=i?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(g,this.camera,this,s,a,u,l),this.camera},update:function(i,s){this.isRunning&&(this._elapsed+=s,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(i){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(s._cx,s._cy,s._cw,s._ch),!0},postRenderWebGL:function(i,s){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera,u=this.red/255,l=this.blue/255,c=this.green/255;return i.drawFillRect(a._cx,a._cy,a._cw,a._ch,s(u,c,l,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var i=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(i,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});d.exports=o},function(d,w,e){var n=e(12),t=e(0),r=e(30),o=new t({initialize:function(i){this.camera=i,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,s,a,u,l,c,h){return i===void 0&&(i=250),s===void 0&&(s=255),a===void 0&&(a=255),u===void 0&&(u=255),l===void 0&&(l=!1),c===void 0&&(c=null),h===void 0&&(h=this.camera.scene),!l&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.red=s,this.green=a,this.blue=u,this.alpha=1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=h,this.camera.emit(r.FLASH_START,this.camera,this,i,s,a,u)),this.camera},update:function(i,s){this.isRunning&&(this._elapsed+=s,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(i){if(!this.isRunning)return!1;var s=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(s._cx,s._cy,s._cw,s._ch),!0},postRenderWebGL:function(i,s){if(!this.isRunning)return!1;var a=this.camera,u=this.red/255,l=this.blue/255,c=this.green/255;return i.drawFillRect(a._cx,a._cy,a._cw,a._ch,s(u,c,l,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});d.exports=o},function(d,w,e){var n=e(12),t=e(0),r=e(97),o=e(30),i=e(4),s=new t({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=new i,this.current=new i,this.destination=new i,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,u,l,c,h,f,g){l===void 0&&(l=1e3),c===void 0&&(c=r.Linear),h===void 0&&(h=!1),f===void 0&&(f=null),g===void 0&&(g=this.camera.scene);var p=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(a,u),p.getScroll(a,u,this.current),typeof c=="string"&&r.hasOwnProperty(c)?this.ease=r[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=g,this.camera.emit(o.PAN_START,this.camera,this,l,a,u)),p},update:function(a,u){var l,c,h,f,g;this.isRunning&&(this._elapsed+=u,l=n(this._elapsed/this.duration,0,1),this.progress=l,c=this.camera,this._elapsed<this.duration?(h=this.ease(l),c.getScroll(this.destination.x,this.destination.y,this.current),f=this.source.x+(this.current.x-this.source.x)*h,g=this.source.y+(this.current.y-this.source.y)*h,c.setScroll(f,g),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,l,f,g)):(c.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,l,c.scrollX,c.scrollY),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});d.exports=s},function(d,w){d.exports=function(e,n){return n===void 0&&(n=1.70158),e*e*((n+1)*e-n)}},function(d,w){d.exports=function(e,n){return n===void 0&&(n=1.70158),--e*e*((n+1)*e+n)+1}},function(d,w){d.exports=function(e,n){n===void 0&&(n=1.70158);var t=1.525*n;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},function(d,w){d.exports=function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}},function(d,w){d.exports=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},function(d,w){d.exports=function(e){var n=!1;return e<.5?(e=1-2*e,n=!0):e=2*e-1,e<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,n?.5*(1-e):.5*e+.5}},function(d,w){d.exports=function(e){return 1-Math.sqrt(1-e*e)}},function(d,w){d.exports=function(e){return Math.sqrt(1- --e*e)}},function(d,w){d.exports=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},function(d,w){d.exports=function(e){return e*e*e}},function(d,w){d.exports=function(e){return--e*e*e+1}},function(d,w){d.exports=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},function(d,w){d.exports=function(e,n,t){if(n===void 0&&(n=.1),t===void 0&&(t=.1),e===0)return 0;if(e===1)return 1;var r=t/4;return n<1?n=1:r=t*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*--e)*Math.sin((e-r)*(2*Math.PI)/t))}},function(d,w){d.exports=function(e,n,t){if(n===void 0&&(n=.1),t===void 0&&(t=.1),e===0)return 0;if(e===1)return 1;var r=t/4;return n<1?n=1:r=t*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-r)*(2*Math.PI)/t)+1}},function(d,w){d.exports=function(e,n,t){if(n===void 0&&(n=.1),t===void 0&&(t=.1),e===0)return 0;if(e===1)return 1;var r=t/4;return n<1?n=1:r=t*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*--e)*Math.sin((e-r)*(2*Math.PI)/t)*-.5:n*Math.pow(2,-10*--e)*Math.sin((e-r)*(2*Math.PI)/t)*.5+1}},function(d,w){d.exports=function(e){return Math.pow(2,10*(e-1))-.001}},function(d,w){d.exports=function(e){return 1-Math.pow(2,-10*e)}},function(d,w){d.exports=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}},function(d,w){d.exports=function(e){return e}},function(d,w){d.exports=function(e){return e*e}},function(d,w){d.exports=function(e){return e*(2-e)}},function(d,w){d.exports=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},function(d,w){d.exports=function(e){return e*e*e*e}},function(d,w){d.exports=function(e){return 1- --e*e*e*e}},function(d,w){d.exports=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},function(d,w){d.exports=function(e){return e*e*e*e*e}},function(d,w){d.exports=function(e){return--e*e*e*e*e+1}},function(d,w){d.exports=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},function(d,w){d.exports=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)}},function(d,w){d.exports=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)}},function(d,w){d.exports=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))}},function(d,w){d.exports=function(e,n){return n===void 0&&(n=1),e<=0?0:1<=e?1:1/n*(1+(n*e|0))}},function(d,w,e){var n=e(12),t=e(0),r=e(30),o=e(4),i=new t({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(s,a,u,l,c){return s===void 0&&(s=100),a===void 0&&(a=.05),u===void 0&&(u=!1),l===void 0&&(l=null),c===void 0&&(c=this.camera.scene),!u&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,typeof a=="number"?this.intensity.set(a):this.intensity.set(a.x,a.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=c,this.camera.emit(r.SHAKE_START,this.camera,this,s,a)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(s,a){var u,l,c,h;this.isRunning&&(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?(u=this.intensity,l=this.camera._cw,c=this.camera._ch,h=this.camera.zoom,this._offsetX=(Math.random()*u.x*l*2-u.x*l)*h,this._offsetY=(Math.random()*u.y*c*2-u.y*c)*h,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))):this.effectComplete())},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});d.exports=i},function(d,w,e){var n=e(12),t=e(0),r=e(30),o=e(97),i=new t({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(s,a,u,l,c,h,f){u===void 0&&(u=1e3),l===void 0&&(l=o.Linear),c===void 0&&(c=!1),h===void 0&&(h=null),f===void 0&&(f=this.camera.scene),a===void 0&&(a=!1),this.shortestPath=a;var g=s;s<0?(g=-1*s,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;g-=Math.floor(g/p)*p;var v,T,E=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source=E.rotation,this.destination=g,typeof l=="string"&&o.hasOwnProperty(l)?this.ease=o[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=h,this._onUpdateScope=f,this.shortestPath&&(T=v=0,(v=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+p)-this.source)<(T=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+p)-this.destination)?this.clockwise=!0:T<v&&(this.clockwise=!1)),this.camera.emit(r.ROTATE_START,this.camera,this,u,g)),E},update:function(s,a){var u,l,c,h,f,g,p,v;this.isRunning&&(this._elapsed+=a,u=n(this._elapsed/this.duration,0,1),this.progress=u,l=this.camera,this._elapsed<this.duration?(c=this.ease(u),this.current=l.rotation,h=0,f=360*Math.PI/180,g=this.destination,p=this.current,this.clockwise===!1&&(g=this.current,p=this.destination),h=p<=g?Math.abs(g-p):Math.abs(g+f)-p,v=0,v=this.clockwise?l.rotation+h*c:l.rotation-h*c,l.rotation=v,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,u,v)):(l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,u,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});d.exports=i},function(d,w,e){var n=e(12),t=e(0),r=e(97),o=e(30),i=new t({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,a,u,l,c,h){a===void 0&&(a=1e3),u===void 0&&(u=r.Linear),l===void 0&&(l=!1),c===void 0&&(c=null),h===void 0&&(h=this.camera.scene);var f=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source=f.zoom,this.destination=s,typeof u=="string"&&r.hasOwnProperty(u)?this.ease=r[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=h,this.camera.emit(o.ZOOM_START,this.camera,this,a,s)),f},update:function(s,a){this.isRunning&&(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});d.exports=i},function(d,w,e){var n=e(220),t=e(0),r=e(2),o=e(21),i=e(34),s=e(78),a=e(18),u=new t({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(a.BOOT,this.boot,this),l.sys.events.on(a.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(s.RESIZE,this.onResize,this),this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var l;this.main||((l=this.systems).settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]);var c=this.systems.events;c.on(a.UPDATE,this.update,this),c.once(a.SHUTDOWN,this.shutdown,this)},add:function(l,c,h,f,g,p){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=this.scene.sys.scale.width),f===void 0&&(f=this.scene.sys.scale.height),g===void 0&&(g=!1),p===void 0&&(p="");var v=new n(l,c,h,f);return v.setName(p),v.setScene(this.scene),v.setRoundPixels(this.roundPixels),v.id=this.getNextID(),this.cameras.push(v),g&&(this.main=v),v},addExisting:function(l,c){return c===void 0&&(c=!1),this.cameras.indexOf(l)===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),c&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,c=1,h=0;h<32;h++){for(var f=!1,g=0;g<l.length;g++){var p=l[g];p&&p.id===c&&(f=!0)}if(!f)return c;c<<=1}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var c=0,h=this.cameras,f=0;f<h.length;f++){var g=h[f];(!l||l&&g.visible)&&c++}return c},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var c=this.scene.sys.scale.width,h=this.scene.sys.scale.height,f=0;f<l.length;f++){var g=l[f],p=r(g,"x",0),v=r(g,"y",0),T=r(g,"width",c),E=r(g,"height",h),M=this.add(p,v,T,E);M.name=r(g,"name",""),M.zoom=r(g,"zoom",1),M.rotation=r(g,"rotation",0),M.scrollX=r(g,"scrollX",0),M.scrollY=r(g,"scrollY",0),M.roundPixels=r(g,"roundPixels",!1),M.visible=r(g,"visible",!0);var A=r(g,"backgroundColor",!1);A&&M.setBackgroundColor(A);var C,P,R,D,I=r(g,"bounds",null);I&&(C=r(I,"x",0),P=r(I,"y",0),R=r(I,"width",c),D=r(I,"height",h),M.setBounds(C,P,R,D))}return this},getCamera:function(l){for(var c=this.cameras,h=0;h<c.length;h++)if(c[h].name===l)return c[h];return null},getCamerasBelowPointer:function(l){for(var c=this.cameras,h=l.x,f=l.y,g=[],p=0;p<c.length;p++){var v=c[p];v.visible&&v.inputEnabled&&i(v,h,f)&&g.unshift(v)}return g},remove:function(l,c){c===void 0&&(c=!0),Array.isArray(l)||(l=[l]);for(var h=0,f=this.cameras,g=0;g<l.length;g++){var p=f.indexOf(l[g]);p!==-1&&(c&&f[p].destroy(),f.splice(p,1),h++)}return!this.main&&f[0]&&(this.main=f[0]),h},render:function(l,c,h){for(var f=this.scene,g=this.cameras,p=0;p<this.cameras.length;p++){var v=g[p];v.visible&&0<v.alpha&&(v.preRender(1),l.render(f,c,h,v))}},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,c){for(var h=0;h<this.cameras.length;h++)this.cameras[h].update(l,c)},onResize:function(l,c,h,f,g,p){for(var v=0;v<this.cameras.length;v++){var T=this.cameras[v];T._x===0&&T._y===0&&T._width===g&&T._height===p&&T.setSize(c.width,c.height)}},resize:function(l,c){for(var h=0;h<this.cameras.length;h++)this.cameras[h].setSize(l,c)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var c=this.systems.events;c.off(a.UPDATE,this.update,this),c.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",u,"cameras"),d.exports=u},function(d,w){d.exports="enterfullscreen"},function(d,w){d.exports="fullscreenfailed"},function(d,w){d.exports="fullscreenunsupported"},function(d,w){d.exports="leavefullscreen"},function(d,w){d.exports="orientationchange"},function(d,w){d.exports="resize"},function(d,w){d.exports="boot"},function(d,w){d.exports="create"},function(d,w){d.exports="destroy"},function(d,w){d.exports="pause"},function(d,w){d.exports="postupdate"},function(d,w){d.exports="preupdate"},function(d,w){d.exports="ready"},function(d,w){d.exports="render"},function(d,w){d.exports="resume"},function(d,w){d.exports="shutdown"},function(d,w){d.exports="sleep"},function(d,w){d.exports="start"},function(d,w){d.exports="transitioncomplete"},function(d,w){d.exports="transitioninit"},function(d,w){d.exports="transitionout"},function(d,w){d.exports="transitionstart"},function(d,w){d.exports="transitionwake"},function(d,w){d.exports="update"},function(d,w){d.exports="wake"},function(d,w,e){d.exports={Config:e(257),CreateRenderer:e(278),DebugHeader:e(281),Events:e(15),TimeStep:e(282),VisibilityHandler:e(284)}},function(d,w){var e,n,t=d.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(p){if(e===setTimeout)return setTimeout(p,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(p,0);try{return e(p,0)}catch(v){try{return e.call(null,p,0)}catch(T){return e.call(this,p,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:r}catch(p){e=r}try{n=typeof clearTimeout=="function"?clearTimeout:o}catch(p){n=o}})();var s,a=[],u=!1,l=-1;function c(){u&&s&&(u=!1,s.length?a=s.concat(a):l=-1,a.length&&h())}function h(){if(!u){var p=i(c);u=!0;for(var v=a.length;v;){for(s=a,a=[];++l<v;)s&&s[l].run();l=-1,v=a.length}s=null,u=!1,function(T){if(n===clearTimeout)return clearTimeout(T);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(T);try{n(T)}catch(E){try{return n.call(null,T)}catch(M){return n.call(this,T)}}}(p)}}function f(p,v){this.fun=p,this.array=v}function g(){}t.nextTick=function(p){var v=new Array(arguments.length-1);if(1<arguments.length)for(var T=1;T<arguments.length;T++)v[T-1]=arguments[T];a.push(new f(p,v)),a.length!==1||u||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(p){return[]},t.binding=function(p){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(p){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(d,w,e){var n=e(100),t={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};d.exports=(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)&&(t.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(t.mspointer=!0),navigator.getGamepads&&(t.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?t.wheelEvent="wheel":"onmousewheel"in window?t.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(t.wheelEvent="DOMMouseScroll"),t)},function(d,w,e){var n=e(100),t={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};d.exports=function(){t.audioData=!!window.Audio,t.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var r,o,i=document.createElement("audio"),s=!!i.canPlayType;try{s&&(i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(t.ogg=!0),(i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||i.canPlayType("audio/opus;").replace(/^no$/,""))&&(t.opus=!0),i.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(t.mp3=!0),i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(t.wav=!0),(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;").replace(/^no$/,""))&&(t.m4a=!0),i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(t.webm=!0),i.canPlayType('audio/mp4;codecs="ec-3"')!==""&&(n.edge?t.dolby=!0:n.safari&&9<=n.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(r=parseInt(RegExp.$1,10),o=parseInt(RegExp.$2,10),(r===10&&11<=o||10<r)&&(t.dolby=!0))))}catch(a){}return t}()},function(d,w){var e={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};d.exports=function(){var n=document.createElement("video"),t=!!n.canPlayType;try{t&&(n.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(e.ogg=!0),n.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.h264=!0,e.mp4=!0),n.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(e.webm=!0),n.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(e.vp9=!0),n.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.hls=!0))}catch(r){}return e}()},function(d,w){var e={available:!1,cancel:"",keyboard:!1,request:""};d.exports=function(){for(var n="Fullscreen",t="FullScreen",r=["request"+n,"request"+t,"webkitRequest"+n,"webkitRequest"+t,"msRequest"+n,"msRequest"+t,"mozRequest"+t,"mozRequest"+n],o=0;o<r.length;o++)if(document.documentElement[r[o]]){e.available=!0,e.request=r[o];break}var i=["cancel"+t,"exit"+n,"webkitCancel"+t,"webkitExit"+n,"msCancel"+t,"msExit"+n,"mozCancel"+t,"mozExit"+n];if(e.available){for(o=0;o<i.length;o++)if(document[i[o]]){e.cancel=i[o];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}()},function(d,w,e){d.exports={Between:e(260),BetweenPoints:e(261),BetweenPointsY:e(608),BetweenY:e(609),CounterClockwise:e(610),Normalize:e(262),Random:e(611),RandomDegrees:e(612),Reverse:e(613),RotateTo:e(614),ShortestBetween:e(615),Wrap:e(234),WrapDegrees:e(235)}},function(d,w){d.exports=function(e,n){return Math.atan2(n.x-e.x,n.y-e.y)}},function(d,w){d.exports=function(e,n,t,r){return Math.atan2(t-e,r-n)}},function(d,w,e){var n=e(10);d.exports=function(t){return t>Math.PI&&(t-=n.PI2),Math.abs(((t+n.TAU)%n.PI2-n.PI2)%n.PI2)}},function(d,w,e){var n=e(125);d.exports=function(){return n(-Math.PI,Math.PI)}},function(d,w,e){var n=e(125);d.exports=function(){return n(-180,180)}},function(d,w,e){var n=e(262);d.exports=function(t){return n(t+Math.PI)}},function(d,w,e){var n=e(10);d.exports=function(t,r,o){return o===void 0&&(o=.05),t===r||(Math.abs(r-t)<=o||Math.abs(r-t)>=n.PI2-o?t=r:(Math.abs(r-t)>Math.PI&&(r<t?r+=n.PI2:r-=n.PI2),t<r?t+=o:r<t&&(t-=o))),t}},function(d,w){d.exports=function(e,n){var t=n-e;return t==0?0:t-360*Math.floor((t+180)/360)}},function(d,w,e){d.exports={Between:e(54),BetweenPoints:e(263),BetweenPointsSquared:e(617),Chebyshev:e(618),Power:e(619),Snake:e(620),Squared:e(264)}},function(d,w){d.exports=function(e,n){var t=e.x-n.x,r=e.y-n.y;return t*t+r*r}},function(d,w){d.exports=function(e,n,t,r){return Math.max(Math.abs(e-t),Math.abs(n-r))}},function(d,w){d.exports=function(e,n,t,r,o){return o===void 0&&(o=2),Math.sqrt(Math.pow(t-e,o)+Math.pow(r-n,o))}},function(d,w){d.exports=function(e,n,t,r){return Math.abs(e-t)+Math.abs(n-r)}},function(d,w,e){d.exports={Back:e(245),Bounce:e(246),Circular:e(247),Cubic:e(248),Elastic:e(249),Expo:e(250),Linear:e(251),Quadratic:e(252),Quartic:e(253),Quintic:e(254),Sine:e(255),Stepped:e(256)}},function(d,w,e){d.exports={Ceil:e(623),Equal:e(96),Floor:e(624),GreaterThan:e(265),LessThan:e(266)}},function(d,w){d.exports=function(e,n){return n===void 0&&(n=1e-4),Math.ceil(e-n)}},function(d,w){d.exports=function(e,n){return n===void 0&&(n=1e-4),Math.floor(e+n)}},function(d,w,e){d.exports={Bezier:e(626),CatmullRom:e(627),CubicBezier:e(407),Linear:e(628),QuadraticBezier:e(408),SmoothStep:e(269),SmootherStep:e(629)}},function(d,w,e){var n=e(267);d.exports=function(t,r){for(var o=0,i=t.length-1,s=0;s<=i;s++)o+=Math.pow(1-r,i-s)*Math.pow(r,s)*t[s]*n(i,s);return o}},function(d,w,e){var n=e(146);d.exports=function(t,r){var o=t.length-1,i=o*r,s=Math.floor(i);return t[0]===t[o]?(r<0&&(s=Math.floor(i=o*(1+r))),n(i-s,t[(s-1+o)%o],t[s],t[(s+1)%o],t[(s+2)%o])):r<0?t[0]-(n(-i,t[0],t[0],t[1],t[1])-t[0]):1<r?t[o]-(n(i-o,t[o],t[o],t[o-1],t[o-1])-t[o]):n(i-s,t[s?s-1:0],t[s],t[o<s+1?o:s+1],t[o<s+2?o:s+2])}},function(d,w,e){var n=e(98);d.exports=function(t,r){var o=t.length-1,i=o*r,s=Math.floor(i);return r<0?n(t[0],t[1],i):1<r?n(t[o],t[o-1],o-i):n(t[s],t[o<s+1?o:s+1],i-s)}},function(d,w,e){var n=e(148);d.exports=function(t,r,o){return r+(o-r)*n(t,0,1)}},function(d,w,e){d.exports={GetNext:e(270),IsSize:e(101),IsValue:e(631)}},function(d,w){d.exports=function(e){return 0<e&&(e&e-1)==0}},function(d,w,e){d.exports={Ceil:e(271),Floor:e(79),To:e(633)}},function(d,w){d.exports=function(e,n,t,r){return t===void 0&&(t=0),n===0?e:(e-=t,e=n*Math.round(e/n),r?(t+e)/n:t+e)}},function(d,w,e){var n=new(e(0))({initialize:function(t){t===void 0&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+23283064365386963e-26*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var r,o=this.n;t=t.toString();for(var i=0;i<t.length;i++)r=.02519603282416938*(o+=t.charCodeAt(i)),r-=o=r>>>0,o=(r*=o)>>>0,o+=4294967296*(r-=o);return 23283064365386963e-26*((this.n=o)>>>0)},init:function(t){typeof t=="string"?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var r=0;r<t.length&&t[r]!=null;r++){var o=t[r];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,r){return Math.floor(this.realInRange(0,r-t+1)+t)},between:function(t,r){return Math.floor(this.realInRange(0,r-t+1)+t)},realInRange:function(t,r){return this.frac()*(r-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){for(var t="",r="",r=t="";t++<36;r+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return r},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,r){return this.realInRange(t||9466848e5,r||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return typeof t=="string"&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var r=t.length-1;0<r;r--){var o=Math.floor(this.frac()*(r+1)),i=t[o];t[o]=t[r],t[r]=i}return t}});d.exports=n},function(d,w){d.exports=function(e){for(var n=0,t=0;t<e.length;t++)n+=+e[t];return n/e.length}},function(d,w){d.exports=function(e,n,t){n===void 0&&(n=0),t===void 0&&(t=10);var r=Math.pow(t,-n);return Math.ceil(e*r)/r}},function(d,w){d.exports=function(e,n){return Math.abs(e-n)}},function(d,w){d.exports=function(e,n,t){n===void 0&&(n=0),t===void 0&&(t=10);var r=Math.pow(t,-n);return Math.floor(e*r)/r}},function(d,w){d.exports=function(e,n){return e/n/1e3}},function(d,w){d.exports=function(e){return e==parseFloat(e)?!(e%2):void 0}},function(d,w){d.exports=function(e){return e===parseFloat(e)?!(e%2):void 0}},function(d,w){d.exports=function(e,n,t){return Math.min(e+n,t)}},function(d,w){d.exports=function(e,n,t){return Math.max(e-n,t)}},function(d,w){d.exports=function(e,n,t,r){t===void 0&&(t=n+1);var o=(e-n)/(t-n);return 1<o?r!==void 0?(o=(r-e)/(r-t))<0&&(o=0):o=1:o<0&&(o=0),o}},function(d,w){d.exports=function(e,n){n===void 0&&(n=1);var t=2*Math.random()*Math.PI;return e.x=Math.cos(t)*n,e.y=Math.sin(t)*n,e}},function(d,w){d.exports=function(e,n){n===void 0&&(n=1);var t=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*n;return e.x=Math.cos(t)*o,e.y=Math.sin(t)*o,e.z=r*n,e}},function(d,w){d.exports=function(e,n){return n===void 0&&(n=1),e.x=(2*Math.random()-1)*n,e.y=(2*Math.random()-1)*n,e.z=(2*Math.random()-1)*n,e.w=(2*Math.random()-1)*n,e}},function(d,w){d.exports=function(e,n,t,r,o){return e.x=n+o*Math.cos(r),e.y=t+o*Math.sin(r),e}},function(d,w){d.exports=function(e,n,t){n===void 0&&(n=0),t===void 0&&(t=10);var r=Math.pow(t,-n);return Math.round(e*r)/r}},function(d,w){d.exports=function(e,n,t,r){n===void 0&&(n=1),t===void 0&&(t=1),r===void 0&&(r=1),r*=Math.PI/e;for(var o=[],i=[],s=0;s<e;s++)n+=(t-=n*r)*r,o[s]=t,i[s]=n;return{sin:i,cos:o,length:e}}},function(d,w,e){var n=e(4);d.exports=function(t,r,o,i){i===void 0&&(i=new n);var s=0,a=0;return 0<t&&t<=r*o&&(s=r-1<t?t-(a=Math.floor(t/r))*r:t,i.set(s,a)),i}},function(d,w){d.exports=function(e,n,t){return Math.abs(e-n)<=t}},function(d,w,e){var n=e(151),t=e(276),r=e(277),o=new t,i=new r,s=new n;d.exports=function(a,u,l){return i.setAxisAngle(u,l),o.fromRotationTranslation(i,s.set(0,0,0)),a.transformMat4(o)}},function(d,w){d.exports="addtexture"},function(d,w){d.exports="onerror"},function(d,w){d.exports="onload"},function(d,w){d.exports="ready"},function(d,w){d.exports="removetexture"},function(d,w){d.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(d,w){d.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(d,w){d.exports=["#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","","}",""].join(`
`)},function(d,w,e){d.exports={DataManager:e(103),DataManagerPlugin:e(667),Events:e(285)}},function(d,w){d.exports="changedata"},function(d,w){d.exports="changedata-"},function(d,w){d.exports="removedata"},function(d,w){d.exports="setdata"},function(d,w,e){var n=e(0),t=e(103),r=e(21),o=e(18),i=new n({Extends:t,initialize:function(s){t.call(this,s,s.sys.events),this.scene=s,this.systems=s.sys,s.sys.events.once(o.BOOT,this.boot,this),s.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){t.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",i,"data"),d.exports=i},function(d,w,e){d.exports={BitmapMask:e(228),GeometryMask:e(229)}},function(d,w,e){var n={AddToDOM:e(128),DOMContentLoaded:e(286),GetScreenOrientation:e(287),GetTarget:e(292),ParseXML:e(293),RemoveFromDOM:e(294),RequestAnimationFrame:e(283)};d.exports=n},function(d,w,e){d.exports={EventEmitter:e(671)}},function(d,w,e){var n=e(0),t=e(6),r=e(21),o=new n({Extends:t,initialize:function(){t.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",o,"events"),d.exports=o},function(d,w,e){var n=e(128),t=e(216),r=e(219),o=e(25),i=e(0),s=e(257),a=e(673),u=e(278),l=e(103),c=e(281),h=e(258),f=e(286),g=e(6),p=e(15),v=e(295),T=e(21),E=e(420),M=e(300),A=e(301),C=e(102),P=e(304),R=e(282),D=e(284),I=e(308),W=new i({initialize:function(G){this.config=new s(G),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new t(this),this.textures=new P(this),this.cache=new r(this),this.registry=new l(this),this.input=new v(this,this.config),this.scene=new A(this,this.config.sceneConfig),this.device=h,this.scale=new M(this,this.config),this.sound=null,this.sound=I.create(this),this.loop=new R(this,this.config.fps),this.plugins=new E(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,f(this.boot.bind(this))},boot:function(){T.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),a(this),c(this),n(this.canvas,this.config.parent),this.textures.once(C.READY,this.texturesReady,this),this.events.emit(p.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),D(this);var G=this.events;G.on(p.HIDDEN,this.onHidden,this),G.on(p.VISIBLE,this.onVisible,this),G.on(p.BLUR,this.onBlur,this),G.on(p.FOCUS,this.onFocus,this)},step:function(G,Y){if(this.pendingDestroy)return this.runDestroy();var j=this.events;j.emit(p.PRE_STEP,G,Y),j.emit(p.STEP,G,Y),this.scene.update(G,Y),j.emit(p.POST_STEP,G,Y);var ee=this.renderer;ee.preRender(),j.emit(p.PRE_RENDER,ee,G,Y),this.scene.render(ee),ee.postRender(),j.emit(p.POST_RENDER,ee,G,Y)},headlessStep:function(G,Y){if(this.pendingDestroy)return this.runDestroy();var j=this.events;j.emit(p.PRE_STEP,G,Y),j.emit(p.STEP,G,Y),this.scene.update(G,Y),j.emit(p.POST_STEP,G,Y),j.emit(p.PRE_RENDER),j.emit(p.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(G,Y){Y===void 0&&(Y=!1),this.pendingDestroy=!0,this.removeCanvas=G,this.noReturn=Y},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});d.exports=W},function(d,w,e){var n=e(128);d.exports=function(t){var r,o=t.config;o.parent&&o.domCreateContainer&&((r=document.createElement("div")).style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=r,n(r,o.parent))}},function(d,w){d.exports="boot"},function(d,w){d.exports="destroy"},function(d,w){d.exports="dragend"},function(d,w){d.exports="dragenter"},function(d,w){d.exports="drag"},function(d,w){d.exports="dragleave"},function(d,w){d.exports="dragover"},function(d,w){d.exports="dragstart"},function(d,w){d.exports="drop"},function(d,w){d.exports="gameout"},function(d,w){d.exports="gameover"},function(d,w){d.exports="gameobjectdown"},function(d,w){d.exports="dragend"},function(d,w){d.exports="dragenter"},function(d,w){d.exports="drag"},function(d,w){d.exports="dragleave"},function(d,w){d.exports="dragover"},function(d,w){d.exports="dragstart"},function(d,w){d.exports="drop"},function(d,w){d.exports="gameobjectmove"},function(d,w){d.exports="gameobjectout"},function(d,w){d.exports="gameobjectover"},function(d,w){d.exports="pointerdown"},function(d,w){d.exports="pointermove"},function(d,w){d.exports="pointerout"},function(d,w){d.exports="pointerover"},function(d,w){d.exports="pointerup"},function(d,w){d.exports="wheel"},function(d,w){d.exports="gameobjectup"},function(d,w){d.exports="gameobjectwheel"},function(d,w){d.exports="boot"},function(d,w){d.exports="process"},function(d,w){d.exports="update"},function(d,w){d.exports="pointerdown"},function(d,w){d.exports="pointerdownoutside"},function(d,w){d.exports="pointermove"},function(d,w){d.exports="pointerout"},function(d,w){d.exports="pointerover"},function(d,w){d.exports="pointerup"},function(d,w){d.exports="pointerupoutside"},function(d,w){d.exports="wheel"},function(d,w){d.exports="pointerlockchange"},function(d,w){d.exports="preupdate"},function(d,w){d.exports="shutdown"},function(d,w){d.exports="start"},function(d,w){d.exports="update"},function(d,w){d.exports=function(e){if(!e)return window.innerHeight;var n=Math.abs(window.orientation),t={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),t.w=n===90?r.offsetHeight:window.innerWidth,t.h=n===90?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,Math.abs(window.orientation)!==90?t.h:t.w}},function(d,w){d.exports="addfile"},function(d,w){d.exports="complete"},function(d,w){d.exports="filecomplete"},function(d,w){d.exports="filecomplete-"},function(d,w){d.exports="loaderror"},function(d,w){d.exports="load"},function(d,w){d.exports="fileprogress"},function(d,w){d.exports="postprocess"},function(d,w){d.exports="progress"},function(d,w){d.exports="start"},function(d,w,e){var n=e(2),t=e(204);d.exports=function(r){var o=r.game.config.defaultPhysicsSystem,i=n(r.settings,"physics",!1);if(o||i){var s=[];if(o&&s.push(t(o+"Physics")),i)for(var a in i)a=t(a.concat("Physics")),s.indexOf(a)===-1&&s.push(a);return s}}},function(d,w,e){var n=e(2);d.exports=function(t){var r=t.plugins.getDefaultScenePlugins(),o=n(t.settings,"plugins",!1);return Array.isArray(o)?o:r||[]}},function(d,w,e){d.exports={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(d,w){d.exports=function(e,n,t){if(t.getElementsByTagName("TextureAtlas")){var r=e.source[n];e.add("__BASE",n,0,0,r.width,r.height);for(var o=t.getElementsByTagName("SubTexture"),i=0;i<o.length;i++){var s,a,u,l,c=o[i].attributes,h=c.name.value,f=parseInt(c.x.value,10),g=parseInt(c.y.value,10),p=parseInt(c.width.value,10),v=parseInt(c.height.value,10),T=e.add(h,n,f,g,p,v);c.frameX&&(s=Math.abs(parseInt(c.frameX.value,10)),a=Math.abs(parseInt(c.frameY.value,10)),u=parseInt(c.frameWidth.value,10),l=parseInt(c.frameHeight.value,10),T.setTrim(p,v,s,a,u,l))}return e}console.warn("Invalid Texture Atlas XML given")}},function(d,w){d.exports=function(e,n){var t=e.source[n];return e.add("__BASE",n,0,0,t.width,t.height),e}},function(d,w){d.exports=function(e,n){var t=e.source[n];return e.add("__BASE",n,0,0,t.width,t.height),e}},function(d,w,e){var n=e(66);d.exports=function(t,r,o){if(o.frames||o.textures){var i=t.source[r];t.add("__BASE",r,0,0,i.width,i.height);for(var s=Array.isArray(o.textures)?o.textures[r].frames:o.frames,a=0;a<s.length;a++){var u=s[a],l=t.add(u.filename,r,u.frame.x,u.frame.y,u.frame.w,u.frame.h);u.trimmed&&l.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(l.rotated=!0,l.updateUVsInverted());var c=u.anchor||u.pivot;c&&(l.customPivot=!0,l.pivotX=c.x,l.pivotY=c.y),l.customData=n(u)}for(var h in o)h!=="frames"&&(Array.isArray(o[h])?t.customData[h]=o[h].slice(0):t.customData[h]=o[h]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(d,w,e){var n=e(66);d.exports=function(t,r,o){if(o.frames){var i=t.source[r];t.add("__BASE",r,0,0,i.width,i.height);var s=o.frames;for(var a in s){var u=s[a],l=t.add(a,r,u.frame.x,u.frame.y,u.frame.w,u.frame.h);u.trimmed&&l.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(l.rotated=!0,l.updateUVsInverted());var c=u.anchor||u.pivot;c&&(l.customPivot=!0,l.pivotX=c.x,l.pivotY=c.y),l.customData=n(u)}for(var h in o)h!=="frames"&&(Array.isArray(o[h])?t.customData[h]=o[h].slice(0):t.customData[h]=o[h]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(d,w,e){var n=e(2);d.exports=function(t,r,o,i,s,a,u){var l=n(u,"frameWidth",null),c=n(u,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var h=t.source[r];t.add("__BASE",r,0,0,h.width,h.height);var f=n(u,"startFrame",0),g=n(u,"endFrame",-1),p=n(u,"margin",0),v=n(u,"spacing",0),T=Math.floor((s-p+v)/(l+v))*Math.floor((a-p+v)/(c+v));T===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(T<f||f<-T)&&(f=0),f<0&&(f=T+f),g!==-1&&(T=f+(g+1));for(var E=p,M=p,A=0,C=0,P=0;P<T;P++){C=A=0;var R=E+l,D=M+c;s<R&&(A=R-s),a<D&&(C=D-a),t.add(P,r,o+E,i+M,l-A,c-C),s<(E+=l+v)+l&&(E=p,M+=c+v)}return t}},function(d,w,e){var n=e(2);d.exports=function(t,r,o){var i=n(o,"frameWidth",null),s=n(o,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var a=t.source[0];t.add("__BASE",0,0,0,a.width,a.height);var u=n(o,"startFrame",0),l=n(o,"endFrame",-1),c=n(o,"margin",0),h=n(o,"spacing",0),f=r.cutX,g=r.cutY,p=r.cutWidth,v=r.cutHeight,T=r.realWidth,E=r.realHeight,M=Math.floor((T-c+h)/(i+h)),A=Math.floor((E-c+h)/(s+h)),C=M*A,P=r.x,R=i-P,D=i-(T-p-P),I=r.y,W=s-I,G=s-(E-v-I);(C<u||u<-C)&&(u=0),u<0&&(u=C+u),l!==-1&&(C=u+(l+1));for(var Y=c,j=c,ee=0,te=r.sourceIndex,F=0;F<A;F++){for(var U=F===0,K=F===A-1,oe=0;oe<M;oe++){var ae,ce,re,ve,Se,de,pe=oe===0,Ae=oe===M-1,Oe=t.add(ee,te,f+Y,g+j,i,s);(pe||U||Ae||K)&&(ae=pe?P:0,ce=U?I:0,ve=re=0,pe&&(re+=i-R),Ae&&(re+=i-D),U&&(ve+=s-W),K&&(ve+=s-G),Se=i-re,de=s-ve,Oe.cutWidth=Se,Oe.cutHeight=de,Oe.setTrim(i,s,ae,ce,Se,de)),Y+=h,Y+=pe?R:Ae?D:i,ee++}Y=c,j+=h,j+=U?W:K?G:s}return t}},function(d,w){function e(t,r,o,i){var s=n-i.y-i.height;t.add(o,r,i.x,s,i.width,i.height)}var n=0;d.exports=function(t,r,o){var i=t.source[r];t.add("__BASE",r,0,0,i.width,i.height),n=i.height;for(var s=o.split(`
`),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,u="",l="",c={x:0,y:0,width:0,height:0},h=0;h<s.length;h++){var f=s[h].match(a);if(f){var g=f[1]==="- ",p=f[2],v=f[3];if(g&&(l!==u&&(e(t,r,l,c),u=l),c={x:0,y:0,width:0,height:0}),p!=="name")switch(p){case"x":case"y":case"width":case"height":c[p]=parseInt(v,10)}else l=v}}return l!==u&&e(t,r,l,c),t}},function(d,w){d.exports="complete"},function(d,w){d.exports="decoded"},function(d,w){d.exports="decodedall"},function(d,w){d.exports="destroy"},function(d,w){d.exports="detune"},function(d,w){d.exports="detune"},function(d,w){d.exports="mute"},function(d,w){d.exports="rate"},function(d,w){d.exports="volume"},function(d,w){d.exports="loop"},function(d,w){d.exports="looped"},function(d,w){d.exports="mute"},function(d,w){d.exports="pauseall"},function(d,w){d.exports="pause"},function(d,w){d.exports="play"},function(d,w){d.exports="rate"},function(d,w){d.exports="resumeall"},function(d,w){d.exports="resume"},function(d,w){d.exports="seek"},function(d,w){d.exports="stopall"},function(d,w){d.exports="stop"},function(d,w){d.exports="unlocked"},function(d,w){d.exports="volume"},function(d,w){d.exports="destroy"},function(d,w){d.exports="complete"},function(d,w){d.exports="created"},function(d,w){d.exports="error"},function(d,w){d.exports="loop"},function(d,w){d.exports="play"},function(d,w){d.exports="seeked"},function(d,w){d.exports="seeking"},function(d,w){d.exports="stop"},function(d,w){d.exports="timeout"},function(d,w){d.exports="unlocked"},function(d,w){d.exports=function(e,n,t){if(t===void 0)return t={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],scaleX:0,scaleY:0};var r,o,i,s,a,u,l,c=e.text,h=c.length,f=e.maxWidth,g=e.wordWrapCharCode,p=Number.MAX_VALUE,v=Number.MAX_VALUE,T=0,E=0,M=e.fontData.chars,A=e.fontData.lineHeight,C=e.letterSpacing,P=0,R=0,D=0,I=null,W=0,G=e.fontSize/e.fontData.size,Y=G*e.scaleX,j=G*e.scaleY,ee=null,te=0,F=[],U=Number.MAX_VALUE,K=0,oe=0,ae=0,ce=[],re=null;if(0<f){for(de=0;de<h;de++)(D=c.charCodeAt(de))!==10?(I=M[D])&&(ee!==null&&(r=I.kerning[te]),D===g?re!==null&&(ce.push({word:re.word,i:re.i,x:re.x*Y,y:re.y*j,w:re.w*Y,h:re.h*j,cr:!1}),re=null):(re===null&&(re={word:"",i:de,x:P,y:R,w:0,h:A,cr:!1}),re.word=re.word.concat(c[de]),re.w+=I.xOffset+I.xAdvance+(r!==void 0?r:0)),P+=I.xAdvance+C,ee=I,te=D):(re!==null&&(ce.push({word:re.word,i:re.i,x:re.x*Y,y:re.y*j,w:re.w*Y,h:re.h*j,cr:!0}),re=null),P=0,R+=A,ee=null);re!==null&&ce.push({word:re.word,i:re.i,x:re.x*Y,y:re.y*j,w:re.w*Y,h:re.h*j,cr:!1}),ee=null;for(var ve=te=R=P=0,Se=[],de=0;de<ce.length;de++){var pe,Ae=ce[de],Oe=Ae.x,Fe=Ae.x+Ae.w;pe&&(ve=Oe-(Oe-(pe.x+pe.w)+pe.w),pe=null),f<Oe-ve||f<Fe-ve?(Se.push(Ae.i-1),pe=Ae.cr?(Se.push(Ae.i+Ae.word.length),ve=0,null):Ae):Ae.cr&&(Se.push(Ae.i+Ae.word.length),ve=0,pe=null)}for(de=Se.length-1;0<=de;de--)o=c,i=Se[de],s=`
`,c=o.substr(0,i)+s+o.substr(i+1);h=(t.wrappedText=c).length,ce=[],re=null}for(de=0;de<h;de++)(D=c.charCodeAt(de))!==10?(I=M[D])&&(W=P,ee!==null&&(W+=(a=I.kerning[te])!==void 0?a:0),W<p&&(p=W),R<v&&(v=R),T<(u=W+I.xAdvance)&&(T=u),E<(l=R+A)&&(E=l),D===g?re!==null&&(ce.push({word:re.word,i:re.i,x:re.x*Y,y:re.y*j,w:re.w*Y,h:re.h*j}),re=null):(re===null&&(re={word:"",i:de,x:P,y:R,w:0,h:A}),re.word=re.word.concat(c[de]),re.w+=I.xOffset+I.xAdvance+(a!==void 0?a:0)),P+=I.xAdvance+C,ee=I,te=D,ae=u*G):(re!==null&&(ce.push({word:re.word,i:re.i,x:re.x*Y,y:re.y*j,w:re.w*Y,h:re.h*j}),re=null),P=0,R+=A,ee=null,K<(F[oe]=ae)&&(K=ae),ae<U&&(U=ae),oe++,ae=0);re!==null&&ce.push({word:re.word,i:re.i,x:re.x*Y,y:re.y*j,w:re.w*Y,h:re.h*j}),K<(F[oe]=ae)&&(K=ae),ae<U&&(U=ae);var Ve=t.local,ze=t.global,Xe=t.lines;return Ve.x=p*G,Ve.y=v*G,Ve.width=T*G,Ve.height=E*G,ze.x=e.x-e.displayOriginX+p*Y,ze.y=e.y-e.displayOriginY+v*j,ze.width=T*Y,ze.height=E*j,Xe.shortest=U,Xe.longest=K,Xe.lengths=F,n&&(Ve.x=Math.round(Ve.x),Ve.y=Math.round(Ve.y),Ve.width=Math.round(Ve.width),Ve.height=Math.round(Ve.height),ze.x=Math.round(ze.x),ze.y=Math.round(ze.y),ze.width=Math.round(ze.width),ze.height=Math.round(ze.height),Xe.shortest=Math.round(U),Xe.longest=Math.round(K)),t.words=ce,t.lines.height=A,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t}},function(d,w,e){var n=e(156);d.exports=function(t,r,o,i,s,a,u){var l=t.sys.textures.getFrame(o,i),c=t.sys.cache.xml.get(s);if(l&&c){var h=n(c,a,u,l);return t.sys.cache.bitmapFont.add(r,{data:h,texture:o,frame:i}),!0}return!1}},function(d,w,e){var n=e(1),t=e(1),n=e(779),t=e(780);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w,e){var n=e(14);d.exports=function(t,r,o,i,s){var a=r._text,u=a.length;if(u!==0){var l=this.pipeline;t.setPipeline(l,r);var c=l._tempMatrix1,h=l._tempMatrix2,f=l._tempMatrix3;h.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),c.copyFrom(i.matrix),s?(c.multiplyWithOffset(s,-i.scrollX*r.scrollFactorX,-i.scrollY*r.scrollFactorY),h.e=r.x,h.f=r.y):(h.e-=i.scrollX*r.scrollFactorX,h.f-=i.scrollY*r.scrollFactorY),c.multiply(h,f);var g=r.frame,p=g.glTexture,v=g.cutX,T=g.cutY,E=p.width,M=p.height,A=r._isTinted&&r.tintFill,C=n.getTintAppendFloatAlpha(r._tintTL,i.alpha*r._alphaTL),P=n.getTintAppendFloatAlpha(r._tintTR,i.alpha*r._alphaTR),R=n.getTintAppendFloatAlpha(r._tintBL,i.alpha*r._alphaBL),D=n.getTintAppendFloatAlpha(r._tintBR,i.alpha*r._alphaBR);l.setTexture2D(p,0);var I,W,G,Y,j,ee,te=0,F=0,U=0,K=r._letterSpacing,oe=r.fontData,ae=oe.chars,ce=oe.lineHeight,re=r._fontSize/oe.size,ve=r._align,Se=0,de=0,pe=r.getTextBounds(!1);0<r.maxWidth&&(u=(a=pe.wrappedText).length);var Ae=r._bounds.lines;ve===1?de=(Ae.longest-Ae.lengths[0])/2:ve===2&&(de=Ae.longest-Ae.lengths[0]);for(var Oe,Fe,Ve,ze,Xe,Ge,pt,lt,xt,it,Et,gt,dt,St,mt,Mt,It,kt,gi=i.roundPixels,ke=0;ke<u;ke++)(I=a.charCodeAt(ke))!==10?(kt=ae[I])&&(W=v+kt.x,G=T+kt.y,Y=kt.width,j=kt.height,Oe=kt.xOffset+te,Fe=kt.yOffset+F,ee!==null&&(Oe+=(Ve=kt.kerning[U])!==void 0?Ve:0),te+=kt.xAdvance+K,ee=kt,U=I,Y!==0&&j!==0&&I!==32&&(Oe*=re,Fe*=re,Oe-=r.displayOriginX,ze=W/E,Xe=G/M,Ge=(W+Y)/E,pt=(G+j)/M,lt=(Oe+=de)+Y*re,xt=(Fe-=r.displayOriginY)+j*re,it=f.getX(Oe,Fe),Et=f.getY(Oe,Fe),gt=f.getX(Oe,xt),dt=f.getY(Oe,xt),St=f.getX(lt,xt),mt=f.getY(lt,xt),Mt=f.getX(lt,Fe),It=f.getY(lt,Fe),gi&&(it=Math.round(it),Et=Math.round(Et),gt=Math.round(gt),dt=Math.round(dt),St=Math.round(St),mt=Math.round(mt),Mt=Math.round(Mt),It=Math.round(It)),l.batchQuad(it,Et,gt,dt,St,mt,Mt,It,ze,Xe,Ge,pt,C,P,R,D,A,p,0))):(Se++,ve===1?de=(Ae.longest-Ae.lengths[Se])/2:ve===2&&(de=Ae.longest-Ae.lengths[Se]),te=0,F+=ce,ee=null)}}},function(d,w,e){var n=e(36);d.exports=function(t,r,o,i,s){var a=r._text,u=a.length,l=t.currentContext;if(u!==0&&n(t,l,r,i,s)){var c,h=r.frame,f=r.fontData.chars,g=r.fontData.lineHeight,p=r._letterSpacing,v=0,T=0,E=null,M=0,A=0,C=0,P=0,R=0,D=0,I=null,W=0,G=r.frame.source.image,Y=h.cutX,j=h.cutY,ee=r._fontSize/r.fontData.size,te=r._align,F=0,U=0,K=r.getTextBounds(!1);0<r.maxWidth&&(u=(a=K.wrappedText).length);var oe=r._bounds.lines;te===1?U=(oe.longest-oe.lengths[0])/2:te===2&&(U=oe.longest-oe.lengths[0]),l.translate(-r.displayOriginX,-r.displayOriginY);for(var ae,ce=i.roundPixels,re=0;re<u;re++)(c=a.charCodeAt(re))!==10?(E=f[c])&&(M=Y+E.x,A=j+E.y,C=E.width,P=E.height,R=E.xOffset+v,D=E.yOffset+T,I!==null&&(R+=(ae=E.kerning[W])!==void 0?ae:0),R*=ee,D*=ee,R+=U,v+=E.xAdvance+p,I=E,W=c,C!==0&&P!==0&&c!==32&&(ce&&(R=Math.round(R),D=Math.round(D)),l.save(),l.translate(R,D),l.scale(ee,ee),l.drawImage(G,M,A,C,P,0,0,C,P),l.restore())):(F++,te===1?U=(oe.longest-oe.lengths[F])/2:te===2&&(U=oe.longest-oe.lengths[F]),v=0,T+=g,I=null);l.restore()}}},function(d,w,e){d.exports={CheckMatrix:e(158),MatrixToString:e(782),ReverseColumns:e(783),ReverseRows:e(784),Rotate180:e(785),RotateLeft:e(786),RotateMatrix:e(110),RotateRight:e(787),TransposeMatrix:e(318)}},function(d,w,e){var n=e(196),t=e(158);d.exports=function(r){var o="";if(!t(r))return o;for(var i=0;i<r.length;i++){for(var s=0;s<r[i].length;s++){var a=r[i][s].toString();o+=a!=="undefined"?n(a,2):"?",s<r[i].length-1&&(o+=" |")}if(i<r.length-1){o+=`
`;for(var u=0;u<r[i].length;u++)o+="---",u<r[i].length-1&&(o+="+");o+=`
`}}return o}},function(d,w){d.exports=function(e){return e.reverse()}},function(d,w){d.exports=function(e){for(var n=0;n<e.length;n++)e[n].reverse();return e}},function(d,w,e){var n=e(110);d.exports=function(t){return n(t,180)}},function(d,w,e){var n=e(110);d.exports=function(t){return n(t,90)}},function(d,w,e){var n=e(110);d.exports=function(t){return n(t,-90)}},function(d,w){d.exports=function(e,n,t,r,o){if(o===void 0&&(o=e),0<t){var i=t-e.length;if(i<=0)return null}if(!Array.isArray(n))return e.indexOf(n)===-1?(e.push(n),r&&r.call(o,n),n):null;for(var s=n.length-1;0<=s;)e.indexOf(n[s])!==-1&&n.splice(s,1),s--;if((s=n.length)===0)return null;0<t&&i<s&&(n.splice(i),s=i);for(var a=0;a<s;a++){var u=n[a];e.push(u),r&&r.call(o,u)}return n}},function(d,w){d.exports=function(e,n,t,r,o,i){if(t===void 0&&(t=0),i===void 0&&(i=e),0<r){var s=r-e.length;if(s<=0)return null}if(!Array.isArray(n))return e.indexOf(n)===-1?(e.splice(t,0,n),o&&o.call(i,n),n):null;for(var a=n.length-1;0<=a;)e.indexOf(n[a])!==-1&&n.pop(),a--;if((a=n.length)===0)return null;0<r&&s<a&&(n.splice(s),a=s);for(var u=a-1;0<=u;u--){var l=n[u];e.splice(t,0,l),o&&o.call(i,l)}return n}},function(d,w){d.exports=function(e,n){var t=e.indexOf(n);return t!==-1&&t<e.length&&(e.splice(t,1),e.push(n)),n}},function(d,w,e){var n=e(58);d.exports=function(t,r,o,i,s){i===void 0&&(i=0),s===void 0&&(s=t.length);var a=0;if(n(t,i,s))for(var u=i;u<s;u++)t[u][r]===o&&a++;return a}},function(d,w){d.exports=function(e,n,t){for(var r=[null],o=3;o<arguments.length;o++)r.push(arguments[o]);for(o=0;o<e.length;o++)r[0]=e[o],n.apply(t,r);return e}},function(d,w,e){var n=e(58);d.exports=function(t,r,o,i,s){if(i===void 0&&(i=0),s===void 0&&(s=t.length),n(t,i,s)){for(var a=[null],u=5;u<arguments.length;u++)a.push(arguments[u]);for(u=i;u<s;u++)a[0]=t[u],r.apply(o,a)}return t}},function(d,w){d.exports=function(e,n){var t,r,o=e.indexOf(n);return 0<o&&(t=e[o-1],r=e.indexOf(t),e[o]=t,e[r]=n),e}},function(d,w){d.exports=function(e,n,t){var r=e.indexOf(n);if(r===-1||t<0||t>=e.length)throw new Error("Supplied index out of bounds");return r!==t&&(e.splice(r,1),e.splice(t,0,n)),n}},function(d,w){d.exports=function(e,n){var t,r,o=e.indexOf(n);return o!==-1&&o<e.length-1&&(t=e[o+1],r=e.indexOf(t),e[o]=t,e[r]=n),e}},function(d,w){d.exports=function(e,n,t,r){for(var o,i=[],s=e;s<=n;s++)t||r?(o=t?t+s.toString():s.toString(),r&&(o=o.concat(r)),i.push(o)):i.push(s);return i}},function(d,w,e){var n=e(273);d.exports=function(t,r,o){t===void 0&&(t=0),r===void 0&&(r=null),o===void 0&&(o=1),r===null&&(r=t,t=0);for(var i=[],s=Math.max(n((r-t)/(o||1)),0),a=0;a<s;a++)i.push(t),t+=o;return i}},function(d,w,e){var n=e(65);d.exports=function(t,r,o,i){if(i===void 0&&(i=t),r<0||r>t.length-1)throw new Error("Index out of bounds");var s=n(t,r);return o&&o.call(i,s),s}},function(d,w,e){var n=e(58);d.exports=function(t,r,o,i,s){if(r===void 0&&(r=0),o===void 0&&(o=t.length),s===void 0&&(s=t),n(t,r,o)){var a=o-r,u=t.splice(r,a);if(i)for(var l=0;l<u.length;l++){var c=u[l];i.call(s,c)}return u}return[]}},function(d,w,e){var n=e(65);d.exports=function(t,r,o){r===void 0&&(r=0),o===void 0&&(o=t.length);var i=r+Math.floor(Math.random()*o);return n(t,i)}},function(d,w){d.exports=function(e,n,t){var r=e.indexOf(n),o=e.indexOf(t);return r!==-1&&o===-1&&(e[r]=t,!0)}},function(d,w){d.exports=function(e,n){var t=e.indexOf(n);return t!==-1&&0<t&&(e.splice(t,1),e.unshift(n)),n}},function(d,w,e){var n=e(58);d.exports=function(t,r,o,i,s){if(i===void 0&&(i=0),s===void 0&&(s=t.length),n(t,i,s))for(var a=i;a<s;a++){var u=t[a];u.hasOwnProperty(r)&&(u[r]=o)}return t}},function(d,w){d.exports=function(e,n,t){if(n!==t){var r=e.indexOf(n),o=e.indexOf(t);if(r<0||o<0)throw new Error("Supplied items must be elements of the same array");return e[r]=t,e[o]=n,e}}},function(d,w,e){var n=e(1),t=e(1),n=e(807),t=e(808);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w){d.exports=function(e,n,t,r,o){var i=n.list;if(i.length!==0){var s=n.localTransform;o?(s.loadIdentity(),s.multiply(o),s.translate(n.x,n.y),s.rotate(n.rotation),s.scale(n.scaleX,n.scaleY)):s.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY);var a=n.blendMode!==-1;a||e.setBlendMode(0);for(var u=n.alpha,l=n.scrollFactorX,c=n.scrollFactorY,h=i,f=i.length,g=0;g<f;g++){var p,v,T,E,M,A,C,P,R=i[g];R.willRender(r)&&(E=R.alphaTopLeft!==void 0?(p=R.alphaTopLeft,v=R.alphaTopRight,T=R.alphaBottomLeft,R.alphaBottomRight):T=v=p=R.alpha,M=R.scrollFactorX,A=R.scrollFactorY,a||R.blendMode===e.currentBlendMode||e.setBlendMode(R.blendMode),(C=R.mask)&&C.preRenderWebGL(e,R,r),(P=R.type)!==e.currentType&&(e.newType=!0,e.currentType=P),e.nextTypeMatch=g<f-1&&h[g+1].type===e.currentType,R.setScrollFactor(M*l,A*c),R.setAlpha(p*u,v*u,T*u,E*u),R.renderWebGL(e,R,t,r,s),R.setAlpha(p,v,T,E),R.setScrollFactor(M,A),C&&C.postRenderWebGL(e,r),e.newType=!1)}}}},function(d,w){d.exports=function(e,n,t,r,o){var i=n.list;if(i.length!==0){var s=n.localTransform;o?(s.loadIdentity(),s.multiply(o),s.translate(n.x,n.y),s.rotate(n.rotation),s.scale(n.scaleX,n.scaleY)):s.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY);var a=n.blendMode!==-1;a||e.setBlendMode(0);var u=n._alpha,l=n.scrollFactorX,c=n.scrollFactorY;n.mask&&n.mask.preRenderCanvas(e,null,r);for(var h=0;h<i.length;h++){var f,g,p,v=i[h];v.willRender(r)&&(f=v.alpha,g=v.scrollFactorX,p=v.scrollFactorY,a||v.blendMode===e.currentBlendMode||e.setBlendMode(v.blendMode),v.setScrollFactor(g*l,p*c),v.setAlpha(f*u),v.renderCanvas(e,v,t,r,s),v.setAlpha(f),v.setScrollFactor(g,p))}n.mask&&n.mask.postRenderCanvas(e)}}},function(d,w,e){var n=e(0),t=e(208),r=e(21),o=e(18),i=e(131),s=new n({Extends:t,initialize:function(a){t.call(this,a),this.sortChildrenFlag=!1,this.scene=a,this.systems=a.sys,a.sys.events.once(o.BOOT,this.boot,this),a.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(i.inplace(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(a,u){return a._depth-u._depth},getChildren:function(){return this.list},shutdown:function(){for(var a=this.list.length;a--;)this.list[a].destroy(!0);this.list.length=0,this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("DisplayList",s,"displayList"),d.exports=s},function(d,w,e){var n=e(1),t=e(1),n=e(811),t=e(327);t=e(327),d.exports={renderWebGL:n,renderCanvas:t}},function(d,w,e){function n(s,a,u){this.x=s,this.y=a,this.width=u}function t(s,a,u){this.points=[],this.pointsLength=1,this.points[0]=new n(s,a,u)}var r=e(160),o=e(14),i=[];d.exports=function(s,a,u,l,c){if(a.commandBuffer.length!==0){var h=this.pipeline;s.setPipeline(h,a);var f=a._tempMatrix1,g=a._tempMatrix2,p=a._tempMatrix3;p.loadIdentity(),g.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),f.copyFrom(l.matrix),c?(f.multiplyWithOffset(c,-l.scrollX*a.scrollFactorX,-l.scrollY*a.scrollFactorY),g.e=a.x,g.f=a.y):(g.e-=l.scrollX*a.scrollFactorX,g.f-=l.scrollY*a.scrollFactorY),f.multiply(g);for(var v=a.commandBuffer,T=l.alpha*a.alpha,E=1,M=h.fillTint,A=h.strokeTint,C=0,P=0,R=0,D=2*Math.PI,I=[],W=0,G=!1,Y=null,j=o.getTintAppendFloatAlphaAndSwap,ee=s.blankTexture.glTexture,te=0;te<v.length;te++)switch(v[te]){case r.BEGIN_PATH:I.length=0,G=!(Y=null);break;case r.CLOSE_PATH:G=!1,Y&&Y.points.length&&Y.points.push(Y.points[0]);break;case r.FILL_PATH:for(W=0;W<I.length;W++)h.setTexture2D(ee),h.batchFillPath(I[W].points,p,f);break;case r.STROKE_PATH:for(W=0;W<I.length;W++)h.setTexture2D(ee),h.batchStrokePath(I[W].points,E,G,p,f);break;case r.LINE_STYLE:E=v[++te];var F=j(v[++te],v[++te]*T);A.TL=F,A.TR=F,A.BL=F,A.BR=F;break;case r.FILL_STYLE:var U=j(v[++te],v[++te]*T);M.TL=U,M.TR=U,M.BL=U,M.BR=U;break;case r.GRADIENT_FILL_STYLE:var K=v[++te]*T;M.TL=j(v[++te],K),M.TR=j(v[++te],K),M.BL=j(v[++te],K),M.BR=j(v[++te],K);break;case r.GRADIENT_LINE_STYLE:E=v[++te];var oe=v[++te]*T;A.TL=j(v[++te],oe),A.TR=j(v[++te],oe),A.BL=j(v[++te],oe),A.BR=j(v[++te],oe);break;case r.ARC:var ae=0,ce=v[++te],re=v[++te],ve=v[++te],Se=v[++te],de=v[++te],pe=v[++te],Ae=v[++te];for(de-=Se,pe?de<-D?de=-D:0<de&&(de=de%D-D):D<de?de=D:de<0&&(de=D+de%D),Y===null&&(Y=new t(ce+Math.cos(Se)*ve,re+Math.sin(Se)*ve,E),I.push(Y),ae+=.01);ae<1+Ae;)R=de*ae+Se,C=ce+Math.cos(R)*ve,P=re+Math.sin(R)*ve,Y.points.push(new n(C,P,E)),ae+=.01;R=de+Se,C=ce+Math.cos(R)*ve,P=re+Math.sin(R)*ve,Y.points.push(new n(C,P,E));break;case r.FILL_RECT:h.setTexture2D(ee),h.batchFillRect(v[++te],v[++te],v[++te],v[++te],p,f);break;case r.FILL_TRIANGLE:h.setTexture2D(ee),h.batchFillTriangle(v[++te],v[++te],v[++te],v[++te],v[++te],v[++te],p,f);break;case r.STROKE_TRIANGLE:h.setTexture2D(ee),h.batchStrokeTriangle(v[++te],v[++te],v[++te],v[++te],v[++te],v[++te],E,p,f);break;case r.LINE_TO:Y!==null?Y.points.push(new n(v[++te],v[++te],E)):(Y=new t(v[++te],v[++te],E),I.push(Y));break;case r.MOVE_TO:Y=new t(v[++te],v[++te],E),I.push(Y);break;case r.SAVE:i.push(p.copyToArray());break;case r.RESTORE:p.copyFromArray(i.pop());break;case r.TRANSLATE:ce=v[++te],re=v[++te],p.translate(ce,re);break;case r.SCALE:ce=v[++te],re=v[++te],p.scale(ce,re);break;case r.ROTATE:p.rotate(v[++te]);break;case r.SET_TEXTURE:var Oe=v[++te],Fe=v[++te];h.currentFrame=Oe,h.setTexture2D(Oe.glTexture,0),h.tintEffect=Fe,ee=Oe.glTexture;break;case r.CLEAR_TEXTURE:h.currentFrame=s.blankTexture,h.tintEffect=2,ee=s.blankTexture.glTexture}}}},function(d,w,e){var n=e(1),t=e(1),n=e(813),t=e(814);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w){d.exports=function(e,n,t,r,o){this.pipeline.batchSprite(n,r,o)}},function(d,w){d.exports=function(e,n,t,r,o){e.batchSprite(n,n.frame,r,o)}},function(d,w,e){var n=e(1),t=e(1),n=e(816),t=e(817);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w,e){var n=e(113),t=e(14);d.exports=function(r,o,i,s,a){var u=this.pipeline,l=u._tempMatrix1,c=u._tempMatrix2,h=u._tempMatrix3;r.setPipeline(u),c.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),l.copyFrom(s.matrix),a?(l.multiplyWithOffset(a,-s.scrollX*o.scrollFactorX,-s.scrollY*o.scrollFactorY),c.e=o.x,c.f=o.y):(c.e-=s.scrollX*o.scrollFactorX,c.f-=s.scrollY*o.scrollFactorY),l.multiply(c,h);var f,g,p=o._displayOriginX,v=o._displayOriginY,T=s.alpha*o.alpha;o.isFilled&&(f=u.fillTint,g=t.getTintAppendFloatAlphaAndSwap(o.fillColor,o.fillAlpha*T),f.TL=g,f.TR=g,f.BL=g,f.BR=g,u.setTexture2D(),u.batchFillRect(-p,-v,o.width,o.height)),o.isStroked&&n(u,o,T,p,v)}},function(d,w,e){var n=e(70),t=e(83),r=e(36);d.exports=function(o,i,s,a,u){var l,c,h=o.currentContext;r(o,h,i,a,u)&&(l=i._displayOriginX,c=i._displayOriginY,i.isFilled&&(n(h,i),h.fillRect(-l,-c,i.width,i.height)),i.isStroked&&(t(h,i),h.beginPath(),h.rect(-l,-c,i.width,i.height),h.stroke()),h.restore())}},function(d,w,e){var n=e(1),t=e(1),n=e(819),t=e(820);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w){d.exports=function(e,n,t,r,o){this.pipeline.batchSprite(n,r,o)}},function(d,w){d.exports=function(e,n,t,r,o){e.batchSprite(n,n.frame,r,o)}},function(d,w,e){var n=e(0),t=e(209),r=e(21),o=e(18),i=new n({Extends:t,initialize:function(s){t.call(this),this.scene=s,this.systems=s.sys,s.sys.events.once(o.BOOT,this.boot,this),s.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(o.PRE_UPDATE,this.update,this),s.on(o.UPDATE,this.sceneUpdate,this),s.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(s,a){for(var u=this._active,l=u.length,c=0;c<l;c++){var h=u[c];h.active&&h.preUpdate.call(h,s,a)}},shutdown:function(){for(var s=this._active.length;s--;)this._active[s].destroy(!0);for(s=this._pending.length;s--;)this._pending[s].destroy(!0);for(s=this._destroy.length;s--;)this._destroy[s].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var a=this.systems.events;a.off(o.PRE_UPDATE,this.preUpdate,this),a.off(o.UPDATE,this.sceneUpdate,this),a.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",i,"updateList"),d.exports=i},function(d,w,e){d.exports={PROCESS_QUEUE_ADD:e(823),PROCESS_QUEUE_REMOVE:e(824)}},function(d,w){d.exports="add"},function(d,w){d.exports="remove"},function(d,w,e){var n=e(130);e(8).register("bitmapText",function(t,r,o,i,s,a){return this.displayList.add(new n(this.scene,t,r,o,i,s,a))})},function(d,w,e){var n=e(157);e(8).register("container",function(t,r,o){return this.displayList.add(new n(this.scene,t,r,o))})},function(d,w,e){var n=e(159);e(8).register("graphics",function(t){return this.displayList.add(new n(this.scene,t))})},function(d,w,e){var n=e(112);e(8).register("image",function(t,r,o,i){return this.displayList.add(new n(this.scene,t,r,o,i))})},function(d,w,e){var n=e(8),t=e(328);n.register("rectangle",function(r,o,i,s,a,u){return this.displayList.add(new t(this.scene,r,o,i,s,a,u))})},function(d,w,e){var n=e(8),t=e(71);n.register("sprite",function(r,o,i,s){var a=new t(this.scene,r,o,i,s);return this.displayList.add(a),this.updateList.add(a),a})},function(d,w,e){var n=e(210);e(8).register("tileSprite",function(t,r,o,i,s,a){return this.displayList.add(new n(this.scene,t,r,o,i,s,a))})},function(d,w,e){var n=e(1),t=e(1),n=e(833),t=e(834);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w,e){var n=e(14);d.exports=function(t,r,o,i,s){r.updateCanvas();var a=n.getTintAppendFloatAlpha;this.pipeline.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,r.width,r.height,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*r.width,r.originY*r.height,0,0,r.width,r.height,a(r._tintTL,i.alpha*r._alphaTL),a(r._tintTR,i.alpha*r._alphaTR),a(r._tintBL,i.alpha*r._alphaBL),a(r._tintBR,i.alpha*r._alphaBR),r._isTinted&&r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,i,s)}},function(d,w){d.exports=function(e,n,t,r,o){n.updateCanvas(),e.batchSprite(n,n.frame,r,o)}},function(d,w,e){var n=e(130),t=e(29),r=e(22),o=e(20),i=e(5);r.register("bitmapText",function(s,a){s===void 0&&(s={});var u=i(s,"font",""),l=o(s,"text",""),c=o(s,"size",!1),h=i(s,"align",0),f=new n(this.scene,0,0,u,l,c,h);return a!==void 0&&(s.add=a),t(this.scene,f,s),f})},function(d,w,e){var n=e(29),t=e(157),r=e(22),o=e(20);r.register("container",function(i,s){i===void 0&&(i={});var a=o(i,"x",0),u=o(i,"y",0),l=new t(this.scene,a,u);return s!==void 0&&(i.add=s),n(this.scene,l,i),l})},function(d,w,e){var n=e(22),t=e(159);n.register("graphics",function(r,o){r===void 0&&(r={}),o!==void 0&&(r.add=o);var i=new t(this.scene,r);return r.add&&this.scene.sys.displayList.add(i),i})},function(d,w,e){var n=e(29),t=e(22),r=e(20),o=e(112);t.register("image",function(i,s){i===void 0&&(i={});var a=r(i,"key",null),u=r(i,"frame",null),l=new o(this.scene,0,0,a,u);return s!==void 0&&(i.add=s),n(this.scene,l,i),l})},function(d,w,e){var n=e(29),t=e(317),r=e(22),o=e(20),i=e(71);r.register("sprite",function(s,a){s===void 0&&(s={});var u=o(s,"key",null),l=o(s,"frame",null),c=new i(this.scene,0,0,u,l);return a!==void 0&&(s.add=a),n(this.scene,c,s),t(c,s),c})},function(d,w,e){var n=e(29),t=e(22),r=e(20),o=e(210);t.register("tileSprite",function(i,s){i===void 0&&(i={});var a=r(i,"x",0),u=r(i,"y",0),l=r(i,"width",512),c=r(i,"height",512),h=r(i,"key",""),f=r(i,"frame",""),g=new o(this.scene,a,u,l,c,h,f);return s!==void 0&&(i.add=s),n(this.scene,g,i),g})},function(d,w,e){var n=e(153),t=e(16)(!1,t={CreateInteractiveObject:e(329),Events:e(49),Gamepad:e(842),InputManager:e(295),InputPlugin:e(854),InputPluginCache:e(114),Keyboard:e(856),Mouse:e(873),Pointer:e(298),Touch:e(874)},n);d.exports=t},function(d,w,e){d.exports={Axis:e(330),Button:e(331),Events:e(163),Gamepad:e(332),GamepadPlugin:e(849),Configs:e(850)}},function(d,w){d.exports="down"},function(d,w){d.exports="up"},function(d,w){d.exports="connected"},function(d,w){d.exports="disconnected"},function(d,w){d.exports="down"},function(d,w){d.exports="up"},function(d,w,e){var n=e(0),t=e(6),r=e(163),o=e(332),i=e(5),s=e(114),a=e(49),u=new n({Extends:t,initialize:function(l){t.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(a.BOOT,this.boot,this),l.pluginEvents.on(a.START,this.start,this)},boot:function(){var l=this.scene.sys.game,c=this.settings.input,h=l.config;this.enabled=i(c,"gamepad",h.inputGamepad)&&l.device.input.gamepads,this.target=i(c,"gamepad.target",h.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.enabled&&this.startListeners(),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){function l(f){!f.defaultPrevented&&c.isActive()&&(c.refreshPads(),c.queue.push(f))}var c=this,h=this.target;this.onGamepadHandler=l,h.addEventListener("gamepadconnected",l,!1),h.addEventListener("gamepaddisconnected",l,!1),this.sceneInputPlugin.pluginEvents.on(a.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(a.UPDATE,this.update)},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(l)for(var c=this.gamepads,h=0;h<l.length;h++){var f,g,p,v,T=l[h];T&&(f=T.id,(p=c[g=T.index])?p.id!==f?(p.destroy(),c[g]=new o(this,T)):p.update(T):(v=new o(this,T),c[g]=v,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=v):this._pad3=v:this._pad2=v:this._pad1=v))}else this.disconnectAll()},getAll:function(){for(var l=[],c=this.gamepads,h=0;h<c.length;h++)c[h]&&l.push(c[h]);return l},getPad:function(l){for(var c=this.gamepads,h=0;h<c.length;h++)if(c[h]&&c[h].index===l)return c[h]},update:function(){if(this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var c=this.queue.splice(0,l),h=0;h<l;h++){var f=c[h],g=this.getPad(f.gamepad.index);f.type==="gamepadconnected"?this.emit(r.CONNECTED,g,f):f.type==="gamepaddisconnected"&&this.emit(r.DISCONNECTED,g,f)}}},shutdown:function(){this.stopListeners(),this.disconnectAll(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});s.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),d.exports=u},function(d,w,e){d.exports={DUALSHOCK_4:e(851),SNES_USB:e(852),XBOX_360:e(853)}},function(d,w){d.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(d,w){d.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(d,w){d.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(d,w,e){var n=e(62),t=e(50),r=e(0),o=e(153),i=e(329),s=e(855),a=e(54),u=e(92),l=e(82),c=e(49),h=e(6),f=e(2),g=e(35),p=e(114),v=e(9),T=e(21),E=e(7),M=e(34),A=e(18),C=e(63),P=e(67),R=new r({Extends:h,initialize:function(D){h.call(this),this.scene=D,this.systems=D.sys,this.settings=D.sys.settings,this.manager=D.sys.game.input,this.pluginEvents=new h,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var I={cancelled:!1};this._eventContainer={stopPropagation:function(){I.cancelled=!0}},this._eventData=I,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,D.sys.events.once(A.BOOT,this.boot,this),D.sys.events.on(A.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(A.DESTROY,this.destroy,this),this.pluginEvents.emit(c.BOOT)},start:function(){var D=this.systems.events;D.on(A.TRANSITION_START,this.transitionIn,this),D.on(A.TRANSITION_OUT,this.transitionOut,this),D.on(A.TRANSITION_COMPLETE,this.transitionComplete,this),D.on(A.PRE_UPDATE,this.preUpdate,this),D.once(A.SHUTDOWN,this.shutdown,this),this.manager.events.on(c.GAME_OUT,this.onGameOut,this),this.manager.events.on(c.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(c.START)},onGameOver:function(D){this.isActive()&&this.emit(c.GAME_OVER,D.timeStamp,D)},onGameOut:function(D){this.isActive()&&this.emit(c.GAME_OUT,D.timeStamp,D)},preUpdate:function(){this.pluginEvents.emit(c.PRE_UPDATE);var D=this._pendingRemoval,I=this._pendingInsertion,W=D.length,G=I.length;if(W!==0||G!==0){for(var Y=this._list,j=0;j<W;j++){var ee=D[j],te=Y.indexOf(ee);-1<te&&(Y.splice(te,1),this.clear(ee,!0))}D.length=0,this._pendingRemoval.length=0,this._list=Y.concat(I.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(D,I){if(!this.isActive())return!1;if(this.pluginEvents.emit(c.UPDATE,D,I),this._updatedThisFrame)return this._updatedThisFrame=!1;for(var W=this.manager,G=W.pointers,Y=W.pointersTotal,j=0;j<Y;j++)G[j].updateMotion();if(this._list.length===0)return!1;var ee=this.pollRate;if(ee===-1)return!1;if(0<ee){if(this._pollTimer-=I,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var te=!1;for(j=0;j<Y;j++){var F=0,U=G[j];this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),F+=this.processOverOutEvents(U),this.getDragState(U)===2&&this.processDragThresholdEvent(U,D),0<F&&(te=!0)}return te},update:function(D,I){if(!this.isActive())return!1;for(var W=I.length,G=!1,Y=0;Y<W;Y++){var j=0,ee=I[Y];switch(this._tempZones=[],this._temp=this.hitTestPointer(ee),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),D){case o.MOUSE_DOWN:j+=this.processDragDownEvent(ee),j+=this.processDownEvents(ee),j+=this.processOverOutEvents(ee);break;case o.MOUSE_UP:j+=this.processDragUpEvent(ee),j+=this.processUpEvents(ee),j+=this.processOverOutEvents(ee);break;case o.TOUCH_START:j+=this.processDragDownEvent(ee),j+=this.processDownEvents(ee),j+=this.processOverEvents(ee);break;case o.TOUCH_END:case o.TOUCH_CANCEL:j+=this.processDragUpEvent(ee),j+=this.processUpEvents(ee),j+=this.processOutEvents(ee);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:j+=this.processDragMoveEvent(ee),j+=this.processMoveEvents(ee),j+=this.processOverOutEvents(ee);break;case o.MOUSE_WHEEL:j+=this.processWheelEvent(ee)}0<j&&(G=!0)}return this._updatedThisFrame=!0,G},clear:function(D,I){I===void 0&&(I=!1);var W=D.input;if(W){I||this.queueForRemoval(D),W.gameObject=void 0,W.target=void 0,W.hitArea=void 0,W.hitAreaCallback=void 0,W.callbackContext=void 0,this.manager.resetCursor(W),D.input=null;var G=this._draggable.indexOf(D);return-1<G&&this._draggable.splice(G,1),-1<(G=this._drag[0].indexOf(D))&&this._drag[0].splice(G,1),-1<(G=this._over[0].indexOf(D))&&this._over[0].splice(G,1),D}},disable:function(D){D.input.enabled=!1},enable:function(D,I,W,G){return G===void 0&&(G=!1),D.input?D.input.enabled=!0:this.setHitArea(D,I,W),D.input&&G&&!D.input.dropZone&&(D.input.dropZone=G),this},hitTestPointer:function(D){for(var I=this.cameras.getCamerasBelowPointer(D),W=0;W<I.length;W++){for(var G=I[W],Y=this.manager.hitTest(D,this._list,G),j=0;j<Y.length;j++){var ee=Y[j];ee.input.dropZone&&this._tempZones.push(ee)}if(0<Y.length)return D.camera=G,Y}return D.camera=I[0],[]},processDownEvents:function(D){for(var I=0,W=this._temp,G=this._eventData,Y=this._eventContainer,j=G.cancelled=!1,ee=0;ee<W.length;ee++){var te=W[ee];if(te.input){if(I++,te.emit(c.GAMEOBJECT_POINTER_DOWN,D,te.input.localX,te.input.localY,Y),G.cancelled||!te.input){j=!0;break}if(this.emit(c.GAMEOBJECT_DOWN,D,te,Y),G.cancelled||!te.input){j=!0;break}}}return!j&&this.manager&&(D.downElement===this.manager.game.canvas?this.emit(c.POINTER_DOWN,D,W):this.emit(c.POINTER_DOWN_OUTSIDE,D)),I},getDragState:function(D){return this._dragState[D.id]},setDragState:function(D,I){this._dragState[D.id]=I},processDragThresholdEvent:function(D,I){var W=!1,G=this.dragTimeThreshold,Y=this.dragDistanceThreshold;if((0<Y&&a(D.x,D.y,D.downX,D.downY)>=Y||0<G&&I>=D.downTime+G)&&(W=!0),W)return this.setDragState(D,3),this.processDragStartList(D)},processDragStartList:function(D){if(this.getDragState(D)!==3)return 0;for(var I=this._drag[D.id],W=0;W<I.length;W++){var G=I[W],Y=G.input;Y.dragState=2,Y.dragStartX=G.x,Y.dragStartY=G.y,Y.dragStartXGlobal=D.worldX,Y.dragStartYGlobal=D.worldY,Y.dragX=Y.dragStartXGlobal-Y.dragStartX,Y.dragY=Y.dragStartYGlobal-Y.dragStartY,G.emit(c.GAMEOBJECT_DRAG_START,D,Y.dragX,Y.dragY),this.emit(c.DRAG_START,D,G)}return this.setDragState(D,4),I.length},processDragDownEvent:function(D){var I=this._temp;if(this._draggable.length===0||I.length===0||!D.primaryDown||this.getDragState(D)!==0)return 0;this.setDragState(D,1);for(var W=[],G=0;G<I.length;G++){var Y=I[G];Y.input.draggable&&Y.input.dragState===0&&W.push(Y)}return W.length===0?(this.setDragState(D,0),0):(1<W.length&&(this.sortGameObjects(W),this.topOnly&&W.splice(1)),this._drag[D.id]=W,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(D,3),this.processDragStartList(D)):(this.setDragState(D,2),0))},processDragMoveEvent:function(D){if(this.getDragState(D)===2&&this.processDragThresholdEvent(D,this.manager.game.loop.now),this.getDragState(D)!==4)return 0;for(var I=this._tempZones,W=this._drag[D.id],G=0;G<W.length;G++){var Y,j,ee,te,F,U,K,oe,ae=W[G],ce=ae.input,re=ce.target;re?(Y=I.indexOf(re))===0?(ae.emit(c.GAMEOBJECT_DRAG_OVER,D,re),this.emit(c.DRAG_OVER,D,ae,re)):0<Y?(ae.emit(c.GAMEOBJECT_DRAG_LEAVE,D,re),this.emit(c.DRAG_LEAVE,D,ae,re),ce.target=I[0],re=ce.target,ae.emit(c.GAMEOBJECT_DRAG_ENTER,D,re),this.emit(c.DRAG_ENTER,D,ae,re)):(ae.emit(c.GAMEOBJECT_DRAG_LEAVE,D,re),this.emit(c.DRAG_LEAVE,D,ae,re),I[0]?(ce.target=I[0],re=ce.target,ae.emit(c.GAMEOBJECT_DRAG_ENTER,D,re),this.emit(c.DRAG_ENTER,D,ae,re)):ce.target=null):!re&&I[0]&&(ce.target=I[0],re=ce.target,ae.emit(c.GAMEOBJECT_DRAG_ENTER,D,re),this.emit(c.DRAG_ENTER,D,ae,re)),ee=ae.parentContainer?(te=D.worldX-ce.dragStartXGlobal,F=D.worldY-ce.dragStartYGlobal,U=ae.getParentRotation(),K=te*Math.cos(U)+F*Math.sin(U),oe=F*Math.cos(U)-te*Math.sin(U),K*=1/ae.parentContainer.scaleX,oe*=1/ae.parentContainer.scaleY,j=K+ce.dragStartX,oe+ce.dragStartY):(j=D.worldX-ce.dragX,D.worldY-ce.dragY),ae.emit(c.GAMEOBJECT_DRAG,D,j,ee),this.emit(c.DRAG,D,ae,j,ee)}return W.length},processDragUpEvent:function(D){for(var I=this._drag[D.id],W=0;W<I.length;W++){var G,Y,j=I[W],ee=j.input;ee&&ee.dragState===2&&(ee.dragState=0,ee.dragX=ee.localX-j.displayOriginX,ee.dragY=ee.localY-j.displayOriginY,G=!1,(Y=ee.target)&&(j.emit(c.GAMEOBJECT_DROP,D,Y),this.emit(c.DROP,D,j,Y),G=!(ee.target=null)),j.input&&(j.emit(c.GAMEOBJECT_DRAG_END,D,ee.dragX,ee.dragY,G),this.emit(c.DRAG_END,D,j,G)))}return this.setDragState(D,0),I.splice(0),0},processMoveEvents:function(D){for(var I=0,W=this._temp,G=this._eventData,Y=this._eventContainer,j=G.cancelled=!1,ee=0;ee<W.length;ee++){var te=W[ee];if(te.input){if(I++,te.emit(c.GAMEOBJECT_POINTER_MOVE,D,te.input.localX,te.input.localY,Y),G.cancelled||!te.input){j=!0;break}if(this.emit(c.GAMEOBJECT_MOVE,D,te,Y),G.cancelled||!te.input){j=!0;break}if(this.topOnly)break}}return j||this.emit(c.POINTER_MOVE,D,W),I},processWheelEvent:function(D){for(var I=0,W=this._temp,G=this._eventData,Y=this._eventContainer,j=G.cancelled=!1,ee=D.deltaX,te=D.deltaY,F=D.deltaZ,U=0;U<W.length;U++){var K=W[U];if(K.input){if(I++,K.emit(c.GAMEOBJECT_POINTER_WHEEL,D,ee,te,F,Y),G.cancelled||!K.input){j=!0;break}if(this.emit(c.GAMEOBJECT_WHEEL,D,K,ee,te,F,Y),G.cancelled||!K.input){j=!0;break}}}return j||this.emit(c.POINTER_WHEEL,D,W,ee,te,F),I},processOverEvents:function(D){var I=this._temp,W=0,G=I.length,Y=[];if(0<G){for(var j=this.manager,ee=this._eventData,te=this._eventContainer,F=ee.cancelled=!1,U=0;U<G;U++){var K=I[U];if(K.input){if(Y.push(K),j.setCursor(K.input),K.emit(c.GAMEOBJECT_POINTER_OVER,D,K.input.localX,K.input.localY,te),W++,ee.cancelled||!K.input){F=!0;break}if(this.emit(c.GAMEOBJECT_OVER,D,K,te),ee.cancelled||!K.input){F=!0;break}}}F||this.emit(c.POINTER_OVER,D,Y)}return this._over[D.id]=Y,W},processOutEvents:function(D){var I=this._over[D.id],W=0,G=I.length;if(0<G){var Y=this.manager,j=this._eventData,ee=this._eventContainer,te=j.cancelled=!1;this.sortGameObjects(I);for(var F=0;F<G;F++){for(var U=I[F],F=0;F<G;F++)if((U=I[F]).input){if(Y.resetCursor(U.input),U.emit(c.GAMEOBJECT_POINTER_OUT,D,ee),W++,j.cancelled||!U.input){te=!0;break}if(this.emit(c.GAMEOBJECT_OUT,D,U,ee),j.cancelled||!U.input){te=!0;break}}te||this.emit(c.POINTER_OUT,D,I)}this._over[D.id]=[]}return W},processOverOutEvents:function(D){for(var I,W=this._temp,G=[],Y=[],j=[],ee=this._over[D.id],te=this._drag[D.id],F=this.manager,U=0;U<ee.length;U++)I=ee[U],W.indexOf(I)===-1&&te.indexOf(I)===-1?G.push(I):j.push(I);for(U=0;U<W.length;U++)I=W[U],ee.indexOf(I)===-1&&Y.push(I);var K=G.length,oe=0,ae=this._eventData,ce=this._eventContainer,re=ae.cancelled=!1;if(0<K){for(this.sortGameObjects(G),U=0;U<K;U++)if((I=G[U]).input){if(F.resetCursor(I.input),I.emit(c.GAMEOBJECT_POINTER_OUT,D,ce),oe++,ae.cancelled||!I.input){re=!0;break}if(this.emit(c.GAMEOBJECT_OUT,D,I,ce),ae.cancelled||!I.input){re=!0;break}}re||this.emit(c.POINTER_OUT,D,G)}if(K=Y.length,re=ae.cancelled=!1,0<K){for(this.sortGameObjects(Y),U=0;U<K;U++)if((I=Y[U]).input){if(F.setCursor(I.input),I.emit(c.GAMEOBJECT_POINTER_OVER,D,I.input.localX,I.input.localY,ce),oe++,ae.cancelled||!I.input){re=!0;break}if(this.emit(c.GAMEOBJECT_OVER,D,I,ce),ae.cancelled||!I.input){re=!0;break}}re||this.emit(c.POINTER_OVER,D,Y)}return ee=j.concat(Y),this._over[D.id]=this.sortGameObjects(ee),oe},processUpEvents:function(D){for(var I=this._temp,W=this._eventData,G=this._eventContainer,Y=W.cancelled=!1,j=0;j<I.length;j++){var ee=I[j];if(ee.input){if(ee.emit(c.GAMEOBJECT_POINTER_UP,D,ee.input.localX,ee.input.localY,G),W.cancelled||!ee.input){Y=!0;break}if(this.emit(c.GAMEOBJECT_UP,D,ee,G),W.cancelled||!ee.input){Y=!0;break}}}return!Y&&this.manager&&(D.upElement===this.manager.game.canvas?this.emit(c.POINTER_UP,D,I):this.emit(c.POINTER_UP_OUTSIDE,D)),I.length},queueForInsertion:function(D){return this._pendingInsertion.indexOf(D)===-1&&this._list.indexOf(D)===-1&&this._pendingInsertion.push(D),this},queueForRemoval:function(D){return this._pendingRemoval.push(D),this},setDraggable:function(D,I){I===void 0&&(I=!0),Array.isArray(D)||(D=[D]);for(var W=0;W<D.length;W++){var G=D[W];G.input.draggable=I;var Y=this._draggable.indexOf(G);I&&Y===-1?this._draggable.push(G):!I&&-1<Y&&this._draggable.splice(Y,1)}return this},makePixelPerfect:function(D){D===void 0&&(D=1);var I=this.systems.textures;return s(I,D)},setHitArea:function(D,I,W){if(I===void 0)return this.setHitAreaFromTexture(D);Array.isArray(D)||(D=[D]);var G,Y,j=!1,ee=!1,te=!1,F=!1,U=!1,K=!0;v(I)?(I=f(G=I,"hitArea",null),W=f(G,"hitAreaCallback",null),j=f(G,"draggable",!1),ee=f(G,"dropZone",!1),te=f(G,"cursor",!1),F=f(G,"useHandCursor",!1),U=f(G,"pixelPerfect",!1),Y=f(G,"alphaTolerance",1),U&&(I={},W=this.makePixelPerfect(Y)),I&&W||(this.setHitAreaFromTexture(D),K=!1)):typeof I!="function"||W||(W=I,I={});for(var oe=0;oe<D.length;oe++){var ae,ce=D[oe];U&&ce.type==="Container"?console.warn("Cannot pixelPerfect test a Container. Use a custom callback."):((ae=ce.input?ce.input:i(ce,I,W)).customHitArea=K,ae.dropZone=ee,ae.cursor=F?"pointer":te,ce.input=ae,j&&this.setDraggable(ce),this.queueForInsertion(ce))}return this},setHitAreaCircle:function(D,I,W,G,Y){Y===void 0&&(Y=t);var j=new n(I,W,G);return this.setHitArea(D,j,Y)},setHitAreaEllipse:function(D,I,W,G,Y,j){j===void 0&&(j=l);var ee=new u(I,W,G,Y);return this.setHitArea(D,ee,j)},setHitAreaFromTexture:function(D,I){I===void 0&&(I=M),Array.isArray(D)||(D=[D]);for(var W=0;W<D.length;W++){var G=D[W],Y=G.frame,j=0,ee=0;G.width?(j=G.width,ee=G.height):Y&&(j=Y.realWidth,ee=Y.realHeight),G.type!=="Container"||j!==0&&ee!==0?j!==0&&ee!==0&&(G.input=i(G,new E(0,0,j,ee),I),this.queueForInsertion(G)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(D,I,W,G,Y,j){j===void 0&&(j=M);var ee=new E(I,W,G,Y);return this.setHitArea(D,ee,j)},setHitAreaTriangle:function(D,I,W,G,Y,j,ee,te){te===void 0&&(te=P);var F=new C(I,W,G,Y,j,ee);return this.setHitArea(D,F,te)},enableDebug:function(D,I){I===void 0&&(I=65280);var W=D.input;if(!W||!W.hitArea)return this;var G=W.hitArea,Y=G.type,j=W.hitAreaDebug,ee=this.systems.add,te=this.systems.updateList;j&&(te.remove(j),j.destroy(),j=null);var F=0,U=0;switch(Y){case g.CIRCLE:j=ee.arc(0,0,G.radius),F=G.x-G.radius,U=G.y-G.radius;break;case g.ELLIPSE:j=ee.ellipse(0,0,G.width,G.height),F=G.x-G.width/2,U=G.y-G.height/2;break;case g.LINE:j=ee.line(0,0,G.x1,G.y1,G.x2,G.y2);break;case g.POLYGON:j=ee.polygon(0,0,G.points);break;case g.RECTANGLE:j=ee.rectangle(0,0,G.width,G.height),F=G.x,U=G.y;break;case g.TRIANGLE:j=ee.triangle(0,0,G.x1,G.y1,G.x2,G.y2,G.x3,G.y3)}return j&&(j.isFilled=!1,j.preUpdate=function(){j.setStrokeStyle(1/D.scale,I),j.setDisplayOrigin(D.displayOriginX,D.displayOriginY);var K,oe=D.x,ae=D.y,ce=D.rotation,re=D.scaleX,ve=D.scaleY;D.parentContainer&&(oe=(K=D.getWorldTransformMatrix()).tx,ae=K.ty,ce=K.rotation,re=K.scaleX,ve=K.scaleY),j.setRotation(ce),j.setScale(re,ve),j.setPosition(oe+F,ae+U),j.setScrollFactor(D.scrollFactorX,D.scrollFactorY),j.setDepth(D.depth)},te.add(j),W.hitAreaDebug=j),this},removeDebug:function(D){var I,W=D.input;return W&&W.hitAreaDebug&&(I=W.hitAreaDebug,this.systems.updateList.remove(I),I.destroy(),W.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(D){return this.pollRate=D,this._pollTimer=0,this},setGlobalTopOnly:function(D){return this.manager.globalTopOnly=D,this},setTopOnly:function(D){return this.topOnly=D,this},sortGameObjects:function(D){return D.length<2?D:(this.scene.sys.depthSort(),D.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(D,I){if(D.parentContainer||I.parentContainer){if(D.parentContainer===I.parentContainer)return I.parentContainer.getIndex(I)-D.parentContainer.getIndex(D);if(D.parentContainer===I)return-1;if(I.parentContainer===D)return 1;for(var W=D.getIndexList(),G=I.getIndexList(),Y=Math.min(W.length,G.length),j=0;j<Y;j++){var ee=W[j],te=G[j];if(ee!==te)return te-ee}return G.length-W.length}return this.displayList.getIndex(I)-this.displayList.getIndex(D)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(D){return this.manager.addPointer(D)},setDefaultCursor:function(D){return this.manager.setDefaultCursor(D),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(c.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var D=this._dragState.length=0;D<10;D++)this._drag[D]=[],this._over[D]=[];this.removeAllListeners();var I=this.systems.events;I.off(A.TRANSITION_START,this.transitionIn,this),I.off(A.TRANSITION_OUT,this.transitionOut,this),I.off(A.TRANSITION_COMPLETE,this.transitionComplete,this),I.off(A.PRE_UPDATE,this.preUpdate,this),this.manager.events.off(c.GAME_OUT,this.onGameOut,this),this.manager.events.off(c.GAME_OVER,this.onGameOver,this),I.off(A.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(c.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",R,"input"),d.exports=R},function(d,w){d.exports=function(e,n){return function(t,r,o,i){var s=e.getPixelAlpha(r,o,i.texture.key,i.frame.name);return s&&n<=s}}},function(d,w,e){d.exports={Events:e(115),KeyboardManager:e(296),KeyboardPlugin:e(864),Key:e(338),KeyCodes:e(105),KeyCombo:e(339),JustDown:e(869),JustUp:e(870),DownDuration:e(871),UpDuration:e(872)}},function(d,w){d.exports="keydown"},function(d,w){d.exports="keyup"},function(d,w){d.exports="keycombomatch"},function(d,w){d.exports="down"},function(d,w){d.exports="keydown-"},function(d,w){d.exports="keyup-"},function(d,w){d.exports="up"},function(d,w,e){var n=e(0),t=e(6),r=e(115),o=e(15),i=e(5),s=e(49),a=e(114),u=e(338),l=e(105),c=e(339),h=e(868),f=e(79),g=new n({Extends:t,initialize:function(p){t.call(this),this.game=p.systems.game,this.scene=p.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=p,this.manager=p.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],p.pluginEvents.once(s.BOOT,this.boot,this),p.pluginEvents.on(s.START,this.start,this)},boot:function(){var p=this.settings.input;this.enabled=i(p,"keyboard",!0);var v=i(p,"keyboard.capture",null);v&&this.addCaptures(v),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.on(s.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.on(s.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(p){return this.manager.addCapture(p),this},removeCapture:function(p){return this.manager.removeCapture(p),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(p,v,T){v===void 0&&(v=!0),T===void 0&&(T=!1);var E={};if(typeof p=="string"){p=p.split(",");for(var M=0;M<p.length;M++){var A=p[M].trim();A&&(E[A]=this.addKey(A,v,T))}}else for(var C in p)E[C]=this.addKey(p[C],v,T);return E},addKey:function(p,v,T){v===void 0&&(v=!0),T===void 0&&(T=!1);var E=this.keys;if(p instanceof u){var M=E.indexOf(p);return-1<M?E[M]=p:E[p.keyCode]=p,v&&this.addCapture(p.keyCode),p.setEmitOnRepeat(T),p}return typeof p=="string"&&(p=l[p.toUpperCase()]),E[p]||(E[p]=new u(this,p),v&&this.addCapture(p),E[p].setEmitOnRepeat(T)),E[p]},removeKey:function(p,v){v===void 0&&(v=!1);var T,E,M=this.keys;return p instanceof u?-1<(E=M.indexOf(p))&&(T=this.keys[E],this.keys[E]=void 0):typeof p=="string"&&(p=l[p.toUpperCase()]),M[p]&&(T=M[p],M[p]=void 0),T&&(T.plugin=null,v&&T.destroy()),this},removeAllKeys:function(p){for(var v=this.keys,T=0;T<v.length;T++){var E=v[T];E&&(v[T]=void 0,p&&E.destroy())}return this},createCombo:function(p,v){return new c(this,p,v)},checkDown:function(p,v){if(v===void 0&&(v=0),this.enabled&&p.isDown){var T=f(this.time-p.timeDown,v);if(T>p._tick)return p._tick=T,!0}return!1},update:function(){var p=this.manager.queue,v=p.length;if(this.isActive()&&v!==0)for(var T=this.keys,E=0;E<v;E++){var M=p[E],A=M.keyCode,C=T[A],P=!1;M.cancelled===void 0&&(M.cancelled=0,M.stopImmediatePropagation=function(){M.cancelled=1},M.stopPropagation=function(){M.cancelled=-1}),M.cancelled!==-1&&(M.type==="keydown"?(C&&(P=C.isDown,C.onDown(M)),M.cancelled||C&&P||(h[A]&&(this.emit(r.KEY_DOWN+h[A],M),this.emit("keydown_"+h[A],M)),M.cancelled||this.emit(r.ANY_KEY_DOWN,M))):(C&&C.onUp(M),M.cancelled||(h[A]&&(this.emit(r.KEY_UP+h[A],M),this.emit("keyup_"+h[A],M)),M.cancelled||this.emit(r.ANY_KEY_UP,M))),M.cancelled===1&&(M.cancelled=0))}},resetKeys:function(){for(var p=this.keys,v=0;v<p.length;v++)p[v]&&p[v].reset();return this},shutdown:function(){this.resetKeys(),this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.off(s.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.off(s.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.removeAllListeners(),this.queue=[]},destroy:function(){this.shutdown();for(var p=this.keys,v=0;v<p.length;v++)p[v]&&p[v].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});a.register("KeyboardPlugin",g,"keyboard","keyboard","inputKeyboard"),d.exports=g},function(d,w,e){var n=e(866);d.exports=function(t,r){if(r.matched)return!0;var o,i=!1,s=!1;return t.keyCode===r.current&&(0<r.index&&0<r.maxKeyDelay?(o=r.timeLastMatched+r.maxKeyDelay,t.timeStamp<=o&&(s=!0,i=n(t,r))):(s=!0,i=n(t,r))),!s&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),i&&(r.timeLastMatched=t.timeStamp,r.matched=!0,r.timeMatched=t.timeStamp),i}},function(d,w){d.exports=function(e,n){return n.timeLastMatched=e.timeStamp,n.index++,n.index===n.size||(n.current=n.keyCodes[n.index],!1)}},function(d,w){d.exports=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e}},function(d,w,e){var n=e(105),t={};for(var r in n)t[n[r]]=r;d.exports=t},function(d,w){d.exports=function(e){return!!e._justDown&&!(e._justDown=!1)}},function(d,w){d.exports=function(e){return!!e._justUp&&!(e._justUp=!1)}},function(d,w){d.exports=function(e,n){n===void 0&&(n=50);var t=e.plugin.game.loop.time-e.timeDown;return e.isDown&&t<n}},function(d,w){d.exports=function(e,n){n===void 0&&(n=50);var t=e.plugin.game.loop.time-e.timeUp;return e.isUp&&t<n}},function(d,w,e){d.exports={MouseManager:e(297)}},function(d,w,e){d.exports={TouchManager:e(299)}},function(d,w,e){var n=e(0),t=e(11),r=e(2),o=e(84),i=e(9),s=e(93),a=e(85),u=new n({Extends:a,initialize:function(l,c,h,f,g,p){var v,T,E=i(c)?(c=r(T=c,"key"),v=new o(l,{key:c,url:r(T,"textureURL"),extension:r(T,"textureExtension","png"),normalMap:r(T,"normalMap"),xhrSettings:r(T,"textureXhrSettings")}),new s(l,{key:c,url:r(T,"atlasURL"),extension:r(T,"atlasExtension","json"),xhrSettings:r(T,"atlasXhrSettings")})):(v=new o(l,c,h,g),new s(l,c,f,p));v.linkFile?a.call(this,l,"atlasjson",c,[v,E,v.linkFile]):a.call(this,l,"atlasjson",c,[v,E])},addToCache:function(){var l,c,h;this.isReadyToProcess()&&(l=this.files[0],c=this.files[1],h=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlas(l.key,l.data,c.data,h),c.addToCache(),this.complete=!0)}});t.register("atlas",function(l,c,h,f,g){var p;if(Array.isArray(l))for(var v=0;v<l.length;v++)p=new u(this,l[v]),this.addFile(p.files);else p=new u(this,l,c,h,f,g),this.addFile(p.files);return this}),d.exports=u},function(d,w,e){var n=e(0),t=e(11),r=e(2),o=e(84),i=e(9),s=e(85),a=e(156),u=e(341),l=new n({Extends:s,initialize:function(c,h,f,g,p,v){var T,E,M=i(h)?(h=r(E=h,"key"),T=new o(c,{key:h,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),new u(c,{key:h,url:r(E,"fontDataURL"),extension:r(E,"fontDataExtension","xml"),xhrSettings:r(E,"fontDataXhrSettings")})):(T=new o(c,h,f,p),new u(c,h,g,v));T.linkFile?s.call(this,c,"bitmapfont",h,[T,M,T.linkFile]):s.call(this,c,"bitmapfont",h,[T,M])},addToCache:function(){var c,h;this.isReadyToProcess()&&(c=this.files[0],h=this.files[1],c.addToCache(),h.addToCache(),this.loader.cacheManager.bitmapFont.add(c.key,{data:a(h.data),texture:c.key,frame:null}),this.complete=!0)}});t.register("bitmapFont",function(c,h,f,g,p){var v;if(Array.isArray(c))for(var T=0;T<c.length;T++)v=new l(this,c[T]),this.addFile(v.files);else v=new l(this,c,h,f,g,p),this.addFile(v.files);return this}),d.exports=l},function(d,w,e){var n=e(0),t=e(24),r=e(133),o=e(6),i=e(81),s=e(11),a=e(2),u=e(21),l=e(18),c=e(116),h=new n({Extends:o,initialize:function(f){o.call(this);var g=f.sys.game.config,p=f.sys.settings.loader;this.scene=f,this.systems=f.sys,this.cacheManager=f.sys.cache,this.textureManager=f.sys.textures,this.sceneManager=f.sys.game.scene,s.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(a(p,"baseURL",g.loaderBaseURL)),this.setPath(a(p,"path",g.loaderPath)),this.setPrefix(a(p,"prefix",g.loaderPrefix)),this.maxParallelDownloads=a(p,"maxParallelDownloads",g.loaderMaxParallelDownloads),this.xhr=c(a(p,"responseType",g.loaderResponseType),a(p,"async",g.loaderAsync),a(p,"user",g.loaderUser),a(p,"password",g.loaderPassword),a(p,"timeout",g.loaderTimeout),a(p,"withCredentials",g.loaderWithCredentials)),this.crossOrigin=a(p,"crossOrigin",g.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=t.LOADER_IDLE,this.multiKeyIndex=0,f.sys.events.once(l.BOOT,this.boot,this),f.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(f){return f===void 0&&(f=""),f!==""&&f.substr(-1)!=="/"&&(f=f.concat("/")),this.baseURL=f,this},setPath:function(f){return f===void 0&&(f=""),f!==""&&f.substr(-1)!=="/"&&(f=f.concat("/")),this.path=f,this},setPrefix:function(f){return f===void 0&&(f=""),this.prefix=f,this},setCORS:function(f){return this.crossOrigin=f,this},addFile:function(f){Array.isArray(f)||(f=[f]);for(var g=0;g<f.length;g++){var p=f[g];this.keyExists(p)||(this.list.set(p),this.emit(i.ADD,p.key,p.type,this,p),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(f){var g=f.hasCacheConflict();return g||this.list.iterate(function(p){if(p.type===f.type&&p.key===f.key)return!(g=!0)}),!g&&this.isLoading()&&(this.inflight.iterate(function(p){if(p.type===f.type&&p.key===f.key)return!(g=!0)}),this.queue.iterate(function(p){if(p.type===f.type&&p.key===f.key)return!(g=!0)})),g},addPack:function(f,g){g&&f.hasOwnProperty(g)&&(f={packKey:f[g]});var p=0,v=this.baseURL,T=this.path,E=this.prefix;for(var M in f)if(Object.prototype.hasOwnProperty.call(f,M)){var A=f[M],C=a(A,"baseURL",v),P=a(A,"path",T),R=a(A,"prefix",E),D=a(A,"files",null),I=a(A,"defaultType","void");if(Array.isArray(D)){this.setBaseURL(C),this.setPath(P),this.setPrefix(R);for(var W=0;W<D.length;W++){var G=D[W],Y=G.hasOwnProperty("type")?G.type:I;this[Y]&&(this[Y](G),p++)}}}return this.setBaseURL(v),this.setPath(T),this.setPrefix(E),0<p},isLoading:function(){return this.state===t.LOADER_LOADING||this.state===t.LOADER_PROCESSING},isReady:function(){return this.state===t.LOADER_IDLE||this.state===t.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(i.START,this),this.list.size===0?this.loadComplete():(this.state=t.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(i.PROGRESS,this.progress)},update:function(){this.state===t.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(f){if((f.state===t.FILE_POPULATED||f.state===t.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(f),this.list.delete(f),f.crossOrigin||(f.crossOrigin=this.crossOrigin),f.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(f,g){this.inflight&&(this.inflight.delete(f),this.updateProgress(),g?(this.totalComplete++,this.queue.set(f),this.emit(i.FILE_LOAD,f),f.onProcess()):(this.totalFailed++,this._deleteQueue.set(f),this.emit(i.FILE_LOAD_ERROR,f),this.fileProcessComplete(f)))},fileProcessComplete:function(f){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(f.state===t.FILE_ERRORED?f.multiFile&&f.multiFile.onFileFailed(f):f.state===t.FILE_COMPLETE&&(f.multiFile?f.multiFile.isReadyToProcess()&&f.multiFile.addToCache():f.addToCache()),this.queue.delete(f),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(i.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=t.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(i.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(f){this._deleteQueue.set(f)},saveJSON:function(f,g){return this.save(JSON.stringify(f),g)},save:function(f,g,p){g===void 0&&(g="file.json"),p===void 0&&(p="application/json");var v=new Blob([f],{type:p}),T=URL.createObjectURL(v),E=document.createElement("a");return E.download=g,E.textContent="Download "+g,E.href=T,E.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var f=this.systems.game.config,g=this.systems.settings.loader;this.setBaseURL(a(g,"baseURL",f.loaderBaseURL)),this.setPath(a(g,"path",f.loaderPath)),this.setPrefix(a(g,"prefix",f.loaderPrefix)),this.state=t.LOADER_IDLE},shutdown:function(){this.reset(),this.state=t.LOADER_SHUTDOWN,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=t.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",h,"load"),d.exports=h},function(d,w,e){var n=e(37),t=e(16)(!1,t={ArcadePhysics:e(879),Body:e(350),Collider:e(351),Components:e(168),Events:e(171),Factory:e(342),Group:e(344),Image:e(343),Sprite:e(117),StaticBody:e(355),StaticGroup:e(347),World:e(349)},n);d.exports=t},function(d,w,e){var n=e(0),t=e(48),r=e(54),o=e(264),i=e(342),s=e(2),a=e(205),u=e(943),l=e(348),c=e(21),h=e(18),f=e(4),g=e(349),p=new n({initialize:function(v){this.scene=v,this.systems=v.sys,this.config=this.getConfig(),this.world,this.add,v.sys.events.once(h.BOOT,this.boot,this),v.sys.events.on(h.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new i(this.world),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new i(this.world));var v=this.systems.events;v.on(h.UPDATE,this.world.update,this.world),v.on(h.POST_UPDATE,this.world.postUpdate,this.world),v.once(h.SHUTDOWN,this.shutdown,this)},getConfig:function(){var v=this.systems.game.config.physics,T=this.systems.settings.physics;return a(s(T,"arcade",{}),s(v,"arcade",{}))},overlap:function(v,T,E,M,A){return E===void 0&&(E=null),M===void 0&&(M=null),A===void 0&&(A=E),this.world.collideObjects(v,T,E,M,A,!0)},collide:function(v,T,E,M,A){return E===void 0&&(E=null),M===void 0&&(M=null),A===void 0&&(A=E),this.world.collideObjects(v,T,E,M,A,!1)},collideTiles:function(v,T,E,M,A){return this.world.collideTiles(v,T,E,M,A)},overlapTiles:function(v,T,E,M,A){return this.world.overlapTiles(v,T,E,M,A)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(v,T,E,M,A,C){M===void 0&&(M=60);var P=Math.atan2(E-v.y,T-v.x);return v.body.acceleration.setToPolar(P,M),A!==void 0&&C!==void 0&&v.body.maxVelocity.set(A,C),P},accelerateToObject:function(v,T,E,M,A){return this.accelerateTo(v,T.x,T.y,E,M,A)},closest:function(v,T){T=T||this.world.bodies.entries;for(var E=Number.MAX_VALUE,M=null,A=v.x,C=v.y,P=T.length,R=0;R<P;R++){var D,I=T[R],W=I.body||I;v!==I&&v!==W&&v!==W.gameObject&&v!==W.center&&(D=o(A,C,W.center.x,W.center.y))<E&&(M=I,E=D)}return M},furthest:function(v,T){T=T||this.world.bodies.entries;for(var E=-1,M=null,A=v.x,C=v.y,P=T.length,R=0;R<P;R++){var D,I=T[R],W=I.body||I;v!==I&&v!==W&&v!==W.gameObject&&v!==W.center&&E<(D=o(A,C,W.center.x,W.center.y))&&(M=I,E=D)}return M},moveTo:function(v,T,E,M,A){M===void 0&&(M=60),A===void 0&&(A=0);var C=Math.atan2(E-v.y,T-v.x);return 0<A&&(M=r(v.x,v.y,T,E)/(A/1e3)),v.body.velocity.setToPolar(C,M),C},moveToObject:function(v,T,E,M){return this.moveTo(v,T.x,T.y,E,M)},velocityFromAngle:function(v,T,E){return T===void 0&&(T=60),E===void 0&&(E=new f),E.setToPolar(t(v),T)},velocityFromRotation:function(v,T,E){return T===void 0&&(T=60),E===void 0&&(E=new f),E.setToPolar(v,T)},overlapRect:function(v,T,E,M,A,C){return l(this.world,v,T,E,M,A,C)},overlapCirc:function(v,T,E,M,A){return u(this.world,v,T,E,M,A)},shutdown:function(){var v;this.world&&((v=this.systems.events).off(h.UPDATE,this.world.update,this.world),v.off(h.POST_UPDATE,this.world.postUpdate,this.world),v.off(h.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});c.register("ArcadePhysics",p,"arcadePhysics"),d.exports=p},function(d,w){d.exports={setAcceleration:function(e,n){return this.body.acceleration.set(e,n),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}}},function(d,w){d.exports={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}}},function(d,w){d.exports={setBounce:function(e,n){return this.body.bounce.set(e,n),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,n,t){return this.body.setCollideWorldBounds(e,n,t),this}}},function(d,w){d.exports={setDebug:function(e,n,t){return this.debugShowBody=e,this.debugShowVelocity=n,this.debugBodyColor=t,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}}},function(d,w){d.exports={setDrag:function(e,n){return this.body.drag.set(e,n),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}}},function(d,w){var e={enableBody:function(n,t,r,o,i){return n&&this.body.reset(t,r),o&&(this.body.gameObject.active=!0),i&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(n,t){return n===void 0&&(n=!1),t===void 0&&(t=!1),this.body.stop(),this.body.enable=!1,n&&(this.body.gameObject.active=!1),t&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};d.exports=e},function(d,w){d.exports={setFriction:function(e,n){return this.body.friction.set(e,n),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}}},function(d,w){d.exports={setGravity:function(e,n){return this.body.gravity.set(e,n),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}}},function(d,w){var e={setImmovable:function(n){return n===void 0&&(n=!0),this.body.immovable=n,this}};d.exports=e},function(d,w){d.exports={setMass:function(e){return this.body.mass=e,this}}},function(d,w){d.exports={setOffset:function(e,n){return this.body.setOffset(e,n),this},setSize:function(e,n,t){return this.body.setSize(e,n,t),this},setBodySize:function(e,n,t){return this.body.setSize(e,n,t),this},setCircle:function(e,n,t){return this.body.setCircle(e,n,t),this}}},function(d,w){d.exports={setVelocity:function(e,n){return this.body.setVelocity(e,n),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,n){return this.body.maxVelocity.set(e,n),this}}},function(d,w,e){var n=e(428);d.exports=function(t,r,o,i){for(var s=t[0],a=1;a<t.length;a++){var u=t[a];n(u,s,r,o,i),s=u}return t}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s){return n(t,"angle",r,o,i,s)}},function(d,w){d.exports=function(e,n,t){for(var r=0;r<e.length;r++){var o=e[r];n.call(t,o)}return e}},function(d,w){d.exports=function(e,n,t){t===void 0&&(t=0);for(var r=t;r<e.length;r++){var o=e[r],i=!0;for(var s in n)o[s]!==n[s]&&(i=!1);if(i)return o}return null}},function(d,w){d.exports=function(e,n,t){t===void 0&&(t=0);for(var r=t;r<e.length;r++){var o=e[r],i=!0;for(var s in n)o[s]!==n[s]&&(i=!1);if(i)return o}return null}},function(d,w,e){var n=e(441),t=e(135),r=e(2),o=e(1),i=new(e(211))({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1);d.exports=function(s,a){a===void 0&&(a={});var u=a.hasOwnProperty("width"),l=a.hasOwnProperty("height"),c=r(a,"width",-1),h=r(a,"height",-1),f=r(a,"cellWidth",1),g=r(a,"cellHeight",f),p=r(a,"position",t.TOP_LEFT),v=r(a,"x",0),T=r(a,"y",0),E=0,M=0,A=c*f,C=h*g;i.setPosition(v,T),i.setSize(f,g);for(var P=0;P<s.length;P++)if(n(s[P],i,p),u&&c===-1)i.x+=f;else if(l&&h===-1)i.y+=g;else if(E+=f,i.x+=f,E===A&&(E=0,M+=g,i.x=v,i.y+=g,M===C))break;return s}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s){return n(t,"alpha",r,o,i,s)}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s){return n(t,"x",r,o,i,s)}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s,a,u){return o==null&&(o=r),n(t,"x",r,i,a,u),n(t,"y",o,s,a,u)}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s){return n(t,"y",r,o,i,s)}},function(d,w){d.exports=function(e,n,t,r){t===void 0&&(t=0),r===void 0&&(r=6.28);for(var o=t,i=(r-t)/e.length,s=0;s<e.length;s++)e[s].x=n.x+n.radius*Math.cos(o),e[s].y=n.y+n.radius*Math.sin(o),o+=i;return e}},function(d,w){d.exports=function(e,n,t,r){t===void 0&&(t=0),r===void 0&&(r=6.28);for(var o=t,i=(r-t)/e.length,s=n.width/2,a=n.height/2,u=0;u<e.length;u++)e[u].x=n.x+s*Math.cos(o),e[u].y=n.y+a*Math.sin(o),o+=i;return e}},function(d,w,e){var n=e(138);d.exports=function(t,r){for(var o=n(r,t.length),i=0;i<t.length;i++){var s=t[i],a=o[i];s.x=a.x,s.y=a.y}return t}},function(d,w,e){var n=e(345),t=e(321),r=e(322);d.exports=function(o,i,s){s===void 0&&(s=0);var a=n(i,!1,o.length);0<s?t(a,s):s<0&&r(a,Math.abs(s));for(var u=0;u<o.length;u++)o[u].x=a[u].x,o[u].y=a[u].y;return o}},function(d,w,e){var n=e(346);d.exports=function(t,r,o){var i=n({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},o),s=n({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},o),a=n({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},o);i.pop(),s.pop(),a.pop();for(var u=(i=i.concat(s,a)).length/t.length,l=0,c=0;c<t.length;c++){var h=t[c],f=i[Math.floor(l)];h.x=f.x,h.y=f.y,l+=u}return t}},function(d,w){d.exports=function(e,n,t){for(var r=0;r<e.length;r++)e[r].anims.play(n,t);return e}},function(d,w,e){var n=e(165);d.exports=function(t,r){for(var o=0;o<t.length;o++)n(r,t[o]);return t}},function(d,w,e){var n=e(162);d.exports=function(t,r){for(var o=0;o<t.length;o++)n(r,t[o]);return t}},function(d,w,e){var n=e(139);d.exports=function(t,r){for(var o=0;o<t.length;o++)n(r,t[o]);return t}},function(d,w,e){var n=e(140);d.exports=function(t,r){for(var o=0;o<t.length;o++)n(r,t[o]);return t}},function(d,w,e){var n=e(166);d.exports=function(t,r){for(var o=0;o<t.length;o++)n(r,t[o]);return t}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s){return n(t,"rotation",r,o,i,s)}},function(d,w,e){var n=e(150),t=e(54);d.exports=function(r,o,i){for(var s=o.x,a=o.y,u=0;u<r.length;u++){var l=r[u];n(l,s,a,i,Math.max(1,t(l.x,l.y,s,a)))}return r}},function(d,w,e){var n=e(150);d.exports=function(t,r,o,i){var s=r.x,a=r.y;if(i===0)return t;for(var u=0;u<t.length;u++)n(t[u],s,a,o,i);return t}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s){return n(t,"scaleX",r,o,i,s)}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s,a,u){return o==null&&(o=r),n(t,"scaleX",r,i,a,u),n(t,"scaleY",o,s,a,u)}},function(d,w,e){var n=e(31);d.exports=function(t,r,o,i,s){return n(t,"scaleY",r,o,i,s)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"alpha",r,o,i,s)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i){return n(t,"blendMode",r,0,o,i)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"depth",r,o,i,s)}},function(d,w){d.exports=function(e,n,t){for(var r=0;r<e.length;r++)e[r].setInteractive(n,t);return e}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s,a,u){return o==null&&(o=r),n(t,"originX",r,i,a,u),n(t,"originY",o,s,a,u)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"rotation",r,o,i,s)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s,a,u){return o==null&&(o=r),n(t,"scaleX",r,i,a,u),n(t,"scaleY",o,s,a,u)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"scaleX",r,o,i,s)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"scaleY",r,o,i,s)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s,a,u){return o==null&&(o=r),n(t,"scrollFactorX",r,i,a,u),n(t,"scrollFactorY",o,s,a,u)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"scrollFactorX",r,o,i,s)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"scrollFactorY",r,o,i,s)}},function(d,w){d.exports=function(e,n,t,r,o){for(var i=0;i<e.length;i++)e[i].setTint(n,t,r,o);return e}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i){return n(t,"visible",r,0,o,i)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"x",r,o,i,s)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s,a,u){return o==null&&(o=r),n(t,"x",r,i,a,u),n(t,"y",o,s,a,u)}},function(d,w,e){var n=e(23);d.exports=function(t,r,o,i,s){return n(t,"y",r,o,i,s)}},function(d,w,e){var n=e(4);d.exports=function(t,r,o,i,s){var a,u,l;if(i===void 0&&(i=0),s===void 0&&(s=new n),1<t.length)if(i===0){for(var c=t.length-1,h=t[c].x,f=t[c].y,g=c-1;0<=g;g--)a=(l=t[g]).x,u=l.y,l.x=h,l.y=f,h=a,f=u;t[c].x=r,t[c].y=o}else{for(h=t[0].x,f=t[0].y,g=1;g<t.length;g++)a=(l=t[g]).x,u=l.y,l.x=h,l.y=f,h=a,f=u;t[0].x=r,t[0].y=o}else h=t[0].x,f=t[0].y,t[0].x=r,t[0].y=o;return s.x=h,s.y=f,s}},function(d,w,e){var n=e(111);d.exports=function(t){return n(t)}},function(d,w,e){var n=e(148);d.exports=function(t,r,o,i,s){s===void 0&&(s=!1);var a,u=Math.abs(i-o)/t.length;if(s)for(a=0;a<t.length;a++)t[a][r]+=n(a*u,o,i);else for(a=0;a<t.length;a++)t[a][r]=n(a*u,o,i);return t}},function(d,w,e){var n=e(147);d.exports=function(t,r,o,i,s){s===void 0&&(s=!1);var a,u=Math.abs(i-o)/t.length;if(s)for(a=0;a<t.length;a++)t[a][r]+=n(a*u,o,i);else for(a=0;a<t.length;a++)t[a][r]=n(a*u,o,i);return t}},function(d,w){d.exports=function(e,n,t,r,o){o===void 0&&(o=!1);var i,s=Math.abs(r-t)/e.length;if(o)for(i=0;i<e.length;i++)e[i][n]+=i*s+t;else for(i=0;i<e.length;i++)e[i][n]=i*s+t;return e}},function(d,w){d.exports=function(e){for(var n=0;n<e.length;n++)e[n].visible=!e[n].visible;return e}},function(d,w,e){var n=e(57);d.exports=function(t,r,o){o===void 0&&(o=0);for(var i=0;i<t.length;i++){var s=t[i];s.x=n(s.x,r.left-o,r.right+o),s.y=n(s.y,r.top-o,r.bottom+o)}return t}},function(d,w,e){var n=e(348),t=e(62),r=e(169),o=e(170);d.exports=function(i,s,a,u,l,c){var h=n(i,s-u,a-u,2*u,2*u,l,c);if(h.length===0)return h;for(var f=new t(s,a,u),g=new t,p=[],v=0;v<h.length;v++){var T=h[v];T.isCircle?(g.setTo(T.center.x,T.center.y,T.halfWidth),r(f,g)&&p.push(T)):o(f,T)&&p.push(T)}return p}},function(d,w){d.exports="collide"},function(d,w){d.exports="overlap"},function(d,w){d.exports="pause"},function(d,w){d.exports="resume"},function(d,w){d.exports="tilecollide"},function(d,w){d.exports="tileoverlap"},function(d,w){d.exports="worldbounds"},function(d,w){d.exports="worldstep"},function(d,w){d.exports=function(e,n){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,n,e):!e.layer.callbacks[e.index]||!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,n,e)}},function(d,w,e){var n=e(954),t=e(956),r=e(354);d.exports=function(o,i,s,a,u,l,c){var h=a.left,f=a.top,g=a.right,p=a.bottom,v=s.faceLeft||s.faceRight,T=s.faceTop||s.faceBottom;if(c||(T=v=!0),!v&&!T)return!1;var E=0,M=0,A=0,C=1;if(i.deltaAbsX()>i.deltaAbsY()?A=-1:i.deltaAbsX()<i.deltaAbsY()&&(C=-1),i.deltaX()!==0&&i.deltaY()!==0&&v&&T&&(A=Math.min(Math.abs(i.position.x-g),Math.abs(i.right-h)),C=Math.min(Math.abs(i.position.y-p),Math.abs(i.bottom-f))),A<C){if(v&&(E=n(i,s,h,g,l,c))!==0&&!r(a,i))return!0;T&&(M=t(i,s,f,p,l,c))}else{if(T&&(M=t(i,s,f,p,l,c))!==0&&!r(a,i))return!0;v&&(E=n(i,s,h,g,l,c))}return E!==0||M!==0}},function(d,w,e){var n=e(955);d.exports=function(t,r,o,i,s,a){var u=0,l=r.faceLeft,c=r.faceRight,h=r.collideLeft,f=r.collideRight;return a||(f=h=c=l=!0),t.deltaX()<0&&f&&t.checkCollision.left?c&&t.x<i&&(u=t.x-i)<-s&&(u=0):0<t.deltaX()&&h&&t.checkCollision.right&&l&&t.right>o&&s<(u=t.right-o)&&(u=0),u!==0&&(t.customSeparateX?t.overlapX=u:n(t,u)),u}},function(d,w){d.exports=function(e,n){n<0?(e.blocked.none=!1,e.blocked.left=!0):0<n&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=n,e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x}},function(d,w,e){var n=e(957);d.exports=function(t,r,o,i,s,a){var u=0,l=r.faceTop,c=r.faceBottom,h=r.collideUp,f=r.collideDown;return a||(f=h=c=l=!0),t.deltaY()<0&&f&&t.checkCollision.up?c&&t.y<i&&(u=t.y-i)<-s&&(u=0):0<t.deltaY()&&h&&t.checkCollision.down&&l&&t.bottom>o&&s<(u=t.bottom-o)&&(u=0),u!==0&&(t.customSeparateY?t.overlapY=u:n(t,u)),u}},function(d,w){d.exports=function(e,n){n<0?(e.blocked.none=!1,e.blocked.up=!0):0<n&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=n,e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y}},function(d,w,e){var n=e(352);d.exports=function(t,r,o,i){var s=n(t,r,o,i);if(o||s===0||t.immovable&&r.immovable||t.customSeparateX||r.customSeparateX)return s!==0||t.embedded&&r.embedded;var a,u,l,c=t.velocity.x,h=r.velocity.x;return t.immovable||r.immovable?t.immovable?(r.x+=s,r.velocity.x=c-h*r.bounce.x,t.moves&&(r.y+=(t.y-t.prev.y)*t.friction.y)):(t.x-=s,t.velocity.x=h-c*t.bounce.x,r.moves&&(t.y+=(r.y-r.prev.y)*r.friction.y)):(s*=.5,t.x-=s,r.x+=s,a=Math.sqrt(h*h*r.mass/t.mass)*(0<h?1:-1),a-=l=.5*(a+(u=Math.sqrt(c*c*t.mass/r.mass)*(0<c?1:-1))),u-=l,t.velocity.x=l+a*t.bounce.x,r.velocity.x=l+u*r.bounce.x),!0}},function(d,w,e){var n=e(353);d.exports=function(t,r,o,i){var s=n(t,r,o,i);if(o||s===0||t.immovable&&r.immovable||t.customSeparateY||r.customSeparateY)return s!==0||t.embedded&&r.embedded;var a,u,l,c=t.velocity.y,h=r.velocity.y;return t.immovable||r.immovable?t.immovable?(r.y+=s,r.velocity.y=c-h*r.bounce.y,t.moves&&(r.x+=(t.x-t.prev.x)*t.friction.x)):(t.y-=s,t.velocity.y=h-c*t.bounce.y,r.moves&&(t.x+=(r.x-r.prev.x)*r.friction.x)):(s*=.5,t.y-=s,r.y+=s,a=Math.sqrt(h*h*r.mass/t.mass)*(0<h?1:-1),a-=l=.5*(a+(u=Math.sqrt(c*c*t.mass/r.mass)*(0<c?1:-1))),u-=l,t.velocity.y=l+a*t.bounce.y,r.velocity.y=l+u*r.bounce.y),!0}},function(d,w,e){var n=e(16),t=e(152),r=n(!1,r={Center:e(288),Events:e(78),Orientation:e(289),ScaleManager:e(300),ScaleModes:e(290),Zoom:e(291)},t.CENTER);r=n(!1,r,t.ORIENTATION),r=n(!1,r,t.SCALE_MODE),r=n(!1,r,t.ZOOM),d.exports=r},function(d,w,e){var n=e(106),t=e(16)(!1,t={Events:e(18),SceneManager:e(301),ScenePlugin:e(962),Settings:e(303),Systems:e(154)},n);d.exports=t},function(d,w,e){var n=e(12),t=e(0),r=e(18),o=e(2),i=e(21),s=new t({initialize:function(a){this.scene=a,this.systems=a.sys,this.settings=a.sys.settings,this.key=a.sys.settings.key,this.manager=a.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,a.sys.events.once(r.BOOT,this.boot,this),a.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(a,u){return a===void 0&&(a=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",a,u),this},restart:function(a){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,a),this},transition:function(a){a===void 0&&(a={});var u=o(a,"target",!1),l=this.manager.getScene(u);if(!u||!this.checkValidTransition(l))return!1;var c=o(a,"duration",1e3);this._elapsed=0,this._target=l,this._duration=c,this._willSleep=o(a,"sleep",!1),this._willRemove=o(a,"remove",!1);var h=o(a,"onUpdate",null);h&&(this._onUpdate=h,this._onUpdateScope=o(a,"onUpdateScope",this.scene));var f=o(a,"allowInput",!1);this.settings.transitionAllowInput=f;var g=l.sys.settings;return g.isTransition=!0,g.transitionFrom=this.scene,g.transitionDuration=c,g.transitionAllowInput=f,o(a,"moveAbove",!1)?this.manager.moveAbove(this.key,u):o(a,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),l.sys.isSleeping()?l.sys.wake(o(a,"data")):this.manager.start(u,o(a,"data")),this.systems.events.emit(r.TRANSITION_OUT,l,c),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(a){return!(!a||a.sys.isActive()||a.sys.isTransitioning()||a===this.scene||this.systems.isTransitioning())},step:function(a,u){this._elapsed+=u,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var a=this._target.sys,u=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),a.events.emit(r.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(a,u,l,c){return this.manager.add(a,u,l,c)},launch:function(a,u){return a&&a!==this.key&&this.manager.queueOp("start",a,u),this},run:function(a,u){return a&&a!==this.key&&this.manager.queueOp("run",a,u),this},pause:function(a,u){return a===void 0&&(a=this.key),this.manager.queueOp("pause",a,u),this},resume:function(a,u){return a===void 0&&(a=this.key),this.manager.queueOp("resume",a,u),this},sleep:function(a,u){return a===void 0&&(a=this.key),this.manager.queueOp("sleep",a,u),this},wake:function(a,u){return a===void 0&&(a=this.key),this.manager.queueOp("wake",a,u),this},switch:function(a){return a!==this.key&&this.manager.queueOp("switch",this.key,a),this},stop:function(a,u){return a===void 0&&(a=this.key),this.manager.queueOp("stop",a,u),this},setActive:function(a,u,l){u===void 0&&(u=this.key);var c=this.manager.getScene(u);return c&&c.sys.setActive(a,l),this},setVisible:function(a,u){u===void 0&&(u=this.key);var l=this.manager.getScene(u);return l&&l.sys.setVisible(a),this},isSleeping:function(a){return a===void 0&&(a=this.key),this.manager.isSleeping(a)},isActive:function(a){return a===void 0&&(a=this.key),this.manager.isActive(a)},isPaused:function(a){return a===void 0&&(a=this.key),this.manager.isPaused(a)},isVisible:function(a){return a===void 0&&(a=this.key),this.manager.isVisible(a)},swapPosition:function(a,u){return u===void 0&&(u=this.key),a!==u&&this.manager.swapPosition(a,u),this},moveAbove:function(a,u){return u===void 0&&(u=this.key),a!==u&&this.manager.moveAbove(a,u),this},moveBelow:function(a,u){return u===void 0&&(u=this.key),a!==u&&this.manager.moveBelow(a,u),this},remove:function(a){return a===void 0&&(a=this.key),this.manager.remove(a),this},moveUp:function(a){return a===void 0&&(a=this.key),this.manager.moveUp(a),this},moveDown:function(a){return a===void 0&&(a=this.key),this.manager.moveDown(a),this},bringToTop:function(a){return a===void 0&&(a=this.key),this.manager.bringToTop(a),this},sendToBack:function(a){return a===void 0&&(a=this.key),this.manager.sendToBack(a),this},get:function(a){return this.manager.getScene(a)},getIndex:function(a){return a===void 0&&(a=this.key),this.manager.getIndex(a)},shutdown:function(){var a=this.systems.events;a.off(r.SHUTDOWN,this.shutdown,this),a.off(r.POST_UPDATE,this.step,this),a.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});i.register("ScenePlugin",s,"scenePlugin"),d.exports=s},function(d,w,e){var n=e(16),t=e(964),r=n(!1,r={CanvasTexture:e(305),Events:e(102),FilterMode:t,Frame:e(129),Parsers:e(307),Texture:e(155),TextureManager:e(304),TextureSource:e(306)},t);d.exports=r},function(d,w){d.exports={LINEAR:0,NEAREST:1}},function(d,w,e){d.exports={Components:e(118),Parsers:e(1112),Formats:e(33),ImageCollection:e(388),ParseToTilemap:e(188),Tile:e(60),Tilemap:e(396),TilemapCreator:e(1121),TilemapFactory:e(1122),Tileset:e(89),LayerData:e(87),MapData:e(88),ObjectLayer:e(390),DynamicTilemapLayer:e(397),StaticTilemapLayer:e(398)}},function(d,w,e){var n=e(17),t=e(42);d.exports=function(r,o,i,s,a,u,l,c){r<0&&(r=0),o<0&&(o=0),l===void 0&&(l=!0);for(var h=n(r,o,i,s,null,c),f=a-r,g=u-o,p=0;p<h.length;p++){var v=h[p].x+f,T=h[p].y+g;0<=v&&v<c.width&&0<=T&&T<c.height&&c.data[T][v]&&c.data[T][v].copy(h[p])}l&&t(a-1,u-1,i+2,s+2,c)}},function(d,w,e){var n=e(120),t=e(121),r=e(17),o=e(356);d.exports=function(i,s,a,u,l,c){a===void 0&&(a={}),Array.isArray(i)||(i=[i]);var h=c.tilemapLayer;u===void 0&&(u=h.scene),l===void 0&&(l=u.cameras.main);for(var f=r(0,0,c.width,c.height,null,c),g=[],p=0;p<f.length;p++){var v,T=f[p];i.indexOf(T.index)!==-1&&(a.x=n(T.x,l,c),a.y=t(T.y,l,c),v=u.make.sprite(a),g.push(v))}if(typeof s=="number")for(p=0;p<i.length;p++)o(i[p],s,0,0,c.width,c.height,c);else if(Array.isArray(s))for(p=0;p<i.length;p++)o(i[p],s[p],0,0,c.width,c.height,c);return g}},function(d,w,e){var n=e(79),t=e(271);d.exports=function(r,o,i,s){i===void 0&&(i=[]),s===void 0&&(s=0),i.length=0;var a,u,l,c,h,f,g,p=r.tilemapLayer.tilemap,v=r.tilemapLayer,T=r.data,E=r.width,M=r.height,A=Math.floor(p.tileWidth*v.scaleX),C=Math.floor(p.tileHeight*v.scaleY),P=0,R=E,D=0,I=M;if(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1||(a=n(o.worldView.x-v.x,A,0,!0)-v.cullPaddingX,u=t(o.worldView.right-v.x,A,0,!0)+v.cullPaddingX,l=n(o.worldView.y-v.y,C,0,!0)-v.cullPaddingY,c=t(o.worldView.bottom-v.y,C,0,!0)+v.cullPaddingY,P=Math.max(0,a),R=Math.min(E,u),D=Math.max(0,l),I=Math.min(M,c)),s===0)for(f=D;f<I;f++)for(h=P;T[f]&&h<R;h++)(g=T[f][h])&&g.index!==-1&&g.visible&&g.alpha!==0&&i.push(g);else if(s===1)for(f=D;f<I;f++)for(h=R;T[f]&&P<=h;h--)(g=T[f][h])&&g.index!==-1&&g.visible&&g.alpha!==0&&i.push(g);else if(s===2)for(f=I;D<=f;f--)for(h=P;T[f]&&h<R;h++)(g=T[f][h])&&g.index!==-1&&g.visible&&g.alpha!==0&&i.push(g);else if(s===3)for(f=I;D<=f;f--)for(h=R;T[f]&&P<=h;h--)(g=T[f][h])&&g.index!==-1&&g.visible&&g.alpha!==0&&i.push(g);return v.tilesDrawn=i.length,v.tilesTotal=E*M,i}},function(d,w,e){var n=e(17),t=e(42),r=e(59);d.exports=function(o,i,s,a,u,l,c){for(var h=c.collideIndexes.indexOf(o)!==-1,f=n(i,s,a,u,null,c),g=0;g<f.length;g++)f[g].index=o,r(f[g],h);l&&t(i-1,s-1,a+2,u+2,c)}},function(d,w,e){var n=e(17);d.exports=function(t,r,o,i,s,a,u,l){return n(o,i,s,a,u,l).filter(t,r)}},function(d,w){d.exports=function(e,n,t,r){n===void 0&&(n=0),t===void 0&&(t=!1);var o,i,s,a=0;if(t){for(i=r.height-1;0<=i;i--)for(o=r.width-1;0<=o;o--)if((s=r.data[i][o])&&s.index===e){if(a===n)return s;a+=1}}else for(i=0;i<r.height;i++)for(o=0;o<r.width;o++)if((s=r.data[i][o])&&s.index===e){if(a===n)return s;a+=1}return null}},function(d,w,e){var n=e(17);d.exports=function(t,r,o,i,s,a,u,l){return n(o,i,s,a,u,l).find(t,r)||null}},function(d,w,e){var n=e(17);d.exports=function(t,r,o,i,s,a,u,l){n(o,i,s,a,u,l).forEach(t,r)}},function(d,w,e){var n=e(119),t=e(51),r=e(52);d.exports=function(o,i,s,a,u){var l=t(o,!0,a,u),c=r(i,!0,a,u);return n(l,c,s,u)}},function(d,w,e){function n(c,h){return o.RectangleToTriangle(h,c)}var t=e(453),r=e(17),o=e(357),i=e(1),s=e(120),a=e(121),u=e(51),l=e(52);d.exports=function(c,h,f,g){if(c===void 0)return[];var p=i;c instanceof t.Circle?p=o.CircleToRectangle:c instanceof t.Rectangle?p=o.RectangleToRectangle:c instanceof t.Triangle?p=n:c instanceof t.Line&&(p=o.LineToRectangle);var v=u(c.left,!0,f,g),T=l(c.top,!0,f,g),E=Math.ceil(u(c.right,!1,f,g)),M=Math.ceil(l(c.bottom,!1,f,g)),A=Math.max(E-v,1),C=Math.max(M-T,1),P=r(v,T,A,C,h,g),R=g.tileWidth,D=g.tileHeight;g.tilemapLayer&&(R*=g.tilemapLayer.scaleX,D*=g.tilemapLayer.scaleY);for(var I=[],W=new t.Rectangle(0,0,R,D),G=0;G<P.length;G++){var Y=P[G];W.x=s(Y.x,f,g),W.y=a(Y.y,f,g),p(c,W)&&I.push(Y)}return I}},function(d,w,e){var n=e(62);n.Area=e(977),n.Circumference=e(335),n.CircumferencePoint=e(164),n.Clone=e(978),n.Contains=e(50),n.ContainsPoint=e(979),n.ContainsRect=e(980),n.CopyFrom=e(981),n.Equals=e(982),n.GetBounds=e(983),n.GetPoint=e(333),n.GetPoints=e(334),n.Offset=e(984),n.OffsetPoint=e(985),n.Random=e(165),d.exports=n},function(d,w){d.exports=function(e){return 0<e.radius?Math.PI*e.radius*e.radius:0}},function(d,w,e){var n=e(62);d.exports=function(t){return new n(t.x,t.y,t.radius)}},function(d,w,e){var n=e(50);d.exports=function(t,r){return n(t,r.x,r.y)}},function(d,w,e){var n=e(50);d.exports=function(t,r){return n(t,r.x,r.y)&&n(t,r.right,r.y)&&n(t,r.x,r.bottom)&&n(t,r.right,r.bottom)}},function(d,w){d.exports=function(e,n){return n.setTo(e.x,e.y,e.radius)}},function(d,w){d.exports=function(e,n){return e.x===n.x&&e.y===n.y&&e.radius===n.radius}},function(d,w,e){var n=e(7);d.exports=function(t,r){return r===void 0&&(r=new n),r.x=t.left,r.y=t.top,r.width=t.diameter,r.height=t.diameter,r}},function(d,w){d.exports=function(e,n,t){return e.x+=n,e.y+=t,e}},function(d,w){d.exports=function(e,n){return e.x+=n.x,e.y+=n.y,e}},function(d,w,e){var n=e(92);n.Area=e(987),n.Circumference=e(326),n.CircumferencePoint=e(161),n.Clone=e(988),n.Contains=e(82),n.ContainsPoint=e(989),n.ContainsRect=e(990),n.CopyFrom=e(991),n.Equals=e(992),n.GetBounds=e(993),n.GetPoint=e(324),n.GetPoints=e(325),n.Offset=e(994),n.OffsetPoint=e(995),n.Random=e(162),d.exports=n},function(d,w){d.exports=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI}},function(d,w,e){var n=e(92);d.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(d,w,e){var n=e(82);d.exports=function(t,r){return n(t,r.x,r.y)}},function(d,w,e){var n=e(82);d.exports=function(t,r){return n(t,r.x,r.y)&&n(t,r.right,r.y)&&n(t,r.x,r.bottom)&&n(t,r.right,r.bottom)}},function(d,w){d.exports=function(e,n){return n.setTo(e.x,e.y,e.width,e.height)}},function(d,w){d.exports=function(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}},function(d,w,e){var n=e(7);d.exports=function(t,r){return r===void 0&&(r=new n),r.x=t.left,r.y=t.top,r.width=t.width,r.height=t.height,r}},function(d,w){d.exports=function(e,n,t){return e.x+=n,e.y+=t,e}},function(d,w){d.exports=function(e,n){return e.x+=n.x,e.y+=n.y,e}},function(d,w,e){var n=e(3),t=e(169);d.exports=function(r,o,i){var s,a,u,l,c,h,f,g,p,v,T,E;return i===void 0&&(i=[]),t(r,o)&&(s=r.x,a=r.y,u=r.radius,l=o.x,c=o.y,h=o.radius,a===c?(E=(T=-2*c)*T-4*(v=1)*(l*l+(f=(h*h-u*u-l*l+s*s)/(2*(s-l)))*f-2*l*f+c*c-h*h))===0?i.push(new n(f,-T/(2*v))):0<E&&(i.push(new n(f,(-T+Math.sqrt(E))/(2*v))),i.push(new n(f,(-T-Math.sqrt(E))/(2*v)))):(E=(T=2*a*(g=(s-l)/(a-c))-2*(p=(h*h-u*u-l*l+s*s-c*c+a*a)/(2*(a-c)))*g-2*s)*T-4*(v=g*g+1)*(s*s+a*a+p*p-u*u-2*a*p))===0?(f=-T/(2*v),i.push(new n(f,p-f*g))):0<E&&(f=(-T+Math.sqrt(E))/(2*v),i.push(new n(f,p-f*g)),f=(-T-Math.sqrt(E))/(2*v),i.push(new n(f,p-f*g)))),i}},function(d,w,e){var n=e(173),t=e(170);d.exports=function(r,o,i){var s,a,u,l;return i===void 0&&(i=[]),t(r,o)&&(s=o.getLineA(),a=o.getLineB(),u=o.getLineC(),l=o.getLineD(),n(s,r,i),n(a,r,i),n(u,r,i),n(l,r,i)),i}},function(d,w,e){var n=e(7),t=e(122);d.exports=function(r,o,i){return i===void 0&&(i=new n),t(r,o)&&(i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.width=Math.min(r.right,o.right)-i.x,i.height=Math.min(r.bottom,o.bottom)-i.y),i}},function(d,w,e){var n=e(175),t=e(122);d.exports=function(r,o,i){var s,a,u,l;return i===void 0&&(i=[]),t(r,o)&&(s=r.getLineA(),a=r.getLineB(),u=r.getLineC(),l=r.getLineD(),n(s,o,i),n(a,o,i),n(u,o,i),n(l,o,i)),i}},function(d,w,e){var n=e(359),t=e(175);d.exports=function(r,o,i){var s,a,u;return i===void 0&&(i=[]),n(r,o)&&(s=o.getLineA(),a=o.getLineB(),u=o.getLineC(),t(s,r,i),t(a,r,i),t(u,r,i)),i}},function(d,w,e){var n=e(173),t=e(361);d.exports=function(r,o,i){var s,a,u;return i===void 0&&(i=[]),t(r,o)&&(s=r.getLineA(),a=r.getLineB(),u=r.getLineC(),n(s,o,i),n(a,o,i),n(u,o,i)),i}},function(d,w,e){var n=e(364),t=e(362);d.exports=function(r,o,i){var s,a,u;return i===void 0&&(i=[]),n(r,o)&&(s=o.getLineA(),a=o.getLineB(),u=o.getLineC(),t(r,s,i),t(r,a,i),t(r,u,i)),i}},function(d,w,e){var n=e(366);d.exports=function(t,r){if(!n(t,r))return!1;var o=Math.min(r.x1,r.x2),i=Math.max(r.x1,r.x2),s=Math.min(r.y1,r.y2),a=Math.max(r.y1,r.y2);return t.x>=o&&t.x<=i&&t.y>=s&&t.y<=a}},function(d,w){d.exports=function(e,n,t,r,o,i){return i===void 0&&(i=0),!(n>e.right+i||t<e.left-i||r>e.bottom+i||o<e.top-i)}},function(d,w,e){var n=e(53);n.Angle=e(69),n.BresenhamPoints=e(346),n.CenterOn=e(1006),n.Clone=e(1007),n.CopyFrom=e(1008),n.Equals=e(1009),n.Extend=e(1010),n.GetEasedPoints=e(1011),n.GetMidPoint=e(1012),n.GetNearestPoint=e(1013),n.GetNormal=e(1014),n.GetPoint=e(225),n.GetPoints=e(138),n.GetShortestDistance=e(1015),n.Height=e(1016),n.Length=e(47),n.NormalAngle=e(367),n.NormalX=e(1017),n.NormalY=e(1018),n.Offset=e(1019),n.PerpSlope=e(1020),n.Random=e(139),n.ReflectAngle=e(1021),n.Rotate=e(1022),n.RotateAroundPoint=e(1023),n.RotateAroundXY=e(177),n.SetToAngle=e(1024),n.Slope=e(1025),n.Width=e(1026),d.exports=n},function(d,w){d.exports=function(e,n,t){var r=n-(e.x1+e.x2)/2,o=t-(e.y1+e.y2)/2;return e.x1+=r,e.y1+=o,e.x2+=r,e.y2+=o,e}},function(d,w,e){var n=e(53);d.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2)}},function(d,w){d.exports=function(e,n){return n.setTo(e.x1,e.y1,e.x2,e.y2)}},function(d,w){d.exports=function(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}},function(d,w,e){var n=e(47);d.exports=function(t,r,o){o===void 0&&(o=r);var i=n(t),s=t.x2-t.x1,a=t.y2-t.y1;return r&&(t.x1=t.x1-s/i*r,t.y1=t.y1-a/i*r),o&&(t.x2=t.x2+s/i*o,t.y2=t.y2+a/i*o),t}},function(d,w,e){var n=e(263),t=e(64),r=e(3);d.exports=function(o,i,s,a,u){a===void 0&&(a=0),u===void 0&&(u=[]);var l,c=[],h=o.x1,f=o.y1,g=o.x2-h,p=o.y2-f,v=t(i,u),T=s-1;for(A=0;A<T;A++)l=v(A/T),c.push(new r(h+g*l,f+p*l));if(l=v(1),c.push(new r(h+g*l,f+p*l)),0<a){for(var E=c[0],M=[E],A=1;A<c.length-1;A++){var C=c[A];n(E,C)>=a&&(M.push(C),E=C)}var P=c[c.length-1];return n(E,P)<a&&M.pop(),M.push(P),M}return c}},function(d,w,e){var n=e(3);d.exports=function(t,r){return r===void 0&&(r=new n),r.x=(t.x1+t.x2)/2,r.y=(t.y1+t.y2)/2,r}},function(d,w,e){var n=e(3);d.exports=function(t,r,o){o===void 0&&(o=new n);var i=t.x1,s=t.y1,a=t.x2,u=t.y2,l=(a-i)*(a-i)+(u-s)*(u-s);if(l==0)return o;var c=((r.x-i)*(a-i)+(r.y-s)*(u-s))/l;return o.x=i+c*(a-i),o.y=s+c*(u-s),o}},function(d,w,e){var n=e(10),t=e(69),r=e(3);d.exports=function(o,i){i===void 0&&(i=new r);var s=t(o)-n.TAU;return i.x=Math.cos(s),i.y=Math.sin(s),i}},function(d,w){d.exports=function(e,n){var t=e.x1,r=e.y1,o=e.x2,i=e.y2,s=(o-t)*(o-t)+(i-r)*(i-r);if(s==0)return!1;var a=((r-n.y)*(o-t)-(t-n.x)*(i-r))/s;return Math.abs(a)*Math.sqrt(s)}},function(d,w){d.exports=function(e){return Math.abs(e.y1-e.y2)}},function(d,w,e){var n=e(10),t=e(69);d.exports=function(r){return Math.cos(t(r)-n.TAU)}},function(d,w,e){var n=e(10),t=e(69);d.exports=function(r){return Math.sin(t(r)-n.TAU)}},function(d,w){d.exports=function(e,n,t){return e.x1+=n,e.y1+=t,e.x2+=n,e.y2+=t,e}},function(d,w){d.exports=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))}},function(d,w,e){var n=e(69),t=e(367);d.exports=function(r,o){return 2*t(o)-Math.PI-n(r)}},function(d,w,e){var n=e(177);d.exports=function(t,r){var o=(t.x1+t.x2)/2,i=(t.y1+t.y2)/2;return n(t,o,i,r)}},function(d,w,e){var n=e(177);d.exports=function(t,r,o){return n(t,r.x,r.y,o)}},function(d,w){d.exports=function(e,n,t,r,o){return e.x1=n,e.y1=t,e.x2=n+Math.cos(r)*o,e.y2=t+Math.sin(r)*o,e}},function(d,w){d.exports=function(e){return(e.y2-e.y1)/(e.x2-e.x1)}},function(d,w){d.exports=function(e){return Math.abs(e.x1-e.x2)}},function(d,w,e){var n=e(3);n.Ceil=e(1028),n.Clone=e(1029),n.CopyFrom=e(1030),n.Equals=e(1031),n.Floor=e(1032),n.GetCentroid=e(1033),n.GetMagnitude=e(368),n.GetMagnitudeSq=e(369),n.GetRectangleFromPoints=e(1034),n.Interpolate=e(1035),n.Invert=e(1036),n.Negative=e(1037),n.Project=e(1038),n.ProjectUnit=e(1039),n.SetMagnitude=e(1040),d.exports=n},function(d,w){d.exports=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))}},function(d,w,e){var n=e(3);d.exports=function(t){return new n(t.x,t.y)}},function(d,w){d.exports=function(e,n){return n.setTo(e.x,e.y)}},function(d,w){d.exports=function(e,n){return e.x===n.x&&e.y===n.y}},function(d,w){d.exports=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))}},function(d,w,e){var n=e(3);d.exports=function(t,r){if(r===void 0&&(r=new n),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var o=t.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(o===1)r.x=t[0].x,r.y=t[0].y;else{for(var i=0;i<o;i++)r.x+=t[i].x,r.y+=t[i].y;r.x/=o,r.y/=o}return r}},function(d,w,e){var n=e(7);d.exports=function(t,r){r===void 0&&(r=new n);for(var o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=0;u<t.length;u++){var l=t[u];l.x>o&&(o=l.x),l.x<i&&(i=l.x),l.y>s&&(s=l.y),l.y<a&&(a=l.y)}return r.x=i,r.y=a,r.width=o-i,r.height=s-a,r}},function(d,w,e){var n=e(3);d.exports=function(t,r,o,i){return o===void 0&&(o=0),i===void 0&&(i=new n),i.x=t.x+(r.x-t.x)*o,i.y=t.y+(r.y-t.y)*o,i}},function(d,w){d.exports=function(e){return e.setTo(e.y,e.x)}},function(d,w,e){var n=e(3);d.exports=function(t,r){return r===void 0&&(r=new n),r.setTo(-t.x,-t.y)}},function(d,w,e){var n=e(3),t=e(369);d.exports=function(r,o,i){i===void 0&&(i=new n);var s=(r.x*o.x+r.y*o.y)/t(o);return s!=0&&(i.x=s*o.x,i.y=s*o.y),i}},function(d,w,e){var n=e(3);d.exports=function(t,r,o){o===void 0&&(o=new n);var i=t.x*r.x+t.y*r.y;return i!=0&&(o.x=i*r.x,o.y=i*r.y),o}},function(d,w,e){var n=e(368);d.exports=function(t,r){var o;return t.x===0&&t.y===0||(o=n(t),t.x/=o,t.y/=o),t.x*=r,t.y*=r,t}},function(d,w,e){var n=e(212);n.Clone=e(1042),n.Contains=e(178),n.ContainsPoint=e(1043),n.GetAABB=e(454),n.GetNumberArray=e(1044),n.GetPoints=e(370),n.Perimeter=e(371),n.Reverse=e(1045),n.Smooth=e(455),d.exports=n},function(d,w,e){var n=e(212);d.exports=function(t){return new n(t.points)}},function(d,w,e){var n=e(178);d.exports=function(t,r){return n(t,r.x,r.y)}},function(d,w){d.exports=function(e,n){n===void 0&&(n=[]);for(var t=0;t<e.points.length;t++)n.push(e.points[t].x),n.push(e.points[t].y);return n}},function(d,w){d.exports=function(e){return e.points.reverse(),e}},function(d,w){d.exports=function(e){return e.width*e.height}},function(d,w){d.exports=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e}},function(d,w){d.exports=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e}},function(d,w,e){var n=e(7);d.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(d,w,e){var n=e(34);d.exports=function(t,r){return n(t,r.x,r.y)}},function(d,w){d.exports=function(e,n){return n.setTo(e.x,e.y,e.width,e.height)}},function(d,w){d.exports=function(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}},function(d,w,e){var n=e(179);d.exports=function(t,r){var o=n(t);return o<n(r)?t.setSize(r.height*o,r.height):t.setSize(r.width,r.width/o),t.setPosition(r.centerX-t.width/2,r.centerY-t.height/2)}},function(d,w,e){var n=e(179);d.exports=function(t,r){var o=n(t);return o>n(r)?t.setSize(r.height*o,r.height):t.setSize(r.width,r.width/o),t.setPosition(r.centerX-t.width/2,r.centerY-t.height/2)}},function(d,w){d.exports=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e}},function(d,w){d.exports=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e}},function(d,w,e){var n=e(7);d.exports=function(t,r,o,i,s){return s===void 0&&(s=new n),s.setTo(Math.min(t,o),Math.min(r,i),Math.abs(t-o),Math.abs(r-i))}},function(d,w,e){var n=e(3);d.exports=function(t,r){return r===void 0&&(r=new n),r.x=t.centerX,r.y=t.centerY,r}},function(d,w,e){var n=e(3);d.exports=function(t,r){return r===void 0&&(r=new n),r.x=t.width,r.y=t.height,r}},function(d,w,e){var n=e(144);d.exports=function(t,r,o){var i=t.centerX,s=t.centerY;return t.setSize(t.width+2*r,t.height+2*o),n(t,i,s)}},function(d,w,e){var n=e(7),t=e(122);d.exports=function(r,o,i){return i===void 0&&(i=new n),t(r,o)?(i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.width=Math.min(r.right,o.right)-i.x,i.height=Math.min(r.bottom,o.bottom)-i.y):i.setEmpty(),i}},function(d,w){d.exports=function(e,n){for(var t=e.x,r=e.right,o=e.y,i=e.bottom,s=0;s<n.length;s++)t=Math.min(t,n[s].x),r=Math.max(r,n[s].x),o=Math.min(o,n[s].y),i=Math.max(i,n[s].y);return e.x=t,e.y=o,e.width=r-t,e.height=i-o,e}},function(d,w){d.exports=function(e,n){var t=Math.min(e.x,n.x),r=Math.max(e.right,n.right);e.x=t,e.width=r-t;var o=Math.min(e.y,n.y),i=Math.max(e.bottom,n.bottom);return e.y=o,e.height=i-o,e}},function(d,w){d.exports=function(e,n,t){var r=Math.min(e.x,n),o=Math.max(e.right,n);e.x=r,e.width=o-r;var i=Math.min(e.y,t),s=Math.max(e.bottom,t);return e.y=i,e.height=s-i,e}},function(d,w){d.exports=function(e,n,t){return e.x+=n,e.y+=t,e}},function(d,w){d.exports=function(e,n){return e.x+=n.x,e.y+=n.y,e}},function(d,w){d.exports=function(e,n){return e.x<n.right&&e.right>n.x&&e.y<n.bottom&&e.bottom>n.y}},function(d,w,e){var n=e(3),t=e(48);d.exports=function(r,o,i){i===void 0&&(i=new n),o=t(o);var s=Math.sin(o),a=Math.cos(o),u=0<a?r.width/2:r.width/-2,l=0<s?r.height/2:r.height/-2;return Math.abs(u*s)<Math.abs(l*a)?l=u*s/a:u=l*a/s,i.x=u+r.centerX,i.y=l+r.centerY,i}},function(d,w,e){var n=e(149),t=e(373),r=e(3);d.exports=function(o,i,s){if(s===void 0&&(s=new r),t(o,i))switch(n(0,3)){case 0:s.x=o.x+Math.random()*(i.right-o.x),s.y=o.y+Math.random()*(i.top-o.y);break;case 1:s.x=i.x+Math.random()*(o.right-i.x),s.y=i.bottom+Math.random()*(o.bottom-i.bottom);break;case 2:s.x=o.x+Math.random()*(i.x-o.x),s.y=i.y+Math.random()*(o.bottom-i.y);break;case 3:s.x=i.right+Math.random()*(o.right-i.right),s.y=o.y+Math.random()*(i.bottom-o.y)}return s}},function(d,w){d.exports=function(e,n){return e.width===n.width&&e.height===n.height}},function(d,w){d.exports=function(e,n,t){return t===void 0&&(t=n),e.width*=n,e.height*=t,e}},function(d,w,e){var n=e(63);n.Area=e(1073),n.BuildEquilateral=e(1074),n.BuildFromPolygon=e(1075),n.BuildRight=e(1076),n.CenterOn=e(1077),n.Centroid=e(374),n.CircumCenter=e(1078),n.CircumCircle=e(1079),n.Clone=e(1080),n.Contains=e(67),n.ContainsArray=e(176),n.ContainsPoint=e(1081),n.CopyFrom=e(1082),n.Decompose=e(365),n.Equals=e(1083),n.GetPoint=e(336),n.GetPoints=e(337),n.InCenter=e(376),n.Perimeter=e(1084),n.Offset=e(375),n.Random=e(166),n.Rotate=e(1085),n.RotateAroundPoint=e(1086),n.RotateAroundXY=e(180),d.exports=n},function(d,w){d.exports=function(e){var n=e.x1,t=e.y1,r=e.x2,o=e.y2,i=e.x3,s=e.y3;return Math.abs(((i-n)*(o-t)-(r-n)*(s-t))/2)}},function(d,w,e){var n=e(63);d.exports=function(t,r,o){var i=o*(Math.sqrt(3)/2);return new n(t,r,t+o/2,r+i,t-o/2,r+i)}},function(d,w,e){var n=e(91),t=e(63);d.exports=function(r,o,i,s,a){o===void 0&&(o=null),i===void 0&&(i=1),s===void 0&&(s=1),a===void 0&&(a=[]);for(var u,l,c,h,f,g,p,v,T,E=n(r,o),M=0;M<E.length;M+=3)u=E[M],l=E[M+1],c=E[M+2],h=r[2*u]*i,f=r[2*u+1]*s,g=r[2*l]*i,p=r[2*l+1]*s,v=r[2*c]*i,T=r[2*c+1]*s,a.push(new t(h,f,g,p,v,T));return a}},function(d,w,e){var n=e(63);d.exports=function(t,r,o,i){return i===void 0&&(i=o),new n(t,r,t,r-i,t+o,r)}},function(d,w,e){var n=e(374),t=e(375);d.exports=function(r,o,i,s){s===void 0&&(s=n);var a=s(r),u=o-a.x,l=i-a.y;return t(r,u,l)}},function(d,w,e){var n=e(4);d.exports=function(t,r){r===void 0&&(r=new n);var o=t.x3,i=t.y3,s=t.x1-o,a=t.y1-i,u=t.x2-o,l=t.y2-i,c=2*(s*l-a*u),h=a*(u*u+l*l)-(s*s+a*a)*l,f=s*(u*u+l*l)-(s*s+a*a)*u;return r.x=o-h/c,r.y=i+f/c,r}},function(d,w,e){var n=e(62);d.exports=function(t,r){r===void 0&&(r=new n);var o,i,s,a,u=t.x1,l=t.y1,c=t.x2,h=t.y2,f=t.x3,g=t.y3,p=c-u,v=h-l,T=f-u,E=g-l,M=p*(u+c)+v*(l+h),A=T*(u+f)+E*(l+g),C=2*(p*(g-h)-v*(f-c));return Math.abs(C)<1e-6?(o=Math.min(u,c,f),i=Math.min(l,h,g),s=.5*(Math.max(u,c,f)-o),a=.5*(Math.max(l,h,g)-i),r.x=o+s,r.y=i+a):(r.x=(E*M-v*A)/C,r.y=(p*A-T*M)/C,s=r.x-u,a=r.y-l),r.radius=Math.sqrt(s*s+a*a),r}},function(d,w,e){var n=e(63);d.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(d,w,e){var n=e(67);d.exports=function(t,r){return n(t,r.x,r.y)}},function(d,w){d.exports=function(e,n){return n.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}},function(d,w){d.exports=function(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2&&e.x3===n.x3&&e.y3===n.y3}},function(d,w,e){var n=e(47);d.exports=function(t){var r=t.getLineA(),o=t.getLineB(),i=t.getLineC();return n(r)+n(o)+n(i)}},function(d,w,e){var n=e(180),t=e(376);d.exports=function(r,o){var i=t(r);return n(r,i.x,i.y,o)}},function(d,w,e){var n=e(180);d.exports=function(t,r,o){return n(t,r.x,r.y,o)}},function(d,w,e){var n=e(17),t=e(51),r=e(52);d.exports=function(o,i,s,a,u,l,c){var h=t(o,!0,l,c),f=r(i,!0,l,c),g=Math.ceil(t(o+s,!1,l,c)),p=Math.ceil(r(i+a,!1,l,c));return n(h,f,g-h,p-f,u,c)}},function(d,w,e){var n=e(377),t=e(51),r=e(52);d.exports=function(o,i,s,a){var u=t(o,!0,s,a),l=r(i,!0,s,a);return n(u,l,a)}},function(d,w,e){var n=e(181),t=e(51),r=e(52);d.exports=function(o,i,s,a,u,l){var c=t(i,!0,u,l),h=r(s,!0,u,l);return n(o,c,h,a,l)}},function(d,w,e){var n=e(42),t=e(181);d.exports=function(r,o,i,s,a){if(!Array.isArray(r))return null;s===void 0&&(s=!0),Array.isArray(r[0])||(r=[r]);for(var u=r.length,l=r[0].length,c=0;c<u;c++)for(var h=0;h<l;h++){var f=r[c][h];t(f,o+h,i+c,!1,a)}s&&n(o-1,i-1,l+2,u+2,a)}},function(d,w,e){var n=e(17),t=e(207);d.exports=function(r,o,i,s,a,u){var l,c=n(r,o,i,s,null,u);if(a===void 0)for(a=[],l=0;l<c.length;l++)a.indexOf(c[l].index)===-1&&a.push(c[l].index);for(l=0;l<c.length;l++)c[l].index=t(a)}},function(d,w,e){var n=e(378),t=e(51),r=e(52);d.exports=function(o,i,s,a,u,l){var c=t(o,!0,u,l),h=r(i,!0,u,l);return n(c,h,s,a,l)}},function(d,w,e){var n=e(17),t=e(456),r=new t(105,210,231,150),o=new t(243,134,48,200),i=new t(40,39,37,150);d.exports=function(s,a,u){a===void 0&&(a={});var l=a.tileColor!==void 0?a.tileColor:r,c=a.collidingTileColor!==void 0?a.collidingTileColor:o,h=a.faceColor!==void 0?a.faceColor:i,f=n(0,0,u.width,u.height,null,u);s.translateCanvas(u.tilemapLayer.x,u.tilemapLayer.y),s.scaleCanvas(u.tilemapLayer.scaleX,u.tilemapLayer.scaleY);for(var g=0;g<f.length;g++){var p=f[g],v=p.width,T=p.height,E=p.pixelX,M=p.pixelY,A=p.collides?c:l;A!==null&&(s.fillStyle(A.color,A.alpha/255),s.fillRect(E,M,v,T)),E+=1,M+=1,v-=2,T-=2,h!==null&&(s.lineStyle(1,h.color,h.alpha/255),p.faceTop&&s.lineBetween(E,M,E+v,M),p.faceRight&&s.lineBetween(E+v,M,E+v,M+T),p.faceBottom&&s.lineBetween(E,M+T,E+v,M+T),p.faceLeft&&s.lineBetween(E,M,E,M+T))}}},function(d,w){d.exports=function(e){var n={r:e>>16&255,g:e>>8&255,b:255&e,a:255};return 16777215<e&&(n.a=e>>>24),n}},function(d,w,e){var n=e(28),t=e(380);d.exports=function(r,o,i){var s,a,u=i,l=i,c=i;return o!==0&&(u=t(a=2*i-(s=i<.5?i*(1+o):i+o-i*o),s,r+1/3),l=t(a,s,r),c=t(a,s,r-1/3)),new n().setGLTo(u,l,c,1)}},function(d,w,e){var n=e(143);d.exports=function(t,r){t===void 0&&(t=1),r===void 0&&(r=1);for(var o=[],i=0;i<=359;i++)o.push(n(i/359,t,r));return o}},function(d,w,e){function n(r,o,i,s,a,u,l,c){l===void 0&&(l=100),c===void 0&&(c=0);var h=c/l;return{r:t(r,s,h),g:t(o,a,h),b:t(i,u,h)}}var t=e(98);d.exports={RGBWithRGB:n,ColorWithRGB:function(r,o,i,s,a,u){return a===void 0&&(a=100),u===void 0&&(u=0),n(r.r,r.g,r.b,o,i,s,a,u)},ColorWithColor:function(r,o,i,s){return i===void 0&&(i=100),s===void 0&&(s=0),n(r.r,r.g,r.b,o.r,o.g,o.b,i,s)}}},function(d,w,e){var n=e(149),t=e(28);d.exports=function(r,o){return r===void 0&&(r=0),o===void 0&&(o=255),new t(n(r,o),n(r,o),n(r,o))}},function(d,w,e){var n=e(379);d.exports=function(t,r,o,i,s){return i===void 0&&(i=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(t<<16)+(r<<8)+o).toString(16).slice(1):"0x"+n(i)+n(t)+n(r)+n(o)}},function(d,w,e){var n=e(59),t=e(42),r=e(182);d.exports=function(o,i,s,a,u){i===void 0&&(i=!0),s===void 0&&(s=!0),Array.isArray(o)||(o=[o]),u===void 0&&(u=!0);for(var l=0;l<o.length;l++)r(o[l],i,a);if(u)for(var c=0;c<a.height;c++)for(var h=0;h<a.width;h++){var f=a.data[c][h];f&&o.indexOf(f.index)!==-1&&n(f,i)}s&&t(0,0,a.width,a.height,a)}},function(d,w,e){var n=e(59),t=e(42),r=e(182);d.exports=function(o,i,s,a,u,l){if(s===void 0&&(s=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),!(i<o)){for(var c=o;c<=i;c++)r(c,s,u);if(l)for(var h=0;h<u.height;h++)for(var f=0;f<u.width;f++){var g=u.data[h][f];g&&g.index>=o&&g.index<=i&&n(g,s)}a&&t(0,0,u.width,u.height,u)}}},function(d,w,e){var n=e(59),t=e(42),r=e(182);d.exports=function(o,i,s,a){i===void 0&&(i=!0),s===void 0&&(s=!0),Array.isArray(o)||(o=[o]);for(var u=0;u<a.height;u++)for(var l=0;l<a.width;l++){var c=a.data[u][l];c&&o.indexOf(c.index)===-1&&(n(c,i),r(c.index,i,a))}s&&t(0,0,a.width,a.height,a)}},function(d,w,e){var n=e(59),t=e(42),r=e(183);d.exports=function(o,i,s,a){i===void 0&&(i=!0),s===void 0&&(s=!0);for(var u=0;u<a.height;u++)for(var l=0;l<a.width;l++){var c=a.data[u][l];if(c){for(var h in o)if(r(c.properties,h)){var f=o[h];Array.isArray(f)||(f=[f]);for(var g=0;g<f.length;g++)c.properties[h]===f[g]&&n(c,i)}}}s&&t(0,0,a.width,a.height,a)}},function(d,w,e){var n=e(59),t=e(42);d.exports=function(r,o,i){r===void 0&&(r=!0),o===void 0&&(o=!0);for(var s=0;s<i.height;s++)for(var a=0;a<i.width;a++){var u,l=i.data[s][a];l&&(u=l.getCollisionGroup())&&u.objects&&0<u.objects.length&&n(l,r)}o&&t(0,0,i.width,i.height,i)}},function(d,w){d.exports=function(e,n,t,r){if(typeof e=="number")r.callbacks[e]=n!==null?{callback:n,callbackContext:t}:void 0;else for(var o=0,i=e.length;o<i;o++)r.callbacks[e[o]]=n!==null?{callback:n,callbackContext:t}:void 0}},function(d,w,e){var n=e(17);d.exports=function(t,r,o,i,s,a,u){for(var l=n(t,r,o,i,null,u),c=0;c<l.length;c++)l[c].setCollisionCallback(s,a)}},function(d,w,e){var n=e(17),t=e(111);d.exports=function(r,o,i,s,a){var u=n(r,o,i,s,null,a),l=u.map(function(h){return h.index});t(l);for(var c=0;c<u.length;c++)u[c].index=l[c]}},function(d,w,e){var n=e(17);d.exports=function(t,r,o,i,s,a,u){for(var l=n(o,i,s,a,null,u),c=0;c<l.length;c++)l[c]&&(l[c].index===t?l[c].index=r:l[c].index===r&&(l[c].index=t))}},function(d,w,e){var n=e(120),t=e(121),r=e(4);d.exports=function(o,i,s,a,u){return s===void 0&&(s=new r(0,0)),s.x=n(o,a,u),s.y=t(i,a,u),s}},function(d,w,e){var n=e(17);d.exports=function(t,r,o,i,s,a){if(s!==void 0){for(var u=n(t,r,o,i,null,a),l=0,c=0;c<s.length;c++)l+=s[c].weight;if(!(l<=0))for(c=0;c<u.length;c++){for(var h=Math.random()*l,f=0,g=-1,p=0;p<s.length;p++)if(h<=(f+=s[p].weight)){var v=s[p].index,g=Array.isArray(v)?v[Math.floor(Math.random()*v.length)]:v;break}u[c].index=g}}}},function(d,w,e){var n=e(51),t=e(52),r=e(4);d.exports=function(o,i,s,a,u,l){return a===void 0&&(a=new r(0,0)),a.x=n(o,s,u,l),a.y=t(i,s,u,l),a}},function(d,w,e){d.exports={Parse:e(381),Parse2DArray:e(184),ParseCSV:e(382),Impact:e(1113),Tiled:e(1114)}},function(d,w,e){d.exports={ParseTileLayers:e(394),ParseTilesets:e(395),ParseWeltmeister:e(393)}},function(d,w,e){d.exports={AssignTileProperties:e(392),Base64Decode:e(385),BuildTilesetIndex:e(391),ParseGID:e(185),ParseImageLayers:e(386),ParseJSONTiled:e(383),ParseObject:e(187),ParseObjectLayers:e(389),ParseTileLayers:e(384),ParseTilesets:e(387)}},function(d,w,e){var n=e(1),t=e(1),n=e(1116),t=e(1117);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w,e){var n=e(14);d.exports=function(t,r,o,i){r.cull(i);var s=r.culledTiles,a=s.length,u=i.alpha*r.alpha;if(!(a===0||u<=0))for(var l=r.gidMap,c=r.pipeline,h=n.getTintAppendFloatAlphaAndSwap,f=r.scrollFactorX,g=r.scrollFactorY,p=r.x,v=r.y,T=r.scaleX,E=r.scaleY,M=r.tileset,A=0;A<M.length;A++)for(var C=M[A],P=C.glTexture,R=0;R<a;R++){var D,I,W,G,Y,j,ee,te,F=s[R],U=l[F.index];U===C&&(D=U.getTileTextureCoordinates(F.index))!==null&&(I=F.width,W=F.height,G=D.x,Y=D.y,j=.5*F.width,ee=.5*F.height,te=h(F.tint,u*F.alpha),c.batchTexture(r,P,P.width,P.height,p+(j+F.pixelX)*T,v+(ee+F.pixelY)*E,F.width,F.height,T,E,F.rotation,F.flipX,F.flipY,f,g,j,ee,G,Y,I,W,te,te,te,te,!1,0,0,i,null,!0))}}},function(d,w){d.exports=function(e,n,t,r,o){n.cull(r);var i=n.culledTiles,s=i.length;if(s!==0){var a=e._tempMatrix1,u=e._tempMatrix2,l=e._tempMatrix3;u.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),a.copyFrom(r.matrix);var c=e.currentContext,h=n.gidMap;c.save(),o?(a.multiplyWithOffset(o,-r.scrollX*n.scrollFactorX,-r.scrollY*n.scrollFactorY),u.e=n.x,u.f=n.y,a.multiply(u,l),l.copyToContext(c)):(u.e-=r.scrollX*n.scrollFactorX,u.f-=r.scrollY*n.scrollFactorY,u.copyToContext(c));var f=r.alpha*n.alpha;(!e.antialias||1<n.scaleX||1<n.scaleY)&&(c.imageSmoothingEnabled=!1);for(var g=0;g<s;g++){var p,v,T,E,M=i[g],A=h[M.index];A&&(p=A.image.getSourceImage(),(v=A.getTileTextureCoordinates(M.index))&&(T=M.width/2,E=M.height/2,c.save(),c.translate(M.pixelX+T,M.pixelY+E),M.rotation!==0&&c.rotate(M.rotation),(M.flipX||M.flipY)&&c.scale(M.flipX?-1:1,M.flipY?-1:1),c.globalAlpha=f*M.alpha,c.drawImage(p,v.x,v.y,M.width,M.height,-T,-E,M.width,M.height),c.restore()))}c.restore()}}},function(d,w,e){var n=e(1),t=e(1),n=e(1119),t=e(1120);d.exports={renderWebGL:n,renderCanvas:t}},function(d,w){d.exports=function(e,n,t,r){var o=n.tileset,i=n.pipeline,s=i.vertexBuffer;e.setPipeline(i),i.modelIdentity(),i.modelTranslate(n.x-r.scrollX*n.scrollFactorX,n.y-r.scrollY*n.scrollFactorY,0),i.modelScale(n.scaleX,n.scaleY,1),i.viewLoad2D(r.matrix.matrix);for(var a=0;a<o.length;a++)n.upload(r,a),0<n.vertexCount[a]&&(e.currentPipeline&&0<e.currentPipeline.vertexCount&&e.flush(),i.vertexBuffer=n.vertexBuffer[a],e.setPipeline(i),e.setTexture2D(o[a].glTexture,0),e.gl.drawArrays(i.topology,0,n.vertexCount[a]));i.vertexBuffer=s,i.viewIdentity(),i.modelIdentity()}},function(d,w){d.exports=function(e,n,t,r,o){n.cull(r);var i=n.culledTiles,s=i.length;if(s!==0){var a=e._tempMatrix1,u=e._tempMatrix2,l=e._tempMatrix3;u.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),a.copyFrom(r.matrix);var c=e.currentContext,h=n.gidMap;c.save(),o?(a.multiplyWithOffset(o,-r.scrollX*n.scrollFactorX,-r.scrollY*n.scrollFactorY),u.e=n.x,u.f=n.y,a.multiply(u,l),l.copyToContext(c)):(u.e-=r.scrollX*n.scrollFactorX,u.f-=r.scrollY*n.scrollFactorY,u.copyToContext(c));var f=r.alpha*n.alpha;(!e.antialias||1<n.scaleX||1<n.scaleY)&&(c.imageSmoothingEnabled=!1);for(var g=0;g<s;g++){var p,v,T,E,M,A,C=i[g],P=h[C.index];P&&(p=P.image.getSourceImage(),(v=P.getTileTextureCoordinates(C.index))&&(M=(T=P.tileWidth)/2,A=(E=P.tileHeight)/2,c.save(),c.translate(C.pixelX+M,C.pixelY+A),C.rotation!==0&&c.rotate(C.rotation),(C.flipX||C.flipY)&&c.scale(C.flipX?-1:1,C.flipY?-1:1),c.globalAlpha=f*C.alpha,c.drawImage(p,v.x,v.y,T,E,-M,-A,T,E),c.restore()))}c.restore()}}},function(d,w,e){var n=e(22),t=e(188);n.register("tilemap",function(r){var o=r!==void 0?r:{};return t(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(d,w,e){var n=e(8),t=e(188);n.register("tilemap",function(r,o,i,s,a,u,l){return r===null&&(r=void 0),o===null&&(o=void 0),i===null&&(i=void 0),s===null&&(s=void 0),a===null&&(a=void 0),t(this.scene,r,o,i,s,a,u,l)})},function(d,w,e){d.exports={Clock:e(1124),TimerEvent:e(399)}},function(d,w,e){var n=e(0),t=e(21),r=e(18),o=e(399),i=new n({initialize:function(s){this.scene=s,this.systems=s.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],s.sys.events.once(r.BOOT,this.boot,this),s.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(r.PRE_UPDATE,this.preUpdate,this),s.on(r.UPDATE,this.update,this),s.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(s){var a=new o(s);return this._pendingInsertion.push(a),a},delayedCall:function(s,a,u,l){return this.addEvent({delay:s,callback:a,args:u,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var s=this._pendingRemoval.length,a=this._pendingInsertion.length;if(s!==0||a!==0){for(var u,l=0;l<s;l++){u=this._pendingRemoval[l];var c=this._active.indexOf(u);-1<c&&this._active.splice(c,1),u.destroy()}for(l=0;l<a;l++)u=this._pendingInsertion[l],this._active.push(u);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(s,a){if(this.now=s,!this.paused){a*=this.timeScale;for(var u=0;u<this._active.length;u++){var l,c=this._active[u];c.paused||(c.elapsed+=a*c.timeScale,c.elapsed>=c.delay&&(l=c.elapsed-c.delay,c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),0<c.repeatCount?(c.repeatCount--,c.elapsed=l,c.hasDispatched=!1):this._pendingRemoval.push(c)))}}},shutdown:function(){for(var s=0;s<this._pendingInsertion.length;s++)this._pendingInsertion[s].destroy();for(s=0;s<this._active.length;s++)this._active[s].destroy();for(s=0;s<this._pendingRemoval.length;s++)this._pendingRemoval[s].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var a=this.systems.events;a.off(r.PRE_UPDATE,this.preUpdate,this),a.off(r.UPDATE,this.update,this),a.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});t.register("Clock",i,"time"),d.exports=i},function(d,w,e){var n=e(77),t=e(16)(!1,t={Builders:e(1126),Events:e(193),TweenManager:e(1142),Tween:e(192),TweenData:e(194),Timeline:e(405)},n);d.exports=t},function(d,w,e){d.exports={GetBoolean:e(76),GetEaseFunction:e(64),GetNewValue:e(123),GetProps:e(400),GetTargets:e(189),GetTweens:e(401),GetValueOp:e(190),NumberTweenBuilder:e(402),StaggerBuilder:e(403),TimelineBuilder:e(404),TweenBuilder:e(124)}},function(d,w){d.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(d,w){d.exports="complete"},function(d,w){d.exports="loop"},function(d,w){d.exports="pause"},function(d,w){d.exports="resume"},function(d,w){d.exports="start"},function(d,w){d.exports="update"},function(d,w){d.exports="active"},function(d,w){d.exports="complete"},function(d,w){d.exports="loop"},function(d,w){d.exports="repeat"},function(d,w){d.exports="start"},function(d,w){d.exports="stop"},function(d,w){d.exports="update"},function(d,w){d.exports="yoyo"},function(d,w,e){var n=e(104),t=e(0),r=e(402),o=e(21),i=e(18),s=e(403),a=e(404),u=e(77),l=e(124),c=new t({initialize:function(h){this.scene=h,this.systems=h.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,h.sys.events.once(i.BOOT,this.boot,this),h.sys.events.on(i.START,this.start,this)},boot:function(){this.systems.events.once(i.DESTROY,this.destroy,this)},start:function(){var h=this.systems.events;h.on(i.PRE_UPDATE,this.preUpdate,this),h.on(i.UPDATE,this.update,this),h.once(i.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(h){return a(this,h)},timeline:function(h){var f=a(this,h);return f.paused||(this._add.push(f),this._toProcess++),f},create:function(h){return l(this,h)},add:function(h){var f=l(this,h);return this._add.push(f),this._toProcess++,f},existing:function(h){return this._add.push(h),this._toProcess++,this},addCounter:function(h){var f=r(this,h);return this._add.push(f),this._toProcess++,f},stagger:function(h,f){return s(h,f)},preUpdate:function(){if(this._toProcess!==0){for(var h,f=this._destroy,g=this._active,p=this._pending,v=0;v<f.length;v++){h=f[v];var T=g.indexOf(h);T===-1?-1<(T=p.indexOf(h))&&(h.state=u.REMOVED,p.splice(T,1)):(h.state=u.REMOVED,g.splice(T,1))}for(f.length=0,f=this._add,v=0;v<f.length;v++)(h=f[v]).state===u.PENDING_ADD&&(h.init()?(h.play(),this._active.push(h)):this._pending.push(h));f.length=0,this._toProcess=0}},update:function(h,f){var g,p=this._active;f*=this.timeScale;for(var v=0;v<p.length;v++)(g=p[v]).update(h,f)&&(this._destroy.push(g),this._toProcess++)},remove:function(h){return n(this._add,h),n(this._pending,h),n(this._active,h),n(this._destroy,h),h.state=u.REMOVED,this},makeActive:function(h){if(this._add.indexOf(h)!==-1||this._active.indexOf(h)!==-1)return this;var f=this._pending.indexOf(h);return f!==-1&&this._pending.splice(f,1),this._add.push(h),h.state=u.PENDING_ADD,this._toProcess++,this},each:function(h,f){for(var g=[null],p=1;p<arguments.length;p++)g.push(arguments[p]);for(var v in this.list)g[0]=this.list[v],h.apply(f,g)},getAllTweens:function(){for(var h=this._active,f=[],g=0;g<h.length;g++)f.push(h[g]);return f},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(h){var f,g,p=this._active,v=[];if(Array.isArray(h))for(g=0;g<p.length;g++){f=p[g];for(var T=0;T<h.length;T++)f.hasTarget(h[T])&&v.push(f)}else for(g=0;g<p.length;g++)(f=p[g]).hasTarget(h)&&v.push(f);return v},isTweening:function(h){for(var f,g=this._active,p=0;p<g.length;p++)if((f=g[p]).hasTarget(h)&&f.isPlaying())return!0;return!1},killAll:function(){for(var h=this.getAllTweens(),f=0;f<h.length;f++)h[f].stop();return this},killTweensOf:function(h){for(var f=this.getTweensOf(h),g=0;g<f.length;g++)f[g].stop();return this},pauseAll:function(){for(var h=this._active,f=0;f<h.length;f++)h[f].pause();return this},resumeAll:function(){for(var h=this._active,f=0;f<h.length;f++)h[f].resume();return this},setGlobalTimeScale:function(h){return this.timeScale=h,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var h=this.systems.events;h.off(i.PRE_UPDATE,this.preUpdate,this),h.off(i.UPDATE,this.update,this),h.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(i.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",c,"tweens"),d.exports=c},function(d,w,e){d.exports={SoundManagerCreator:e(308),Events:e(55),BaseSound:e(108),BaseSoundManager:e(107),WebAudioSound:e(316),WebAudioSoundManager:e(315),HTML5AudioSound:e(312),HTML5AudioSoundManager:e(309),NoAudioSound:e(314),NoAudioSoundManager:e(313)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(d,w,e){(function(n){e(460);var t=e(32),r=e(16),o={Animations:e(469),Cache:e(504),Cameras:{Scene2D:e(507)},Core:e(601),Class:e(0),Curves:{Spline:e(419)},Data:e(662),Display:{Masks:e(668)},DOM:e(669),Events:e(670),Game:e(672),GameObjects:{BitmapText:e(130),BuildGameObject:e(29),BuildGameObjectAnimation:e(317),Components:e(13),Container:e(157),DisplayList:e(809),GameObjectCreator:e(22),GameObjectFactory:e(8),GameObject:e(19),Graphics:e(159),Image:e(112),Rectangle:e(328),Sprite:e(71),UpdateList:e(821),Factories:{BitmapText:e(825),Container:e(826),Graphics:e(827),Image:e(828),Rectangle:e(829),Sprite:e(830),TileSprite:e(831)},Creators:{BitmapText:e(835),Container:e(836),Graphics:e(837),Image:e(838),Sprite:e(839),TileSprite:e(840)}},Input:e(841),Loader:{FileTypes:{AtlasJSONFile:e(875),AudioFile:e(425),BitmapFontFile:e(876),ImageFile:e(84)},GetURL:e(132),LoaderPlugin:e(877),MergeXHRSettings:e(167),XHRLoader:e(340),XHRSettings:e(116)},Math:{Vector2:e(4)},Physics:{Arcade:e(878)},Renderer:e(1187),Scale:e(960),Scene:e(302),Scenes:e(961),Textures:e(963),Tilemaps:e(965),Time:e(1123),Tweens:e(1125)};o.Sound=e(1143),o=r(!1,o,t),d.exports=o,n.Phaser=o}).call(this,e(459))},function(d,w,e){d.exports={Canvas:e(1188),Snapshot:e(1189),WebGL:e(1190)}},function(d,w,e){d.exports={CanvasRenderer:e(411),GetBlendModes:e(413),SetTransform:e(36)}},function(d,w,e){d.exports={Canvas:e(412),WebGL:e(415)}},function(d,w,e){d.exports={Utils:e(14),WebGLPipeline:e(126),WebGLRenderer:e(414),Pipelines:e(1191),BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4}},function(d,w,e){d.exports={BitmapMaskPipeline:e(416),ForwardDiffuseLightPipeline:e(417),TextureTintPipeline:e(201),TextureTintStripPipeline:e(418),ModelViewProjection:e(202)}}],rt.c=Zt,rt.d=function(d,w,e){rt.o(d,w)||Object.defineProperty(d,w,{enumerable:!0,get:e})},rt.r=function(d){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},rt.t=function(d,w){if(1&w&&(d=rt(d)),8&w||4&w&&typeof d=="object"&&d&&d.__esModule)return d;var e=Object.create(null);if(rt.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:d}),2&w&&typeof d!="string")for(var n in d)rt.d(e,n,function(t){return d[t]}.bind(null,n));return e},rt.n=function(d){var w=d&&d.__esModule?function(){return d.default}:function(){return d};return rt.d(w,"a",w),w},rt.o=function(d,w){return Object.prototype.hasOwnProperty.call(d,w)},rt.p="",rt(rt.s=1186);function rt(d){if(Zt[d])return Zt[d].exports;var w=Zt[d]={i:d,l:!1,exports:{}};return Gt[d].call(w.exports,w,w.exports,rt),w.l=!0,w.exports}var Gt,Zt})},159:function(ct,rt,Gt){ct=Gt.nmd(ct);var Zt;(function(){var d,w="Expected a function",e="__lodash_hash_undefined__",n="__lodash_placeholder__",t=16,r=32,o=64,i=128,s=256,a=1/0,u=9007199254740991,l=NaN,c=4294967295,h=[["ary",i],["bind",1],["bindKey",2],["curry",8],["curryRight",t],["flip",512],["partial",r],["partialRight",o],["rearg",s]],f="[object Arguments]",g="[object Array]",p="[object Boolean]",v="[object Date]",T="[object Error]",E="[object Function]",M="[object GeneratorFunction]",A="[object Map]",C="[object Number]",P="[object Object]",R="[object Promise]",D="[object RegExp]",I="[object Set]",W="[object String]",G="[object Symbol]",Y="[object WeakMap]",j="[object ArrayBuffer]",ee="[object DataView]",te="[object Float32Array]",F="[object Float64Array]",U="[object Int8Array]",K="[object Int16Array]",oe="[object Int32Array]",ae="[object Uint8Array]",ce="[object Uint8ClampedArray]",re="[object Uint16Array]",ve="[object Uint32Array]",Se=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,pe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ae=/&(?:amp|lt|gt|quot|#39);/g,Oe=/[&<>"']/g,Fe=RegExp(Ae.source),Ve=RegExp(Oe.source),ze=/<%-([\s\S]+?)%>/g,Xe=/<%([\s\S]+?)%>/g,Ge=/<%=([\s\S]+?)%>/g,pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lt=/^\w*$/,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,Et=RegExp(it.source),gt=/^\s+|\s+$/g,dt=/^\s+/,St=/\s+$/,mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mt=/\{\n\/\* \[wrapped with (.+)\] \*/,It=/,? & /,kt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gi=/\\(\\)?/g,ke=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,m=/\w*$/,S=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,O=/^\[object .+?Constructor\]$/,B=/^0o[0-7]+$/i,L=/^(?:0|[1-9]\d*)$/,N=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,X=/($^)/,V=/['\n\r\u2028\u2029\\]/g,$="\\ud800-\\udfff",Q="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",me="\\u2700-\\u27bf",se="a-z\\xdf-\\xf6\\xf8-\\xff",q="A-Z\\xc0-\\xd6\\xd8-\\xde",le="\\ufe0e\\ufe0f",J="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ne="['\u2019]",ge="["+$+"]",he="["+J+"]",we="["+Q+"]",Be="\\d+",xe="["+me+"]",Ee="["+se+"]",Ne="[^"+$+J+Be+me+se+q+"]",Qe="\\ud83c[\\udffb-\\udfff]",Ue="[^"+$+"]",tt="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",nt="["+q+"]",yt="\\u200d",Ft="(?:"+Ee+"|"+Ne+")",Dt="(?:"+nt+"|"+Ne+")",si="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Qi="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Li="(?:"+we+"|"+Qe+")?",Dr="["+le+"]?",Lr=Dr+Li+("(?:"+yt+"(?:"+[Ue,tt,We].join("|")+")"+Dr+Li+")*"),Yo="(?:"+[xe,tt,We].join("|")+")"+Lr,zo="(?:"+[Ue+we+"?",we,tt,We,ge].join("|")+")",Xo=RegExp(ne,"g"),Vo=RegExp(we,"g"),En=RegExp(Qe+"(?="+Qe+")|"+zo+Lr,"g"),jo=RegExp([nt+"?"+Ee+"+"+si+"(?="+[he,nt,"$"].join("|")+")",Dt+"+"+Qi+"(?="+[he,nt+Ft,"$"].join("|")+")",nt+"?"+Ft+"+"+si,nt+"+"+Qi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,Yo].join("|"),"g"),Ko=RegExp("["+yt+$+Q+le+"]"),qo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zo=-1,At={};At[te]=At[F]=At[U]=At[K]=At[oe]=At[ae]=At[ce]=At[re]=At[ve]=!0,At[f]=At[g]=At[j]=At[p]=At[ee]=At[v]=At[T]=At[E]=At[A]=At[C]=At[P]=At[D]=At[I]=At[W]=At[Y]=!1;var bt={};bt[f]=bt[g]=bt[j]=bt[ee]=bt[p]=bt[v]=bt[te]=bt[F]=bt[U]=bt[K]=bt[oe]=bt[A]=bt[C]=bt[P]=bt[D]=bt[I]=bt[W]=bt[G]=bt[ae]=bt[ce]=bt[re]=bt[ve]=!0,bt[T]=bt[E]=bt[Y]=!1;var $o={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qo=parseFloat,eh=parseInt,Br=typeof Gt.g=="object"&&Gt.g&&Gt.g.Object===Object&&Gt.g,th=typeof self=="object"&&self&&self.Object===Object&&self,Yt=Br||th||Function("return this")(),Rr=rt&&!rt.nodeType&&rt,fs=Rr&&!0&&ct&&!ct.nodeType&&ct,Ir=fs&&fs.exports===Rr,bn=Ir&&Br.process,hi=function(){try{var Te=fs&&fs.require&&fs.require("util").types;return Te||bn&&bn.binding&&bn.binding("util")}catch(Me){}}(),Fr=hi&&hi.isArrayBuffer,Nr=hi&&hi.isDate,Hr=hi&&hi.isMap,Wr=hi&&hi.isRegExp,Gr=hi&&hi.isSet,Ur=hi&&hi.isTypedArray;function ni(Te,Me,Pe){switch(Pe.length){case 0:return Te.call(Me);case 1:return Te.call(Me,Pe[0]);case 2:return Te.call(Me,Pe[0],Pe[1]);case 3:return Te.call(Me,Pe[0],Pe[1],Pe[2])}return Te.apply(Me,Pe)}function ih(Te,Me,Pe,Ie){for(var et=-1,ft=Te==null?0:Te.length;++et<ft;){var Nt=Te[et];Me(Ie,Nt,Pe(Nt),Te)}return Ie}function li(Te,Me){for(var Pe=-1,Ie=Te==null?0:Te.length;++Pe<Ie&&Me(Te[Pe],Pe,Te)!==!1;);return Te}function sh(Te,Me){for(var Pe=Te==null?0:Te.length;Pe--&&Me(Te[Pe],Pe,Te)!==!1;);return Te}function Yr(Te,Me){for(var Pe=-1,Ie=Te==null?0:Te.length;++Pe<Ie;)if(!Me(Te[Pe],Pe,Te))return!1;return!0}function Bi(Te,Me){for(var Pe=-1,Ie=Te==null?0:Te.length,et=0,ft=[];++Pe<Ie;){var Nt=Te[Pe];Me(Nt,Pe,Te)&&(ft[et++]=Nt)}return ft}function Ps(Te,Me){return!!(Te==null?0:Te.length)&&-1<es(Te,Me,0)}function An(Te,Me,Pe){for(var Ie=-1,et=Te==null?0:Te.length;++Ie<et;)if(Pe(Me,Te[Ie]))return!0;return!1}function Pt(Te,Me){for(var Pe=-1,Ie=Te==null?0:Te.length,et=Array(Ie);++Pe<Ie;)et[Pe]=Me(Te[Pe],Pe,Te);return et}function Ri(Te,Me){for(var Pe=-1,Ie=Me.length,et=Te.length;++Pe<Ie;)Te[et+Pe]=Me[Pe];return Te}function _n(Te,Me,Pe,Ie){var et=-1,ft=Te==null?0:Te.length;for(Ie&&ft&&(Pe=Te[++et]);++et<ft;)Pe=Me(Pe,Te[et],et,Te);return Pe}function nh(Te,Me,Pe,Ie){var et=Te==null?0:Te.length;for(Ie&&et&&(Pe=Te[--et]);et--;)Pe=Me(Pe,Te[et],et,Te);return Pe}function Cn(Te,Me){for(var Pe=-1,Ie=Te==null?0:Te.length;++Pe<Ie;)if(Me(Te[Pe],Pe,Te))return!0;return!1}var rh=Mn("length");function zr(Te,Me,Pe){var Ie;return Pe(Te,function(et,ft,Nt){if(Me(et,ft,Nt))return Ie=ft,!1}),Ie}function ks(Te,Me,Pe,Ie){for(var et=Te.length,ft=Pe+(Ie?1:-1);Ie?ft--:++ft<et;)if(Me(Te[ft],ft,Te))return ft;return-1}function es(Te,Me,Pe){return Me==Me?function(Ie,et,ft){for(var Nt=ft-1,Ti=Ie.length;++Nt<Ti;)if(Ie[Nt]===et)return Nt;return-1}(Te,Me,Pe):ks(Te,Xr,Pe)}function ah(Te,Me,Pe,Ie){for(var et=Pe-1,ft=Te.length;++et<ft;)if(Ie(Te[et],Me))return et;return-1}function Xr(Te){return Te!=Te}function Vr(Te,Me){var Pe=Te==null?0:Te.length;return Pe?kn(Te,Me)/Pe:l}function Mn(Te){return function(Me){return Me==null?d:Me[Te]}}function Pn(Te){return function(Me){return Te==null?d:Te[Me]}}function jr(Te,Me,Pe,Ie,et){return et(Te,function(ft,Nt,Ti){Pe=Ie?(Ie=!1,ft):Me(Pe,ft,Nt,Ti)}),Pe}function kn(Te,Me){for(var Pe,Ie=-1,et=Te.length;++Ie<et;){var ft=Me(Te[Ie]);ft!==d&&(Pe=Pe===d?ft:Pe+ft)}return Pe}function On(Te,Me){for(var Pe=-1,Ie=Array(Te);++Pe<Te;)Ie[Pe]=Me(Pe);return Ie}function ri(Te){return function(Me){return Te(Me)}}function Dn(Te,Me){return Pt(Me,function(Pe){return Te[Pe]})}function ps(Te,Me){return Te.has(Me)}function Kr(Te,Me){for(var Pe=-1,Ie=Te.length;++Pe<Ie&&-1<es(Me,Te[Pe],0););return Pe}function qr(Te,Me){for(var Pe=Te.length;Pe--&&-1<es(Me,Te[Pe],0););return Pe}var oh=Pn({\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"}),hh=Pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function lh(Te){return"\\"+$o[Te]}function ts(Te){return Ko.test(Te)}function Ln(Te){var Me=-1,Pe=Array(Te.size);return Te.forEach(function(Ie,et){Pe[++Me]=[et,Ie]}),Pe}function Jr(Te,Me){return function(Pe){return Te(Me(Pe))}}function Ii(Te,Me){for(var Pe=-1,Ie=Te.length,et=0,ft=[];++Pe<Ie;){var Nt=Te[Pe];Nt!==Me&&Nt!==n||(Te[Pe]=n,ft[et++]=Pe)}return ft}function Os(Te){var Me=-1,Pe=Array(Te.size);return Te.forEach(function(Ie){Pe[++Me]=Ie}),Pe}function is(Te){return ts(Te)?function(Me){for(var Pe=En.lastIndex=0;En.test(Me);)++Pe;return Pe}(Te):rh(Te)}function mi(Te){return ts(Te)?function(Me){return Me.match(En)||[]}(Te):function(Me){return Me.split("")}(Te)}var uh=Pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ds=function Te(Me){var Pe,Ie=(Me=Me==null?Yt:Ds.defaults(Yt.Object(),Me,Ds.pick(Yt,Jo))).Array,et=Me.Date,ft=Me.Error,Nt=Me.Function,Ti=Me.Math,_t=Me.Object,Bn=Me.RegExp,ch=Me.String,ui=Me.TypeError,Ls=Ie.prototype,dh=Nt.prototype,ss=_t.prototype,Bs=Me["__core-js_shared__"],Rs=dh.toString,Tt=ss.hasOwnProperty,fh=0,Zr=(Pe=/[^.]+$/.exec(Bs&&Bs.keys&&Bs.keys.IE_PROTO||""))?"Symbol(src)_1."+Pe:"",Is=ss.toString,ph=Rs.call(_t),gh=Yt._,mh=Bn("^"+Rs.call(Tt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fs=Ir?Me.Buffer:d,Fi=Me.Symbol,Ns=Me.Uint8Array,$r=Fs?Fs.allocUnsafe:d,Hs=Jr(_t.getPrototypeOf,_t),Qr=_t.create,ea=ss.propertyIsEnumerable,Ws=Ls.splice,ta=Fi?Fi.isConcatSpreadable:d,gs=Fi?Fi.iterator:d,Xi=Fi?Fi.toStringTag:d,Gs=function(){try{var y=Ji(_t,"defineProperty");return y({},"",{}),y}catch(x){}}(),yh=Me.clearTimeout!==Yt.clearTimeout&&Me.clearTimeout,vh=et&&et.now!==Yt.Date.now&&et.now,xh=Me.setTimeout!==Yt.setTimeout&&Me.setTimeout,Us=Ti.ceil,Ys=Ti.floor,Rn=_t.getOwnPropertySymbols,Th=Fs?Fs.isBuffer:d,ia=Me.isFinite,wh=Ls.join,Sh=Jr(_t.keys,_t),Ht=Ti.max,Xt=Ti.min,Eh=et.now,bh=Me.parseInt,sa=Ti.random,Ah=Ls.reverse,In=Ji(Me,"DataView"),ms=Ji(Me,"Map"),Fn=Ji(Me,"Promise"),ns=Ji(Me,"Set"),ys=Ji(Me,"WeakMap"),vs=Ji(_t,"create"),zs=ys&&new ys,rs={},_h=Zi(In),Ch=Zi(ms),Mh=Zi(Fn),Ph=Zi(ns),kh=Zi(ys),Xs=Fi?Fi.prototype:d,xs=Xs?Xs.valueOf:d,na=Xs?Xs.toString:d;function Z(y){if(Lt(y)&&!st(y)&&!(y instanceof ut)){if(y instanceof yi)return y;if(Tt.call(y,"__wrapped__"))return ao(y)}return new yi(y)}var as=function(y){if(!Ot(y))return{};if(Qr)return Qr(y);Nn.prototype=y;var x=new Nn;return Nn.prototype=d,x};function Nn(){}function Vs(){}function yi(y,x){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=d}function ut(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function Vi(y){var x=-1,k=y==null?0:y.length;for(this.clear();++x<k;){var H=y[x];this.set(H[0],H[1])}}function Ai(y){var x=-1,k=y==null?0:y.length;for(this.clear();++x<k;){var H=y[x];this.set(H[0],H[1])}}function _i(y){var x=-1,k=y==null?0:y.length;for(this.clear();++x<k;){var H=y[x];this.set(H[0],H[1])}}function ji(y){var x=-1,k=y==null?0:y.length;for(this.__data__=new _i;++x<k;)this.add(y[x])}function vi(y){var x=this.__data__=new Ai(y);this.size=x.size}function ra(y,x){var k=st(y),H=!k&&$i(y),z=!k&&!H&&Ui(y),ie=!k&&!H&&!z&&us(y),ue=k||H||z||ie,fe=ue?On(y.length,ch):[],ye=fe.length;for(var be in y)!x&&!Tt.call(y,be)||ue&&(be=="length"||z&&(be=="offset"||be=="parent")||ie&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||ki(be,ye))||fe.push(be);return fe}function aa(y){var x=y.length;return x?y[qn(0,x-1)]:d}function Oh(y,x){return on($t(y),Ki(x,0,y.length))}function Dh(y){return on($t(y))}function Hn(y,x,k){(k===d||xi(y[x],k))&&(k!==d||x in y)||Ci(y,x,k)}function Ts(y,x,k){var H=y[x];Tt.call(y,x)&&xi(H,k)&&(k!==d||x in y)||Ci(y,x,k)}function js(y,x){for(var k=y.length;k--;)if(xi(y[k][0],x))return k;return-1}function Lh(y,x,k,H){return Ni(y,function(z,ie,ue){x(H,z,k(z),ue)}),H}function oa(y,x){return y&&Si(x,Ut(x),y)}function Ci(y,x,k){x=="__proto__"&&Gs?Gs(y,x,{configurable:!0,enumerable:!0,value:k,writable:!0}):y[x]=k}function Wn(y,x){for(var k=-1,H=x.length,z=Ie(H),ie=y==null;++k<H;)z[k]=ie?d:wr(y,x[k]);return z}function Ki(y,x,k){return y==y&&(k!==d&&(y=y<=k?y:k),x!==d&&(y=x<=y?y:x)),y}function ci(y,x,k,H,z,ie){var ue,fe=1&x,ye=2&x,be=4&x;if(k&&(ue=z?k(y,H,z,ie):k(y)),ue!==d)return ue;if(!Ot(y))return y;var _e=st(y);if(_e){if(ue=function(Ce){var Le=Ce.length,Ze=new Ce.constructor(Le);return Le&&typeof Ce[0]=="string"&&Tt.call(Ce,"index")&&(Ze.index=Ce.index,Ze.input=Ce.input),Ze}(y),!fe)return $t(y,ue)}else{var De=Vt(y),He=De==E||De==M;if(Ui(y))return Oa(y,fe);if(De==P||De==f||He&&!z){if(ue=ye||He?{}:Ja(y),!fe)return ye?function(Ce,Le){return Si(Ce,Ka(Ce),Le)}(y,function(Ce,Le){return Ce&&Si(Le,ei(Le),Ce)}(ue,y)):function(Ce,Le){return Si(Ce,lr(Ce),Le)}(y,oa(ue,y))}else{if(!bt[De])return z?y:{};ue=function(Ce,Le,Ze){var Re=Ce.constructor;switch(Le){case j:return ir(Ce);case p:case v:return new Re(+Ce);case ee:return function(qe,ot){var wt=ot?ir(qe.buffer):qe.buffer;return new qe.constructor(wt,qe.byteOffset,qe.byteLength)}(Ce,Ze);case te:case F:case U:case K:case oe:case ae:case ce:case re:case ve:return Da(Ce,Ze);case A:return new Re;case C:case W:return new Re(Ce);case D:return function(qe){var ot=new qe.constructor(qe.source,m.exec(qe));return ot.lastIndex=qe.lastIndex,ot}(Ce);case I:return new Re;case G:return function(qe){return xs?_t(xs.call(qe)):{}}(Ce)}}(y,De,fe)}}var Ye=(ie=ie||new vi).get(y);if(Ye)return Ye;ie.set(y,ue),Ao(y)?y.forEach(function(Ce){ue.add(ci(Ce,x,k,Ce,y,ie))}):Eo(y)&&y.forEach(function(Ce,Le){ue.set(Le,ci(Ce,x,k,Le,y,ie))});var Ke=_e?d:(be?ye?ar:rr:ye?ei:Ut)(y);return li(Ke||y,function(Ce,Le){Ke&&(Ce=y[Le=Ce]),Ts(ue,Le,ci(Ce,x,k,Le,y,ie))}),ue}function ha(y,x,k){var H=k.length;if(y==null)return!H;for(y=_t(y);H--;){var z=k[H],ie=x[z],ue=y[z];if(ue===d&&!(z in y)||!ie(ue))return!1}return!0}function la(y,x,k){if(typeof y!="function")throw new ui(w);return Cs(function(){y.apply(d,k)},x)}function ws(y,x,k,H){var z=-1,ie=Ps,ue=!0,fe=y.length,ye=[],be=x.length;if(!fe)return ye;k&&(x=Pt(x,ri(k))),H?(ie=An,ue=!1):200<=x.length&&(ie=ps,ue=!1,x=new ji(x));e:for(;++z<fe;){var _e=y[z],De=k==null?_e:k(_e);if(_e=H||_e!==0?_e:0,ue&&De==De){for(var He=be;He--;)if(x[He]===De)continue e;ye.push(_e)}else ie(x,De,H)||ye.push(_e)}return ye}Z.templateSettings={escape:ze,evaluate:Xe,interpolate:Ge,variable:"",imports:{_:Z}},(Z.prototype=Vs.prototype).constructor=Z,(yi.prototype=as(Vs.prototype)).constructor=yi,(ut.prototype=as(Vs.prototype)).constructor=ut,Vi.prototype.clear=function(){this.__data__=vs?vs(null):{},this.size=0},Vi.prototype.delete=function(y){var x=this.has(y)&&delete this.__data__[y];return this.size-=x?1:0,x},Vi.prototype.get=function(y){var x=this.__data__;if(vs){var k=x[y];return k===e?d:k}return Tt.call(x,y)?x[y]:d},Vi.prototype.has=function(y){var x=this.__data__;return vs?x[y]!==d:Tt.call(x,y)},Vi.prototype.set=function(y,x){var k=this.__data__;return this.size+=this.has(y)?0:1,k[y]=vs&&x===d?e:x,this},Ai.prototype.clear=function(){this.__data__=[],this.size=0},Ai.prototype.delete=function(y){var x=this.__data__,k=js(x,y);return!(k<0)&&(k==x.length-1?x.pop():Ws.call(x,k,1),--this.size,!0)},Ai.prototype.get=function(y){var x=this.__data__,k=js(x,y);return k<0?d:x[k][1]},Ai.prototype.has=function(y){return-1<js(this.__data__,y)},Ai.prototype.set=function(y,x){var k=this.__data__,H=js(k,y);return H<0?(++this.size,k.push([y,x])):k[H][1]=x,this},_i.prototype.clear=function(){this.size=0,this.__data__={hash:new Vi,map:new(ms||Ai),string:new Vi}},_i.prototype.delete=function(y){var x=an(this,y).delete(y);return this.size-=x?1:0,x},_i.prototype.get=function(y){return an(this,y).get(y)},_i.prototype.has=function(y){return an(this,y).has(y)},_i.prototype.set=function(y,x){var k=an(this,y),H=k.size;return k.set(y,x),this.size+=k.size==H?0:1,this},ji.prototype.add=ji.prototype.push=function(y){return this.__data__.set(y,e),this},ji.prototype.has=function(y){return this.__data__.has(y)},vi.prototype.clear=function(){this.__data__=new Ai,this.size=0},vi.prototype.delete=function(y){var x=this.__data__,k=x.delete(y);return this.size=x.size,k},vi.prototype.get=function(y){return this.__data__.get(y)},vi.prototype.has=function(y){return this.__data__.has(y)},vi.prototype.set=function(y,x){var k=this.__data__;if(k instanceof Ai){var H=k.__data__;if(!ms||H.length<199)return H.push([y,x]),this.size=++k.size,this;k=this.__data__=new _i(H)}return k.set(y,x),this.size=k.size,this};var Ni=Ia(wi),ua=Ia(Un,!0);function Bh(y,x){var k=!0;return Ni(y,function(H,z,ie){return k=!!x(H,z,ie)}),k}function Ks(y,x,k){for(var H=-1,z=y.length;++H<z;){var ie=y[H],ue=x(ie);if(ue!=null&&(fe===d?ue==ue&&!oi(ue):k(ue,fe)))var fe=ue,ye=ie}return ye}function ca(y,x){var k=[];return Ni(y,function(H,z,ie){x(H,z,ie)&&k.push(H)}),k}function zt(y,x,k,H,z){var ie=-1,ue=y.length;for(k=k||Vh,z=z||[];++ie<ue;){var fe=y[ie];0<x&&k(fe)?1<x?zt(fe,x-1,k,H,z):Ri(z,fe):H||(z[z.length]=fe)}return z}var Gn=Fa(),da=Fa(!0);function wi(y,x){return y&&Gn(y,x,Ut)}function Un(y,x){return y&&da(y,x,Ut)}function qs(y,x){return Bi(x,function(k){return Oi(y[k])})}function qi(y,x){for(var k=0,H=(x=Wi(x,y)).length;y!=null&&k<H;)y=y[Ei(x[k++])];return k&&k==H?y:d}function fa(y,x,k){var H=x(y);return st(y)?H:Ri(H,k(y))}function Kt(y){return y==null?y===d?"[object Undefined]":"[object Null]":Xi&&Xi in _t(y)?function(x){var k=Tt.call(x,Xi),H=x[Xi];try{x[Xi]=d;var z=!0}catch(ue){}var ie=Is.call(x);return z&&(k?x[Xi]=H:delete x[Xi]),ie}(y):function(x){return Is.call(x)}(y)}function Yn(y,x){return x<y}function Rh(y,x){return y!=null&&Tt.call(y,x)}function Ih(y,x){return y!=null&&x in _t(y)}function zn(y,x,k){for(var H=k?An:Ps,z=y[0].length,ie=y.length,ue=ie,fe=Ie(ie),ye=1/0,be=[];ue--;){var _e=y[ue];ue&&x&&(_e=Pt(_e,ri(x))),ye=Xt(_e.length,ye),fe[ue]=!k&&(x||120<=z&&120<=_e.length)?new ji(ue&&_e):d}_e=y[0];var De=-1,He=fe[0];e:for(;++De<z&&be.length<ye;){var Ye=_e[De],Ke=x?x(Ye):Ye;if(Ye=k||Ye!==0?Ye:0,!(He?ps(He,Ke):H(be,Ke,k))){for(ue=ie;--ue;){var Ce=fe[ue];if(!(Ce?ps(Ce,Ke):H(y[ue],Ke,k)))continue e}He&&He.push(Ke),be.push(Ye)}}return be}function Ss(y,x,k){var H=(y=eo(y,x=Wi(x,y)))==null?y:y[Ei(fi(x))];return H==null?d:ni(H,y,k)}function pa(y){return Lt(y)&&Kt(y)==f}function Es(y,x,k,H,z){return y===x||(y==null||x==null||!Lt(y)&&!Lt(x)?y!=y&&x!=x:function(ie,ue,fe,ye,be,_e){var De=st(ie),He=st(ue),Ye=De?g:Vt(ie),Ke=He?g:Vt(ue),Ce=(Ye=Ye==f?P:Ye)==P,Le=(Ke=Ke==f?P:Ke)==P,Ze=Ye==Ke;if(Ze&&Ui(ie)){if(!Ui(ue))return!1;Ce=!(De=!0)}if(Ze&&!Ce)return _e=_e||new vi,De||us(ie)?ja(ie,ue,fe,ye,be,_e):function(je,$e,Wt,Rt,Jt,Ct,jt){switch(Wt){case ee:if(je.byteLength!=$e.byteLength||je.byteOffset!=$e.byteOffset)return!1;je=je.buffer,$e=$e.buffer;case j:return!(je.byteLength!=$e.byteLength||!Ct(new Ns(je),new Ns($e)));case p:case v:case C:return xi(+je,+$e);case T:return je.name==$e.name&&je.message==$e.message;case D:case W:return je==$e+"";case A:var bi=Ln;case I:var Yi=1&Rt;if(bi=bi||Os,je.size!=$e.size&&!Yi)return!1;var mn=jt.get(je);if(mn)return mn==$e;Rt|=2,jt.set(je,$e);var ds=ja(bi(je),bi($e),Rt,Jt,Ct,jt);return jt.delete(je),ds;case G:if(xs)return xs.call(je)==xs.call($e)}return!1}(ie,ue,Ye,fe,ye,be,_e);if(!(1&fe)){var Re=Ce&&Tt.call(ie,"__wrapped__"),qe=Le&&Tt.call(ue,"__wrapped__");if(Re||qe){var ot=Re?ie.value():ie,wt=qe?ue.value():ue;return _e=_e||new vi,be(ot,wt,fe,ye,_e)}}return Ze&&(_e=_e||new vi,function(je,$e,Wt,Rt,Jt,Ct){var jt=1&Wt,bi=rr(je),Yi=bi.length,mn=rr($e).length;if(Yi!=mn&&!jt)return!1;for(var ds=Yi;ds--;){var zi=bi[ds];if(!(jt?zi in $e:Tt.call($e,zi)))return!1}var Ho=Ct.get(je),Wo=Ct.get($e);if(Ho&&Wo)return Ho==$e&&Wo==je;var yn=!0;Ct.set(je,$e),Ct.set($e,je);for(var Or=jt;++ds<Yi;){zi=bi[ds];var vn=je[zi],xn=$e[zi];if(Rt)var Go=jt?Rt(xn,vn,zi,$e,je,Ct):Rt(vn,xn,zi,je,$e,Ct);if(!(Go===d?vn===xn||Jt(vn,xn,Wt,Rt,Ct):Go)){yn=!1;break}Or=Or||zi=="constructor"}if(yn&&!Or){var Tn=je.constructor,wn=$e.constructor;Tn!=wn&&"constructor"in je&&"constructor"in $e&&!(typeof Tn=="function"&&Tn instanceof Tn&&typeof wn=="function"&&wn instanceof wn)&&(yn=!1)}return Ct.delete(je),Ct.delete($e),yn}(ie,ue,fe,ye,be,_e))}(y,x,k,H,Es,z))}function Xn(y,x,k,H){var z=k.length,ie=z,ue=!H;if(y==null)return!ie;for(y=_t(y);z--;){var fe=k[z];if(ue&&fe[2]?fe[1]!==y[fe[0]]:!(fe[0]in y))return!1}for(;++z<ie;){var ye=(fe=k[z])[0],be=y[ye],_e=fe[1];if(ue&&fe[2]){if(be===d&&!(ye in y))return!1}else{var De=new vi;if(H)var He=H(be,_e,ye,y,x,De);if(!(He===d?Es(_e,be,3,H,De):He))return!1}}return!0}function ga(y){return!(!Ot(y)||function(x){return!!Zr&&Zr in x}(y))&&(Oi(y)?mh:O).test(Zi(y))}function ma(y){return typeof y=="function"?y:y==null?ti:typeof y=="object"?st(y)?xa(y[0],y[1]):va(y):No(y)}function Vn(y){if(!_s(y))return Sh(y);var x=[];for(var k in _t(y))Tt.call(y,k)&&k!="constructor"&&x.push(k);return x}function Fh(y){if(!Ot(y))return function(z){var ie=[];if(z!=null)for(var ue in _t(z))ie.push(ue);return ie}(y);var x=_s(y),k=[];for(var H in y)(H!="constructor"||!x&&Tt.call(y,H))&&k.push(H);return k}function jn(y,x){return y<x}function ya(y,x){var k=-1,H=Qt(y)?Ie(y.length):[];return Ni(y,function(z,ie,ue){H[++k]=x(z,ie,ue)}),H}function va(y){var x=hr(y);return x.length==1&&x[0][2]?$a(x[0][0],x[0][1]):function(k){return k===y||Xn(k,y,x)}}function xa(y,x){return ur(y)&&Za(x)?$a(Ei(y),x):function(k){var H=wr(k,y);return H===d&&H===x?Sr(k,y):Es(x,H,3)}}function Js(y,x,k,H,z){y!==x&&Gn(x,function(ie,ue){if(z=z||new vi,Ot(ie))(function(ye,be,_e,De,He,Ye,Ke){var Ce=dr(ye,_e),Le=dr(be,_e),Ze=Ke.get(Le);if(Ze)return Hn(ye,_e,Ze);var Re=Ye?Ye(Ce,Le,_e+"",ye,be,Ke):d,qe=Re===d;if(qe){var ot=st(Le),wt=!ot&&Ui(Le),je=!ot&&!wt&&us(Le);Re=Le,ot||wt||je?Re=st(Ce)?Ce:Bt(Ce)?$t(Ce):wt?Oa(Le,!(qe=!1)):je?Da(Le,!(qe=!1)):[]:Ms(Le)||$i(Le)?$i(Re=Ce)?Re=Mo(Ce):Ot(Ce)&&!Oi(Ce)||(Re=Ja(Le)):qe=!1}qe&&(Ke.set(Le,Re),He(Re,Le,De,Ye,Ke),Ke.delete(Le)),Hn(ye,_e,Re)})(y,x,ue,k,Js,H,z);else{var fe=H?H(dr(y,ue),ie,ue+"",y,x,z):d;fe===d&&(fe=ie),Hn(y,ue,fe)}},ei)}function Ta(y,x){var k=y.length;if(k)return ki(x+=x<0?k:0,k)?y[x]:d}function wa(y,x,k){x=x.length?Pt(x,function(z){return st(z)?function(ie){return qi(ie,z.length===1?z[0]:z)}:z}):[ti];var H=-1;return x=Pt(x,ri(Je())),function(z,ie){var ue=z.length;for(z.sort(ie);ue--;)z[ue]=z[ue].value;return z}(ya(y,function(z,ie,ue){return{criteria:Pt(x,function(fe){return fe(z)}),index:++H,value:z}}),function(z,ie){return function(ue,fe,ye){for(var be=-1,_e=ue.criteria,De=fe.criteria,He=_e.length,Ye=ye.length;++be<He;){var Ke=La(_e[be],De[be]);if(Ke){if(Ye<=be)return Ke;var Ce=ye[be];return Ke*(Ce=="desc"?-1:1)}}return ue.index-fe.index}(z,ie,k)})}function Sa(y,x,k){for(var H=-1,z=x.length,ie={};++H<z;){var ue=x[H],fe=qi(y,ue);k(fe,ue)&&bs(ie,Wi(ue,y),fe)}return ie}function Kn(y,x,k,H){var z=H?ah:es,ie=-1,ue=x.length,fe=y;for(y===x&&(x=$t(x)),k&&(fe=Pt(y,ri(k)));++ie<ue;)for(var ye=0,be=x[ie],_e=k?k(be):be;-1<(ye=z(fe,_e,ye,H));)fe!==y&&Ws.call(fe,ye,1),Ws.call(y,ye,1);return y}function Ea(y,x){for(var k=y?x.length:0,H=k-1;k--;){var z=x[k];if(k==H||z!==ie){var ie=z;ki(z)?Ws.call(y,z,1):$n(y,z)}}return y}function qn(y,x){return y+Ys(sa()*(x-y+1))}function Jn(y,x){var k="";if(!y||x<1||u<x)return k;for(;x%2&&(k+=y),(x=Ys(x/2))&&(y+=y),x;);return k}function ht(y,x){return fr(Qa(y,x,ti),y+"")}function Nh(y){return aa(cs(y))}function Hh(y,x){var k=cs(y);return on(k,Ki(x,0,k.length))}function bs(y,x,k,H){if(!Ot(y))return y;for(var z=-1,ie=(x=Wi(x,y)).length,ue=ie-1,fe=y;fe!=null&&++z<ie;){var ye=Ei(x[z]),be=k;if(ye==="__proto__"||ye==="constructor"||ye==="prototype")return y;if(z!=ue){var _e=fe[ye];(be=H?H(_e,ye,fe):d)===d&&(be=Ot(_e)?_e:ki(x[z+1])?[]:{})}Ts(fe,ye,be),fe=fe[ye]}return y}var ba=zs?function(y,x){return zs.set(y,x),y}:ti,Wh=Gs?function(y,x){return Gs(y,"toString",{configurable:!0,enumerable:!1,value:br(x),writable:!0})}:ti;function Gh(y){return on(cs(y))}function di(y,x,k){var H=-1,z=y.length;x<0&&(x=z<-x?0:z+x),(k=z<k?z:k)<0&&(k+=z),z=k<x?0:k-x>>>0,x>>>=0;for(var ie=Ie(z);++H<z;)ie[H]=y[H+x];return ie}function Uh(y,x){var k;return Ni(y,function(H,z,ie){return!(k=x(H,z,ie))}),!!k}function Zs(y,x,k){var H=0,z=y==null?H:y.length;if(typeof x=="number"&&x==x&&z<=2147483647){for(;H<z;){var ie=H+z>>>1,ue=y[ie];ue!==null&&!oi(ue)&&(k?ue<=x:ue<x)?H=1+ie:z=ie}return z}return Zn(y,x,ti,k)}function Zn(y,x,k,H){var z=0,ie=y==null?0:y.length;if(ie===0)return 0;for(var ue=(x=k(x))!=x,fe=x===null,ye=oi(x),be=x===d;z<ie;){var _e=Ys((z+ie)/2),De=k(y[_e]),He=De!==d,Ye=De===null,Ke=De==De,Ce=oi(De);if(ue)var Le=H||Ke;else Le=be?Ke&&(H||He):fe?Ke&&He&&(H||!Ye):ye?Ke&&He&&!Ye&&(H||!Ce):!Ye&&!Ce&&(H?De<=x:De<x);Le?z=_e+1:ie=_e}return Xt(ie,4294967294)}function Aa(y,x){for(var k=-1,H=y.length,z=0,ie=[];++k<H;){var ue=y[k],fe=x?x(ue):ue;if(!k||!xi(fe,ye)){var ye=fe;ie[z++]=ue===0?0:ue}}return ie}function _a(y){return typeof y=="number"?y:oi(y)?l:+y}function ai(y){if(typeof y=="string")return y;if(st(y))return Pt(y,ai)+"";if(oi(y))return na?na.call(y):"";var x=y+"";return x=="0"&&1/y==-a?"-0":x}function Hi(y,x,k){var H=-1,z=Ps,ie=y.length,ue=!0,fe=[],ye=fe;if(k)ue=!1,z=An;else if(200<=ie){var be=x?null:zh(y);if(be)return Os(be);ue=!1,z=ps,ye=new ji}else ye=x?[]:fe;e:for(;++H<ie;){var _e=y[H],De=x?x(_e):_e;if(_e=k||_e!==0?_e:0,ue&&De==De){for(var He=ye.length;He--;)if(ye[He]===De)continue e;x&&ye.push(De),fe.push(_e)}else z(ye,De,k)||(ye!==fe&&ye.push(De),fe.push(_e))}return fe}function $n(y,x){return(y=eo(y,x=Wi(x,y)))==null||delete y[Ei(fi(x))]}function Ca(y,x,k,H){return bs(y,x,k(qi(y,x)),H)}function $s(y,x,k,H){for(var z=y.length,ie=H?z:-1;(H?ie--:++ie<z)&&x(y[ie],ie,y););return k?di(y,H?0:ie,H?ie+1:z):di(y,H?ie+1:0,H?z:ie)}function Ma(y,x){var k=y;return k instanceof ut&&(k=k.value()),_n(x,function(H,z){return z.func.apply(z.thisArg,Ri([H],z.args))},k)}function Qn(y,x,k){var H=y.length;if(H<2)return H?Hi(y[0]):[];for(var z=-1,ie=Ie(H);++z<H;)for(var ue=y[z],fe=-1;++fe<H;)fe!=z&&(ie[z]=ws(ie[z]||ue,y[fe],x,k));return Hi(zt(ie,1),x,k)}function Pa(y,x,k){for(var H=-1,z=y.length,ie=x.length,ue={};++H<z;){var fe=H<ie?x[H]:d;k(ue,y[H],fe)}return ue}function er(y){return Bt(y)?y:[]}function tr(y){return typeof y=="function"?y:ti}function Wi(y,x){return st(y)?y:ur(y,x)?[y]:ro(vt(y))}var Yh=ht;function Gi(y,x,k){var H=y.length;return k=k===d?H:k,!x&&H<=k?y:di(y,x,k)}var ka=yh||function(y){return Yt.clearTimeout(y)};function Oa(y,x){if(x)return y.slice();var k=y.length,H=$r?$r(k):new y.constructor(k);return y.copy(H),H}function ir(y){var x=new y.constructor(y.byteLength);return new Ns(x).set(new Ns(y)),x}function Da(y,x){var k=x?ir(y.buffer):y.buffer;return new y.constructor(k,y.byteOffset,y.length)}function La(y,x){if(y!==x){var k=y!==d,H=y===null,z=y==y,ie=oi(y),ue=x!==d,fe=x===null,ye=x==x,be=oi(x);if(!fe&&!be&&!ie&&x<y||ie&&ue&&ye&&!fe&&!be||H&&ue&&ye||!k&&ye||!z)return 1;if(!H&&!ie&&!be&&y<x||be&&k&&z&&!H&&!ie||fe&&k&&z||!ue&&z||!ye)return-1}return 0}function Ba(y,x,k,H){for(var z=-1,ie=y.length,ue=k.length,fe=-1,ye=x.length,be=Ht(ie-ue,0),_e=Ie(ye+be),De=!H;++fe<ye;)_e[fe]=x[fe];for(;++z<ue;)(De||z<ie)&&(_e[k[z]]=y[z]);for(;be--;)_e[fe++]=y[z++];return _e}function Ra(y,x,k,H){for(var z=-1,ie=y.length,ue=-1,fe=k.length,ye=-1,be=x.length,_e=Ht(ie-fe,0),De=Ie(_e+be),He=!H;++z<_e;)De[z]=y[z];for(var Ye=z;++ye<be;)De[Ye+ye]=x[ye];for(;++ue<fe;)(He||z<ie)&&(De[Ye+k[ue]]=y[z++]);return De}function $t(y,x){var k=-1,H=y.length;for(x=x||Ie(H);++k<H;)x[k]=y[k];return x}function Si(y,x,k,H){var z=!k;k=k||{};for(var ie=-1,ue=x.length;++ie<ue;){var fe=x[ie],ye=H?H(k[fe],y[fe],fe,k,y):d;ye===d&&(ye=y[fe]),z?Ci(k,fe,ye):Ts(k,fe,ye)}return k}function Qs(y,x){return function(k,H){var z=st(k)?ih:Lh,ie=x?x():{};return z(k,y,Je(H,2),ie)}}function os(y){return ht(function(x,k){var H=-1,z=k.length,ie=1<z?k[z-1]:d,ue=2<z?k[2]:d;for(ie=3<y.length&&typeof ie=="function"?(z--,ie):d,ue&&qt(k[0],k[1],ue)&&(ie=z<3?d:ie,z=1),x=_t(x);++H<z;){var fe=k[H];fe&&y(x,fe,H,ie)}return x})}function Ia(y,x){return function(k,H){if(k==null)return k;if(!Qt(k))return y(k,H);for(var z=k.length,ie=x?z:-1,ue=_t(k);(x?ie--:++ie<z)&&H(ue[ie],ie,ue)!==!1;);return k}}function Fa(y){return function(x,k,H){for(var z=-1,ie=_t(x),ue=H(x),fe=ue.length;fe--;){var ye=ue[y?fe:++z];if(k(ie[ye],ye,ie)===!1)break}return x}}function Na(y){return function(x){var k=ts(x=vt(x))?mi(x):d,H=k?k[0]:x.charAt(0),z=k?Gi(k,1).join(""):x.slice(1);return H[y]()+z}}function hs(y){return function(x){return _n(Io(Ro(x).replace(Xo,"")),y,"")}}function As(y){return function(){var x=arguments;switch(x.length){case 0:return new y;case 1:return new y(x[0]);case 2:return new y(x[0],x[1]);case 3:return new y(x[0],x[1],x[2]);case 4:return new y(x[0],x[1],x[2],x[3]);case 5:return new y(x[0],x[1],x[2],x[3],x[4]);case 6:return new y(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new y(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var k=as(y.prototype),H=y.apply(k,x);return Ot(H)?H:k}}function Ha(y){return function(x,k,H){var z=_t(x);if(!Qt(x)){var ie=Je(k,3);x=Ut(x),k=function(fe){return ie(z[fe],fe,z)}}var ue=y(x,k,H);return-1<ue?z[ie?x[ue]:ue]:d}}function Wa(y){return Pi(function(x){var k=x.length,H=k,z=yi.prototype.thru;for(y&&x.reverse();H--;){var ie=x[H];if(typeof ie!="function")throw new ui(w);if(z&&!ue&&rn(ie)=="wrapper")var ue=new yi([],!0)}for(H=ue?H:k;++H<k;){var fe=rn(ie=x[H]),ye=fe=="wrapper"?or(ie):d;ue=ye&&cr(ye[0])&&ye[1]==424&&!ye[4].length&&ye[9]==1?ue[rn(ye[0])].apply(ue,ye[3]):ie.length==1&&cr(ie)?ue[fe]():ue.thru(ie)}return function(){var be=arguments,_e=be[0];if(ue&&be.length==1&&st(_e))return ue.plant(_e).value();for(var De=0,He=k?x[De].apply(this,be):_e;++De<k;)He=x[De].call(this,He);return He}})}function en(y,x,k,H,z,ie,ue,fe,ye,be){var _e=x&i,De=1&x,He=2&x,Ye=24&x,Ke=512&x,Ce=He?d:As(y);return function Le(){for(var Ze=arguments.length,Re=Ie(Ze),qe=Ze;qe--;)Re[qe]=arguments[qe];if(Ye)var ot=ls(Le),wt=function(Rt,Jt){for(var Ct=Rt.length,jt=0;Ct--;)Rt[Ct]===Jt&&++jt;return jt}(Re,ot);if(H&&(Re=Ba(Re,H,z,Ye)),ie&&(Re=Ra(Re,ie,ue,Ye)),Ze-=wt,Ye&&Ze<be){var je=Ii(Re,ot);return Ya(y,x,en,Le.placeholder,k,Re,je,fe,ye,be-Ze)}var $e=De?k:this,Wt=He?$e[y]:y;return Ze=Re.length,fe?Re=function(Rt,Jt){for(var Ct=Rt.length,jt=Xt(Jt.length,Ct),bi=$t(Rt);jt--;){var Yi=Jt[jt];Rt[jt]=ki(Yi,Ct)?bi[Yi]:d}return Rt}(Re,fe):Ke&&1<Ze&&Re.reverse(),_e&&ye<Ze&&(Re.length=ye),this&&this!==Yt&&this instanceof Le&&(Wt=Ce||As(Wt)),Wt.apply($e,Re)}}function Ga(y,x){return function(k,H){return function(z,ie,ue,fe){return wi(z,function(ye,be,_e){ie(fe,ue(ye),be,_e)}),fe}(k,y,x(H),{})}}function tn(y,x){return function(k,H){var z;if(k===d&&H===d)return x;if(k!==d&&(z=k),H!==d){if(z===d)return H;H=typeof k=="string"||typeof H=="string"?(k=ai(k),ai(H)):(k=_a(k),_a(H)),z=y(k,H)}return z}}function sr(y){return Pi(function(x){return x=Pt(x,ri(Je())),ht(function(k){var H=this;return y(x,function(z){return ni(z,H,k)})})})}function sn(y,x){var k=(x=x===d?" ":ai(x)).length;if(k<2)return k?Jn(x,y):x;var H=Jn(x,Us(y/is(x)));return ts(x)?Gi(mi(H),0,y).join(""):H.slice(0,y)}function Ua(y){return function(x,k,H){return H&&typeof H!="number"&&qt(x,k,H)&&(k=H=d),x=Di(x),k===d?(k=x,x=0):k=Di(k),function(z,ie,ue,fe){for(var ye=-1,be=Ht(Us((ie-z)/(ue||1)),0),_e=Ie(be);be--;)_e[fe?be:++ye]=z,z+=ue;return _e}(x,k,H=H===d?x<k?1:-1:Di(H),y)}}function nn(y){return function(x,k){return typeof x=="string"&&typeof k=="string"||(x=pi(x),k=pi(k)),y(x,k)}}function Ya(y,x,k,H,z,ie,ue,fe,ye,be){var _e=8&x;x|=_e?r:o,4&(x&=~(_e?o:r))||(x&=-4);var De=[y,x,z,_e?ie:d,_e?ue:d,_e?d:ie,_e?d:ue,fe,ye,be],He=k.apply(d,De);return cr(y)&&to(He,De),He.placeholder=H,io(He,y,x)}function nr(y){var x=Ti[y];return function(k,H){if(k=pi(k),(H=H==null?0:Xt(at(H),292))&&ia(k)){var z=(vt(k)+"e").split("e");return+((z=(vt(x(z[0]+"e"+(+z[1]+H)))+"e").split("e"))[0]+"e"+(+z[1]-H))}return x(k)}}var zh=ns&&1/Os(new ns([,-0]))[1]==a?function(y){return new ns(y)}:Cr;function za(y){return function(x){var k=Vt(x);return k==A?Ln(x):k==I?function(H){var z=-1,ie=Array(H.size);return H.forEach(function(ue){ie[++z]=[ue,ue]}),ie}(x):function(H,z){return Pt(z,function(ie){return[ie,H[ie]]})}(x,y(x))}}function Mi(y,x,k,H,z,ie,ue,fe){var ye=2&x;if(!ye&&typeof y!="function")throw new ui(w);var be=H?H.length:0;if(be||(x&=-97,H=z=d),ue=ue===d?ue:Ht(at(ue),0),fe=fe===d?fe:at(fe),be-=z?z.length:0,x&o){var _e=H,De=z;H=z=d}var He=ye?d:or(y),Ye=[y,x,k,H,z,_e,De,ie,ue,fe];if(He&&function(Ce,Le){var Ze=Ce[1],Re=Le[1],qe=Ze|Re,ot=qe<131,wt=Re==i&&Ze==8||Re==i&&Ze==s&&Ce[7].length<=Le[8]||Re==384&&Le[7].length<=Le[8]&&Ze==8;if(!(!ot&&!wt)){1&Re&&(Ce[2]=Le[2],qe|=1&Ze?0:4);var je=Le[3];if(je){var $e=Ce[3];Ce[3]=$e?Ba($e,je,Le[4]):je,Ce[4]=$e?Ii(Ce[3],n):Le[4]}(je=Le[5])&&($e=Ce[5],Ce[5]=$e?Ra($e,je,Le[6]):je,Ce[6]=$e?Ii(Ce[5],n):Le[6]),(je=Le[7])&&(Ce[7]=je),Re&i&&(Ce[8]=Ce[8]==null?Le[8]:Xt(Ce[8],Le[8])),Ce[9]==null&&(Ce[9]=Le[9]),Ce[0]=Le[0],Ce[1]=qe}}(Ye,He),y=Ye[0],x=Ye[1],k=Ye[2],H=Ye[3],z=Ye[4],!(fe=Ye[9]=Ye[9]===d?ye?0:y.length:Ht(Ye[9]-be,0))&&24&x&&(x&=-25),x&&x!=1)Ke=x==8||x==t?function(Ce,Le,Ze){var Re=As(Ce);return function qe(){for(var ot=arguments.length,wt=Ie(ot),je=ot,$e=ls(qe);je--;)wt[je]=arguments[je];var Wt=ot<3&&wt[0]!==$e&&wt[ot-1]!==$e?[]:Ii(wt,$e);return(ot-=Wt.length)<Ze?Ya(Ce,Le,en,qe.placeholder,d,wt,Wt,d,d,Ze-ot):ni(this&&this!==Yt&&this instanceof qe?Re:Ce,this,wt)}}(y,x,fe):x!=r&&x!=33||z.length?en.apply(d,Ye):function(Ce,Le,Ze,Re){var qe=1&Le,ot=As(Ce);return function wt(){for(var je=-1,$e=arguments.length,Wt=-1,Rt=Re.length,Jt=Ie(Rt+$e),Ct=this&&this!==Yt&&this instanceof wt?ot:Ce;++Wt<Rt;)Jt[Wt]=Re[Wt];for(;$e--;)Jt[Wt++]=arguments[++je];return ni(Ct,qe?Ze:this,Jt)}}(y,x,k,H);else var Ke=function(Ce,Le,Ze){var Re=1&Le,qe=As(Ce);return function ot(){return(this&&this!==Yt&&this instanceof ot?qe:Ce).apply(Re?Ze:this,arguments)}}(y,x,k);return io((He?ba:to)(Ke,Ye),y,x)}function Xa(y,x,k,H){return y===d||xi(y,ss[k])&&!Tt.call(H,k)?x:y}function Va(y,x,k,H,z,ie){return Ot(y)&&Ot(x)&&(ie.set(x,y),Js(y,x,d,Va,ie),ie.delete(x)),y}function Xh(y){return Ms(y)?d:y}function ja(y,x,k,H,z,ie){var ue=1&k,fe=y.length,ye=x.length;if(fe!=ye&&!(ue&&fe<ye))return!1;var be=ie.get(y),_e=ie.get(x);if(be&&_e)return be==x&&_e==y;var De=-1,He=!0,Ye=2&k?new ji:d;for(ie.set(y,x),ie.set(x,y);++De<fe;){var Ke=y[De],Ce=x[De];if(H)var Le=ue?H(Ce,Ke,De,x,y,ie):H(Ke,Ce,De,y,x,ie);if(Le!==d){if(Le)continue;He=!1;break}if(Ye){if(!Cn(x,function(Ze,Re){if(!ps(Ye,Re)&&(Ke===Ze||z(Ke,Ze,k,H,ie)))return Ye.push(Re)})){He=!1;break}}else if(Ke!==Ce&&!z(Ke,Ce,k,H,ie)){He=!1;break}}return ie.delete(y),ie.delete(x),He}function Pi(y){return fr(Qa(y,d,lo),y+"")}function rr(y){return fa(y,Ut,lr)}function ar(y){return fa(y,ei,Ka)}var or=zs?function(y){return zs.get(y)}:Cr;function rn(y){for(var x=y.name+"",k=rs[x],H=Tt.call(rs,x)?k.length:0;H--;){var z=k[H],ie=z.func;if(ie==null||ie==y)return z.name}return x}function ls(y){return(Tt.call(Z,"placeholder")?Z:y).placeholder}function Je(){var y=Z.iteratee||Ar;return y=y===Ar?ma:y,arguments.length?y(arguments[0],arguments[1]):y}function an(y,x){var k=y.__data__;return function(H){var z=typeof H;return z=="string"||z=="number"||z=="symbol"||z=="boolean"?H!=="__proto__":H===null}(x)?k[typeof x=="string"?"string":"hash"]:k.map}function hr(y){for(var x=Ut(y),k=x.length;k--;){var H=x[k],z=y[H];x[k]=[H,z,Za(z)]}return x}function Ji(y,x){var k=function(H,z){return H==null?d:H[z]}(y,x);return ga(k)?k:d}var lr=Rn?function(y){return y==null?[]:(y=_t(y),Bi(Rn(y),function(x){return ea.call(y,x)}))}:Mr,Ka=Rn?function(y){for(var x=[];y;)Ri(x,lr(y)),y=Hs(y);return x}:Mr,Vt=Kt;function qa(y,x,k){for(var H=-1,z=(x=Wi(x,y)).length,ie=!1;++H<z;){var ue=Ei(x[H]);if(!(ie=y!=null&&k(y,ue)))break;y=y[ue]}return ie||++H!=z?ie:!!(z=y==null?0:y.length)&&fn(z)&&ki(ue,z)&&(st(y)||$i(y))}function Ja(y){return typeof y.constructor!="function"||_s(y)?{}:as(Hs(y))}function Vh(y){return st(y)||$i(y)||!!(ta&&y&&y[ta])}function ki(y,x){var k=typeof y;return!!(x=x==null?u:x)&&(k=="number"||k!="symbol"&&L.test(y))&&-1<y&&y%1==0&&y<x}function qt(y,x,k){if(!Ot(k))return!1;var H=typeof x;return!!(H=="number"?Qt(k)&&ki(x,k.length):H=="string"&&x in k)&&xi(k[x],y)}function ur(y,x){if(st(y))return!1;var k=typeof y;return!(k!="number"&&k!="symbol"&&k!="boolean"&&y!=null&&!oi(y))||lt.test(y)||!pt.test(y)||x!=null&&y in _t(x)}function cr(y){var x=rn(y),k=Z[x];if(typeof k!="function"||!(x in ut.prototype))return!1;if(y===k)return!0;var H=or(k);return!!H&&y===H[0]}(In&&Vt(new In(new ArrayBuffer(1)))!=ee||ms&&Vt(new ms)!=A||Fn&&Vt(Fn.resolve())!=R||ns&&Vt(new ns)!=I||ys&&Vt(new ys)!=Y)&&(Vt=function(y){var x=Kt(y),k=x==P?y.constructor:d,H=k?Zi(k):"";if(H)switch(H){case _h:return ee;case Ch:return A;case Mh:return R;case Ph:return I;case kh:return Y}return x});var jh=Bs?Oi:Pr;function _s(y){var x=y&&y.constructor;return y===(typeof x=="function"&&x.prototype||ss)}function Za(y){return y==y&&!Ot(y)}function $a(y,x){return function(k){return k!=null&&k[y]===x&&(x!==d||y in _t(k))}}function Qa(y,x,k){return x=Ht(x===d?y.length-1:x,0),function(){for(var H=arguments,z=-1,ie=Ht(H.length-x,0),ue=Ie(ie);++z<ie;)ue[z]=H[x+z];z=-1;for(var fe=Ie(x+1);++z<x;)fe[z]=H[z];return fe[x]=k(ue),ni(y,this,fe)}}function eo(y,x){return x.length<2?y:qi(y,di(x,0,-1))}function dr(y,x){if((x!=="constructor"||typeof y[x]!="function")&&x!="__proto__")return y[x]}var to=so(ba),Cs=xh||function(y,x){return Yt.setTimeout(y,x)},fr=so(Wh);function io(y,x,k){var H=x+"";return fr(y,function(z,ie){var ue=ie.length;if(!ue)return z;var fe=ue-1;return ie[fe]=(1<ue?"& ":"")+ie[fe],ie=ie.join(2<ue?", ":" "),z.replace(mt,`{
/* [wrapped with `+ie+`] */
`)}(H,function(z,ie){return li(h,function(ue){var fe="_."+ue[0];ie&ue[1]&&!Ps(z,fe)&&z.push(fe)}),z.sort()}(function(z){var ie=z.match(Mt);return ie?ie[1].split(It):[]}(H),k)))}function so(y){var x=0,k=0;return function(){var H=Eh(),z=16-(H-k);if(k=H,0<z){if(800<=++x)return arguments[0]}else x=0;return y.apply(d,arguments)}}function on(y,x){var k=-1,H=y.length,z=H-1;for(x=x===d?H:x;++k<x;){var ie=qn(k,z),ue=y[ie];y[ie]=y[k],y[k]=ue}return y.length=x,y}var no,pr,ro=(pr=(no=cn(function(y){var x=[];return y.charCodeAt(0)===46&&x.push(""),y.replace(xt,function(k,H,z,ie){x.push(z?ie.replace(gi,"$1"):H||k)}),x},function(y){return pr.size===500&&pr.clear(),y})).cache,no);function Ei(y){if(typeof y=="string"||oi(y))return y;var x=y+"";return x=="0"&&1/y==-a?"-0":x}function Zi(y){if(y!=null){try{return Rs.call(y)}catch(x){}try{return y+""}catch(x){}}return""}function ao(y){if(y instanceof ut)return y.clone();var x=new yi(y.__wrapped__,y.__chain__);return x.__actions__=$t(y.__actions__),x.__index__=y.__index__,x.__values__=y.__values__,x}var Kh=ht(function(y,x){return Bt(y)?ws(y,zt(x,1,Bt,!0)):[]}),qh=ht(function(y,x){var k=fi(x);return Bt(k)&&(k=d),Bt(y)?ws(y,zt(x,1,Bt,!0),Je(k,2)):[]}),Jh=ht(function(y,x){var k=fi(x);return Bt(k)&&(k=d),Bt(y)?ws(y,zt(x,1,Bt,!0),d,k):[]});function oo(y,x,k){var H=y==null?0:y.length;if(!H)return-1;var z=k==null?0:at(k);return z<0&&(z=Ht(H+z,0)),ks(y,Je(x,3),z)}function ho(y,x,k){var H=y==null?0:y.length;if(!H)return-1;var z=H-1;return k!==d&&(z=at(k),z=k<0?Ht(H+z,0):Xt(z,H-1)),ks(y,Je(x,3),z,!0)}function lo(y){return(y==null?0:y.length)?zt(y,1):[]}function uo(y){return y&&y.length?y[0]:d}var Zh=ht(function(y){var x=Pt(y,er);return x.length&&x[0]===y[0]?zn(x):[]}),$h=ht(function(y){var x=fi(y),k=Pt(y,er);return x===fi(k)?x=d:k.pop(),k.length&&k[0]===y[0]?zn(k,Je(x,2)):[]}),Qh=ht(function(y){var x=fi(y),k=Pt(y,er);return(x=typeof x=="function"?x:d)&&k.pop(),k.length&&k[0]===y[0]?zn(k,d,x):[]});function fi(y){var x=y==null?0:y.length;return x?y[x-1]:d}var el=ht(co);function co(y,x){return y&&y.length&&x&&x.length?Kn(y,x):y}var tl=Pi(function(y,x){var k=y==null?0:y.length,H=Wn(y,x);return Ea(y,Pt(x,function(z){return ki(z,k)?+z:z}).sort(La)),H});function gr(y){return y==null?y:Ah.call(y)}var il=ht(function(y){return Hi(zt(y,1,Bt,!0))}),sl=ht(function(y){var x=fi(y);return Bt(x)&&(x=d),Hi(zt(y,1,Bt,!0),Je(x,2))}),nl=ht(function(y){var x=fi(y);return x=typeof x=="function"?x:d,Hi(zt(y,1,Bt,!0),d,x)});function mr(y){if(!y||!y.length)return[];var x=0;return y=Bi(y,function(k){if(Bt(k))return x=Ht(k.length,x),!0}),On(x,function(k){return Pt(y,Mn(k))})}function fo(y,x){if(!y||!y.length)return[];var k=mr(y);return x==null?k:Pt(k,function(H){return ni(x,d,H)})}var rl=ht(function(y,x){return Bt(y)?ws(y,x):[]}),al=ht(function(y){return Qn(Bi(y,Bt))}),ol=ht(function(y){var x=fi(y);return Bt(x)&&(x=d),Qn(Bi(y,Bt),Je(x,2))}),hl=ht(function(y){var x=fi(y);return x=typeof x=="function"?x:d,Qn(Bi(y,Bt),d,x)}),ll=ht(mr),ul=ht(function(y){var x=y.length,k=1<x?y[x-1]:d;return k=typeof k=="function"?(y.pop(),k):d,fo(y,k)});function po(y){var x=Z(y);return x.__chain__=!0,x}function hn(y,x){return x(y)}var cl=Pi(function(y){function x(ie){return Wn(ie,y)}var k=y.length,H=k?y[0]:0,z=this.__wrapped__;return!(1<k||this.__actions__.length)&&z instanceof ut&&ki(H)?((z=z.slice(H,+H+(k?1:0))).__actions__.push({func:hn,args:[x],thisArg:d}),new yi(z,this.__chain__).thru(function(ie){return k&&!ie.length&&ie.push(d),ie})):this.thru(x)}),dl=Qs(function(y,x,k){Tt.call(y,k)?++y[k]:Ci(y,k,1)}),fl=Ha(oo),pl=Ha(ho);function go(y,x){return(st(y)?li:Ni)(y,Je(x,3))}function mo(y,x){return(st(y)?sh:ua)(y,Je(x,3))}var gl=Qs(function(y,x,k){Tt.call(y,k)?y[k].push(x):Ci(y,k,[x])}),ml=ht(function(y,x,k){var H=-1,z=typeof x=="function",ie=Qt(y)?Ie(y.length):[];return Ni(y,function(ue){ie[++H]=z?ni(x,ue,k):Ss(ue,x,k)}),ie}),yl=Qs(function(y,x,k){Ci(y,k,x)});function ln(y,x){return(st(y)?Pt:ya)(y,Je(x,3))}var vl=Qs(function(y,x,k){y[k?0:1].push(x)},function(){return[[],[]]}),xl=ht(function(y,x){if(y==null)return[];var k=x.length;return 1<k&&qt(y,x[0],x[1])?x=[]:2<k&&qt(x[0],x[1],x[2])&&(x=[x[0]]),wa(y,zt(x,1),[])}),un=vh||function(){return Yt.Date.now()};function yo(y,x,k){return x=k?d:x,x=y&&x==null?y.length:x,Mi(y,i,d,d,d,d,x)}function vo(y,x){var k;if(typeof x!="function")throw new ui(w);return y=at(y),function(){return 0<--y&&(k=x.apply(this,arguments)),y<=1&&(x=d),k}}var yr=ht(function(y,x,k){var H=1;if(k.length){var z=Ii(k,ls(yr));H|=r}return Mi(y,H,x,k,z)}),xo=ht(function(y,x,k){var H=3;if(k.length){var z=Ii(k,ls(xo));H|=r}return Mi(x,H,y,k,z)});function To(y,x,k){var H,z,ie,ue,fe,ye,be=0,_e=!1,De=!1,He=!0;if(typeof y!="function")throw new ui(w);function Ye(Re){var qe=H,ot=z;return H=z=d,be=Re,ue=y.apply(ot,qe)}function Ke(Re){var qe=Re-ye;return ye===d||x<=qe||qe<0||De&&ie<=Re-be}function Ce(){var Re=un();if(Ke(Re))return Le(Re);fe=Cs(Ce,function(qe){var ot=x-(qe-ye);return De?Xt(ot,ie-(qe-be)):ot}(Re))}function Le(Re){return fe=d,He&&H?Ye(Re):(H=z=d,ue)}function Ze(){var Re=un(),qe=Ke(Re);if(H=arguments,z=this,ye=Re,qe){if(fe===d)return function(ot){return be=ot,fe=Cs(Ce,x),_e?Ye(ot):ue}(ye);if(De)return ka(fe),fe=Cs(Ce,x),Ye(ye)}return fe===d&&(fe=Cs(Ce,x)),ue}return x=pi(x)||0,Ot(k)&&(_e=!!k.leading,ie=(De="maxWait"in k)?Ht(pi(k.maxWait)||0,x):ie,He="trailing"in k?!!k.trailing:He),Ze.cancel=function(){fe!==d&&ka(fe),be=0,H=ye=z=fe=d},Ze.flush=function(){return fe===d?ue:Le(un())},Ze}var Tl=ht(function(y,x){return la(y,1,x)}),wl=ht(function(y,x,k){return la(y,pi(x)||0,k)});function cn(y,x){if(typeof y!="function"||x!=null&&typeof x!="function")throw new ui(w);var k=function(){var H=arguments,z=x?x.apply(this,H):H[0],ie=k.cache;if(ie.has(z))return ie.get(z);var ue=y.apply(this,H);return k.cache=ie.set(z,ue)||ie,ue};return k.cache=new(cn.Cache||_i),k}function dn(y){if(typeof y!="function")throw new ui(w);return function(){var x=arguments;switch(x.length){case 0:return!y.call(this);case 1:return!y.call(this,x[0]);case 2:return!y.call(this,x[0],x[1]);case 3:return!y.call(this,x[0],x[1],x[2])}return!y.apply(this,x)}}cn.Cache=_i;var Sl=Yh(function(y,x){var k=(x=x.length==1&&st(x[0])?Pt(x[0],ri(Je())):Pt(zt(x,1),ri(Je()))).length;return ht(function(H){for(var z=-1,ie=Xt(H.length,k);++z<ie;)H[z]=x[z].call(this,H[z]);return ni(y,this,H)})}),vr=ht(function(y,x){var k=Ii(x,ls(vr));return Mi(y,r,d,x,k)}),wo=ht(function(y,x){var k=Ii(x,ls(wo));return Mi(y,o,d,x,k)}),El=Pi(function(y,x){return Mi(y,s,d,d,d,x)});function xi(y,x){return y===x||y!=y&&x!=x}var bl=nn(Yn),Al=nn(function(y,x){return x<=y}),$i=pa(function(){return arguments}())?pa:function(y){return Lt(y)&&Tt.call(y,"callee")&&!ea.call(y,"callee")},st=Ie.isArray,_l=Fr?ri(Fr):function(y){return Lt(y)&&Kt(y)==j};function Qt(y){return y!=null&&fn(y.length)&&!Oi(y)}function Bt(y){return Lt(y)&&Qt(y)}var Ui=Th||Pr,Cl=Nr?ri(Nr):function(y){return Lt(y)&&Kt(y)==v};function xr(y){if(!Lt(y))return!1;var x=Kt(y);return x==T||x=="[object DOMException]"||typeof y.message=="string"&&typeof y.name=="string"&&!Ms(y)}function Oi(y){if(!Ot(y))return!1;var x=Kt(y);return x==E||x==M||x=="[object AsyncFunction]"||x=="[object Proxy]"}function So(y){return typeof y=="number"&&y==at(y)}function fn(y){return typeof y=="number"&&-1<y&&y%1==0&&y<=u}function Ot(y){var x=typeof y;return y!=null&&(x=="object"||x=="function")}function Lt(y){return y!=null&&typeof y=="object"}var Eo=Hr?ri(Hr):function(y){return Lt(y)&&Vt(y)==A};function bo(y){return typeof y=="number"||Lt(y)&&Kt(y)==C}function Ms(y){if(!Lt(y)||Kt(y)!=P)return!1;var x=Hs(y);if(x===null)return!0;var k=Tt.call(x,"constructor")&&x.constructor;return typeof k=="function"&&k instanceof k&&Rs.call(k)==ph}var Tr=Wr?ri(Wr):function(y){return Lt(y)&&Kt(y)==D},Ao=Gr?ri(Gr):function(y){return Lt(y)&&Vt(y)==I};function pn(y){return typeof y=="string"||!st(y)&&Lt(y)&&Kt(y)==W}function oi(y){return typeof y=="symbol"||Lt(y)&&Kt(y)==G}var us=Ur?ri(Ur):function(y){return Lt(y)&&fn(y.length)&&!!At[Kt(y)]},Ml=nn(jn),Pl=nn(function(y,x){return y<=x});function _o(y){if(!y)return[];if(Qt(y))return pn(y)?mi(y):$t(y);if(gs&&y[gs])return function(k){for(var H,z=[];!(H=k.next()).done;)z.push(H.value);return z}(y[gs]());var x=Vt(y);return(x==A?Ln:x==I?Os:cs)(y)}function Di(y){return y?(y=pi(y))!==a&&y!==-a?y==y?y:0:17976931348623157e292*(y<0?-1:1):y===0?y:0}function at(y){var x=Di(y),k=x%1;return x==x?k?x-k:x:0}function Co(y){return y?Ki(at(y),0,c):0}function pi(y){if(typeof y=="number")return y;if(oi(y))return l;if(Ot(y)){var x=typeof y.valueOf=="function"?y.valueOf():y;y=Ot(x)?x+"":x}if(typeof y!="string")return y===0?y:+y;y=y.replace(gt,"");var k=b.test(y);return k||B.test(y)?eh(y.slice(2),k?2:8):S.test(y)?l:+y}function Mo(y){return Si(y,ei(y))}function vt(y){return y==null?"":ai(y)}var kl=os(function(y,x){if(_s(x)||Qt(x))Si(x,Ut(x),y);else for(var k in x)Tt.call(x,k)&&Ts(y,k,x[k])}),Po=os(function(y,x){Si(x,ei(x),y)}),gn=os(function(y,x,k,H){Si(x,ei(x),y,H)}),Ol=os(function(y,x,k,H){Si(x,Ut(x),y,H)}),Dl=Pi(Wn),Ll=ht(function(y,x){y=_t(y);var k=-1,H=x.length,z=2<H?x[2]:d;for(z&&qt(x[0],x[1],z)&&(H=1);++k<H;)for(var ie=x[k],ue=ei(ie),fe=-1,ye=ue.length;++fe<ye;){var be=ue[fe],_e=y[be];(_e===d||xi(_e,ss[be])&&!Tt.call(y,be))&&(y[be]=ie[be])}return y}),Bl=ht(function(y){return y.push(d,Va),ni(ko,d,y)});function wr(y,x,k){var H=y==null?d:qi(y,x);return H===d?k:H}function Sr(y,x){return y!=null&&qa(y,x,Ih)}var Rl=Ga(function(y,x,k){x!=null&&typeof x.toString!="function"&&(x=Is.call(x)),y[x]=k},br(ti)),Il=Ga(function(y,x,k){x!=null&&typeof x.toString!="function"&&(x=Is.call(x)),Tt.call(y,x)?y[x].push(k):y[x]=[k]},Je),Fl=ht(Ss);function Ut(y){return Qt(y)?ra(y):Vn(y)}function ei(y){return Qt(y)?ra(y,!0):Fh(y)}var Nl=os(function(y,x,k){Js(y,x,k)}),ko=os(function(y,x,k,H){Js(y,x,k,H)}),Hl=Pi(function(y,x){var k={};if(y==null)return k;var H=!1;x=Pt(x,function(ie){return ie=Wi(ie,y),H=H||1<ie.length,ie}),Si(y,ar(y),k),H&&(k=ci(k,7,Xh));for(var z=x.length;z--;)$n(k,x[z]);return k}),Wl=Pi(function(y,x){return y==null?{}:function(k,H){return Sa(k,H,function(z,ie){return Sr(k,ie)})}(y,x)});function Oo(y,x){if(y==null)return{};var k=Pt(ar(y),function(H){return[H]});return x=Je(x),Sa(y,k,function(H,z){return x(H,z[0])})}var Do=za(Ut),Lo=za(ei);function cs(y){return y==null?[]:Dn(y,Ut(y))}var Gl=hs(function(y,x,k){return x=x.toLowerCase(),y+(k?Bo(x):x)});function Bo(y){return Er(vt(y).toLowerCase())}function Ro(y){return(y=vt(y))&&y.replace(N,oh).replace(Vo,"")}var Ul=hs(function(y,x,k){return y+(k?"-":"")+x.toLowerCase()}),Yl=hs(function(y,x,k){return y+(k?" ":"")+x.toLowerCase()}),zl=Na("toLowerCase"),Xl=hs(function(y,x,k){return y+(k?"_":"")+x.toLowerCase()}),Vl=hs(function(y,x,k){return y+(k?" ":"")+Er(x)}),jl=hs(function(y,x,k){return y+(k?" ":"")+x.toUpperCase()}),Er=Na("toUpperCase");function Io(y,x,k){return y=vt(y),(x=k?d:x)===d?function(H){return qo.test(H)}(y)?function(H){return H.match(jo)||[]}(y):function(H){return H.match(kt)||[]}(y):y.match(x)||[]}var Fo=ht(function(y,x){try{return ni(y,d,x)}catch(k){return xr(k)?k:new ft(k)}}),Kl=Pi(function(y,x){return li(x,function(k){k=Ei(k),Ci(y,k,yr(y[k],y))}),y});function br(y){return function(){return y}}var ql=Wa(),Jl=Wa(!0);function ti(y){return y}function Ar(y){return ma(typeof y=="function"?y:ci(y,1))}var Zl=ht(function(y,x){return function(k){return Ss(k,y,x)}}),$l=ht(function(y,x){return function(k){return Ss(y,k,x)}});function _r(y,x,k){var H=Ut(x),z=qs(x,H);k!=null||Ot(x)&&(z.length||!H.length)||(k=x,x=y,y=this,z=qs(x,Ut(x)));var ie=!(Ot(k)&&"chain"in k&&!k.chain),ue=Oi(y);return li(z,function(fe){var ye=x[fe];y[fe]=ye,ue&&(y.prototype[fe]=function(){var be=this.__chain__;if(ie||be){var _e=y(this.__wrapped__);return(_e.__actions__=$t(this.__actions__)).push({func:ye,args:arguments,thisArg:y}),_e.__chain__=be,_e}return ye.apply(y,Ri([this.value()],arguments))})}),y}function Cr(){}var Ql=sr(Pt),eu=sr(Yr),tu=sr(Cn);function No(y){return ur(y)?Mn(Ei(y)):function(x){return function(k){return qi(k,x)}}(y)}var iu=Ua(),su=Ua(!0);function Mr(){return[]}function Pr(){return!1}var nu=tn(function(y,x){return y+x},0),ru=nr("ceil"),au=tn(function(y,x){return y/x},1),ou=nr("floor"),kr,hu=tn(function(y,x){return y*x},1),lu=nr("round"),uu=tn(function(y,x){return y-x},0);return Z.after=function(y,x){if(typeof x!="function")throw new ui(w);return y=at(y),function(){if(--y<1)return x.apply(this,arguments)}},Z.ary=yo,Z.assign=kl,Z.assignIn=Po,Z.assignInWith=gn,Z.assignWith=Ol,Z.at=Dl,Z.before=vo,Z.bind=yr,Z.bindAll=Kl,Z.bindKey=xo,Z.castArray=function(){if(!arguments.length)return[];var y=arguments[0];return st(y)?y:[y]},Z.chain=po,Z.chunk=function(y,x,k){x=(k?qt(y,x,k):x===d)?1:Ht(at(x),0);var H=y==null?0:y.length;if(!H||x<1)return[];for(var z=0,ie=0,ue=Ie(Us(H/x));z<H;)ue[ie++]=di(y,z,z+=x);return ue},Z.compact=function(y){for(var x=-1,k=y==null?0:y.length,H=0,z=[];++x<k;){var ie=y[x];ie&&(z[H++]=ie)}return z},Z.concat=function(){var y=arguments.length;if(!y)return[];for(var x=Ie(y-1),k=arguments[0],H=y;H--;)x[H-1]=arguments[H];return Ri(st(k)?$t(k):[k],zt(x,1))},Z.cond=function(y){var x=y==null?0:y.length,k=Je();return y=x?Pt(y,function(H){if(typeof H[1]!="function")throw new ui(w);return[k(H[0]),H[1]]}):[],ht(function(H){for(var z=-1;++z<x;){var ie=y[z];if(ni(ie[0],this,H))return ni(ie[1],this,H)}})},Z.conforms=function(y){return function(x){var k=Ut(x);return function(H){return ha(H,x,k)}}(ci(y,1))},Z.constant=br,Z.countBy=dl,Z.create=function(y,x){var k=as(y);return x==null?k:oa(k,x)},Z.curry=function y(x,k,H){var z=Mi(x,8,d,d,d,d,d,k=H?d:k);return z.placeholder=y.placeholder,z},Z.curryRight=function y(x,k,H){var z=Mi(x,t,d,d,d,d,d,k=H?d:k);return z.placeholder=y.placeholder,z},Z.debounce=To,Z.defaults=Ll,Z.defaultsDeep=Bl,Z.defer=Tl,Z.delay=wl,Z.difference=Kh,Z.differenceBy=qh,Z.differenceWith=Jh,Z.drop=function(y,x,k){var H=y==null?0:y.length;return H?di(y,(x=k||x===d?1:at(x))<0?0:x,H):[]},Z.dropRight=function(y,x,k){var H=y==null?0:y.length;return H?di(y,0,(x=H-(x=k||x===d?1:at(x)))<0?0:x):[]},Z.dropRightWhile=function(y,x){return y&&y.length?$s(y,Je(x,3),!0,!0):[]},Z.dropWhile=function(y,x){return y&&y.length?$s(y,Je(x,3),!0):[]},Z.fill=function(y,x,k,H){var z=y==null?0:y.length;return z?(k&&typeof k!="number"&&qt(y,x,k)&&(k=0,H=z),function(ie,ue,fe,ye){var be=ie.length;for((fe=at(fe))<0&&(fe=be<-fe?0:be+fe),(ye=ye===d||be<ye?be:at(ye))<0&&(ye+=be),ye=ye<fe?0:Co(ye);fe<ye;)ie[fe++]=ue;return ie}(y,x,k,H)):[]},Z.filter=function(y,x){return(st(y)?Bi:ca)(y,Je(x,3))},Z.flatMap=function(y,x){return zt(ln(y,x),1)},Z.flatMapDeep=function(y,x){return zt(ln(y,x),a)},Z.flatMapDepth=function(y,x,k){return k=k===d?1:at(k),zt(ln(y,x),k)},Z.flatten=lo,Z.flattenDeep=function(y){return(y==null?0:y.length)?zt(y,a):[]},Z.flattenDepth=function(y,x){return(y==null?0:y.length)?zt(y,x=x===d?1:at(x)):[]},Z.flip=function(y){return Mi(y,512)},Z.flow=ql,Z.flowRight=Jl,Z.fromPairs=function(y){for(var x=-1,k=y==null?0:y.length,H={};++x<k;){var z=y[x];H[z[0]]=z[1]}return H},Z.functions=function(y){return y==null?[]:qs(y,Ut(y))},Z.functionsIn=function(y){return y==null?[]:qs(y,ei(y))},Z.groupBy=gl,Z.initial=function(y){return(y==null?0:y.length)?di(y,0,-1):[]},Z.intersection=Zh,Z.intersectionBy=$h,Z.intersectionWith=Qh,Z.invert=Rl,Z.invertBy=Il,Z.invokeMap=ml,Z.iteratee=Ar,Z.keyBy=yl,Z.keys=Ut,Z.keysIn=ei,Z.map=ln,Z.mapKeys=function(y,x){var k={};return x=Je(x,3),wi(y,function(H,z,ie){Ci(k,x(H,z,ie),H)}),k},Z.mapValues=function(y,x){var k={};return x=Je(x,3),wi(y,function(H,z,ie){Ci(k,z,x(H,z,ie))}),k},Z.matches=function(y){return va(ci(y,1))},Z.matchesProperty=function(y,x){return xa(y,ci(x,1))},Z.memoize=cn,Z.merge=Nl,Z.mergeWith=ko,Z.method=Zl,Z.methodOf=$l,Z.mixin=_r,Z.negate=dn,Z.nthArg=function(y){return y=at(y),ht(function(x){return Ta(x,y)})},Z.omit=Hl,Z.omitBy=function(y,x){return Oo(y,dn(Je(x)))},Z.once=function(y){return vo(2,y)},Z.orderBy=function(y,x,k,H){return y==null?[]:(st(x)||(x=x==null?[]:[x]),st(k=H?d:k)||(k=k==null?[]:[k]),wa(y,x,k))},Z.over=Ql,Z.overArgs=Sl,Z.overEvery=eu,Z.overSome=tu,Z.partial=vr,Z.partialRight=wo,Z.partition=vl,Z.pick=Wl,Z.pickBy=Oo,Z.property=No,Z.propertyOf=function(y){return function(x){return y==null?d:qi(y,x)}},Z.pull=el,Z.pullAll=co,Z.pullAllBy=function(y,x,k){return y&&y.length&&x&&x.length?Kn(y,x,Je(k,2)):y},Z.pullAllWith=function(y,x,k){return y&&y.length&&x&&x.length?Kn(y,x,d,k):y},Z.pullAt=tl,Z.range=iu,Z.rangeRight=su,Z.rearg=El,Z.reject=function(y,x){return(st(y)?Bi:ca)(y,dn(Je(x,3)))},Z.remove=function(y,x){var k=[];if(!y||!y.length)return k;var H=-1,z=[],ie=y.length;for(x=Je(x,3);++H<ie;){var ue=y[H];x(ue,H,y)&&(k.push(ue),z.push(H))}return Ea(y,z),k},Z.rest=function(y,x){if(typeof y!="function")throw new ui(w);return ht(y,x=x===d?x:at(x))},Z.reverse=gr,Z.sampleSize=function(y,x,k){return x=(k?qt(y,x,k):x===d)?1:at(x),(st(y)?Oh:Hh)(y,x)},Z.set=function(y,x,k){return y==null?y:bs(y,x,k)},Z.setWith=function(y,x,k,H){return H=typeof H=="function"?H:d,y==null?y:bs(y,x,k,H)},Z.shuffle=function(y){return(st(y)?Dh:Gh)(y)},Z.slice=function(y,x,k){var H=y==null?0:y.length;return H?(k=k&&typeof k!="number"&&qt(y,x,k)?(x=0,H):(x=x==null?0:at(x),k===d?H:at(k)),di(y,x,k)):[]},Z.sortBy=xl,Z.sortedUniq=function(y){return y&&y.length?Aa(y):[]},Z.sortedUniqBy=function(y,x){return y&&y.length?Aa(y,Je(x,2)):[]},Z.split=function(y,x,k){return k&&typeof k!="number"&&qt(y,x,k)&&(x=k=d),(k=k===d?c:k>>>0)?(y=vt(y))&&(typeof x=="string"||x!=null&&!Tr(x))&&!(x=ai(x))&&ts(y)?Gi(mi(y),0,k):y.split(x,k):[]},Z.spread=function(y,x){if(typeof y!="function")throw new ui(w);return x=x==null?0:Ht(at(x),0),ht(function(k){var H=k[x],z=Gi(k,0,x);return H&&Ri(z,H),ni(y,this,z)})},Z.tail=function(y){var x=y==null?0:y.length;return x?di(y,1,x):[]},Z.take=function(y,x,k){return y&&y.length?di(y,0,(x=k||x===d?1:at(x))<0?0:x):[]},Z.takeRight=function(y,x,k){var H=y==null?0:y.length;return H?di(y,(x=H-(x=k||x===d?1:at(x)))<0?0:x,H):[]},Z.takeRightWhile=function(y,x){return y&&y.length?$s(y,Je(x,3),!1,!0):[]},Z.takeWhile=function(y,x){return y&&y.length?$s(y,Je(x,3)):[]},Z.tap=function(y,x){return x(y),y},Z.throttle=function(y,x,k){var H=!0,z=!0;if(typeof y!="function")throw new ui(w);return Ot(k)&&(H="leading"in k?!!k.leading:H,z="trailing"in k?!!k.trailing:z),To(y,x,{leading:H,maxWait:x,trailing:z})},Z.thru=hn,Z.toArray=_o,Z.toPairs=Do,Z.toPairsIn=Lo,Z.toPath=function(y){return st(y)?Pt(y,Ei):oi(y)?[y]:$t(ro(vt(y)))},Z.toPlainObject=Mo,Z.transform=function(y,x,k){var H=st(y),z=H||Ui(y)||us(y);if(x=Je(x,4),k==null){var ie=y&&y.constructor;k=z?H?new ie:[]:Ot(y)&&Oi(ie)?as(Hs(y)):{}}return(z?li:wi)(y,function(ue,fe,ye){return x(k,ue,fe,ye)}),k},Z.unary=function(y){return yo(y,1)},Z.union=il,Z.unionBy=sl,Z.unionWith=nl,Z.uniq=function(y){return y&&y.length?Hi(y):[]},Z.uniqBy=function(y,x){return y&&y.length?Hi(y,Je(x,2)):[]},Z.uniqWith=function(y,x){return x=typeof x=="function"?x:d,y&&y.length?Hi(y,d,x):[]},Z.unset=function(y,x){return y==null||$n(y,x)},Z.unzip=mr,Z.unzipWith=fo,Z.update=function(y,x,k){return y==null?y:Ca(y,x,tr(k))},Z.updateWith=function(y,x,k,H){return H=typeof H=="function"?H:d,y==null?y:Ca(y,x,tr(k),H)},Z.values=cs,Z.valuesIn=function(y){return y==null?[]:Dn(y,ei(y))},Z.without=rl,Z.words=Io,Z.wrap=function(y,x){return vr(tr(x),y)},Z.xor=al,Z.xorBy=ol,Z.xorWith=hl,Z.zip=ll,Z.zipObject=function(y,x){return Pa(y||[],x||[],Ts)},Z.zipObjectDeep=function(y,x){return Pa(y||[],x||[],bs)},Z.zipWith=ul,Z.entries=Do,Z.entriesIn=Lo,Z.extend=Po,Z.extendWith=gn,_r(Z,Z),Z.add=nu,Z.attempt=Fo,Z.camelCase=Gl,Z.capitalize=Bo,Z.ceil=ru,Z.clamp=function(y,x,k){return k===d&&(k=x,x=d),k!==d&&(k=(k=pi(k))==k?k:0),x!==d&&(x=(x=pi(x))==x?x:0),Ki(pi(y),x,k)},Z.clone=function(y){return ci(y,4)},Z.cloneDeep=function(y){return ci(y,5)},Z.cloneDeepWith=function(y,x){return ci(y,5,x=typeof x=="function"?x:d)},Z.cloneWith=function(y,x){return ci(y,4,x=typeof x=="function"?x:d)},Z.conformsTo=function(y,x){return x==null||ha(y,x,Ut(x))},Z.deburr=Ro,Z.defaultTo=function(y,x){return y==null||y!=y?x:y},Z.divide=au,Z.endsWith=function(y,x,k){y=vt(y),x=ai(x);var H=y.length,z=k=k===d?H:Ki(at(k),0,H);return 0<=(k-=x.length)&&y.slice(k,z)==x},Z.eq=xi,Z.escape=function(y){return(y=vt(y))&&Ve.test(y)?y.replace(Oe,hh):y},Z.escapeRegExp=function(y){return(y=vt(y))&&Et.test(y)?y.replace(it,"\\$&"):y},Z.every=function(y,x,k){var H=st(y)?Yr:Bh;return k&&qt(y,x,k)&&(x=d),H(y,Je(x,3))},Z.find=fl,Z.findIndex=oo,Z.findKey=function(y,x){return zr(y,Je(x,3),wi)},Z.findLast=pl,Z.findLastIndex=ho,Z.findLastKey=function(y,x){return zr(y,Je(x,3),Un)},Z.floor=ou,Z.forEach=go,Z.forEachRight=mo,Z.forIn=function(y,x){return y==null?y:Gn(y,Je(x,3),ei)},Z.forInRight=function(y,x){return y==null?y:da(y,Je(x,3),ei)},Z.forOwn=function(y,x){return y&&wi(y,Je(x,3))},Z.forOwnRight=function(y,x){return y&&Un(y,Je(x,3))},Z.get=wr,Z.gt=bl,Z.gte=Al,Z.has=function(y,x){return y!=null&&qa(y,x,Rh)},Z.hasIn=Sr,Z.head=uo,Z.identity=ti,Z.includes=function(y,x,k,H){y=Qt(y)?y:cs(y),k=k&&!H?at(k):0;var z=y.length;return k<0&&(k=Ht(z+k,0)),pn(y)?k<=z&&-1<y.indexOf(x,k):!!z&&-1<es(y,x,k)},Z.indexOf=function(y,x,k){var H=y==null?0:y.length;if(!H)return-1;var z=k==null?0:at(k);return z<0&&(z=Ht(H+z,0)),es(y,x,z)},Z.inRange=function(y,x,k){return x=Di(x),k===d?(k=x,x=0):k=Di(k),function(H,z,ie){return H>=Xt(z,ie)&&H<Ht(z,ie)}(y=pi(y),x,k)},Z.invoke=Fl,Z.isArguments=$i,Z.isArray=st,Z.isArrayBuffer=_l,Z.isArrayLike=Qt,Z.isArrayLikeObject=Bt,Z.isBoolean=function(y){return y===!0||y===!1||Lt(y)&&Kt(y)==p},Z.isBuffer=Ui,Z.isDate=Cl,Z.isElement=function(y){return Lt(y)&&y.nodeType===1&&!Ms(y)},Z.isEmpty=function(y){if(y==null)return!0;if(Qt(y)&&(st(y)||typeof y=="string"||typeof y.splice=="function"||Ui(y)||us(y)||$i(y)))return!y.length;var x=Vt(y);if(x==A||x==I)return!y.size;if(_s(y))return!Vn(y).length;for(var k in y)if(Tt.call(y,k))return!1;return!0},Z.isEqual=function(y,x){return Es(y,x)},Z.isEqualWith=function(y,x,k){var H=(k=typeof k=="function"?k:d)?k(y,x):d;return H===d?Es(y,x,d,k):!!H},Z.isError=xr,Z.isFinite=function(y){return typeof y=="number"&&ia(y)},Z.isFunction=Oi,Z.isInteger=So,Z.isLength=fn,Z.isMap=Eo,Z.isMatch=function(y,x){return y===x||Xn(y,x,hr(x))},Z.isMatchWith=function(y,x,k){return k=typeof k=="function"?k:d,Xn(y,x,hr(x),k)},Z.isNaN=function(y){return bo(y)&&y!=+y},Z.isNative=function(y){if(jh(y))throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ga(y)},Z.isNil=function(y){return y==null},Z.isNull=function(y){return y===null},Z.isNumber=bo,Z.isObject=Ot,Z.isObjectLike=Lt,Z.isPlainObject=Ms,Z.isRegExp=Tr,Z.isSafeInteger=function(y){return So(y)&&-u<=y&&y<=u},Z.isSet=Ao,Z.isString=pn,Z.isSymbol=oi,Z.isTypedArray=us,Z.isUndefined=function(y){return y===d},Z.isWeakMap=function(y){return Lt(y)&&Vt(y)==Y},Z.isWeakSet=function(y){return Lt(y)&&Kt(y)=="[object WeakSet]"},Z.join=function(y,x){return y==null?"":wh.call(y,x)},Z.kebabCase=Ul,Z.last=fi,Z.lastIndexOf=function(y,x,k){var H=y==null?0:y.length;if(!H)return-1;var z=H;return k!==d&&(z=(z=at(k))<0?Ht(H+z,0):Xt(z,H-1)),x==x?function(ie,ue,fe){for(var ye=fe+1;ye--;)if(ie[ye]===ue)return ye;return ye}(y,x,z):ks(y,Xr,z,!0)},Z.lowerCase=Yl,Z.lowerFirst=zl,Z.lt=Ml,Z.lte=Pl,Z.max=function(y){return y&&y.length?Ks(y,ti,Yn):d},Z.maxBy=function(y,x){return y&&y.length?Ks(y,Je(x,2),Yn):d},Z.mean=function(y){return Vr(y,ti)},Z.meanBy=function(y,x){return Vr(y,Je(x,2))},Z.min=function(y){return y&&y.length?Ks(y,ti,jn):d},Z.minBy=function(y,x){return y&&y.length?Ks(y,Je(x,2),jn):d},Z.stubArray=Mr,Z.stubFalse=Pr,Z.stubObject=function(){return{}},Z.stubString=function(){return""},Z.stubTrue=function(){return!0},Z.multiply=hu,Z.nth=function(y,x){return y&&y.length?Ta(y,at(x)):d},Z.noConflict=function(){return Yt._===this&&(Yt._=gh),this},Z.noop=Cr,Z.now=un,Z.pad=function(y,x,k){y=vt(y);var H=(x=at(x))?is(y):0;if(!x||x<=H)return y;var z=(x-H)/2;return sn(Ys(z),k)+y+sn(Us(z),k)},Z.padEnd=function(y,x,k){y=vt(y);var H=(x=at(x))?is(y):0;return x&&H<x?y+sn(x-H,k):y},Z.padStart=function(y,x,k){y=vt(y);var H=(x=at(x))?is(y):0;return x&&H<x?sn(x-H,k)+y:y},Z.parseInt=function(y,x,k){return x=k||x==null?0:x&&+x,bh(vt(y).replace(dt,""),x||0)},Z.random=function(y,x,k){if(k&&typeof k!="boolean"&&qt(y,x,k)&&(x=k=d),k===d&&(typeof x=="boolean"?(k=x,x=d):typeof y=="boolean"&&(k=y,y=d)),y===d&&x===d?(y=0,x=1):(y=Di(y),x===d?(x=y,y=0):x=Di(x)),x<y){var H=y;y=x,x=H}if(k||y%1||x%1){var z=sa();return Xt(y+z*(x-y+Qo("1e-"+((z+"").length-1))),x)}return qn(y,x)},Z.reduce=function(y,x,k){var H=st(y)?_n:jr,z=arguments.length<3;return H(y,Je(x,4),k,z,Ni)},Z.reduceRight=function(y,x,k){var H=st(y)?nh:jr,z=arguments.length<3;return H(y,Je(x,4),k,z,ua)},Z.repeat=function(y,x,k){return x=(k?qt(y,x,k):x===d)?1:at(x),Jn(vt(y),x)},Z.replace=function(){var y=arguments,x=vt(y[0]);return y.length<3?x:x.replace(y[1],y[2])},Z.result=function(y,x,k){var H=-1,z=(x=Wi(x,y)).length;for(z||(z=1,y=d);++H<z;){var ie=y==null?d:y[Ei(x[H])];ie===d&&(H=z,ie=k),y=Oi(ie)?ie.call(y):ie}return y},Z.round=lu,Z.runInContext=Te,Z.sample=function(y){return(st(y)?aa:Nh)(y)},Z.size=function(y){if(y==null)return 0;if(Qt(y))return pn(y)?is(y):y.length;var x=Vt(y);return x==A||x==I?y.size:Vn(y).length},Z.snakeCase=Xl,Z.some=function(y,x,k){var H=st(y)?Cn:Uh;return k&&qt(y,x,k)&&(x=d),H(y,Je(x,3))},Z.sortedIndex=function(y,x){return Zs(y,x)},Z.sortedIndexBy=function(y,x,k){return Zn(y,x,Je(k,2))},Z.sortedIndexOf=function(y,x){var k=y==null?0:y.length;if(k){var H=Zs(y,x);if(H<k&&xi(y[H],x))return H}return-1},Z.sortedLastIndex=function(y,x){return Zs(y,x,!0)},Z.sortedLastIndexBy=function(y,x,k){return Zn(y,x,Je(k,2),!0)},Z.sortedLastIndexOf=function(y,x){if(y==null?0:y.length){var k=Zs(y,x,!0)-1;if(xi(y[k],x))return k}return-1},Z.startCase=Vl,Z.startsWith=function(y,x,k){return y=vt(y),k=k==null?0:Ki(at(k),0,y.length),x=ai(x),y.slice(k,k+x.length)==x},Z.subtract=uu,Z.sum=function(y){return y&&y.length?kn(y,ti):0},Z.sumBy=function(y,x){return y&&y.length?kn(y,Je(x,2)):0},Z.template=function(y,x,k){var H=Z.templateSettings;k&&qt(y,x,k)&&(x=d),y=vt(y),x=gn({},x,H,Xa);var z,ie,ue=gn({},x.imports,H.imports,Xa),fe=Ut(ue),ye=Dn(ue,fe),be=0,_e=x.interpolate||X,De="__p += '",He=Bn((x.escape||X).source+"|"+_e.source+"|"+(_e===Ge?ke:X).source+"|"+(x.evaluate||X).source+"|$","g"),Ye="//# sourceURL="+(Tt.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zo+"]")+`
`;y.replace(He,function(Le,Ze,Re,qe,ot,wt){return Re=Re||qe,De+=y.slice(be,wt).replace(V,lh),Ze&&(z=!0,De+=`' +
__e(`+Ze+`) +
'`),ot&&(ie=!0,De+=`';
`+ot+`;
__p += '`),Re&&(De+=`' +
((__t = (`+Re+`)) == null ? '' : __t) +
'`),be=wt+Le.length,Le}),De+=`';
`;var Ke=Tt.call(x,"variable")&&x.variable;Ke||(De=`with (obj) {
`+De+`
}
`),De=(ie?De.replace(Se,""):De).replace(de,"$1").replace(pe,"$1;"),De="function("+(Ke||"obj")+`) {
`+(Ke?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(z?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var Ce=Fo(function(){return Nt(fe,Ye+"return "+De).apply(d,ye)});if(Ce.source=De,xr(Ce))throw Ce;return Ce},Z.times=function(y,x){if((y=at(y))<1||u<y)return[];var k=c,H=Xt(y,c);x=Je(x),y-=c;for(var z=On(H,x);++k<y;)x(k);return z},Z.toFinite=Di,Z.toInteger=at,Z.toLength=Co,Z.toLower=function(y){return vt(y).toLowerCase()},Z.toNumber=pi,Z.toSafeInteger=function(y){return y?Ki(at(y),-u,u):y===0?y:0},Z.toString=vt,Z.toUpper=function(y){return vt(y).toUpperCase()},Z.trim=function(y,x,k){if((y=vt(y))&&(k||x===d))return y.replace(gt,"");if(!y||!(x=ai(x)))return y;var H=mi(y),z=mi(x);return Gi(H,Kr(H,z),qr(H,z)+1).join("")},Z.trimEnd=function(y,x,k){if((y=vt(y))&&(k||x===d))return y.replace(St,"");if(!y||!(x=ai(x)))return y;var H=mi(y);return Gi(H,0,qr(H,mi(x))+1).join("")},Z.trimStart=function(y,x,k){if((y=vt(y))&&(k||x===d))return y.replace(dt,"");if(!y||!(x=ai(x)))return y;var H=mi(y);return Gi(H,Kr(H,mi(x))).join("")},Z.truncate=function(y,x){var k=30,H="...";if(Ot(x)){var z="separator"in x?x.separator:z;k="length"in x?at(x.length):k,H="omission"in x?ai(x.omission):H}var ie=(y=vt(y)).length;if(ts(y)){var ue=mi(y);ie=ue.length}if(ie<=k)return y;var fe=k-is(H);if(fe<1)return H;var ye=ue?Gi(ue,0,fe).join(""):y.slice(0,fe);if(z===d)return ye+H;if(ue&&(fe+=ye.length-fe),Tr(z)){if(y.slice(fe).search(z)){var be,_e=ye;for(z.global||(z=Bn(z.source,vt(m.exec(z))+"g")),z.lastIndex=0;be=z.exec(_e);)var De=be.index;ye=ye.slice(0,De===d?fe:De)}}else if(y.indexOf(ai(z),fe)!=fe){var He=ye.lastIndexOf(z);-1<He&&(ye=ye.slice(0,He))}return ye+H},Z.unescape=function(y){return(y=vt(y))&&Fe.test(y)?y.replace(Ae,uh):y},Z.uniqueId=function(y){var x=++fh;return vt(y)+x},Z.upperCase=jl,Z.upperFirst=Er,Z.each=go,Z.eachRight=mo,Z.first=uo,_r(Z,(kr={},wi(Z,function(y,x){Tt.call(Z.prototype,x)||(kr[x]=y)}),kr),{chain:!1}),Z.VERSION="4.17.19",li(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){Z[y].placeholder=Z}),li(["drop","take"],function(y,x){ut.prototype[y]=function(k){k=k===d?1:Ht(at(k),0);var H=this.__filtered__&&!x?new ut(this):this.clone();return H.__filtered__?H.__takeCount__=Xt(k,H.__takeCount__):H.__views__.push({size:Xt(k,c),type:y+(H.__dir__<0?"Right":"")}),H},ut.prototype[y+"Right"]=function(k){return this.reverse()[y](k).reverse()}}),li(["filter","map","takeWhile"],function(y,x){var k=x+1,H=k==1||k==3;ut.prototype[y]=function(z){var ie=this.clone();return ie.__iteratees__.push({iteratee:Je(z,3),type:k}),ie.__filtered__=ie.__filtered__||H,ie}}),li(["head","last"],function(y,x){var k="take"+(x?"Right":"");ut.prototype[y]=function(){return this[k](1).value()[0]}}),li(["initial","tail"],function(y,x){var k="drop"+(x?"":"Right");ut.prototype[y]=function(){return this.__filtered__?new ut(this):this[k](1)}}),ut.prototype.compact=function(){return this.filter(ti)},ut.prototype.find=function(y){return this.filter(y).head()},ut.prototype.findLast=function(y){return this.reverse().find(y)},ut.prototype.invokeMap=ht(function(y,x){return typeof y=="function"?new ut(this):this.map(function(k){return Ss(k,y,x)})}),ut.prototype.reject=function(y){return this.filter(dn(Je(y)))},ut.prototype.slice=function(y,x){y=at(y);var k=this;return k.__filtered__&&(0<y||x<0)?new ut(k):(y<0?k=k.takeRight(-y):y&&(k=k.drop(y)),x!==d&&(k=(x=at(x))<0?k.dropRight(-x):k.take(x-y)),k)},ut.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},ut.prototype.toArray=function(){return this.take(c)},wi(ut.prototype,function(y,x){var k=/^(?:filter|find|map|reject)|While$/.test(x),H=/^(?:head|last)$/.test(x),z=Z[H?"take"+(x=="last"?"Right":""):x],ie=H||/^find/.test(x);z&&(Z.prototype[x]=function(){function ue(Ze){var Re=z.apply(Z,Ri([Ze],ye));return H&&He?Re[0]:Re}var fe=this.__wrapped__,ye=H?[1]:arguments,be=fe instanceof ut,_e=ye[0],De=be||st(fe);De&&k&&typeof _e=="function"&&_e.length!=1&&(be=De=!1);var He=this.__chain__,Ye=!!this.__actions__.length,Ke=ie&&!He,Ce=be&&!Ye;if(ie||!De)return Ke&&Ce?y.apply(this,ye):(Le=this.thru(ue),Ke?H?Le.value()[0]:Le.value():Le);fe=Ce?fe:new ut(this);var Le=y.apply(fe,ye);return Le.__actions__.push({func:hn,args:[ue],thisArg:d}),new yi(Le,He)})}),li(["pop","push","shift","sort","splice","unshift"],function(y){var x=Ls[y],k=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",H=/^(?:pop|shift)$/.test(y);Z.prototype[y]=function(){var z=arguments;if(!H||this.__chain__)return this[k](function(ue){return x.apply(st(ue)?ue:[],z)});var ie=this.value();return x.apply(st(ie)?ie:[],z)}}),wi(ut.prototype,function(y,x){var k=Z[x];if(k){var H=k.name+"";Tt.call(rs,H)||(rs[H]=[]),rs[H].push({name:x,func:k})}}),rs[en(d,2).name]=[{name:"wrapper",func:d}],ut.prototype.clone=function(){var y=new ut(this.__wrapped__);return y.__actions__=$t(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=$t(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=$t(this.__views__),y},ut.prototype.reverse=function(){if(this.__filtered__){var y=new ut(this);y.__dir__=-1,y.__filtered__=!0}else(y=this.clone()).__dir__*=-1;return y},ut.prototype.value=function(){var y=this.__wrapped__.value(),x=this.__dir__,k=st(y),H=x<0,z=k?y.length:0,ie=function(wt,je,$e){for(var Wt=-1,Rt=$e.length;++Wt<Rt;){var Jt=$e[Wt],Ct=Jt.size;switch(Jt.type){case"drop":wt+=Ct;break;case"dropRight":je-=Ct;break;case"take":je=Xt(je,wt+Ct);break;case"takeRight":wt=Ht(wt,je-Ct)}}return{start:wt,end:je}}(0,z,this.__views__),ue=ie.start,fe=ie.end,ye=fe-ue,be=H?fe:ue-1,_e=this.__iteratees__,De=_e.length,He=0,Ye=Xt(ye,this.__takeCount__);if(!k||!H&&z==ye&&Ye==ye)return Ma(y,this.__actions__);var Ke=[];e:for(;ye--&&He<Ye;){for(var Ce=-1,Le=y[be+=x];++Ce<De;){var Ze=_e[Ce],Re=Ze.iteratee,qe=Ze.type,ot=Re(Le);if(qe==2)Le=ot;else if(!ot){if(qe==1)continue e;break e}}Ke[He++]=Le}return Ke},Z.prototype.at=cl,Z.prototype.chain=function(){return po(this)},Z.prototype.commit=function(){return new yi(this.value(),this.__chain__)},Z.prototype.next=function(){this.__values__===d&&(this.__values__=_o(this.value()));var y=this.__index__>=this.__values__.length;return{done:y,value:y?d:this.__values__[this.__index__++]}},Z.prototype.plant=function(y){for(var x,k=this;k instanceof Vs;){var H=ao(k);H.__index__=0,H.__values__=d,x?z.__wrapped__=H:x=H;var z=H;k=k.__wrapped__}return z.__wrapped__=y,x},Z.prototype.reverse=function(){var y=this.__wrapped__;if(y instanceof ut){var x=y;return this.__actions__.length&&(x=new ut(this)),(x=x.reverse()).__actions__.push({func:hn,args:[gr],thisArg:d}),new yi(x,this.__chain__)}return this.thru(gr)},Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function(){return Ma(this.__wrapped__,this.__actions__)},Z.prototype.first=Z.prototype.head,gs&&(Z.prototype[gs]=function(){return this}),Z}();Yt._=Ds,Zt=function(){return Ds}.call(rt,Gt,rt,ct),Zt!==void 0&&(ct.exports=Zt)}).call(this)}},Sn={};function ii(ct){if(Sn[ct])return Sn[ct].exports;var rt=Sn[ct]={id:ct,loaded:!1,exports:{}};return Uo[ct].call(rt.exports,rt,rt.exports,ii),rt.loaded=!0,rt.exports}(()=>{ii.n=ct=>{var rt=ct&&ct.__esModule?()=>ct.default:()=>ct;return ii.d(rt,{a:rt}),rt}})(),(()=>{ii.d=(ct,rt)=>{for(var Gt in rt)ii.o(rt,Gt)&&!ii.o(ct,Gt)&&Object.defineProperty(ct,Gt,{enumerable:!0,get:rt[Gt]})}})(),(()=>{ii.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(ct){if(typeof window=="object")return window}}()})(),(()=>{ii.o=(ct,rt)=>Object.prototype.hasOwnProperty.call(ct,rt)})(),(()=>{ii.nmd=ct=>(ct.paths=[],ct.children||(ct.children=[]),ct)})();var cu={};(()=>{"use strict";let ct={components:{alienShooterHero1:{enableAudio:1}},options:{isTutorialEnabled:!1}},rt={components:{alienShooterHero1:{enableAudio:0}},options:{}};var Gt=ii(566),Zt=ii.n(Gt);class d extends Phaser.Scene{constructor(m){super(m);this.texturesSentToTextureManager=new Set,this.spriteSheetsSentToTextureManager=new Set,this.atlasesSentToTextureManager=new Set,this.soundsSentToSoundManager=new Set,this.bitmapFontsSentToTextureManager=new Set}preload(){console.info("do not invoke this method without overriding")}create(){console.info("do not invoke this method without overriding")}getOrientation(){return _.hasIn(this,"options.shouldForcePortraitMode")&&this.options.shouldForcePortraitMode&&this.game.canvas.width>=this.game.canvas.height||this.game.canvas.height>this.game.canvas.width?"portrait":"landscape"}getShortEdge(){return this.game.canvas.height>this.game.canvas.width?this.game.canvas.width:this.game.canvas.height}}class w extends d{constructor(){super("gameScene");console.info("gameScene constructor has started"),this.componentIsTextureLoaded=new Map}preload(){console.info("gameScene preload has started"),this.setGameSize(),this.componentsRenderQueue=new Set,this.components.forEach(m=>{this.componentsRenderQueue.add(m.componentId)}),this.components.forEach((m,S)=>{m.Scene=this,m.options=this.options,(!_.isNil(m.selectedImages)||!_.isNil(m.textures)&&_.size(m.textures)>0)&&this.componentIsTextureLoaded.set(m.componentId,!1),m.onRender=b=>{this.componentsRenderQueue.has(b.componentId)&&(this.componentsRenderQueue.delete(b.componentId),this.componentsRenderQueue.size===0&&this.onGameSceneLoaded())}}),this.onGameSceneStarted(),this.components.forEach((m,S)=>{_.hasIn(m,"load")&&m.load()}),this.input.on("pointerdown",()=>{this.onTap()}),this.load.on("complete",()=>{this.load.totalFailed>0&&this.load.totalToLoad===this.load.totalComplete+this.load.totalFailed&&(console.debug("All files load processed"),console.debug("Here are the files that failed to load",this.filesFailedToLoad),parent.postMessage({missingFiles:this.filesFailedToLoad},"*"))}),this.adNetworkSetting.name==="mintegral"&&window.gameReady&&window.gameReady()}fileLoadErrorHandler(m,S){this.filesFailedToLoad.add({path:m,file:S})}create(){}update(){}}var e=ii(159),n=ii.n(e);class t extends d{constructor(){super("hudScene");console.info("hudScene constructor has started")}preload(){console.info("hudScene preload has started"),this.setGameSize(),this.components.forEach((m,S)=>{m.HudScene=this})}create(){}update(){}}class r{constructor(m){this.tapCount=0,this.validMoveCount=0,this.configs=[],this.props=m,this.isGamePlayable=!1,this.isGameSceneStarted=!1,this.isPhaserGameObjectInitialized=!1,this.isMraidReady=!1,this.isDapiReady=!1,this.isDapiViewable=!1,this.isEndCardShown=!1,this.timeElapsedSeconds=0,this.timeElapsedSecondsAfterEndCardShown=0,this.filesFailedToLoad=new Set;let S=w;S.prototype.adNetworkSetting=m.adNetworkSetting,S.prototype.transformCanvas=this.transformCanvas,S.prototype.components=m.components,S.prototype.options=m.options,S.prototype.isGameSceneStarted=this.isGameSceneStarted,S.prototype.filesFailedToLoad=this.filesFailedToLoad,S.prototype.openStore=()=>{this.openStore()},S.prototype.setGameSize=()=>{this.setGameSize()},S.prototype.getGamePlayableStatus=(b={})=>this.isGamePlayable,S.prototype.onGameSceneStarted=(b={})=>{if(console.debug("onGameSceneStarted executed"),this.isGameSceneStarted=!0,n().get(this,"props.adNetworkSetting.useDapi",!1)===!0){this.updateDapiSize();const B=dapi.getAudioVolume()}n().isFunction(this.onGameSceneStarted)&&this.onGameSceneStarted()},S.prototype.onTap=(b={})=>{console.debug("tapped"),this.tapCount++,!this.isEndCardShown&&this.props.options.isEndCardEnabled&&this.props.options.endCardTaps!==0&&this.tapCount%this.props.options.endCardTaps===0&&(console.debug("show endcard tap limit is reached."),this.playableEnd()),!this.isEndCardShown&&this.props.options.goToMarketTaps!==0&&this.tapCount%this.props.options.goToMarketTaps===0&&(console.debug("open store tap limit is reached."),this.openStore())},S.prototype.onValidMove=(b={})=>{console.debug("valid move"),this.validMoveCount++,!this.isEndCardShown&&this.props.options.isEndCardEnabled&&this.props.options.endCardMoves!==0&&this.validMoveCount>=this.props.options.endCardMoves&&(console.debug("valid move limit is reached."),this.playableEnd())},S.prototype.onGameSceneLoaded=(b={})=>{console.debug("onGameSceneLoaded"),this.onResizeHandler()},S.prototype.getIsEndCardShown=(b={})=>this.IsEndCardShown,this.hudSceneExtended=t,this.hudSceneExtended.prototype.adNetworkSetting=m.adNetworkSetting,this.hudSceneExtended.prototype.transformCanvas=this.transformCanvas,this.hudSceneExtended.prototype.components=m.components,this.hudSceneExtended.prototype.options=m.options,this.hudSceneExtended.prototype.isGameSceneStarted=this.isGameSceneStarted,this.hudSceneExtended.prototype.filesFailedToLoad=this.filesFailedToLoad,this.hudSceneExtended.prototype.openStore=()=>{this.openStore()},this.hudSceneExtended.prototype.setGameSize=()=>{this.setGameSize()},this.hudSceneExtended.prototype.onTap=(b={})=>{console.debug("tapped"),this.tapCount++,!this.isEndCardShown&&this.props.options.isEndCardEnabled&&this.props.options.endCardTaps!==0&&this.tapCount%this.props.options.endCardTaps===0&&(console.debug("show endcard tap limit is reached."),this.playableEnd()),!this.isEndCardShown&&this.props.options.goToMarketTaps!==0&&this.tapCount%this.props.options.goToMarketTaps===0&&(console.debug("open store tap limit is reached."),this.openStore())},this.hudSceneExtended.prototype.onValidMove=(b={})=>{console.debug("valid move"),this.validMoveCount++,!this.isEndCardShown&&this.props.options.isEndCardEnabled&&this.props.options.endCardMoves!==0&&this.validMoveCount>=this.props.options.endCardMoves&&(console.debug("valid move limit is reached."),this.playableEnd())},this.hudSceneExtended.prototype.onGameSceneLoaded=(b={})=>{console.debug("onGameSceneLoaded"),this.onResizeHandler()},this.hudSceneExtended.prototype.getIsEndCardShown=(b={})=>this.IsEndCardShown,this.phaserConfig={type:Zt().AUTO,parent:"",backgroundColor:"#000000",width:document.documentElement.clientWidth*window.devicePixelRatio,height:document.documentElement.clientHeight*window.devicePixelRatio,render:{batchSize:512,antialiasGL:!1},physics:{default:"arcade",arcade:{debug:!1}},scene:[S],scale:{mode:Zt().Scale.ScaleModes.NONE},audio:{disableWebAudio:!1}},n().has(this,"props.specificPhaserConfig")&&(this.props.specificPhaserConfig.scene=[S]),C.name==="h5games"&&(this.phaserConfig.backgroundColor="transparent"),this.onPhaserGameReady=m.onPhaserGameReady}get IsEndCardShown(){return this.isEndCardShown}get IsGameSceneStarted(){return this.isGameSceneStarted}openStore(){console.debug("OPEN STORE");const m=n().get(this,"props.adNetworkSetting.useDapi",!1)===!0;let S="android";["iPad","MacIntel","iPhone","iPod"].indexOf(navigator.platform)>=0&&(S="ios"),typeof mraid!="undefined"&&n().isFunction(mraid.open)?mraid.open(this.getStoreUrlByPlatform(S)):m&&n().isFunction(dapi.openStoreUrl)?dapi.openStoreUrl(this.getStoreUrlByPlatform(S)):this.props.adNetworkSetting.name==="facebook"?(FbPlayableAd.onCTAClick(),FbPlayableAd.onCTAClick(this.getStoreUrlByPlatform(S))):this.props.adNetworkSetting.name==="mintegral"?window.install&&window.install():this.props.adNetworkSetting.name==="vungle"?(window.open(this.getStoreUrlByPlatform(S)),parent.postMessage("download","*")):this.props.adNetworkSetting.name==="tiktok"?window.playableSDK.openAppStore():window.open(this.getStoreUrlByPlatform(S))}getStoreUrlByPlatform(m){let S=n().get(this,"props.options.link.android",null),b=n().get(this,"props.options.link.ios",null);if(n().isNil(S))throw"Android link is nil";if(n().isNil(b))throw"Ios link is nil";return String(S).startsWith("http")||(S="http://"+S),String(b).startsWith("http")||(b="http://"+b),m==="android"?S:m==="ios"?b:S}startPlayable(){const m=n().get(this,"props.adNetworkSetting.useDapi",!1)===!0;console.log("start playable function"),this.isMraidAvailable?(console.log("mraid is available"),this.addMraidSupport()):m&&this.isDapiAvailable()?this.addDapiSupport():(this.props.adNetworkSetting.name==="vungle"&&this.addVungleSupport(),this.startPhaserGame(),window.addEventListener("resize",S=>{setTimeout(()=>{this.onResizeHandler(),this.setGameSize()},0)}))}consumePanelConfigs(){for(;this.configs.length>0;){const m=this.configs.shift();Object.entries(m.options).forEach(([L,N])=>{const X=n().get(m,`options.${L}`),V=n().get(this,`props.currentGameConfig.options.${L}`);n().isEqual(V,X)||n().set(this,`props.currentGameConfig.options.${L}`,X)}),this.props.components.forEach((L,N)=>{L.options=this.props.currentGameConfig.options});let S=0,b=0,O=[],B=[];Object.entries(m.components).forEach(([L,N])=>{const X=n().get(m,`components.${L}`),V=n().get(this,`props.currentGameConfig.components.${L}`);if(!n().isEqual(X,V)){Object.entries(X).forEach(([Q,me])=>{n().set(this,`props.currentGameConfig.components.${L}.${Q}`,me)});const $=this.props.components.get(L);O.push([$,X]),b++}}),O.forEach(([L,N])=>{L.update(N)})}}addVungleSupport(){window.addEventListener("ad-event-pause",()=>{if(this.isGameSceneStarted){const m=this.getScene("gameScene");m&&m.scene.pause()}}),window.addEventListener("ad-event-resume",()=>{if(this.isGameSceneStarted){const m=this.getScene("gameScene");m&&m.scene.resume("gameScene")}})}addDapiSupport(){console.debug("Dapi is available and used"),dapi.isReady()?(dapi.removeEventListener("ready",this.dapiReadyHandler),this.dapiReadyHandler()):(console.debug("dapi is not ready"),dapi.addEventListener("ready",()=>{this.dapiReadyHandler()}))}updateDapiSize(){if(typeof dapi!="undefined"&&dapi.isReady()&&n().isFunction(dapi.getScreenSize))this.dapiWidth=dapi.getScreenSize().width,this.dapiHeight=dapi.getScreenSize().height;else throw{dapi,dapiReady:dapi.isReady(),dapiGetScreenSize:n().isFunction(dapi.getScreenSize)}}dapiReadyHandler(){console.debug("dapi is ready"),this.isDapiReady=!0,dapi.addEventListener("adResized",()=>{this.updateDapiSize(),this.onResizeHandler()}),dapi.addEventListener("viewableChange",m=>{if(console.debug("dapi viewable status"+m.isViewable),this.isDapiViewable=m.isViewable,this.isGameSceneStarted){const S=this.getScene("gameScene");m.isViewable?S.scene.resume("gameScene"):S.scene.pause("gameScene")}else m.isViewable&&this.startPhaserGame()}),dapi.addEventListener("audioVolumeChange",()=>{const m=dapi.getAudioVolume()}),dapi.removeEventListener("ready",this.dapiReadyHandler),dapi.isViewable()&&(console.debug("dapi isViewable status: "+dapi.isViewable()),this.isDapiViewable=!0,this.startPhaserGame())}get isMraidAvailable(){return typeof mraid!="undefined"}get isMraidViewable(){return mraid.isViewable()}addMraidSupport(){console.log("mraid is enabled"),mraid.addEventListener("error",console.error),mraid.getState()==="loading"?mraid.addEventListener("ready",()=>{this.mraidReadyHandler()}):this.mraidReadyHandler()}mraidReadyHandler(){console.log("mraid ready handler"),this.isMraidReady=!0,mraid.addEventListener("sizeChange",m=>{this.onResizeHandler()}),mraid.addEventListener("viewableChange",m=>{if(console.log("mraid viewable changed"),console.log("viewable status: "+m),this.isGameSceneStarted){const S=this.getScene("gameScene");m?(console.log("mraid is viewable, resuming game"),S.scene.isPaused("gameScene")&&(S.sound.resumeAll(),this.phaserGame.scene.resume("gameScene"))):(console.log("mraid is not viewable, pausing the game"),S.scene.isPaused("gameScene")||(S.sound.stopAll(),this.phaserGame.scene.pause("gameScene")))}else m&&(console.log("mraid became viewable and starting the phaser game"),this.startPhaserGame())}),mraid.isViewable()&&(console.log("mraid is starting game"),this.startPhaserGame())}setGameSize(){const m=this.getScene("gameScene"),S=this.getScreenWidth(),b=this.getScreenHeight();this.phaserGame.scale.resize(document.documentElement.clientWidth,document.documentElement.clientHeight),n().isNil(m)&&console.warn("game scene is nil"),n().isNil(m)||m.scale.resize(S,b),this.transformCanvas(this.phaserGame)}onResizeHandler(){this.setGameSize();const m=this.getScene("gameScene");!n().isNil(m)&&(m.scene.isActive("gameScene")||m.scene.isPaused("gameScene"))&&this.isGamePlayable&&this.renderComponents(this.props.components,!0)}renderComponents(m,S=!1){S?m.forEach(b=>{n().isNil(b.parent)&&(console.debug("rendering parent component",b.componentId),this.renderComponent(b))}):Object.entries(m).forEach(([b,O])=>{this.renderComponent(O)}),this.isGamePlayable||(console.debug("game is playable"),this.isGamePlayable=!0,this.setTimeElapsedEverySecond())}renderComponent(m){!n().has(m,"scene")||(m.scene.game.canvas=this.phaserGame.canvas,console.debug("this component is rendering",m),m.render(),this.props.components.forEach(S=>{!n().isNil(S.parentId)&&S.parentId===m.componentId&&this.renderComponent(S)}))}getScreenWidth(){if(n().get(this,"adNetworkSetting.useDapi",!1)===!0&&dapi.isReady())return Number.isInteger(this.dapiWidth)||this.updateDapiSize(),this.dapiWidth*window.devicePixelRatio;if(this.props.adNetworkSetting.name==="facebook")return window.innerWidth*window.devicePixelRatio;{let S=document.documentElement.clientWidth*window.devicePixelRatio;if(this.props.adNetworkSetting.name=="famobi"){const b=window.famobi.getOffsets();return S-b.left-b.right}else return S}}getScreenHeight(){if(n().get(this,"adNetworkSetting.useDapi",!1)===!0)return!Number.isInteger(this.dapiHeight)&&dapi.isReady()&&this.updateDapiSize(),this.dapiHeight*window.devicePixelRatio;if(this.props.adNetworkSetting.name==="facebook")return window.innerHeight*window.devicePixelRatio;{let S=document.documentElement.clientHeight*window.devicePixelRatio;if(this.props.adNetworkSetting.name=="famobi"){const b=window.famobi.getOffsets();return S-b.top-b.bottom}return S}}transformCanvas(m){const S=Number.parseFloat(1/window.devicePixelRatio).toPrecision(4);m.canvas.style.display="inline-block",m.canvas.style.transformOrigin="top left";const b="scale("+S+")";let O="transform-origin: top left; ";if(O+="transform:"+b+"; ",O+="-webkit-transform:"+b+"; ",O+="-moz-transform:"+b+"; ",O+="-o-transform:"+b+"; ",O+="-ms-transform:"+b+"; ",O+="margin: "+0+"; ",O+="padding: "+0+"; ",O+="position: fixed; ",this.props.adNetworkSetting.name=="famobi"){const B=window.famobi.getOffsets();O+="top: "+B.top+"px; ",O+="left: "+B.left+"px; ",O+="right: "+B.right+"px; ",O+="bottom: "+B.bottom+"px; "}else O+="top: "+0+"; ",O+="left: "+0+"; ";m.canvas.setAttribute("style",O)}startPhaserGame(){n().isNil(this.phaserGame)&&(n().has(this,"props.specificPhaserConfig")?this.phaserGame=new(Zt()).Game(this.props.specificPhaserConfig):this.phaserGame=new(Zt()).Game(this.phaserConfig),this.phaserGame.scene.add("hudScene",this.hudSceneExtended,!0),console.info("Phaser game started"))}setTimeElapsedEverySecond(){setInterval(()=>{this.isGamePlayable&&(this.getScene("gameScene").scene.isPaused("gameScene")||this.timeElapsedSeconds++,this.props.options.isEndCardEnabled&&this.props.options.endCardSeconds!==0&&this.timeElapsedSeconds===this.props.options.endCardSeconds&&this.playableEnd())},1e3)}setTimeElapsedEverySecondAfterEndCardShown(){!n().has(this,"props.options.endCardAutoForwardToStoreSeconds")||setInterval(()=>{this.timeElapsedSecondsAfterEndCardShown++,this.props.options.isEndCardEnabled&&this.props.options.endCardAutoForwardToStoreSeconds>0&&this.isEndCardShown&&this.props.options.endCardAutoForwardToStoreSeconds===this.timeElapsedSecondsAfterEndCardShown&&this.openStore()},1e3)}playableEnd(){}getTimeElapsedSeconds(){return this.timeElapsedSeconds}getScene(m){const S=this.phaserGame.scene.getScene(m);return S||(console.log("scene is not ready."),null)}isDapiAvailable(){return typeof dapi!="undefined"}}class o{constructor(m){this.log=[],this.isVisible=!0,this.gameObjectsMap=new Map,this.soundsMap=new Map,this.texturesToLoad=new Set,this.spriteSheetsToLoad=new Set,this.atlasesToLoad=new Set,this.bitmapFontsToLoad=new Set,this.selectedSounds=[],this.soundState=new Map,this.isTextureLoadComplete=!0,this.isSoundLoadComplete=!0,this.isSpriteSheetsLoadComplete=!0,this.isGameStarted=!1,this.update(m),this.drawReferenceRectangle=!1}requireParameters(m,S){let b=new Set;if(S.forEach(O=>{_.has(m,O)||b.add(O)}),b.size>0)throw{message:"missing parameters",object:JSON.stringify(Array.from(b))}}set Scene(m){this.scene=m}set HudScene(m){this.hudScene=m}set IsVisible(m){this.isVisible=m,_.isNil(this.scene)||this.scene.components.forEach(S=>{S.parentId===this.componentId&&(S.IsVisible=m,S.render())})}get LeftAbsoluteX(){let m;if(_.isNil(this.parent)?m=this.RelativeX*this.BaseWidth-.5*this.AbsoluteWidth+this.BaseLeftX:m=this.parent.LeftAbsoluteX+this.RelativeX*this.parent.AbsoluteWidth-.5*this.AbsoluteWidth,Number.isNaN(m))throw"value is NaN";return m}get TopAbsoluteY(){let m;if(_.isNil(this.parent)?m=this.RelativeY*this.scene.game.canvas.height-.5*this.AbsoluteHeight:m=this.parent.TopAbsoluteY+this.RelativeY*this.parent.AbsoluteHeight-.5*this.AbsoluteHeight,Number.isNaN(m))throw"value is NaN";return m}get AspectRatio(){return Math.min(this.scene.game.canvas.width,this.scene.game.canvas.height)/Math.max(this.scene.game.canvas.width,this.scene.game.canvas.height)}get BaseWidth(){let m;return _.has(this,"options.shouldForcePortraitMode")&&this.options.shouldForcePortraitMode&&this.scene.game.canvas.width>=this.scene.game.canvas.height?m=this.scene.game.canvas.height*(this.scene.game.canvas.height/this.scene.game.canvas.width):m=this.scene.game.canvas.width,m}get BaseLeftX(){return(this.scene.game.canvas.width-this.BaseWidth)*.5}get AbsoluteWidth(){let m;if(_.isNil(this.parent)?m=this.RelativeWidth*this.BaseWidth:m=this.RelativeWidth*this.parent.AbsoluteWidth,Number.isNaN(m))throw"value is NaN";return m}get AbsoluteHeight(){let m;if(_.isNil(this.parent)?m=this.RelativeHeight*this.scene.game.canvas.height:m=this.RelativeHeight*this.parent.AbsoluteHeight,Number.isNaN(m))throw"value is NaN";return m}get CenterAbsoluteX(){let m;if(_.isNil(this.parent)?m=this.RelativeX*this.BaseWidth:m=this.parent.LeftAbsoluteX+this.RelativeX*this.parent.AbsoluteWidth,Number.isNaN(m))throw"value is NaN";return m}get CenterAbsoluteY(){let m;if(_.isNil(this.parent)?m=this.RelativeY*this.scene.game.canvas.height:m=this.parent.TopAbsoluteY+this.RelativeY*this.parent.AbsoluteHeight,Number.isNaN(m))throw"value is NaN";return m}get RelativeX(){const m=_.get(this,`position.${this.scene.getOrientation()}.x`);if(_.isNil(m))throw"could not get relative x";return m}get RelativeY(){const m=_.get(this,`position.${this.scene.getOrientation()}.y`);if(_.isNil(m))throw"could not get relative y";return m}get RelativeWidth(){const m=_.get(this,`size.${this.scene.getOrientation()}.width`);if(_.isNil(m))throw"could not get relative width";return m}get RelativeHeight(){const m=_.get(this,`size.${this.scene.getOrientation()}.height`);if(_.isNil(m))throw"could not get relative height";return m}textureLoadComplete(){if(this.isTextureLoadComplete=!0,_.isNil(this.componentId))throw{message:"this component's componentId is nil",component:this};console.debug(`${this.componentId} : All textures loaded on component`),_.hasIn(this,"onTexturesLoaded")&&this.onTexturesLoaded({componentId:this.componentId})}textureLoadHandler(m){this.scene.texturesSentToTextureManager.delete(m),this.texturesToLoad.delete(m);const S=Array.from(this.texturesToLoad).every(b=>!this.scene.texturesSentToTextureManager.has(b));this.texturesToLoad.size===0&&S&&this.textureLoadComplete()}spriteSheetLoadHandler(m){this.scene.spriteSheetsSentToTextureManager.delete(m),this.spriteSheetsToLoad.delete(m);const S=Array.from(this.spriteSheetsToLoad).every(b=>!this.scene.spriteSheetsSentToTextureManager.has(b));this.spriteSheetsToLoad.size===0&&S&&this.spriteSheetsLoadComplete()}loadTextures(){this.isTextureLoadComplete=!1;let m;if(_.has(this,"selectedImages"))m=this.selectedImages;else throw{message:"this component has no selectedImages",component:this};if(Object.entries(m).every(([b,O])=>!O.some(B=>!this.scene.textures.exists(B.key)))){this.scene.componentIsTextureLoaded.set(this.componentId,!0),this.textureLoadComplete();return}Object.entries(m).forEach(([b,O])=>{O.forEach(B=>{if(_.has(B,"data"))this.texturesToLoad.add(B.key);else if(_.has(B,"file")){const N=B.file.split(".")[0];this.texturesToLoad.add(N)}else if(_.has(B,"fileTiktok")){const N=B.fileTiktok.split(".")[0];this.texturesToLoad.add(N)}})}),Object.entries(m).forEach(([b,O])=>{O.forEach(B=>{if(_.has(B,"data"))!this.scene.texturesSentToTextureManager.has(B.key)&&!this.scene.textures.exists(B.key)?(this.scene.texturesSentToTextureManager.add(B.key),this.scene.textures.addBase64(B.key,B.data),this.scene.textures.on("onerror",L=>{throw{message:"this texture cannot be loaded",textureKey:L}}),this.scene.textures.on("onload",(L,N)=>{B.key===L&&this.textureLoadHandler(B.key)})):this.scene.texturesSentToTextureManager.has(B.key)&&!this.scene.textures.exists(B.key)?this.scene.textures.on("onload",(L,N)=>{B.key===L&&this.textureLoadHandler(B.key)}):this.textureLoadHandler(B.key);else if(_.has(B,"file")){const N=B.file.split(".")[0];B.key=N,!this.scene.texturesSentToTextureManager.has(N)&&!this.scene.textures.exists(N)?(this.scene.texturesSentToTextureManager.add(N),this.scene.load.image(N,"./images/"+B.file),this.scene.load.on("loaderror",X=>{const V=X.src.split("/"),$=V[V.length-1];B.file===$&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedImages."+b,B.file),console.warn({message:"this file cannot be loaded",file:X}))}),this.scene.load.on("filecomplete-image-"+N,(X,V,$)=>{this.textureLoadHandler(N)})):this.scene.textures.exists(N)?this.textureLoadHandler(N):this.scene.load.on("filecomplete-image-"+N,(X,V,$)=>{this.textureLoadHandler(N)}),this.scene.load.start()}else if(_.has(B,"fileTiktok")){const N=B.fileTiktok.split(".")[0];B.key=N,!this.scene.texturesSentToTextureManager.has(N)&&!this.scene.textures.exists(N)?(this.scene.texturesSentToTextureManager.add(N),this.scene.load.image(N,"./assets/"+B.fileTiktok),this.scene.load.on("loaderror",X=>{const V=X.src.split("/"),$=V[V.length-1];B.fileTiktok===$&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedImages."+b,B.fileTiktok),console.warn({message:"this file cannot be loaded",file:X}))}),this.scene.load.on("filecomplete-image-"+N,(X,V,$)=>{this.textureLoadHandler(N)})):this.scene.textures.exists(N)?this.textureLoadHandler(N):this.scene.load.on("filecomplete-image-"+N,(X,V,$)=>{this.textureLoadHandler(N)}),this.scene.load.start()}else throw{message:"this texture object does not have data or file property",object:this}})})}loadSpriteSheets(){this.isSpriteSheetsLoadComplete=!1;let m;if(_.has(this,"selectedSpriteSheets"))m=this.selectedSpriteSheets;else throw{message:"this component has no selectedSpriteSheets",component:this};if(Object.entries(m).every(([b,O])=>this.scene.textures.exists(O.key)))return this.spriteSheetsLoadComplete();Object.entries(m).forEach(([b,O])=>{O.forEach(B=>{_.has(B,"data")?this.spriteSheetsToLoad.add(B.key):_.has(B,"file")})}),Object.entries(m).forEach(([b,O])=>{O.forEach(B=>{if(_.has(B,"data"))if(!this.scene.spriteSheetsSentToTextureManager.has(B.key)&&!this.scene.textures.exists(B.key)){this.scene.spriteSheetsSentToTextureManager.add(B.key);let L=new Image;L.onload=()=>{this.scene.textures.addSpriteSheet(B.key,L,{frameWidth:B.frameWidth,frameHeight:B.frameHeight})},L.src=B.data,this.scene.textures.on("onerror",N=>{throw{message:"this spriteSheet cannot be loaded",spriteSheetKey:N}}),this.scene.textures.on("addtexture",(N,X)=>{B.key===N&&this.spriteSheetLoadHandler(B.key)})}else this.scene.spriteSheetsSentToTextureManager.has(B.key)&&!this.scene.textures.exists(B.key)?this.scene.textures.on("addtexture",(L,N)=>{B.key===L&&this.spriteSheetLoadHandler(B.key)}):this.spriteSheetLoadHandler(B.key);else if(!_.has(B,"file"))throw{message:"this texture object does not have data or file property",object:this}})})}spriteSheetsLoadComplete(){this.isSpriteSheetsLoadComplete=!0}loadAtlases(){this.isAtlasesLoadComplete=!1;let m;if(_.has(this,"selectedAtlases"))m=this.selectedAtlases;else throw{message:"this component has no selectedAtlases",component:this};let S=!0;const b=Object.values(m);for(let L=0;L<b.length&&S!==!1;L++){const N=_.filter(b[L],X=>X.variant==="image");for(let X=0;X<N.length;X++){if(_.has(N[X],"file")){const $=N[X].file.split(".")[0];N[X].key=$}else if(_.has(N[X],"fileTiktok")){const $=N[X].fileTiktok.split(".")[0];N[X].key=$}if(this.scene.textures.exists(N[X].key))S=!0;else{S=!1;break}}}if(S)return this.atlasesLoadComplete();Object.entries(m).forEach(([L,N])=>{const X=_.filter(N,V=>V.variant==="image");for(let V=0;V<X.length;V++)if(_.has(X[V],"data"))this.atlasesToLoad.add(X[V].key);else if(_.has(X[V],"file")){const Q=X[V].file.split(".")[0];X[V].key=Q,this.atlasesToLoad.add(Q)}else if(_.has(X[V],"fileTiktok")){const Q=X[V].fileTiktok.split(".")[0];X[V].key=Q,this.atlasesToLoad.add(Q)}});let O=!1;Object.entries(m).forEach(([L,N])=>{const X=_.filter(N,$=>$.variant==="image"),V=_.filter(N,$=>$.variant==="JSON");for(let $=0;$<X.length;$++)if(_.has(X[$],"data"))if(!this.scene.atlasesSentToTextureManager.has(X[$].key)&&!this.scene.textures.exists(X[$].key)){this.scene.atlasesSentToTextureManager.add(X[$].key);let Q=new Image;Q.onload=()=>{this.scene.textures.addAtlas(X[$].key,Q,V[$].JSON)},Q.src=X[$].data,this.scene.textures.on("addtexture",(me,se)=>{X[$].key===me&&this.atlasLoadHandler(X[$].key)})}else this.scene.atlasesSentToTextureManager.has(X[$].key)&&!this.scene.textures.exists(X[$].key)?this.scene.textures.on("addtexture",(Q,me)=>{X[$].key===Q&&this.atlasLoadHandler(X[$].key)}):this.scene.textures.on("addtexture",(Q,me)=>{X[$].key===Q&&this.atlasLoadHandler(X[$].key)});else if(_.has(X[$],"file"))if(O=!0,!this.scene.atlasesSentToTextureManager.has(X[$].key)&&!this.scene.textures.exists(X[$].key)){if(this.scene.atlasesSentToTextureManager.add(X[$].key),!_.isNil(X[$])&&!_.isNil(V[$]))this.scene.load.atlas({key:X[$].key,textureURL:"./atlases/"+X[$].file,atlasURL:"./atlases/"+V[$].file});else throw{message:"this animation set does not have image or json file",key:X[$].key};this.scene.load.on("loaderror",Q=>{const me=Q.src.split("/"),se=me[me.length-1];X[$].file===se&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedAtlases."+L,X[$].file),console.warn({message:"this file cannot be loaded",file:Q})),V[$].file===se&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedAtlases."+L,V[$].file),console.warn({message:"this file cannot be loaded",file:Q}))}),this.scene.load.on("filecomplete",Q=>{Q===X[$].key&&this.atlasLoadHandler(X[$].key)})}else this.scene.textures.exists(X[$].key)?this.atlasLoadHandler(X[$].key):this.scene.load.on("filecomplete",Q=>{Q===X[$].key&&this.atlasLoadHandler(X[$].key)});else if(_.has(X[$],"fileTiktok"))if(O=!0,!this.scene.atlasesSentToTextureManager.has(X[$].key)&&!this.scene.textures.exists(X[$].key)){if(this.scene.atlasesSentToTextureManager.add(X[$].key),!_.isNil(X[$])&&!_.isNil(V[$]))this.scene.load.atlas({key:X[$].key,textureURL:"./assets/"+X[$].fileTiktok,atlasURL:"./assets/"+V[$].fileTiktok});else throw{message:"this animation set does not have image or json file",key:X[$].key};this.scene.load.on("loaderror",Q=>{const me=Q.src.split("/"),se=me[me.length-1];X[$].fileTiktok===se&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedAtlases."+L,X[$].fileTiktok),console.warn({message:"this file cannot be loaded",file:Q})),V[$].fileTiktok===se&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedAtlases."+L,V[$].fileTiktok),console.warn({message:"this file cannot be loaded",file:Q}))}),this.scene.load.on("filecomplete",Q=>{Q===X[$].key&&this.atlasLoadHandler(X[$].key)})}else this.scene.textures.exists(X[$].key)?this.atlasLoadHandler(X[$].key):this.scene.load.on("filecomplete",Q=>{Q===X[$].key&&this.atlasLoadHandler(X[$].key)});else throw{message:"this atlas object does not have image or JSON property",object:this}});const B=Array.from(this.atlasesToLoad).every(L=>!this.scene.atlasesSentToTextureManager.has(L));this.atlasesToLoad.size===0&&B&&this.atlasesLoadComplete(),O&&this.scene.load.start()}atlasLoadHandler(m){this.scene.atlasesSentToTextureManager.delete(m),this.atlasesToLoad.delete(m);const S=Array.from(this.atlasesToLoad).every(b=>!this.scene.atlasesSentToTextureManager.has(b));this.atlasesToLoad.size===0&&S&&this.atlasesLoadComplete()}atlasesLoadComplete(){this.isAtlasesLoadComplete=!0}loadSounds(){if(this.scene.adNetworkSetting.isSoundSupported===!1){this.soundLoadComplete();return}if(this.isSoundLoadComplete=!1,Object.entries(this.selectedSounds).forEach(([b,O])=>{O.forEach(B=>{if(_.has(B,"file")){const N=B.file.split(".")[0];B.key=N,B.gameObjectName=b}else if(_.has(B,"fileTiktok")){const N=B.fileTiktok.split(".")[0];B.key=N,B.gameObjectName=b}})}),Object.entries(this.selectedSounds).every(([b,O])=>this.soundState.get(O[0].key)==="loaded"))return this.soundLoadComplete();const S=Object.values(this.selectedSounds).map(b=>b[0]);S.forEach((b,O,B)=>{this.soundState.get(b.key)==="loaded"?(this.scene.soundsSentToSoundManager.delete(b.key),S.every((N,X,V)=>this.soundState.get(N.key)==="loaded")&&this.soundLoadComplete()):this.soundState.get(b.key)!=="loading"&&(this.soundState.set(b.key,"loading"),_.has(b,"data")?!this.scene.soundsSentToSoundManager.has(b.key)&&_.isNil(this.scene.sound.get(b.key))?(this.scene.soundsSentToSoundManager.add(b.key),this.scene.sound.decodeAudio(b.key,b.data),this.scene.sound.on("decoded",L=>{L===b.key&&(this.soundState.set(L,"loaded"),this.scene.soundsSentToSoundManager.delete(L),S.every((X,V,$)=>this.soundState.get(X.key)==="loaded")&&this.soundLoadComplete())})):this.scene.soundsSentToSoundManager.has(b.key)&&this.scene.sound.on("decoded",L=>{L===b.key&&(this.soundState.set(L,"loaded"),this.scene.soundsSentToSoundManager.delete(L),S.every((X,V,$)=>this.soundState.get(X.key)==="loaded")&&this.soundLoadComplete())}):_.has(b,"file")?!this.scene.soundsSentToSoundManager.has(b.key)&&_.isNil(this.scene.sound.get(b.key))?(this.scene.soundsSentToSoundManager.add(b.key),this.scene.load.audio(b.key,"./sounds/"+b.file),this.scene.load.on("loaderror",L=>{const N=L.src.split("/"),X=N[N.length-1];b.file===X&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedSounds."+b.gameObjectName,b.file),console.warn({message:"this file cannot be loaded",file:L}))}),this.scene.load.on("filecomplete-audio-"+b.key,()=>{this.soundState.set(b.key,"loaded"),this.scene.soundsSentToSoundManager.delete(b.key),S.every((N,X,V)=>this.soundState.get(N.key)==="loaded")&&this.soundLoadComplete()}),this.scene.load.start()):this.scene.soundsSentToSoundManager.has(b.key)&&this.scene.load.on("filecomplete-audio-"+b.key,()=>{this.soundState.set(b.key,"loaded"),this.scene.soundsSentToSoundManager.delete(b.key),S.every((N,X,V)=>this.soundState.get(N.key)==="loaded")&&this.soundLoadComplete()}):_.has(b,"fileTiktok")&&(!this.scene.soundsSentToSoundManager.has(b.key)&&_.isNil(this.scene.sound.get(b.key))?(this.scene.soundsSentToSoundManager.add(b.key),this.scene.load.audio(b.key,"./assets/"+b.fileTiktok),this.scene.load.on("loaderror",L=>{const N=L.src.split("/"),X=N[N.length-1];b.fileTiktok===X&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedSounds."+b.gameObjectName,b.fileTiktok),console.warn({message:"this file cannot be loaded",file:L}))}),this.scene.load.on("filecomplete-audio-"+b.key,()=>{this.soundState.set(b.key,"loaded"),this.scene.soundsSentToSoundManager.delete(b.key),S.every((N,X,V)=>this.soundState.get(N.key)==="loaded")&&this.soundLoadComplete()}),this.scene.load.start()):this.scene.soundsSentToSoundManager.has(b.key)&&this.scene.load.on("filecomplete-audio-"+b.key,()=>{this.soundState.set(b.key,"loaded"),this.scene.soundsSentToSoundManager.delete(b.key),S.every((N,X,V)=>this.soundState.get(N.key)==="loaded")&&this.soundLoadComplete()})))})}soundLoadComplete(){this.isSoundLoadComplete=!0}loadBitmapFonts(){this.isBitmapFontsLoadComplete=!1;let m;if(_.has(this,"selectedBitmapFonts"))m=this.selectedBitmapFonts;else throw{message:"this component has no selectedBitmapFonts",component:this};let S=!0;const b=Object.values(m);for(let B=0;B<b.length&&S!==!1;B++){const L=_.filter(b[B],N=>N.variant==="image");for(let N=0;N<L.length;N++){if(_.has(L[N],"file")){const V=L[N].file.split(".")[0];L[N].key=V}if(this.scene.textures.exists(L[N].key))S=!0;else{S=!1;break}}}if(S)return this.bitmapFontsLoadComplete();Object.entries(m).forEach(([B,L])=>{const N=_.filter(L,X=>X.variant==="image");for(let X=0;X<N.length;X++)if(_.has(N[X],"data"))this.bitmapFontsToLoad.add(N[X].key);else if(_.has(N[X],"file")){const $=N[X].file.split(".")[0];N[X].key=$,this.bitmapFontsToLoad.add($)}else if(_.has(N[X],"fileTiktok")){const $=N[X].fileTiktok.split(".")[0];N[X].key=$,this.bitmapFontsToLoad.add($)}});let O=!1;Object.entries(m).forEach(([B,L])=>{const N=_.filter(L,V=>V.variant==="image"),X=_.filter(L,V=>V.variant==="XML");for(let V=0;V<N.length;V++)if(_.has(N[V],"data"))if(!this.scene.bitmapFontsSentToTextureManager.has(N[V].key)&&!this.scene.textures.exists(N[V].key)){this.scene.bitmapFontsSentToTextureManager.add(N[V].key);let $=this.scene.textures.addBase64(N[V].key,N[V].data),Q=Phaser.DOM.ParseXML(atob(X[V].XML.split("base64,")[1])),me=Q.getElementsByTagName("kernings")[0];Q.documentElement.removeChild(me);let se=Phaser.GameObjects.BitmapText.ParseXMLBitmapFont(Q,this.scene.textures.getFrame(N[V].key),0,0,$);this.scene.load.cacheManager.bitmapFont.add(N[V].key,{data:se,texture:N[V].key,frame:null}),this.scene.textures.on("addtexture",(q,le)=>{N[V].key===q&&this.bitmapFontLoadHandler(N[V].key)})}else this.scene.bitmapFontsSentToTextureManager.has(N[V].key)&&!this.scene.textures.exists(N[V].key)?this.scene.textures.on("addtexture",($,Q)=>{N[V].key===$&&this.bitmapFontLoadHandler(N[V].key)}):this.scene.textures.on("addtexture",($,Q)=>{N[V].key===$&&this.bitmapFontLoadHandler(N[V].key)});else if(_.has(N[V],"file"))if(O=!0,!this.scene.bitmapFontsSentToTextureManager.has(N[V].key)&&!this.scene.textures.exists(N[V].key)){if(this.scene.bitmapFontsSentToTextureManager.add(N[V].key),!_.isNil(N[V])&&!_.isNil(X[V]))this.scene.load.bitmapFont(N[V].key,"./bitmapFonts/"+N[V].file,"./bitmapFonts/"+X[V].file);else throw{message:"this animation set does not have image or json file",key:N[V].key};this.scene.load.on("loaderror",$=>{const Q=$.src.split("/"),me=Q[Q.length-1];N[V].file===me&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedBitmapFonts."+B,N[V].file),console.warn({message:"this file cannot be loaded",file:$})),X[V].file===me&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedBitmapFonts."+B,X[V].file),console.warn({message:"this file cannot be loaded",file:$}))}),this.scene.load.on("complete",()=>{this.bitmapFontLoadHandler(N[V].key)})}else this.scene.textures.exists(N[V].key)?this.bitmapFontLoadHandler(N[V].key):this.scene.load.on("complete",()=>{this.bitmapFontLoadHandler(N[V].key)});else if(_.has(N[V],"fileTiktok"))if(O=!0,!this.scene.bitmapFontsSentToTextureManager.has(N[V].key)&&!this.scene.textures.exists(N[V].key)){if(this.scene.bitmapFontsSentToTextureManager.add(N[V].key),!_.isNil(N[V])&&!_.isNil(X[V]))this.scene.load.bitmapFont(N[V].key,"./assets/"+N[V].fileTiktok,"./assets/"+X[V].fileTiktok);else throw{message:"this animation set does not have image or json file",key:N[V].key};this.scene.load.on("loaderror",$=>{const Q=$.src.split("/"),me=Q[Q.length-1];N[V].fileTiktok===me&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedBitmapFonts."+B,N[V].fileTiktok),console.warn({message:"this file cannot be loaded",file:$})),X[V].file===me&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedBitmapFonts."+B,X[V].fileTiktok),console.warn({message:"this file cannot be loaded",file:$}))}),this.scene.load.on("complete",()=>{this.bitmapFontLoadHandler(N[V].key)})}else this.scene.textures.exists(N[V].key)?this.bitmapFontLoadHandler(N[V].key):this.scene.load.on("complete",()=>{this.bitmapFontLoadHandler(N[V].key)});else throw{message:"this bitmapFont object does not have image or xml property",object:this}}),O&&this.scene.load.start()}bitmapFontLoadHandler(m){this.scene.bitmapFontsSentToTextureManager.delete(m),this.bitmapFontsToLoad.delete(m);const S=Array.from(this.bitmapFontsToLoad).every(b=>!this.scene.bitmapFontsSentToTextureManager.has(b));this.bitmapFontsToLoad.size===0&&S&&this.bitmapFontsLoadComplete()}bitmapFontsLoadComplete(){this.isBitmapFontsLoadComplete=!0}renderReferenceRectangle(m=65280){let S;_.isNil(this.gameObjectsMap.get("referenceRectangle"))?(S=this.scene.add.graphics(),this.gameObjectsMap.set("referenceRectangle",S)):(S=this.gameObjectsMap.get("referenceRectangle"),S.clear()),S.lineStyle(5,m,1),S.strokeRect(this.LeftAbsoluteX,this.TopAbsoluteY,this.AbsoluteWidth,this.AbsoluteHeight)}render(){console.debug(`${this.componentId} : is rendering`)}onReady(){let m=_.get(this,"scene","None");console.debug(`${this.componentId} : is ready scene: `,this.scene)}load(){if(!_.has(this,"scene"))throw{message:"component has no scene",component:this};if(_.has(this,"parentId")){if(!_.hasIn(this,"scene.components"))throw{message:"scene doesn't have components",scene:this.scene};this.parent=this.scene.components.get(this.parentId)}}update(m){if(Object.entries(m).forEach(([S,b])=>{_.set(this,S,b),this.log.push({key:S,value:b,timestamp:new Date})}),_.has(m,"textures")){let S=new Set;m.textures.forEach(b=>{S.add(b.key)}),this.texturesToLoad=S}}getGameObjectByName(m){const S=this.scene.children.getByName(m);return _.isNil(S)?null:S}}class i extends o{constructor(m){super(m);super.update(m),this.isUpdateEventListenerAdded=!1,this.isWorldBoundEventAdded=!1}getWidth(){return this.width}getHeight(){return this.height}load(){super.load(),this.loadTextures()}loadTextures(){super.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&_.hasIn(this,"onReady")&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){super.render(),this.scene.physics.world.bounds.setTo(-this.scene.game.canvas.width*.25,0,this.scene.game.canvas.width*1.5,this.scene.game.canvas.height*1.1),this.scene.physics.world.fixedStep=!1,this.isWorldBoundEventAdded||(this.isWorldBoundEventAdded=!0,this.scene.physics.world.on("worldbounds",B=>{this.onWorldBoundsCallback(B)}));let m=this.gameObjectsMap.get("tileSprite"),S=0;const b=this.scene.game.canvas.width*.5,O=this.scene.game.canvas.height*.5;_.isNil(m)?(m=this.scene.add.tileSprite(b,O,0,0,this.selectedImages.background1[0].key).setDepth(this.depth),this.gameObjectsMap.set("tileSprite",m)):m.texture.key!==this.selectedImages.background1[0].key&&m.setTexture(this.selectedImages.background1[0].key),this.scene.getOrientation()==="landscape"?(m.setScale(this.scene.game.canvas.width/m.width),m.displayWidth=this.scene.game.canvas.width*1.01,m.displayHeight<this.scene.game.canvas.height&&m.setScale(this.scene.game.canvas.height/m.height)):this.scene.getOrientation()==="portrait"?(m.setScale(this.scene.game.canvas.height/m.height),m.displayHeight=this.scene.game.canvas.height*1.01,m.displayWidth<this.scene.game.canvas.width&&m.setScale(this.scene.game.canvas.width/m.width)):(m.setScale(this.scene.getShortEdge()/m.width),m.displayHeight=this.scene.game.canvas.height*1.01,m.displayWidth=this.scene.game.canvas.width*1.01),m.x!==b&&(m.x=b),m.y!==O&&(m.y=O),this.isUpdateEventListenerAdded||(this.isUpdateEventListenerAdded=!0,this.scene.events.on("update",(B,L)=>{this.scene.physics.world.step(L),m.tilePositionY=S*300,S-=.01})),_.has(this,"onRender")&&this.onRender({componentId:this.componentId})}getBackgroundImagesTypeAndColors(){return[{type:1,color:"0xFFFFFF"},{type:2,color:"0xFFFFFF"},{type:3,color:"0xFFFFFF"},{type:4,color:"0xFFFFFF"},{type:1,color:"0x0EC9BA"},{type:2,color:"0xF32828"},{type:3,color:"0xE7902E"},{type:4,color:"0x0B4667"},{type:1,color:"0xEEC407"},{type:2,color:"0xEEC407"},{type:3,color:"0xA93239"},{type:4,color:"0xEEC407"},{type:1,color:"0x1EA256"},{type:2,color:"0xE68C12"},{type:3,color:"0x4D2DFF"},{type:4,color:"0x4D2DFF"}]}}class s extends o{constructor(m){super(m)}load(){super.load(),this.onReady()}get AbsoluteWidth(){if(this.canvasSize==="fill")return this.BaseWidth}get AbsoluteHeight(){let m=this.scene.game.canvas.height;if(this.options.isBannerEnabled){const S=this.scene.components.get("banner1");return m-=this.scene.game.canvas.height*_.get(S,`size.${S.scene.getOrientation()}.height`)}if(this.canvasSize==="fill")return m}getX(){return this.getWidth()*.5}getY(){return this.getHeight()*.5}get BaseWidth(){let m;return _.has(this,"options.shouldForcePortraitMode")&&this.options.shouldForcePortraitMode&&this.scene.game.canvas.width>=this.scene.game.canvas.height?m=this.scene.game.canvas.height*(this.scene.game.canvas.height/this.scene.game.canvas.width):m=this.scene.game.canvas.width,m}get BaseLeftX(){return(this.scene.game.canvas.width-this.BaseWidth)*.5}get LeftAbsoluteX(){return this.BaseLeftX}get TopAbsoluteY(){if(this.options.isBannerEnabled){const m=this.scene.components.get("banner1");if(m.dock==="top")return this.scene.game.canvas.height-this.AbsoluteHeight;if(m.dock==="bottom")return 0}else return 0}render(){_.has(this,"onRender")&&this.onRender({componentId:this.componentId})}}class a extends o{constructor(m){super(m);this.tweens=[],this.handPositionStart={x:0,y:0},this.isDelayedOnce=!1}textureLoadComplete(){super.textureLoadComplete(),_.has(this,"onReady")&&this.onReady()}load(){super.load(),super.loadTextures()}killTweens(){this.tweens.forEach((m,S,b)=>{b.pop().stop()})}get Hand(){const m=this.gameObjectsMap.get("hand");return _.isNil(m)?(console.warn("hand does not exist",m),null):m}setHandPosition(m,S){const b=this.gameObjectsMap.get("hand");_.isNil(b)?console.warn("hand does not exist",b):b.setPosition(m,S)}setHandPositionWithOffset(m,S,b,O){const B=this.gameObjectsMap.get("hand");_.isNil(B)?console.warn("hand does not exist",B):_.has(this,"positionOffset")?B.setPosition(m+(_.get(this,`positionOffset.${this.hudScene.getOrientation()}.x`)-.5)*b,S+(_.get(this,`positionOffset.${this.hudScene.getOrientation()}.y`)-.5)*O):B.setPosition(m,S)}setTextureAndScale(m){const S=this.gameObjectsMap.get("hand");if(!_.isNil(S)){S.setTexture(m);const b=this.hudScene.textures.get(m),B=this.getShortEdge()/b.source[0].width*_.get(this,`scale.${this.hudScene.getOrientation()}`);S.setScale(B)}}render(){if(_.hasIn(this,"clearTailLines")&&this.clearTailLines(),_.has(this,"isGameSceneComponent")&&this.isGameSceneComponent&&!_.has(this,"options.isTutorialEnabled"))throw"tutorialHand in gameScene does not have isTutorialEnabled info";if(_.isNil(this.movements))return;let m=this.gameObjectsMap.get("hand");const S=_.find(this.selectedImages.default,L=>L.variant==="normal").key,b=_.find(this.selectedImages.default,L=>L.variant==="glow").key;if(_.isNil(m)||m.setVisible(this.isVisible),this.isVisible===!1){this.killTweens();return}if(_.isNil(m)){if(!this.hudScene.textures.exists(S))throw{message:"texture key does not exist in scene",textureKey:S,scene:this.hudScene};m=this.hudScene.add.sprite(this.handPositionStart.x,this.handPositionStart.y,S),m.setDepth(this.depth),m.setOrigin(this.origin.x,this.origin.y),m.setAlpha(0),_.has(this,"isGameSceneComponent")&&this.isGameSceneComponent&&this.hudScene.input.on("pointerdown",()=>{(!_.has(this,"isPointerDownEnabled")||this.isPointerDownEnabled)&&(this.IsVisible=!1,this.render())}),this.gameObjectsMap.set("hand",m)}else _.isFunction(this.onResize)&&(m.setAlpha(0),this.onResize(),m.setX(this.handPositionStart.x),m.setY(this.handPositionStart.y));if(_.has(this,"isGameSceneComponent")&&this.isGameSceneComponent)this.options.isTutorialEnabled?(this.isVisible=!0,m.setVisible(!0)):(this.isVisible=!1,m.setVisible(!1));else{m.setVisible(this.isVisible);const L=this.parent.getContainerPosition();this.setHandPositionWithOffset(L.x,L.y,this.parent.getButtonDisplayWidth(),this.parent.getButtonDisplayHeight())}const B=this.getShortEdge()/m.width*_.get(this,`scale.${this.hudScene.getOrientation()}`);m.setScale(B),this.killTweens(),this.timeline=this.hudScene.tweens.createTimeline(),this.timeline.loop=-1,this.movements.forEach((L,N,X)=>{switch(L.action){case"fadeIn":const V=this.timeline.add({targets:m,duration:this.fadeInDuration,props:{alpha:1}});this.tweens.push(V);break;case"fadeOut":const $=this.timeline.add({targets:m,duration:this.fadeOutDuration,props:{alpha:0}});this.tweens.push($);break;case"moveTo":const Q=this.timeline.add({targets:m,duration:this.moveDuration,props:{x:L.position.x,y:L.position.y},onUpdate:()=>{_.has(L,"onUpdate")&&L.onUpdate()},onComplete:()=>{_.has(L,"onComplete")&&L.onComplete()}});this.tweens.push(Q);break;case"release":const me=this.timeline.add({targets:m,duration:this.releaseDuration,onComplete:()=>{if(!this.hudScene.textures.exists(S))throw{message:"texture key does not exist in scene",textureKey:S,scene:this.hudScene};this.setTextureAndScale(S)}});this.tweens.push(me);break;case"tap":const se=this.timeline.add({targets:m,duration:this.tapDuration,onComplete:()=>{if(!this.hudScene.textures.exists(b))throw{message:"texture key does not exist in scene",textureKey:b,scene:this.hudScene};this.setTextureAndScale(b)}});this.tweens.push(se);break;case"idle":const q=this.timeline.add({targets:m,duration:L.duration,props:{a:1}});this.tweens.push(q);break;case"click":const le=this.timeline.add({targets:m,duration:0,props:{a:1},onComplete:()=>{const he=_.find(this.selectedImages.default,we=>we.variant==="glow").key;this.hudScene.textures.exists(he)&&this.setTextureAndScale(he)}});this.tweens.push(le);break;case"unclick":const J=this.timeline.add({targets:m,duration:0,props:{a:1},onComplete:()=>{const he=_.find(this.selectedImages.default,we=>we.variant==="normal").key;this.hudScene.textures.exists(he)&&this.setTextureAndScale(he)}});this.tweens.push(J);break;case"scaleAnimation":const ne=this.timeline.add({targets:m,duration:L.duration,props:{scale:m.scale*.75,y:m.y*.95},yoyo:!0});this.tweens.push(ne);break;case"notFaded":this.setTextureAndScale(S),m.setAlpha(1);const ge=this.timeline.add({targets:m,duration:L.duration,props:{alpha:1}});this.tweens.push(ge);break;default:break}}),this.isVisible&&(this.isDelayedOnce?this.timeline.play():(this.isDelayedOnce=!0,setTimeout(()=>{this.timeline.play()},this.delay))),this.gameObjectsMap.set("hand",m),_.has(this,"onRender")&&this.onRender({componentId:this.componentId})}getShortEdge(){let m;if(_.hasIn(this.parent,"getSpecificBounds")){const S=this.parent.getSpecificBounds();m=Math.min(S.width,S.height)}else m=Math.min(this.BaseWidth,this.hudScene.game.canvas.height);return m}}class u extends o{constructor(m){super(m);super.update(m)}set Volume(m){this.volume!==m&&(this.volume=m)}get Volume(){return this.volume}load(){this.onReady()}render(){super.render()}}class l extends o{constructor(m){super(m)}load(){super.load(),this.onReady()}render(){n().has(this,"parent")&&(this.isVisible=this.parent.isVisible);let m=this.gameObjectsMap.get("dimmer");n().isNil(m)?(n().has(this,"isInGameComponent")&&this.isInGameComponent===!0?m=this.scene.add.rectangle(this.CenterAbsoluteX,this.CenterAbsoluteY,this.hudScene.game.canvas.width,this.AbsoluteHeight,this.color,this.alpha):m=this.hudScene.add.rectangle(this.CenterAbsoluteX,this.CenterAbsoluteY,this.hudScene.game.canvas.width,this.AbsoluteHeight,this.color,this.alpha),m.setDepth(this.depth),this.gameObjectsMap.set("dimmer",m)):((this.color!==m.fillColor||this.alpha!==m.fillAlpha)&&m.setFillStyle(this.color,this.alpha),m.setPosition(this.CenterAbsoluteX,this.CenterAbsoluteY),m.displayWidth=this.hudScene.game.canvas.width,m.displayHeight=this.AbsoluteHeight),m.depth!==this.depth&&m.setDepth(this.depth),m.alpha!==this.alpha&&m.setAlpha(this.alpha),m.setVisible(this.isVisible)}get Dimmer(){return this.gameObjectsMap.get("dimmer")}}class c extends o{constructor(m){super(m)}load(){super.load(),this.loadTextures(),this.loadBitmapFonts()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}bitmapFontsLoadComplete(){super.bitmapFontsLoadComplete(),this.isBitmapFontsLoadComplete&&this.isTextureLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}render(){n().has(this,"parent")&&(this.isVisible=this.parent.isVisible);let m={},S,b;if(n().hasIn(this.parent,"getSpecificBounds")){const V=this.parent.getSpecificBounds();m={x:V.leftX+V.width*this.RelativeX,y:V.topY+V.height*this.RelativeY},S=V.width*this.RelativeWidth,b=V.height*this.RelativeHeight}else m={x:this.CenterAbsoluteX,y:this.CenterAbsoluteY},S=this.AbsoluteWidth,b=this.AbsoluteHeight;const O=this.localization[this.options.language],B=b*.25;this.renderBox(m,S,b);const L=this.renderTextObject(O,B,m,S),N=b;let X=L.fontSize;if(L.height+O.strokeThickness>N){const V=Math.sqrt((N-L.fontSize*.5)/(L.height+O.strokeThickness));L.setFontSize(X*V)}}renderBox(m,S,b){let O=this.gameObjectsMap.get("textBox");n().isNil(O)?(O=this.hudScene.add.image(m.x,m.y,this.selectedImages.roundedBox[0].key),this.gameObjectsMap.set("textBox",O)):(O.x!==m.x||O.y!==m.y)&&O.setPosition(m.x,m.y),O.depth!==this.depth&&O.setDepth(this.depth),O.alpha!==this.alpha&&O.setAlpha(this.alpha),O.tintTopLeft!==this.color&&(O.clearTint(),O.setTint(this.color)),O.displayWidth!==S&&(O.displayWidth=S),O.displayHeight!==b&&(O.displayHeight=b),this.isVisible?n().has(this,"isBoxEnabled")&&!this.isBoxEnabled?O.setVisible(!1):O.setVisible(!0):O.setVisible(!1)}renderTextObject(m,S,b,O){let B=this.gameObjectsMap.get("textObject");if(n().isNil(B)){B=this.hudScene.add.bitmapText(b.x,b.y,this.selectedBitmapFonts.font[0].key,m.caption).setOrigin(.5);let L=parseInt("0x"+m.fontColor.replace("#",""));B.setTint(L),B.setFontSize(m.fontSize*S),B.setCenterAlign(),B.setMaxWidth(O),this.gameObjectsMap.set("textObject",B)}else{(B.x!==b.x||B.y!==b.y)&&B.setPosition(b.x,b.y),B.text!==m.caption&&B.setText(m.caption);const L=m.fontSize*S;B.fontSize!==L&&B.setFontSize(L);let N=parseInt("0x"+m.fontColor.replace("#",""));B.tintTopLeft!==m.fontColor&&(B.clearTint(),B.setTint(N)),B.setMaxWidth(O)}return B.depth!==this.depth+1&&B.setDepth(this.depth+1),this.isVisible?n().has(this,"isTextEnabled")&&!this.isTextEnabled?B.setVisible(!1):B.setVisible(!0):B.setVisible(!1),B}get TextBox(){return this.gameObjectsMap.get("textBox")}get TextObject(){return this.gameObjectsMap.get("textObject")}}class h extends o{constructor(m){super(m);super.update(m),this.initialPointerX=0,this.initialPointerY=0,this.bulletArray=[],this.isShootFunctionCalled=!1,this.heroBulletGroup=null,this.isPlaneDead=!1,this.isPointerDownTriggered=!1,this.isBulletSoundStarted=!1,this.defaultBulletCountPerShoot=this.bulletCountPerShoot,this.isLevelEnd=!1,this.bulletImageKey="",this.bulletLevel=1,this.bulletType=this.planeType,this.aliveEnemies=[],this.leftOrRight="left",this.canSelectTheClosestEnemy=!0,this.closestEnemyToPlane="",this.counter=0,this.previousBulletLevel=this.bulletLevel,this.isWingTweenCompleted=!0,this.isHeroTakesSuper=!1,this.reviveCompleted=!1,this.isRevive=!1,this.popUpVisible=!1,this.isPopUpTweenAdded=!1,this.scene=null,this.isTaped=!1,this.drawReferenceRectangle=!1,this.laserImageWidth=0,this.laserImageDefaultDisplayWidth=0,this.enableBullets=[],this.heroHeartMaps=new Map,this.circleEffectCompleted=!0,this.h5MuteSounds=!1,this.fullGameMuteSounds=!1,this.isHeroExitTheScreen=!1,this.pointerDownCallBack=null,this.enableBullets=[],this.famobiGameMuted=!1,this.isGameStarted=!1,this.heroGotDamageEventSend=!1,this.heroExitTheScreen=!1,this.isDisableAudioRequestSent=!1}load(){super.load(),this.loadAtlases(),this.loadTextures(),this.loadSounds(),this.loadBitmapFonts()}atlasesLoadComplete(){super.atlasesLoadComplete(),this.isAtlasesLoadComplete&&this.isSoundLoadComplete&&this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}bitmapFontsLoadComplete(){super.bitmapFontsLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),this.shortEdge=Math.min(this.AbsoluteWidth,this.AbsoluteHeight),this.onNetworkNameH5game()||this.renderSoundIcon(),this.isGameStarted||(this.bulletType=this.planeType,this.isGameStarted=!0),this.addHeroBulletGroup(),this.addAnimations(),this.scene.input.once("pointerdown",()=>{this.isTaped=!0,C.name==="famobi"&&(window.famobi_analytics.trackEvent("EVENT_LEVELSTART",{levelName:""}),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Progression",progressionStatus:"Start",progression01:"Level",value:1}))}),this.renderHeroHeart(),this.popUpVisible||(this.renderAlienShooterPlane("plane"+this.bulletType),this.bulletImageKey=this.parent.getImageKey("bullet"+this.bulletType),this.renderBullets("bullet"+this.bulletType),this.renderLaserImage(),this.renderLaserImageHit(),this.renderFireExpoAnimation()),this.renderCircleEffect(),this.popUpVisible&&this.renderPopUp(),this.isShootFunctionCalled||(this.isShootFunctionCalled=!0,this.applyVolume(),this.renderTimerEvent())}deleteTimerEvent(){n().isNil(this.timerEvent)||this.timerEvent.remove(!1),n().isNil(this.diverEnemyTimerEvent)||this.diverEnemyTimerEvent.remove(!1)}addTimerEvent(){this.timerEvent=this.scene.time.addEvent({delay:this.shootFrequencyInMilliseconds,loop:!0,callback:this.shoot,callbackScope:this})}renderTimerEvent(){this.deleteTimerEvent(),this.pointerDownCallBack&&(this.scene.input.removeListener("pointerdown",this.pointerDownCallBack),this.pointerDownCallBack=null),!this.isLevelEnd&&!this.popUpVisible&&(this.isTaped?this.bulletType==="6"?(this.bulletType6Call(),this.bulletLevel>=4&&this.addTimerEvent()):this.addTimerEvent():(this.pointerDownCallBack=()=>{this.bulletType==="6"?(this.bulletType6Call(),this.bulletLevel>=4&&this.addTimerEvent()):this.addTimerEvent()},this.scene.input.once("pointerdown",this.pointerDownCallBack)))}renderSoundIcon(){let m=this.gameObjectsMap.get("soundIconActive"),S=this.gameObjectsMap.get("soundIconPassive");if(n().isNil(m)?(m=this.scene.add.image(this.CenterAbsoluteX,this.AbsoluteHeight*.081,this.selectedImages.soundIconActive[0].key),m.inputEnabled=!0,m.setInteractive(),m.setVisible(!0),this.gameObjectsMap.set("soundIconActive",m)):m.texture.key!==this.selectedImages.soundIconActive[0].key&&m.setTexture(this.selectedImages.soundIconActive[0].key),m.displayWidth!==this.shortEdge*.06&&(m.displayWidth=this.shortEdge*.06),m.displayHeight!==this.shortEdge*.06&&(m.displayHeight=this.shortEdge*.06),this.scene.getOrientation()==="portrait"){const O=m.displayWidth*7.5;m.setPosition(this.CenterAbsoluteX+O,this.AbsoluteHeight*.081)}else{const O=m.displayWidth*7;m.setPosition(this.CenterAbsoluteX+this.AbsoluteWidth*.3,this.AbsoluteHeight*.081)}if(m.depth!==this.depth+2&&m.setDepth(this.depth+2),n().isNil(S)?(S=this.scene.add.image(this.AbsoluteWidth,this.AbsoluteHeight*.081,this.selectedImages.soundIconPassive[0].key),S.inputEnabled=!0,S.setInteractive(),S.setVisible(!1),this.gameObjectsMap.set("soundIconPassive",S),S.on("pointerdown",()=>{m.setVisible(!this.isDisableAudioRequestSent),S.setVisible(this.isDisableAudioRequestSent),this.isDisableAudioRequestSent||(unmuteVolumeForAllGames(),this.setGameUnmuteStateToLocalStorage())}),m.on("pointerdown",()=>{this.isDisableAudioRequestSent||(S.setVisible(!0),m.setVisible(!1),muteVolumeForAllGames(),this.setGameMuteStateToLocalStorage())})):S.texture.key!==this.selectedImages.soundIconPassive[0].key&&S.setTexture(this.selectedImages.soundIconPassive[0].key),S.displayWidth!==this.shortEdge*.06&&(S.displayWidth=this.shortEdge*.06),S.displayHeight!==this.shortEdge*.06&&(S.displayHeight=this.shortEdge*.06),this.scene.getOrientation()==="portrait"){const O=m.displayWidth*7.5;S.setPosition(this.CenterAbsoluteX+O,this.AbsoluteHeight*.081)}else{const O=m.displayWidth*7;S.setPosition(this.CenterAbsoluteX+this.AbsoluteWidth*.3,this.AbsoluteHeight*.081)}S.depth!==this.depth+2&&S.setDepth(this.depth+2),this.getHasExternalMute()?(m.setVisible(!1),S.setVisible(!1)):this.famobiGameMuted?(S.setVisible(!0),m.setVisible(!1)):(m.setVisible(!0),S.setVisible(!1))}renderPopUp(){let m=this.gameObjectsMap.get("popUpContainer"),S=this.gameObjectsMap.get("popUp"),b=this.gameObjectsMap.get("popUpButtonDecline"),O=this.gameObjectsMap.get("heartFill"),B=this.gameObjectsMap.get("heartPlus"),L=this.gameObjectsMap.get("heartContainer");n().isNil(m)?(m=this.hudScene.add.container(0,0),S=this.hudScene.add.image(0,0,this.selectedImages.popUp[0].key),this.gameObjectsMap.set("popUp",S),L=this.hudScene.add.container(0,0),L.setSize(S.displayWidth*.5,S.displayHeight*.35),L.inputEnabled=!0,L.setInteractive(),this.gameObjectsMap.set("heartContainer",L),O=this.hudScene.add.image(S.displayWidth*.05,0,this.selectedImages.heartFill[0].key),this.gameObjectsMap.set("heartFill",O),B=this.hudScene.add.image(-S.displayWidth*.12,0,this.selectedImages.heartPlus[0].key),this.gameObjectsMap.set("heartPlus",B),L.add(O),L.add(B),b=this.hudScene.add.image(S.displayWidth*.48,-S.displayHeight*.48,this.selectedImages.popUpCancelButton[0].key),b.inputEnabled=!0,b.setInteractive(),this.gameObjectsMap.set("popUpButtonDecline",b),m.add(S),m.add(b),m.add(L),this.gameObjectsMap.set("popUpContainer",m),L.on("pointerdown",()=>{this.scene.scene.resume(),this.onAcceptRevivePopUpCallBack();let X=this.hudScene.tweens.addCounter({from:1,to:0,duration:50,ease:"Sine.easeOut",onUpdate:()=>{m.setScale(X.getValue())},onComplete:()=>{this.popUpVisible=!1,this.isPopUpTweenAdded=!1,this.onPopUpDimmerCallback("accept"),this.onFamobiRewardedAdCallback()}})}),b.on("pointerdown",()=>{this.scene.scene.resume(),this.onDeclineRevivePopUpCallBack();let X=this.hudScene.tweens.addCounter({from:1,to:0,duration:50,ease:"Sine.easeOut",onUpdate:()=>{m.setScale(X.getValue())},onComplete:()=>{this.popUpVisible=!1,this.isPopUpTweenAdded=!1,this.onPopUpDimmerCallback("decline"),this.resetTypeCounterCallback()}})})):(S.texture.key!==this.selectedImages.popUp[0].key&&S.setTexture(this.selectedImages.popUp[0].key),b.texture.key!==this.selectedImages.popUpCancelButton[0].key&&b.setTexture(this.selectedImages.popUpCancelButton[0].key)),O.displayWidth!==S.displayWidth*.14&&(O.displayWidth=S.displayWidth*.14),O.displayHeight!==S.displayWidth*.13&&(O.displayHeight=S.displayWidth*.13),B.displayWidth!==S.displayWidth*.09&&(B.displayWidth=S.displayWidth*.09),B.displayHeight!==S.displayWidth*.09&&(B.displayHeight=S.displayWidth*.09),b.displayWidth!==S.displayWidth*.07&&(b.displayWidth=S.displayWidth*.07),b.displayHeight!==S.displayWidth*.07&&(b.displayHeight=S.displayWidth*.07),m.depth!==this.depth+5&&m.setDepth(this.depth+5),m.visible!==this.popUpVisible&&m.setVisible(this.popUpVisible),(m.x!==this.AbsoluteWidth*.5||m.y!==this.AbsoluteHeight*.5)&&m.setPosition(this.AbsoluteWidth*.5,this.AbsoluteHeight*.5),window.famobi.hasRewardedAd()?(O.clearTint(),L.inputEnabled=!0,L.setInteractive(),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Level:Revive:Rewarded"})):(L.inputEnabled=!1,L.disableInteractive(),O.clearTint(),O.setTint(4013373),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Level:Revive:Unlocked"}));const N=this.shortEdge/S.width*.75;if(this.popUpVisible&&!this.isPopUpTweenAdded){this.isPopUpTweenAdded=!0;let X=this.hudScene.tweens.addCounter({from:0,to:1,duration:100,onUpdate:()=>{m.setScale(X.getValue()*N)}})}else this.popUpVisible&&this.isPopUpTweenAdded&&m.scale!==N&&m.setScale(N)}restartAndRevive(){if(this.isPlaneDead=!1,this.isShootFunctionCalled=!1,this.isBulletSoundStarted=!1,this.isHeroTakesSuper=!1,this.isLevelEnd=!1,this.popUpVisible=!1,Array.from(this.heroHeartMaps.values()).forEach(S=>{S.setData("isActive",!0)}),this.deleteTimerEvent(),this.render(),this.bulletType==="6"){const S=this.selectedSounds.laserBullet[0].key;this.isTaped?this.playSound(S):this.scene.input.once("pointerdown",()=>{this.playSound(S)})}const m=this.gameObjectsMap.get("alienShooterPlane");m.enableBody(!1,m.x,m.y,!0,!0),this.renderPlaneFire()}restart(){this.onBackgroundChangeCallBack(),this.restartAndRevive(),this.bulletLevel=this.previousBulletLevel}revive(){this.restartAndRevive(),this.onCurrentWaveBossCallBack(),this.setNewEnemyLevelCallBack(),this.isRevive=!0,this.renderCircleEffectTween()}renderCircleEffectTween(){const m=this.gameObjectsMap.get("alienShooterPlane");let S=this.gameObjectsMap.get("circleEffect");this.renderCircleEffectScaleTween(S.scale,m.scale*1.2,!1);let b=!1,O=this.scene.tweens.addCounter({from:0,to:360,duration:1600,repeat:2,onStart:()=>{this.reviveCompleted=!1,this.circleEffectCompleted=!1,S.visible||S.setVisible(!0),S.setAlpha(1),S.setAngle(0)},onUpdate:()=>{S.setAngle(O.getValue()),S.setPosition(m.x,m.y),this.isPlaneDead&&(this.scene.tweens.killTweensOf(S),S.setVisible(!1))},onComplete:()=>{b||(b=!0,this.renderCircleEffectScaleTween(m.scale*1.2,0,!0))}})}renderCircleEffectScaleTween(m,S,b){const O=this.gameObjectsMap.get("alienShooterPlane");let B=this.gameObjectsMap.get("circleEffect"),L=this.scene.tweens.addCounter({from:m,to:S,duration:400,onUpdate:()=>{B.setScale(L.getValue()),B.setPosition(O.x,O.y),O.getData("isDead")&&this.scene.tweens.killTweensOf(B)},onComplete:()=>{B.setScale(S),b&&(B.setVisible(!1),this.isRevive=!1,this.reviveCompleted=!0,this.circleEffectCompleted=!0,this.onAddHeroDamageColliderCallBack(O),this.heroGotDamageEventSend=!1)}})}renderHeroExitTheScreenTween(m){let S=this.scene.tweens.addCounter({from:m.y,to:-this.scene.game.canvas.height*.5,duration:2e3,delay:500,onUpdate:()=>{m.setPosition(m.x,S.getValue()),m.y<0&&(this.pauseSound(),this.isHeroExitTheScreen=!0)},onComplete:()=>{if(m.setPosition(m.x,-this.scene.game.canvas.height*.5),n().isNil(this.timerEvent)||this.deleteTimerEvent(),this.bulletType==="6"){const b=this.gameObjectsMap.get("bulletLaser"),O=this.gameObjectsMap.get("laserImageHit");n().isNil(b)||(b.disableBody(!0,!0),this.laserImage.setVisible(!1)),n().isNil(O)||O.setVisible(!1)}this.heroExitTheScreen=!0,this.onNetworkH5AndLevelBased()?pauseGameForH5Games():this.renderHeroEnterTheScreenTween(m)}})}renderHeroEnterTheScreenTween(m){this.onBackgroundChangeCallBack(),this.bulletCountPerShoot=this.defaultBulletCountPerShoot,this.bulletLevel=1,this.previousBulletLevel=this.bulletLevel,this.bulletType==="6"&&this.setLaserImageWidth(),this.heroExitTheScreen=!1;let S=this.scene.tweens.addCounter({from:this.scene.game.canvas.height+this.scene.game.canvas.height*.5,to:this.CenterAbsoluteY,duration:1e3,onStart:()=>{m.setX(this.CenterAbsoluteX)},onUpdate:()=>{m.setPosition(m.x,S.getValue()),m.y<this.scene.game.canvas.height&&(this.isHeroExitTheScreen=!1)},onComplete:()=>{m.setPosition(m.x,this.CenterAbsoluteY),this.onNextLevelAfterBossCallBack();let b;this.bulletType!=="5"&&(this.bulletType==="6"?b=this.selectedSounds.laserBullet[0].key:b=this.selectedSounds.bullet[0].key,this.playSound(b))}})}renderAlienShooterPlane(m="plane1"){const S=this.parent.getAtlasKeyByName("plane");let b=this.gameObjectsMap.get("alienShooterPlane");n().isNil(b)?(b=this.scene.physics.add.sprite(this.CenterAbsoluteX,this.CenterAbsoluteY,S,m).setDepth(this.depth),b.setData("alienShooterPlane",!0),this.gameObjectsMap.set("alienShooterPlane",b),b.setSize(b.displayWidth*.2,b.displayHeight*.65),b.setImmovable(!0),b.body.allowGravity=!1,b.setFriction(0,0),b.body.label="alienShooterPlane",this.scene.input.on("pointerdown",L=>{this.isPointerDownTriggered=!0,!this.isPlaneDead&&(this.initialPointerX=L.x,this.initialPointerY=L.y)}),this.scene.input.on("pointerup",L=>{this.isPointerDownTriggered=!1,!this.isPlaneDead&&(this.initialPointerX=L.x,this.initialPointerY=L.y)}),this.scene.input.on("pointermove",L=>{if(this.isPlaneDead){this.isPointerDownTriggered=!1;return}if(!!this.isPointerDownTriggered){if(L.x<=this.scene.game.canvas.width&&L.x>0){let N=L.x-this.initialPointerX;b.x+N<=this.scene.game.canvas.width&&b.x>-N&&b.setX(b.x+N)}if(L.y>0&&L.y<=this.scene.game.canvas.height){let N=L.y-this.initialPointerY;b.y+N<=this.scene.game.canvas.height&&b.y>-N&&b.setY(b.y+N)}if(this.bulletType==="6"&&!n().isNil(this.laserImage)){this.laserImage.setPosition(b.x,b.y);const N=this.gameObjectsMap.get("laserImageHit"),X=this.laserImage.y-this.laserImage.displayHeight*.97;(N.x!==this.laserImage.x-N.displayWidth*.085||N.y!==X)&&N.setPosition(this.laserImage.x-N.displayWidth*.085,X)}this.initialPointerX=L.x,this.initialPointerY=L.y}})):(this.heroExitTheScreen||b.setPosition(this.CenterAbsoluteX,this.CenterAbsoluteY),b.texture.key!==S&&b.setTexture(S)),b.frame.name!==m&&b.setFrame(m,!0,!1);const O=this.getSpriteWidth(S),B=Math.min(this.AbsoluteWidth,this.AbsoluteHeight*.6)/O*.67*n().get(this,`scale.${this.scene.getOrientation()}`);b.scale!==B&&b.setScale(B),b.depth!==this.depth&&b.setDepth(this.depth),b.tintTopLeft!==this.color&&(b.clearTint(),b.setTint(this.color)),this.renderPlaneFire(),this.renderHeroWingAndHighlight()}renderPlaneFire(){const m=this.gameObjectsMap.get("alienShooterPlane"),S=this.parent.getAtlasKeyByName("bosses");let B=this.scene.textures.get(S).getFrameNames().find(X=>X==="enginefire"),L=this.gameObjectsMap.get("engineFire");n().isNil(L)?(L=this.scene.add.sprite(m.x,m.y,S,B),this.gameObjectsMap.set("engineFire",L)):(L.texture.key!==S&&L.setTexture(S),L.frame.name!==B&&L.setFrame(B)),L.setFlipY(!0),L.visible!==m.visible&&L.setVisible(m.visible);const N=m.scale;L.scale!==N&&L.setScale(N),(L.x!==m.x||L.y!==m.y+m.displayHeight*.55)&&L.setPosition(m.x,m.y+m.displayHeight*.55),this.scene.tweens.addCounter({from:L.scale,to:L.scale*.6,duration:100,repeat:-1,onUpdate:X=>{L.setScale(X.getValue()),L.setPosition(m.x,m.y+m.displayHeight*.55),this.isPlaneDead&&L.setVisible(!1)}})}getActivePlaneHearts(){return Array.from(this.heroHeartMaps.values()).filter(m=>m.getData("isActive")&&m.getData("type")==="container")}renderHeroHeart(){this.onNetworkNameH5game()&&this.heroHeartCount===0&&(this.heroHeartCount=2e3);for(let m=0;m<this.heroHeartCount;m++){let S=this.heroHeartMaps.get("planeHeartContainer"+m),b=this.heroHeartMaps.get("heartStroke"+m),O=this.heroHeartMaps.get("heartFill"+m);const B=this.selectedImages.heartStroke[0].key,L=this.selectedImages.heartFill[0].key;n().isNil(S)?(S=this.scene.add.container(0,0),S.setData("type","container"),this.heroHeartMaps.set("planeHeartContainer"+m,S),b=this.scene.add.image(0,0,B),b.setData("type","image"),b.setData("isActive",null),b.setVisible(!1),this.heroHeartMaps.set("heartStroke"+m,b),S.add(b),O=this.scene.add.image(0,0,L),O.setData("type","image"),O.setData("isActive",null),this.heroHeartMaps.set("heartFill"+m,O),S.add(O),S.setData("isActive",!0),S.setDepth(this.depth+3)):(b.texture.key!==B&&b.setTexture(B),O.texture.key!==L&&O.setTexture(L)),b.displayWidth!==this.shortEdge*.057&&(b.displayWidth=this.shortEdge*.057),b.displayHeight!==this.shortEdge*.053&&(b.displayHeight=this.shortEdge*.053),O.displayWidth!==this.shortEdge*.057&&(O.displayWidth=this.shortEdge*.057),O.displayHeight!==this.shortEdge*.053&&(O.displayHeight=this.shortEdge*.053),this.scene.getOrientation()==="portrait"?S.setPosition(this.CenterAbsoluteX-2.5*b.displayWidth*this.heroHeartCount+b.displayWidth*1.2*m,this.AbsoluteHeight*.081):S.setPosition(this.CenterAbsoluteX-2.5*b.displayWidth*this.heroHeartCount+b.displayWidth*1.2*m,this.AbsoluteHeight*.081),this.onNetworkNameH5game()?S.setVisible(!1):S.getData("isActive")?(O.setVisible(!0),b.setVisible(!1),S.setVisible(!0)):(O.setVisible(!1),b.setVisible(!0))}}renderHeroWingAndHighlight(){const m=this.gameObjectsMap.get("alienShooterPlane");let S=this.gameObjectsMap.get("superWingRight");n().isNil(S)?(S=this.scene.add.image(m.x,m.y,this.selectedImages.super_wing[0].key).setDepth(this.depth-2).setVisible(!1),S.setOrigin(0,1),S.setData("side","right"),this.gameObjectsMap.set("superWingRight",S)):S.texture.key!==this.selectedImages.super_wing[0].key&&S.setTexture(this.selectedImages.super_wing[0].key),S.scale!==m.scale*.8&&S.setScale(m.scale*.8),(S.x!==m.x+S.displayWidth*.15||S.y!==m.y+m.displayHeight*.25)&&S.setPosition(m.x+S.displayWidth*.15,m.y+m.displayHeight*.25),S.depth!==this.depth-2&&S.setDepth(this.depth-2);let b=this.gameObjectsMap.get("superWingLeft");n().isNil(b)?(b=this.scene.add.image(m.x,m.y,this.selectedImages.super_wing[0].key).setDepth(this.depth-2).setVisible(!1),b.setOrigin(1,1),b.setData("side","left"),b=b.setFlipX(!0),this.gameObjectsMap.set("superWingLeft",b)):b.texture.key!==this.selectedImages.super_wing[0].key&&(b.setTexture(this.selectedImages.super_wing[0].key),b=b.setFlipX(!0),this.gameObjectsMap.set("superWingLeft",b)),b.scale!==m.scale*.8&&b.setScale(m.scale*.8),(b.x!==m.x-b.displayWidth*.15||b.y!==m.y+m.displayHeight*.25)&&b.setPosition(m.x-b.displayWidth*.15,m.y+m.displayHeight*.25),b.depth!==this.depth-2&&b.setDepth(this.depth-2);let O=this.gameObjectsMap.get("superWingHighlight");n().isNil(O)?(O=this.scene.physics.add.image(m.x,m.y,this.selectedImages.super_wing_highlight[0].key).setDepth(this.depth-2).setVisible(!1),this.gameObjectsMap.set("superWingHighlight",O)):O.texture.key!==this.selectedImages.super_wing_highlight[0].key&&O.setTexture(this.selectedImages.super_wing_highlight[0].key),O.scale!==m.scale*1.5&&O.setScale(m.scale*1.5),(O.x!==m.x||O.y!==S.y)&&O.setPosition(m.x,m.y),O.depth!==this.depth-2&&O.setDepth(this.depth-2),O.alpha!==.5&&O.setAlpha(.5)}renderFireExpoAnimation(){const m=this.gameObjectsMap.get("alienShooterPlane"),S=this.parent.getAtlasKeyByName("fireExpo");let b=this.gameObjectsMap.get("fireExpoAnimation");n().isNil(b)?(b=this.scene.add.sprite(m.x,m.y,S).setDepth(m.depth+2).setVisible(!1),this.gameObjectsMap.set("fireExpoAnimation",b)):b.texture.key!==S&&b.setTexture(S),(b.x!==m.x||b.y!==m.y)&&b.setPosition(m.x,m.y),b.scale!==m.scale*8&&b.setScale(m.scale*8)}renderHeroTakesPowerUpAnimation(){const m=this.gameObjectsMap.get("alienShooterPlane"),S=this.getAtlasKeyByName("planeFx");let b=this.gameObjectsMap.get("powerUpAnimation");n().isNil(b)?(b=this.scene.add.sprite(m.x,m.y,S).setDepth(this.depth+2),this.gameObjectsMap.set("powerUpAnimation",b)):b.texture.key!==S&&b.setTexture(S),b.scale!==m.scale*2&&b.setScale(m.scale*2),(b.x!==m.x||b.y!==m.y)&&b.setPosition(m.x,m.y),b.depth!==this.depth+2&&b.setDepth(this.depth+2),b.visible||b.setVisible(!0);const O=this.getAtlasPlayKeyByName("planeFx"),B=this.scene.anims.get(O);B.repeat=0,b.play(O,!0),b.on("animationupdate",()=>{(b.x!==m.x||b.y!==m.y)&&b.setPosition(m.x,m.y)}),b.on("animationcomplete",()=>{b.visible&&b.setVisible(!1)})}renderCircleEffect(m=!1){const S=this.gameObjectsMap.get("alienShooterPlane");let b=this.gameObjectsMap.get("circleEffect");n().isNil(b)?(b=this.scene.add.image(S.x,S.y,this.selectedImages.circle_effect[0].key).setDepth(this.depth-2).setVisible(!1),this.gameObjectsMap.set("circleEffect",b)):b.texture.key!==this.selectedImages.circle_effect[0].key&&b.setTexture(this.selectedImages.circle_effect[0].key),b.scale!==S.scale*.2&&b.setScale(S.scale*.2),(b.x!==S.x||b.y!==S.y)&&b.setPosition(S.x,S.y);let O=b.alpha;b.depth!==this.depth-2&&b.setDepth(this.depth-2),m&&(this.circleEffectTween=this.scene.tweens.addCounter({from:b.scale,to:S.scale*1.4,duration:400,onStart:()=>{b.visible||b.setVisible(!0),b.setAlpha(1)},onUpdate:()=>{b.setScale(this.circleEffectTween.getValue()),b.setPosition(S.x,S.y),this.circleEffectTween.progress>=.6&&b.setAlpha(O-this.circleEffectTween.progress),S.getData("isDead")&&this.scene.tweens.killTweensOf(b)},onComplete:()=>{b.setVisible(!1)}}))}killAllTweens(){let m=this.gameObjectsMap.get("circleEffect");this.scene.tweens.killTweensOf(m),m.setVisible(!1)}addTweensForSuperWings(){const m=this.gameObjectsMap.get("superWingLeft"),S=this.gameObjectsMap.get("superWingRight"),b=this.gameObjectsMap.get("superWingHighlight"),O=this.gameObjectsMap.get("alienShooterPlane");if(this.scene.tweens.killTweensOf(m),this.scene.tweens.killTweensOf(S),this.scene.tweens.killTweensOf(b),this.isPlaneDead){this.bulletLevel=this.previousBulletLevel;return}this.isWingTweenCompleted=!1,!(n().isNil(S)||n().isNil(m)||n().isNil(b))&&(this.scene.tweens.add({targets:m,duration:700,yoyo:!0,angle:-50,repeat:8,onStart:()=>{m.setAngle(0)},onUpdate:(B,L)=>{if(this.isWingTweenCompleted){m.visible&&m.setVisible(!1);return}L.setPosition(O.x-m.displayWidth*.15,O.y+O.displayHeight*.25),m.visible||m.setVisible(!0),this.isHeroTakesSuper||(this.isWingTweenCompleted=!0,this.setLaserImageWidth(),setTimeout(()=>{this.onAddHeroDamageColliderCallBack(O)},1e3))},onComplete:()=>{m.setVisible(!1),this.bulletLevel=this.previousBulletLevel,this.isWingTweenCompleted=!0,this.isHeroTakesSuper=!1,this.setLaserImageWidth()}}),this.scene.tweens.add({targets:S,duration:700,yoyo:!0,angle:50,repeat:8,onStart:()=>{S.setAngle(0)},onUpdate:(B,L)=>{if(this.isWingTweenCompleted){S.visible&&S.setVisible(!1);return}L.setPosition(O.x+S.displayWidth*.15,O.y+O.displayHeight*.25),S.visible||S.setVisible(!0),this.isHeroTakesSuper||(this.isWingTweenCompleted=!0,this.setLaserImageWidth())},onComplete:()=>{S.setVisible(!1),this.bulletLevel=this.previousBulletLevel,this.isWingTweenCompleted=!0,this.isHeroTakesSuper=!1,this.setLaserImageWidth()}}),this.scene.tweens.add({targets:b,duration:700,yoyo:!0,alpha:.1,repeat:8,onStart:()=>{b.setAngle(0)},onUpdate:(B,L)=>{if(this.isWingTweenCompleted){b.visible&&b.setVisible(!1);return}L.setPosition(O.x,O.y),b.visible||b.setVisible(!0),this.isHeroTakesSuper||(this.isWingTweenCompleted=!0,this.setLaserImageWidth())},onComplete:()=>{b.setVisible(!1),this.bulletLevel=this.previousBulletLevel,this.isWingTweenCompleted=!0,this.isHeroTakesSuper=!1,this.setLaserImageWidth()}}))}getAlienShooterPlanePosition(){return{x:this.CenterAbsoluteX,y:this.CenterAbsoluteY}}getAlienShooterPlaneCurrentPosition(){const m=this.gameObjectsMap.get("alienShooterPlane");return{x:m.x,y:m.y}}getSpriteWidth(m){return this.scene.textures.list[m].getSourceImage().width}addAnimations(){Object.entries(this.selectedAtlases).forEach(([m])=>{const S=this.getAtlasKeyByName(m),b=this.getAtlasPlayKeyByName(m),O=this.getAnimationName(m);let B=this.gameObjectsMap.get(O);if(n().isNil(B))B=this.scene.anims.create({key:b,repeat:-1,showOnStart:!0,frames:this.scene.anims.generateFrameNames(S)}),this.gameObjectsMap.set(O,B);else if(B.key!==b){this.isHeroAtlasChanged=!0;const L=this.getAtlasKeyByName(m);this.scene.anims.remove(B.key),B=this.scene.anims.create({key:b,repeat:-1,frames:this.scene.anims.generateFrameNames(L),showOnStart:!0}),this.gameObjectsMap.set("animation",B)}})}getAnimationName(m){return"animation"+m}getAtlasKeyByName(m){return n().get(this,`selectedAtlases.${m}`).find(S=>S.variant==="image").key}getAtlasPlayKeyByName(m){return this.getAtlasKeyByName(m)+"_"+this.componentId}playSound(m){var S,b;if(!(this.h5MuteSounds||this.fullGameMuteSounds)){if(this.options.isSoundEnabled&&this.scene.adNetworkSetting.isSoundSupported){let O=this.soundsMap.get("bullet");this.scene.sound.unlock(),n().isNil(O)?(O=this.scene.sound.add(m,{volume:(S=this.volume)!=null?S:1}),O.on("complete",()=>{O.play()}),this.soundsMap.set("bullet",O),this.scene.sound.locked?this.scene.sound.once(Phaser.Sound.Events.UNLOCKED,()=>{O.play()}):O.play()):O.key!==m&&(O.stop(),O.destroy(),O=this.scene.sound.add(m,{volume:(b=this.volume)!=null?b:1}),O.on("complete",()=>{O.play()}),this.soundsMap.set("bullet",O),this.scene.sound.locked?this.scene.sound.once(Phaser.Sound.Events.UNLOCKED,()=>{O.play()}):O.play()),O.isPlaying||(this.scene.sound.locked?this.scene.sound.once(Phaser.Sound.Events.UNLOCKED,()=>{O.play()}):O.play())}else if(!this.options.isSoundEnabled&&this.scene.adNetworkSetting.isSoundSupported){let O=this.soundsMap.get("bullet");n().isNil(O)||O.stop()}}}pauseSound(){const m=this.soundsMap.get("bullet");n().isNil(m)||m.pause()}applyVolume(){if(this.options.isSoundEnabled&&this.scene.adNetworkSetting.isSoundSupported){let m=this.soundsMap.get("bullet");!n().isNil(m)&&n().has(this,"volume")&&m.volume!==this.volume&&(m.volume=this.volume)}}muteVolume(){if(this.options.isSoundEnabled&&this.scene.adNetworkSetting.isSoundSupported){let m=this.soundsMap.get("bullet");n().isNil(m)||(m.volume=0)}}addHeroBulletGroup(){n().isNil(this.heroBulletGroup)&&(this.heroBulletGroup=this.scene.physics.add.group())}renderBullets(m="bullet1"){const S=this.gameObjectsMap.get("alienShooterPlane");this.renderBulletType6();const b=this.parent.getImageKey(m);for(let O=0;O<this.bulletCount;O++){if(this.bulletArray.length<this.bulletCount){const L=this.heroBulletGroup.create(S.x,S.y-S.displayHeight*.5,b).setDepth(this.depth-5);L.body.onWorldBounds=!0,L.setCollideWorldBounds(!0),L.body.name="heroBullet",L.body.label="heroBullet",L.body.id="heroBullet_"+O,L.body.allowGravity=!1,L.setFriction(0,0),L.disableBody(!0,!0),this.bulletArray.push(L)}this.bulletArray[O].texture.key!==b&&this.bulletArray[O].setTexture(b),this.bulletArray[O].setSize(this.bulletArray[O].width*.4,this.bulletArray[O].height*.4);const B=S.displayWidth*.25/this.bulletArray[O].width;this.bulletArray[O].scale!==B&&this.bulletArray[O].setScale(B),this.bulletArray[O].setVisible(!1),this.bulletArray[O].depth!==this.depth-5&&this.bulletArray[O].setDepth(this.depth-5)}}checkBulletExistInBulletArray(m){return this.bulletArray.some(S=>{if(S.body.id===m.body.id)return!0})}onBulletCollideWithSomething(m){m.disableBody(!0,!0),this.checkBulletExistInBulletArray(m)||(m.setPosition(-this.scene.game.canvas.width,-this.scene.game.canvas.height),m.rotation=0,m.setScale(this.getReferenceBulletScale(m)),this.bulletArray.push(m))}editEnableBullets(m){this.enableBullets.splice(m,1)}removeAllObjectBodies(){this.enableBullets.forEach(m=>{this.onBulletCollideWithSomething(m)})}getReferenceBulletScale(m){const b=this.gameObjectsMap.get("alienShooterPlane").displayWidth*.25/m.width;return m.scale!==b&&m.setScale(b),b}powerUpLevelChangeForBullet1AndBullet5(m,S,b,O,B){const L=this.gameObjectsMap.get("alienShooterPlane");let N=this.bulletType==="1"?m.displayWidth*1.5:m.displayWidth*3;S!==b?S<b?N*=Math.floor(S-b):N*=Math.ceil(S-b):N=0;let X;if(this.bulletType==="1")X=L.y-L.displayHeight*.5;else{const V=Math.random()*200+1;X=L.y-V,this.onNetworkNameH5game()&&this.h5MuteSounds||this.isHeroExitTheScreen||!this.onNetworkNameH5game()&&this.fullGameMuteSounds?this.scene.sound.stopAll():S<3&&setTimeout(()=>{let $;n().has(this.parent,"volume")?$=this.parent.volume:$=1,this.scene.sound.play(this.selectedSounds.shotgunBullet[0].key,{volume:$})},S*40)}if(m.enableBody(!0,L.x,X,!0,!0),this.enableBullets.push(m),this.bulletCountPerShoot%2===0?S<=b?m.setVelocityX(-1*O):m.setVelocityX(O):S<b?m.setVelocityX(-1*O):S===b?m.setVelocityX(0):S>b&&m.setVelocityX(O),B>1){this.scene.tweens.killTweensOf(m);let V=this.scene.tweens.addCounter({from:m.x,to:N+m.x,duration:1400,onUpdate:()=>{m.setX(V.getValue())}})}}powerUpLevelChangeForBullet2(m,S,b,O){const B=this.gameObjectsMap.get("alienShooterPlane");let L,N,X=S;if(this.isHeroTakesSuper){b=this.findMiddleIndex(O.length-4),S>4&&S<7?X=S-2:S>7&&(X=S-4);let V=this.parent.getImageKey("bullet2_particle");S===3||S===7?(m.texture.key!==V&&m.setTexture(V),m.setSize(m.width,m.height),m.rotation=-1*.1*(S*.5)*1.5,L=B.x-B.displayWidth*.2,N=B.y-(7-S)/4*m.displayHeight*.9,m.enableBody(!0,L,N,!0,!0),m.setVelocityX(-1*this.AbsoluteWidth*S*5e-5)):S===4||S===8?(m.texture.key!==V&&m.setTexture(V),m.setSize(m.width,m.height),m.rotation=.1*((S-1)*.5)*1.5,L=B.x+B.displayWidth*.2,N=B.y-(8-S)/4*m.displayHeight*.9,m.enableBody(!0,L,N,!0,!0),m.setVelocityX(this.AbsoluteWidth*(S-1)*5e-5)):(L=B.x+(X-b)*m.displayWidth*.4,N=B.y-B.displayHeight*.6+Math.abs((X-b)*.05*m.width),m.enableBody(!0,L,N,!0,!0),m.setVelocityX(0))}else if(this.counter%8!==0)L=B.x+(X-b)*m.displayWidth*.4,N=B.y-B.displayHeight*.6+Math.abs((S-b)*.05*m.width),m.enableBody(!0,L,N,!0,!0),m.setVelocityX(0);else{O.length===4?b=this.findMiddleIndex(O.length-1):O.length>4&&O.length<8?(b=this.findMiddleIndex(O.length-2),S>4&&S<7&&(X=S-2)):O.length===8?(b=this.findMiddleIndex(O.length-3),S>4&&S<7&&(X=S-2)):(O.length>8&&O.length<12||this.isHeroTakesSuper)&&(b=this.findMiddleIndex(O.length-4),S>4&&S<7?X=S-2:S>7&&(X=S-4));let V=this.parent.getImageKey("bullet2_particle");S===3||S===7?(m.texture.key!==V&&m.setTexture(V),m.setSize(m.width,m.height),m.rotation=-1*.1*(S*.5)*1.5,L=B.x-B.displayWidth*.2,N=B.y-(7-S)/4*m.displayHeight*.9,m.enableBody(!0,L,N,!0,!0),m.setVelocityX(-1*this.AbsoluteWidth*S*5e-5)):S===4||S===8?(m.texture.key!==V&&m.setTexture(V),m.setSize(m.width,m.height),m.rotation=.1*((S-1)*.5)*1.5,L=B.x+B.displayWidth*.2,N=B.y-(8-S)/4*m.displayHeight*.9,m.enableBody(!0,L,N,!0,!0),m.setVelocityX(this.AbsoluteWidth*(S-1)*5e-5)):(L=B.x+(X-b)*m.displayWidth*.4,N=B.y-B.displayHeight*.6+Math.abs((X-b)*.05*m.width),m.enableBody(!0,L,N,!0,!0),m.setVelocityX(0))}this.enableBullets.push(m)}powerUpLevelChangeForBullet3(m,S,b,O,B,L,N){const X=this.AbsoluteWidth*4e-5,V=Math.floor(Math.random()*2),$=Math.floor(Math.random()*2)+1;this.timerEvent.delay=this.shootFrequencyInMilliseconds*.25*(Math.random()*2+1),this.isHeroTakesSuper?this.counter%4===0?this.powerUpForBullet3SuperModeWithSideBullets(S,m,O,$,V,X,b):this.powerUpForBullet3MiddleBullets(V,$,m,X,b,S):this.counter%16!==0?this.powerUpForBullet3MiddleBullets(V,$,m,X,b,S):this.powerUpForBullet3SuperModeWithSideBullets(S,m,O,$,V,X,b),m.setVelocityY(N*1.5)}powerUpForBullet3MiddleBullets(m,S,b,O,B,L){const N=this.gameObjectsMap.get("alienShooterPlane");this.counter%S===0?(b.enableBody(!0,N.x,N.y-N.displayHeight*.23,!0,!0),m===0?b.setVelocityX(-1*O*(L+1)):b.setVelocityX(O*(L+1)),B.push(b),this.enableBullets.push(b)):this.onBulletCollideWithSomething(b)}powerUpForBullet3SuperModeWithSideBullets(m,S,b,O,B,L,N){const X=this.gameObjectsMap.get("alienShooterPlane");let V=m;if(m===1||m===2){let $=this.parent.getImageKey("bullet3_particle");S.texture.key!==$&&(S.setTexture($),S.setSize(S.width*.5,S.height*.5))}m===1?(S.enableBody(!0,X.x,X.y+S.displayHeight*.3,!0,!0),S.setData("side","left"),S.setAngle(-90),b.push(S),this.aliveEnemies.length===0&&S.setVelocityX(-1*this.AbsoluteWidth*12*15e-5)):m===2?(S.enableBody(!0,X.x,X.y+S.displayHeight*.3,!0,!0),S.setData("side","right"),S.setAngle(90),b.push(S),this.aliveEnemies.length===0&&S.setVelocityX(this.AbsoluteWidth*12*15e-5)):(m>2&&(V=m-2),this.counter%O===0?(S.enableBody(!0,X.x,X.y-X.displayHeight*.5,!0,!0),B===0?S.setVelocityX(-1*L*(V+1)):S.setVelocityX(L*(V+1)),N.push(S),this.enableBullets.push(S)):this.onBulletCollideWithSomething(S)),this.addTweenForBulletType3(b)}powerUpLevelChangeForBullet4(m,S,b,O,B,L){const N=this.gameObjectsMap.get("alienShooterPlane"),X=N.displayWidth*.1,V={x:N.x-N.displayWidth*.15,y:N.y-N.displayHeight*.5},$={x:N.x+N.displayWidth*.15,y:N.y-N.displayHeight*.5};S===0&&m.scale!==m.scale*1.2&&m.setScale(m.scale*1.2),this.isHeroTakesSuper?this.counter%2===0?this.renderBullet4WithSides(m,S,b,B,V,$,O,X,N):this.renderBullet4WithoutSides(m,O,S,$,V,X,B):this.counter%4===0?this.renderBullet4WithSides(m,S,b,B,V,$,O,X,N):this.renderBullet4WithoutSides(m,O,S,$,V,X,B),m.setVelocityY(L*2),this.addTweenForBulletType4(b,L)}powerUpLevelChangeForBullet6(m,S){const b=this.gameObjectsMap.get("alienShooterPlane");let O,B,L=this.parent.getImageKey("bullet2_particle");m.texture.key!==L&&m.setTexture(L);const N=b.displayWidth*.25/m.width;if(m.scale!==N&&m.setScale(N),S===0||S===2?(m.rotation=-1*.1*((S+2)*.5)*1.5,O=b.x-b.displayWidth*.2,B=b.y-(2-S)/2*m.displayHeight*.7,m.enableBody(!0,O,B,!0,!0),m.setVelocityX(-1*this.AbsoluteWidth*(S+2)*5e-5)):(S===1||S===3)&&(m.rotation=.1*((S+1)*.5)*1.5,O=b.x+b.displayWidth*.2,B=b.y-(3-S)/2*m.displayHeight*.7,m.enableBody(!0,O,B,!0,!0),m.setVelocityX(this.AbsoluteWidth*(S+1)*5e-5)),this.onNetworkNameH5game()&&this.h5MuteSounds||this.isHeroExitTheScreen||!this.onNetworkNameH5game()&&this.fullGameMuteSounds)this.scene.sound.stopAll();else if(S===0){let X;n().has(this,"volume")?X=this.volume:X=1,this.scene.sound.play(this.selectedSounds.bullet[0].key,{volume:X})}}renderBullet4WithoutSides(m,S,b,O,B,L,N){if(b!==0){let X=this.parent.getImageKey("bullet4_small");m.texture.key!==X&&m.setTexture(X),m.scale!==m.scale*.5&&(m.setScale(m.scale*.5),m.setSize(m.width*.5,m.height*.5))}this.leftOrRight==="left"?b===0?m.enableBody(!0,B.x,B.y,!0,!0):(m.enableBody(!0,B.x-L*b,B.y+S[0].displayHeight*.25,!0,!0),N.push(m)):this.leftOrRight==="right"&&(b===0?m.enableBody(!0,O.x,O.y,!0,!0):(m.enableBody(!0,O.x+L*b,O.y+S[0].displayHeight*.25,!0,!0),N.push(m))),this.enableBullets.push(m)}renderBullet4WithSides(m,S,b,O,B,L,N,X,V){if(S===1||S===2||S===7){let $=this.parent.getImageKey("bullet4_small");m.texture.key!==$&&m.setTexture($),m.scale!==m.scale*.5&&(m.setScale(m.scale*.5),m.setSize(m.width*.5,m.height*.5))}if(this.leftOrRight==="left"?S===0?m.enableBody(!0,B.x,B.y,!0,!0):S===1||S===2?(m.enableBody(!0,B.x-X*S,B.y+N[0].displayHeight*.25,!0,!0),O.push(m)):S===7&&(m.enableBody(!0,B.x-X*3,B.y+N[0].displayHeight*.25,!0,!0),O.push(m)):this.leftOrRight==="right"&&(S===0?m.enableBody(!0,L.x,L.y,!0,!0):S===1||S===2?(m.enableBody(!0,L.x+X*S,L.y+N[0].displayHeight*.25,!0,!0),O.push(m)):S===7&&(m.enableBody(!0,L.x+X*3,L.y+N[0].displayHeight*.25,!0,!0),O.push(m))),S>2&&S!==7){let $=this.parent.getImageKey("bullet4_side");if(m.texture.key!==$&&m.setTexture($),m.scale!==m.scale*.5&&(m.setScale(m.scale*.5),m.setSize(m.width*.5,m.height*.5)),S%2===1){let Q=S!==9?S:7;m.enableBody(!0,V.x-V.displayWidth*.34,V.y-V.displayHeight*.5+V.displayHeight*(Q+1)*.1,!0,!0),m.setData("side","left"),this.aliveEnemies.length===0&&m.setVelocityX(-1*this.AbsoluteWidth*(Q+1)*15e-5),m.rotation=-.5}else m.enableBody(!0,V.x+V.displayWidth*.34,V.y-V.displayHeight*.5+V.displayHeight*S*.1,!0,!0),m.setData("side","right"),this.aliveEnemies.length===0&&m.setVelocityX(this.AbsoluteWidth*S*15e-5),m.rotation=.5;b.push(m)}this.enableBullets.push(m)}addTweenForBulletType4(m,S){const b=this.gameObjectsMap.get("alienShooterPlane");if(m.length===0||this.aliveEnemies.length===0)return;let O=[];if(this.scene.tweens.killTweensOf(m),this.canSelectTheClosestEnemy){this.canSelectTheClosestEnemy=!1,this.aliveEnemies.forEach(N=>{O.push(Math.abs(N.y-b.y))});let L=O.indexOf(Math.min.apply(Math,O));this.closestEnemyToPlane=this.aliveEnemies[L]}if(this.closestEnemyToPlane===""||this.closestEnemyToPlane===void 0)return;this.closestEnemyToPlane.getData("isDead")&&(this.canSelectTheClosestEnemy=!0);const B=[];m.forEach(()=>{B.push(Math.random()*1+.4)}),this.scene.tweens.addCounter({from:0,to:1,duration:700,ease:"Circ.easeOut",onUpdate:()=>{if(m.length===0)return;let L={x:this.closestEnemyToPlane.x,y:this.closestEnemyToPlane.y};m.forEach((N,X)=>{if(this.aliveEnemies.length===0){N.setVelocityX(-1*this.AbsoluteWidth*(X+1)*15e-5);return}let V={x:N.x,y:N.y},$=this.getDistanceVectorBetweenTwoPoints(V,L),Q=Math.sqrt(Math.pow($.x,2)+Math.pow($.y,2));N.velocityX!==B[X]*$.x*(Math.sqrt(2)/Q)&&N.setVelocityX(B[X]*$.x*(Math.sqrt(2)/Q)),N.velocityY!==B[X]*$.y*(Math.sqrt(2)/Q)&&N.setVelocityY(B[X]*$.y*(Math.sqrt(2)/Q)),N.getData("side")==="left"?N.rotation+=.05:N.getData("side")==="right"&&(N.rotation-=.05)})},onComplete:()=>{m.forEach(L=>{L.setVelocityY(S),L.rotation=0})}})}addTweenForBulletType3(m){const S=this.gameObjectsMap.get("alienShooterPlane");if(m.length===0||this.aliveEnemies.length===0)return;let b=[];if(this.scene.tweens.killTweensOf(m),this.canSelectTheClosestEnemy){this.canSelectTheClosestEnemy=!1,this.aliveEnemies.forEach(B=>{b.push(Math.abs(B.y-S.y))});let O=b.indexOf(Math.min.apply(Math,b));this.closestEnemyToPlane=this.aliveEnemies[O]}this.closestEnemyToPlane===""||this.closestEnemyToPlane===void 0||(this.closestEnemyToPlane.getData("isDead")&&(this.canSelectTheClosestEnemy=!0),m.forEach(O=>{let B=0;O.getData("side")==="left"?B=S.x-S.displayWidth*.7:O.getData("side")==="right"&&(B=S.x+S.displayWidth*.7);let L;this.closestEnemyToPlane.y<S.y?L=S.y-S.displayHeight*.4:L=S.y+S.displayHeight*.4;let N=new Phaser.Curves.Spline([{x:S.x,y:S.y+O.displayHeight*.3},{x:B,y:L},{x:this.closestEnemyToPlane.x,y:this.closestEnemyToPlane.y}]);const X={t:0,vec:new Phaser.Math.Vector2};this.scene.tweens.add({targets:X,t:1,duration:800,onUpdate:()=>{this.closestEnemyToPlane===""||this.closestEnemyToPlane===void 0||(N=new Phaser.Curves.Spline([{x:S.x,y:S.y+O.displayHeight*.3},{x:B,y:L},{x:this.closestEnemyToPlane.x,y:this.closestEnemyToPlane.y}]),N.getPoint(X.t,X.vec),O.setPosition(X.vec.x,X.vec.y))},onComplete:()=>{this.onBulletCollideWithSomething(O)}});let V=0;O.getData("side")==="left"?this.closestEnemyToPlane.y<S.y?this.closestEnemyToPlane.x<this.AbsoluteWidth*.5?V=0:V=90:this.closestEnemyToPlane.x<this.AbsoluteWidth*.5?V=-180:V=-270:O.getData("side")==="right"&&(this.closestEnemyToPlane.y<S.y?this.closestEnemyToPlane.x<this.AbsoluteWidth*.5?V=-90:V=0:this.closestEnemyToPlane.x<this.AbsoluteWidth*.5?V=270:V=180);let $=this.scene.tweens.addCounter({from:O.angle,to:V,duration:800,onUpdate:()=>{O.setAngle($.getValue())},onComplete:()=>{O.setAngle(0)}})}))}getDistanceVectorBetweenTwoPoints(m,S){return{x:S.x-m.x,y:S.y-m.y}}renderLaserImageHit(){let m=this.gameObjectsMap.get("laserImageHit");const S=this.laserImage.y-this.laserImage.displayHeight*.97,b=this.getAtlasKeyByName("laserImageHit");n().isNil(m)?(m=this.scene.add.sprite(this.laserImage.x,S,b).setDepth(this.depth),m.setVisible(!1),m.setOrigin(.5,.5),m.play(this.getAtlasPlayKeyByName("laserImageHit"),!0),this.gameObjectsMap.set("laserImageHit",m)):m.texture.key!==b&&m.setTexture(b);const O=this.shortEdge/m.width*.27*n().get(this,`scale.${this.scene.getOrientation()}`);m.scale!==O&&m.setScale(O),(m.x!==this.laserImage.x-m.displayWidth*.085||m.y!==S)&&m.setPosition(this.laserImage.x-m.displayWidth*.085,S)}renderLaserImage(){const m=this.gameObjectsMap.get("alienShooterPlane"),S=this.parent.getImageKey("laserBullet6");this.laserImage=this.gameObjectsMap.get("laserImage"),n().isNil(this.laserImage)&&(this.laserImage=this.scene.add.image(m.x,m.y-m.displayHeight*.35,S).setDepth(this.depth-1).setOrigin(.5,1),this.laserImage.setVisible(!1),this.laserImageWidth=this.laserImage.displayWidth*.6*m.scale,this.laserImageDefaultDisplayWidth=this.laserImage.displayWidth*.6,this.gameObjectsMap.set("laserImage",this.laserImage)),this.laserImage.texture.key!==S&&this.laserImage.setTexture(S);const b=this.scene.game.canvas.height;this.laserImage.displayHeight=b,this.setLaserImageWidth(),(this.laserImage.x!==m.x||this.laserImage.y!==m.y-m.displayHeight*.5)&&this.laserImage.setPosition(m.x,m.y),this.laserImage.depth!==this.depth-1&&this.laserImage.setDepth(this.depth-1)}setLaserImageWidth(){const m=this.gameObjectsMap.get("alienShooterPlane");this.laserImageWidth=(this.laserImageDefaultDisplayWidth+this.laserImageDefaultDisplayWidth*.06*this.bulletLevel)*m.scale,this.laserImage.displayWidth=this.laserImageWidth}laserColorTweenUpdateMethod(m,S,b){const O=this.gameObjectsMap.get("laserImageHit"),B={r:(m&16711680)>>16,g:(m&65280)>>8,b:m&255},L={r:(S&16711680)>>16,g:(S&65280)>>8,b:S&255},N=this.lerp(B.r,L.r,b),X=this.lerp(B.g,L.g,b),V=this.lerp(B.b,L.b,b),$=(N<<16)+(X<<8)+V;this.laserImage.setTint($),O.setTint($)}laserColorTweenOnCompleteMethod(m){const S=this.gameObjectsMap.get("laserImageHit");this.laserImage.tintTopLeft!==m&&(this.laserImage.clearTint(),this.laserImage.setTint(m)),S.tintTopLeft!==m&&(S.clearTint(),S.setTint(m))}addTweenForLaserColor(){this.scene.tweens.addCounter({from:0,to:1,duration:200,onUpdate:m=>{const S=m.getValue();this.laserColorTweenUpdateMethod(this.laserColor1,this.laserColor2,S)},onComplete:()=>{this.laserColorTweenOnCompleteMethod(this.laserColor2),this.scene.tweens.addCounter({from:0,to:1,duration:200,onUpdate:m=>{const S=m.getValue();this.laserColorTweenUpdateMethod(this.laserColor2,this.laserColor1,S)},onComplete:()=>{this.laserColorTweenOnCompleteMethod(this.laserColor1),this.addTweenForLaserColor()}})}})}lerp(m,S,b){return(1-b)*m+b*S}renderBulletType6(){const m=this.gameObjectsMap.get("alienShooterPlane"),S=this.parent.getImageKey("bullet6");let b=this.gameObjectsMap.get("bulletLaser");n().isNil(b)&&(b=this.heroBulletGroup.create(m.x,m.y-m.displayHeight*.5,S).setDepth(this.depth-5),b.body.onWorldBounds=!0,b.setCollideWorldBounds(!0),b.body.name="heroBullet",b.body.label="heroBullet",b.body.id="heroBullet_laser",b.body.allowGravity=!1,b.setFriction(0,0),b.disableBody(!0,!0),this.gameObjectsMap.set("bulletLaser",b)),b.texture.key!==S&&b.setTexture(S),b.setSize(b.width,b.height);const O=m.displayWidth*.25/b.width;b.scale!==O&&b.setScale(O),b.setVisible(!1),b.depth!==this.depth-5&&b.setDepth(this.depth-5)}bulletType6Call(){const m=this.gameObjectsMap.get("bulletLaser");m.setSize(m.width,m.height);const S=this.gameObjectsMap.get("alienShooterPlane");let b=-1*(this.AbsoluteHeight*6e-4);m.enableBody(!0,S.x,S.y-S.displayHeight*.5,!0,!1),this.scene.game.loop.actualFps<25?b*=2:this.scene.game.loop.actualFps<35?b*=4:b*=8,m.setVelocityY(b),this.laserImage.setVisible(!0),(this.laserImage.x!==S.x||this.laserImage.y!==S.y-S.displayHeight*.5)&&this.laserImage.setPosition(S.x,S.y)}bulletCountForEachShoot(){if(this.isHeroTakesSuper)return this.bulletType==="3"?this.counter%4===0?20:18:this.bulletType==="4"?this.counter%2===0?10:4:this.bulletType==="5"?(this.timerEvent.delay=this.shootFrequencyInMilliseconds*2,20):this.bulletType==="6"?4:20;{let m=0;if(this.bulletType==="1")return this.bulletLevel;if(this.bulletType==="2")return this.counter%8===0?(this.bulletLevel>=4&&this.bulletLevel<7||this.bulletLevel===10?m=1:this.bulletLevel>=7&&this.bulletLevel<10&&(m=2),this.bulletLevel+m):(this.bulletLevel>=4&&this.bulletLevel<7?m=-1:this.bulletLevel>=7&&this.bulletLevel<10?m=-2:this.bulletLevel===10&&(m=-3),this.bulletLevel+m);if(this.bulletType==="3")return this.counter%16===0?(this.bulletLevel===1?m=2:this.bulletLevel===2||this.bulletLevel===3?m=1:this.bulletLevel===6||this.bulletLevel===7?m=-1:this.bulletLevel===8||this.bulletLevel===9?m=-2:this.bulletLevel===10&&(m=-3),this.bulletLevel+m):this.bulletLevel<3?1:(this.bulletLevel===3?m=-1:this.bulletLevel>3&&this.bulletLevel<6?m=-2:this.bulletLevel>5&&this.bulletLevel<8?m=-3:this.bulletLevel>7&&this.bulletLevel<10?m=-4:this.bulletLevel===10&&(m=-5),this.bulletLevel+m);if(this.bulletType==="4")return this.counter%4===0?(this.bulletLevel===4||this.bulletLevel===6?m=1:this.bulletLevel===9&&(m=-1),this.bulletLevel+m):this.bulletLevel>=4&&this.bulletLevel<=7?3:this.bulletLevel>=8?4:this.bulletLevel;if(this.bulletType==="5"){if(this.bulletLevel<5)return this.timerEvent.delay=this.isFirstShootForBullet5?this.shootFrequencyInMilliseconds:this.shootFrequencyInMilliseconds*7,this.bulletLevel+5;if(this.bulletLevel>=5&&this.bulletLevel<10)return this.timerEvent.delay=this.isFirstShootForBullet5?this.shootFrequencyInMilliseconds:this.shootFrequencyInMilliseconds*5,this.bulletLevel+4;if(this.bulletLevel===10)return this.timerEvent.delay=this.isFirstShootForBullet5?this.shootFrequencyInMilliseconds:this.shootFrequencyInMilliseconds*3,this.bulletLevel+3}else if(this.bulletType==="6"){if(this.timerEvent.delay=this.shootFrequencyInMilliseconds*8,this.bulletLevel<7)return 2;if(this.bulletLevel>=7)return 4}}}findMiddleIndex(m){return m%2===1?Math.floor(m/2):m/2-.5}shoot(){if(this.isLevelEnd&&this.popUpVisible)return;if((!this.h5MuteSounds||!this.fullGameMuteSounds)&&!this.isBulletSoundStarted&&this.bulletType!=="6"){this.isBulletSoundStarted=!0;const V=this.selectedSounds.bullet[0].key;this.playSound(V)}this.timerEvent.delay=this.shootFrequencyInMilliseconds,this.isFirstShootForBullet5=!1,this.counter+=1,this.onEnemyHitCallBack();const m=-1*(this.AbsoluteHeight*.004)*.15,S=this.shortEdge*2e-4,b=this.gameObjectsMap.get("alienShooterPlane"),O=[];let B=this.bulletCountForEachShoot();this.bulletType==="5"&&this.pauseSound();for(let V=0;V<B;V++)O.push(this.bulletArray.shift());let L=this.findMiddleIndex(O.length),N=[],X=[];this.leftOrRight=this.leftOrRight==="right"?"left":"right",O.forEach((V,$)=>{V.texture.key!==this.bulletImageKey&&V.setTexture(this.bulletImageKey);const Q=b.displayWidth*.25/V.width;V.scale!==Q&&V.setScale(Q),V.depth!==this.depth-5&&V.setDepth(this.depth-5),this.enableBullets.push(V),this.bulletType==="1"||this.bulletType==="5"?(this.powerUpLevelChangeForBullet1AndBullet5(V,$,L,S,B),V.setVelocityY(m)):this.bulletType==="2"?(this.powerUpLevelChangeForBullet2(V,$,L,O),V.setVelocityY(m)):this.bulletType==="3"?this.powerUpLevelChangeForBullet3(V,$,N,X,O,L,m):this.bulletType==="4"?this.powerUpLevelChangeForBullet4(V,$,N,O,X,m):this.bulletType==="6"&&this.bulletLevel>=4&&(this.powerUpLevelChangeForBullet6(V,$),V.setVelocityY(m))})}}function f(ke,m,S){return(1-S)*ke+S*m}class g extends o{constructor(m){super(m);super.update(m),this.currentWaveEnemyInfos=[],this.waveInfos=[],this.currentWaveIndex=1,this.enemySpritesMap=new Map,this.bossContainersMap=new Map,this.enemyHealthBarsMap=new Map,this.bulletArray=[],this.enemyBulletGroup=null,this.enemyGroup=null,this.powerUpArray=[],this.enemyShootTimeArray=[],this.hitImageArray=[],this.tweens=[],this.timerEvent=null,this.diverEnemyTimerEvent=null,this.isWaveEntranceTweenAdded=!1,this.isWaveTextTweenAdded=!1,this.drawReferenceRectangle=!1,this.isTapped=!1,this.loopTweenEnemies=[],this.isEnemyEntranceTweenCompleted=!1,this.weapons=[],this.areBossShootLightsAdded=!1,this.bossShootLights=[],this.isWeaponsArrayCreated=!1,this.smallOrBig="small",this.isEqual=!0,this.bigBulletDropOrderArray=[],this.baseBulletDamage=0,this.h5MuteSounds=!1,this.fullGameMuteSounds=!1,this.bossShootInterval=null,this.enablePowerUps=[],this.enableBullets=[],this.pointerDownCallBack=null,this.levelNumber=1}load(){super.load(),this.loadAtlases(),this.loadTextures(),this.loadSounds(),this.loadBitmapFonts()}bitmapFontsLoadComplete(){super.bitmapFontsLoadComplete(),this.isAtlasesLoadComplete&&this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}atlasesLoadComplete(){super.atlasesLoadComplete(),this.isAtlasesLoadComplete&&this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}textureLoadComplete(){super.textureLoadComplete(),this.isAtlasesLoadComplete&&this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}soundLoadComplete(){super.soundLoadComplete(),this.isAtlasesLoadComplete&&this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),this.isWeaponsArrayCreated||(this.isWeaponsArrayCreated=!0,this.createWeaponsArray()),this.areBossShootLightsAdded||(this.areBossShootLightsAdded=!0,this.addBossShootLights()),this.addEnemyGroup(),this.renderWaveText("caption"),this.renderWaveText("progress"),this.parent.isLevelBased&&this.renderLevelText(),this.addAnimations(),this.isWaveEntranceTweenAdded&&(this.isCurrentlyBossWave()?this.renderEnemyBoss():(this.renderEnemySprites(),this.renderEnemyHealthBars())),this.renderEnemyBullets(),this.addPowerupGroup(),this.renderPowerUp(),this.renderEnemyHitImage(),this.renderBossHealthBar(),this.playWaveTextTween(),this.parent.isLevelBased&&this.playLevelTextTween()}createWeaponsArray(){this.weapons.push({type:"1",name:"plane1"}),this.weapons.push({type:"2",name:"plane2"}),this.weapons.push({type:"3",name:"plane3"}),this.weapons.push({type:"4",name:"plane4"}),this.weapons.push({type:"5",name:"plane5"}),this.weapons.push({type:"6",name:"plane6"})}addBossShootLights(){for(let m=0;m<3;m++){const S=this.scene.add.image(0,0,this.selectedImages.bossShootLight[0].key).setVisible(!1);S.setData("index",m),S.setDepth(this.depth+1),this.bossShootLights.push(S)}}isCurrentlyBossWave(){return this.waveInfos[0].isBoss}getPowerUpFrameNames(){const m=this.parent.getAtlasKeyByName("plane");let b=this.scene.textures.get(m).getFrameNames();const O=this.getAtlasKeyByName("powerUps");return this.scene.textures.get(O).getFrameNames().forEach(N=>{(N.includes("wing")||N.includes("gunlevelup"))&&b.push(N)}),b}addEnemyGroup(){n().isNil(this.enemyGroup)&&(this.enemyGroup=this.scene.physics.add.group())}clearTweensOfEnemies(){Array.from(this.enemySpritesMap.values()).forEach(m=>{this.scene.tweens.killTweensOf(m)}),Array.from(this.bossContainersMap.values()).forEach(m=>{this.scene.tweens.killTweensOf(m)})}playLevelTextTween(){if(this.isLevelTextTweenEnabled&&!this.levelTextTweenAdded){this.levelTextTweenAdded=!0;const m=this.localization[this.options.language];let S=m.levelCaption+" "+this.levelNumber;const b=m.levelCaption+"Text",O=this.gameObjectsMap.get(b);O.text!==S&&O.setText(S);const B=O.fontSize*2;this.levelTextTween=this.scene.tweens.add({duration:1e3,ease:"Circ.easeOut",targets:O,x:this.CenterAbsoluteX,onStart:()=>{O.setPosition(-this.scene.game.canvas.width*.5,this.CenterAbsoluteY-B),O.setVisible(!0)},onComplete:()=>{this.scene.tweens.add({duration:1e3,ease:"Circ.easeIn",targets:O,x:this.scene.game.canvas.width*1.5,onComplete:()=>{O.setVisible(!1)}})}})}}playWaveTextTween(){if(this.isWaveTextTweenEnabled&&!this.isWaveTextTweenAdded){this.isWaveTextTweenAdded=!0;const m=this.getWaveTextByType("caption"),S=this.getWaveTextByType("progress"),b=[m,S],O=this.getProgressTextValue();S.text!==O&&S.setText(O);const B=m.fontSize*1.5;this.waveTextTween=this.scene.tweens.add({duration:1e3,ease:"Circ.easeOut",targets:b,x:this.CenterAbsoluteX,onStart:()=>{m.setPosition(-this.scene.game.canvas.width*.5,this.CenterAbsoluteY-B*.5),S.setPosition(this.scene.game.canvas.width*1.5,this.CenterAbsoluteY+B*.5),m.setVisible(!0),S.setVisible(!0)},onComplete:()=>{this.scene.tweens.add({duration:1e3,ease:"Circ.easeIn",targets:b,x:{value:L=>{if(L.getData("type")==="caption")return this.scene.game.canvas.width*1.5;if(L.getData("type")==="progress")return-this.scene.game.canvas.width*.5;throw{message:"target type data is not valid",target:L}}},onComplete:()=>{m.setVisible(!1),S.setVisible(!1)}})}})}this.isWaveEntranceTweenAdded||(this.clearTweensOfEnemies(),this.isCurrentlyBossWave()?this.renderEnemyBoss(!0):this.renderEnemySprites(!0),this.playWaveEntranceTween())}getDistanceVectorBetweenTwoPoints(m,S){return{x:S.x-m.x,y:S.y-m.y}}getUnitVector(m){const S=Math.sqrt(Math.pow(m.x,2)+Math.pow(m.y,2));return{x:m.x/S,y:m.y/S}}getAngleBetweenTwoPoints(m,S){let b=Math.atan2(S.y-m.y,S.x-m.x)*180/Math.PI;return m.x<S.x&&m.y===S.y?b=270:m.x<S.x&&m.y<S.y?b=b-90:m.x===S.x&&m.y<S.y?b=0:m.x>S.x||m.y>S.y?b=b-90:b=0,b}addAnimations(){Object.entries(this.selectedAtlases).forEach(([m])=>{const S=this.getAtlasKeyByName(m),b=this.getAtlasPlayKeyByName(m),O=this.getAnimationName(m);let B=this.gameObjectsMap.get(O);if(n().isNil(B))B=this.scene.anims.create({key:b,repeat:0,showOnStart:!0,frames:this.scene.anims.generateFrameNames(S)}),this.gameObjectsMap.set(O,B);else{const L=this.getAtlasKeyByName(m),N=this.getAtlasPlayKeyByName(m);B.key!==N&&(B=this.scene.anims.create({key:N,repeat:-1,frames:this.scene.anims.generateFrameNames(L),showOnStart:!0}),this.gameObjectsMap.set("animation",B))}})}renderEnemyAnimationStop(){Array.from(this.enemySpritesMap.values()).forEach(m=>{m.anims.stop()})}removeAllObjectBodies(){this.enablePowerUps.forEach(m=>{m.disableBody(!0,!0);let S=this.gameObjectsMap.get(m.body.id+"_levelUp");n().isNil(S)||S.setVisible(!1),this.removePowerUpAssets(m)}),this.enableBullets.forEach(m=>{this.enemyBulletCollideCallback(m)})}editEnableBullets(m){this.enableBullets.splice(m,1)}editEnablePowerUps(m){this.enablePowerUps.splice(m,1)}removePowerUpAssets(m){let S=this.gameObjectsMap.get(m.body.id+"_glow");n().isNil(S)||(this.scene.tweens.killTweensOf(S),S.setVisible(!1));let b=this.gameObjectsMap.get(m.body.id+"_circle");n().isNil(b)||(this.scene.tweens.killTweensOf(b),b.setVisible(!1));let O=this.gameObjectsMap.get(m.body.id+"_wingFrame");n().isNil(O)||(this.scene.tweens.killTweensOf(O),O.setVisible(!1)),this.powerUpArray.push({name:m.body.name,powerUpSprite:m})}getWaveTextByType(m){return this.gameObjectsMap.get(this.getWaveTextName(m))}getWaveTextName(m){return"waveText_"+m}getAnimationName(m){return"animation"+m}getAtlasKeyByName(m){return n().get(this,`selectedAtlases.${m}`).find(S=>S.variant==="image").key}getAtlasPlayKeyByName(m){return this.getAtlasKeyByName(m)+"_"+this.componentId}renderDiverEnemyTween(){this.onDiverEnemyTweensCallback()}renderLevelText(){const m=this.localization[this.options.language];let S=m.levelCaption+" "+this.levelNumber;const b=m.levelCaption+"Text";let O=this.gameObjectsMap.get(b);n().isNil(O)&&(O=this.scene.add.bitmapText(this.CenterAbsoluteX,this.CenterAbsoluteY,this.selectedBitmapFonts.font[0].key,S).setDepth(this.depth+5).setVisible(!1).setOrigin(.5),this.gameObjectsMap.set(b,O)),O.text!==S&&O.setText(S);const B=parseInt("0x"+m.fontColor.replace("#",""));O.tintTopLeft!==B&&(O.clearTint(),O.setTint(B));const L=this.getShortEdge(),N=m.fontSize*L*.1;O.fontSize!==N&&O.setFontSize(N)}renderWaveText(m){const S=this.localization[this.options.language];let b;m==="caption"?b="":m==="progress"&&(b=this.getProgressTextValue());const O=this.getWaveTextName(m);let B=this.gameObjectsMap.get(O);n().isNil(B)&&(B=this.scene.add.bitmapText(this.CenterAbsoluteX,this.CenterAbsoluteY,this.selectedBitmapFonts.font[0].key,b).setDepth(this.depth+5).setVisible(!1).setOrigin(.5),B.setData("type",m),this.gameObjectsMap.set(O,B)),B.text!==b&&B.setText(b);const L=parseInt("0x"+S.fontColor.replace("#",""));B.tintTopLeft!==L&&(B.clearTint(),B.setTint(L));const N=this.getShortEdge(),X=S.fontSize*N*.1;B.fontSize!==X&&B.setFontSize(X)}getProgressTextValue(){return this.parent.isLevelBased?this.currentWaveIndex+"/"+this.levelLength:this.currentWaveIndex}playBossContainerContinuousMoveTween(m){this.scene.tweens.killTweensOf(m);const S=this.getShortEdge();let b=1;const O=(S-this.getCurrentBossContainerDisplayWidth())*.5;this.scene.tweens.add({duration:4e3,targets:m,repeat:-1,x:m.x+O,yoyo:!0,onYoyo:B=>{const L=this.getBossContainerPosition();B.data.some(X=>{if(X.key==="x")return L.x!==X.start&&(X.start=L.x),!0})},onRepeat:B=>{if(!this.isCurrentlyBossWave()){this.scene.tweens.killTweensOf(m);return}b++;const L=this.getBossContainerPosition();(L.x!==m.x||L.y!==m.y)&&m.setPosition(L.x,L.y);const N=(S-this.getCurrentBossContainerDisplayWidth())*.5,X=b%2===0?L.x-N:L.x+N;B.updateTo("x",X)}})}getCurrentBoss(){const S=this.currentWaveEnemyInfos[0].type,b=this.getBossContainerName(S);return this.bossContainersMap.get(b)}getBossContainerEntranceTweenStartPosition(){return{x:this.scene.game.canvas.width*.5,y:-this.scene.game.canvas.height*.5}}playWaveEntranceTween(){if(!this.isWaveEntranceTweenAdded){this.isWaveEntranceTweenAdded=!0,this.isEnemyEntranceTweenCompleted=!1;const m=this.getAliveEnemies();if(this.onAliveEnemiesCallBack(m),this.isCurrentlyBossWave()){const b=this.waveInfos[0].type;if(this.deleteBossShootTimerEvent(),b==="1"){const O=this.getBossContainerByType(b);this.scene.tweens.killTweensOf(O);const B=O.list.find(X=>X.getData("partID")==="leftWing");B.setPosition(B.getData("initialX"),B.getData("initialY")),B.setAngle(B.getData("initialAngle"));const L=O.list.find(X=>X.getData("partID")==="rightWing");L.setPosition(L.getData("initialX"),L.getData("initialY")),L.setAngle(L.getData("initialAngle"));const N=this.getBossContainerPosition();this.scene.tweens.add({duration:1250,targets:O,ease:"Circ.easeOut",y:N.y,onStart:()=>{const X=this.getBossContainerEntranceTweenStartPosition();O.setPosition(X.x,X.y),B.setAngle(B.angle+45),L.setAngle(L.angle-45)},onComplete:()=>{const X=this.getBossContainerPosition();(O.x!==X.x||O.y!==X.y)&&O.setPosition(X.x,X.y),this.scene.tweens.add({duration:500,targets:[B,L],ease:"Quad.easeOut",angle:0,onComplete:()=>{this.playBossContainerContinuousMoveTween(O),this.bossShoot(),this.addBossShootInterval(5e3),this.isEnemyEntranceTweenCompleted=!0}})}})}else if(b==="2"){const O=this.getBossContainerByType(b);this.scene.tweens.killTweensOf(O);const B=O.list.find(le=>le.getData("partID")==="wingleft");B.setPosition(B.getData("initialX"),B.getData("initialY")),B.setAngle(B.getData("initialAngle"));const L=O.list.find(le=>le.getData("partID")==="wingright");L.setPosition(L.getData("initialX"),L.getData("initialY")),L.setAngle(L.getData("initialAngle"));const N=O.list.find(le=>le.getData("partID")==="leftTopFlap");N.setPosition(N.getData("initialX"),N.getData("initialY")),N.setAngle(N.getData("initialAngle"));const X=O.list.find(le=>le.getData("partID")==="leftBottomFlap");X.setPosition(X.getData("initialX"),X.getData("initialY")),X.setAngle(X.getData("initialAngle"));const V=O.list.find(le=>le.getData("partID")==="rightTopFlap");V.setPosition(V.getData("initialX"),V.getData("initialY")),V.setAngle(V.getData("initialAngle"));const $=O.list.find(le=>le.getData("partID")==="rightBottomFlap");$.setPosition($.getData("initialX"),$.getData("initialY")),$.setAngle($.getData("initialAngle"));const Q=O.list.find(le=>le.getData("partID")==="leftGunSmall");Q.setPosition(Q.getData("initialX"),Q.getData("initialY")),Q.setAngle(Q.getData("initialAngle"));const me=O.list.find(le=>le.getData("partID")==="rightGunSmall");me.setPosition(me.getData("initialX"),me.getData("initialY")),me.setAngle(me.getData("initialAngle"));const se=O.list.find(le=>le.getData("partID")==="gunBig"),q=this.getBossContainerPosition();this.scene.tweens.add({duration:1250,targets:O,ease:"Circ.easeOut",y:q.y,onStart:()=>{O.setPosition(this.scene.game.canvas.width*.5,-this.scene.game.canvas.height*.5),N.setAngle(N.angle+90),X.setAngle(X.angle+90),V.setAngle(V.angle-90),$.setAngle($.angle-90),Q.setAngle(Q.angle-90),me.setAngle(me.angle+90),se.setY(54)},onComplete:()=>{const le=this.getBossContainerPosition();(O.x!==le.x||O.y!==le.y)&&O.setPosition(le.x,le.y),this.scene.tweens.add({duration:500,targets:[N,X,V,$,Q,me,se],ease:"Quad.easeOut",angle:(J,ne,ge,he)=>he===0?14:he===1?0:he===2?-14:he===3||he===4||he===5?0:J.angle,y:(J,ne,ge,he)=>he===6?139:J.y,onComplete:()=>{this.playBossContainerContinuousMoveTween(O),this.bossShoot(),this.addBossShootInterval(6e3),this.isEnemyEntranceTweenCompleted=!0}})}})}else if(b==="3"){const O=this.getBossContainerByType(b);this.scene.tweens.killTweensOf(O);const B=O.list.find(Q=>Q.getData("partID")==="gunBig"),L=O.list.find(Q=>Q.getData("partID")==="leftWing");L.setPosition(L.getData("initialX"),L.getData("initialY")),L.setAngle(L.getData("initialAngle"));const N=O.list.find(Q=>Q.getData("partID")==="leftWing");N.setPosition(N.getData("initialX"),N.getData("initialY")),N.setAngle(N.getData("initialAngle"));const X=O.list.find(Q=>Q.getData("partID")==="leftGunSmall");X.setPosition(X.getData("initialX"),X.getData("initialY")),X.setAngle(X.getData("initialAngle"));const V=O.list.find(Q=>Q.getData("partID")==="rightGunSmall");V.setPosition(V.getData("initialX"),V.getData("initialY")),V.setAngle(V.getData("initialAngle"));const $=this.getBossContainerPosition();this.scene.tweens.add({duration:1250,targets:O,ease:"Circ.easeOut",y:$.y,onStart:()=>{O.setPosition(this.scene.game.canvas.width*.5,-this.scene.game.canvas.height*.5),B.setY(93),X.setY(105),V.setY(105)},onComplete:()=>{const Q=this.getBossContainerPosition();(O.x!==Q.x||O.y!==Q.y)&&O.setPosition(Q.x,Q.y),this.scene.tweens.add({duration:500,targets:[B,X,V],ease:"Quad.easeOut",y:(me,se,q,le)=>{if(le===0)return 143;if(le===1)return 155;if(le===2)return 155},onComplete:()=>{this.playBossContainerContinuousMoveTween(O),this.bossShoot(),this.addBossShootInterval(5e3),this.isEnemyEntranceTweenCompleted=!0}})}})}else if(b==="4"){const O=this.getBossContainerByType(b);this.scene.tweens.killTweensOf(O);const B=O.list.find(Q=>Q.getData("partID")==="wingleft");B.setPosition(B.getData("initialX"),B.getData("initialY")),B.setAngle(B.getData("initialAngle"));const L=O.list.find(Q=>Q.getData("partID")==="wingright");L.setPosition(L.getData("initialX"),L.getData("initialY")),L.setAngle(L.getData("initialAngle"));const N=O.list.find(Q=>Q.getData("partID")==="leftGunBig");N.setPosition(N.getData("initialX"),N.getData("initialY")),N.setAngle(N.getData("initialAngle"));const X=O.list.find(Q=>Q.getData("partID")==="rightGunBig");X.setPosition(X.getData("initialX"),X.getData("initialY")),X.setAngle(X.getData("initialAngle"));const V=O.list.find(Q=>Q.getData("partID")==="gunSmall"),$=this.getBossContainerPosition();this.scene.tweens.add({duration:1250,targets:O,ease:"Circ.easeOut",y:$.y,onStart:()=>{O.setPosition(this.scene.game.canvas.width*.5,-this.scene.game.canvas.height*.5),N.setAngle(N.angle-30),X.setAngle(X.angle+30)},onComplete:()=>{const Q=this.getBossContainerPosition();(O.x!==Q.x||O.y!==Q.y)&&O.setPosition(Q.x,Q.y),this.scene.tweens.add({duration:500,targets:[N,X,V],ease:"Quad.easeOut",angle:0,y:(me,se,q,le)=>le===2?170:me.y,onComplete:()=>{this.playBossContainerContinuousMoveTween(O),this.bossShoot(),this.addBossShootInterval(6e3),this.isEnemyEntranceTweenCompleted=!0}})}})}else if(b==="5"){const O=this.getBossContainerByType(b);this.scene.tweens.killTweensOf(O);const B=O.list.find(Q=>Q.getData("partID")==="wingleft");B.setPosition(B.getData("initialX"),B.getData("initialY")),B.setAngle(B.getData("initialAngle"));const L=O.list.find(Q=>Q.getData("partID")==="wingright");L.setPosition(L.getData("initialX"),L.getData("initialY")),L.setAngle(L.getData("initialAngle"));const N=O.list.find(Q=>Q.getData("partID")==="leftGunBig");N.setPosition(N.getData("initialX"),N.getData("initialY")),N.setAngle(N.getData("initialAngle"));const X=O.list.find(Q=>Q.getData("partID")==="rightGunBig");X.setPosition(X.getData("initialX"),X.getData("initialY")),X.setAngle(X.getData("initialAngle"));const V=O.list.find(Q=>Q.getData("partID")==="gunSmall"),$=this.getBossContainerPosition();this.scene.tweens.add({duration:1250,targets:O,ease:"Circ.easeOut",y:$.y,onStart:()=>{O.setPosition(this.scene.game.canvas.width*.5,-this.scene.game.canvas.height*.5),N.setAngle(N.angle-90),X.setAngle(X.angle+90),V.setY(54)},onComplete:()=>{const Q=this.getBossContainerPosition();(O.x!==Q.x||O.y!==Q.y)&&O.setPosition(Q.x,Q.y),this.scene.tweens.add({duration:500,targets:[N,X,V],ease:"Quad.easeOut",angle:(me,se,q,le)=>le===0||le===1||le===2?0:me.angle,y:(me,se,q,le)=>le===2?110:me.y,onComplete:()=>{this.playBossContainerContinuousMoveTween(O),this.bossShoot(),this.addBossShootInterval(6e3),this.isEnemyEntranceTweenCompleted=!0}})}})}else throw{message:"There is no entrance tween for this boss type",type:b}}else this.renderPowerUp(),this.pointerDownCallBack&&(this.scene.input.removeListener("pointerdown",this.pointerDownCallBack),this.pointerDownCallBack=null),this.pointerDownCallBack=()=>{this.resetTimerEvent(),this.isEnemyEntranceTweenCompleted=!0},this.waveInfos[0].entranceTweenType==="1"?(m.forEach(S=>{S.setX(S.x-this.scene.game.canvas.width)}),this.waveEntranceTween=this.scene.tweens.add({targets:m,duration:400,x:`+=${this.scene.game.canvas.width}`,delay:S=>S.getData("columnIndex")*200,onStart:(S,b)=>{b.forEach(O=>{O.enableBody(!0,O.x,O.y,!0,!1)})},onUpdate:(S,b)=>{b.getData("isDead")&&b.setPosition(b.getData("deadX"),b.getData("deadY"))},onComplete:()=>{this.getAliveEnemies().forEach(O=>{const B=this.getEnemySpritePosition(O);(O.x!==B.x||O.y!==B.y)&&O.setPosition(B.x,B.y)});const b=this.waveInfos[0].loopTweenType;b==="1"?this.prepareLoopTween(!0):b==="2"&&this.prepareLoopTween(!1),this.currentWaveIndex===1?this.isTapped?(this.resetTimerEvent(),this.isEnemyEntranceTweenCompleted=!0):this.scene.input.once("pointerdown",this.pointerDownCallBack):(this.resetTimerEvent(),this.isEnemyEntranceTweenCompleted=!0)}})):this.waveInfos[0].entranceTweenType==="2"?(m.forEach(S=>{S.setX(S.x+this.scene.game.canvas.width)}),this.waveEntranceTween=this.scene.tweens.add({targets:m,duration:400,x:`-=${this.scene.game.canvas.width}`,delay:S=>S.getData("columnIndex")*200,onUpdate:(S,b)=>{b.getData("isDead")&&b.setPosition(b.getData("deadX"),b.getData("deadY"))},onComplete:()=>{this.getAliveEnemies().forEach(O=>{const B=this.getEnemySpritePosition(O);(O.x!==B.x||O.y!==B.y)&&O.setPosition(B.x,B.y)});const b=this.waveInfos[0].loopTweenType;b==="1"?this.prepareLoopTween(!0):b==="2"&&this.prepareLoopTween(!1),this.currentWaveIndex===1?this.isTapped?(this.resetTimerEvent(),this.isEnemyEntranceTweenCompleted=!0):this.scene.input.once("pointerdown",this.pointerDownCallBack):(this.resetTimerEvent(),this.isEnemyEntranceTweenCompleted=!0)}})):this.waveInfos[0].entranceTweenType==="3"&&(m.forEach(S=>{S.setPosition(this.CenterAbsoluteX,this.CenterAbsoluteY)}),this.waveEntranceTween=this.scene.tweens.add({targets:m,duration:500,x:S=>this.getEnemySpritePosition(S).x,y:S=>this.getEnemySpritePosition(S).y,onUpdate:(S,b)=>{b.getData("isDead")&&b.setPosition(b.getData("deadX"),b.getData("deadY"))},onComplete:()=>{this.getAliveEnemies().forEach(O=>{const B=this.getEnemySpritePosition(O);(O.x!==B.x||O.y!==B.y)&&O.setPosition(B.x,B.y)});const b=this.waveInfos[0].loopTweenType;b==="1"?this.prepareLoopTween(!0):b==="2"&&this.prepareLoopTween(!1),this.currentWaveIndex===1?this.isTapped?(this.resetTimerEvent(),this.isEnemyEntranceTweenCompleted=!0):this.scene.input.once("pointerdown",this.pointerDownCallBack):(this.resetTimerEvent(),this.isEnemyEntranceTweenCompleted=!0)}}))}}addBossShootInterval(m){this.bossShootTimer=this.scene.time.addEvent({delay:m,loop:!0,callback:this.bossShoot,callbackScope:this})}prepareLoopTween(m=!0){const S=[],b=Math.ceil(this.currentWaveEnemyInfos.length/this.maxEnemyCountInRow);let O=-1,B=-1;if(b<3)throw{message:"row count should 3 or higher",rowCount:b};if(this.maxEnemyCountInRow<3)throw{message:"max enemy count in row should be 3 or higher",maxEnemyCountInRow:this.maxEnemyCountInRow};b%2===0?O=b/2-1:O=b/2-.5,this.maxEnemyCountInRow%2===0?B=this.maxEnemyCountInRow/2-1:B=this.maxEnemyCountInRow/2-.5;const L=this.getEnemyByRowAndColumnIndex({rowIndex:O,columnIndex:B-1});n().isNil(L)||S.push(L);const N=this.getEnemyByRowAndColumnIndex({rowIndex:O-1,columnIndex:B-1});n().isNil(N)||S.push(N);const X=this.getEnemyByRowAndColumnIndex({rowIndex:O-1,columnIndex:B});n().isNil(X)||S.push(X);const V=this.getEnemyByRowAndColumnIndex({rowIndex:O-1,columnIndex:B+1});n().isNil(V)||S.push(V);const $=this.getEnemyByRowAndColumnIndex({rowIndex:O,columnIndex:B+1});n().isNil($)||S.push($);const Q=this.getEnemyByRowAndColumnIndex({rowIndex:O+1,columnIndex:B+1});n().isNil(Q)||S.push(Q);const me=this.getEnemyByRowAndColumnIndex({rowIndex:O+1,columnIndex:B});n().isNil(me)||S.push(me);const se=this.getEnemyByRowAndColumnIndex({rowIndex:O+1,columnIndex:B-1});n().isNil(se)||S.push(se),this.addLoopTween(S,m)}addLoopTween(m,S){const b=m.filter(O=>{if(O.visible&&!O.getData("isDead"))return O});b.length<2||(this.loopTweenEnemies=[...b],this.loopTween=this.scene.tweens.add({duration:500,targets:b,loop:-1,x:{getEnd:(O,B,L,N)=>S?N===b.length-1?b[0].x:b[N+1].x:N===0?b[b.length-1].x:b[N-1].x},y:{getEnd:(O,B,L,N)=>S?N===b.length-1?b[0].y:b[N+1].y:N===0?b[b.length-1].y:b[N-1].y},onLoop:()=>{let O={};if(S?(O.rowIndex=b[0].getData("rowIndex"),O.columnIndex=b[0].getData("columnIndex")):(O.rowIndex=b[b.length-1].getData("rowIndex"),O.columnIndex=b[b.length-1].getData("columnIndex")),S)for(let B=0;B<b.length;B++){const L=b[B];if(B!==b.length-1?(L.setData("rowIndex",b[B+1].getData("rowIndex")),L.setData("columnIndex",b[B+1].getData("columnIndex"))):(L.setData("rowIndex",O.rowIndex),L.setData("columnIndex",O.columnIndex)),!L.getData("isDead")){const N=this.getEnemySpritePosition(L);(N.x!==L.x||N.y!==L.y)&&L.setPosition(N.x,N.y)}}else for(let B=b.length-1;B>-1;B--){const L=b[B];if(B!==0?(L.setData("rowIndex",b[B-1].getData("rowIndex")),L.setData("columnIndex",b[B-1].getData("columnIndex"))):(L.setData("rowIndex",O.rowIndex),L.setData("columnIndex",O.columnIndex)),!L.getData("isDead")){const N=this.getEnemySpritePosition(L);(N.x!==L.x||N.y!==L.y)&&L.setPosition(N.x,N.y)}}this.loopTween.resetTweenData(!1)},onUpdate:(O,B)=>{this.setEnemyHealthBarPosition(B)}}))}addEnemyPushBackTween(m){const S=this.getEnemySpritePosition(m);m.setData("isEnemyHitTweenCompleted",!1),this.scene.tweens.add({targets:m,duration:50,y:m.y-m.displayHeight*.2,onComplete:()=>{this.scene.tweens.add({targets:m,duration:50,y:S.y,onComplete:()=>{m.setData("isEnemyHitTweenCompleted",!0)}})}})}killAllTweens(){n().isNil(this.loopTween)||this.scene.tweens.remove(this.loopTween),n().isNil(this.waveTextTween)||this.scene.tweens.remove(this.waveTextTween),n().isNil(this.waveEntranceTween)||this.scene.tweens.remove(this.waveEntranceTween)}getEnemyByRowAndColumnIndex(m){let S=m.rowIndex,b=m.columnIndex;m.rowIndex<0&&(S=0),m.columnIndex<0&&(b=0);const O=this.getEnemySprite(this.getEnemyName(S*this.maxEnemyCountInRow+b+1));return!n().isNil(O)&&O.visible&&!O.getData("isDead")?O:null}checkAllEnemiesKilled(){return!Array.from(this.enemySpritesMap.values()).some(m=>!m.getData("isDead"))}checkAllEnemiesExploded(){return!Array.from(this.enemySpritesMap.values()).some(m=>m.visible)}getEnemySprite(m){return this.enemySpritesMap.get(m)}getBossContainerPosition(){return{x:this.scene.game.canvas.width*.5,y:this.scene.game.canvas.height*.3}}getBossTextureFrameName(m){return"boss-"+m.type+"-"+m.variant+"-"+m.part}getBossContainerByType(m){return this.bossContainersMap.get(this.getBossContainerName(m))}getCurrentBossContainerDisplayWidth(){const S=this.waveInfos[0].type,b=this.getBossContainerByType(S);return b!==void 0?b.getData("initialWidth")*b.scale:0}playExplosionSprite(m,S){const b=this.gameObjectsMap.get("explosionSprite");(b.x!==m.x||b.y!==m.y)&&b.setPosition(m.x,m.y);const O=m.getData("initialWidth")*m.scale/b.width;O!==b.scale&&b.setScale(O),b.once("animationcomplete",()=>{S()}),b.play(this.parent.getAtlasPlayKeyByName("fireExpo"),!0)}getRandomPositionOnBossPart(m){const S=m.parentContainer,O=(m.flipX?m.width*S.scale:0)+S.x+m.x*S.scale-m.width*S.scale*m.originX,B=O+m.width*S.scale,L=S.y+m.y*S.scale-m.height*S.scale*m.originY,N=L+m.height*S.scale;return{x:O+Math.random()*(B-O),y:L+Math.random()*(N-L)}}renderEnemyBoss(m=!1,S=!0){const b=this.currentWaveEnemyInfos[0],O=b.type,B=b.variant,L=parseInt(b.hitPoint),N=this.getShortEdge();let X=this.parent.getAtlasKeyByName("bosses");const V=this.getBossContainerName(O);let $=this.bossContainersMap.get(V);if(n().isNil($)){$=this.scene.add.container(this.scene.game.canvas.width*.5,this.scene.game.canvas.height*.5),$.setDepth(this.depth-3),$.setData("currentHitCount",0),$.setData("totalHitCount",L*this.baseBulletDamage),$.setData("type",O),$.setData("isDead",!1),O==="1"?this.addBossType1(X,$,B):O==="2"?this.addBossType2(X,$,B):O==="3"?this.addBossType3(X,$,B):O==="4"?(X=this.parent.getAtlasKeyByName("bosses2"),this.addBossType4(X,$,B)):O==="5"&&(X=this.parent.getAtlasKeyByName("bosses2"),this.addBossType5(X,$,B));const se=$.getBounds();$.setData("initialWidth",se.width),$.setData("initialHeight",se.height),this.bossContainersMap.set(V,$);const q=this.scene.add.sprite(0,0,this.parent.getAtlasKeyByName("fireExpo")).setVisible(!1);this.gameObjectsMap.set("explosionSprite",q)}else{if(S){const se=this.getBossContainerPosition();this.onHeroExitScreenCallBack||(($.x!==se.x||$.y!==se.y)&&$.setPosition(se.x,se.y),$.visible||$.setVisible(!0))}this.checkAndSetBossTexture({bossContainer:$,type:O,variant:B})}const Q=Math.max($.getData("initialWidth"),$.getData("initialHeight")),me=.5*N/Q;if($.scale!==me&&$.setScale(me),m){clearInterval(this.bossShootInterval);const se=this.getBossContainerEntranceTweenStartPosition();$.setPosition(se.x,se.y),$.setData("currentHitCount",0),$.setData("totalHitCount",L*this.baseBulletDamage),$.setData("isDead",!1),this.checkAndSetBossTexture({bossContainer:$,type:O,variant:B}),$.list.forEach(q=>{q.getData("isPhysicsObject")&&q.enableBody(!1,$.x+q.x*$.scale,$.y+q.y*$.scale,!0,!1)})}}checkAndSetBossTexture(m){const S=m.bossContainer,b=m.type,O=m.variant;S.list.forEach(B=>{const L=B.getData("partName");let N;L!=="enginefire"?N=this.getBossTextureFrameName({type:b,variant:O,part:L}):N=L,N!==B.frame.name&&B.setFrame(N,!1,!1)})}addBossType1(m,S,b){const O="1";this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-55,y:-60},partName:"backpart",shouldFlipX:!1,origin:{x:.5,y:.5},partID:"leftBackpart",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:55,y:-60},partName:"backpart",shouldFlipX:!0,origin:{x:.5,y:.5},partID:"rightBackpart",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-50,y:60},partName:"wing",shouldFlipX:!1,origin:{x:1,y:1},partID:"leftWing",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:50,y:60},partName:"wing",shouldFlipX:!0,origin:{x:1,y:1},partID:"rightWing",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:0},partName:"body",shouldFlipX:!1,origin:{x:.5,y:.5},partID:"body",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-65,y:-8},partName:"gun",shouldFlipX:!1,origin:{x:.5,y:.25},partID:"leftGun",angle:7}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:65,y:-8},partName:"gun",shouldFlipX:!0,origin:{x:.5,y:.25},partID:"rightGun",angle:-7}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:-119},partName:"enginefire",shouldFlipX:!1,origin:{x:.5,y:1},partID:"enginefire",angle:0})}addBossType2(m,S,b){const O="2";this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-90,y:80},partName:"flap",shouldFlipX:!1,origin:{x:1,y:1},partID:"leftTopFlap",angle:14}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:90,y:80},partName:"flap",shouldFlipX:!0,origin:{x:1,y:1},partID:"rightTopFlap",angle:-14}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-90,y:102},partName:"flap",shouldFlipX:!1,origin:{x:1,y:1},partID:"leftBottomFlap",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:90,y:102},partName:"flap",shouldFlipX:!0,origin:{x:1,y:1},partID:"rightBottomFlap",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-128,y:108},partName:"gunsmall",shouldFlipX:!1,origin:{x:0,y:0},partID:"leftGunSmall",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:128,y:108},partName:"gunsmall",shouldFlipX:!0,origin:{x:0,y:0},partID:"rightGunSmall",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-38,y:22},partName:"wingleft",shouldFlipX:!1,origin:{x:1,y:.5},partID:"wingleft",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:37,y:22},partName:"wingright",shouldFlipX:!1,origin:{x:0,y:.5},partID:"wingright",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-2,y:139},partName:"gunbig",shouldFlipX:!1,origin:{x:.5,y:0},partID:"gunBig",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-1,y:-52},partName:"enginefire",shouldFlipX:!1,origin:{x:.5,y:1},partID:"enginefire",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:0},partName:"body",shouldFlipX:!1,origin:{x:.5,y:.5},partID:"body",angle:0})}addBossType3(m,S,b){const O="3";this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-1,y:-185},partName:"enginefire",shouldFlipX:!1,origin:{x:.5,y:1},partID:"enginefire",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:143},partName:"gunbig",shouldFlipX:!1,origin:{x:.5,y:0},partID:"gunBig",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:0},partName:"body",shouldFlipX:!1,origin:{x:.5,y:.5},partID:"body",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-76,y:155},partName:"gunsmall",shouldFlipX:!1,origin:{x:.5,y:.5},partID:"leftGunSmall",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:76,y:155},partName:"gunsmall",shouldFlipX:!0,origin:{x:.5,y:.5},partID:"rightGunSmall",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-30,y:30},partName:"wing",shouldFlipX:!1,origin:{x:1,y:.5},partID:"leftWing",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:29,y:30},partName:"wing",shouldFlipX:!0,origin:{x:1,y:.5},partID:"rightWing",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:37},partName:"spinner",shouldFlipX:!1,origin:{x:.5,y:.6},partID:"spinner",angle:0})}addBossType4(m,S,b){const O="4";let B=this.parent.getAtlasKeyByName("bosses");this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-100,y:150},partName:"wing",shouldFlipX:!1,origin:{x:1,y:1},partID:"wingleft",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:100,y:150},partName:"wing",shouldFlipX:!0,origin:{x:1,y:1},partID:"wingright",angle:0}),this.addBossPart({type:O,atlasKeyForEngineFire:B,bossContainer:S,variant:b,position:{x:0,y:-210},partName:"enginefire",shouldFlipX:!1,origin:{x:.5,y:1},partID:"enginefire",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:0},partName:"body",shouldFlipX:!1,origin:{x:.5,y:.5},partID:"body",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-140,y:0},partName:"gunbig",shouldFlipX:!1,origin:{x:.5,y:0},partID:"leftGunBig",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:140,y:0},partName:"gunbig",shouldFlipX:!0,origin:{x:.5,y:0},partID:"rightGunBig",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:170},partName:"gunsmall",shouldFlipX:!1,origin:{x:.5,y:0},partID:"gunSmall",angle:0})}addBossType5(m,S,b){const O="5";let B=this.parent.getAtlasKeyByName("bosses");this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-100,y:40},partName:"wing",shouldFlipX:!1,origin:{x:1,y:1},partID:"wingleft",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:100,y:40},partName:"wing",shouldFlipX:!0,origin:{x:1,y:1},partID:"wingright",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-178,y:0},partName:"gunbig",shouldFlipX:!1,origin:{x:0,y:0},partID:"leftGunBig",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:178,y:0},partName:"gunbig",shouldFlipX:!0,origin:{x:0,y:0},partID:"rightGunBig",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:-1,y:110},partName:"gunsmall",shouldFlipX:!1,origin:{x:.5,y:0},partID:"gunSmall",angle:0}),this.addBossPart({type:O,atlasKeyForEngineFire:B,bossContainer:S,variant:b,position:{x:0,y:-190},partName:"enginefire",shouldFlipX:!1,origin:{x:.5,y:1},partID:"enginefire",angle:0}),this.addBossPart({type:O,atlasKey:m,bossContainer:S,variant:b,position:{x:0,y:0},partName:"body",shouldFlipX:!1,origin:{x:.5,y:.5},partID:"body",angle:0})}addBossPart(m){const S=m.type;let b=m.atlasKey;const O=m.bossContainer,B=m.partName,L=m.position,N=m.variant,X=m.shouldFlipX,V=m.origin,$=m.partID,Q=m.angle;let me;B!=="enginefire"?me=this.getBossTextureFrameName({type:S,variant:N,part:B}):(b=this.parent.getAtlasKeyByName("bosses"),me=B);const se=(S==="1"||S==="4"||S==="5")&&(B==="wing"||B==="body")||S==="2"&&(B==="wingleft"||B==="wingright"||B==="body")||S==="3"&&(B==="wing"||B==="body");let q;se?(q=this.enemyGroup.create(L.x,L.y,b,me),q.setData("isPhysicsObject",!0),q.setData("isBelongToBoss",!0),q.setImmovable(!0),q.setSize(q.width,q.height)):q=this.scene.add.image(L.x,L.y,b,me),q.setData("partName",B),q.setData("partID",$),q.setData("initialX",L.x),q.setData("initialY",L.y),q.angle!==Q&&q.setAngle(Q),q.setData("initialAngle",q.angle),X&&q.setFlipX(!0),(V.x!==q.originX||V.y!==q.originY)&&q.setOrigin(V.x,V.y),B==="spinner"&&this.scene.tweens.addCounter({from:0,to:360,duration:750,repeat:-1,onUpdate:le=>{q.setAngle(le.getValue())}}),B==="enginefire"&&this.scene.tweens.addCounter({from:q.scale,to:q.scale*.7,duration:100,repeat:-1,onUpdate:le=>{q.setScale(le.getValue())}}),O.add(q),se&&X&&q.setOffset(q.width,0)}getBossContainerName(m){return"bossContainer_"+m}renderBossHealthBar(){const m=this.getCurrentBoss(),S=Math.min(this.AbsoluteWidth,this.AbsoluteHeight);if(m===void 0||m.getData("isDead"))return;let b=m.getData("totalHitCount"),O=this.gameObjectsMap.get("healthBarBg");n().isNil(O)?(O=this.scene.add.image(0,0,this.selectedImages.healthBar[0].key),O.setDepth(this.depth-1),this.gameObjectsMap.set("healthBarBg",O)):O.texture.key!==this.selectedImages.healthBar[0].key&&O.setTexture(this.selectedImages.healthBar[0].key);const B=S/O.width*.6*n().get(this,`scale.${this.scene.getOrientation()}`);O.scale!==B&&O.setScale(B),(O.x!==this.AbsoluteWidth*.5||O.y!==this.AbsoluteHeight*.2)&&O.setPosition(this.AbsoluteWidth*.5,this.AbsoluteHeight*.2),O.tintTopLeft!==this.bossHealthBarBgColor&&(O.clearTint(),O.setTint(this.bossHealthBarBgColor));let L=this.gameObjectsMap.get("healthBar");n().isNil(L)?(L=this.scene.add.image(0,0,this.selectedImages.healthBar[0].key),L.setDepth(this.depth),L.setOrigin(0,.5),this.gameObjectsMap.set("healthBar",L)):L.texture.key!==this.selectedImages.healthBar[0].key&&L.setTexture(this.selectedImages.healthBar[0].key),(L.x!==O.x-O.displayWidth*.5||L.y!==this.AbsoluteHeight*.2)&&L.setPosition(O.x-O.displayWidth*.5,this.AbsoluteHeight*.2),L.tintTopLeft!==this.bossHealthBarColor&&(L.clearTint(),L.setTint(this.bossHealthBarColor));let N=B/b,X=m.getData("currentHitCount");b-=X,b<=0?(b=0,O.setVisible(!1),L.setVisible(!1)):(O.setVisible(!0),L.setVisible(!0));const V=S/L.width*.6*n().get(this,`scale.${this.scene.getOrientation()}`),$=S/L.width*.6*n().get(this,`scale.${this.scene.getOrientation()}`)-N*X;(L.scaleX!==$||L.scaleY!==V)&&L.setScale($,V),m.visible||(L.setVisible(!1),O.setVisible(!1))}renderEnemyHealthBars(){const m=this.getAliveEnemies(),S=Math.min(this.AbsoluteWidth,this.AbsoluteHeight);m.forEach(b=>{let O;this.loopTweenEnemies.includes(b)?O={x:b.x,y:b.y}:b.getData("diver")==="d2"||b.getData("diver")==="d1"?O={x:b.x,y:b.y}:O=this.getEnemySpritePosition(b);let B=b.getData("totalHitCount"),L=this.enemyHealthBarsMap.get("healthBarBg"+b.name);n().isNil(L)?(L=this.scene.add.image(0,0,this.selectedImages.healthBar[0].key),L.setDepth(this.depth-1),L.setVisible(!1),this.enemyHealthBarsMap.set("healthBarBg"+b.name,L)):L.texture.key!==this.selectedImages.healthBar[0].key&&L.setTexture(this.selectedImages.healthBar[0].key);const N=S/L.width*.5*b.scale*.1,X=S/L.width*b.scale*.2;(L.scale!==N||L.scaleY!==X)&&L.setScale(N,X),(L.x!==b.x||L.y!==O.y-b.displayHeight*.55)&&L.setPosition(b.x,O.y-b.displayHeight*.55),L.tintTopLeft!==this.bossHealthBarBgColor&&(L.clearTint(),L.setTint(this.bossHealthBarBgColor));let V=this.enemyHealthBarsMap.get("healthBar"+b.name);n().isNil(V)?(V=this.scene.add.image(0,0,this.selectedImages.healthBar[0].key),V.setDepth(this.depth),V.setOrigin(0,.5),V.setVisible(!1),this.enemyHealthBarsMap.set("healthBar"+b.name,V)):V.texture.key!==this.selectedImages.healthBar[0].key&&V.setTexture(this.selectedImages.healthBar[0].key),(V.x!==L.x-L.displayWidth*.5||V.y!==O.y-b.displayHeight*.55)&&V.setPosition(L.x-L.displayWidth*.5,O.y-b.displayHeight*.55),V.tintTopLeft!==this.bossHealthBarColor&&(V.clearTint(),V.setTint(this.bossHealthBarColor));let $=N/B,Q=b.getData("currentHitCount");B-=Q,B<0&&(B=0,L.setVisible(!1),V.setVisible(!1));const me=S/L.width*b.scale*.2,se=S/L.width*.5*b.scale*.1-$*Q;(V.scaleX!==se||V.scaleY!==me)&&V.setScale(se,me)})}setEnemyHealthBarPosition(m){let S=this.enemyHealthBarsMap.get("healthBar"+m.name),b=this.enemyHealthBarsMap.get("healthBarBg"+m.name);(b.x!==m.x||b.y!==m.y-m.displayHeight*.55)&&b.setPosition(m.x,m.y-m.displayHeight*.55),(S.x!==b.x-b.displayWidth*.5||S.y!==m.y-m.displayHeight*.55)&&S.setPosition(b.x-b.displayWidth*.5,m.y-m.displayHeight*.55)}renderEnemySprites(m=!1,S=!0){this.currentWaveEnemyInfos.forEach((b,O)=>{if(b.atlasName==="")return;let B=this.waveInfos[0],L=B.atlasInfos[O].hitPoint,N=B.atlasInfos[O].diver,X,V;L==="0"||L===void 0?X=this.hitPoints[b.atlasName]:X=parseInt(L),N==="0"||N===void 0?V="":V=N;const $=b.lineIndex,Q=O%this.maxEnemyCountInRow,me=this.getAtlasKeyByName(b.atlasName),se=this.getShortEdge();let q=this.enemySpritesMap.get(this.getEnemyName(O+1));if(n().isNil(q)){q=this.enemyGroup.create(-this.scene.game.canvas.width*.5,-this.scene.game.canvas.height*.5,me).setDepth(this.depth),q.disableBody(),q.setImmovable(!0),q.name=this.getEnemyName(O+1),q.setData("rowIndex",$),q.setData("columnIndex",Q),q.setData("isDead",!1),q.setData("diver",V),q.setData("enemyType",b.atlasName.slice(-1)),q.setData("isEnemyHitTweenCompleted",!0),q.setData("isEnemyDiver2TweenCompleted",!0),q.setData("isEnemyDiver1TweenCompleted",!0),q.setData("dropIsBoss",!1),q.setData("enemyTakeHit",0),this.enemySpritesMap.set(this.getEnemyName(O+1),q),q.setData("currentHitCount",0),q.setData("totalHitCount",X*this.baseBulletDamage),q.body.allowGravity=!1,q.setFriction(0,0);const ne=this.getAtlasPlayKeyByName(b.atlasName),ge=this.scene.anims.get(ne);ge.repeat=-1,q.play(ne,!0)}else q.texture.key!==me&&q.setTexture(me);m&&(q.getData("rowIndex")!==$&&q.setData("rowIndex",$),q.getData("columnIndex")!==Q&&q.setData("columnIndex",Q));const le=this.getTextureWidth(me),J=se/le*n().get(this,`scale.${this.scene.getOrientation()}`);if(q.scale!==J&&q.setScale(J),q.setData("powerUp",b.powerUp),S){const ne=this.getEnemySpritePosition(q);(q.x!==ne.x||q.y!==ne.y)&&q.setPosition(ne.x,ne.y)}if(q.setSize(q.width*.65,q.height*.5),m){const ne=this.getAtlasPlayKeyByName(b.atlasName),ge=this.scene.anims.get(ne);ge.repeat=-1,q.play(ne,!0),q.setData("currentHitCount",0),q.setData("totalHitCount",X*this.baseBulletDamage),q.setData("isDead",!1),q.setData("enemyType",b.atlasName.slice(-1)),q.setData("diver",V),q.setData("isEnemyHitTweenCompleted",!0),q.setData("isEnemyDiver2TweenCompleted",!0),q.setData("isEnemyDiver1TweenCompleted",!0),this.loopTweenEnemies=[],q.enableBody(!1,q.x,q.y,!0,!1)}q.visible!==S&&!q.getData("isDead")&&(q.setVisible(S),S||q.disableBody()),q.depth!==this.depth&&q.setDepth(this.depth)}),this.currentWaveIndex===1?this.scene.input.once("pointerdown",()=>{this.renderDiverEnemyTween()}):this.renderDiverEnemyTween(),this.renderEnemyHealthBars()}getShortEdge(){return Math.min(this.AbsoluteWidth,this.AbsoluteHeight)}getEnemySpritePosition(m){const S=m.getData("rowIndex"),b=m.getData("columnIndex");return{x:this.CenterAbsoluteX+m.displayWidth*(b%this.maxEnemyCountInRow-(this.maxEnemyCountInRow/2-.5)),y:this.TopAbsoluteY+m.displayHeight*.5+m.displayHeight*S}}getAliveEnemies(){if(this.isCurrentlyBossWave()){const m=this.getCurrentBoss();return!n().isNil(m)&&!m.getData("isDead")?(m.setVisible(!0),m.list.forEach(S=>{S.getData("isPhysicsObject")&&S.enableBody(!1,m.x,m.y,!0,!0)}),[m]):[]}else return Array.from(this.enemySpritesMap.values()).filter(m=>!m.getData("isDead"))}renderEnemyBullets(){const m=this.getShortEdge(),S=this.getAtlasKeyByName("bullet_small");n().isNil(this.enemyBulletGroup)&&(this.enemyBulletGroup=this.scene.physics.add.group());for(let b=0;b<this.bulletCount;b++){if(this.bulletArray.length<=this.bulletCount){const B=this.enemyBulletGroup.create(0,0,S).setDepth(this.depth-2);B.body.onWorldBounds=!0,B.setCollideWorldBounds(!0),B.body.name="enemyBullet",B.body.id="enemyBullet_"+b,B.body.label="enemyBullet",B.body.allowGravity=!1,B.visible=!1,B.setDepth(this.depth+2),B.setFriction(0,0),this.bulletArray.push(B)}this.bulletArray[b].setSize(this.bulletArray[b].displayWidth*.5,this.bulletArray[b].displayHeight*.5);const O=m/this.bulletArray[b].width*n().get(this,`scale.${this.scene.getOrientation()}`)/this.maxEnemyCountInRow;this.bulletArray[b].scale!==O&&this.bulletArray[b].setScale(O)}}checkBulletExistInBulletArray(m){return this.bulletArray.some(S=>{if(S.body.id===m.body.id)return!0})}enemyBulletCollideCallback(m){m.disableBody(!0,!0),this.checkBulletExistInBulletArray(m)||(m.setPosition(-this.scene.game.canvas.width*.5,this.scene.game.canvas.height*.5),m.setVelocityY(0),this.bulletArray.push(m))}renderPowerUp(){const m=Math.min(this.AbsoluteWidth,this.AbsoluteHeight);let S=this.getPowerUpFrameNames(),b;for(let O=0;O<this.powerUpCount;O++)S.forEach(B=>{if(this.powerUpArray.length<=this.powerUpCount){if(n().isNil(B))return;let X;B.includes("plane")?b=this.parent.getAtlasKeyByName("plane"):b=this.getAtlasKeyByName("powerUps"),X=this.powerUpGroup.create(0,0,b,B),X.setImmovable(!0),X.setDepth(this.depth+2),X.setVisible(!1),X.body.allowGravity=!1,X.setFriction(0,0),X.body.id=B+"_"+O,X.body.name=B,X.body.onWorldBounds=!0,X.body.label="powerUp",X.setCollideWorldBounds(!0),X.disableBody(),this.powerUpArray.push({name:X.body.name,powerUpSprite:X})}B.includes("plane")?b=this.parent.getAtlasKeyByName("plane"):b=this.getAtlasKeyByName("powerUps"),this.powerUpArray[O].powerUpSprite.texture.key!==b&&this.powerUpArray[O].powerUpSprite.setTexture(b),this.powerUpArray[O].powerUpSprite.setOffset(this.powerUpArray[O].powerUpSprite.x,this.powerUpArray[O].powerUpSprite.y,this.powerUpArray[O].powerUpSprite.width*.4,this.powerUpArray[O].powerUpSprite.width*.4),this.powerUpArray[O].powerUpSprite.depth!==this.depth+2&&this.powerUpArray[O].powerUpSprite.setDepth(this.depth+2);const L=this.getTextureWidth(b),N=m/L*4*n().get(this,`scale.${this.scene.getOrientation()}`)/7;this.powerUpArray[O].powerUpSprite.scale!==N&&this.powerUpArray[O].powerUpSprite.setScale(N)})}addPowerupGroup(){n().isNil(this.powerUpGroup)&&(this.powerUpGroup=this.scene.physics.add.group())}playPowerupSound(){if(!(this.h5MuteSounds||this.fullGameMuteSounds)&&this.options.isSoundEnabled&&this.scene.adNetworkSetting.isSoundSupported){let m;n().has(this,"volume")?m=this.volume:m=1,this.scene.sound.play(this.selectedSounds.powerUp[0].key,{volume:m})}}renderEnemyHitImage(){const m=Math.min(this.AbsoluteWidth,this.AbsoluteHeight);for(let S=0;S<this.hitImageCount;S++){if(this.hitImageArray.length<=this.hitImageCount){const O=this.scene.add.image(this.CenterAbsoluteX,this.CenterAbsoluteY,this.selectedImages.hit[0].key).setDepth(this.depth+1);O.setAlpha(0),this.hitImageArray.push(O)}this.hitImageArray[S].texture.key!==this.selectedImages.hit[0].key&&this.hitImageArray[S].setTexture(this.selectedImages.hit[0].key);const b=m/this.hitImageArray[S].width*.4*n().get(this,`scale.${this.scene.getOrientation()}`)/7;this.hitImageArray[S].scale!==b&&this.hitImageArray[S].setScale(b)}}renderEnemyHitImageTween(m){if(this.hitImageArray.length===0)return;const S=this.hitImageArray.shift();S.setPosition(m.x,m.y),this.scene.tweens.add({targets:S,duration:100,alpha:1,onComplete:()=>{S.setAlpha(0),this.hitImageArray.push(S)}})}getEnemyBulletVelocityY(){return this.AbsoluteHeight*.8*7e-4}getTextureWidth(m){return this.scene.textures.list[m].getSourceImage().width}getPowerUpVelocityY(){return this.AbsoluteHeight*28e-5}getTextureHeight(m){return this.scene.textures.list[m].getSourceImage().height}checkLevelChange(){this.previousLevel!==this.level&&(this.previousLevel=this.level,this.currentWaveEnemyInfos=[],this.waveInfos=[],this.splitLevel(),this.setEnemyShootInfo(),this.setCurrentWaveEnemyInfos(),this.scene.input.once("pointerdown",()=>{this.isTapped=!0}))}checkShootTimes(m){const S=this.waveInfos[0],b=parseInt(S.bulletTimeSecond);m%(b*1e3)===0&&this.setEnemyShootInfo();const O=this.enemyShootTimeArray.filter(B=>{if(m-this.shootTimerDelay<=B&&B<m)return B}).length;return O>0&&this.enemyShootTimeArray.splice(0,O),O}playBossPartHitTween(m){if(m.getData("isHitTweenPlaying"))return;m.setData("isHitTweenPlaying",!0);const S={r:255,g:255,b:255},b={r:255,g:0,b:0};this.scene.tweens.addCounter({from:0,to:2,duration:100,onStart:()=>{m.clearTint()},onUpdate:O=>{const B=O.getValue();if(B<=1){const L=f(S.r,b.r,B),N=f(S.g,b.g,B),X=f(S.b,b.b,B),V=(L<<16)+(N<<8)+X;m.setTint(V)}else{const L=f(b.r,S.r,B-1),N=f(b.g,S.g,B-1),X=f(b.b,S.b,B-1),V=(L<<16)+(N<<8)+X;m.setTint(V)}},onComplete:()=>{m.setData("isHitTweenPlaying",!1),m.clearTint()}})}bossShoot(){if(!this.isCurrentlyBossWave()){this.deleteBossShootTimerEvent();return}if(this.isHeroDeadCallback()){this.deleteBossShootTimerEvent();return}const S=this.waveInfos[0].type,b=this.getBossContainerByType(S);if(b.getData("isDead")){this.deleteBossShootTimerEvent();return}const O=Math.ceil(Math.random()*3);if(S==="1")O===1?this.shootBossType_1_4_5_ShootMechanism1(b,S):O===2?this.shootBossType1And4ShootMechanism2(b,S):O===3&&this.shootBossType1ShootMechanism3(b);else if(S==="2")O===1?this.shootBossType2ShootMechanism1(b):O===2?this.shootBossType2ShootMechanism2(b):O===3&&this.shootBossType2ShootMechanism3(b);else if(S==="3")O===1?this.shootBossType3ShootMechanism1(b):O===2?this.shootBossType3ShootMechanism2(b):O===3&&this.shootBossType3ShootMechanism3(b);else if(S==="4")O===1?this.shootBossType_1_4_5_ShootMechanism1(b,S):O===2?this.shootBossType1And4ShootMechanism2(b,S):O===3&&this.shootBossType4ShootMechanism3(b);else if(S==="5")O===1?this.shootBossType_1_4_5_ShootMechanism1(b,S):O===2?this.shootBossType5ShootMechanism2(b):O===3&&this.shootBossType5Mechanism3(b);else throw{message:"this type of boss shoot mechanism does not exist",type:S}}shootBossType5Mechanism3(m){const S=60,b=this.bulletArray.splice(0,S),O=.005;b.forEach(J=>{n().isNil(J.anims)||J.anims.stop();const ne=this.getBossBulletTextureKeyCallback();J.texture.key!==ne&&J.setTexture(ne)});const B=(J,ne,ge)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){ne.length>0&&this.bulletArray.push(...ne);return}const he={x:m.x+J.x*m.scale,y:m.y+(J.y+J.height)*m.scale+ne[0].displayHeight*.5},we=14,Be=ne.length/2-.5;ne.forEach((xe,Ee)=>{xe.setAngle(J.angle-(Be-Ee)*we);const Ne=J.width*1.5*m.scale/xe.width;xe.scale!==Ne&&xe.setScale(Ne),xe.setFlipY(!0);const Qe=J.rotation,Ue={x:he.x,y:m.y+J.y*m.scale},tt={x:Math.cos(Qe)*(he.x-Ue.x)-Math.sin(Qe)*(he.y-Ue.y)+Ue.x,y:Math.sin(Qe)*(he.x-Ue.x)+Math.cos(Qe)*(he.y-Ue.y)+Ue.y},We={x:tt.x,y:tt.y};this.playBossShootLightTween({gameObject:ge,position:We,scale:3*(J.width*1.5*m.scale)/ge.width,angle:J.angle});const nt=this.getDistanceVectorBetweenTwoPoints(Ue,tt);xe.enableBody(!0,tt.x,tt.y,!0,!0),xe.setVelocityX(nt.x*O+(Be-Ee)*we*.008),xe.setVelocityY(nt.y*O)}),this.playBossShootSound()},L=(J,ne,ge)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){this.bulletArray.push(ne);return}const he=J.width*m.scale/ne.width;ne.scale!==he&&ne.setScale(he),ne.setFlipY(!0),ne.setAngle(J.angle);const we={x:m.x+J.x*m.scale+(J.flipX?1:-1)*m.scale,y:m.y+(J.y+J.height)*m.scale+ne.displayHeight*.5},Be=J.rotation,xe={x:we.x,y:m.y+J.y*m.scale},Ee={x:Math.cos(Be)*(we.x-xe.x)-Math.sin(Be)*(we.y-xe.y)+xe.x,y:Math.sin(Be)*(we.x-xe.x)+Math.cos(Be)*(we.y-xe.y)+xe.y};this.playBossShootLightTween({gameObject:ge,position:Ee,scale:3*(J.width*m.scale)/ge.width,angle:J.angle});const Ne=this.getDistanceVectorBetweenTwoPoints(xe,Ee);ne.enableBody(!0,Ee.x,Ee.y,!0,!0),ne.setVelocityX(Ne.x*O),ne.setVelocityY(Ne.y*O)},N=m.list.find(J=>J.getData("partID")==="gunSmall"),X=m.list.find(J=>J.getData("partID")==="wingleft"),V=m.list.find(J=>J.getData("partID")==="wingright"),$=m.list.find(J=>J.getData("partID")==="leftGunBig"),Q=m.list.find(J=>J.getData("partID")==="rightGunBig"),me=50,se=.9,q=.8,le=10;this.scene.tweens.add({duration:400,targets:[X,V,N],x:(J,ne,ge,he)=>{if(he===0)return J.x+me;if(he===1)return J.x-me;if(!n().isNil(J))return J.x},scaleY:(J,ne,ge,he)=>{if(he===2){if(!n().isNil(J))return se}else return J.scaleY},yoyo:!0,onComplete:()=>{this.scene.tweens.add({duration:100,delay:100,targets:[X,V,N,$,Q],scaleY:(J,ne,ge,he)=>{if(he===2||he===3||he===4){if(!n().isNil(J))return q}else return J.scaleY},angle:(J,ne,ge,he)=>{if(he===0)return le;if(he===1)return-le;if(!n().isNil(J))return J.angle},yoyo:!0,loop:9,onStart:()=>{if(b.length===0)return;let J=b.splice(0,4),ne=b.splice(0,1),ge=b.splice(0,1);const he=this.bossShootLights[0],we=this.bossShootLights[1],Be=this.bossShootLights[2];B(N,J,he),L($,ne[0],we),L(Q,ge[0],Be)},onLoop:()=>{if(b.length===0)return;if(this.isHeroDeadCallback()){this.scene.tweens.killTweensOf(X),this.scene.tweens.killTweensOf(V),this.scene.tweens.killTweensOf(N),N.setAngle(N.getData("initialAngle")),$.setAngle($.getData("initialAngle")),Q.setAngle(Q.getData("initialAngle")),this.bulletArray.push(...b);return}let J=b.splice(0,4),ne=b.splice(0,1),ge=b.splice(0,1);const he=this.bossShootLights[0],we=this.bossShootLights[1],Be=this.bossShootLights[2];B(N,J,he),L($,ne[0],we),L(Q,ge[0],Be)},onComplete:()=>{this.scene.tweens.add({duration:100,targets:[N],angle:J=>{if(!n().isNil(J))return J.getData("initialAngle")}})}})}})}shootBossType5ShootMechanism2(m){const S=50,b=this.bulletArray.splice(0,S),O=.005;b.forEach(se=>{n().isNil(se.anims)||se.anims.stop();const q=this.getBossBulletTextureKeyCallback();se.texture.key!==q&&se.setTexture(q)});const B=(se,q,le)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){q.length>0&&this.bulletArray.push(...q);return}const J={x:m.x+se.x*m.scale,y:m.y+(se.y+se.height)*m.scale+q[0].displayHeight*.5},ne=14,ge=q.length/2-.5;q.forEach((he,we)=>{he.setAngle(se.angle+(ge-we)*ne);const Be=Math.random()*2+1,xe=se.width*1.5*m.scale/he.width;he.scale!==xe&&he.setScale(xe),he.setFlipY(!0);const Ee=se.rotation,Ne={x:J.x,y:m.y+se.y*m.scale},Qe={x:Math.cos(Ee)*(J.x-Ne.x)-Math.sin(Ee)*(J.y-Ne.y)+Ne.x,y:Math.sin(Ee)*(J.x-Ne.x)+Math.cos(Ee)*(J.y-Ne.y)+Ne.y},Ue={x:Qe.x,y:Qe.y};this.playBossShootLightTween({gameObject:le,position:Ue,scale:3*(se.width*1.5*m.scale)/le.width,angle:se.angle});const tt=this.getDistanceVectorBetweenTwoPoints(Ne,Qe);he.enableBody(!0,Qe.x,Qe.y,!0,!0),he.setVelocityX(tt.x*O+(we-ge)*ne*.02),he.setVelocityY(tt.y*O*Be*.5)}),this.playBossShootSound()},L=m.list.find(se=>se.getData("partID")==="gunSmall"),N=m.list.find(se=>se.getData("partID")==="wingleft"),X=m.list.find(se=>se.getData("partID")==="wingright"),V=50,$=.9,Q=.8,me=10;this.scene.tweens.add({duration:400,targets:[N,X,L],x:(se,q,le,J)=>{if(J===0)return se.x+V;if(J===1)return se.x-V;if(!n().isNil(se))return se.x},scaleY:(se,q,le,J)=>{if(J===2){if(!n().isNil(se))return $}else return se.scaleY},yoyo:!0,onComplete:()=>{this.scene.tweens.add({duration:100,targets:[N,X,L],scaleY:(se,q,le,J)=>{if(J===2){if(!n().isNil(se))return Q}else return se.scaleY},angle:(se,q,le,J)=>{if(J===0)return me;if(J===1)return-me;if(!n().isNil(se))return se.angle},yoyo:!0,loop:9,onStart:()=>{if(b.length===0)return;let se=b.splice(0,5);const q=this.bossShootLights[0];B(L,se,q)},onLoop:()=>{if(b.length===0)return;if(m.getData("isDead")||this.isHeroDeadCallback()){this.scene.tweens.killTweensOf(N),this.scene.tweens.killTweensOf(X),this.scene.tweens.killTweensOf(L),this.bulletArray.push(...b),L.setAngle(L.getData("initialAngle"));return}let se=b.splice(0,5);const q=this.bossShootLights[0];B(L,se,q)},onComplete:()=>{this.scene.tweens.add({duration:100,targets:[L],angle:se=>{if(!n().isNil(se))return se.getData("initialAngle")}})}})}})}shootBossType4ShootMechanism3(m){const S=27,b=this.bulletArray.splice(0,S),O=Math.min(this.AbsoluteWidth,this.AbsoluteHeight)*6e-4;b.forEach(J=>{n().isNil(J.anims)||J.anims.stop();const ne=this.getBossBulletTextureKeyCallback();J.texture.key!==ne&&J.setTexture(ne)});const B=(J,ne,ge)=>{let he;J.getData("partID")==="gunSmall"?he=J.width*1.5:he=J.width*.75;const we=he*m.scale/b[0].width;b[0].scale!==we&&b[0].setScale(we),b[0].setFlipY(!0),b[0].setAngle(ge);const Be={x:m.x+J.x*m.scale+(J.flipX?1:-1)*m.scale,y:m.y+(J.y+J.height)*m.scale+b[0].displayHeight*.5},xe=b[0].rotation,Ee={x:Be.x,y:m.y+J.y},Ne={x:Math.cos(xe)*(Be.x-Ee.x)-Math.sin(xe)*(Be.y-Ee.y)+Ee.x,y:Math.sin(xe)*(Be.x-Ee.x)+Math.cos(xe)*(Be.y-Ee.y)+Ee.y};(ne.x!==Ne.x||ne.y!==Ne.y)&&ne.setPosition(Ne.x,Ne.y)},L=(J,ne,ge,he)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){this.bulletArray.push(ne);return}let we;J.getData("partID")==="gunSmall"?we=J.width*1.5:we=J.width*.75;const Be=we*m.scale/ne.width;ne.scale!==Be&&ne.setScale(Be),ne.setFlipY(!0),ne.setAngle(ge);const xe={x:m.x+J.x*m.scale+(J.flipX?1:-1)*m.scale,y:m.y+(J.y+J.height)*m.scale+ne.displayHeight*.5},Ee=ne.rotation,Ne={x:xe.x,y:m.y+J.y},Qe={x:Math.cos(Ee)*(xe.x-Ne.x)-Math.sin(Ee)*(xe.y-Ne.y)+Ne.x,y:Math.sin(Ee)*(xe.x-Ne.x)+Math.cos(Ee)*(xe.y-Ne.y)+Ne.y};this.playBossShootLightTween({gameObject:he,position:Qe,scale:he.scale,angle:J.angle});const Ue=this.getDistanceVectorBetweenTwoPoints(Ne,Qe),tt=this.getUnitVector(Ue);ne.enableBody(!0,Qe.x,Qe.y,!0,!0),J.getData("partID").includes("left")&&this.playBossShootSound(),J.getData("partID")==="gunSmall"?(ne.setVelocityX(0),ne.setVelocityY(Math.abs(tt.y)*O)):(ne.setVelocityX(tt.x*O),ne.setVelocityY(tt.y*O))},N=m.list.find(J=>J.getData("partID")==="leftGunBig"),X=m.list.find(J=>J.getData("partID")==="rightGunBig"),V=m.list.find(J=>J.getData("partID")==="gunSmall"),$=m.list.find(J=>J.getData("partID")==="wingleft"),Q=m.list.find(J=>J.getData("partID")==="wingright"),me=$.width*.15;let se=0,q=0,le=0;this.scene.tweens.addCounter({from:-90,to:90,duration:1400,onUpdate:J=>{if(se++,N.setAngle(J.getValue()),b.length===0)return;const ne=this.bossShootLights[0],ge=3*N.width*.75*m.scale/ne.width;if(ne.scale!==ge&&ne.setScale(ge),B(N,ne,N.angle),se%9===0){const he=b.shift();L(N,he,N.angle,ne)}},onComplete:()=>{this.scene.tweens.add({duration:200,targets:[$,Q,N],x:(J,ne,ge,he)=>he===0?J.x-me:he===1?J.x+me:J.x,angle:(J,ne,ge,he)=>he===2?J.getData("initialAngle"):J.angle})}}),this.scene.tweens.addCounter({from:90,to:-90,duration:1400,onUpdate:J=>{if(q++,X.setAngle(J.getValue()),b.length===0)return;const ne=this.bossShootLights[1],ge=3*X.width*.75*m.scale/ne.width;if(ne.scale!==ge&&ne.setScale(ge),B(X,ne,X.angle),q%9===0){const he=b.shift();L(X,he,X.angle,ne)}},onComplete:()=>{this.scene.tweens.add({duration:200,targets:[X],x:J=>J.x,angle:J=>J.getData("initialAngle")})}}),this.scene.tweens.addCounter({from:0,to:1,duration:1400,onUpdate:()=>{if(le++,V.setAngle(0),b.length===0)return;const J=this.bossShootLights[2],ne=3*V.width*1.5*m.scale/J.width;if(J.scale!==ne&&J.setScale(ne),B(V,J,V.angle),le%9===0){const ge=b.shift();L(V,ge,V.angle,J)}},onComplete:()=>{this.scene.tweens.add({duration:200,targets:[V],x:J=>J.x,angle:J=>J.getData("initialAngle")})}}),this.scene.tweens.add({duration:200,targets:[$,Q],x:(J,ne,ge,he)=>he===0?J.x+me:he===1?J.x-me:J.x})}shootBossType3ShootMechanism3(m){const S=32,b=this.bulletArray.splice(0,S),O=.003,B=m.list.find(se=>se.getData("partID")==="gunBig");b.forEach(se=>{n().isNil(se.anims)||se.anims.stop();const q=this.getBossBulletTextureKeyCallback();se.texture.key!==q&&se.setTexture(q);const le=1*B.width*m.scale/se.width;se.scale!==le&&se.setScale(le),se.setFlipY(!0)});const L=(se,q,le)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){se.length>0&&this.bulletArray.push(...se);return}const J=14,ne=se.length/2-.5;for(let ge=0;ge<se.length;ge++){const he=(ne-ge)*J;se[ge].setAngle(he);const we=se[ge].rotation;se[ge].enableBody(!0,le.x,le.y,!0,!0);const Be={x:Math.cos(we)*(le.x-q.x)-Math.sin(we)*(le.y-q.y)+q.x,y:Math.sin(we)*(le.x-q.x)+Math.cos(we)*(le.y-q.y)+q.y},xe=this.getDistanceVectorBetweenTwoPoints(q,Be);se[ge].setVelocityX(xe.x*O),se[ge].setVelocityY(xe.y*O)}this.playBossShootSound()},N=m.list.find(se=>se.getData("partID")==="leftGunSmall"),X=m.list.find(se=>se.getData("partID")==="rightGunSmall"),V=m.list.find(se=>se.getData("partID")==="leftWing"),$=m.list.find(se=>se.getData("partID")==="rightWing"),Q=N.height,me=V.width*.15;this.scene.tweens.add({duration:200,targets:[N,X],y:(se,q,le,J)=>J===0||J===1?se.y-Q:se.y,onComplete:()=>{this.scene.tweens.add({duration:200,targets:[V,$],x:(se,q,le,J)=>J===0?se.x+me:J===1?se.x-me:se.x,onComplete:()=>{this.scene.tweens.addCounter({from:0,to:4,duration:400,onUpdate:se=>{if(b.length===0)return;if(se.getValue()>(S-b.length)/8){const le=b.splice(0,8),J={x:m.x+B.x*m.scale,y:m.y+B.y*m.scale},ne={x:J.x,y:J.y+B.height*m.scale+le[0].displayHeight*.5};L(le,J,ne);const ge=this.bossShootLights[0],he=5*B.width*m.scale/ge.width;ge.scale!==he&&ge.setScale(he);const we={x:J.x,y:J.y+B.y*m.scale+ge.displayHeight*.5};this.playBossShootLightTween({gameObject:ge,position:we,scale:he,angle:B.angle})}},onComplete:()=>{this.scene.tweens.add({duration:200,targets:[V,$,B],x:(se,q,le,J)=>J===0?se.x-me:J===1?se.x+me:se.x,angle:(se,q,le,J)=>J===2?se.getData("initialAngle"):se.angle,onComplete:()=>{this.scene.tweens.add({duration:200,targets:[N,X],y:(se,q,le,J)=>J===0||J===1?se.y+Q:se.y})}})}})}})}})}shootBossType3ShootMechanism2(m){const S=20,b=this.bulletArray.splice(0,S),O=.005,B=m.list.find(q=>q.getData("partID")==="gunBig");b.forEach(q=>{n().isNil(q.anims)||q.anims.stop();const le=this.getBossBulletTextureKeyCallback();q.texture.key!==le&&q.setTexture(le);const J=1*B.width*m.scale/q.width;q.scale!==J&&q.setScale(J),q.setFlipY(!0)});let L=0;const N=(q,le,J)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){this.bulletArray.push(q);return}L++,q.setAngle(J);const ne={x:le.x,y:le.y+B.height*m.scale+q.displayHeight*.5},ge=q.rotation,he={x:Math.cos(ge)*(ne.x-le.x)-Math.sin(ge)*(ne.y-le.y)+le.x,y:Math.sin(ge)*(ne.x-le.x)+Math.cos(ge)*(ne.y-le.y)+le.y},we=this.getDistanceVectorBetweenTwoPoints(le,he);q.enableBody(!0,he.x,he.y,!0,!0),L%2===0&&this.playBossShootSound(),q.setVelocityX(we.x*O),q.setVelocityY(we.y*O)},X=m.list.find(q=>q.getData("partID")==="leftGunSmall"),V=m.list.find(q=>q.getData("partID")==="rightGunSmall"),$=m.list.find(q=>q.getData("partID")==="leftWing"),Q=m.list.find(q=>q.getData("partID")==="rightWing"),me=X.height,se=$.width*.15;this.scene.tweens.addCounter({from:0,to:27,duration:1400,onUpdate:q=>{const le=this.getHeroCurrentPositionCallback(),J=this.getAngleBetweenTwoPoints({x:m.x+B.x,y:m.y+(B.y+B.height)*m.scale},le);if(B.setAngle(J),b.length===0)return;if(q.getValue()-7>S-b.length){const ge=b.shift(),he=B.rotation,we={x:m.x+B.x*m.scale,y:m.y+B.y*m.scale};N(ge,we,B.angle);const Be=this.bossShootLights[0],xe=5*B.width*m.scale/Be.width;Be.scale!==xe&&Be.setScale(xe);const Ee={x:we.x,y:we.y+B.height*m.scale+Be.displayHeight*.5},Ne={x:Math.cos(he)*(Ee.x-we.x)-Math.sin(he)*(Ee.y-we.y)+we.x,y:Math.sin(he)*(Ee.x-we.x)+Math.cos(he)*(Ee.y-we.y)+we.y};this.playBossShootLightTween({gameObject:Be,position:Ne,scale:xe,angle:B.angle})}},onComplete:()=>{this.scene.tweens.add({duration:200,targets:[$,Q,B],x:(q,le,J,ne)=>ne===0?q.x-se:ne===1?q.x+se:q.x,angle:(q,le,J,ne)=>ne===2?q.getData("initialAngle"):q.angle,onComplete:()=>{this.scene.tweens.add({duration:200,targets:[X,V],y:(q,le,J,ne)=>ne===0||ne===1?q.y+me:q.y})}})}}),this.scene.tweens.add({duration:200,targets:[X,V],y:(q,le,J,ne)=>ne===0||ne===1?q.y-me:q.y,onComplete:()=>{this.scene.tweens.add({duration:200,targets:[$,Q],x:(q,le,J,ne)=>ne===0?q.x+se:ne===1?q.x-se:q.x})}})}shootBossType3ShootMechanism1(m){const S=27,b=this.bulletArray.splice(0,S),O=.004,B=m.list.find(J=>J.getData("partID")==="spinner");let L;b.forEach(J=>{n().isNil(J.anims)||J.anims.stop();const ne=this.getBossBulletTextureKeyCallback();J.texture.key!==ne&&J.setTexture(ne),L=.5*B.width*m.scale/J.width,J.scale!==L&&J.setScale(L),J.setFlipY(!0)});const N=J=>{if(m.getData("isDead")||this.isHeroDeadCallback()){J.forEach(ne=>{this.bulletArray.push(ne.gameObject)});return}J.forEach((ne,ge)=>{ne.gameObject.setAngle(ne.angle);const he={x:ne.position.x,y:ne.position.y+B.height*m.scale*.5+ne.gameObject.displayHeight*.5},we=ne.gameObject.rotation,Be={x:Math.cos(we)*(he.x-ne.position.x)-Math.sin(we)*(he.y-ne.position.y)+ne.position.x,y:Math.sin(we)*(he.x-ne.position.x)+Math.cos(we)*(he.y-ne.position.y)+ne.position.y},xe={x:ne.position.x,y:ne.position.y+B.height*m.scale*.5+this.bossShootLights[0].width*L*2*.5},Ee={x:Math.cos(we)*(xe.x-ne.position.x)-Math.sin(we)*(xe.y-ne.position.y)+ne.position.x,y:Math.sin(we)*(xe.x-ne.position.x)+Math.cos(we)*(xe.y-ne.position.y)+ne.position.y};this.playBossShootLightTween({gameObject:this.bossShootLights[ge],position:Ee,scale:L*2,angle:ne.angle});const Ne=this.getDistanceVectorBetweenTwoPoints(ne.position,Be);ne.gameObject.enableBody(!0,Be.x,Be.y,!0,!0),ne.gameObject.setVelocityX(Ne.x*O),ne.gameObject.setVelocityY(Ne.y*O)})},X=m.list.find(J=>J.getData("partID")==="gunBig"),V=m.list.find(J=>J.getData("partID")==="leftGunSmall"),$=m.list.find(J=>J.getData("partID")==="rightGunSmall"),Q=m.list.find(J=>J.getData("partID")==="leftWing"),me=m.list.find(J=>J.getData("partID")==="rightWing"),se=V.height,q=X.height*.75,le=Q.width*.15;this.scene.tweens.add({duration:200,targets:[V,X,$],y:(J,ne,ge,he)=>he===0?J.y-se:he===1?J.y-q:he===2?J.y-se:J.y,onComplete:()=>{this.scene.tweens.add({duration:200,targets:[Q,me],x:(J,ne,ge,he)=>he===0?J.x+le:he===1?J.x-le:J.x,onStart:()=>{this.playBossShootSound()},onComplete:()=>{this.scene.tweens.addCounter({from:0,to:9,duration:250,onUpdate:J=>{if(b.length===0)return;if(J.getValue()>(S-b.length)/3){const ge=b.splice(0,3),he={x:m.x+B.x,y:m.y+B.y-B.height*.1},we=[];for(let Be=0;Be<ge.length;Be++){const xe=60+Be*120+B.angle;we.push({gameObject:ge[Be],position:he,angle:xe})}N(we)}},onComplete:()=>{this.scene.tweens.add({duration:200,targets:[Q,me],x:(J,ne,ge,he)=>he===0?J.x-le:he===1?J.x+le:J.x,onComplete:()=>{this.scene.tweens.add({duration:200,targets:[V,X,$],y:(J,ne,ge,he)=>he===0?J.y+se:he===1?J.y+q:he===2?J.y+se:J.y})}})}})}})}})}shootBossType2ShootMechanism3(m){const S=17,b=this.bulletArray.splice(0,S),O=.005,B=m.list.find(Q=>Q.getData("partID")==="gunBig");b.forEach(Q=>{n().isNil(Q.anims)||Q.anims.stop();const me=this.getBossBulletTextureKeyCallback();Q.texture.key!==me&&Q.setTexture(me);const se=1*B.width*m.scale/Q.width;Q.scale!==se&&Q.setScale(se),Q.setFlipY(!0)});const L=(Q,me,se,q=1)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){this.bulletArray.push(Q);return}Q.setScale(q);const le={x:me.x,y:me.y+100};Q.setAngle(se),Q.enableBody(!0,me.x,me.y,!0,!0);const J=Q.rotation,ne={x:Math.cos(J)*(le.x-Q.x)-Math.sin(J)*(le.y-Q.y)+Q.x,y:Math.sin(J)*(le.x-Q.x)+Math.cos(J)*(le.y-Q.y)+Q.y},ge=this.getDistanceVectorBetweenTwoPoints({x:Q.x,y:Q.y},ne);this.playBossShootSound(),Q.setVelocityX(ge.x*O),Q.setVelocityY(ge.y*O)},N=m.list.find(Q=>Q.getData("partID")==="leftTopFlap"),X=m.list.find(Q=>Q.getData("partID")==="leftBottomFlap"),V=m.list.find(Q=>Q.getData("partID")==="rightTopFlap"),$=m.list.find(Q=>Q.getData("partID")==="rightBottomFlap");this.scene.tweens.add({duration:200,targets:[N,X,V,$],angle:(Q,me,se,q)=>{if(q===0)return 90;if(q===1)return 90;if(q===2)return-90;if(q===3)return-90}}),this.scene.tweens.addCounter({from:0,to:2300,duration:2300,targets:B,alpha:1,onUpdate:Q=>{const me=Q.getValue(),se=this.getHeroCurrentPositionCallback(),q={x:m.x+B.x,y:m.y+B.y};let J=(this.getAngleBetweenTwoPoints(q,se)-B.angle)%360;J>180?J=360-J:J<-180&&(J=360+J);const ne=J+B.angle;if(B.setAngle(ne),me>650+100*(S-b.length)){if(b.length===0)return;const ge=b.shift();this.scene.tweens.add({duration:100,targets:B,scaleY:.9,yoyo:!0,onStart:()=>{B.scaleY!==1&&(B.scaleY=1);const he={x:m.x+B.x,y:m.y+(B.y+B.height)*m.scale+ge.displayHeight*.5},we=B.rotation,Be={x:Math.cos(we)*(he.x-q.x)-Math.sin(we)*(he.y-q.y)+q.x,y:Math.sin(we)*(he.x-q.x)+Math.cos(we)*(he.y-q.y)+q.y};L(ge,Be,B.angle,B.width*m.scale/ge.width),this.playBossShootLightTween({gameObject:this.bossShootLights[0],position:Be,scale:3*(B.width*m.scale)/this.bossShootLights[0].width,angle:B.angle})},onComplete:()=>{B.scaleY!==1&&(B.scaleY=1)}})}},onComplete:()=>{this.scene.tweens.add({duration:200,targets:[N,X,V,$,B],angle:Q=>Q.getData("initialAngle")})}})}shootBossType2ShootMechanism2(m){const S=this.bulletArray.splice(0,28),b=.005,O=m.list.find(Q=>Q.getData("partID")==="leftGunSmall"),B=m.list.find(Q=>Q.getData("partID")==="rightGunSmall");S.forEach(Q=>{n().isNil(Q.anims)||Q.anims.stop();const me=this.getBossBulletTextureKeyCallback();Q.texture.key!==me&&Q.setTexture(me);const se=1*O.width*m.scale/Q.width;Q.scale!==se&&Q.setScale(se),Q.setFlipY(!0)});const L=(Q,me)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){Q.length>0&&this.bulletArray.push(...Q);return}const se=10,q={x:me.x,y:me.y+100};for(let le=0;le<Q.length;le++){const J=Q.length/2-.5;Q[le].setAngle(-1*(le-J)*se),Q[le].enableBody(!0,me.x,me.y,!0,!0);let ne;if(le===J)ne=this.getDistanceVectorBetweenTwoPoints({x:Q[le].x,y:Q[le].y},q);else{const ge=Q[le].rotation,he={x:Math.cos(ge)*(q.x-Q[le].x)-Math.sin(ge)*(q.y-Q[le].y)+Q[le].x,y:Math.sin(ge)*(q.x-Q[le].x)+Math.cos(ge)*(q.y-Q[le].y)+Q[le].y};ne=this.getDistanceVectorBetweenTwoPoints({x:Q[le].x,y:Q[le].y},he)}Q[le].setVelocityX(ne.x*b),Q[le].setVelocityY(ne.y*b)}this.playBossShootSound()},N=m.list.find(Q=>Q.getData("partID")==="leftTopFlap"),X=m.list.find(Q=>Q.getData("partID")==="leftBottomFlap"),V=m.list.find(Q=>Q.getData("partID")==="rightTopFlap"),$=m.list.find(Q=>Q.getData("partID")==="rightBottomFlap");this.scene.tweens.add({duration:200,targets:[N,X,V,$],angle:(Q,me,se,q)=>{if(q===0)return 90;if(q===1)return 90;if(q===2)return-90;if(q===3)return-90},onComplete:()=>{this.scene.tweens.add({duration:100,delay:200,targets:B,scaleY:B.scaleY*.9,yoyo:!0,loop:1,onStart:()=>{if(S.length===0)return;const Q={x:m.x+B.x*m.scale-B.width*m.scale*.6,y:m.y+B.y*m.scale+B.height*m.scale+S[0].displayHeight*.5};L(S.splice(0,7),Q),this.playBossShootLightTween({gameObject:this.bossShootLights[0],position:Q,scale:3*(B.width*m.scale)/this.bossShootLights[0].width,angle:B.angle})},onLoop:()=>{if(S.length===0)return;const Q={x:m.x+B.x*m.scale-B.width*m.scale*.6,y:m.y+B.y*m.scale+B.height*m.scale+S[0].displayHeight*.5};L(S.splice(0,7),Q),this.playBossShootLightTween({gameObject:this.bossShootLights[0],position:Q,scale:3*(B.width*m.scale)/this.bossShootLights[0].width,angle:B.angle})},onComplete:()=>{this.scene.tweens.add({delay:500,duration:100,targets:O,scaleY:O.scaleY*.9,yoyo:!0,loop:1,onStart:()=>{if(S.length===0)return;const Q={x:m.x+O.x*m.scale+O.width*m.scale*.5,y:m.y+O.y*m.scale+O.height*m.scale+S[0].displayHeight*.5};L(S.splice(0,7),Q),this.playBossShootLightTween({gameObject:this.bossShootLights[0],position:Q,scale:3*(O.width*m.scale)/this.bossShootLights[0].width,angle:O.angle})},onLoop:()=>{if(S.length===0)return;const Q={x:m.x+O.x*m.scale+O.width*m.scale*.5,y:m.y+O.y*m.scale+O.height*m.scale+S[0].displayHeight*.5};L(S.splice(0,7),Q),this.playBossShootLightTween({gameObject:this.bossShootLights[0],position:Q,scale:3*(O.width*m.scale)/this.bossShootLights[0].width,angle:O.angle})},onComplete:()=>{this.scene.tweens.add({duration:200,delay:500,targets:[N,X,V,$],angle:Q=>Q.getData("initialAngle")})}})}})}})}shootBossType2ShootMechanism1(m){const S=this.bulletArray.splice(0,29),b=m.list.find(se=>se.getData("partID")==="gunBig");S.forEach(se=>{n().isNil(se.anims)||se.anims.stop();const q=this.getBossBulletTextureKeyCallback();se.texture.key!==q&&se.setTexture(q);const le=.8*b.width*m.scale/se.width;se.scale!==le&&se.setScale(le),se.setFlipY(!0)});const O=.003,B=(se,q)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){se.length>0&&this.bulletArray.push(...se);return}const le=360/se.length,J={x:q.x,y:q.y+100};for(let ne=0;ne<se.length;ne++){se[ne].setAngle(ne*le),se[ne].enableBody(!0,q.x,q.y,!0,!0);let ge;if(ne===0)ge=this.getDistanceVectorBetweenTwoPoints({x:se[ne].x,y:se[ne].y},J);else{const he=se[ne].rotation,we={x:Math.cos(he)*(J.x-se[ne].x)-Math.sin(he)*(J.y-se[ne].y)+se[ne].x,y:Math.sin(he)*(J.x-se[ne].x)+Math.cos(he)*(J.y-se[ne].y)+se[ne].y};ge=this.getDistanceVectorBetweenTwoPoints({x:se[ne].x,y:se[ne].y},we)}se[ne].setVelocityX(ge.x*O),se[ne].setVelocityY(ge.y*O)}this.playBossShootSound()},L=(se,q,le)=>{const J=30,ne={x:q.x,y:q.y+100};for(let ge=0;ge<se.length;ge++){se[ge].setAngle(le+(1-ge)*J),se[ge].enableBody(!0,q.x,q.y,!0,!0);let he;const we=se[ge].rotation,Be={x:Math.cos(we)*(ne.x-se[ge].x)-Math.sin(we)*(ne.y-se[ge].y)+se[ge].x,y:Math.sin(we)*(ne.x-se[ge].x)+Math.cos(we)*(ne.y-se[ge].y)+se[ge].y};he=this.getDistanceVectorBetweenTwoPoints({x:se[ge].x,y:se[ge].y},Be),se[ge].setVelocityX(he.x*O),se[ge].setVelocityY(he.y*O)}},N=m.list.find(se=>se.getData("partID")==="leftTopFlap"),X=m.list.find(se=>se.getData("partID")==="leftBottomFlap"),V=m.list.find(se=>se.getData("partID")==="rightTopFlap"),$=m.list.find(se=>se.getData("partID")==="rightBottomFlap"),Q=m.list.find(se=>se.getData("partID")==="leftGunSmall"),me=m.list.find(se=>se.getData("partID")==="rightGunSmall");this.scene.tweens.add({duration:200,targets:[N,X,V,$],angle:(se,q,le,J)=>{if(J===0)return 90;if(J===1)return 90;if(J===2)return-90;if(J===3)return-90},onComplete:()=>{this.scene.tweens.add({duration:200,targets:b,angle:()=>m.x+b.x>this.scene.game.canvas.width*.5?45:-45,onComplete:()=>{if(S.length===0)return;B(S.splice(0,10),{x:m.x+(Q.x+Q.width*.5)*m.scale,y:m.y+(Q.y+Q.height)*m.scale}),B(S.splice(0,10),{x:m.x+(me.x-me.width*.5)*m.scale,y:m.y+(me.y+me.height)*m.scale});const se={x:m.x+b.x*m.scale,y:m.y+b.y*m.scale},q={x:se.x,y:se.y+b.height*m.scale},le={x:Math.cos(b.rotation)*(q.x-se.x)-Math.sin(b.rotation)*(q.y-se.y)+se.x,y:Math.sin(b.rotation)*(q.x-se.x)+Math.cos(b.rotation)*(q.y-se.y)+se.y};L(S.splice(0,3),le,b.angle),this.scene.tweens.add({duration:200,targets:b,angle:0,onComplete:()=>{if(S.length===0)return;const J={x:m.x+b.x*m.scale,y:m.y+b.y*m.scale},ne={x:J.x,y:J.y+b.height*m.scale},ge={x:Math.cos(b.rotation)*(ne.x-J.x)-Math.sin(b.rotation)*(ne.y-J.y)+J.x,y:Math.sin(b.rotation)*(ne.x-J.x)+Math.cos(b.rotation)*(ne.y-J.y)+J.y};L(S.splice(0,3),ge,b.angle),this.scene.tweens.add({duration:200,targets:b,angle:()=>m.x+b.x>this.scene.game.canvas.width*.5?-45:45,onComplete:()=>{if(S.length===0)return;const he={x:m.x+b.x*m.scale,y:m.y+b.y*m.scale},we={x:he.x,y:he.y+b.height*m.scale},Be={x:Math.cos(b.rotation)*(we.x-he.x)-Math.sin(b.rotation)*(we.y-he.y)+he.x,y:Math.sin(b.rotation)*(we.x-he.x)+Math.cos(b.rotation)*(we.y-he.y)+he.y};L(S.splice(0,3),Be,b.angle),this.scene.tweens.add({duration:200,targets:[N,X,V,$,b],angle:xe=>xe.getData("initialAngle")})}})}})}})}})}shootBossType1ShootMechanism3(m){const S=this.bulletArray.splice(0,20),b=.0075,O=this.getBossBulletTextureKeyCallback();S.forEach(V=>{n().isNil(V.anims)||V.anims.stop(),V.texture.key!==O&&V.setTexture(O)});const B=(V,$)=>{const Q=360/V.length,me={x:$.x,y:$.y+100},se=m.list.find(q=>q.getData("partID")==="leftGun");for(let q=0;q<V.length;q++){V[q].setAngle(q*Q);const le=1*se.width*m.scale/V[q].width;V[q].scale!==le&&V[q].setScale(le),V[q].setFlipY(!0),V[q].enableBody(!0,$.x,$.y,!0,!0);let J;if(q===0)J=this.getDistanceVectorBetweenTwoPoints({x:V[q].x,y:V[q].y},me);else{const ne=V[q].rotation,ge={x:Math.cos(ne)*(me.x-V[q].x)-Math.sin(ne)*(me.y-V[q].y)+V[q].x,y:Math.sin(ne)*(me.x-V[q].x)+Math.cos(ne)*(me.y-V[q].y)+V[q].y};J=this.getDistanceVectorBetweenTwoPoints({x:V[q].x,y:V[q].y},ge)}V[q].setVelocityX(J.x*b),V[q].setVelocityY(J.y*b)}},L=m.list.find(V=>V.getData("partID")==="leftWing"),N=m.list.find(V=>V.getData("partID")==="rightWing"),X=m.list.find(V=>V.getData("partID")==="body");this.scene.tweens.add({duration:200,targets:[L,N],angle:(V,$,Q,me)=>{if(me===0)return V.angle-30;if(me===1)return V.angle+30},onComplete:()=>{this.scene.tweens.add({duration:100,delay:200,targets:[L,N],angle:(V,$,Q,me)=>{if(me===0)return V.angle+60;if(me===1)return V.angle-60},onStart:()=>{S.length!==0&&(B(S,{x:m.x+X.x,y:m.y+X.y}),this.playBossShootSound())},onComplete:()=>{this.scene.tweens.add({duration:100,targets:[L,N],angle:V=>V.getData("initialAngle")})}})}})}shootBossType1And4ShootMechanism2(m,S){const b=this.bulletArray.splice(0,12),O=Math.min(this.AbsoluteWidth,this.AbsoluteHeight)*6e-4,B=this.getBossBulletTextureKeyCallback();b.forEach(he=>{n().isNil(he.anims)||he.anims.stop(),he.texture.key!==B&&he.setTexture(B)});const L=(he,we,Be,xe)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){he.length>0&&this.bulletArray.push(...he);return}const Ee=15;for(let We=0;We<he.length;We++){he[We].setAngle(we.angle+(1-We)*Ee);let nt;S==="1"?nt=we.width*m.scale/he[We].width:nt=we.width*.75*m.scale/he[We].width,he[We].scale!==nt&&he[We].setScale(nt),he[We].setFlipY(!0)}const Ne={x:S==="1"?m.x+we.x*m.scale+(we.flipX?1:-1)*.125*we.width*m.scale:m.x+we.x*m.scale+(we.flipX?1:-1)*.125*we.width*.75*m.scale,y:S==="1"?m.y+we.y+we.height*m.scale+he[0].displayHeight*.2:m.y+we.y+we.height*m.scale+he[0].displayHeight*.35},Qe=we.rotation,Ue={x:Ne.x,y:m.y+we.y},tt={x:Math.cos(Qe)*(Ne.x-Ue.x)-Math.sin(Qe)*(Ne.y-Ue.y)+Ue.x,y:Math.sin(Qe)*(Ne.x-Ue.x)+Math.cos(Qe)*(Ne.y-Ue.y)+Ue.y};for(let We=0;We<he.length;We++){he[We].enableBody(!0,tt.x,tt.y,!0,!0);let nt,yt;if(we.rotation===he[We].rotation)nt=this.getDistanceVectorBetweenTwoPoints({x:he[We].x,y:he[We].y},Be),yt=this.getUnitVector(nt);else{const Ft=he[We].rotation-we.rotation,Dt={x:Math.cos(Ft)*(Be.x-he[We].x)-Math.sin(Ft)*(Be.y-he[We].y)+he[We].x,y:Math.sin(Ft)*(Be.x-he[We].x)+Math.cos(Ft)*(Be.y-he[We].y)+he[We].y};nt=this.getDistanceVectorBetweenTwoPoints({x:he[We].x,y:he[We].y},Dt),yt=this.getUnitVector(nt)}he[We].setVelocityX(yt.x*O),he[We].setVelocityY(yt.y*O)}S==="1"?we.getData("partID").includes("left")&&this.playBossShootSound():this.playBossShootSound(),this.playBossShootLightTween({gameObject:xe,position:tt,scale:S==="1"?3*(we.width*m.scale)/xe.width:3*(we.width*.75*m.scale)/xe.width,angle:we.angle})};let N,X,V,$;S==="1"?(N="leftWing",X="rightWing",V="leftGun",$="rightGun"):(N="wingleft",X="wingright",V="leftGunBig",$="rightGunBig");const Q=m.list.find(he=>he.getData("partID")===N),me=m.list.find(he=>he.getData("partID")===X),se=m.list.find(he=>he.getData("partID")===V),q=m.list.find(he=>he.getData("partID")===$),le=50,J=.9,ne=.8,ge=10;this.scene.tweens.add({duration:400,targets:[Q,me,se,q],x:(he,we,Be,xe)=>xe===0?he.x+le:xe===1?he.x-le:he.x,scaleY:(he,we,Be,xe)=>xe===2||xe===3?J:he.scaleY,yoyo:!0,onUpdate:he=>{const we=he.progress,Be=this.getHeroCurrentPositionCallback(),xe=this.getAngleBetweenTwoPoints({x:m.x+se.x,y:m.y+se.y},Be),Ee=this.getAngleBetweenTwoPoints({x:m.x+q.x,y:m.y+q.y},Be);let Ne=(xe-se.angle)%360;Ne>180?Ne=360-Ne:Ne<-180&&(Ne=360+Ne);const Qe=Ne*we+se.angle;se.setAngle(Qe);let Ue=(Ee-q.angle)%360;Ue>180?Ue=360-Ue:Ue<-180&&(Ue=360+Ue);const tt=Ue*we+q.angle;q.setAngle(tt)},onComplete:()=>{const he=this.getHeroCurrentPositionCallback();this.scene.tweens.add({delay:100,duration:100,targets:[Q,me,se,q],scaleY:(we,Be,xe,Ee)=>Ee===2||Ee===3?ne:we.scaleY,angle:(we,Be,xe,Ee)=>Ee===0?ge:Ee===1?-ge:we.angle,yoyo:!0,loop:1,onStart:()=>{if(b.length===0)return;const we=b.splice(0,3),Be=b.splice(0,3),xe=this.bossShootLights[0],Ee=this.bossShootLights[1];L(we,se,he,xe),S==="1"?L(Be,q,he,Ee):setTimeout(()=>{L(Be,q,he,Ee)},100)},onLoop:()=>{if(b.length===0)return;const we=b.splice(0,3),Be=b.splice(0,3),xe=this.bossShootLights[0],Ee=this.bossShootLights[1];L(we,se,he,xe),S==="1"?L(Be,q,he,Ee):setTimeout(()=>{L(Be,q,he,Ee)},100)},onComplete:()=>{this.scene.tweens.add({duration:100,targets:[se,q],angle:we=>we.getData("initialAngle")})}})}})}shootBossType_1_4_5_ShootMechanism1(m,S){let b;S==="1"?b=20:S==="4"?b=30:S==="5"&&(b=50);const O=this.bulletArray.splice(0,b),B=Math.min(this.AbsoluteHeight,this.AbsoluteWidth)*6e-4,L=this.getBossBulletTextureKeyCallback();O.forEach(xe=>{n().isNil(xe.anims)||xe.anims.stop(),xe.texture.key!==L&&xe.setTexture(L)});const N=(xe,Ee,Ne,Qe)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){this.bulletArray.push(xe);return}let Ue,tt,We;S==="1"?(Ue=Ee.width,tt=m.x+Ee.x*m.scale+(Ee.flipX?1:-1)*.125*Ue*m.scale,We=m.y+(Ee.y+Ee.height)*m.scale+xe.displayHeight*.2):S==="4"?(Ee.getData("partID")==="gunSmall"?Ue=Ee.width*1.5:Ue=Ee.width*.75,tt=m.x+Ee.x*m.scale+(Ee.flipX?1:-1)*m.scale,We=m.y+(Ee.y+Ee.height)*m.scale+xe.displayHeight*.35):(Ee.getData("partID")==="gunSmall"?Ue=Ee.width*1.5:Ue=Ee.width,tt=m.x+Ee.x*m.scale+(Ee.flipX?1:-1)*m.scale,We=m.y+(Ee.y+Ee.height)*m.scale+xe.displayHeight*.35);const nt=Ue*m.scale/xe.width;xe.scale!==nt&&xe.setScale(nt),xe.setFlipY(!0),xe.setAngle(Ee.angle);const yt={x:tt,y:We},Ft=xe.rotation,Dt={x:yt.x,y:m.y+Ee.y},si={x:Math.cos(Ft)*(yt.x-Dt.x)-Math.sin(Ft)*(yt.y-Dt.y)+Dt.x,y:Math.sin(Ft)*(yt.x-Dt.x)+Math.cos(Ft)*(yt.y-Dt.y)+Dt.y};xe.enableBody(!0,si.x,si.y,!0,!0);const Qi=this.getDistanceVectorBetweenTwoPoints({x:xe.x,y:xe.y},Ne),Li=this.getUnitVector(Qi);this.playBossShootLightTween({gameObject:Qe,position:si,scale:3*(Ue*m.scale)/Qe.width,angle:xe.angle}),Ee.getData("partID").includes("left")&&this.playBossShootSound(),xe.setVelocityX(Li.x*B),S==="4"?Ee.getData("partID")==="gunSmall"?xe.setVelocityY(Li.y*B*3):xe.setVelocityY(Li.y*B):S==="5"?xe.setVelocityY(Li.y*B*2.5):xe.setVelocityY(Li.y*B)},X=(xe,Ee,Ne)=>{if(m.getData("isDead")||this.isHeroDeadCallback()){xe.length>0&&this.bulletArray.push(...xe);return}const Qe=15;for(let yt=0;yt<xe.length;yt++){xe[yt].setAngle(Ee.angle+(1-yt)*Qe);const Ft=Ee.width*1.5*m.scale/xe[yt].width;xe[yt].scale!==Ft&&xe[yt].setScale(Ft),xe[yt].setFlipY(!0)}const Ue={x:m.x+Ee.x*m.scale,y:m.y+(Ee.y+Ee.height)*m.scale+xe[0].displayHeight*.5},tt=Ee.rotation,We={x:Ue.x,y:m.y+Ee.y},nt={x:Math.cos(tt)*(Ue.x-We.x)-Math.sin(tt)*(Ue.y-We.y)+We.x,y:Math.sin(tt)*(Ue.x-We.x)+Math.cos(tt)*(Ue.y-We.y)+We.y};for(let yt=0;yt<xe.length;yt++){xe[yt].enableBody(!0,nt.x,nt.y,!0,!0);let Ft,Dt;const si=xe[yt].rotation-Ee.rotation,Qi={x:Math.cos(si)*(Ue.x-We.x)-Math.sin(si)*(Ue.y-We.y)+We.x,y:Math.sin(si)*(Ue.x-We.x)+Math.cos(si)*(Ue.y-We.y)+We.y};Ft=this.getDistanceVectorBetweenTwoPoints(We,Qi),Dt=this.getUnitVector(Ft),xe[yt].setVelocityX(Dt.x*B),xe[yt].setVelocityY(Dt.y*B*1.5)}this.playBossShootLightTween({gameObject:Ne,position:nt,scale:3*(Ee.width*1.5*m.scale)/Ne.width,angle:Ee.angle})};let V,$,Q,me;S==="1"?(V="leftWing",$="rightWing",Q="leftGun",me="rightGun"):(V="wingleft",$="wingright",Q="leftGunBig",me="rightGunBig");const se=m.list.find(xe=>xe.getData("partID")===V),q=m.list.find(xe=>xe.getData("partID")===$),le=m.list.find(xe=>xe.getData("partID")===Q),J=m.list.find(xe=>xe.getData("partID")===me);let ne;(S==="4"||S==="5")&&(ne=m.list.find(xe=>xe.getData("partID")==="gunSmall"));const ge=50,he=.9,we=.8,Be=10;this.scene.tweens.add({duration:400,targets:[se,q,le,J,ne],x:(xe,Ee,Ne,Qe)=>{if(Qe===0)return xe.x+ge;if(Qe===1)return xe.x-ge;if(!n().isNil(xe))return xe.x},scaleY:(xe,Ee,Ne,Qe)=>{if(Qe===2)return he;if(Qe===3)return he;if(Qe===4){if(!n().isNil(xe))return he}else return xe.scaleY},yoyo:!0,onUpdate:xe=>{const Ee=xe.progress;if(O.length===0)return;const Ne=this.getHeroCurrentPositionCallback(),Qe=this.getAngleBetweenTwoPoints({x:m.x+le.x,y:m.y+le.y},Ne),Ue=this.getAngleBetweenTwoPoints({x:m.x+J.x,y:m.y+J.y},Ne);if(S==="4"){let Dt=(this.getAngleBetweenTwoPoints({x:m.x+ne.x,y:m.y+ne.y},Ne)-ne.angle)%360;Dt>180?Dt=360-Dt:Dt<-180&&(Dt=360+Dt);const si=Dt*Ee+ne.angle;ne.setAngle(si)}let tt=(Qe-le.angle)%360;tt>180?tt=360-tt:tt<-180&&(tt=360+tt);const We=tt*Ee+le.angle;le.setAngle(We);let nt=(Ue-J.angle)%360;nt>180?nt=360-nt:nt<-180&&(nt=360+nt);const yt=nt*Ee+J.angle;J.setAngle(yt)},onComplete:()=>{const xe=this.getHeroCurrentPositionCallback();this.scene.tweens.add({delay:100,duration:100,targets:[se,q,le,J,ne],scaleY:(Ee,Ne,Qe,Ue)=>{if(Ue===2)return we;if(Ue===3)return we;if(Ue===4){if(!n().isNil(Ee))return we}else return Ee.scaleY},angle:(Ee,Ne,Qe,Ue)=>{if(Ue===0)return Be;if(Ue===1)return-Be;if(!n().isNil(Ee))return Ee.angle},yoyo:!0,loop:9,onStart:()=>{if(O.length===0)return;let Ee;if(S==="4"){Ee=O.splice(0,3);const We=Ee[2],nt=this.bossShootLights[2];N(We,ne,xe,nt)}else if(S==="5"){Ee=O.splice(0,2);let We=O.splice(0,3);const nt=this.bossShootLights[2];X(We,ne,nt)}else Ee=O.splice(0,2);const Ne=Ee[0],Qe=Ee[1],Ue=this.bossShootLights[0],tt=this.bossShootLights[1];N(Ne,le,xe,Ue),N(Qe,J,xe,tt)},onLoop:()=>{if(O.length===0)return;if(m.getData("isDead")||this.isHeroDeadCallback()){this.scene.tweens.killTweensOf(se),this.scene.tweens.killTweensOf(q),this.scene.tweens.killTweensOf(ne),this.scene.tweens.killTweensOf(le),this.scene.tweens.killTweensOf(J),le.setAngle(le.getData("initialAngle")),J.setAngle(J.getData("initialAngle")),this.bulletArray.push(...O);return}let Ee;if(S==="4"){Ee=O.splice(0,3);const We=Ee[2],nt=this.bossShootLights[2];N(We,ne,xe,nt)}else if(S==="5"){Ee=O.splice(0,2);let We=O.splice(0,3);const nt=this.bossShootLights[2];X(We,ne,nt)}else Ee=O.splice(0,2);const Ne=Ee[0],Qe=Ee[1],Ue=this.bossShootLights[0],tt=this.bossShootLights[1];N(Ne,le,xe,Ue),N(Qe,J,xe,tt)},onComplete:()=>{this.scene.tweens.add({duration:100,targets:[le,J,ne],angle:Ee=>{if(!n().isNil(Ee))return Ee.getData("initialAngle")}})}})}})}playBossShootSound(){this.h5MuteSounds||this.fullGameMuteSounds||this.options.isSoundEnabled&&this.scene.adNetworkSetting.isSoundSupported&&this.scene.sound.play(this.selectedSounds.bossBullet[0].key,{volume:this.volume})}playBossShootLightTween(m){const S=m.gameObject,b=m.position,O=m.scale,B=m.angle,L=this.getCurrentBoss();L===void 0||L.getData("isDead")||this.isHeroDeadCallback()||((S.x!==b.x||S.y!==b.y)&&S.setPosition(b.x,b.y),S.scale!==O&&S.setScale(O),S.angle!==B&&S.setAngle(B),this.scene.tweens.killTweensOf(S),this.scene.tweens.add({duration:100,alpha:0,targets:S,onStart:()=>{S.setAlpha(1),S.setVisible(!0)},onComplete:()=>{S.setVisible(!1)}}))}shoot(){const m=this.bulletArray.shift();m.angle!==0&&m.setAngle(0),m.flipY&&m.setFlipY(!1);const S=parseInt(this.waveInfos[0].bulletVelocity),b=this.getAliveEnemies(),O=Math.floor(Math.random()*b.length),B=b[O],L=this.smallOrBig==="small"?"bullet_small":"bullet",N=this.getAtlasKeyByName(L),X=this.getShortEdge();m.texture.key!==N&&m.setTexture(N),m.setSize(m.displayWidth*.5,m.displayHeight*.5);const V=X/m.width*n().get(this,`scale.${this.scene.getOrientation()}`)/this.maxEnemyCountInRow;m.scale!==V&&m.setScale(V);const $=this.getAtlasPlayKeyByName(L),Q=this.scene.anims.get($);Q.repeat=-1,m.play($,!0),m.enableBody(!0,B.x,B.y,!0,!0),this.enableBullets.push(m),m.setVelocityY(this.getEnemyBulletVelocityY()*.5*S)}dropPowerUp(m,S,b,O){let B=this.powerUpArray.find(Q=>Q.name===b);B.powerUpSprite.angle!==0&&B.powerUpSprite.setAngle(0);const L=Math.min(this.AbsoluteWidth,this.AbsoluteHeight),N=this.powerUpArray.splice(this.powerUpArray.indexOf(B),1);N[0].powerUpSprite.enableBody(!0,m,S,!0,!0),this.enablePowerUps.push(N[0].powerUpSprite),O&&N[0].powerUpSprite.setData("dropIsBoss",!0);let X;b.includes("plane")?X=this.parent.getAtlasKeyByName("plane"):X=this.getAtlasKeyByName("powerUps"),N[0].powerUpSprite.setTexture(X),N[0].powerUpSprite.setFrame(b,!0,!1);let V;const $=this.getTextureWidth(X);b==="wing"?(N[0].powerUpSprite.setOrigin(.25,.6),V=L/$*3.5*n().get(this,`scale.${this.scene.getOrientation()}`)/7,N[0].powerUpSprite.depth!==this.depth+2&&N[0].powerUpSprite.setDepth(this.depth+2)):b==="gunlevelup"?(N[0].powerUpSprite.setOrigin(.5,.5),V=L/$*2.7*n().get(this,`scale.${this.scene.getOrientation()}`)/7,N[0].powerUpSprite.depth!==this.depth-2&&N[0].powerUpSprite.setDepth(this.depth-2)):(V=L/$*2.3*n().get(this,`scale.${this.scene.getOrientation()}`)/7,N[0].powerUpSprite.depth!==this.depth+2&&N[0].powerUpSprite.setDepth(this.depth+2)),N[0].powerUpSprite.setSize(N[0].powerUpSprite.displayWidth*.6,N[0].powerUpSprite.displayHeight*.6),N[0].powerUpSprite.scale!==V&&N[0].powerUpSprite.setScale(V),this.addGlowAndCircleToPowerUp(b,N[0].powerUpSprite,m,S),N[0].powerUpSprite.setVelocityY(this.getPowerUpVelocityY())}addGlowAndCircleToPowerUp(m,S,b,O){const B=this.getAtlasKeyByName("powerUps"),L=Math.min(this.AbsoluteWidth,this.AbsoluteHeight),N=this.getTextureWidth(B),X=L/N*4*n().get(this,`scale.${this.scene.getOrientation()}`)/7,V="powerupbg";let $=this.gameObjectsMap.get(S.body.id+"_circle");n().isNil($)?($=this.scene.add.sprite(b,O+S.displayHeight*.2,B,V).setDepth(this.depth),this.gameObjectsMap.set(S.body.id+"_circle",$)):($.texture.key!==B&&$.setTexture(B),$.frame.name!==V&&$.setFrame(V,!0,!1)),$.scale!==X&&$.setScale(X),($.x!==b||$.y!==O+S.displayHeight*.2)&&$.setPosition(b,O+S.displayHeight*.2),$.visible!==S.visible&&$.setVisible(S.visible);let Q=this.gameObjectsMap.get(S.body.id+"_levelUp");m==="gunlevelup"&&(n().isNil(Q)?(Q=this.scene.add.sprite(b,O+S.displayHeight*.2,B,"gunlevelup").setDepth(this.depth),this.gameObjectsMap.set(S.body.id+"_levelUp",Q)):(Q.texture.key!==B&&Q.setTexture(B),Q.frame.name!=="gunlevelup"&&Q.setFrame("gunlevelup",!0,!1)),Q.scale!==X&&Q.setScale(X),(Q.x!==b||Q.y!==O+S.displayHeight*.2)&&Q.setPosition(b,O+S.displayHeight*.2),Q.visible!==S.visible&&Q.setVisible(S.visible));let me,se=this.gameObjectsMap.get(S.body.id+"_wingFrame");if(m==="wing"){me="wingglow";const ge="wingframe";n().isNil(se)?(se=this.scene.add.sprite(b,O+S.displayHeight*.2,B,ge).setDepth(this.depth+1),this.gameObjectsMap.set(S.body.id+"_wingFrame",se)):(se.texture.key!==B&&se.setTexture(B),se.frame.name!==ge&&se.setFrame(ge,!0,!1)),se.scale!==X&&se.setScale(X),(se.x!==b||se.y!==O+S.displayHeight*.2)&&se.setPosition(b,O+S.displayHeight*.2),se.visible!==S.visible&&se.setVisible(S.visible)}else me="powerupglow";let q=this.gameObjectsMap.get(S.body.id+"_glow");n().isNil(q)?(q=this.scene.add.sprite(b,O+S.displayHeight*.2,B,me).setDepth(this.depth-1).setAlpha(.5),this.gameObjectsMap.set(S.body.id+"_glow",q)):(q.texture.key!==B&&q.setTexture(B),q.frame.name!==me&&q.setFrame(me,!0,!1)),(q.x!==b||q.y!==O+S.displayHeight*.2)&&q.setPosition(b,O+S.displayHeight*.2),q.scale!==X*.8&&q.setScale(X*.8),q.visible!==S.visible&&q.setVisible(S.visible),this.scene.tweens.killTweensOf(q);let le=this.scene.tweens.addCounter({from:.5,to:1,duration:700,ease:"Sine.easeOut",repeat:-1,yoyo:!0,onUpdate:()=>{q.setAlpha(le.getValue())}}),J=0,ne=this.scene.tweens.addCounter({from:q.scale,to:q.scale*1.6,duration:700,repeat:-1,yoyo:!0,onUpdate:ge=>{q.setScale(ne.getValue()),q.setPosition(S.x,S.y+S.displayHeight*.2),$.setPosition(S.x,S.y+S.displayHeight*.2),n().isNil(Q)||(J+=.09,Q.setPosition($.x,$.y+Math.sin(J)*5*$.scale)),n().isNil(se)||se.setPosition(S.x,S.y+S.displayHeight*.2)}})}getFrameNames(m,S,b){return m+"-"+S+"-"+b}resetTimerEvent(){let m=0;const S={delay:this.shootTimerDelay,callback:()=>{if(this.checkAllEnemiesKilled())return;m++;const b=parseInt(this.waveInfos[0].bulletTimeSecond)*1e3,O=this.timerEvent.getElapsed()*m%b;this.calculateEnemyBullet();const B=this.checkShootTimes(O);if(B>0){const L=parseInt(this.waveInfos[0].bulletNumber);if(L<4){const N=Math.random();this.smallOrBig=N<.7?"small":"big"}else if(this.enemyBigBulletCounter+=1,this.bigBulletDropOrderArray.length>0&&this.isEqual&&(this.bigBulletOrder=this.bigBulletDropOrderArray.shift(),this.isEqual=!1),this.enemyBigBulletCounter===this.bigBulletOrder?(this.smallOrBig="big",this.isEqual=!0):this.smallOrBig="small",this.enemyBigBulletCounter===L){this.enemyBigBulletCounter=0;const N=Math.floor(L*.3);this.bigBulletDropOrderArray=[];for(let X=0;X<N;X++)this.bigBulletDropOrderArray.push(Math.ceil(Math.random()*L));this.bigBulletDropOrderArray=this.bigBulletDropOrderArray.sort(),this.bigBulletOrder=0,this.isEqual=!0}for(let N=0;N<B;N++)this.shoot()}},loop:!0};this.deleteTimerEvent(),this.timerEvent=this.scene.time.addEvent(S)}deleteTimerEvent(){n().isNil(this.timerEvent)||this.timerEvent.remove(!1)}deleteDiverTimerEvent(){n().isNil(this.diverEnemyTimerEvent)||this.diverEnemyTimerEvent.remove(!1)}deleteBossShootTimerEvent(){n().isNil(this.bossShootTimer)||this.bossShootTimer.remove(!1),n().isNil(this.diverEnemyTimerEvent)||this.diverEnemyTimerEvent.remove(!1)}calculateEnemyBullet(){if(this.isCurrentlyBossWave())return;const m=this.waveInfos[0].atlasInfos.filter(O=>O.name!=="").length,S=this.getAliveEnemies().length,b=parseInt(this.waveInfos[0].bulletNumber);this.currentBulletNumber=b,S<=m*.2?this.currentBulletNumber=Math.floor(b*.2):S<=m*.4?this.currentBulletNumber=Math.floor(b*.4):S<=m*.6?this.currentBulletNumber=Math.floor(b*.6):S<=m*.8&&(this.currentBulletNumber=Math.floor(b*.8)),this.currentBulletNumber=this.currentBulletNumber<1?1:this.currentBulletNumber}setEnemyShootInfo(){const m=this.waveInfos[0],S=this.currentBulletNumber,b=parseInt(m.bulletTimeSecond);this.bigBulletDropOrderArray=[],this.enemyBigBulletCounter=0;const O=Math.floor(S*.3);this.isEqual=!0;for(let L=0;L<O;L++)this.bigBulletDropOrderArray.push(Math.ceil(Math.random()*S));this.bigBulletDropOrderArray=this.bigBulletDropOrderArray.sort();const B=[];for(let L=0;L<S;L++){const N=Math.round(Math.random()*b*1e3);B.push(N)}B.sort(function(L,N){return L-N}),this.enemyShootTimeArray=B}setCurrentWaveEnemyInfos(){this.currentWaveEnemyInfos=[],this.waveInfos[0].isBoss?this.currentWaveEnemyInfos.push(this.waveInfos[0]):this.waveInfos[0].atlasInfos.forEach(m=>{this.currentWaveEnemyInfos.push({atlasName:m.name,lineIndex:m.lineIndex,powerUp:m.powerUp})})}disableEnemies(){Array.from(this.bossContainersMap.values()).forEach(m=>{m.list.forEach(S=>{S.getData("isPhysicsObject")&&S.disableBody(!0,!0)}),m.setVisible(!1)}),Array.from(this.enemySpritesMap.values()).forEach(m=>{m.disableBody(!1,!0)})}splitLevel(){this.level.forEach((S,b)=>{if(S.startsWith("B")){const O=S.split(","),B=!0,L=O[1],N=O[2],X=O[3];this.waveInfos.push({isBoss:B,type:L,variant:N,hitPoint:X})}else{const O=[],B=S.split("#")[0].split("-")[0],L=S.split("#")[0].split("-")[1],N=S.split("#")[0].split("-")[2],X=S.split("#")[1],V=S.split("#")[2],$=S.split("#")[3].split("|");$.forEach((Q,me)=>{Q.split(";").forEach(q=>{let le,J,ne,ge,he=q.split(",");q.length===0?(le="",J="",ge="",ne=""):(le="enemy"+he[0],J=he[1],ge=he[2],he.length===4?(ne=he[3],ne==="L"?ne="gunlevelup":ne==="S"?ne="wing":ne==="W1"?ne="plane1":ne==="W2"?ne="plane2":ne==="W3"?ne="plane3":ne==="W4"?ne="plane4":ne==="W5"?ne="plane5":ne==="W6"?ne="plane6":ne==="W7"&&(ne="plane7")):ne=""),O.push({name:le,hitPoint:J,lineIndex:me,powerUp:ne,diver:ge})})}),this.waveInfos.push({waveIndex:b+1,entranceTweenType:V,loopTweenType:X,lineCount:$.length,atlasInfos:O,bulletNumber:B,bulletTimeSecond:L,bulletVelocity:N})}})}isCurrentWaveLast(){return this.currentWaveIndex===this.waveInfos.length}getEnemyName(m){return"enemyNumber"+m}}class p extends o{constructor(m){super(m);super.update(m)}load(){super.load(),this.loadSounds(),this.loadAtlases(),this.loadTextures()}soundLoadComplete(){super.soundLoadComplete(),this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&this.isTextureLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isSoundLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1)}textureLoadComplete(){super.textureLoadComplete(),this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&this.isTextureLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isSoundLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1)}atlasesLoadComplete(){super.atlasesLoadComplete(),this.isAtlasesLoadComplete&&this.isSoundLoadComplete&&this.isTextureLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isSoundLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isTextureLoadComplete=!1)}render(){this.addAnimations()}addAnimations(){Object.entries(this.selectedAtlases).forEach(([m])=>{const S=this.getAtlasKeyByName(m),b=this.getAtlasPlayKeyByName(m),O=this.getAnimationName(m);let B=this.gameObjectsMap.get(O);n().isNil(B)&&(B=this.scene.anims.create({key:b,repeat:0,showOnStart:!0,frames:this.scene.anims.generateFrameNames(S)}),this.gameObjectsMap.set(O,B))})}getAnimationName(m){return"animation"+m}getAtlasKeyByName(m){return n().get(this,`selectedAtlases.${m}`).find(S=>S.variant==="image").key}getAtlasPlayKeyByName(m){return this.getAtlasKeyByName(m)+"_"+this.componentId}getImageKey(m){return n().get(this,`selectedImages.${m}`)[0].key}}class v extends o{constructor(m){super(m);super.update(m),this.ish5Games=!1,this.drawReferenceRectangle=!1}load(){super.load(),this.loadBitmapFonts()}bitmapFontsLoadComplete(){super.bitmapFontsLoadComplete(),this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isBitmapFontsLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(65535),this.ish5Games||this.renderHitCount()}renderHitCount(){const m=this.getCurrentHitCountCallback(),S={x:this.CenterAbsoluteX,y:this.AbsoluteHeight*.081};let b=this.gameObjectsMap.get("hitCountBitmapText");n().isNil(b)?(b=this.scene.add.bitmapText(S.x,S.y,this.selectedBitmapFonts.font[0].key,m).setOrigin(.5,.65).setDepth(this.depth),this.gameObjectsMap.set("hitCountBitmapText",b)):((b.x!==S.x||b.y!==S.y)&&b.setPosition(S.x,S.y),b!==m&&b.setText(m));const O=this.getHeroHeartHeightCallback();b.fontSize!==O*1.27&&b.setFontSize(O*1.27),b.tintTopLeft!==this.color&&(b.clearTint(),b.setTint(this.color)),this.showHitCount&&!b.visible?b.setVisible(!0):!this.showHitCount&&b.visible&&b.setVisible(!1)}}class T extends o{constructor(m){super(m);super.update(m),this.isVisible=!1,this.currentScoreValue=0,this.highScoreValue=0,this.isLevelFailEventSent=!1}load(){super.load(),this.loadTextures(),this.loadBitmapFonts()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}bitmapFontsLoadComplete(){super.bitmapFontsLoadComplete(),this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&n().hasIn(this,"onReady")&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1)}render(){this.shortEdge=Math.min(this.AbsoluteHeight,this.AbsoluteWidth),this.renderBackground(),this.renderResultScreen()}renderBackground(){let m=this.gameObjectsMap.get("background");const S=this.getImageKey("background");n().isNil(m)?(m=this.hudScene.add.image(this.hudScene.game.canvas.width*.5,this.hudScene.game.canvas.height*.5,S),this.gameObjectsMap.set("background",m)):m.texture.key!==S&&m.setTexture(S),this.hudScene.getOrientation()==="landscape"?(m.setScale(this.hudScene.game.canvas.width/m.width),m.displayWidth=this.hudScene.game.canvas.width*1.01,m.displayHeight<this.hudScene.game.canvas.height&&m.setScale(this.hudScene.game.canvas.height/m.height)):this.hudScene.getOrientation()==="portrait"?(m.setScale(this.hudScene.game.canvas.height/m.height),m.displayHeight=this.hudScene.game.canvas.height*1.01,m.displayWidth<this.hudScene.game.canvas.width&&m.setScale(this.hudScene.game.canvas.width/m.width)):(m.setScale(this.hudScene.getShortEdge()/m.width),m.displayHeight=this.hudScene.game.canvas.height*1.01,m.displayWidth=this.hudScene.game.canvas.width*1.01),m.setX(this.hudScene.game.canvas.width*.5),m.setY(this.hudScene.game.canvas.height*.5),m.visible!==this.isVisible&&m.setVisible(this.isVisible),m.depth!==this.depth&&m.setDepth(this.depth)}renderResultScreen(){const m=this.getImageKey("resultScreen"),S=this.getImageKey("award"),b=this.getImageKey("restartButton"),O=this.selectedBitmapFonts.font[0].key;let B=this.gameObjectsMap.get("container"),L=this.gameObjectsMap.get("resultScreen"),N=this.gameObjectsMap.get("award"),X=this.gameObjectsMap.get("restartButton"),V=this.gameObjectsMap.get("currentScoreText"),$=this.gameObjectsMap.get("highScoreText"),Q=this.gameObjectsMap.get("highScoreContainer");n().isNil(B)?(B=this.hudScene.add.container(this.CenterAbsoluteX,this.CenterAbsoluteY),this.gameObjectsMap.set("container",B),L=this.hudScene.add.image(0,0,m),this.gameObjectsMap.set("resultScreen",L),B.add(L),V=this.hudScene.add.bitmapText(0,0,O,this.currentScoreValue),V.setOrigin(.5,.5),this.gameObjectsMap.set("currentScoreText",V),B.add(V),Q=this.hudScene.add.container(0,0),this.gameObjectsMap.set("highScoreContainer",Q),N=this.hudScene.add.image(0,0,S),this.gameObjectsMap.set("award",N),Q.add(N),$=this.hudScene.add.bitmapText(0,0,O,this.highScoreValue),$.setOrigin(.5,.5),this.gameObjectsMap.set("highScoreText",$),Q.add($),B.add(Q),X=this.hudScene.add.image(0,0,b),X.setVisible(!1),X.setInteractive(),X.on("pointerdown",()=>{this.restartGameCallBack()}),this.gameObjectsMap.set("restartButton",X),B.add(X)):(L.texture.key!==m&&L.setTexture(m),N.texture.key!==S&&N.setTexture(S),X.texture.key!==b&&X.setTexture(b),V.text!==this.currentScoreValue&&V.setText(this.currentScoreValue),$.text!==this.highScoreValue&&$.setText(this.highScoreValue)),L.displayWidth!==this.shortEdge*.75&&(L.displayWidth=this.shortEdge*.75),L.displayHeight!==this.shortEdge*.75&&(L.displayHeight=this.shortEdge*.75),X.displayWidth!==L.displayWidth*.25&&(X.displayWidth=L.displayWidth*.25),X.displayHeight!==L.displayWidth*.22&&(X.displayHeight=L.displayWidth*.22),(V.x!==L.x||V.y!==-L.displayHeight*.3)&&V.setPosition(L.x,-L.displayHeight*.3),(X.x!==L.x||X.y!==L.displayHeight*.22)&&X.setPosition(L.x,L.displayHeight*.22);let me=L.displayWidth*.15;V.fontSize!==me&&V.setFontSize(me);let se=$.getTextBounds();const le=se.global.width+se.global.height+se.global.height*.5;le>L.displayWidth*.65&&(me-=le-L.displayWidth*.65,V.fontSize!==me&&V.setFontSize(me));let J=L.displayWidth*.09;$.fontSize!==J&&$.setFontSize(J);let ne=$.getTextBounds();const ge=ne.global.width,he=ge+ne.global.height+ne.global.height*.5;he>L.displayWidth*.65&&(J-=he-L.displayWidth*.65,$.fontSize!==J&&$.setFontSize(J),ne=$.getTextBounds()),N.displayWidth!==ne.global.height*.9&&(N.displayWidth=ne.global.height*.9),N.displayHeight!==ne.global.height*.7&&(N.displayHeight=ne.global.height*.7),($.x!==0||$.y!==0)&&$.setPosition(0,0),(N.x!==ge*.5+N.displayWidth*.6||N.y!==ne.global.height*.15)&&N.setPosition(ge*.5+N.displayWidth*.6,ne.global.height*.15),(Q.x!==L.x-N.displayWidth*.5||Q.y!==-L.displayHeight*.12)&&Q.setPosition(L.x-N.displayWidth*.5,-L.displayHeight*.14),(B.x!==this.CenterAbsoluteX||B.y!==this.CenterAbsoluteY)&&B.setPosition(this.CenterAbsoluteX,this.CenterAbsoluteY),B.visible!==this.isVisible&&B.setVisible(this.isVisible),B.depth!==this.depth+1&&B.setDepth(this.depth+1),X.visible!==(this.isVisible&&this.isLevelFailEventSent)&&X.setVisible(this.isVisible&&this.isLevelFailEventSent)}getImageKey(m){return n().get(this,`selectedImages.${m}`)[0].key}}class E extends o{constructor(m){super(m);super.update(m),this.drawReferenceRectangle=!1}load(){super.load(),this.loadTextures()}loadTextures(){super.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&_.hasIn(this,"onReady")&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),this.renderFamobiCreditImage()}renderFamobiCreditImage(){const m=this.selectedImages.famobiCredit[0].key,S=Math.min(this.AbsoluteWidth,this.AbsoluteHeight);let b=this.gameObjectsMap.get("creditImage");_.isNil(b)?(b=this.hudScene.add.image(this.CenterAbsoluteX,this.CenterAbsoluteY,m),b.setDepth(this.depth),this.gameObjectsMap.set("creditImage",b)):b.texture.key!==m&&b.setTexture(m);const O=S/b.width*.7;b.scale!==O&&b.setScale(O),this.scene.getOrientation()==="portrait"?(b.setOrigin(.5,.5),(b.x!==this.CenterAbsoluteX+this.AbsoluteWidth*.5-b.displayWidth*.7||b.y!==this.CenterAbsoluteY)&&b.setPosition(this.CenterAbsoluteX+this.AbsoluteWidth*.5-b.displayWidth*.7,this.CenterAbsoluteY)):(b.setOrigin(1,.5),(b.x!==this.CenterAbsoluteX+this.AbsoluteWidth*.31||b.y!==this.CenterAbsoluteY)&&b.setPosition(this.CenterAbsoluteX+this.AbsoluteWidth*.31,this.CenterAbsoluteY)),b.alpha!==this.alpha&&b.setAlpha(this.alpha),b.setVisible(C.name==="famobi")}}const M="famobi",C=new Map([["applovin",{name:"applovin",isSoundSupported:!0,useDapi:!1}],["default",{name:"default",isSoundSupported:!0,useDapi:!1}],["facebook",{name:"facebook",isSoundSupported:!0,useDapi:!1}],["google",{name:"google",isSoundSupported:!1,useDapi:!1}],["ironsource",{name:"ironsource",isSoundSupported:!0,useDapi:!0}],["mintegral",{name:"mintegral",isSoundSupported:!0,useDapi:!1}],["unity",{name:"unity",isSoundSupported:!0,useDapi:!1}],["vungle",{name:"vungle",isSoundSupported:!0,useDapi:!1}],["preview",{name:"preview",isSoundSupported:!0,useDapi:!1}],["tiktok",{name:"tiktok",isSoundSupported:!0,useDapi:!1}],["h5games",{name:"h5games",isSoundSupported:!0,useDapi:!1}],["famobi",{name:"famobi",isSoundSupported:!0,useDapi:!1}]]).get(M);let P={components:{tutorialHand1:{type:"tutorialHand",position:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},scale:{portrait:.2,landscape:.15},origin:{x:.3,y:.2},disappearDuration:500,moveDuration:1e3,tapDuration:500,releaseDuration:500,isVisible:!0,fadeInDuration:500,fadeOutDuration:500,depth:155,delay:0,isGameSceneComponent:!0},alienShooterWrapper1:{parentId:"canvas1",type:"alienShooterWrapper",size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},position:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}},isLevelBased:!0},alienShooterHero1:{parentId:"alienShooterWrapper1",position:{portrait:{x:.5,y:.8},landscape:{x:.5,y:.8}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},scale:{portrait:.8,landscape:.8},type:"AlienShooterHero",localization:{question:{en:{caption:"Would you like to continue?",fontColor:"#ffffff",fontSize:1},de:{caption:"M\xF6chtest du weiter machen?",fontColor:"#ffffff",fontSize:1}},accept:{en:{caption:"Yes",fontColor:"#ffffff",fontSize:1},de:{caption:"Ja",fontColor:"#ffffff",fontSize:1}},decline:{en:{caption:"No",fontColor:"#ffffff",fontSize:1},de:{caption:"Nein",fontColor:"#ffffff",fontSize:1}}},depth:100,color:16777215,volume:.1,heroHeartCount:3,planeType:"1",bulletCount:900,bulletCountPerShoot:1,maxBulletCountPerShoot:10,bulletColor:2829099,laserColor1:16777215,laserColor2:15976574,baseBulletDamage:100,shootFrequencyInMilliseconds:100},alienShooterEnemy1:{parentId:"alienShooterWrapper1",position:{portrait:{x:.5,y:.42},landscape:{x:.5,y:.42}},size:{portrait:{width:1,height:.6},landscape:{width:1,height:.6}},scale:{portrait:.7,landscape:.7},type:"alienShooterEnemy1",depth:99,bulletCount:100,powerUpCount:320,hitImageCount:150,shootTimerDelay:100,enemyDiveSeconds:1,isWaveTextTweenEnabled:!0,isLevelTextTweenEnabled:!0,volume:1,bossHealthBarColor:16065596,bossHealthBarBgColor:3886191,isWeaponDrop:!1,bossWaveNumber:6,hitPoints:{enemy1:8,enemy2:16,enemy3:30,enemy4:40,enemy5:6},maxEnemyCountInRow:7,localization:{en:{levelCaption:"Level",waveCaption:"Wave",fontColor:"#ffffff",fontSize:1},de:{levelCaption:"Level",waveCaption:"Welle",fontColor:"#ffffff",fontSize:1}}},resultScreen1:{position:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},scale:{portrait:.7,landscape:.7},type:"resultScreen1",depth:240},famobiCredit1:{position:{portrait:{x:.9,y:.95},landscape:{x:.5,y:.95}},size:{portrait:{width:.2,height:.1},landscape:{width:1,height:.1}},scale:{portrait:.7,landscape:.7},type:"famobiCredit",depth:240,alpha:.65},gameScore1:{position:{portrait:{x:.5,y:.8},landscape:{x:.5,y:.8}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},scale:{portrait:.7,landscape:.7},type:"gameScore1",depth:99,color:16777215,showHitCount:!0},dimmer1:{parentId:"tutorialHand1",type:"Dimmer",position:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},depth:107,color:0,alpha:0,isInGameComponent:!0},dimmerForPopUp1:{type:"Dimmer",position:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},depth:107,color:0,alpha:.9,isInGameComponent:!0},roundedTextBox1:{parentId:"tutorialHand1",type:"RoundedTextBox",position:{portrait:{x:.5,y:.65},landscape:{x:.5,y:.6}},size:{portrait:{width:.8,height:.15},landscape:{width:.4,height:.3}},color:16777215,alpha:1,depth:55,isBoxEnabled:!1,isTextEnabled:!1,localization:{en:{caption:"Drag to Move",fontColor:"#ffffff",fontSize:1},de:{caption:"Halten Sie ziehen, um W\xF6rter zu finden!",fontColor:"#3b416c",fontSize:1}}},canvas1:{type:"canvas",name:"canvas1",position:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},canvasSize:"fill"},background1:{position:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}},size:{portrait:{width:1,height:1},landscape:{width:1,height:1}},type:"background",name:"background",depth:-10,zoom:{portrait:1,landscape:1},zoomPosition:{portrait:{x:.5,y:.5},landscape:{x:.5,y:.5}}},soundFxVolumeManager1:{type:"SoundFxVolumeManager",volume:1}},options:{link:{android:"https://play.google.com/store/apps/details?id=com.fugo.wow",ios:"https://apps.apple.com/tr/app/words-of-wonders-crossword/id1369521645"},isEndCardEnabled:!1,endCardSeconds:0,endCardTaps:0,endCardMoves:0,isSoundEnabled:!0,isTutorialEnabled:!0,isEntireScreenCTAEnabled:!0,isBannerEnabled:!1,language:"en",isInGameCTAEnabled:!1,goToMarketTaps:0,shouldForcePortraitMode:!1}},R={},D=!1;function I(ke){const m=ke.componentId,S=ke.componentConfig,b=ke.componentClass,O=ke.componentsMap,B=ke.onComponentsReady,L=ke.componentsReadyStatusMap;O.set(m,new b(S));const N=O.get(m);return N.componentId=m,L.set(m,!1),N.onReady=()=>{L.set(m,!0);let X=Array.from(L.values()).filter($=>$===!0).length,V=Math.floor(X*100/O.size);C.name==="famobi"?window.famobi.setPreloadProgress(V):C.name==="h5games"&&(D||(D=V===100,window.h5games.sendPreloadProgress(V))),Array.from(L.values()).every($=>$===!0)&&B()},N}let W=n().clone(P);const G=C.name==="h5games"||C.name==="tiktok"||C.name==="famobi";let Y=(navigator.language||navigator.userLanguage).split("-")[0];Y!=="en"&&Y!=="de"&&(Y="en"),W.options.language=Y;let j=R,ee=!1,te=!1,F=!1,U=!1,K="",oe=!1,ae,ce=0,re=!1,ve=!1,Se=!1,de=0,pe,Ae=0,Oe="",Fe="",Ve="",ze="",Xe=0,Ge=!1,pt=[],lt=[],xt=null,it=0,Et=0,gt=!1,dt=1,St=!1,mt=0,Mt=[],It=!0;function kt(ke){C.name==="h5games"?(W.components.alienShooterEnemy1.hitPoints={enemy1:window.h5games.getPresets("enemy_one_hit_point"),enemy2:window.h5games.getPresets("enemy_two_hit_point"),enemy3:window.h5games.getPresets("enemy_three_hit_point"),enemy4:window.h5games.getPresets("enemy_four_hit_point"),enemy5:window.h5games.getPresets("enemy_five_hit_point")},W.components.alienShooterEnemy1.bossWaveNumber=window.h5games.getPresets("boss_wave_number"),W.components.alienShooterHero1.planeType=window.h5games.getPresets("plane_type"),W.components.alienShooterHero1.heroHeartCount=window.h5games.getPresets("hero_hearth_count"),W.components.alienShooterWrapper1.isLevelBased=window.h5games.getPresets("is_level_based"),W.components.alienShooterEnemy1.isLevelTextTweenEnabled=window.h5games.getPresets("is_level_text_tween_enabled"),W.components.alienShooterEnemy1.isWeaponDrop=window.h5games.getPresets("is_weapon_drop"),W.components.alienShooterEnemy1.enemyDiveSeconds=window.h5games.getPresets("enemy_dive_seconds"),pe=new gi({assets:ke})):C.name==="famobi"?(W.components.alienShooterEnemy1.hitPoints=config.enemyHitPoints,W.components.alienShooterEnemy1.bossWaveNumber=config.bossWaveNumber,W.components.alienShooterHero1.planeType=config.planeType,W.components.alienShooterHero1.heroHeartCount=config.heroHeartCount,W.components.alienShooterWrapper1.isLevelBased=config.isLevelBased,W.components.alienShooterEnemy1.isLevelTextTweenEnabled=config.isLevelTextTweenEnabled,W.components.alienShooterEnemy1.isWeaponDrop=config.isWeaponDrop,W.components.alienShooterEnemy1.enemyDiveSeconds=config.enemyDiveSeconds,pe=new gi({assets:ke})):(ae=1,pe=new gi({assets:ke}))}class gi{constructor(m){n().isEmpty(j)||(n().isNil(j.components)||Object.entries(j.components).forEach(([q])=>{const le=n().get(j,`components.${q}`),J=n().get(W,`components.${q}`);n().isEqual(J,le)||Object.entries(le).forEach(([ne,ge])=>{n().set(W,`components.${q}.${ne}`,ge)})}),n().isNil(j.options)||Object.entries(j.options).forEach(([q])=>{const le=n().get(j,`options.${q}`),J=n().get(W,`options.${q}`);n().isEqual(J,le)||n().set(W,`options.${q}`,le)})),!n().isEmpty(j)&&n().has(j,"versionInfo")?this.versionName=j.versionInfo.name:this.versionName="testVersion",this.componentsReadyStatusMap=new Map,this.areComponentsReady=!1,this.components=new Map;const S=I({componentId:"background1",componentClass:i,componentConfig:W.components.background1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});G?S.selectedImages={background1:[{key:"selectedBackground",fileTiktok:"background.jpg"}],background2:[{key:"selectedBackground1",fileTiktok:"background1.jpg"}],background3:[{key:"selectedBackground2",fileTiktok:"background2.jpg"}],background4:[{key:"selectedBackground3",fileTiktok:"background3.jpg"}]}:S.selectedImages={background1:[{key:"selectedBackground1",data:m.assets.images.get("selectedBackground")}],background2:[{key:"selectedBackground2",data:m.assets.images.get("selectedBackground1")}],background3:[{key:"selectedBackground3",data:m.assets.images.get("selectedBackground2")}],background4:[{key:"selectedBackground2",data:m.assets.images.get("selectedBackground3")}]},S.onWorldBoundsCallback=q=>{const le=this.components.get("alienShooterHero1"),J=le.gameObjectsMap.get("alienShooterPlane");if(q.label==="heroBullet"){if(le.bulletType==="6"&&q.id==="heroBullet_laser"){const ne=le.gameObjectsMap.get("bulletLaser");ne.setVelocityY(0),ne.disableBody(!0,!0),le.bulletType6Call();const ge=le.scene.game.canvas.height;le.laserImage.displayHeight!==ge&&(le.laserImage.displayHeight=ge),N.getAliveEnemies().forEach(Be=>{const xe=Be.getData("enemyTakeHit")+1;if(Be.setData("enemyTakeHit",xe),le.bulletType==="6"&&xe%12===0){let Ee=N.enemyHealthBarsMap.get("healthBarBg"+Be.name),Ne=N.enemyHealthBarsMap.get("healthBar"+Be.name);Ee.setVisible(!1),Ne.setVisible(!1),N.setEnemyHealthBarPosition(Be)}}),le.gameObjectsMap.get("laserImageHit").setVisible(!1)}q.id!=="heroBullet_laser"&&(le.onBulletCollideWithSomething(q.gameObject),le.editEnableBullets(q.gameObject))}else q.label==="enemyBullet"?(N.enemyBulletCollideCallback(q.gameObject),N.editEnableBullets(q.gameObject)):q.label==="powerUp"&&(q.gameObject.disableBody(!0,!0),N.editEnablePowerUps(q.gameObject),N.removePowerUpAssets(q.gameObject),Se&&q.gameObject.getData("dropIsBoss")&&(le.renderHeroExitTheScreenTween(J),q.gameObject.setData("dropIsBoss",!1)))};const b=I({componentId:"canvas1",componentClass:s,componentConfig:W.components.canvas1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}}),O=I({componentId:"tutorialHand1",componentClass:a,componentConfig:W.components.tutorialHand1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});G?O.selectedImages={default:[{key:"selectedHand",variant:"normal",fileTiktok:"hand.png"},{key:"selectedHandGlow",variant:"glow",fileTiktok:"handGlow.png"}]}:O.selectedImages={default:[{key:"selectedHand",variant:"normal",data:m.assets.images.get("selectedHand")},{key:"selectedHandGlow",variant:"glow",data:m.assets.images.get("selectedHandGlow")}]},O.onResize=()=>{this.addTutorialHandActions()};const B=I({componentId:"alienShooterWrapper1",componentClass:p,componentConfig:W.components.alienShooterWrapper1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});G?(B.selectedAtlases={fireExpo:[{key:"selectedFireExpoAtlas_PNG",variant:"image",fileTiktok:"atlases/fireExpoAnimation/fire-expo.png"},{variant:"JSON",fileTiktok:"atlases/fireExpoAnimation/fire-expo.json"}],bosses:[{key:"selectedBosses_PNG",variant:"image",fileTiktok:"atlases/bosses/spritesheet.png"},{variant:"JSON",fileTiktok:"atlases/bosses/spritesheet.json"}],bosses2:[{key:"selectedBosses2_PNG",variant:"image",fileTiktok:"atlases/bosses/spritesheet2.png"},{variant:"JSON",fileTiktok:"atlases/bosses/spritesheet2.json"}],plane:[{key:"selectedPlaneAtlas_PNG",variant:"image",fileTiktok:"atlases/planeAnimation/plane.png"},{variant:"JSON",fileTiktok:"atlases/planeAnimation/plane.json"}]},B.selectedImages={bullet1:[{key:"selectedBullet1",fileTiktok:"bullet1.png"}],bullet2:[{key:"selectedBullet2",fileTiktok:"bullet2.png"}],bullet2_particle:[{key:"selectedBullet2Particle",fileTiktok:"bullet2_particle.png"}],bullet3:[{key:"selectedBullet3",fileTiktok:"bullet3.png"}],bullet3_particle:[{key:"selectedBullet3Particle",fileTiktok:"bullet3_particle.png"}],bullet4:[{key:"selectedBullet4",fileTiktok:"bullet4.png"}],bullet4_small:[{key:"selectedBullet4Small",fileTiktok:"bullet4_small.png"}],bullet4_side:[{key:"selectedBullet4Side",fileTiktok:"bullet4_side.png"}],bullet5:[{key:"selectedBullet5",fileTiktok:"bullet5.png"}],bullet6:[{key:"selectedBullet6",fileTiktok:"bullet6.png"}],laserBullet6:[{key:"selectedLaser",fileTiktok:"laser.png"}]},B.selectedSounds={boom:[{key:"selectedBoomSound",fileTiktok:"sound/alienShooter_boom.mp3"}]}):(B.selectedAtlases={fireExpo:[{key:"selectedFireExpoAtlas_PNG",variant:"image",data:m.assets.atlases.get("selectedFireExpoAtlas_PNG")},{JSON:m.assets.atlases.get("selectedFireExpoAtlas_JSON"),variant:"JSON"}],bosses:[{key:"selectedBosses_PNG",variant:"image",data:m.assets.atlases.get("selectedBosses_PNG")},{JSON:m.assets.atlases.get("selectedBosses_JSON"),variant:"JSON"}],bosses2:[{key:"selectedBosses2_PNG",variant:"image",data:m.assets.atlases.get("selectedBosses2_PNG")},{JSON:m.assets.atlases.get("selectedBosses2_JSON"),variant:"JSON"}],plane:[{key:"selectedPlaneAtlas_PNG",variant:"image",data:m.assets.atlases.get("selectedPlaneAtlas_PNG")},{JSON:m.assets.atlases.get("selectedPlaneAtlas_JSON"),variant:"JSON"}]},B.selectedImages={bullet1:[{key:"selectedBullet1",data:m.assets.images.get("selectedBullet1")}],bullet2:[{key:"selectedBullet2",data:m.assets.images.get("selectedBullet2")}],bullet2_particle:[{key:"selectedBullet2Particle",data:m.assets.images.get("selectedBullet2Particle")}],bullet3:[{key:"selectedBullet3",data:m.assets.images.get("selectedBullet3")}],bullet3_particle:[{key:"selectedBullet3Particle",data:m.assets.images.get("selectedBullet3Particle")}],bullet4:[{key:"selectedBullet4",data:m.assets.images.get("selectedBullet4")}],bullet4_small:[{key:"selectedBullet4Small",data:m.assets.images.get("selectedBullet4Small")}],bullet4_side:[{key:"selectedBullet4Side",data:m.assets.images.get("selectedBullet4Side")}],bullet5:[{key:"selectedBullet5",data:m.assets.images.get("selectedBullet5")}],bullet6:[{key:"selectedBullet6",data:m.assets.images.get("selectedBullet6")}],laserBullet6:[{key:"selectedLaser",data:m.assets.images.get("selectedLaser")}]},B.selectedSounds={boom:[{key:"selectedBoomSound",data:C.name==="google"?"":m.assets.sounds.get("selectedBoomSound")}]});const L=I({componentId:"alienShooterHero1",componentClass:h,componentConfig:W.components.alienShooterHero1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});L.selectedImages={},L.setGameUnmuteStateToLocalStorage=()=>{this.setGameUnmuteStateToLocalStorage()},L.setGameMuteStateToLocalStorage=()=>{this.setGameMuteStateToLocalStorage()},L.setNewEnemyLevelCallBack=()=>{C.name==="h5games"&&B.isLevelBased||N.isCurrentlyBossWave()||(N.checkAllEnemiesExploded()&&(N.currentWaveIndex+=1,N.deleteDiverTimerEvent(),ae++,this.setNewLevel()),N.playWaveTextTween())},L.resetTypeCounterCallback=()=>{ce=0},L.onBackgroundChangeCallBack=()=>{C.name==="famobi"&&B.isLevelBased&&(Q.isVisible=!1,Q.render());const q=this.components.get("background1");let le=q.gameObjectsMap.get("tileSprite");C.name==="famobi"?ce++:C.name==="h5games"&&(B.isLevelBased?ce=it+1:ce++);const J=q.getBackgroundImagesTypeAndColors();let ne;ce===J.length?ne=ce:ne=ce%J.length;const ge=n().get(q,`selectedImages.background${J[ne-1].type}`)[0].key;le.texture.key!==ge&&le.setTexture(ge),le.tintTopLeft!==J[ne-1].color&&(le.clearTint(),le.setTint(J[ne-1].color))},L.onEnemyHitCallBack=()=>{if(N.isCurrentlyBossWave())return;N.getAliveEnemies().forEach(le=>{const J=le.getData("enemyTakeHit")+1;if(le.setData("enemyTakeHit",J),L.bulletType!=="6"&&J%15===0){let ne=N.enemyHealthBarsMap.get("healthBarBg"+le.name),ge=N.enemyHealthBarsMap.get("healthBar"+le.name);ne.setVisible(!1),ge.setVisible(!1),N.setEnemyHealthBarPosition(le)}})},L.onNextLevelAfterBossCallBack=()=>{C.name==="h5games"&&B.isLevelBased||(N.currentWaveIndex+=1,ae++,n().isNil(L.timerEvent)||(L.deleteTimerEvent(),L.renderTimerEvent()),this.setNewLevel(),N.playWaveTextTween())},L.onAddHeroDamageColliderCallBack=q=>{const le=this.components.get("alienShooterEnemy1");Oe=L.scene.physics.add.collider(q,le.enemyGroup,this.planeCollideWithEnemyCallback.bind(this)),Fe=L.scene.physics.add.collider(q,le.enemyBulletGroup,this.planeCollideWithEnemyBulletCallback.bind(this))},L.onCurrentWaveBossCallBack=()=>{N.deleteBossShootTimerEvent(),N.isCurrentlyBossWave()&&(N.waveInfos[0].type==="1"||N.waveInfos[0].type==="3"?N.addBossShootInterval(5e3):(N.waveInfos[0].type==="2"||N.waveInfos[0].type==="4"||N.waveInfos[0].type==="5")&&N.addBossShootInterval(6e3))},L.onPopUpDimmerCallback=q=>{this.components.get("dimmerForPopUp1").gameObjectsMap.get("dimmer").setVisible(!1),q==="decline"&&(L.isTaped=!1,L.pauseSound(),C.name==="famobi"&&(window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:Ae}).then(function(){Mt.push(Ae),window.famobi.localStorage.setItem("scores",JSON.stringify(Mt));const ne=JSON.parse(window.famobi.localStorage.getItem("scores"));window.famobi.localStorage.setItem("highScore",JSON.stringify(Math.max(...ne)));const ge=pe.components.get("resultScreen1");ge.currentScoreValue=Ae,ge.highScoreValue=window.famobi.localStorage.getItem("highScore"),ge.isVisible=!0,ge.render(),setTimeout(()=>{window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:"",reason:"dead"}).then(()=>{ge.isLevelFailEventSent=!0,ge.render()})},2e3)}),window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:Ae}),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Progression",progressionStatus:"FAIL",progression01:"Level",value:1})))},L.onNetworkNameH5game=()=>C.name==="h5games",L.getHasExternalMute=()=>window.famobi.hasFeature("external_mute"),L.onNetworkH5AndLevelBased=()=>C.name==="h5games"&&B.isLevelBased,L.onFamobiRewardedAdCallback=()=>{C.name==="famobi"?window.famobi.rewardedAd(function(q){q.rewardGranted?(window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Resource",flowType:"Source",itemType:"gameCurrency",amount:1,resourceCurrency:"gem",itemId:"Revive"}),L.revive()):stopGameForAll()}):L.revive()},L.onAcceptRevivePopUpCallBack=()=>{window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Revive:Accept:Clicked"}),N.renderDiverEnemyTween()},L.onDeclineRevivePopUpCallBack=()=>{window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Revive:Decline:Clicked"})},G?(C.name!=="h5games"&&(L.selectedImages.soundIconActive=[{key:"selectedSoundIconActive",fileTiktok:"soundIconActive.png"}],L.selectedImages.soundIconPassive=[{key:"selectedSoundIconPassive",fileTiktok:"soundIconPassive.png"}],L.selectedImages.popUp=[{key:"selectedPopUp",fileTiktok:"popUp.png"}],L.selectedImages.popUpCancelButton=[{key:"selectedPopUpCancelButton",fileTiktok:"popUpCancelButton.png"}]),L.selectedImages.heartStroke=[{key:"selectedHeartStroke",fileTiktok:"heart_stroke.png"}],L.selectedImages.heartFill=[{key:"selectedHeartFill",fileTiktok:"heart_fill.png"}],L.selectedImages.heartPlus=[{key:"selectedHeartPlus",fileTiktok:"heart_plus.png"}],L.selectedAtlases={laserImageHit:[{key:"selectedLaserImageHit_PNG",variant:"image",fileTiktok:"atlases/laserHit/laserhit.png"},{variant:"JSON",fileTiktok:"atlases/laserHit/laserhit_atlas.json"}],planeFx:[{key:"selectedPlaneFx_PNG",variant:"image",fileTiktok:"atlases/planePowerUpAnimation/plane_fx.png"},{variant:"JSON",fileTiktok:"atlases/planePowerUpAnimation/plane_fx.json"}]},L.selectedBitmapFonts={font:[{key:"selectedFont_PNG",fileTiktok:"bitmapFont/alien-jura/alien-jura.png",variant:"image"},{fileTiktok:"bitmapFont/alien-jura/alien-jura.xml",variant:"XML"}]},L.selectedImages.super_wing=[{key:"selectedSuperWing",fileTiktok:"super_wing.png"}],L.selectedImages.super_wing_highlight=[{key:"selectedSuperWingHighlight",fileTiktok:"super_wing_highlight.png"}],L.selectedImages.circle_effect=[{key:"selectedCircleEffect",fileTiktok:"circle_effect.png"}],L.selectedSounds={bullet:[{key:"selectedBulletSound",fileTiktok:"sound/alienShooter_bullet.mp3"}],laserBullet:[{key:"selectedLaserBulletSound",fileTiktok:"sound/alienShooter_laserBullet.mp3"}],shotgunBullet:[{key:"selectedShotgunBulletSound",fileTiktok:"sound/alienShooter_shotgun.mp3"}]}):(C.name!=="h5games"&&(L.selectedImages.popUp=[{key:"selectedPopUp",data:m.assets.images.get("selectedPopUp")}],L.selectedImages.popUpButton=[{key:"selectedPopUpButton",data:m.assets.images.get("selectedPopUpButton")}],L.selectedImages.rewardedVideo=[{key:"selectedRewardedVideo",data:m.assets.images.get("selectedRewardedVideo")}],L.selectedImages.soundIconActive=[{key:"selectedSoundIconActive",data:m.assets.images.get("selectedSoundIconActive")}],L.selectedImages.soundIconPassive=[{key:"selectedSoundIconPassive",data:m.assets.images.get("selectedSoundIconPassive")}]),L.selectedAtlases={laserImageHit:[{key:"selectedLaserImageHit_PNG",variant:"image",data:m.assets.atlases.get("selectedLaserImageHit_PNG")},{JSON:m.assets.atlases.get("selectedLaserImageHit_JSON"),variant:"JSON"}],planeFx:[{key:"selectedPlaneFx_PNG",variant:"image",data:m.assets.atlases.get("selectedPlaneFx_PNG")},{JSON:m.assets.atlases.get("selectedPlaneFx_JSON"),variant:"JSON"}]},L.selectedBitmapFonts={font:[{key:"selectedFont_PNG",data:m.assets.bitmapFonts.get("selectedFont_PNG"),variant:"image"},{XML:m.assets.bitmapFonts.get("selectedFont_XML"),variant:"XML"}]},L.selectedImages.super_wing=[{key:"selectedSuperWing",data:m.assets.images.get("selectedSuperWing")}],L.selectedImages.super_wing_highlight=[{key:"selectedSuperWingHighlight",data:m.assets.images.get("selectedSuperWingHighlight")}],L.selectedImages.circle_effect=[{key:"selectedCircleEffect",data:m.assets.images.get("selectedCircleEffect")}],L.selectedSounds={bullet:[{key:"selectedBulletSound",data:C.name==="google"?"":m.assets.sounds.get("selectedBulletSound")}],laserBullet:[{key:"selectedLaserBulletSound",data:C.name==="google"?"":m.assets.sounds.get("selectedLaserBulletSound")}],shotgunBullet:[{key:"selectedShotgunBulletSound",data:C.name==="google"?"":m.assets.sounds.get("selectedShotgunBulletSound")}]});const N=I({componentId:"alienShooterEnemy1",componentClass:g,componentConfig:W.components.alienShooterEnemy1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});N.onHeroExitScreenCallBack=()=>L.heroExitTheScreen,N.onEnemyBackgroundCallBack=()=>{const q=this.components.get("background1");let le=q.gameObjectsMap.get("tileSprite");le.texture.key!==q.selectedImages.background1[0].key&&le.setTexture(q.selectedImages.background1[0].key)},N.onBossBackgroundsCallBack=()=>{const q=this.components.get("background1");let le=q.gameObjectsMap.get("tileSprite"),ne=N.waveInfos[0].type;ce++;const ge=q.getBackgroundImagesTypeAndColors();let he;ce===ge.length?he=ce:he=ce%ge.length;const we=n().get(q,`selectedImages.background${ge[he-1].type}`)[0].key;le.texture.key!==we&&le.setTexture(we),le.tintTopLeft!==ge[he-1].color&&(le.clearTint(),le.setTint(ge[he-1].color))},N.getHeroCurrentPositionCallback=()=>L.getAlienShooterPlaneCurrentPosition(),N.getHeroFirstPositionCallback=()=>({x:L.CenterAbsoluteX,y:L.CenterAbsoluteY}),N.getBossBulletTextureKeyCallback=()=>B.selectedImages.bullet3[0].key,N.isHeroDeadCallback=()=>L.isPlaneDead,N.onAliveEnemiesCallBack=q=>{L.aliveEnemies=q,L.closestEnemyToPlane="",L.canSelectTheClosestEnemy=!0},N.onDiverEnemyTweensCallback=()=>{const q=N.getAliveEnemies(),le=L.gameObjectsMap.get("alienShooterPlane"),J=1400,ne=1e3;let ge=N.enemyDiveSeconds*1e3;ge<=J+ne&&(ge=J+ne+500),N.diverEnemyTimerEvent=N.scene.time.addEvent({delay:ge,loop:!0,callback:()=>{q.forEach(he=>{if(!N.loopTweenEnemies.includes(he)&&he.getData("isEnemyDiver1TweenCompleted")&&N.isEnemyEntranceTweenCompleted){const we=N.getEnemySpritePosition(he);he.getData("diver")==="d1"&&(he.setData("isEnemyDiver1TweenCompleted",!1),N.scene.tweens.add({targets:he,duration:J,ease:"Sine.easeInOut",props:{x:le.x,y:le.y},onUpdate:()=>{N.setEnemyHealthBarPosition(he)},onComplete:()=>{N.scene.tweens.add({targets:he,duration:ne,ease:"Sine.easeInOut",props:{x:we.x,y:we.y},onUpdate:()=>{N.setEnemyHealthBarPosition(he)},onComplete:()=>{he.setData("isEnemyDiver1TweenCompleted",!0);const Be=N.getEnemySpritePosition(he);(he.x!==Be.x||he.y!==Be.y)&&he.setPosition(Be.x,Be.y)}})}}))}})},callbackScope:N})},G?(N.selectedAtlases={enemy1:[{key:"selectedEnemy1Atlas_PNG",variant:"image",fileTiktok:"atlases/enemyAnimations/enemy1.png"},{variant:"JSON",fileTiktok:"atlases/enemyAnimations/enemy1.json"}],enemy2:[{key:"selectedEnemy2Atlas_PNG",variant:"image",fileTiktok:"atlases/enemyAnimations/enemy2.png"},{variant:"JSON",fileTiktok:"atlases/enemyAnimations/enemy2.json"}],enemy3:[{key:"selectedEnemy3Atlas_PNG",variant:"image",fileTiktok:"atlases/enemyAnimations/enemy3.png"},{variant:"JSON",fileTiktok:"atlases/enemyAnimations/enemy3.json"}],enemy4:[{key:"selectedEnemy4Atlas_PNG",variant:"image",fileTiktok:"atlases/enemyAnimations/enemy4.png"},{variant:"JSON",fileTiktok:"atlases/enemyAnimations/enemy4.json"}],enemy5:[{key:"selectedEnemy5Atlas_PNG",variant:"image",fileTiktok:"atlases/enemyAnimations/enemy5.png"},{variant:"JSON",fileTiktok:"atlases/enemyAnimations/enemy5.json"}],bullet:[{key:"selectedDropBomb_PNG",variant:"image",fileTiktok:"atlases/dropBombAnimation/dropBomb.png"},{variant:"JSON",fileTiktok:"atlases/dropBombAnimation/dropBomb.json"}],bullet_small:[{key:"selectedDropBombSmall_PNG",variant:"image",fileTiktok:"atlases/dropBombAnimation/dropBombSmall.png"},{variant:"JSON",fileTiktok:"atlases/dropBombAnimation/dropBombSmall.json"}],bullet_level_powerUp:[{key:"selectedBulletLevelPowerUp_PNG",variant:"image",fileTiktok:"atlases/powerUpAnimations/bullet_level_powerUp.png"},{variant:"JSON",fileTiktok:"atlases/powerUpAnimations/bullet_level_powerUp.json"}],powerUps:[{key:"selectedPowerUps_PNG",variant:"image",fileTiktok:"atlases/powerUpAnimations/powerups.png"},{variant:"JSON",fileTiktok:"atlases/powerUpAnimations/powerups_atlas.json"}]},N.selectedImages={hit:[{key:"selectedEnemyHit",fileTiktok:"enemy_hit.png"}],bossShootLight:[{key:"selectedBossShootLight",fileTiktok:"bossShootLight.png"}],healthBar:[{key:"selectedHealthBar",fileTiktok:"healthBar.png"}]},N.selectedBitmapFonts={font:[{key:"selectedFont_PNG",fileTiktok:"bitmapFont/alien-jura/alien-jura.png",variant:"image"},{fileTiktok:"bitmapFont/alien-jura/alien-jura.xml",variant:"XML"}]},N.selectedSounds={powerUp:[{key:"selectedPowerUpSound",fileTiktok:"sound/alienShooter_powerUp.mp3"}],bossBullet:[{key:"selectedBossBulletSound",fileTiktok:"sound/bossBullet.mp3"}]}):(N.selectedAtlases={enemy1:[{key:"selectedEnemy1Atlas_PNG",variant:"image",data:m.assets.atlases.get("selectedEnemy1Atlas_PNG")},{JSON:m.assets.atlases.get("selectedEnemy1Atlas_JSON"),variant:"JSON"}],enemy2:[{key:"selectedEnemy2Atlas_PNG",variant:"image",data:m.assets.atlases.get("selectedEnemy2Atlas_PNG")},{JSON:m.assets.atlases.get("selectedEnemy2Atlas_JSON"),variant:"JSON"}],enemy3:[{key:"selectedEnemy3Atlas_PNG",variant:"image",data:m.assets.atlases.get("selectedEnemy3Atlas_PNG")},{JSON:m.assets.atlases.get("selectedEnemy3Atlas_JSON"),variant:"JSON"}],enemy4:[{key:"selectedEnemy4Atlas_PNG",variant:"image",data:m.assets.atlases.get("selectedEnemy4Atlas_PNG")},{JSON:m.assets.atlases.get("selectedEnemy4Atlas_JSON"),variant:"JSON"}],enemy5:[{key:"selectedEnemy5Atlas_PNG",variant:"image",data:m.assets.atlases.get("selectedEnemy5Atlas_PNG")},{JSON:m.assets.atlases.get("selectedEnemy5Atlas_JSON"),variant:"JSON"}],bullet:[{key:"selectedDropBomb_PNG",variant:"image",data:m.assets.atlases.get("selectedDropBomb_PNG")},{JSON:m.assets.atlases.get("selectedDropBomb_JSON"),variant:"JSON"}],bullet_small:[{key:"selectedDropBombSmall_PNG",variant:"image",data:m.assets.atlases.get("selectedDropBombSmall_PNG")},{JSON:m.assets.atlases.get("selectedDropBombSmall_JSON"),variant:"JSON"}],bullet_level_powerUp:[{key:"selectedBulletLevelPowerUp_PNG",variant:"image",data:m.assets.atlases.get("selectedBulletLevelPowerUp_PNG")},{JSON:m.assets.atlases.get("selectedBulletLevelPowerUp_JSON"),variant:"JSON"}],powerUps:[{key:"selectedPowerUps_PNG",variant:"image",data:m.assets.atlases.get("selectedPowerUps_PNG")},{JSON:m.assets.atlases.get("selectedPowerUps_JSON"),variant:"JSON"}]},N.selectedImages={hit:[{key:"selectedEnemyHit",data:m.assets.images.get("selectedEnemyHit")}],bossShootLight:[{key:"selectedBossShootLight",data:m.assets.images.get("selectedBossShootLight")}],healthBar:[{key:"selectedHealthBar",data:m.assets.images.get("selectedHealthBar")}]},N.selectedBitmapFonts={font:[{key:"selectedFont_PNG",data:m.assets.bitmapFonts.get("selectedFont_PNG"),variant:"image"},{XML:m.assets.bitmapFonts.get("selectedFont_XML"),variant:"XML"}]},N.selectedSounds={powerUp:[{key:"selectedPowerUpSound",data:C.name==="google"?"":m.assets.sounds.get("selectedPowerUpSound")}],bossBullet:[{key:"selectedBossBulletSound",data:C.name==="google"?"":m.assets.sounds.get("selectedBossBulletSound")}]}),I({componentId:"dimmer1",componentClass:l,componentConfig:W.components.dimmer1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}}),I({componentId:"dimmerForPopUp1",componentClass:l,componentConfig:W.components.dimmerForPopUp1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});const X=I({componentId:"gameScore1",componentClass:v,componentConfig:W.components.gameScore1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});X.getHeroHeartHeightCallback=()=>L.shortEdge*.053,X.getCurrentHitCountCallback=()=>Ae,G?X.selectedBitmapFonts={font:[{key:"selectedFont_PNG",fileTiktok:"bitmapFont/alien-jura/alien-jura.png",variant:"image"},{fileTiktok:"bitmapFont/alien-jura/alien-jura.xml",variant:"XML"}]}:X.selectedBitmapFonts={font:[{key:"selectedFont_PNG",data:m.assets.bitmapFonts.get("selectedFont_PNG"),variant:"image"},{XML:m.assets.bitmapFonts.get("selectedFont_XML"),variant:"XML"}]};const V=I({componentId:"roundedTextBox1",componentClass:c,componentConfig:W.components.roundedTextBox1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});G?(V.selectedImages={roundedBox:[{key:"selectedRoundedBox",fileTiktok:"roundedBox.png"}]},V.selectedBitmapFonts={font:[{key:"selectedFont_PNG",fileTiktok:"bitmapFont/alien-jura/alien-jura.png",variant:"image"},{fileTiktok:"bitmapFont/alien-jura/alien-jura.xml",variant:"XML"}]}):(V.selectedImages={roundedBox:[{key:"selectedRoundedBox",data:m.assets.images.get("selectedRoundedBox")}]},V.selectedBitmapFonts={font:[{key:"selectedFont_PNG",data:m.assets.bitmapFonts.get("selectedFont_PNG"),variant:"image"},{XML:m.assets.bitmapFonts.get("selectedFont_XML"),variant:"XML"}]});const $=I({componentId:"famobiCredit1",componentClass:E,componentConfig:W.components.famobiCredit1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});G?$.selectedImages={famobiCredit:[{key:"selectedFamobiCredit",fileTiktok:"CreditsFamobiWhite.png"}]}:$.selectedImages={famobiCredit:[{key:"selectedFamobiCredit",data:m.assets.images.get("selectedFamobiCredit")}]};const Q=I({componentId:"resultScreen1",componentClass:T,componentConfig:W.components.resultScreen1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});Q.restartGameCallBack=()=>{Q.isVisible=!1,Q.isLevelFailEventSent=!1,Q.render(),stopGameForAll()},G?(Q.selectedImages={resultScreen:[{key:"selectedResultScreen",fileTiktok:"resultScreen.png"}],restartButton:[{key:"selectedRestartButton",fileTiktok:"restartButton.png"}],award:[{key:"selectedScoreAward",fileTiktok:"scoreAward.png"}],background:[{key:"selectedTitleScreenBackground",fileTiktok:"titleScreenBackground.jpg"}]},Q.selectedBitmapFonts={font:[{key:"selectedFont_PNG",fileTiktok:"bitmapFont/alien-jura/alien-jura.png",variant:"image"},{fileTiktok:"bitmapFont/alien-jura/alien-jura.xml",variant:"XML"}]}):(Q.selectedImages={resultScreen:[{key:"selectedResultScreen",data:m.assets.images.get("selectedResultScreen")}],restartButton:[{key:"selectedRestartButton",data:m.assets.images.get("selectedRestartButton")}],award:[{key:"selectedScoreAward",data:m.assets.images.get("selectedScoreAward")}],background:[{key:"selectedTitleScreenBackground",data:m.assets.images.get("selectedTitleScreenBackground")}]},Q.selectedBitmapFonts={font:[{key:"selectedFont_PNG",data:m.assets.bitmapFonts.get("selectedFont_PNG"),variant:"image"},{XML:m.assets.bitmapFonts.get("selectedFont_XML"),variant:"XML"}]});const me=I({componentId:"soundFxVolumeManager1",componentClass:u,componentConfig:W.components.soundFxVolumeManager1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,onComponentsReady:()=>{this.onComponentsReady()}});this.onComponentsReady=()=>{if(this.areComponentsReady)return;this.areComponentsReady=!0,F||(F=!0,C.name!=="h5games"&&(document.getElementById("loading").style.display="none"),L.scene.input.once("pointerdown",le=>{L.scene.sound.unlock()}),C.name==="famobi"&&window.famobi.onOffsetChange(()=>{this.playable.onResizeHandler()})),B.volume!==me.volume&&(B.volume=me.volume),N.volume!==me.volume&&(N.volume=me.volume),N.baseBulletDamage=L.baseBulletDamage;const q=this.components.get("dimmerForPopUp1");if(q.isVisible=!1,window.addEventListener(Phaser.Core.Events.BLUR,()=>{It&&pauseGameForH5Games()}),window.addEventListener(Phaser.Core.Events.FOCUS,()=>{It&&resumeGameForH5Games()}),C.name==="h5games")te?(this.playable.renderComponents(this.components,!0),L.onBackgroundChangeCallBack()):(te=!0,L.isLevelEnd=!1,window.h5games.startGame().then(()=>{document.getElementById("loading").style.display="none",startGameForAll()}));else{C.name==="famobi"&&(window.famobi.gameReady(),X.ish5Games=!1,X.renderHitCount(),window.famobi.localStorage.getItem("muted")?(L.famobiGameMuted=!0,muteVolumeForAllGames(),this.setGameMuteStateToLocalStorage()):L.famobiGameMuted=!1),this.setNewLevel();const le=L.planeType;if((K===""||K===void 0)&&(K=B.getImageKey("bullet"+le)),this.playable.renderComponents(this.components,!0),L.bulletType==="6"){const J=L.selectedSounds.laserBullet[0].key;L.isTaped?L.playSound(J):L.scene.input.once("pointerdown",()=>{L.playSound(J)})}this.addTutorialHandActions(),this.playable.renderComponent(O),this.addColliders()}},this.playable=new r({adNetworkSetting:C,components:this.components,options:W.options,currentGameConfig:W,onComponentsLoaded:()=>{}}),this.playable.onGameSceneStarted=()=>{this.playable.consumePanelConfigs()},"true"==="true"&&(this.playable.startPlayable(),ee=!0)}removeColliders(){const m=pe.components.get("alienShooterHero1");m.scene.physics.world.removeCollider(Oe),m.scene.physics.world.removeCollider(Fe),m.scene.physics.world.removeCollider(Ve),m.scene.physics.world.removeCollider(ze)}addColliders(){if(!U){U=!0;const m=pe.components.get("alienShooterHero1"),S=pe.components.get("alienShooterEnemy1"),b=m.gameObjectsMap.get("alienShooterPlane");Oe=m.scene.physics.add.collider(b,S.enemyGroup,this.planeCollideWithEnemyCallback.bind(this)),Fe=m.scene.physics.add.collider(b,S.enemyBulletGroup,this.planeCollideWithEnemyBulletCallback.bind(this)),Ve=m.scene.physics.add.collider(m.heroBulletGroup,S.enemyGroup,this.playerFireExpoCallback.bind(this)),ze=m.scene.physics.add.collider(b,S.powerUpGroup,this.heroCollideWithPowerup.bind(this))}}renderEndOfLevelScreen(){ae++,this.setNewLevel(),this.renderStartOfLevelScreen()}renderStartOfLevelScreen(){const m=this.components.get("alienShooterHero1"),S=this.components.get("alienShooterEnemy1");S.isCurrentlyBossWave()?S.renderEnemyBoss(!0,!1):S.renderEnemySprites(!0,!1),S.isWaveTextTweenAdded=!1,S.isWaveEntranceTweenAdded=!1,S.playWaveTextTween(),m.deleteTimerEvent(),m.render(),m.isLevelEnd=!1}getEndLessLevel(){const m=this.components.get("alienShooterEnemy1"),S=this.components.get("alienShooterHero1");if(!Ge){Ge=!0;let L=[];levels.forEach(V=>{V.waves.forEach($=>{if($.hasOwnProperty("id"))lt.push($);else{const Q=$.wave.split(",");L.push({type:parseInt(Q[1]),variant:parseInt(Q[2]),wave:$})}})});const N=Math.max(...L.map(V=>V.type)),X=Math.max(...L.map(V=>V.variant));for(let V=0;V<X;V++)for(let $=0;$<N;$++){const Q=L.find(me=>me.type===$+1&&me.variant===V+1);n().isNil(Q)||pt.push(Q.wave)}lt.sort(()=>Math.random()-.5)}Se=!1;const b=m.bossWaveNumber;Xe++,Xe%b===1&&(S.bulletCountPerShoot=S.defaultBulletCountPerShoot);let O;if(Xe%b===0){let L=pt.shift();m.level=[L.wave],O="",pt.push(L)}else{let L=lt.shift();m.level=[L.wave],O=L.id,lt.push(L)}(n().isNil("production")?"development":"production")==="development"&&(O!==""?document.getElementById("id").innerHTML="Wave id: "+O:document.getElementById("id").innerHTML="")}getLevelBasedLevel(){const m=this.components.get("alienShooterEnemy1"),S=this.components.get("alienShooterHero1"),b=this.components.get("alienShooterWrapper1"),O=levels;gt||(S.planeType=O[it].plane_type,K=b.getImageKey("bullet"+S.planeType),S.bulletType=K.slice(-1),gt=!0,C.name==="famobi"&&window.famobi_analytics.trackEvent("EVENT_LEVELSTART",{levelName:""})),O[it].waves.length===Xe&&(C.name!=="h5games"&&(O.length-1===it?it=0:it++),dt++,Xe=0,S.planeType=O[it].plane_type,S.planeType==="6"?this.checkPlaneType6(b,S):this.checkPlaneTypeChange(S,b,S.planeType),S.bulletType=K.slice(-1),this.setPlaneTypeChange(S),m.currentWaveIndex=1,m.levelNumber=dt,m.levelTextTweenAdded=!1,m.playLevelTextTween(),mt=0),m.level=[O[it].waves[Xe].wave],m.levelNumber=dt,m.levelLength=O[it].waves.length,Xe++}setNewLevel(){const m=this.components.get("alienShooterEnemy1"),S=this.components.get("alienShooterHero1");this.components.get("alienShooterWrapper1").isLevelBased?this.getLevelBasedLevel():this.getEndLessLevel(),m.checkLevelChange(),m.isWaveTextTweenAdded=!1,m.isWaveEntranceTweenAdded=!1,S.isLevelEnd=!1,S.aliveEnemies=m.getAliveEnemies()}checkPlaneType6(m,S){K=m.getImageKey("bullet6"),S.bulletImageKey=K;const b=S.gameObjectsMap.get("bulletLaser");b.setVelocityY(0),b.disableBody(!0,!0),S.bulletType6Call(),S.setLaserImageWidth(),S.addTweenForLaserColor(),S.pauseSound();const O=S.selectedSounds.laserBullet[0].key;S.playSound(O)}checkPlaneTypeChange(m,S,b){this.laserBulletReset(),m.isBulletSoundStarted=!1,K=S.getImageKey("bullet"+b),m.bulletImageKey=K,m.bulletArray.forEach(O=>{O.texture.key!==K&&(O.setTexture(K),O.setSize(O.width*.5,O.height*.5))})}setPlaneTypeChange(m){const S=m.gameObjectsMap.get("alienShooterPlane");S.frame.name!=="plane"+m.bulletType&&S.setFrame("plane"+m.bulletType,!0,!1),m.deleteTimerEvent(),m.renderTimerEvent()}heroCollideWithPowerup(m,S){S.disableBody(!1,!0);const b=this.components.get("alienShooterHero1"),O=this.components.get("alienShooterEnemy1"),B=this.components.get("alienShooterWrapper1");O.editEnablePowerUps(S),O.removePowerUpAssets(S),C.name==="h5games"?b.isLevelEnd||window.h5games.track("powerup_collected"):C.name==="famobi"&&(b.isLevelEnd||window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"powerUp:Collected"})),O.playPowerupSound(),O.isCurrentlyBossWave()&&S.getData("dropIsBoss")&&(b.bulletCountPerShoot=b.defaultBulletCountPerShoot,b.bulletLevel=1,b.bulletType==="6"&&b.setLaserImageWidth(),n().isNil(b.timerEvent)||(b.deleteTimerEvent(),b.renderTimerEvent()),Se&&(b.renderHeroExitTheScreenTween(m),S.setData("dropIsBoss",!1))),S.body.name==="wing"?b.isWingTweenCompleted&&(b.bulletLevel=10,b.isHeroTakesSuper=!0,b.bulletType==="6"&&b.setLaserImageWidth(),b.isPlaneDead||b.addTweensForSuperWings()):S.body.name==="plane1"?this.checkPlaneTypeChange(b,B,"1"):S.body.name==="plane2"?this.checkPlaneTypeChange(b,B,"2"):S.body.name==="plane3"?this.checkPlaneTypeChange(b,B,"3"):S.body.name==="plane4"?this.checkPlaneTypeChange(b,B,"4"):S.body.name==="plane5"?(b.isFirstShootForBullet5=!0,b.pauseSound(),this.checkPlaneTypeChange(b,B,"5")):S.body.name==="plane6"?this.checkPlaneType6(B,b):S.body.name==="gunlevelup"&&(O.gameObjectsMap.get(S.body.id+"_levelUp").setVisible(!1),b.isHeroTakesSuper&&b.previousBulletLevel<10&&(b.previousBulletLevel+=1),b.bulletCountPerShoot<b.maxBulletCountPerShoot&&b.bulletLevel<10&&(b.bulletType==="6"?b.setLaserImageWidth():b.bulletType==="5"&&(b.isFirstShootForBullet5=!0),b.bulletCountPerShoot+=1,b.bulletLevel+=1,b.previousBulletLevel=b.bulletLevel)),b.bulletType=K.slice(-1),b.isPlaneDead||(this.setPlaneTypeChange(b),b.renderHeroTakesPowerUpAnimation())}laserBulletReset(){const m=this.components.get("alienShooterHero1"),S=m.gameObjectsMap.get("bulletLaser"),b=m.gameObjectsMap.get("laserImageHit");n().isNil(S)||(S.disableBody(!0,!0),m.laserImage.setVisible(!1)),n().isNil(b)||b.setVisible(!1)}playerFireExpoCallback(m,S){const b=this.components.get("alienShooterEnemy1"),O=this.components.get("alienShooterHero1"),B=this.components.get("gameScore1"),L=this.components.get("alienShooterWrapper1"),N=O.gameObjectsMap.get("alienShooterPlane");O.scene.tweens.killTweensOf(m);let X,V=b.enemyHealthBarsMap.get("healthBarBg"+S.name),$=b.enemyHealthBarsMap.get("healthBar"+S.name);if(O.bulletType==="6"&&m.body.id==="heroBullet_laser"){const le=O.gameObjectsMap.get("bulletLaser");if(le.setVelocityY(0),le.disableBody(!0,!0),O.bulletType6Call(),X=1,b.getAliveEnemies().forEach(he=>{if(S!==he){const we=he.getData("enemyTakeHit")+1;if(he.setData("enemyTakeHit",we),O.bulletType==="6"&&we%12===0){let Be=b.enemyHealthBarsMap.get("healthBarBg"+he.name),xe=b.enemyHealthBarsMap.get("healthBar"+he.name);Be.setVisible(!1),xe.setVisible(!1),b.setEnemyHealthBarPosition(he)}}}),S.setData("enemyTakeHit",0),S.getData("isBelongToBoss")){let he;b.waveInfos[0].type==="1"?S.getData("partName")==="body"?he=S.parentContainer.y+S.displayHeight*.5:he=S.parentContainer.y:b.waveInfos[0].type==="4"?S.getData("partName")==="body"?he=S.parentContainer.y+S.displayHeight*.4:he=S.parentContainer.y:b.waveInfos[0].type==="5"?S.getData("partName")==="body"?he=S.parentContainer.y+S.displayHeight*.4:he=S.parentContainer.y-S.displayHeight*.5:he=S.parentContainer.y+S.displayHeight*.5,de=Math.abs(N.y-N.displayHeight*.5-he)}else de=Math.abs(S.y-(N.y-N.displayHeight*.5));O.renderLaserImageHit(),O.laserImage.displayHeight!==de&&(O.laserImage.displayHeight=de);const ne=O.gameObjectsMap.get("laserImageHit"),ge=O.laserImage.y-O.laserImage.displayHeight*.97;(ne.x!==O.laserImage.x-ne.displayWidth*.085||ne.y!==ge)&&ne.setPosition(O.laserImage.x-ne.displayWidth*.085,ge),ne.setVisible(!0)}m.body.id!=="heroBullet_laser"&&(O.onBulletCollideWithSomething(m),O.editEnableBullets(m),X=O.bulletCountForEachShoot()),(X===void 0||X==="")&&(X=1);let Q=Math.floor(O.baseBulletDamage/X*(1+.2*(X-1)));O.bulletType==="5"&&(Q*=5),O.bulletLevel>1?(Ae+=5*O.bulletLevel,mt+=5*O.bulletLevel):(Ae+=1,mt+=1),C.name==="h5games"?B.ish5Games=!0:(B.ish5Games=!1,B.renderHitCount());let me,se;const q=O.gameObjectsMap.get("laserImageHit");if(q.once("animationcomplete",()=>{q.setVisible(!1)}),S.getData("isBelongToBoss")){if(me=S.parentContainer.getData("totalHitCount"),se=S.parentContainer.getData("currentHitCount"),O.bulletType==="4"?se<=me-Q*1.5?se+=Q*1.5:se+=me-se:se<=me-Q?se+=Q:se=me,Et=se,se%(40*X)===0&&(C.name==="h5games"?!S.parentContainer.getData("isDead")&&!O.isPlaneDead&&window.h5games.sendScore(mt):C.name==="famobi"&&window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:Ae})),S.parentContainer.setData("currentHitCount",se),b.renderBossHealthBar(),se>=me){if(O.isPlaneDead||S.parentContainer.getData("isDead"))return;if(n().isNil(xt)||xt.remove(!1),S.parentContainer.setData("isDead",!0),Se=!0,O.aliveEnemies=b.getAliveEnemies(),S.parentContainer.setVisible(!1),!(C.name=="h5games"?b.h5MuteSounds:b.fullGameMuteSounds)&&b.options.isSoundEnabled&&b.scene.adNetworkSetting.isSoundSupported){let J;n().has(O.parent,"volume")?J=O.parent.volume:J=1,b.scene.sound.play(b.parent.selectedSounds.boom[0].key,{volume:J})}if(S.parentContainer.list.forEach(J=>{J.getData("isPhysicsObject")&&J.disableBody()}),L.isLevelBased)if(b.isWeaponDrop){let J=b.weapons.shift();J.type===O.bulletType&&(b.weapons.push(J),J=b.weapons.shift()),b.dropPowerUp(S.parentContainer.x,S.parentContainer.y,J.name,!0),b.weapons.push(J)}else O.renderHeroExitTheScreenTween(N);else{let J=b.weapons.shift();J.type===O.bulletType&&(b.weapons.push(J),J=b.weapons.shift()),b.dropPowerUp(S.parentContainer.x,S.parentContainer.y,J.name,!0),b.weapons.push(J)}b.playExplosionSprite(S.parentContainer,()=>{O.isPlaneDead&&!O.isRevive||(C.name==="famobi"?(L.isLevelBased&&window.famobi_analytics.trackEvent("EVENT_LEVELSUCCESS",{levelName:"",reason:"all enemies destroyed"}).then(function(){window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:Ae}),Mt.push(Ae),window.famobi.localStorage.setItem("scores",JSON.stringify(Mt));const J=JSON.parse(window.famobi.localStorage.getItem("scores"));window.famobi.localStorage.setItem("highScore",JSON.stringify(Math.max(...J)));const ne=pe.components.get("resultScreen1");ne.currentScoreValue=Ae,ne.highScoreValue=window.famobi.localStorage.getItem("highScore"),ne.isVisible=!0,ne.render()}),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Progression",progressionStatus:"Complete",progression01:"Level",value:1}),window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:Ae})):C.name==="h5games"&&window.h5games.levelEnd(),Et=0)})}else if(b.playBossPartHitTween(S),b.isEnemyEntranceTweenCompleted){const le=b.getRandomPositionOnBossPart(S);b.renderEnemyHitImageTween(le)}}else{if(me=S.getData("totalHitCount"),se=S.getData("currentHitCount"),O.bulletType==="4"?se<=me-Q*1.5?se+=Q*1.5:se+=me-se:se<=me-Q?se+=Q:se=me,S.setData("currentHitCount",se),Et=se,b.renderEnemyHealthBars(),V.visible||V.setVisible(!0),$.visible||$.setVisible(!0),S.setData("enemyTakeHit",0),!b.loopTweenEnemies.includes(S)&&(b.isEnemyEntranceTweenCompleted&&S.getData("isEnemyHitTweenCompleted")&&(S.getData("diver")==="d2"?S.getData("isEnemyDiver2TweenCompleted")&&b.addEnemyPushBackTween(S):S.getData("diver")==="d1"?S.getData("isEnemyDiver1TweenCompleted")&&b.addEnemyPushBackTween(S):b.addEnemyPushBackTween(S)),b.isTapped&&S.getData("isEnemyDiver2TweenCompleted")&&b.isEnemyEntranceTweenCompleted)){const ne=b.getEnemySpritePosition(S);S.getData("diver")==="d2"&&(S.setData("isEnemyDiver2TweenCompleted",!1),se>0&&b.scene.tweens.add({targets:S,duration:1400,ease:"Sine.easeInOut",props:{x:N.x,y:N.y},onUpdate:()=>{b.setEnemyHealthBarPosition(S)},onComplete:()=>{b.scene.tweens.add({targets:S,duration:1e3,ease:"Sine.easeInOut",props:{x:ne.x,y:ne.y},onUpdate:()=>{b.setEnemyHealthBarPosition(S)},onComplete:()=>{S.setData("isEnemyDiver2TweenCompleted",!0);const ge=b.getEnemySpritePosition(S);(S.x!==ge.x||S.y!==ge.y)&&S.setPosition(ge.x,ge.y)}})}}))}let le=[S.x-S.displayWidth*.3,S.x+S.displayWidth*.3];const J=Math.floor(Math.random()*2);if(b.renderEnemyHitImageTween({x:le[J],y:S.y+S.displayHeight*.3}),me===se){if(O.isPlaneDead)return;if(S.disableBody(!1,!1),S.clearTint(),C.name==="h5games"?(window.h5games.track("enemy_destroyed",{id:parseInt(S.getData("enemyType"))}),window.h5games.sendScore(mt)):C.name==="famobi"&&(window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:Ae}),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"enemy:Destroyed"})),S.play(b.parent.getAtlasPlayKeyByName("fireExpo"),!0),S.setScale(S.scale*2.5),S.setData("isDead",!0),S.setData("deadX",S.x),S.setData("deadY",S.y),V.setVisible(!1),$.setVisible(!1),O.aliveEnemies=b.getAliveEnemies(),!n().isNil(S)&&S.getData("powerUp")!==""){const ge=S.getData("powerUp");L.isLevelBased&&ge.includes("plane")?b.isWeaponDrop&&b.dropPowerUp(S.x,S.y,ge,!1):b.dropPowerUp(S.x,S.y,ge,!1),S.setData("powerUp","")}if(!(C.name==="h5games"?b.h5MuteSounds:b.fullGameMuteSounds)&&b.options.isSoundEnabled&&b.scene.adNetworkSetting.isSoundSupported){let ge;n().has(O.parent,"volume")?ge=O.parent.volume:ge=1,b.scene.sound.play(b.parent.selectedSounds.boom[0].key,{volume:ge})}S.once("animationcomplete",()=>{S.disableBody(!0,!0),O.isRevive&&(O.isPlaneDead=!1),!(O.isPlaneDead&&!O.isRevive)&&(ve||b.checkAllEnemiesExploded()&&(b.currentWaveIndex+=1,b.deleteDiverTimerEvent(),b.deleteTimerEvent(),ae++,this.setNewLevel(),b.playWaveTextTween()))})}}}planeCollideWithEnemyCallback(m){const S=this.components.get("alienShooterHero1");C.name==="h5games"&&(S.heroGotDamageEventSend||(window.h5games.track("hero_got_a_damage"),S.heroGotDamageEventSend=!0)),this.onPlaneDead(m)}planeCollideWithEnemyBulletCallback(m,S){const b=this.components.get("alienShooterEnemy1"),O=this.components.get("alienShooterHero1");b.enemyBulletCollideCallback(S),b.editEnableBullets(S),C.name==="h5games"&&(O.heroGotDamageEventSend||(window.h5games.track("hero_got_a_damage"),O.heroGotDamageEventSend=!0)),this.onPlaneDead(m)}removeHeroDamageColliders(){const m=this.components.get("alienShooterHero1");m.scene.physics.world.removeCollider(Oe),m.scene.physics.world.removeCollider(Fe)}onPlaneDead(m){const S=this.components.get("alienShooterHero1"),b=this.components.get("alienShooterEnemy1");if(S.isHeroTakesSuper){S.circleEffectCompleted&&(S.bulletLevel=S.previousBulletLevel,S.isHeroTakesSuper=!1,this.removeHeroDamageColliders());return}const O=S.getActivePlaneHearts();if(O.length>1){if(S.circleEffectCompleted){S.circleEffectCompleted=!1;const V=O[O.length-1],$=S.heroHeartMaps.get("heartFill"+(O.length-1)),Q=S.heroHeartMaps.get("heartStroke"+(O.length-1));$.setVisible(!1),Q.setVisible(!0);let me=S.gameObjectsMap.get("fireExpoAnimation");me.setPosition(m.x,m.y);const se=S.parent.getAtlasPlayKeyByName("fireExpo"),q=S.scene.anims.get(se);if(q.repeat=0,q.hideOnComplete=!0,me.play(se,!0),V.setData("isActive",!1),C.name==="famobi"&&(window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Hero:Getting:Damage"}),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Resource",flowType:"Source",itemType:"gameCurrency",amount:O.length-1,resourceCurrency:"heart",itemId:"HeroHeart"})),!(C.name==="h5games"?S.h5MuteSounds:S.fullGameMuteSounds)&&S.options.isSoundEnabled&&S.scene.adNetworkSetting.isSoundSupported){let J;n().has(S.parent,"volume")?J=S.parent.volume:J=1,S.scene.sound.play(S.parent.selectedSounds.boom[0].key,{volume:J})}S.renderCircleEffectTween()}else this.removeHeroDamageColliders();return}else if(S.circleEffectCompleted)m.setData("isDead",!0);else return;if(S.isRevive&&!S.reviveCompleted||S.isPlaneDead)return;S.isPlaneDead=!0,Array.from(b.enemyHealthBarsMap.values()).forEach(V=>{V.visible&&V.setVisible(!1)}),S.deleteTimerEvent(),S.isLevelEnd=!0,S.popUpVisible=!0,m.clearTint(),m.setScale(m.scale*5),m.play(S.parent.getAtlasPlayKeyByName("fireExpo"),!0);const B=S.heroHeartMaps.get("heartFill0"),L=S.heroHeartMaps.get("heartStroke0");B.setVisible(!1),L.setVisible(!0),S.bulletType==="6"&&this.laserBulletReset();const N=S.soundsMap.get("bullet");if(n().isNil(N)||N.stop(),!(C.name==="h5games"?S.h5MuteSounds:S.fullGameMuteSounds)&&S.options.isSoundEnabled&&S.scene.adNetworkSetting.isSoundSupported){let V;n().has(S.parent,"volume")?V=S.parent.volume:V=1,S.scene.sound.play(S.parent.selectedSounds.boom[0].key,{volume:V})}m.once("animationcomplete",()=>{m.disableBody(!0,!0),C.name==="h5games"?window.h5games.hasRewardedAd()?window.h5games.gameOver().then(()=>{S.revive()}):window.h5games.gameOver():C.name==="famobi"?this.showRevivePopUp():this.showRevivePopUp()})}showRevivePopUp(){const m=this.components.get("alienShooterHero1"),S=pe.playable.getScene("gameScene");S.scene.pause(),pe.playable.getScene("hudScene").scene.resume(),m.scene=S,this.components.get("dimmerForPopUp1").gameObjectsMap.get("dimmer").setVisible(!0),m.renderPopUp()}addTutorialHandActions(){const m=this.components.get("tutorialHand1"),S=this.components.get("alienShooterHero1"),b=S.gameObjectsMap.get("alienShooterPlane");let O=[],B=S.getAlienShooterPlanePosition();O.push({action:"fadeIn",duration:1e3}),O.push({action:"click"}),O.push({action:"idle",duration:500}),O.push({action:"moveTo",duration:1200,position:{x:b.x-b.displayWidth,y:b.y}}),O.push({action:"moveTo",duration:4e3,position:{x:b.x+b.displayWidth,y:b.y}}),O.push({action:"moveTo",duration:1200,position:{x:B.x,y:B.y}}),O.push({action:"unclick"}),O.push({action:"idle",duration:500}),O.push({action:"fadeOut",duration:1e3}),m.update({handPositionStart:B,movements:O})}resetHeroRequirements(){const m=pe.components.get("alienShooterHero1"),S=pe.components.get("alienShooterWrapper1");m.bulletCountPerShoot=m.defaultBulletCountPerShoot,m.isLevelEnd=!0,C.name==="h5games"?m.h5ReviveCircleAdd=!1:m.reviveCircleAdd=!1,m.isTaped=!1,m.pauseSound(),m.deleteTimerEvent(),m.scene.input.removeListener("pointerdown"),m.removeAllObjectBodies(),m.killAllTweens(),!n().isNil(m.laserImage)&&m.laserImage.visible&&m.laserImage.setVisible(!1),this.laserBulletReset();const b=m.planeType;K=S.getImageKey("bullet"+b)}resetEnemyRequirements(){const m=pe.components.get("alienShooterEnemy1");if(m.currentWaveIndex=1,m.levelTextTweenAdded=!1,Array.from(m.enemyHealthBarsMap.values()).forEach(S=>{S.visible&&S.setVisible(!1)}),m.renderEnemyAnimationStop(),m.isCurrentlyBossWave()){const S=m.getCurrentBoss();if(!n().isNil(S)&&!S.getData("isDead")){S.setVisible(!1),S.setData("isDead",!0),S.list.forEach(B=>{B.getData("isPhysicsObject")&&B.disableBody(!1,!1)});let b=m.gameObjectsMap.get("healthBarBg"),O=m.gameObjectsMap.get("healthBar");b.visible&&b.setVisible(!1),O.visible&&O.setVisible(!1)}}else Array.from(m.enemySpritesMap.values()).filter(S=>{S.getData("isDead")||S.setData("isDead",!0)});m.isTapped=!1,m.isEnemyEntranceTweenCompleted=!1,m.deleteTimerEvent(),m.deleteDiverTimerEvent(),m.removeAllObjectBodies(),m.clearTweensOfEnemies(),m.disableEnemies(),m.killAllTweens(),m.isCurrentlyBossWave()?(m.renderEnemyBoss(!1,!1),m.renderBossHealthBar()):(m.renderEnemySprites(!1,!1),m.renderEnemyHealthBars()),m.setEnemyShootInfo(),m.setCurrentWaveEnemyInfos(),Array.from(m.enemySpritesMap.values()).forEach(S=>{S.setData("enemyTakeHit",0)})}restartRequirements(){const m=pe.components.get("alienShooterHero1");m.isLevelEnd=!1,oe=!0,m.bulletType=m.planeType,m.bulletLevel=1,m.previousBulletLevel=1,m.isTaped=!1,m.isGameStarted=!1,U=!1,startGameForAll()}setGameMuteStateToLocalStorage(){const m=pe.components.get("alienShooterHero1");C.name==="famobi"&&(window.famobi.localStorage.setItem("muted",!0),m.famobiGameMuted=!0,m.renderSoundIcon())}setGameUnmuteStateToLocalStorage(){const m=pe.components.get("alienShooterHero1");C.name==="famobi"&&(window.famobi.localStorage.removeItem("muted"),m.famobiGameMuted=!1,m.renderSoundIcon())}}window.applyGameConfig=ke=>{if(pe.playable.configs.push(ke),ee||(pe.playable.startPlayable(),ee=!0),pe.playable.IsGameSceneStarted)for(;pe.playable.configs.length>0;){pe.areComponentsReady=!1;const m=pe.playable.configs.shift(),S=n().get(m,"options",[]);Object.entries(S).forEach(([B])=>{const L=n().get(m,`options.${B}`),N=n().get(W,`options.${B}`);n().isEqual(N,L)||n().set(W,`options.${B}`,L)}),pe.components.forEach(B=>{B.options=W.options});let b=[];const O=n().get(m,"components",[]);Object.entries(O).forEach(([B])=>{const L=n().get(m,`components.${B}`),N=n().get(W,`components.${B}`);if(!n().isEqual(L,N)){Object.entries(L).forEach(([V,$])=>{n().set(W,`components.${B}.${V}`,$)});const X=pe.components.get(B);b.push([X,L])}}),b.forEach(([B])=>{pe.componentsReadyStatusMap.set(B.componentId,!1),B.scene.componentIsTextureLoaded.set(B.componentId,!1)}),b.forEach(([B,L])=>{B.update(L),B.load()})}},window.getReadyStatus=()=>{console.log(pe.componentsReadyStatusMap)},window.testApplyConfig1=()=>{applyGameConfig(ct)},window.testApplyConfig2=()=>{applyGameConfig(rt)},window.startGameForAll=()=>{ae=1,Ae=0,Ge=!1,gt=!1,Xe=0,dt=1,C.name==="h5games"?(it=window.h5games.getPresets("level")-1,St&&resumeGameForH5Games()):it=0;const ke=pe.components.get("alienShooterEnemy1"),m=pe.components.get("alienShooterHero1"),S=pe.components.get("alienShooterWrapper1"),b=pe.components.get("gameScore1");if(ke.currentWaveIndex=1,ke.levelNumber=dt,oe=!0,C.name==="h5games"?(b.ish5Games=!0,m.pauseSound(),window.h5games.playerReady(),window.h5games.sendScore(mt),S.isLevelBased&&window.h5games.track("level_started",{current_level:window.h5games.getPresets("level")})):(b.ish5Games=!1,b.renderHitCount()),m.isLevelEnd=!1,C.name==="famobi"){const L=pe.components.get("background1");let N=L.gameObjectsMap.get("tileSprite");N.texture.key!==L.selectedImages.background1[0].key&&N.setTexture(L.selectedImages.background1[0].key),N.clearTint(),N.setTint("0x0EC9BA"),window.famobi.localStorage.getItem("muted")?(m.famobiGameMuted=!0,muteVolumeForAllGames(),pe.setGameMuteStateToLocalStorage()):(m.famobiGameMuted=!1,m.isDisableAudioRequestSent||unmuteVolumeForAllGames())}ke.levelTextTweenAdded=!1,ke.deleteDiverTimerEvent(),pe.setNewLevel();const O=m.planeType;(K===""||K===void 0)&&(K=S.getImageKey("bullet"+O)),m.heroExitTheScreen=!1,m.restart(),m.isPointerDownTriggered||m.scene.input.on("pointerdown",L=>{m.isPointerDownTriggered=!0,!m.isPlaneDead&&(m.initialPointerX=L.x,m.initialPointerY=L.y)});const B=pe.components.get("tutorialHand1");pe.addTutorialHandActions(),C.name==="h5games"?(m.h5ReviveCircleAdd=!0,applyGameConfig({components:{background1:{},tutorialHand1:{isVisible:!0}},options:{}}),B.isVisible=!0,B.render()):(S.isLevelBased&&ke.playLevelTextTween(),ke.playWaveTextTween(),m.reviveCircleAdd=!0,setTimeout(()=>{B.isVisible=!0,B.render()},1e3)),pe.addColliders(),ve=!1},window.stopGameForAll=()=>{console.log("stop game"),Ge=!1,C.name==="h5games"?it=window.h5games.getPresets("level")-1:it=0;const ke=pe.components.get("tutorialHand1");ke.isVisible=!1,ke.render(),Xe=0,oe=!1,ve=!0,pe.resetHeroRequirements(),pe.resetEnemyRequirements(),pe.removeColliders(),C.name==="h5games"?window.h5games.startGame().then(()=>{pe.restartRequirements()}):pe.restartRequirements()},window.muteVolumeForAllGames=()=>{console.log("mute game");const ke=pe.components.get("alienShooterHero1"),m=pe.components.get("alienShooterEnemy1");ke.pauseSound(),ke.h5MuteSounds=!0,m.h5MuteSounds=!0,ke.fullGameMuteSounds=!0,m.fullGameMuteSounds=!0;const S=pe.playable.getScene("gameScene");W.options.isSoundEnabled&&S.sound.stopAll()},window.unmuteVolumeForAllGames=()=>{console.log("unmute game");const ke=pe.components.get("alienShooterHero1"),m=pe.components.get("alienShooterEnemy1");if(ke.h5MuteSounds=!1,m.h5MuteSounds=!1,ke.isTaped&&!ke.isDisableAudioRequestSent){ke.fullGameMuteSounds=!1,m.fullGameMuteSounds=!1;let S;if(ke.bulletType==="5")return;ke.bulletType==="6"?S=ke.selectedSounds.laserBullet[0].key:S=ke.selectedSounds.bullet[0].key,ke.playSound(S)}else C.name!=="h5games"&&(ke.pointerDownCallBack=()=>{let S;ke.bulletType!=="5"&&(ke.bulletType==="6"?S=ke.selectedSounds.laserBullet[0].key:S=ke.selectedSounds.bullet[0].key,ke.playSound(S))})},window.pauseGameForH5Games=()=>{console.log("pause game");const ke=pe.components.get("alienShooterHero1");St=!0,oe=!1,ke.isLevelEnd=!1;const m=pe.playable.getScene("gameScene");m.scene.pause(),W.options.isSoundEnabled&&m.sound.stopAll()},window.resumeGameForH5Games=()=>{const ke=pe.components.get("alienShooterHero1");if(St=!1,oe=!0,pe.playable.getScene("gameScene").scene.resume(),!ke.isPlaneDead&&(!ke.h5MuteSounds||!ke.fullGameMuteSounds)&&ke.isTaped&&W.options.isSoundEnabled){let S;if(ke.bulletType==="6")S=ke.selectedSounds.laserBullet[0].key;else{if(ke.bulletType==="5")return;S=ke.selectedSounds.bullet[0].key}ke.playSound(S)}},window.setLevelForLevelBased=ke=>{window.h5games.startGame().then(()=>{window.h5games.playerReady();const m=pe.components.get("alienShooterEnemy1"),S=pe.components.get("alienShooterHero1"),b=S.gameObjectsMap.get("alienShooterPlane");typeof ke=="number"?it=ke-1:typeof ke=="string"&&ke.includes("level")?it=parseInt(ke.substring(5))-1:it=parseInt(ke)-1,m.deleteDiverTimerEvent(),S.renderTimerEvent(),m.currentWaveIndex=1,pe.setNewLevel(),m.playWaveTextTween(),resumeGameForH5Games(),S.renderHeroEnterTheScreenTween(b)})},window.famobi_onPauseRequested=function(){pauseGameForH5Games(),window.famobi.localStorage.getItem("muted")?re=!1:(re=!0,muteVolumeForAllGames(),this.setGameMuteStateToLocalStorage())},window.famobi_onResumeRequested=function(){resumeGameForH5Games(),re&&(unmuteVolumeForAllGames(),this.setGameUnmuteStateToLocalStorage())},C.name==="famobi"&&(window.famobi.onRequest("enableAudio",function(){const ke=pe.components.get("alienShooterHero1");ke.isDisableAudioRequestSent=!1,window.famobi.localStorage.getItem("muted")?(ke.gameObjectsMap.get("soundIconPassive").setVisible(!0),ke.gameObjectsMap.get("soundIconActive").setVisible(!1)):(ke.gameObjectsMap.get("soundIconPassive").setVisible(!1),ke.gameObjectsMap.get("soundIconActive").setVisible(!0),unmuteVolumeForAllGames())}),window.famobi.onRequest("disableAudio",function(){const ke=pe.components.get("alienShooterHero1");ke.isDisableAudioRequestSent=!0,window.famobi.localStorage.getItem("muted")?(ke.gameObjectsMap.get("soundIconPassive").setVisible(!0),ke.gameObjectsMap.get("soundIconActive").setVisible(!1)):(ke.gameObjectsMap.get("soundIconPassive").setVisible(!1),ke.gameObjectsMap.get("soundIconActive").setVisible(!0)),muteVolumeForAllGames()}),window.famobi.onRequest("pauseGameplay",function(){It=!1,pauseGameForH5Games()}),window.famobi.onRequest("resumeGameplay",function(){It=!0,resumeGameForH5Games()})),window.famobi_gameJS=[function(){document.getElementById("loading2").style.visibility="hidden",kt()}]})()})();
