var ObjectsSpawnSystem=pc.createScript("objectsSpawnSystem");ObjectsSpawnSystem.prototype.spawnObject=function(t,e,i){var o=t.resource.instantiate();return e.root.addChild(o),o.setPosition(i),o};var ChunkComponent=pc.createScript("chunkComponent");ChunkComponent.attributes.add("pointspawn",{type:"entity",title:"Point Spawn Next Chunk"}),ChunkComponent.attributes.add("reactionTrigger",{type:"boolean",default:!0}),ChunkComponent.prototype.initialize=function(){this.levelSystem=this.app.root.findByName("Level Generation").script.levelGenerationSystem,this.player=this.app.root.findByName("PLAYER"),this.goalTarget=!1},ChunkComponent.prototype.update=function(){if(0!=this.player.enabled&&this.reactionTrigger){var t=this.player.getPosition().sub(this.pointspawn.getPosition()).length();t<=1&&!this.goalTarget&&(this.goalTarget=!0),t>2&&this.goalTarget&&(this.levelSystem.passed_chunk(this.entity),this.goalTarget=!1)}};var LevelGenerationSystem=pc.createScript("levelGenerationSystem");LevelGenerationSystem.attributes.add("firstChunk",{type:"entity"}),LevelGenerationSystem.attributes.add("player",{type:"entity"}),LevelGenerationSystem.attributes.add("chunkList",{type:"entity",array:!0,title:"Chunk List"}),LevelGenerationSystem.attributes.add("chunksPermanent",{type:"entity",array:!0,title:"Chunks Permanent"}),LevelGenerationSystem.prototype.init=function(){this.firstChunk.enabled=!0,this.lastPosChunk=pc.Vec3.ZERO,this.chunks=[],this.count_target_transition_chunk=20,this.current_count_passed_chunks=0,this.objectSpawnSystem=this.app.root.findByName("Spawn").script.objectsSpawnSystem;for(var t=0;t<3;t++)this.passed_chunk()},LevelGenerationSystem.prototype.updatePosChunk=function(t){t.setPosition(this.lastPosChunk),this.lastPosChunk=t.script.chunkComponent.pointspawn.getPosition()},LevelGenerationSystem.prototype.get_free_chunk=function(){var t=this.chunkList[0];if(this.current_count_passed_chunks>0&&this.current_count_passed_chunks<this.count_target_transition_chunk){var e=Math.round(pc.math.random(0,this.chunkList.length-1));t=this.chunkList[e],this.remove_element_from_array(this.chunkList,t,1),this.chunks.push(t)}else 0==this.current_count_passed_chunks?t=this.chunksPermanent[0]:this.current_count_passed_chunks>=this.count_target_transition_chunk&&(t=this.chunksPermanent[1]);return t.enabled=!0,t},LevelGenerationSystem.prototype.passed_chunk=function(t=null){null!=t&&"Chunk_Free"!=t.name&&"Chunk_Transition_New_Level"!=t.name&&(this.chunkList.push(t),this.remove_element_from_array(this.chunks,t,1),t.enabled=!1,this.firstChunk.enabled=!1),t=this.get_free_chunk(),this.updatePosChunk(t),this.current_count_passed_chunks++,this.current_count_passed_chunks>=this.count_target_transition_chunk+1&&(this.current_count_passed_chunks=0)},LevelGenerationSystem.prototype.remove_element_from_array=function(t,e,i){var o=t.indexOf(e);t.splice(o,i)};var PlayerMovement=pc.createScript("playerMovement");PlayerMovement.attributes.add("speed",{type:"number",default:3,title:"Speed Movement"}),PlayerMovement.attributes.add("speedSidePC",{type:"number",default:1,title:"Speed Movement Side PC"}),PlayerMovement.attributes.add("speedSideMobile",{type:"number",default:.55,title:"Speed Movement Side Mobile"}),PlayerMovement.attributes.add("increaseSpeed",{type:"number",default:.005,title:"Increase Speed Movement New Level"}),PlayerMovement.attributes.add("ballPlayer",{type:"entity"}),PlayerMovement.attributes.add("ballModel",{type:"entity"}),PlayerMovement.attributes.add("triggerJump",{type:"entity"}),PlayerMovement.attributes.add("camera",{type:"entity"}),PlayerMovement.attributes.add("trail",{type:"entity",title:"Trail Player"}),PlayerMovement.attributes.add("isMove",{type:"boolean",default:!0}),PlayerMovement.attributes.add("sound",{type:"entity"}),PlayerMovement.attributes.add("tutorial",{type:"entity"}),PlayerMovement.attributes.add("fxWind",{type:"entity"}),PlayerMovement.attributes.add("startPointCamera",{type:"entity"}),PlayerMovement.prototype.init=function(){this.ballPlayer.setPosition(0,.1,-.579),this.startPointCamera.setPosition(0,.1,0),this.ballPlayer.enabled=!0,this.fxWind.enabled=!0,this.settings=this.app.root.findByName("Settings System").script.settingsSystem,this.chaseComponent=this.app.root.findByName("Camera Point").script.chase,this.isFail=!1,this.isClick=!1,this.isJump=!1,this.posJump=new pc.Vec3(0,.15,0),this.resultPos=new pc.Vec3(0,0,0),this.posY=.15,this.firstSpeedMovement=this.speed,this.movementX=0,this.offsetXKeyboard=0,this.lastOffsetJoystickX=0,this.speedSide=0,this.triggerJump.collision.on("triggerenter",this.onTriggerEnter,this)},PlayerMovement.prototype.update=function(t){try{if((this.app.keyboard.isPressed(pc.KEY_D)||this.app.keyboard.isPressed(pc.KEY_RIGHT))&&(this.onDownKeyboard(),this.offsetXKeyboard+=4*t),(this.app.keyboard.wasReleased(pc.KEY_D)||this.app.keyboard.wasReleased(pc.KEY_RIGHT))&&this.onUp(),(this.app.keyboard.isPressed(pc.KEY_A)||this.app.keyboard.isPressed(pc.KEY_LEFT))&&(this.onDownKeyboard(),this.offsetXKeyboard-=4*t),(this.app.keyboard.wasReleased(pc.KEY_A)||this.app.keyboard.wasReleased(pc.KEY_LEFT))&&this.onUp(),!this.isMove)return;if(this.ballPlayer.translateLocal(0,0,-this.speed*t),this.ballModel.rotateLocal(-1300*t,0,0),this.isClick){this.movementJoystick&&(this.joystick=window.touchJoypad.sticks.joystick0,this.movementX=this.lastOffsetJoystickX+2*this.joystick.x),this.movementKeyboard&&(this.movementX=this.offsetXKeyboard),this.app.touch?this.speedSide=this.speedSideMobile:this.speedSide=this.speedSidePC;var e=100*this.movementX/.7/100*.7,i=pc.math.lerp(this.ballPlayer.getPosition().x,e*this.speedSide,2*t);i=pc.math.clamp(i,-.7,.7);var o=new pc.Vec3(i,this.ballPlayer.getPosition().y,this.ballPlayer.getPosition().z);this.ballPlayer.setPosition(o)}if(this.isJump)this.posJump=this.ballPlayer.getPosition(),this.ballPlayer.getPosition().y<this.jump_height?this.posJump.y+=3*t:this.isJump=!1,this.ballPlayer.setPosition(this.posJump);else if(this.ballPlayer.getPosition().y>this.posY){var s=3;this.jump_transition&&(s=1),this.posJump.y-=s*t,this.ballPlayer.setPosition(this.posJump)}else this.jump_transition=!1,this.trail.enabled=!0;this.chaseComponent.setChasePosition(this.ballPlayer.getPosition())}catch{}},PlayerMovement.prototype.onDownJoystick=function(){this.movementJoystick=!0,this.onDown()},PlayerMovement.prototype.onDownKeyboard=function(){this.movementKeyboard||this.onDown(),this.movementKeyboard=!0},PlayerMovement.prototype.onUp=function(){this.isClick=!1,this.movementJoystick=!1,this.movementKeyboard=!1,this.movementX=0,this.offsetXKeyboard=0,0!=this.joystick.x&&(this.lastOffsetJoystickX=this.joystick.x)},PlayerMovement.prototype.onDown=function(){window.hasStarted||window.famobi_analytics.trackEvent("EVENT_LEVELSTART",{levelName:""}),0==this.isMove&&0==this.isFail&&(this.isMove=!0,this.settings.startBackgroundAuido(),this.tutorial.enabled=!1),window.hasStarted=!0,this.isClick=!0},PlayerMovement.prototype.onTriggerEnter=function(t){t.tags.has("Trampline")&&this.jump(t)},PlayerMovement.prototype.jump=function(t){this.isJump=!0,this.trail.enabled=!1;var e=t.script.jumpComponent;this.jump_transition=e.transition,this.jump_height=e.height,this.jump_height+=this.ballPlayer.getPosition().y,this.sound.sound.play("Jump")};var Chase=pc.createScript("chase");Chase.attributes.add("followAllAxes",{type:"boolean",default:!0}),Chase.attributes.add("smooth",{type:"number",min:1,max:10,default:3,title:"Smooth Follow"}),Chase.prototype.initialize=function(){this.currentPosition=new pc.Vec3(0,0,0),this.nextPosition=new pc.Vec3(0,0,0),this.app.on("Player:Move",this.setChasePosition,this)},Chase.prototype.setChasePosition=function(t){this.nextPosition=t},Chase.prototype.update=function(t){this.currentPosition=this.currentPosition.lerp(this.currentPosition,this.nextPosition,this.smooth*t),this.followAllAxes?this.entity.setPosition(this.currentPosition):this.entity.setPosition(this.entity.getPosition().x,this.currentPosition.y,this.currentPosition.z)};var ObstacleCollissionSystem=pc.createScript("obstacleCollissionSystem");ObstacleCollissionSystem.attributes.add("player",{type:"entity"}),ObstacleCollissionSystem.attributes.add("score",{type:"entity",title:"Best Score UI Panel"}),ObstacleCollissionSystem.attributes.add("yourScore",{type:"entity",title:"Your Score UI Panel"}),ObstacleCollissionSystem.attributes.add("fxDeath",{type:"asset"}),ObstacleCollissionSystem.attributes.add("timeReload",{type:"number",default:1.5,title:"Time Reload Game"}),ObstacleCollissionSystem.attributes.add("restart",{type:"entity",title:"UI Button Restart"}),ObstacleCollissionSystem.attributes.add("sound",{type:"entity"}),ObstacleCollissionSystem.attributes.add("distanceText",{type:"entity"}),ObstacleCollissionSystem.prototype.init=function(){this.playerMovementSystem=this.app.root.findByName("Player Movement").script.playerMovement,this.objectSpawnSystem=this.app.root.findByName("Spawn").script.objectsSpawnSystem,this.distancePlayerSystem=this.app.root.findByName("Distance Player").script.distancePlayerSystem,this.restart.button.on("click",this.reloadGame,this),this.restart.button.entity.enabled=!1,this.isDeath=!1,this.isFailFamobi=!1,window.dirtyButton=this.restart.button},ObstacleCollissionSystem.prototype.update=function(t){try{if(this.isDeath){if(!this.isFailFamobi){this.isFailFamobi=!0;var e=this;window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:e.distancePlayerSystem.roundDistance}).then(function(){setTimeout(function(){Promise.all([window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:"",reason:"dead"}),window.famobi.showInterstitialAd(),window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:e.distancePlayerSystem.roundDistance})]).then(function(){window.dirtyButton.entity.enabled=!0})}.bind(e),2e3)})}return}this.setRaycast(0,.1),this.setRaycast(.07,.1),this.setRaycast(-.07,.1)}catch{}},ObstacleCollissionSystem.prototype.setRaycast=function(t,e){var i=this.player.getPosition(),o=new pc.Vec3(this.player.getPosition().x+1*t,this.player.getPosition().y,this.player.getPosition().z-1*e),s=this.app.systems.rigidbody.raycastFirst(i,o);null!=s&&s.entity.tags.has("Obstacle")&&(this.isDeath=!0,this.playerMovementSystem.isMove=!1,this.playerMovementSystem.isFail=!0,this.objectSpawnSystem.spawnObject(this.fxDeath,this.app.root,this.player.getPosition()),this.distancePlayerSystem.saveDistance(),this.player.enabled=!1,this.score.enabled=!0,this.yourScore.enabled=!0,this.distanceText.enabled=!1,this.sound.sound.pause("Background"),this.sound.sound.play("Fail"))},ObstacleCollissionSystem.prototype.reloadGame=function(){window.famobi.showInterstitialAd({eventId:"button:result:restart",callback:()=>{this.app.scenes.changeScene("Main"),window.hasStarted=!1}})};var SidesMovementComponent=pc.createScript("sidesMovementComponent");SidesMovementComponent.prototype.initialize=function(){this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(.35,this.entity.getLocalPosition().y,this.entity.getLocalPosition().z),1,pc.SineOut).loop(!0).yoyo(!0).start()},window.famobi.onRequest("pauseGameplay",function(){return pc.app.timeScale=0}),window.famobi.onRequest("resumeGameplay",function(){return pc.app.timeScale=1});var BlocksMovementComponent=pc.createScript("blocksMovementComponent");BlocksMovementComponent.attributes.add("rightBlock",{type:"entity"}),BlocksMovementComponent.attributes.add("leftBlock",{type:"entity"}),BlocksMovementComponent.prototype.initialize=function(){this.player=this.app.root.findByName("PLAYER"),this.isStartAnim=!1},BlocksMovementComponent.prototype.update=function(t){this.entity.getPosition().sub(this.player.getPosition()).length()<=3&&!this.isStartAnim&&(this.startAnimOpenObstacle(this.rightBlock,1),this.startAnimOpenObstacle(this.leftBlock,-1),this.isStartAnim=!0)},BlocksMovementComponent.prototype.startAnimOpenObstacle=function(t,e){t.tween(t.getLocalPosition()).to(new pc.Vec3(t.getLocalPosition().x+.5*e,t.getLocalPosition().y,t.getLocalPosition().z),.3,pc.SineOut).yoyo(!0).start()};var AnimationSidesBoxesComponent=pc.createScript("animationSidesBoxesComponent");AnimationSidesBoxesComponent.attributes.add("boxes",{type:"entity",array:!0}),AnimationSidesBoxesComponent.attributes.add("speedAnim",{type:"number",min:.05,max:5,default:.5}),AnimationSidesBoxesComponent.attributes.add("minSizeY",{type:"number",default:.17}),AnimationSidesBoxesComponent.attributes.add("maxSizeY",{type:"number",default:1.3}),AnimationSidesBoxesComponent.prototype.initialize=function(){for(var t=0;t<this.boxes.length;t++)this.startAnim(this.boxes[t])},AnimationSidesBoxesComponent.prototype.startAnim=function(t){var e=t.getLocalScale(),i=pc.math.random(this.minSizeY,this.maxSizeY),o=pc.math.random(.5,1.15),s=e,n=new pc.Vec3(e.x,this.maxSizeY,e.z);s.y=i,t.tween(s).to(n,o,pc.SineOut).loop(!0).yoyo(!0).start()};var Ribbon=pc.createScript("ribbon");Ribbon.attributes.add("lifetime",{type:"number",default:.5}),Ribbon.attributes.add("xoffset",{type:"number",default:-.8}),Ribbon.attributes.add("yoffset",{type:"number",default:1}),Ribbon.attributes.add("height",{type:"number",default:.4}),Ribbon.attributes.add("color",{type:"rgba",title:"Color Trail"});var MAX_VERTICES=600,VERTEX_SIZE=4;Ribbon.prototype.initialize=function(){var t={attributes:{aPositionAge:pc.SEMANTIC_POSITION},vshader:["attribute vec4 aPositionAge;","","uniform mat4 matrix_viewProjection;","uniform float trail_time;","","varying float vAge;","","void main(void)","{","    vAge = trail_time - aPositionAge.w;","    gl_Position = matrix_viewProjection * vec4(aPositionAge.xyz, 1.0);","}"].join("\n"),fshader:["precision mediump float;","","varying float vAge;","","uniform float trail_lifetime;","uniform float color_red;","uniform float color_green;","uniform float color_blue;","uniform float color_alpha;","","void main(void)","{","    gl_FragColor = vec4(color_red, color_green, color_blue, color_alpha);","}"].join("\n")},e=new pc.Shader(this.app.graphicsDevice,t);this.material=new pc.Material,this.material.shader=e,this.material.setParameter("trail_time",0),this.material.setParameter("trail_lifetime",this.lifetime),this.updateColor(this.color),this.material.cull=pc.CULLFACE_NONE,this.material.blend=!0,this.material.blendSrc=pc.BLENDMODE_SRC_ALPHA,this.material.blendDst=pc.BLENDMODE_ONE_MINUS_SRC_ALPHA,this.material.blendEquation=pc.BLENDEQUATION_ADD,this.material.depthWrite=!1,this.timer=0,this.vertices=[],this.vertexData=new Float32Array(MAX_VERTICES*VERTEX_SIZE),this.vertexIndexArray=[];for(var i=0;i<this.vertexData.length;++i)this.vertexIndexArray.push(i);this.mesh=new pc.Mesh(this.app.graphicsDevice),this.mesh.clear(!0,!1),this.mesh.setPositions(this.vertexData,VERTEX_SIZE,MAX_VERTICES),this.mesh.setIndices(this.vertexIndexArray,MAX_VERTICES),this.mesh.update(pc.PRIMITIVE_TRISTRIP);var o=new pc.MeshInstance(this.mesh,this.material);this.entity.addComponent("render",{meshInstances:[o],layers:[this.app.scene.layers.getLayerByName("World").id]}),this.entity.render.enabled=!1},Ribbon.prototype.reset=function(){this.timer=0,this.vertices=[]},Ribbon.prototype.spawnNewVertices=function(){var t=this.entity,e=t.getPosition(),i=t.right.clone().scale(this.height),o=this.xoffset,s=this.yoffset,n=this.timer,a=[e.x+i.x*o,e.y+i.y*o,e.z+i.z*o,e.x+i.x*s,e.y+i.y*s,e.z+i.z*s];this.vertices.unshift({spawnTime:n,vertexPair:a})},Ribbon.prototype.clearOldVertices=function(){for(var t=this.vertices.length-1;t>=0;t--){var e=this.vertices[t];if(!(this.timer-e.spawnTime>=this.lifetime))break;this.vertices.pop()}},Ribbon.prototype.prepareVertexData=function(){for(var t=0;t<this.vertices.length;t++){var e=this.vertices[t];if(this.vertexData[8*t+0]=e.vertexPair[0],this.vertexData[8*t+1]=e.vertexPair[1],this.vertexData[8*t+2]=e.vertexPair[2],this.vertexData[8*t+3]=e.spawnTime,this.vertexData[8*t+4]=e.vertexPair[3],this.vertexData[8*t+5]=e.vertexPair[4],this.vertexData[8*t+6]=e.vertexPair[5],this.vertexData[8*t+7]=e.spawnTime,this.vertexData.length===t)break}},Ribbon.prototype.update=function(t){if(this.timer+=t,this.material.setParameter("trail_time",this.timer),this.clearOldVertices(),this.spawnNewVertices(),this.vertices.length>1){this.prepareVertexData();var e=2*this.vertices.length,i=MAX_VERTICES;e<i&&(i=e),this.mesh.setPositions(this.vertexData,VERTEX_SIZE,i),this.mesh.setIndices(this.vertexIndexArray,i),this.mesh.update(pc.PRIMITIVE_TRISTRIP),this.entity.render.enabled=!0}},Ribbon.prototype.updateColor=function(t){this.color=new pc.Color(t.r,t.g,t.b,t.a),this.material.setParameter("color_red",this.color.r),this.material.setParameter("color_green",this.color.g),this.material.setParameter("color_blue",this.color.b),this.material.setParameter("color_alpha",this.color.a)},function(){var t={},e=0;pc.timer={},pc.timer.add=function(i,o,s){if(i>0){var n={};return n.id=e,t[e]={secsLeft:i,callback:o,scope:s},e+=1,n}return null},pc.timer.remove=function(e){e&&delete t[e.id]},pc.timer.update=function(e){for(var i in t){var o=t[i];o.secsLeft-=e,o.secsLeft<=0&&(o.callback.call(o.scope),delete t[i])}};var i=pc.Application.getApplication();i&&i.on("update",function(t){pc.timer.update(t)})}();var CrystalsSystem=pc.createScript("crystalsSystem");CrystalsSystem.attributes.add("crystal",{type:"asset"}),CrystalsSystem.attributes.add("player",{type:"entity"}),CrystalsSystem.attributes.add("trigger",{type:"entity",title:"Trigger Player"}),CrystalsSystem.attributes.add("crystalText",{type:"entity"}),CrystalsSystem.attributes.add("crystalCollectText",{type:"entity"}),CrystalsSystem.attributes.add("fxCollect",{type:"asset",title:"Fx Collect Crystal"}),CrystalsSystem.attributes.add("timeSpawn",{type:"number",default:1,title:"Time Spawn Crystal"}),CrystalsSystem.attributes.add("limitXMin",{type:"number",title:"Limit Spawn Crystal Min"}),CrystalsSystem.attributes.add("limitXMax",{type:"number",title:"Limit Spawn Crystal Max"}),CrystalsSystem.attributes.add("distanceSpawn",{type:"number",title:"Distance from the player"}),CrystalsSystem.attributes.add("sound",{type:"entity"}),CrystalsSystem.prototype.init=function(){this.objectSpawnSystem=this.app.root.findByName("Spawn").script.objectsSpawnSystem,this.obstacleCollissionSystem=this.app.root.findByName("Obstacle Collission").script.obstacleCollissionSystem,this.playerMovementSystem=this.app.root.findByName("Player Movement").script.playerMovement,this.levelSystem=this.app.root.findByName("Level Generation").script.levelGenerationSystem,this.distancePlayerSystem=this.app.root.findByName("Distance Player").script.distancePlayerSystem,this.trigger.collision.on("triggerenter",this.onTriggerEnter,this),this.currentTimerSpawn=this.timeSpawn,this.startPosCrystalCollectText=this.crystalCollectText.getPosition()},CrystalsSystem.prototype.update=function(t){try{if(this.obstacleCollissionSystem.isDeath||!this.playerMovementSystem.isMove)return;this.currentTimerSpawn-=.01,this.currentTimerSpawn<=0&&(this.spawnCrystal(),this.currentTimerSpawn=this.timeSpawn)}catch{}},CrystalsSystem.prototype.spawnCrystal=function(){var t=this.levelSystem.chunks[0].script.chunkComponent.pointspawn.getPosition().y;console.log(t);var e=this.player.getPosition();e.x=pc.math.random(this.limitXMin,this.limitXMax),e.y=t,e.z-=this.distanceSpawn,this.objectSpawnSystem.spawnObject(this.crystal,this.app.root,e)},CrystalsSystem.prototype.onTriggerEnter=function(t){t.tags.has("Crystal")&&this.collectCrystal(t)},CrystalsSystem.prototype.collectCrystal=function(t){this.objectSpawnSystem.spawnObject(this.fxCollect,this.app.root,t.getPosition()),t.destroy(),this.distancePlayerSystem.increaseDistance(5),this.sound.sound.play("Collect Crystall"),localStorage.setItem("Crystal",this.countCrystal),this.crystalCollectText.enabled=!0,this.crystalCollectText.setPosition(this.startPosCrystalCollectText);var e=this;e.crystalCollectText.tween(e.crystalCollectText.getLocalPosition()).to(new pc.Vec3(-502.572,-50,0),.8,pc.SineOut).on("complete",function(){e.crystalCollectText.enabled=!1}).yoyo(!0).start();var i={value:1};this.app.tween(i).to({value:0},.8,pc.Linear).yoyo(!0).on("update",function(){e.crystalCollectText.element.opacity=i.value}).start()},CrystalsSystem.prototype.updateUI=function(){this.crystalText.element.text=this.countCrystal},pc.extend(pc,function(){var t=function(t){this._app=t,this._tweens=[],this._add=[]};t.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var e=0,i=this._tweens.length;e<i;)this._tweens[e].update(t)?e++:(this._tweens.splice(e,1),i--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}};var e=function(t,e,i){pc.events.attach(this),this.manager=e,i&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},i=function(t){var e;return t instanceof pc.Vec2?e={x:t.x,y:t.y}:t instanceof pc.Vec3?e={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?e={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(e={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(e.a=t.a)):e=t,e};e.prototype={to:function(t,e,o,s,n,a){return this._properties=i(t),this.duration=e,o&&(this.easing=o),s&&this.delay(s),n&&this.repeat(n),a&&this.yoyo(a),this},from:function(t,e,o,s,n,a){return this._properties=i(t),this.duration=e,o&&(this.easing=o),s&&this.delay(s),n&&this.repeat(n),a&&this.yoyo(a),this._from=!0,this},rotate:function(t,e,o,s,n,a){return this._properties=i(t),this.duration=e,o&&(this.easing=o),s&&this.delay(s),n&&this.repeat(n),a&&this.yoyo(a),this._slerp=!0,this},start:function(){var t,e,i,o;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,o=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(e,i,o))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,o=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(e,i,o,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(e,i,o)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,e){return this._count=0,this._numRepeats=t,this._repeatDelay=e||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var e=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(e=this.duration-this.time,this.time=0):(e=this.time-this.duration,this.time=this.duration));var i,o,s=0===this.duration?1:this.time/this.duration,n=this.easing(s);for(var a in this._properties)this._properties.hasOwnProperty(a)&&(i=this._sv[a],o=this._ev[a],this.target[a]=i+(o-i)*n);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,n),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var r=this._repeat(e);return r?this.fire("loop"):(this.fire("complete",e),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),r}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var e in this._properties){var i=this._sv[e];this._sv[e]=this._ev[e],this._ev[e]=i}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var o=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},s=function(t){return 1-o(1-t)};return{TweenManager:t,Tween:e,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},BackOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},BackInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},BounceIn:s,BounceOut:o,BounceInOut:function(t){return t<.5?.5*s(2*t):.5*o(2*t-1)+.5},ElasticIn:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},ElasticOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var e,i=.1,o=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=o*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/o)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/o)*.5+1)}}}()),function(){pc.AppBase.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",function(t){this._tweenManager.update(t)})},pc.AppBase.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,e){var i=this._app.tween(t);return i.entity=this,this.once("destroy",i.stop,i),e&&e.element&&(i.element=e.element),i};var t=pc.AppBase.getApplication();t&&t.addTweenManager()}();var DistanceDestroyObjectComponent=pc.createScript("distanceDestroyObjectComponent");DistanceDestroyObjectComponent.attributes.add("distance",{type:"number",default:20,title:"Distance Destroy Entity"}),DistanceDestroyObjectComponent.prototype.initialize=function(){this.player=this.app.root.findByName("PLAYER"),this.goalTarget=!1},DistanceDestroyObjectComponent.prototype.update=function(t){var e=this.entity.getPosition().sub(this.player.getPosition()).length();e<=1&&!this.goalTarget&&(this.goalTarget=!0),e>this.distance&&this.goalTarget&&this.entity.destroy()};var DistancePlayerSystem=pc.createScript("distancePlayerSystem");DistancePlayerSystem.attributes.add("player",{type:"entity"}),DistancePlayerSystem.attributes.add("distanceText",{type:"entity"}),DistancePlayerSystem.attributes.add("bestScoreText",{type:"entity"}),DistancePlayerSystem.attributes.add("yourScoreText",{type:"entity"}),DistancePlayerSystem.attributes.add("victory",{type:"asset",title:"Victory Object"}),DistancePlayerSystem.attributes.add("isDelete",{type:"boolean",title:"Delete Saves Datas"}),DistancePlayerSystem.prototype.init=function(){this.roundDistance=0,this.objectSpawnSystem=this.app.root.findByName("Spawn").script.objectsSpawnSystem,this.playerMovement=this.app.root.findByName("Player Movement").script.playerMovement,this.startPointPlayer=this.player.getPosition(),this.lastRoundDistance=0,this.isDelete&&this.saveData(),this.lastDistancePassed=window.famobi.localStorage.getItem("distance_passed")},DistancePlayerSystem.prototype.update=function(t){try{if(!this.playerMovement.isMove)return;this.currentDistance=this.entity.getPosition().sub(this.player.getPosition()).length(),this.roundDistance=Math.round(this.currentDistance),this.distanceText.element.text=this.roundDistance,this.roundDistance!=this.lastRoundDistance&&(window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:this.roundDistance}),this.lastRoundDistance=this.roundDistance)}catch{}},DistancePlayerSystem.prototype.saveDistance=function(){this.bestScoreText.element.text=this.lastDistancePassed,this.yourScoreText.element.text=this.roundDistance,this.currentDistance>this.lastDistancePassed&&(this.saveData(),this.bestScoreText.element.text=this.roundDistance,this.yourScoreText.element.text=this.roundDistance)},DistancePlayerSystem.prototype.saveData=function(){window.famobi.localStorage.setItem("distance_passed",this.roundDistance)},DistancePlayerSystem.prototype.increaseDistance=function(t){this.entity.setPosition(this.entity.getPosition().x,this.entity.getPosition().y,this.entity.getPosition().z+t)};var DistancePassedComponent=pc.createScript("distancePassedComponent");DistancePassedComponent.attributes.add("distanceText",{type:"entity"});var JumpComponent=pc.createScript("jumpComponent");JumpComponent.attributes.add("height",{type:"number",default:.5,title:"Height Jump"}),JumpComponent.attributes.add("transition",{type:"boolean",default:!1,title:"Transition Jump"});var LittlesBlocksMoveComponent=pc.createScript("littlesBlocksMoveComponent");LittlesBlocksMoveComponent.attributes.add("blocks",{type:"entity",array:!0}),LittlesBlocksMoveComponent.attributes.add("timer",{type:"number",default:.5,title:"Timer Stop Block"}),LittlesBlocksMoveComponent.prototype.initialize=function(){this.player=this.app.root.findByName("PLAYER"),this.speedMovement=this.app.root.findByName("Player Movement").script.playerMovement.speed+.7,this.isStartAnim=!1,this.timerStopBlock=this.timer,this.blocks2=Array.from(this.blocks),this.blocksPos=[];for(var t=0;t<this.blocks.length;t++)this.blocksPos.push(this.blocks[t].getLocalPosition())},LittlesBlocksMoveComponent.prototype.update=function(t){if(this.isStartAnim){if(this.blocks.length<=0)return void(this.isStartAnim=!1);if(this.timerStopBlock-=.01,
this.timerStopBlock<=0){var e=this.blocks[Math.round(pc.math.random(0,this.blocks.length))],i=this.blocks.indexOf(e);-1!==i&&this.blocks.splice(i,1),this.timerStopBlock=this.timer}for(s=0;s<this.blocks.length;s++)this.blocks[s].translateLocal(0,0,-this.speedMovement*t)}else{var o=this.entity.getPosition().sub(this.player.getPosition()).length();if(o<=4&&this.blocks.length>0)this.isStartAnim=!0;else if(o>15&&this.blocks.length<=0){for(var s=0;s<this.blocks2.length;s++)this.blocks2[s].setLocalPosition(this.blocksPos[s].x,0,0);this.blocks=Array.from(this.blocks2)}}};var TriggerPosYplayerComponent=pc.createScript("triggerPosYplayerComponent");TriggerPosYplayerComponent.attributes.add("countIncrease",{type:"number",default:1,title:"Count Increase Pos Player Y"}),TriggerPosYplayerComponent.attributes.add("point",{type:"entity",default:1,title:"Point Pos Player Y"}),TriggerPosYplayerComponent.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.playerMovementSystem=this.app.root.findByName("Player Movement").script.playerMovement,this.levelColorsControlSystem=this.app.root.findByName("Level Colors Control").script.levelColorsControlSystem},TriggerPosYplayerComponent.prototype.onTriggerEnter=function(t){t.tags.has("Player")&&(console.log("TRIGGER"),this.playerMovementSystem.posY=this.point.getPosition().y+this.countIncrease,this.lastSpeedMoevementPlayer=this.playerMovementSystem.speed,this.playerMovementSystem.speed=this.playerMovementSystem.firstSpeedMovement,this.levelColorsControlSystem.updateLevel(),pc.timer.add(1,this.updateSpeed,this))},TriggerPosYplayerComponent.prototype.updateSpeed=function(){this.playerMovementSystem.speed=this.lastSpeedMoevementPlayer+this.playerMovementSystem.increaseSpeed};var LevelColorsControlSystem=pc.createScript("levelColorsControlSystem");LevelColorsControlSystem.attributes.add("materials1",{type:"asset",array:!0,title:"Materials Enviroment Level 1"}),LevelColorsControlSystem.attributes.add("materialRoad1",{type:"asset",title:"Material Road Level 1"}),LevelColorsControlSystem.attributes.add("materialSkybox1",{type:"asset",title:"Material Skybox Level 1"}),LevelColorsControlSystem.attributes.add("colorFog1",{type:"rgb",title:"Color Fog Level 1"}),LevelColorsControlSystem.attributes.add("materialBall1",{type:"asset",title:"Materials Ball Level 1"}),LevelColorsControlSystem.attributes.add("colorTrail1",{type:"rgba",title:"Color Trail Ball Level 1"}),LevelColorsControlSystem.attributes.add("materials2",{type:"asset",array:!0,title:"Materials Enviroment Level 2"}),LevelColorsControlSystem.attributes.add("materialRoad2",{type:"asset",title:"Material Road Level 2"}),LevelColorsControlSystem.attributes.add("materialSkybox2",{type:"asset",title:"Material Skybox Level 2"}),LevelColorsControlSystem.attributes.add("colorFog2",{type:"rgb",title:"Color Fog Level 2"}),LevelColorsControlSystem.attributes.add("materialBall2",{type:"asset",title:"Materials Ball Level 2"}),LevelColorsControlSystem.attributes.add("colorTrail2",{type:"rgba",title:"Color Trail Ball Level 2"}),LevelColorsControlSystem.attributes.add("materials3",{type:"asset",array:!0,title:"Materials Enviroment Level 3"}),LevelColorsControlSystem.attributes.add("materialRoad3",{type:"asset",title:"Material Road Level 3"}),LevelColorsControlSystem.attributes.add("materialSkybox3",{type:"asset",title:"Material Skybox Level 3"}),LevelColorsControlSystem.attributes.add("colorFog3",{type:"rgb",title:"Color Fog Level 3"}),LevelColorsControlSystem.attributes.add("materialBall3",{type:"asset",title:"Materials Ball Level 3"}),LevelColorsControlSystem.attributes.add("colorTrail3",{type:"rgba",title:"Color Trail Ball Level 3"}),LevelColorsControlSystem.attributes.add("materials4",{type:"asset",array:!0,title:"Materials Enviroment Level 4"}),LevelColorsControlSystem.attributes.add("materialRoad4",{type:"asset",title:"Material Road Level 4"}),LevelColorsControlSystem.attributes.add("materialSkybox4",{type:"asset",title:"Material Skybox Level 4"}),LevelColorsControlSystem.attributes.add("colorFog4",{type:"rgb",title:"Color Fog Level 4"}),LevelColorsControlSystem.attributes.add("materialBall4",{type:"asset",title:"Materials Ball Level 4"}),LevelColorsControlSystem.attributes.add("colorTrail4",{type:"rgba",title:"Color Trail Ball Level 4"}),LevelColorsControlSystem.attributes.add("materials5",{type:"asset",array:!0,title:"Materials Enviroment Level 5"}),LevelColorsControlSystem.attributes.add("materialRoad5",{type:"asset",title:"Material Road Level 5"}),LevelColorsControlSystem.attributes.add("materialSkybox5",{type:"asset",title:"Material Skybox Level 5"}),LevelColorsControlSystem.attributes.add("colorFog5",{type:"rgb",title:"Color Fog Level 5"}),LevelColorsControlSystem.attributes.add("materialBall5",{type:"asset",title:"Materials Ball Level 5"}),LevelColorsControlSystem.attributes.add("colorTrail5",{type:"rgba",title:"Color Trail Ball Level 5"}),LevelColorsControlSystem.attributes.add("materials6",{type:"asset",array:!0,title:"Materials Enviroment Level 6"}),LevelColorsControlSystem.attributes.add("materialRoad6",{type:"asset",title:"Material Road Level 6"}),LevelColorsControlSystem.attributes.add("materialSkybox6",{type:"asset",title:"Material Skybox Level 6"}),LevelColorsControlSystem.attributes.add("colorFog6",{type:"rgb",title:"Color Fog Level 6"}),LevelColorsControlSystem.attributes.add("materialBall6",{type:"asset",title:"Materials Ball Level 6"}),LevelColorsControlSystem.attributes.add("colorTrail6",{type:"rgba",title:"Color Trail Ball Level 6"}),LevelColorsControlSystem.attributes.add("materials7",{type:"asset",array:!0,title:"Materials Enviroment Level 7"}),LevelColorsControlSystem.attributes.add("materialRoad7",{type:"asset",title:"Material Road Level 7"}),LevelColorsControlSystem.attributes.add("materialSkybox7",{type:"asset",title:"Material Skybox Level 7"}),LevelColorsControlSystem.attributes.add("colorFog7",{type:"rgb",title:"Color Fog Level 7"}),LevelColorsControlSystem.attributes.add("materialBall7",{type:"asset",title:"Materials Ball Level 7"}),LevelColorsControlSystem.attributes.add("colorTrail7",{type:"rgba",title:"Color Trail Ball Level 7"}),LevelColorsControlSystem.prototype.init=function(){this.level=0,this.currentIndexMaterialsEnviroment=0,this.registersColorObjects=[],this.materialsEnviromentLevel=[],this.materialsRoadLevel=[],this.materialsSkyboxLevel=[],this.colorsFogLevel=[],this.materialsBallLevel=[],this.colorsTrailBallLevel=[];var t=window.devicePixelRatio||1;this.app.graphicsDevice.maxPixelRatio=t,this.materialsEnviromentLevel.push(this.materials1),this.materialsEnviromentLevel.push(this.materials2),this.materialsEnviromentLevel.push(this.materials3),this.materialsEnviromentLevel.push(this.materials4),this.materialsEnviromentLevel.push(this.materials5),this.materialsEnviromentLevel.push(this.materials6),this.materialsEnviromentLevel.push(this.materials7),this.materialsRoadLevel.push(this.materialRoad1),this.materialsRoadLevel.push(this.materialRoad2),this.materialsRoadLevel.push(this.materialRoad3),this.materialsRoadLevel.push(this.materialRoad4),this.materialsRoadLevel.push(this.materialRoad5),this.materialsRoadLevel.push(this.materialRoad6),this.materialsRoadLevel.push(this.materialRoad7),this.materialsSkyboxLevel.push(this.materialSkybox1),this.materialsSkyboxLevel.push(this.materialSkybox2),this.materialsSkyboxLevel.push(this.materialSkybox3),this.materialsSkyboxLevel.push(this.materialSkybox4),this.materialsSkyboxLevel.push(this.materialSkybox5),this.materialsSkyboxLevel.push(this.materialSkybox6),this.materialsSkyboxLevel.push(this.materialSkybox7),this.colorsFogLevel.push(this.colorFog1),this.colorsFogLevel.push(this.colorFog2),this.colorsFogLevel.push(this.colorFog3),this.colorsFogLevel.push(this.colorFog4),this.colorsFogLevel.push(this.colorFog5),this.colorsFogLevel.push(this.colorFog6),this.colorsFogLevel.push(this.colorFog7),this.materialsBallLevel.push(this.materialBall1),this.materialsBallLevel.push(this.materialBall2),this.materialsBallLevel.push(this.materialBall3),this.materialsBallLevel.push(this.materialBall4),this.materialsBallLevel.push(this.materialBall5),this.materialsBallLevel.push(this.materialBall6),this.materialsBallLevel.push(this.materialBall7),this.colorsTrailBallLevel.push(this.colorTrail1),this.colorsTrailBallLevel.push(this.colorTrail2),this.colorsTrailBallLevel.push(this.colorTrail3),this.colorsTrailBallLevel.push(this.colorTrail4),this.colorsTrailBallLevel.push(this.colorTrail5),this.colorsTrailBallLevel.push(this.colorTrail6),this.colorsTrailBallLevel.push(this.colorTrail7)},LevelColorsControlSystem.prototype.updateLevel=function(){this.level++,this.level>=7&&(this.level=Math.round(pc.math.random(0,6))),this.updateIndexMaterialsEnviroment(),this.updateColorAllrtegistersObjects()},LevelColorsControlSystem.prototype.updateColorAllrtegistersObjects=function(){for(var t=0;t<this.registersColorObjects.length;t++)this.registersColorObjects[t].updateColor()},LevelColorsControlSystem.prototype.getColor=function(t){var e=this.getColorLevel(t),i=this.getColorLevel(3),o=this.getColorLevel(4);if(e)return this.app.scene.skybox=i.resource,this.app.scene.fogColor=o,1==t?(this.updateIndexMaterialsEnviroment(),e[this.currentIndexMaterialsEnviroment]):t>=2?e:void 0},LevelColorsControlSystem.prototype.getColorLevel=function(t){if(this.materialsEnviromentLevel)return 1==t?this.materialsEnviromentLevel[this.level]:2==t?this.materialsRoadLevel[this.level]:3==t?this.materialsSkyboxLevel[this.level]:4==t?this.colorsFogLevel[this.level]:5==t?this.materialsBallLevel[this.level]:6==t?this.colorsTrailBallLevel[this.level]:void 0},LevelColorsControlSystem.prototype.register=function(t){this.registersColorObjects.push(t)},LevelColorsControlSystem.prototype.unRegister=function(t){var e=this.registersColorObjects.indexOf(t);-1!==e&&this.registersColorObjects.splice(e,1)},LevelColorsControlSystem.prototype.updateIndexMaterialsEnviroment=function(){this.currentIndexMaterialsEnviroment++,this.currentIndexMaterialsEnviroment>=this.getColorLevel(1).length&&(this.currentIndexMaterialsEnviroment=0)};var UpdateColorLevelComponent=pc.createScript("updateColorLevelComponent");UpdateColorLevelComponent.attributes.add("colorType",{type:"number",enum:[{Enviroment:1},{Road:2},{Skybox:3},{Fog:4},{Ball:5},{Trail:6}],default:1}),UpdateColorLevelComponent.prototype.initialize=function(){this.trailComponent=this.app.root.findByName("Trail").script.ribbon,this.levelColorsControlSystem=this.app.root.findByName("Level Colors Control").script.levelColorsControlSystem,this.levelColorsControlSystem.register(this),this.on("destroy",function(){this.levelColorsControlSystem.unRegister(this)}),this._updateColor=!1},UpdateColorLevelComponent.prototype.update=function(t){this._updateColor||this.updateColor()},UpdateColorLevelComponent.prototype.updateColor=function(){var t=this.levelColorsControlSystem.getColor(this.colorType);t&&(6!=this.colorType&&this.updateMaterial(t),6==this.colorType&&this.setColor(t),this._updateColor=!0)},UpdateColorLevelComponent.prototype.updateMaterial=function(t){for(var e=this.entity.findComponents("render"),i=0;i<e.length;++i)for(var o=e[i].meshInstances,s=0;s<o.length;s++)o[s].material=t.resource},UpdateColorLevelComponent.prototype.setColor=function(t){this.trailComponent.updateColor(t)};var FallingColumnsObstacleComponent=pc.createScript("fallingColumnsObstacleComponent");FallingColumnsObstacleComponent.attributes.add("columns",{type:"entity",array:!0}),FallingColumnsObstacleComponent.attributes.add("duration",{type:"number",default:.3,title:"Duration One Falling Column"}),FallingColumnsObstacleComponent.prototype.initialize=function(){this.player=this.app.root.findByName("PLAYER"),this.isStartAnim=!1,this.distance=100},FallingColumnsObstacleComponent.prototype.update=function(t){if(this.distance=this.entity.getPosition().sub(this.player.getPosition()).length(),!this.isStartAnim&&this.distance<=10){for(var e=0;e<this.columns.length;e++)this.startAnimDown(this.columns[e],this.duration*e);this.isStartAnim=!0}if(this.distance>10&&this.isStartAnim){for(e=0;e<this.columns.length;e++)this.startAnimUp(this.columns[e]);this.isStartAnim=!1}},FallingColumnsObstacleComponent.prototype.startAnimDown=function(t,e){t.tween(t.getLocalPosition()).delay(e).to(new pc.Vec3(t.getLocalPosition().x,.835,t.getLocalPosition().z),.15,pc.SineOut).yoyo(!0).start()},FallingColumnsObstacleComponent.prototype.startAnimUp=function(t){t.tween(t.getLocalPosition()).to(new pc.Vec3(t.getLocalPosition().x,3,t.getLocalPosition().z),.001,pc.SineOut).yoyo(!0).start()};var TriggerDestroyObjectComponent=pc.createScript("triggerDestroyObjectComponent");TriggerDestroyObjectComponent.attributes.add("trigger",{type:"entity"}),TriggerDestroyObjectComponent.prototype.initialize=function(){this.trigger.collision.on("triggerenter",this.onTriggerEnter,this)},TriggerDestroyObjectComponent.prototype.onTriggerEnter=function(t){t.tags.has("Obstacle")&&this.entity.destroy()};var SettingsSystem=pc.createScript("settingsSystem");SettingsSystem.attributes.add("sound",{type:"entity"}),SettingsSystem.attributes.add("settingsButton",{type:"entity"}),SettingsSystem.attributes.add("settingsPanel",{type:"entity"}),SettingsSystem.attributes.add("audioButton",{type:"entity"}),SettingsSystem.attributes.add("audioImage",{type:"entity"}),SettingsSystem.attributes.add("audioIcons",{type:"asset",array:!0}),SettingsSystem.prototype.init=function(){var t=window.famobi.localStorage.getItem("muted");null==t||""==t||"true"==t?this.audioEnabled=!0:"false"==t&&(this.audioEnabled=!1),this.backgroundAudio=!1,this.settingsPanelEnabled=!1,this.settingsButton.button.on("click",this.showSettingsPanel,this),this.audioButton.button.on("click",this.updateEnabledAudio,this),this.enabledAudio(),window.famobi.hasFeature("external_mute")&&(this.app.root.findByName("Settings").enabled=!1),window.muteMaster=this},SettingsSystem.prototype.showSettingsPanel=function(){this.settingsPanelEnabled=!this.settingsPanelEnabled,this.settingsPanel.enabled=this.settingsPanelEnabled},SettingsSystem.prototype.updateEnabledAudio=function(){window.dirtyMute?(this.audioEnabled=!1,this.enabledAudio()):(this.audioEnabled=!this.audioEnabled,this.enabledAudio()),window.famobi.localStorage.setItem("muted",this.audioEnabled)},SettingsSystem.prototype.enabledAudio=function(){this.sound.sound.enabled=this.audioEnabled,this.audioEnabled?(this.audioImage.element.texture=this.audioIcons[0].resource,this.backgroundAudio&&this.startBackgroundAuido()):this.audioEnabled||(this.audioImage.element.texture=this.audioIcons[1].resource)},SettingsSystem.prototype.startBackgroundAuido=function(){this.sound.sound.play("Background"),this.backgroundAudio=!0},window.famobi.onRequest("enableAudio",function(){window.dirtyMute=!1,window.muteMaster.updateEnabledAudio()}),window.famobi.onRequest("disableAudio",function(){window.dirtyMute=!0,window.muteMaster.updateEnabledAudio()});var AnimationTutorialComponent=pc.createScript("animationTutorialComponent");AnimationTutorialComponent.attributes.add("speedAnim",{type:"number",min:.05,max:5,default:.5}),AnimationTutorialComponent.attributes.add("pointXMax",{type:"number",default:340}),AnimationTutorialComponent.attributes.add("pointXMin",{type:"number",default:-205}),AnimationTutorialComponent.prototype.initialize=function(){var t=this.entity.getLocalPosition();t.x=this.pointXMax,this.entity.tween(t).to(new pc.Vec3(this.pointXMin,this.entity.getLocalPosition().y,this.entity.getLocalPosition().z),this.speedAnim,pc.SineOut).loop(!0).yoyo(!0).start()};var TouchFix=pc.createScript("touchFix");TouchFix.prototype.initialize=function(){var t=this.app.touch;t&&t.on(pc.EVENT_TOUCHEND,function(t){t.event.preventDefault()})};var TouchJoystick=pc.createScript("touchJoystick");TouchJoystick.attributes.add("identifier",{type:"string",default:"joystick0",title:"Idenitifier",description:"A unique name for the joystick to refer to it by in the API. Joysticks are also buttons so this will also be the name of button in the API. It will give a warning in browser tools if the name is not unique."}),TouchJoystick.attributes.add("type",{type:"string",default:"fixed",enum:[{"Fixed in place":"fixed"},{"Move to first touch and fixed":"relative"},{"Move to first touch and drags":"drag"}],title:"Type",description:"Set type of behavior for the joystick."}),TouchJoystick.attributes.add("baseEntity",{type:"entity",title:"Base Entity",description:"Image Element Entity that shows the base of the joystick."}),TouchJoystick.attributes.add("nubEntity",{type:"entity",title:"Nub Entity",description:"Image Element Entity that shows the nub (top) of the joystick."}),TouchJoystick.attributes.add("axisDeadZone",{type:"number",default:10,title:"Axis Dead Zone",description:"The number of UI units from the position of the Base Entity where input is not registered."}),TouchJoystick.attributes.add("axisRange",{type:"number",default:50,title:"Axis Range",description:"The number of UI units from the position of the Base Entity that the Nub Entity can move to and is the maximum range"}),TouchJoystick.attributes.add("hideOnRelease",{type:"boolean",default:!1,title:"Hide on Release",description:"Will only show the joystick when the user is using it and will hide it on touch end. This is commonly used if you don't want the joystick to block what's being shown on screen."}),TouchJoystick.attributes.add("positionOnRelease",{type:"string",default:"stay",enum:[{Stay:"stay"},{Original:"original"},{"Last start":"lastStart"}],title:"Position on Release",description:"Where to move the joystick on release and can help keep the screen tidy so that there are clear areas to show the game and arrange controls."}),TouchJoystick.attributes.add("vibrationPress",{type:"number",default:0,title:"Vibration duration (ms)",description:"If the device supports vibration with 'Navigator.vibrate', it will vibrate for the duration set here on touch down.Set to 0 to disable."}),TouchJoystick.prototype.initialize=function(){window.touchJoypad&&void 0!==window.touchJoypad.sticks[this.identifier]?console.warn("Touch joystick identifier already used, please use another for Entity: "+this.entity.name):(this.playerMovement=this.app.root.findByName("Player Movement").script.playerMovement,this._originalLocalPosition=this.baseEntity.getLocalPosition().clone(),this._lastPointerDownPosition=new pc.Vec3,this._setAxisValues(0,0),this._inputDown=!1,this._pointerId=-1,this._canVibrate=!!navigator.vibrate,this._setButtonState(!1),this.on("state",t=>{this._setEvents(t?"on":"off")}),this.on("destroy",()=>{window.touchJoypad&&(window.touchJoypad.sticks[this.identifier]=void 0)}),this._setEvents("on"))},TouchJoystick.prototype._setEvents=function(t){this._setAxisValues(0,0),this._pointerDown=!1,this._pointerId=-1,this.baseEntity.enabled=!this.hideOnRelease,this.entity.element[t]("mousedown",this._onMouseDown,this),this.entity.element[t]("mousemove",this._onMouseMove,this),this.entity.element[t]("mouseup",this._onMouseUp,this),this.app.touch&&(this.entity.element[t]("touchstart",this._onTouchDown,this),this.entity.element[t]("touchmove",this._onTouchMove,this),this.entity.element[t]("touchend",this._onTouchUp,this),this.entity.element[t]("touchcancel",this._onTouchUp,this))},TouchJoystick.__uiPos=new pc.Vec2,TouchJoystick.prototype.screenToUi=function(t){const e=TouchJoystick.__uiPos,i=this.app.graphicsDevice.canvas.clientWidth,o=this.app.graphicsDevice.canvas.clientHeight;return e.x=t.x/i,e.y=t.y/o,e.mulScalar(2).subScalar(1),e.y*=-1,e},TouchJoystick.prototype._onMouseDown=function(t){t.id=0,this._onPointerDown(t),this._pointerDown&&t.stopPropagation()},TouchJoystick.prototype._onMouseMove=function(t){t.id=0,this._onPointerMove(t),this._pointerDown&&t.stopPropagation()},TouchJoystick.prototype._onMouseUp=function(t){t.id=0,this._pointerDown&&t.stopPropagation(),this._onPointerUp(t)},TouchJoystick.prototype._onTouchDown=function(t){if(this._pointerDown)return;const e=this._pointerDown;t.id=t.touch.identifier,this._onPointerDown(t),!e&&this._pointerDown&&t.stopPropagation()},TouchJoystick.prototype._onTouchMove=function(t){t.id=t.touch.identifier,this._onPointerMove(t),this._pointerDown&&t.stopPropagation(),t.event.preventDefault()},TouchJoystick.prototype._onTouchUp=function(t){this._pointerDown&&(t.id=t.touch.identifier,this._onPointerUp(t),t.stopPropagation()),t.event.preventDefault()},TouchJoystick.prototype._onPointerDown=function(t){const e=this.screenToUi(t);switch(this.type){case"drag":case"relative":this.baseEntity.setPosition(e.x,e.y,0),this.nubEntity.setLocalPosition(0,0,0),this._pointerDown=!0;break;case"fixed":this.nubEntity.setPosition(e.x,e.y,0),this._updateAxisValuesFromNub(),this._pointerDown=!0}this._pointerDown&&(this._canVibrate&&0!==this.vibrationPress&&navigator.vibrate(this.vibrationPress),this._pointerId=t.id?t.id:0,this._setButtonState(!0),this._lastPointerDownPosition.copy(this.baseEntity.getLocalPosition()),this.baseEntity.enabled=!0,this._onPointerMove(t)),this.playerMovement.onDownJoystick()},TouchJoystick.__tempNubPos=new pc.Vec3,TouchJoystick.__tempBasePos=new pc.Vec3,TouchJoystick.prototype._onPointerMove=function(t){if(this._pointerDown&&this._pointerId==t.id){const e=this.screenToUi(t),i=this.axisRange*this.axisRange;this.nubEntity.setPosition(e.x,e.y,0);const o=TouchJoystick.__tempNubPos;if(o.copy(this.nubEntity.getLocalPosition()),o.lengthSq()>=i){if("drag"===this.type){const t=o.length()-this.axisRange,e=TouchJoystick.__tempBasePos;e.copy(o),e.normalize().mulScalar(t),e.add(this.baseEntity.getLocalPosition()),this.baseEntity.setLocalPosition(e)}o.normalize().mulScalar(this.axisRange),this.nubEntity.setLocalPosition(o)}this._updateAxisValuesFromNub()}},TouchJoystick.prototype._onPointerUp=function(t){if(this.playerMovement.onUp(),this._pointerDown&&this._pointerId==t.id){switch(this.nubEntity.setLocalPosition(0,0,0),this.hideOnRelease&&(this.baseEntity.enabled=!1),this.positionOnRelease){case"original":this.baseEntity.setLocalPosition(this._originalLocalPosition);break;case"lastStart":this.baseEntity.setLocalPosition(this._lastPointerDownPosition)}this._pointerId=-1,this._updateAxisValuesFromNub(),this._setButtonState(!1),this._pointerDown=!1}},TouchJoystick.prototype._updateAxisValuesFromNub=function(){const t=this.axisRange-this.axisDeadZone,e=this.nubEntity.getLocalPosition(),i=Math.sign(e.x),o=Math.sign(e.y),s=pc.math.clamp(Math.abs(e.x)-this.axisDeadZone,0,t)*i,n=pc.math.clamp(Math.abs(e.y)-this.axisDeadZone,0,t)*o;this._setAxisValues(s/t,n/t)},TouchJoystick.prototype._setAxisValues=function(t,e){window.touchJoypad&&(window.touchJoypad.sticks[this.identifier]={x:t,y:e}),this.axisX=t,this.axisY=e},TouchJoystick.prototype._setButtonState=function(t){window.touchJoypad&&(window.touchJoypad.buttonStates[this.identifier]=t?Date.now():null),this._state=t};var TouchButton=pc.createScript("touchButton");TouchButton.attributes.add("identifier",{type:"string",default:"button0",title:"Identifier",description:"A unique name for the button to refer to it by in the API. Will give a warning in browser tools if the name is not unique."}),TouchButton.attributes.add("vibration",{type:"number",default:0,title:"Vibration duration (ms)",description:"If the device supports vibration with 'Navigator.vibrate', it will vibrate for the duration set here on touch down.Set to 0 to disable."}),TouchButton.prototype.initialize=function(){window.touchJoypad&&void 0!==window.touchJoypad.buttonStates[this.identifier]?console.warn("Touch button identifier already used, please use another for Entity: "+this.entity.name):(this._canVibrate=!!navigator.vibrate,this._setState(!1),this.on("state",t=>{this._setEvents(t?"on":"off")}),this.on("destroy",()=>{window.touchJoypad&&(window.touchJoypad.buttonStates[this.identifier]=void 0)}),this._setEvents("on"))},TouchButton.prototype._setEvents=function(t){this._state=!1,this.entity.element[t]("mousedown",this._onMouseDown,this),this.entity.element[t]("mouseup",this._onMouseUp,this),this.app.touch&&(this.entity.element[t]("touchstart",this._onTouchDown,this),this.entity.element[t]("touchend",this._onTouchUp,this),this.entity.element[t]("touchcancel",this._onTouchUp,this))},TouchButton.prototype._onMouseDown=function(t){this._state||(this._onPointerDown(),t.stopPropagation())},TouchButton.prototype._onMouseUp=function(t){this._state&&(this._onPointerUp(),t.stopPropagation())},TouchButton.prototype._onTouchDown=function(t){this._state||(this._onPointerDown(),t.stopPropagation())},TouchButton.prototype._onTouchUp=function(t){this._state&&(this._onPointerUp(),t.stopPropagation()),t.event.preventDefault()},TouchButton.prototype._onPointerDown=function(){this._canVibrate&&0!==this.vibration&&navigator.vibrate(this.vibration),this._setState(!0)},TouchButton.prototype._onPointerUp=function(){this._setState(!1)},TouchButton.prototype._setState=function(t){window.touchJoypad&&(window.touchJoypad.buttonStates[this.identifier]=t?Date.now():null),this._state=t},function(){const t={},e={},i={buttons:{isPressed:function(t){return!!e[t]},wasPressed:function(i){const o=e[i],s=t[i];return void 0!==e[i]&&!s&&o},wasReleased:function(i){const o=e[i],s=t[i];return void 0!==e[i]&&s&&!o},wasTapped:function(e){return!!this.wasReleased(e)&&Date.now()-t[e]<=200}},sticks:{}};i.buttonStates=e,pc.Application.getApplication().on("update",()=>{for(const i of Object.keys(e)){const o=e[i];t[i]=o}}),window.touchJoypad=i}();var GameSystem=pc.createScript("gameSystem");GameSystem.attributes.add("levelColor",{type:"entity"}),GameSystem.attributes.add("levelGeneration",{type:"entity"}),GameSystem.attributes.add("playerMovement",{type:"entity"}),GameSystem.attributes.add("obstacleCollision",{type:"entity"}),GameSystem.attributes.add("crystals",{type:"entity"}),GameSystem.attributes.add("distancePlayer",{type:"entity"}),GameSystem.attributes.add("settings",{type:"entity"}),GameSystem.attributes.add("sound",{type:"entity"}),GameSystem.prototype.initialize=function(){this.famobiRequest()},GameSystem.prototype.famobiRequest=function(){let t=()=>{window.famobi?(this.levelColor.script.levelColorsControlSystem.init(),this.levelGeneration.script.levelGenerationSystem.init(),this.playerMovement.script.playerMovement.init(),this.obstacleCollision.script.obstacleCollissionSystem.init(),this.crystals.script.crystalsSystem.init(),this.distancePlayer.script.distancePlayerSystem.init(),this.settings.script.settingsSystem.init(),window.famobi.onOffsetChange(t=>{console.log("OFFSET: "+t)})):setTimeout(t,1e3)};t()},"undefined"!=typeof document&&(function(t,e){function i(t,e){for(var i in e)try{t.style[i]=e[i]}catch(t){}return t}function o(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function s(t,e){if("array"!==o(e))return-1;if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function n(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(o(e[1][t])){case"object":e[0][t]=n({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?n.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function a(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function r(t,e,i,o){t.addEventListener?t[o?"removeEventListener":"addEventListener"](e,i,!1):t.attachEvent&&t[o?"detachEvent":"attachEvent"]("on"+e,i)}function l(t,e){function p(t,e,i,o){return _[0|t][Math.round(Math.min((e-i)/(o-i)*R,R))]}function d(){A.legend.fps!==N&&(A.legend.fps=N,A.legend[f]=N?"FPS":"ms"),M=N?D.fps:D.duration,A.count[f]=999<M?"999+":M.toFixed(99<M?0:B.decimals)}function m(){for(P=h(),J<P-B.threshold&&(D.fps-=D.fps/Math.max(1,60*B.smoothing/B.interval),D.duration=1e3/D.fps),T=B.history;T--;)j[T]=0===T?D.fps:j[T-1],V[T]=0===T?D.duration:V[T-1];if(d(),B.heat){if(I.length)for(T=I.length;T--;)I[T].el.style[w[I[T].name].heatOn]=N?p(w[I[T].name].heatmap,D.fps,0,B.maxFps):p(w[I[T].name].heatmap,D.duration,B.threshold,0);if(A.graph&&w.column.heatOn)for(T=O.length;T--;)O[T].style[w.column.heatOn]=N?p(w.column.heatmap,j[T],0,B.maxFps):p(w.column.heatmap,V[T],B.threshold,0)}if(A.graph)for(E=0;E<B.history;E++)O[E].style.height=(N?j[E]?Math.round(k/B.maxFps*Math.min(j[E],B.maxFps)):0:V[E]?Math.round(k/B.threshold*Math.min(V[E],B.threshold)):0)+"px"}function y(){20>B.interval?(x=u(y),m()):(x=setTimeout(y,B.interval),L=u(m))}function v(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),D.toggle()}function C(){B.toggleOn&&r(A.container,B.toggleOn,v,1),t.removeChild(A.container)}function S(){if(A.container&&C(),w=l.theme[B.theme],!(_=w.compiledHeatmaps||[]).length&&w.heatmaps.length){for(E=0;E<w.heatmaps.length;E++)for(_[E]=[],T=0;T<=R;T++){var e,o=_[E],s=T;e=.33/R*T;var n=w.heatmaps[E].saturation,h=w.heatmaps[E].lightness,p=void 0,c=void 0,u=void 0,m=u=void 0,y=p=c=void 0;y=void 0,0==(u=.5>=h?h*(1+n):h+n-h*n)?e="#000":(c=(u-(m=2*h-u))/u,y=(e*=6)-(p=Math.floor(e)),y*=u*c,0===p||6===p?(p=u,c=m+y,u=m):1===p?(p=u-y,c=u,u=m):2===p?(p=m,c=u,u=m+y):3===p?(p=m,c=u-y):4===p?(p=m+y,c=m):(p=u,c=m,u-=y),e="#"+a(p)+a(c)+a(u)),o[s]=e}w.compiledHeatmaps=_}for(var f in A.container=i(document.createElement("div"),w.container),A.count=A.container.appendChild(i(document.createElement("div"),w.count)),A.legend=A.container.appendChild(i(document.createElement("div"),w.legend)),A.graph=B.graph?A.container.appendChild(i(document.createElement("div"),w.graph)):0,I.length=0,A)A[f]&&w[f].heatOn&&I.push({name:f,el:A[f]});if(O.length=0,A.graph)for(A.graph.style.width=B.history*w.column.width+(B.history-1)*w.column.spacing+"px",T=0;T<B.history;T++)O[T]=A.graph.appendChild(i(document.createElement("div"),w.column)),O[T].style.position="absolute",O[T].style.bottom=0,O[T].style.right=T*w.column.width+T*w.column.spacing+"px",O[T].style.width=w.column.width+"px",O[T].style.height="0px";i(A.container,B),d(),t.appendChild(A.container),A.graph&&(k=A.graph.clientHeight),B.toggleOn&&("click"===B.toggleOn&&(A.container.style.cursor="pointer"),r(A.container,B.toggleOn,v))}"object"===o(t)&&void 0===t.nodeType&&(e=t,t=document.body),t||(t=document.body);var w,_,P,x,L,k,M,T,E,D=this,B=n({},l.defaults,e||{}),A={},O=[],R=100,I=[],F=B.threshold,z=0,J=h()-F,j=[],V=[],N="fps"===B.show;D.options=B,D.fps=0,D.duration=0,D.isPaused=0,D.tickStart=function(){z=h()},D.tick=function(){P=h(),F+=(P-J-F)/B.smoothing,D.fps=1e3/F,D.duration=z<J?F:P-z,J=P},D.pause=function(){return x&&(D.isPaused=1,clearTimeout(x),c(x),c(L),x=L=0),D},D.resume=function(){return x||(D.isPaused=0,y()),D},D.set=function(t,e){return B[t]=e,N="fps"===B.show,-1!==s(t,g)&&S(),-1!==s(t,b)&&i(A.container,B),D},D.showDuration=function(){return D.set("show","ms"),D},D.showFps=function(){return D.set("show","fps"),D},D.toggle=function(){return D.set("show",N?"ms":"fps"),D},D.hide=function(){return D.pause(),A.container.style.display="none",D},D.show=function(){return D.resume(),A.container.style.display="block",D},D.destroy=function(){D.pause(),C(),D.tick=D.tickStart=function(){}},S(),y()}var h,p=t.performance;h=p&&(p.now||p.webkitNow)?p[p.now?"now":"webkitNow"].bind(p):function(){return+new Date};for(var c=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,u=t.requestAnimationFrame,d=0,m=0,y=(p=["moz","webkit","o"]).length;m<y&&!c;++m)u=(c=t[p[m]+"CancelAnimationFrame"]||t[p[m]+"CancelRequestAnimationFrame"])&&t[p[m]+"RequestAnimationFrame"];c||(u=function(e){var i=h(),o=Math.max(0,16-(i-d));return d=i+o,t.setTimeout(function(){e(i+o)},o)},c=function(t){clearTimeout(t)});var f="string"===o(document.createElement("div").textContent)?"textContent":"innerText";l.extend=n,window.FPSMeter=l,l.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",
margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var g=["toggleOn","theme","heat","graph","history"],b="position zIndex left top right bottom margin".split(" ")}(window),function(t,e){e.theme={};var i=e.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};e.theme.dark=e.extend({},i,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),e.theme.light=e.extend({},i,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),e.theme.colorful=e.extend({},i,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),e.theme.transparent=e.extend({},i,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter));var Fps=pc.createScript("fps");if(Fps.prototype.initialize=function(){this.fps=new FPSMeter({heat:!0,graph:!0})},Fps.prototype.update=function(t){this.fps.tick()},"launch.playcanvas.com"===window.location.hostname){window.famobi_config={features:{highscores:0,rewarded:0,forced_mode:0,skip_title:0,external_start:0,external_mute:0,ads:1},game_i18n:{default:{}},game_info:{client_version:"0.10",api_version:"0.0",forced_mode:{state:{field_size_x:{min:1,max:15,type:"number"},field_size_y:{min:1,max:15,type:"number"},field_size_z:{min:1,max:15,type:"number"},win_row_length:{min:2,max:15,type:"number"}},override:{}},track_stats:{block_placed:{description:"Called every time a white block is placed.",params:{color:{type:"string",values:["black","white"]}}},row_length:{description:"Length of the users longest row",type:"number"}}}},document.body.innerHTML;let t=document.getElementsByTagName("script");console.log(t),window.famobi_gameID="{FAMOBI_GAMEID}",window.famobi_gameJS=[function(){}],window.famobi_pregameJS=window.famobi_pregameJS||[],window.famobi_pregameJS.push(new Promise(function(t,e){window.famobi.config?e("config already present"):window.addEventListener("famobiJsonLoaded",t)}));for(let e=0,i=t.length;e<i;e++){let i=t[e];i&&i.getAttribute("src")&&(window.famobi_gameJS.push(i.getAttribute("src")),console.log("removing script tag with src: ",i.getAttribute("src")),i.parentNode.removeChild(i))}console.log(famobi_gameJS),function(t,e,i,o){i=t.createElement("script"),o=t.getElementsByTagName("script")[0],i.src="https://games.cdn.famobi.com/html5games/gameapi/v1.js?e="+encodeURIComponent(t.location.href),o.parentNode.insertBefore(i,o)}(document)}else console.warn(window.location.hostname);if("launch.playcanvas.com"===window.location.hostname){let t=window.location.href;t.includes("play.staging.gc.famobi.com")||(window.location.href=`https://play.staging.gc.famobi.com/playcanvas/?overwrite_html5_link=${t}/A-PLAYCANVAS-DEV&aid=A-PLAYCANVAS-DEV`)}pc.script.createLoadingScreen(function(t){var e,i,o,s,n,a=void 0,r=document.createElement("canvas"),l=0,h=function(t){return t-=90,{x:(r.width/2-i)*Math.cos(t*Math.PI/180)+r.width/2,y:(r.width/2-i)*Math.sin(t*Math.PI/180)+r.width/2}};s="\n            .fam_bgr {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            padding: 0;\n            border: 0;\n            background-color: #fff;\n            }\n\n            #progress_bar {\n            position: absolute;\n            margin-top: 2rem;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%,-50%);\n            z-index: 0;\n            }\n\n            .splash_wrapper {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%,-50%);\n            }\n\n            .logo_wrapper {\n            width: 12rem;\n            height: 18rem;\n            margin-left: 1.813rem;\n            perspective: 5.625rem;\n            filter: drop-shadow(0.625rem 0.625rem 0.5rem #a3a3a3);\n            }\n\n            .title_wrapper {\n            position: absolute;\n            width: 15.625rem;\n            height: 4.375rem;\n            z-index: 1;\n            }\n\n            span {\n            margin: 0.188rem;\n            position: absolute;\n            }  \n\n            .row_1 {\n            top: 0;\n            }\n\n            .row_2 {\n            top: 6rem;\n            }\n\n            .row_3 {\n            top: 12rem;\n            }\n\n            .col_1 {\n            left: 0;\n            }\n\n            .col_2 {\n            left: 6rem;\n            }\n\n            .order_0 {\n            z-index: 3;\n            }\n\n            .order_1 {\n            z-index: 2;\n            }\n\n            .order_2 {\n            z-index: 1;\n            }\n\n            .square {\n            width: 5.625rem;\n            height: 5.625rem;\n            }\n\n            .triangle {\n            width: 0;\n            height: 0;\n            border-style: solid;\n            border-width: 2.813rem 0 2.813rem 3.75rem;\n            border-color: transparent transparent transparent #F07E00;\n            }\n\n            .blue {\n            background-color: #0194C6;\n            }\n\n            .orange {\n            background-color: #F07E00;\n            }\n\n            .grey {\n            background-color: #3D3D3B;\n            }\n\n            .ani_shiftright {\n            opacity: 0;\n            animation-name: shift-right;\n            animation-duration: 0.5s; \n            animation-timing-function: ease-out; \n            animation-fill-mode: forwards;\n            }\n\n            .ani_shiftdown {\n            opacity: 0;\n            animation-name: shift-down;\n            animation-duration: 0.5s;\n            animation-timing-function: ease-out; \n            animation-fill-mode: forwards;\n            }\n\n            .ani_title {\n            opacity: 0;\n            animation-name: title;\n            animation-duration: 1.7s;\n            animation-delay: 1.5s;\n            animation-timing-function: ease-out; \n            animation-fill-mode: forwards;\n            }\n\n            .ani_delay {\n            animation-duration: 0.5s;\n            animation-delay: 0.5s;\n            }\n\n            .ani_delay_long {\n            animation-duration: 0.5s;\n            animation-delay: 0.7s;\n            }\n\n            .ani_speed_fast {\n            animation-duration: 0.2s;\n            }\n\n            .ani_speed_medium {\n            animation-duration: 0.5s;\n            }\n\n            .ani_speed_slow {\n            animation-duration: 0.7s;\n            }\n\n            @keyframes shift-right { \n            0% {\n                opacity: 0;\n                margin-left: -5.625rem;\n            }\n            100% {\n                opacity: 1;\n                margin-left: 0.188rem;\n            }\n            }\n\n            @keyframes shift-down { \n            0% {\n                opacity: 0;\n                margin-top: -5.625rem;\n            }\n            100% {\n                opacity: 1;\n                margin-top: 0.188rem;\n            }\n            }\n\n            @keyframes title { \n            0% {\n                opacity: 0;\n                margin-top: -5.625rem;\n            }\n            100% {\n                opacity: 1;\n                margin-top: 0.188rem;\n            }\n            }\n        ",(n=document.createElement("style")).type="text/css",n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s)),document.head.appendChild(n),function(){var t=document.createElement("div");t.id="application-splash-wrapper",t.innerHTML='\n            <div class="fam_bgr">\n                <div class="splash_wrapper">\n                    <div class="logo_wrapper">\n                    <span class="square blue row_1 col_1 order_0"></span>\n                    <span class="square blue row_1 col_2  order_1 ani_shiftright"></span>\n                    <span class="square orange row_2 col_1 order_1 ani_shiftdown"></span>\n                    <span class="triangle row_2 col_2 order_1 ani_shiftright ani_delay_long ani_speed_fast"></span>\n                    <span class="square grey row_3 col_1 order_2 ani_shiftdown ani_delay_long ani_speed_fast"></span>\n                    </div>\n                    <div class=\'title_wrapper ani_title\'>\n                    <svg width="100%" height="100%" viewBox="0 0 125 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                        <g transform="matrix(1,0,0,1,-52.25,-46.5)">\n                            <path d="M65.7,65.4L58,65.4L58,77.6L53.3,77.6L53.3,50.6L68.7,50.6L68.7,54.7L58,54.7L58,61.2L65.7,61.2L65.7,65.4Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M82,77.6L81.7,75L81.5,75C80.8,75.9 79.8,76.7 78.5,77.2C77.2,77.8 75.9,78 74.6,78C72.9,78 71.5,77.5 70.6,76.5C69.6,75.5 69.1,74.2 69.1,72.6C69.1,71.5 69.3,70.5 69.8,69.6C70.3,68.7 71,68 71.9,67.4C72.8,66.8 73.9,66.3 75.1,66C76.4,65.7 77.8,65.5 79.3,65.5L81.1,65.5L81.1,64.9C81.1,63.8 80.8,63.1 80.1,62.6C79.4,62.1 78.3,61.9 76.8,61.9C74.8,61.9 73,62.3 71.4,63.2L70.5,59.8C72.3,58.7 74.5,58.2 77.1,58.2C79.8,58.2 81.9,58.8 83.3,59.9C84,60.4 84.5,61.1 84.9,61.9C85.3,62.7 85.5,63.7 85.5,64.8L85.5,77.6L82,77.6ZM76.4,74.5C77.3,74.5 78.1,74.3 79,73.9C79.9,73.5 80.6,72.9 81.1,72.2L81.1,68.5L80.3,68.5C78.1,68.5 76.4,68.8 75.4,69.4C74.4,70 73.9,70.9 73.9,72.1C74,73.7 74.8,74.5 76.4,74.5Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M103.2,77.6L103.2,65.2C103.2,63 102.3,61.9 100.5,61.9C100.1,61.9 99.6,62 99.1,62.1C98.6,62.3 98.1,62.5 97.6,62.8C97.1,63.1 96.7,63.5 96.3,64C95.9,64.5 95.6,65 95.5,65.6L95.5,77.6L91,77.6L91,58.8L94.5,58.8L94.7,61.6L94.9,61.6C95.4,60.5 96.3,59.6 97.5,59C98.7,58.4 99.9,58.2 101.3,58.2C102.6,58.2 103.7,58.5 104.8,59C105.8,59.5 106.6,60.4 107.1,61.6C107.6,60.5 108.5,59.6 109.7,59.1C110.9,58.5 112.1,58.3 113.5,58.3C114.4,58.3 115.2,58.4 116,58.6C116.8,58.8 117.5,59.2 118,59.7C118.6,60.2 119,60.9 119.4,61.7C119.7,62.5 119.9,63.6 119.9,64.8L119.9,77.6L115.4,77.6L115.4,65.2C115.4,63 114.5,61.9 112.7,61.9C112.3,61.9 111.8,62 111.3,62.1C110.8,62.3 110.3,62.5 109.8,62.8C109.3,63.1 108.9,63.5 108.5,64C108.1,64.5 107.8,65 107.7,65.6L107.7,77.6L103.2,77.6Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M133.5,58.2C135.2,58.2 136.6,58.5 137.8,59C139,59.6 140,60.3 140.8,61.2C141.6,62.1 142.1,63.2 142.5,64.4C142.9,65.6 143.1,66.9 143.1,68.2C143.1,69.5 142.9,70.8 142.5,72C142.1,73.2 141.6,74.2 140.8,75.1C140,76 139,76.7 137.9,77.2C136.7,77.7 135.3,78 133.7,78C132,78 130.6,77.7 129.4,77.2C128.2,76.7 127.2,75.9 126.4,75C125.6,74.1 125,73 124.6,71.8C124.2,70.6 124,69.3 124,68C124,66.7 124.2,65.4 124.6,64.2C125,63 125.6,62 126.3,61C127.1,60.1 128.1,59.4 129.3,58.8C130.5,58.5 131.9,58.2 133.5,58.2ZM133.6,74.7C134.4,74.7 135.1,74.5 135.7,74.2C136.3,73.9 136.8,73.4 137.2,72.8C137.6,72.2 137.9,71.5 138,70.8C138.2,70 138.3,69.2 138.3,68.4C138.3,67.5 138.2,66.7 138,65.9C137.8,65.1 137.5,64.4 137.1,63.8C136.7,63.2 136.2,62.7 135.6,62.3C135,61.9 134.3,61.7 133.4,61.7C132.6,61.7 131.9,61.9 131.4,62.2C130.8,62.5 130.4,63 130,63.6C129.6,64.2 129.4,64.8 129.2,65.6C129,66.4 128.9,67.2 128.9,68C128.9,68.9 129,69.7 129.2,70.5C129.4,71.3 129.7,72 130.1,72.6C130.5,73.2 131,73.7 131.6,74.1C132.1,74.5 132.8,74.7 133.6,74.7Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M157.9,78.1C156.4,78.1 155.2,77.8 154.2,77.2C153.2,76.6 152.4,75.9 151.6,75L151.4,75L151.1,77.6L147.5,77.6L147.5,47.4L152,47.4L152,60.7C152.6,59.9 153.5,59.3 154.5,58.9C155.5,58.5 156.7,58.2 158,58.2C159.4,58.2 160.7,58.5 161.7,59C162.8,59.5 163.6,60.3 164.4,61.2C165.1,62.1 165.6,63.1 166,64.3C166.3,65.5 166.5,66.7 166.5,68C166.5,69.4 166.3,70.8 165.9,72C165.5,73.2 164.9,74.3 164.2,75.2C163.5,76.1 162.5,76.8 161.5,77.3C160.4,77.8 159.2,78.1 157.9,78.1ZM157.3,74.7C158.1,74.7 158.8,74.5 159.4,74.1C160,73.7 160.5,73.2 160.9,72.6C161.3,72 161.6,71.3 161.8,70.5C162,69.7 162.1,68.9 162.1,68.1C162.1,67.3 162,66.4 161.8,65.7C161.6,64.9 161.3,64.2 160.9,63.6C160.5,63 159.9,62.5 159.3,62.2C158.7,61.9 157.9,61.7 157.1,61.7C156.3,61.7 155.5,61.9 154.7,62.3C153.9,62.7 153,63.4 152.2,64.4L152.2,72.2C152.5,72.6 152.9,73 153.3,73.3C153.7,73.6 154.2,73.9 154.7,74.1C155.2,74.3 155.7,74.5 156.2,74.6C156.7,74.7 156.9,74.7 157.3,74.7Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                            <path d="M170.4,52.8C170.4,52.4 170.5,52.1 170.6,51.7C170.7,51.3 171,51 171.2,50.7C171.5,50.4 171.8,50.2 172.1,50C172.4,49.8 172.8,49.8 173.2,49.8C173.6,49.8 173.9,49.9 174.3,50C174.7,50.2 175,50.4 175.3,50.7C175.6,51 175.8,51.3 176,51.7C176.2,52.1 176.2,52.4 176.2,52.8C176.2,53.2 176.1,53.6 176,53.9C175.8,54.2 175.6,54.5 175.3,54.8C175,55.1 174.7,55.3 174.3,55.4C173.9,55.5 173.6,55.6 173.2,55.6C172.4,55.6 171.7,55.3 171.2,54.7C170.6,54.3 170.4,53.6 170.4,52.8ZM175.5,77.6L171,77.6L171,58.8L175.5,58.8L175.5,77.6Z" style="fill:rgb(51,51,51);fill-rule:nonzero;"/>\n                        </g>\n                    </svg>\n                    </div>\n                    <div id="progress_bar"></div>\n                </div>\n            </div>\n        ',document.body.appendChild(t);var s=document.getElementById("progress_bar"),n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;r.width=n/3,r.height=r.width,e=r.getContext("2d"),i=r.width/10,(o=e.createLinearGradient(0,0,r.width,0)).addColorStop("0","#cce7ff"),o.addColorStop("0.5","#005095"),o.addColorStop("1","#cce7ff"),e.strokeStyle=o,s.appendChild(r)}(),t.on("preload:end",function(){t.off("preload:progress")}),t.on("preload:progress",function(t){t=Math.min(1,Math.max(0,t)),window&&window.famobi&&window.famobi.setPreloadProgress&&(window.famobi.setPreloadProgress(100*t),1===t&&window.famobi.gameReady()),function(t){if(!e)return;a&&clearInterval(a);let i=(t-l)/10;a=setInterval(()=>{l<t?l+=i:clearInterval(a);var s=3.6*l;e.clearRect(0,0,r.width,r.height),e.beginPath(),e.lineWidth=10;var n=h(0);e.moveTo(n.x,n.y),e.strokeStyle=o;for(var p=0;p<s;p++){var c=h(p);e.lineTo(c.x,c.y)}e.stroke(),e.beginPath(),e.strokeStyle="#c9c9c9";for(var u=s;u<360;u++){var d=h(u);e.lineTo(d.x,d.y)}e.stroke()},50)}(100*t)}),t.on("start",function(){var t=document.getElementById("application-splash-wrapper");t.parentElement.removeChild(t)})});var FamobiSafeArea=pc.createScript("famobiSafeArea");FamobiSafeArea.attributes.add("forceBodyBackgroundColor",{type:"boolean",default:!0,title:"Change <body> background",default:!0}),FamobiSafeArea.attributes.add("bodyBackgroundColor",{type:"rgba",title:"Body Background Color",description:"Background color of body element (where the banner should be displayed). Make sure the checkbox above is checked!",default:[0,0,0,1]}),FamobiSafeArea.attributes.add("debugConfig",{type:"json",title:"Debug / Testing Mode",description:"Force safe areas to be applied to the UI. Useful testing layouts without a device.",schema:[{name:"enabled",type:"boolean",default:!1},{name:"top",type:"number",default:0},{name:"bottom",type:"number",default:0},{name:"left",type:"number",default:0},{name:"right",type:"number",default:0}]}),FamobiSafeArea.prototype.initialize=function(){this.app.graphicsDevice.on("resizecanvas",this._onCanvasResize,this),this.on("attr:debugConfig",function(t,e){this._updateCanvasSizeAndPosition()},this),this.on("attr:bodyBackgroundColor",function(t,e){this._backgroundColorUpdate()},this),this.on("destroy",function(){this.app.graphicsDevice.off("resizecanvas",this._onCanvasResize,this)},this),window.famobi&&"function"==typeof window.famobi.onOffsetChange&&window.famobi.onOffsetChange(t=>this._onCanvasResize()),window.visualViewport?(this.useVisualViewport=!0,window.visualViewport.addEventListener("resize",this._onCanvasResize.bind(this))):(this.useVisualViewport=!1,window.addEventListener("resize",this._onCanvasResize.bind(this),!0)),this._onCanvasResize()},FamobiSafeArea.prototype._onCanvasResize=function(){this._updateCanvasSizeAndPosition(),(pc.platform.ios||pc.platform.mobile)&&setTimeout(()=>this._updateCanvasSizeAndPosition(),1500)},FamobiSafeArea.prototype._updateCanvasSizeAndPosition=function(){let t=0,e=0,i=0,o=0;if(this.debugConfig.enabled)t=this.debugConfig.top,e=this.debugConfig.bottom,i=this.debugConfig.left,o=this.debugConfig.right;else{if(!window.famobi||!window.famobi.getOffsets)return console.warn("FamobiSafeArea: window.famobi.getOffsets is not defined!");const s=window.famobi.getOffsets();t=s.top,e=s.bottom,i=s.left,o=s.right}const s=window.innerHeight,n=window.innerWidth-i-o,a=s-t-e;this.app.setCanvasResolution(pc.RESOLUTION_FIXED,n,a),this.app.graphicsDevice.canvas.style.width=n+"px",this.app.graphicsDevice.canvas.style.height=a+"px",this.app.graphicsDevice.canvas.style.left=i+"px",this.app.graphicsDevice.canvas.style.right=o+"px",this.app.graphicsDevice.canvas.style.top=t+"px",this.app.graphicsDevice.canvas.style.bottom=e+"px",this.debugConfig.enabled&&console.log(`Canvas size set to ${n}x${a} (window ${window.innerWidth}x${window.innerHeight})`),this.app.fire("famobi:resizeCanvas",n,a),this._backgroundColorUpdate()},FamobiSafeArea.prototype._backgroundColorUpdate=function(){if(!this.forceBodyBackgroundColor)return;const t=this.app.graphicsDevice.canvas.parentElement;t&&(t.style.backgroundColor=this.bodyBackgroundColor.toString())},FamobiSafeArea.prototype.update=function(t){},pc.CameraComponent.prototype.screenToWorld=function(t,e,i,o){const s=this.system.app.graphicsDevice,n=s.width/s.maxPixelRatio,a=s.height/s.maxPixelRatio;return this._camera.screenToWorld(t,e,i,n,a,o)},pc.CameraComponent.prototype.worldToScreen=function(t,e){const i=this.system.app.graphicsDevice,o=i.width/i.maxPixelRatio,s=i.height/i.maxPixelRatio;return this._camera.worldToScreen(t,o,s,e)};