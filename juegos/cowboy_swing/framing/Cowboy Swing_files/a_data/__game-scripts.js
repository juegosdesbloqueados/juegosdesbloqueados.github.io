function getRandom(t,e){return Math.floor(Math.random()*(e-t)+t)}function getPlayerData(){window.famobi?window.famobi.localStorage.getItem(versionName)?playerData=JSON.parse(window.famobi.localStorage.getItem(versionName)):(playerData=new PlayerData,updatePlayerData()):localStorage.getItem(versionName)?playerData=JSON.parse(localStorage.getItem(versionName)):(playerData=new PlayerData,updatePlayerData())}function updatePlayerData(){window.famobi?(playerData.mute?window.famobi.localStorage.setItem("muted",!0):window.famobi.localStorage.removeItem("muted"),window.famobi.localStorage.setItem(versionName,JSON.stringify(playerData))):localStorage.setItem(versionName,JSON.stringify(playerData))}function loadScene(t,e,i,n){var a=pc.Application.getApplication(),o=a.scenes.find(t);if(o){var s=o.loaded;a.scenes.loadSceneData(o,function(t,o){if(t)i&&i.call(n,t);else{for(var r=null,l=a.root.children;l.length>0;)l[0].destroy();e.settings&&a.scenes.loadSceneSettings(o,function(t){t&&i&&i.call(n,t)}),e.hierarchy&&a.scenes.loadSceneHierarchy(o,function(t,e){t?i&&i(t):r=e}),s||a.scenes.unloadSceneData(o),i&&i.call(n,null,r)}})}else i&&i.call(n,"Scene not found: "+t)}function fillEntityPool(){for(;uniqueArr.length<4;){let t=Math.floor(4*Math.random());-1===uniqueArr.indexOf(t)&&uniqueArr.push(t)}mapTemplates.startingMap.forEach((t,e)=>{var i=t.resource.instantiate();i.name=templates.startingMap+(e+1),i.setPosition(tempVec.set(-420,0,0)),i.enabled=!1,entityPool.startingMaps[e+1].push(i),app.root.addChild(i)}),mapTemplates.createdMap.forEach((t,e)=>{var i=t.resource.instantiate();i.name=templates.createdMap+(e+1),i.setPosition(tempVec.set(-420,0,0)),i.enabled=!1,entityPool.createdMaps[e].push(i),app.root.addChild(i)})}function getRandomStartedMap(){randomStartedMapIndex=getRandom(1,startedMapCount),_startedMap=entityPool.startingMaps[`${randomStartedMapIndex}`].pop(),_startedMap.setLocalPosition(tempVec.set(0,0,0)),_startedMap.enabled=!0,entityPool.inGameStartedMap.push(_startedMap),lastMapPointX=_startedMap.findByName("newMapPoint").getPosition().x;for(let t=0;t<4;t++){let e=entityPool.createdMaps[`${uniqueArr[t]}`].pop();e.setPosition(tempVec.set(lastMapPointX,0,0)),e.enabled=!0,3===t?e.findByName("mapGenerateCol").collision.once("triggerenter",Trigger.instance.onTriggerEnter,this):e.findByName("mapGenerateCol").collision.off(),lastMapPointX=e.findByName("newMapPoint").getPosition().x,entityPool.inGameMaps.push(e)}}function returnAllMapToPool_StartNewGame(){for(uniqueArr=[],triggerCount=0,lastMapPointX=0,entityPool.startingMaps[_startedMap.name[_startedMap.name.length-1]].push(_startedMap),_startedMap.setPosition(tempVec.set(-420,0,0)),_startedMap.enabled=!1,entityPool.inGameStartedMap=[],entityPool.inGameMaps.forEach(t=>{entityPool.createdMaps[t.name[t.name.length-1]-1].push(t),t.setPosition(tempVec.set(-420,0,0)),t.enabled=!1}),entityPool.inGameMaps=[];uniqueArr.length<4;){let t=Math.floor(4*Math.random());-1===uniqueArr.indexOf(t)&&uniqueArr.push(t)}}function replaceInGameMap(){replacedCount+=1;let t=entityPool.inGameMaps.shift();t.find("name","Platform").forEach(t=>{t.enabled||(t.enabled=!0)}),obstacles.forEach(t=>{t.enabled||(t.enabled=!0)}),t.setPosition(tempVec.set(lastMapPointX,0,0)),t.findByName("mapGenerateCol").collision.once("triggerenter",Trigger.instance.onTriggerEnter,this),lastMapPointX=t.findByName("newMapPoint").getPosition().x,entityPool.inGameMaps.push(t),2===replacedCount&&(replaceBackground(),replacedCount=0)}function replaceBackground(){bGroundEndPoint=AppRoot.instance.backgrounds[AppRoot.instance.backgrounds.length-1].getPosition().x;let t=AppRoot.instance.backgrounds.shift();if(t.setPosition(tempVec.set(bGroundEndPoint+90,18.143,0)),AppRoot.instance.backgrounds.push(t),Math.abs(Player.instance.entity.getPosition().x-bGroundEndPoint)<100){bGroundEndPoint=AppRoot.instance.backgrounds[AppRoot.instance.backgrounds.length-1].getPosition().x;let t=AppRoot.instance.backgrounds.shift();t.setPosition(tempVec.set(bGroundEndPoint+90,18.143,0)),AppRoot.instance.backgrounds.push(t)}}function renderLoop(t){void 0===previousTimeStamp1&&(previousTimeStamp1=t),t-previousTimeStamp1>1e3/15&&gameStarted&&(DistanceController.instance.setDistanceText(),HighScoreController.instance.updateHighScore(),previousTimeStamp1=t),window.requestAnimationFrame(renderLoop)}function playSound(t){if(!playerData.mute)switch(t){case"collect":sound.sound.play("collect");break;case"hook":sound.sound.play("hook");break;case"gameover":sound.sound.play("gameover");break;case"platformJump":sound.sound.play("platformJump");break;case"failzone":sound.sound.play("failzone")}}function stopSound(t){if(!playerData.mute)switch(t){case"collect":sound.sound.stop("collect");break;case"hook":sound.sound.stop("hook");break;case"gameover":sound.sound.stop("gameover");break;case"failzone":sound.sound.stop("failzone")}}const app=pc.Application.getApplication();let playerData,preMap,adsRemainTextValue,desktopDevice=!1,gameStarted=!1,changeColor=!0,preScore=0,score=0,preScore2=0,replacedCount=0,startedPlatformInitPos=7,sumDistanceOfpreMaps=0,reviveState=!1,gameOvercount=0,gap=15,runOneTime=!0,failZoneDeath=!1,killedFromFailZone=!1,enableProgressBar=!1,failZoneStop=!1,stopSpriteChange=!1,pause=!1,showADSPanel=!1,canvas=document.getElementById("application-canvas"),getANumberBetween=(t,e)=>Math.floor(Math.random()*(e-t))+t,pillowPointScore=3,adsPassCheck=!1;const adsType={PreRoll:1,MidRoll:2,Rewarded:3};var adsShowType=void 0,adsApproved=!1;const templates={startingMap:"StartingMap_",createdMap:"createdMap_"},mapTemplates={startingMap:[app.assets.get("122999847"),app.assets.get("122999841"),app.assets.get("122999849"),app.assets.get("122999838")],createdMap:[app.assets.get("122999846"),app.assets.get("122999843"),app.assets.get("122999842"),app.assets.get("122999844")]};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};let versionName="stickmanHangingv1.3.13:playerData";class PlayerData{constructor(){this.highScore=0,this.bestAirTime=0,this.newPlayer=!0,this.mute=!1}}getPlayerData();var AppRoot=pc.createScript("appRoot");app.timeScale=1.2,desktopDevice=!pc.platform.mobile,AppRoot.prototype.initialize=function(){AppRoot.instance=this,this.dummy=!1,this.camera=this.app.root.findByName("Camera"),this.player=this.app.root.findByName("Player"),this.failZone=this.app.root.findByName("FailZone"),this.distanceText=this.app.root.findByName("DistanceText"),this.startedPlatform=this.app.root.findByName("StartedPlatform"),this.reviveUi=this.app.root.findByName("ReviveUI"),this.backgrounds=this.app.root.findByName("Backgrounds").children,this.player.enabled=!1,playerData.mute?(this.entity.findByName("mute").enabled=!0,this.entity.findByName("unmute").enabled=!1):(this.entity.findByName("mute").enabled=!1,this.entity.findByName("unmute").enabled=!0)},AppRoot.prototype.pauseGame=function(){window.famobi_analytics.trackEvent("EVENT_PAUSE"),playerData.mute?AppRoot.instance.dummy=!1:playerData.mute=!1,pause=!0,app.timeScale=0},AppRoot.prototype.resumeGame=function(){window.famobi_analytics.trackEvent("EVENT_RESUME"),AppRoot.instance.dummy||(AppRoot.instance.dummy=!0),pause=!1,app.timeScale=1.2},AppRoot.prototype.update=function(){window.onfocus=function(){window.dirtyPause||AppRoot.instance.resumeGame()},window.onblur=function(){AppRoot.instance.pauseGame()}},window.famobi_onPauseRequested=function(){AppRoot.instance.pauseGame()},window.famobi_onResumeRequested=function(){AppRoot.instance.resumeGame()},window.famobi.onRequest("pauseGameplay",function(){window.dirtyPause=!0,AppRoot.instance.pauseGame()}),window.famobi.onRequest("resumeGameplay",function(){AppRoot.instance.resumeGame(),window.dirtyPause=!1}),window.famobi.onRequest("enableAudio",function(){window.dirtyMute=!1,AppRoot.instance.entity.findByName("mute").enabled=!1,AppRoot.instance.entity.findByName("unmute").enabled=!0,playerData.mute=!1}),window.famobi.onRequest("disableAudio",function(){window.dirtyMute=!0,AppRoot.instance.entity.findByName("mute").enabled=!0,AppRoot.instance.entity.findByName("unmute").enabled=!1,playerData.mute=!0}),Player=pc.createScript("player");var start=void 0,end=void 0;let tempVec=new pc.Vec3,obstacles=[];const appCanvas=app.graphicsDevice.canvas,ctx=appCanvas.getContext("webgl2");let sleep=t=>new Promise(e=>setTimeout(e,t));Player.prototype.initialize=function(){Player.instance=this;var t=this;this.lineLayer=app.scene.layers.getLayerByName("Line"),this.player_ball_form=this.entity.findByName("Spr_Character_Ball"),this.player_stickman_form_front=this.entity.findByName("Stickman"),this.player_stickman_speed_form=this.entity.findByName("StickmanSpeed"),this.player_stickman_legsUp_form=this.entity.findByName("StickmanLegsUp"),adsRemainTextValue=app.root.findByName("circleRemainTimer"),this.camera=app.root.findByName("Camera"),this.savedPoint=0,this.firstInput=!1,this.firstTouch=!1,this.failZonecount=0,this.startUpdateFun=!1,window.dirty=this,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this)),this.app.mouse&&(this.app.mouse.disableContextMenu(),this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_SELECTEND,this.onMouseUp,this),canvas.addEventListener("mouseleave",function(e){void 0!==t.userEvent&&t.onMouseUp(t.userEvent)},!1)),this.onClicked=!1,this.clickedDurationTime=0,this.app.on("destroy",function(){this.app.touch&&(this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchEnd,this)),this.app.mouse&&(this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onMouseUp,this))},this),this.entity.collision.on("collisionstart",this.onCollisionStart,this),this.entity.collision.on("collisionend",this.onCollisionEnd,this),this.playerOnPlatform=!1,this.app.on("isHanging",function(){return t.isHanging},this),this.setObstaclesCollisionOff(),this.maxHoldLimit=30,this.holded=!1,this.minBottomLimit=-13,this.platformJumpPower=3,this.impulsePowerValue=0,this.valX=0,this.valY=0,this.distanceScore=0,this.isHanging=!1,this.counter=0,this.platformBouncingCoefficient=.8,this.charUpDir=1,this.drawBool=!1,this.playerFirstPosBool=!1,this.prevClosestObstacles=[],this.deathPercent=app.root.findByName("deathPercentOnur"),this.deathSkull=app.root.findByName("skullOnur"),this.progressBar=app.root.findByName("gameBarOnur"),this.reviveObs=this.app.root.findByName("Obs_revive"),obstacles.sort(function(t,e){return t-e}),fillEntityPool(),getRandomStartedMap(),this.setObstaclesCollisionOff(),this.openTutorial(),this.imageRect=this.deathPercent.element.rect.clone(),this.setProgress(0)},Player.prototype.openTutorial=function(){this.app.root.findByName("GameUI").findByName("Tutorial").enabled=!0,HandController.instance.handAndCircleTween()},Player.prototype.closeTutorial=function(){this.app.root.findByName("GameUI").findByName("Tutorial").enabled=!1,HandController.instance.stopHandAndCircleTween()},Player.prototype.playAnim=function(t,e){var i=t.other.parent.findByName("platform_sprite").sprite,n=t.other.parent.findByName("platform_sprite").element;"down"===e?(n.enabled=!1,i.enabled=!0,i.play("platform_up_anim")):(n.enabled=!1,i.enabled=!0,i.play("platform_down_anim")),setTimeout(()=>{n.enabled=!0,i.enabled=!1},100)},Player.prototype.onCollisionStart=function(t){t.other.tags.has("startedPlatform")&&(runOneTime=!0,this.playerRotControl(),playSound("platformJump"),!this.firstInput&&t.other.tags.has("started_platform_up_col")?(this.playAnim(t,"down"),this.entity.rigidbody.angularVelocity=tempVec.set(0,0,0),this.entity.rigidbody.linearVelocity=tempVec.set(0,0,0),this.entity.rigidbody.applyImpulse(t.other.up.mulScalar(23))):(this.playAnim(t,"down"),this.entity.rigidbody.applyImpulse(t.other.up.mulScalar(this.platformJumpPower)))),t.other.tags.has("platform")&&(t.other.parent.findByName("pillowPointText").enabled=!0,AppRoot.instance.distanceText.element.text=parseInt(AppRoot.instance.distanceText.element.text)+pillowPointScore,this.playerRotControl(),this.airTimeBool=!1,this.playerOnPlatform=!0,playSound("platformJump"),t.other.tags.has("platform_up_col")?(this.entity.rigidbody.applyImpulse(t.other.up.mulScalar(this.platformJumpPower)),t.other.parent.findByName("platform_sprite").sprite.play("platform_down_anim")):this.entity.rigidbody.applyImpulse(t.other.up.mulScalar(-this.platformJumpPower)))},Player.prototype.onCollisionEnd=function(t){"platform_up_col"!==t.name&&"platform_down_col"!==t.name||(this.airTimeBool=!0,this.playerOnPlatform=!1)},Player.prototype.rotateStickman=function(){let t=this.closestObstacle.getPosition();this.player_stickman_form_front.lookAt(new pc.Vec3(t.x,t.y,t.z),new pc.Vec3(0,0,1)),this.player_stickman_form_front.setEulerAngles(0,0,this.player_stickman_form_front.getEulerAngles().z),this.player_stickman_speed_form.lookAt(new pc.Vec3(t.x,t.y,t.z),new pc.Vec3(0,0,1)),this.player_stickman_speed_form.setEulerAngles(0,0,this.player_stickman_speed_form.getEulerAngles().z),this.player_stickman_legsUp_form.lookAt(new pc.Vec3(t.x,t.y,t.z),new pc.Vec3(0,0,1)),this.player_stickman_legsUp_form.setEulerAngles(0,0,this.player_stickman_speed_form.getEulerAngles().z)},Player.prototype.onMouseDown=function(t){reviveState||pause||(this.onClicked=!0,gameStarted=!0,ButtonController.instance.isPlayClicked&&this.playerFirstPosBool&&(this.camPosX=Camera.instance.entity.getPosition().x,t.button===pc.MOUSEBUTTON_LEFT&&!GameOver.instance.isGameOver&&ButtonController.instance.isGameStart&&(this.startUpdateFun=!0,this.setObstaclesCollisionOff(),this.disFromPlayerToObs=this.entity.getPosition().distance(this.closestObstacle.getPosition()),this.disFromPlayerToObs>=3&&this.playerPosControll(),Constraint.instance.entity.setPosition(this.closestObstacle.getPosition()),this.disFromPlayerToObs<=this.maxHoldLimit&&(runOneTime=!0,this.closeTutorial(),this.holded=!0,this.isHanging=!0,this.changeObsUI(),this.rotateStickman(),playSound("hook"),Constraint.instance.createJoint(),this.firstInput=!0),this.drawBool=!0,this.closestObstacleClone=this.closestObstacle)))},Player.prototype.isClosestObsOutFromFailZone=function(){return this.closestObstacle.getPosition().x>FailZone.instance.entity.findByName("positionPoint").getPosition().x},Player.prototype.onMouseUp=function(t){if(this.userEvent=t,t.button===pc.MOUSEBUTTON_LEFT&&this.holded){this.isHanging=!1,this.timer=0,this.changeObsUI(),Constraint.instance.destroyJoint(),this.holded=!1,this.drawBool=!1,this.setObstaclesCollisionOff(),this.airTimeBool=!0,this.resetClosestArray(),this.valX=0,this.valY=0;for(let t=0;t<obstacles.length;t++)obstacles[t].findByName("Spr_Roller_Empty").enabled=!0,obstacles[t].findByName("Spr_Roller").enabled=!1;this.onClicked=!1,this.clickedDurationTime>.7&&this.entity.rigidbody.applyImpulse(this.entity.rigidbody.linearVelocity.normalize().mulScalar(2)),this.clickedDurationTime=0}},Player.prototype.onTouchStart=function(t){reviveState||pause||ButtonController.instance.isPlayClicked&&(gameStarted=!0,this.onClicked=!0,t.event.preventDefault(),1===t.touches.length&&(this.startUpdateFun=!0,this.setObstaclesCollisionOff(),this.disFromPlayerToObs=this.entity.getPosition().distance(this.closestObstacle.getPosition()),this.disFromPlayerToObs>=3&&this.playerPosControll(),Constraint.instance.entity.setPosition(this.closestObstacle.getPosition()),this.disFromPlayerToObs<=this.maxHoldLimit&&(runOneTime=!0,this.closeTutorial(),this.isHanging=!0,this.holded=!0,this.changeObsUI(),this.rotateStickman(),playSound("hook"),Constraint.instance.createJoint(),this.firstInput=!0,this.firstTouch=!0),this.drawBool=!0,this.closestObstacleClone=this.closestObstacle))},Player.prototype.onTouchEnd=function(t){if(0===t.touches.length&&this.holded){this.isHanging=!1,this.changeObsUI(),Constraint.instance.destroyJoint(),this.holded=!1,this.drawBool=!1,this.setObstaclesCollisionOff(),this.airTimeBool=!0,this.resetClosestArray(),this.valX=0,this.valY=0;for(let t=0;t<obstacles.length;t++)obstacles[t].findByName("Spr_Roller_Empty").enabled=!0,obstacles[t].findByName("Spr_Roller").enabled=!1;this.onClicked=!1,this.clickedDurationTime>.7&&this.entity.rigidbody.applyImpulse(this.entity.rigidbody.linearVelocity.normalize().mulScalar(2)),this.clickedDurationTime=0}},Player.prototype.changeObsUI=function(){this.app.fire("isHanging");let t=this.closestObstacle;void 0!==t&&(this.isHanging?(this.player_ball_form.enabled=!1,this.player_stickman_speed_form.enabled=!0,t.findByName("Spr_Roller").enabled=!0,t.findByName("Spr_Roller_Empty").enabled=!1):(this.player_stickman_form_front.enabled=!1,this.player_stickman_legsUp_form.enabled=!1,this.player_stickman_speed_form.enabled=!1,this.player_ball_form.enabled=!0))},Player.prototype.testPosControl=function(){return this.playerPosXForRot=this.entity.getPosition().x,this.playerPosYForRot=this.entity.getPosition().y,this.obsPosXForRot=this.closestObstacle.getPosition().x,this.obsPosYForRot=this.closestObstacle.getPosition().y,this.playerPosXForRot>this.obsPosXForRot&&this.playerPosYForRot>this.obsPosYForRot?1:this.playerPosXForRot>=this.obsPosXForRot&&this.playerPosYForRot<this.obsPosYForRot?2:this.playerPosXForRot<=this.obsPosXForRot&&this.playerPosYForRot>this.obsPosYForRot?3:this.playerPosXForRot<this.obsPosXForRot&&this.playerPosYForRot<this.obsPosYForRot?4:-1};let speed=!1,slow=!1;Player.prototype.setStickmanRot=function(){this.isHanging&&!stopSpriteChange?(this.entity.rigidbody.angularVelocity.z<=.3&&this.entity.rigidbody.angularVelocity.z>=-.3?(this.player_stickman_legsUp_form.enabled=!0,this.player_stickman_form_front.enabled=!1,this.player_stickman_speed_form.enabled=!1,slow=!1,speed=!1):(this.entity.getPosition().y<this.closestObstacle.getPosition().y&&Math.round(this.entity.getPosition().x)===Math.round(this.closestObstacle.getPosition().x)&&(slow=!0,speed=!1),this.entity.getPosition().y>this.closestObstacle.getPosition().y&&Math.round(this.entity.getPosition().x)===Math.round(this.closestObstacle.getPosition().x)&&(slow=!1,speed=!0)),slow?(this.player_stickman_form_front.enabled=!0,this.player_stickman_speed_form.enabled=!1,this.player_stickman_legsUp_form.enabled=!1,this.entity.rigidbody.angularVelocity.z<-1&&(this.player_stickman_form_front.sprite.flipX=!0),this.entity.rigidbody.angularVelocity.z>1&&(this.player_stickman_form_front.sprite.flipX=!1)):speed?(this.player_stickman_legsUp_form.enabled=!1,this.player_stickman_form_front.enabled=!1,this.player_stickman_speed_form.enabled=!0,this.entity.rigidbody.angularVelocity.z<-.1&&(this.player_stickman_speed_form.sprite.flipX=!1),this.entity.rigidbody.angularVelocity.z>.1&&(this.player_stickman_speed_form.sprite.flipX=!0)):(this.entity.rigidbody.angularVelocity.z>=.3||this.entity.rigidbody.angularVelocity.z<=-.3)&&(this.player_stickman_legsUp_form.enabled=!1,this.player_stickman_form_front.enabled=!1,this.player_stickman_speed_form.enabled=!0,slow=!1,speed=!0)):(this.player_stickman_legsUp_form.enabled=!1,this.player_stickman_form_front.enabled=!1,this.player_stickman_speed_form.enabled=!1,this.player_ball_form.enabled=!0)},Player.prototype.postUpdate=function(){ButtonController.instance.isGameStart&&this.drawBool&&this.disFromPlayerToObs<=this.maxHoldLimit&&app.drawLine(this.entity.findByName("Stickman").getPosition(),this.closestObstacleClone.getPosition(),pc.Color.WHITE,!0,this.lineLayer)};let point=0;Player.prototype.resetClosestArray=function(){this.prevClosestObstacles.forEach(t=>{t.findByName("pointText").enabled=!1}),this.prevClosestObstacles=[],point=0},Player.prototype.calculateAirtimePoint=function(){this.entity.rigidbody.linearVelocity.x>0&&this.entity.getPosition().x>this.closestObstacle.getPosition().x&&(this.isHanging||this.prevClosestObstacles.includes(this.closestObstacle)||(this.prevClosestObstacles.push(this.closestObstacle),point=this.prevClosestObstacles.length,this.savedPoint+=point,this.closestObstacle.findByName("pointText").enabled=!0,this.closestObstacle.findByName("pointText").element.text="+"+point))},Player.prototype.update=function(t){this.onClicked&&(this.clickedDurationTime=this.clickedDurationTime+t),this.entity.getLocalPosition().y<23&&!this.playerFirstPosBool&&(this.playerFirstPosBool=!0),GameOver.instance.isGameOver||(this.findClosestObstacle(),this.calculateAirtimePoint(),this.setStickmanRot(t),this.isHanging||this.entity.getPosition().y<this.minBottomLimit&&runOneTime&&(this.app.fire("gameover"),gameOvercount++,runOneTime=!1),failZoneDeath&&(this.failZonecount+=t,this.failZonecount>1.4&&(this.failZonecount=0,FailZone.instance.killHim(),this.entity.rigidbody.angularVelocity=tempVec.set(0,0,0),this.entity.rigidbody.linearVelocity=tempVec.set(0,0,0),killedFromFailZone=!0,failZoneDeath=!1)),this.camera.camera.worldToScreen(FailZone.instance.entity.getPosition().add(tempVec.set(70,0,0))).x>0?this.progressBar.enabled=!1:this.progressBar.enabled=!0,FailZone.instance.failZoneMove(t),this.setProgress((25-(this.camera.camera.screenToWorld(0,0,0).x-FailZone.instance.entity.getPosition().x-70))/25))},Player.prototype.setProgress=function(t){t=pc.math.clamp(t,0,1);var e=pc.math.lerp(0,291,t);this.deathPercent.element.width=e,this.deathSkull.setLocalPosition(e+53.7,this.deathSkull.getLocalPosition().y,this.deathSkull.getLocalPosition().z),this.imageRect.copy(this.deathPercent.element.rect),this.imageRect.z=t,this.deathPercent.element.rect=this.imageRect},Player.prototype.findClosestObstacle=function(){let t=this.entity.getPosition(),e=5e4;obstacles.sort((t,e)=>t.getPosition().x-e.getPosition().x),obstacles.forEach(i=>{let n=t.distance(i.getPosition());this.distanceObs=n,this.closestObstacle?n<e&&i.getPosition().x>FailZone.instance.entity.findByName("positionPoint").getPosition().x&&i.enabled&&(this.closestObstacle=i,this.closestDistance=n,e=n):(this.closestObstacle=i,this.closestDistance=n,e=n)});for(let t=0;t<obstacles.length;t++)obstacles[t].findByName("ObsLines").enabled=!1;Math.abs(this.entity.getPosition().y-this.closestObstacle.getPosition().y)<=this.maxHoldLimit&&(this.closestObstacle.findByName("ObsLines").enabled=!0)},Player.prototype.setObstaclesCollisionOff=function(){obstacles=this.app.root.find("name","Obs");for(let t=0;t<obstacles.length;t++)obstacles[t].collision.enabled=!1,obstacles[t].findByName("pointText").enabled=!1;obstacles.push(this.reviveObs)},Player.prototype.playerRotControl=function(){this.entity.rigidbody.linearVelocity.y<0?this.charUpDir=-1:this.charUpDir=1},Player.prototype.playerPosControll=function(){let t=this.impulsePowerValue;this.playerPosX=this.entity.getPosition().x,this.playerPosY=this.entity.getPosition().y,this.obsPosX=this.closestObstacle.getPosition().x,this.obsPosY=this.closestObstacle.getPosition().y,this.playerPosX>this.obsPosX&&this.playerPosY>this.obsPosY?(this.valX=t,this.valY=t):this.playerPosX>=this.obsPosX&&this.playerPosY<this.obsPosY?(this.valX=t,this.valY=-t):this.playerPosX<=this.obsPosX&&this.playerPosY>this.obsPosY?(this.valX=-t,this.valY=t):this.playerPosX<this.obsPosX&&this.playerPosY<this.obsPosY&&(this.valX=-t,this.valY=-t)};var Camera=pc.createScript("camera");Camera.prototype.initialize=function(){Camera.instance=this,this.zoomedOut=!1,this.orthoHeight=this.entity.camera.orthoHeight},Camera.prototype.postUpdate=function(t){!GameOver.instance.isGameOver&&ButtonController.instance.isGameStart&&(this.entity.setPosition(AppRoot.instance.player.getPosition().x+3,this.entity.getPosition().y,this.entity.getPosition().z),AppRoot.instance.player.getPosition().y>33&&!this.zoomedOut&&(this.zoomOut(),this.zoomedOut=!0),AppRoot.instance.player.getPosition().y<28&&this.zoomedOut&&(this.zoomIn(),this.zoomedOut=!1))},Camera.prototype.zoomOut=function(){zoomOutTween=this.app.tween(this).to({orthoHeight:44.5},.6,pc.Linear).on("update",()=>{this.entity.camera&&(this.entity.camera.orthoHeight=this.orthoHeight)}).start()},Camera.prototype.zoomIn=function(){zoomInTween=this.app.tween(this).to({orthoHeight:27},.6,pc.Linear).on("update",()=>{this.entity.camera&&(this.entity.camera.orthoHeight=this.orthoHeight)}).start()},Camera.prototype.update=function(t){};var Trigger=pc.createScript("trigger");Trigger.prototype.initialize=function(){Trigger.instance=this,this.randomLevelIndex=0,this.prevRandomIndex=0,this.mapName=void 0,this.entity.collision.once("triggerenter",this.onTriggerEnter,this)},Trigger.prototype.onTriggerEnter=function(t){replaceInGameMap()},Trigger.prototype.randomLevelIndexFinder=function(){if(0!==this.prevRandomIndex)return this.randomLevelIndex=getRandom(1,5),this.randomLevelIndex;this.randomLevelIndex=getRandom(1,5),this.randomLevelIndex,this.prevRandomIndex},Trigger.prototype.ccccreateMap=function(){this.mapName=void 0,this.randomLevelIndex=0,this.randomLevelIndex=getRandom(1,5),this.mapName=templates.createdMap+this.randomLevelIndex,this.mapTemplate=app.assets.find(this.mapName);let t=this.entity.parent.findByName("newMapPoint"),e=this.mapTemplate.resource.instantiate();e.setPosition(new pc.Vec3(t.getPosition().x,0,0)),app.root.findByName("Root").addChild(e)},pc.extend(pc,function(){var t=function(t){this._app=t,this._tweens=[],this._add=[]};t.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var e=0,i=this._tweens.length;e<i;)this._tweens[e].update(t)?e++:(this._tweens.splice(e,1),i--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}};var e=function(t,e,i){pc.events.attach(this),this.manager=e,i&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},i=function(t){var e;return t instanceof pc.Vec2?e={x:t.x,y:t.y}:t instanceof pc.Vec3?e={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?e={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(e={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(e.a=t.a)):e=t,e};e.prototype={to:function(t,e,n,a,o,s){return this._properties=i(t),this.duration=e,n&&(this.easing=n),a&&this.delay(a),o&&this.repeat(o),s&&this.yoyo(s),this},from:function(t,e,n,a,o,s){return this._properties=i(t),this.duration=e,n&&(this.easing=n),a&&this.delay(a),o&&this.repeat(o),s&&this.yoyo(s),this._from=!0,this},rotate:function(t,e,n,a,o,s){return this._properties=i(t),this.duration=e,n&&(this.easing=n),a&&this.delay(a),o&&this.repeat(o),s&&this.yoyo(s),this._slerp=!0,this},start:function(){var t,e,i,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(e,i,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(e,i,n,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(e,i,n)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,e){return this._count=0,this._numRepeats=t,this._repeatDelay=e||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var e=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(e=this.duration-this.time,this.time=0):(e=this.time-this.duration,this.time=this.duration));var i,n,a=0===this.duration?1:this.time/this.duration,o=this.easing(a);for(var s in this._properties)this._properties.hasOwnProperty(s)&&(i=this._sv[s],n=this._ev[s],this.target[s]=i+(n-i)*o);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,o),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var r=this._repeat(e);return r?this.fire("loop"):(this.fire("complete",e),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),r}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var e in this._properties){var i=this._sv[e];this._sv[e]=this._ev[e],this._ev[e]=i}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var n=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},a=function(t){return 1-n(1-t)};return{TweenManager:t,Tween:e,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},BackOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},BackInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},BounceIn:a,BounceOut:n,BounceInOut:function(t){
return t<.5?.5*a(2*t):.5*n(2*t-1)+.5},ElasticIn:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},ElasticOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",function(t){this._tweenManager.update(t)})},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,e){var i=this._app.tween(t);return i.entity=this,this.once("destroy",i.stop,i),e&&e.element&&(i.element=e.element),i};var t=pc.Application.getApplication();t&&t.addTweenManager()}();var Constraint=pc.createScript("constraint"),localA=void 0,localB=void 0,rbA=void 0,rbB=void 0;Constraint.attributes.add("partA",{type:"entity",title:"Part A"}),Constraint.attributes.add("partB",{type:"entity",title:"Part B"}),Constraint.attributes.add("angularLowerLimit",{type:"vec3",title:"Angular Lower Limits (degrees)"}),Constraint.attributes.add("angularUpperLimit",{type:"vec3",title:"Angular Upper Limits (degrees)"}),Constraint.attributes.add("partOrientationOffsetA",{type:"vec3",title:"Part A Orientation Offset (degrees)"}),Constraint.attributes.add("partOrientationOffsetB",{type:"vec3",title:"Part B Orientation Offset (degrees)"}),Constraint.attributes.add("disableCollision",{type:"boolean",default:!1,title:"Disable Collision"}),Constraint.attributes.add("debugDraw",{type:"boolean",default:!1,title:"Debug Draw"}),Constraint.prototype.initialize=function(){Constraint.instance=this,this.white=new pc.Color(.3,.3,1,1),this.temp=new pc.Vec3},Constraint.prototype.draw=function(){this.app.renderLine(Player.instance.closestObstacle.getPosition(),this.entity.getPosition(),this.white),this.app.renderLine(this.partB.getPosition(),this.entity.getPosition(),this.white)},Constraint.prototype.destroyJoint=function(){this.app.systems.rigidbody.dynamicsWorld.removeConstraint(this.joint)},Constraint.prototype.createJoint=function(){rbA=this.partA.rigidbody.body,rbB=this.partB.rigidbody.body;var t=new pc.Vec3,e=this.partA.getWorldTransform().clone();e.invert(),e.transformPoint(this.entity.getPosition(),t);var i=new pc.Vec3,n=this.partB.getWorldTransform().clone();n.invert(),this.transformVec=new pc.Vec3(this.entity.getPosition().x+Player.instance.valX,this.entity.getPosition().y+Player.instance.valY,this.entity.getPosition().z),n.transformPoint(this.transformVec,i),localA=new Ammo.btTransform,localB=new Ammo.btTransform,localA.setIdentity(),localB.setIdentity();var a=this.partOrientationOffsetA,o=this.partOrientationOffsetB;localA.getBasis().setEulerZYX(a.x*pc.math.DEG_TO_RAD,a.y*pc.math.DEG_TO_RAD,a.z*pc.math.DEG_TO_RAD),localA.setOrigin(new Ammo.btVector3(t.x,t.y,t.z)),localB.getBasis().setEulerZYX(o.x*pc.math.DEG_TO_RAD,o.y*pc.math.DEG_TO_RAD,o.z*pc.math.DEG_TO_RAD),localB.setOrigin(new Ammo.btVector3(i.x,i.y,i.z)),this.joint=new Ammo.btGeneric6DofConstraint(rbA,rbB,localA,localB,!0);var s=this.angularLowerLimit,r=this.angularUpperLimit;new Ammo.btVector3(s.x,s.y,s.z),new Ammo.btVector3(r.x,r.y,r.z),this.app.systems.rigidbody.dynamicsWorld.addConstraint(this.joint,this.disableCollision),this.playerLinearVelControl()},Constraint.prototype.playerLinearVelControl=function(){this.partBLinearVel=this.partB.rigidbody.linearVelocity,this.impulseValue=0,this.tangent=(new pc.Vec3).cross(this.partB.getPosition().sub(this.entity.getPosition()),new pc.Vec3(0,0,1)).normalize(),Player.instance.firstInput?this.impulseDirection=(new pc.Vec3).copy(this.partB.rigidbody.linearVelocity).project(this.tangent).normalize():this.impulseDirection=this.tangent.normalize().mulScalar(-1),this.impulseDirection.y>0?(speed=!1,slow=!0):(speed=!0,slow=!1),this.impulseValue=this.partB.rigidbody.linearVelocity.length(),this.partB.rigidbody.linearVelocity=new pc.Vec3(0,0,0),this.partB.rigidbody.applyImpulse(this.impulseDirection.mulScalar(Math.min(Math.max(15,this.impulseValue),25)))};var TweenController=pc.createScript("tweenController");TweenController.prototype.initialize=function(){TweenController.instance=this},TweenController.prototype.tweenToCam=function(){app.tween(AppRoot.instance.camera.camera).to({orthoHeight:AppRoot.instance.camera.camera.orthoHeight+10},2,pc.SineOut).yoyo(!0).repeat(2).start()},TweenController.prototype.collectableTween=function(t){t.tween(t.getLocalEulerAngles()).rotate(tempVec.set(180,0,180),2,pc.Linear).loop(!0).start()},TweenController.prototype.addOnePoint2Score=function(t){t.setLocalScale(tempVec.set(0,0,0)),t.tween(t.getLocalScale()).to(tempVec.set(1,1,1),1,pc.SineOut).yoyo(!0).repeat(2).start()},TweenController.prototype.tweenToTutorialArrow=function(t){t.tween(t.getLocalPosition()).to(tempVec.set(1.3,0,0),.8,pc.QuadraticOut).loop(!0).yoyo(!0).start()};var DistanceController=pc.createScript("distanceController");DistanceController.prototype.initialize=function(){DistanceController.instance=this,this.gameOverDistanceText=this.app.root.findByName("GameOverDistanceText"),this.distance=.1,this.scoreX=0},DistanceController.prototype.setDistanceText=function(){if(AppRoot.instance.player.getPosition().x>=this.distance){this.distance=AppRoot.instance.player.getPosition().x,this._distance=.1*this.distance,this.scoreX=(this._distance+collectCount).toFixed(0),AppRoot.instance.distanceText.element.text=+this.scoreX+Player.instance.savedPoint;let t=parseInt(AppRoot.instance.distanceText.element.text);0!=parseInt(AppRoot.instance.distanceText.element.text)&&(parseInt(AppRoot.instance.distanceText.element.text)%30==0&&changeColor&&(preScore=t,ColorChanger.instance.changeColor(),changeColor=!1),t>preScore&&(changeColor=!0)),window.famobi&&t>preScore2&&!GameOver.instance.isGameOver&&(window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:t}),preScore2=t)}};var SoundController=pc.createScript("soundController");SoundController.prototype.initialize=function(){SoundController.instance=this},SoundController.prototype.playCollectSound=function(){this.entity.sound.stop("collect"),this.entity.sound.play("collect")},SoundController.prototype.playHookSound=function(){this.entity.sound.stop("hook"),this.entity.sound.play("hook")},SoundController.prototype.playGameOverSound=function(){this.entity.sound.stop("gameover"),this.entity.sound.stop("hook"),this.entity.sound.stop("collect"),this.entity.sound.play("gameover")};var Ccd=pc.createScript("ccd");Ccd.attributes.add("motionThreshold",{type:"number",default:1,title:"Motion Threshold",description:"Number of meters moved in one frame before CCD is enabled"}),Ccd.attributes.add("sweptSphereRadius",{type:"number",default:.2,title:"Swept Sphere Radius",description:"This should be below the half extent of the collision volume. E.g For an object of dimensions 1 meter, try 0.2"}),Ccd.prototype.initialize=function(){var t;(t=this.entity.rigidbody.body).setCcdMotionThreshold(this.motionThreshold),t.setCcdSweptSphereRadius(this.sweptSphereRadius),this.on("attr:motionThreshold",function(e,i){(t=this.entity.rigidbody.body).setCcdMotionThreshold(e)}),this.on("attr:sweptSphereRadius",function(e,i){(t=this.entity.rigidbody.body).setCcdSweptSphereRadius(e)})};var FailZone=pc.createScript("failZone");FailZone.prototype.initialize=function(){FailZone.instance=this,this.failZoneCol=this.app.root.findByName("FailZoneCollision"),this.failZoneCol.collision.on("triggerenter",this.onTriggerEnter,this),this.failZoneCol.collision.on("triggerleave",this.onTriggerLeave,this),this.timer=0,this.gameOverPos=tempVec.set(0,0,0),this.failZoneSpeed=15,this.currentFailzoneSpeed=15,this.distanceMulti=1.6,this.failZoneLevel=.6,this.player=Player.instance.entity},FailZone.prototype.onTriggerEnter=function(t){if("Player"===t.name&&!failZoneDeath)return playSound("failzone"),void(failZoneDeath=!0)},FailZone.prototype.onTriggerLeave=function(t){if("Player"===t.name&&failZoneDeath)return stopSound("failzone"),Player.instance.failZonecount=0,void(failZoneDeath=!1)},FailZone.prototype.killHim=function(t){this.gameOverPos=Player.instance.entity.getPosition(),Player.instance.player_ball_form.enabled=!0,Player.instance.player_stickman_form_front.enabled=!1,Player.instance.player_stickman_speed_form.enabled=!1,Player.instance.player_stickman_legsUp_form.enabled=!1,Player.instance.entity.rigidbody.teleport(tempVec.set(Player.instance.entity.getPosition().x,Player.instance.entity.getPosition().y,2)),stopSpriteChange=!0,Constraint.instance.destroyJoint(),Player.instance.drawBool=!1,this.failZoneGameOver()},FailZone.prototype.failZoneMoveEX=function(t){Player.instance.firstInput&&this.entity.translateLocal(this.currentFailzoneSpeed,0,0)},FailZone.prototype.failZoneMove=function(t){let e=parseInt(AppRoot.instance.distanceText.element.text);0!=parseInt(AppRoot.instance.distanceText.element.text)&&(parseInt(AppRoot.instance.distanceText.element.text)%25==0&&increaseSpeed&&(preScore=e,increaseSpeed=!1,this.failZoneLevel+=.1,this.distanceMulti+=.5),e>preScore&&(increaseSpeed=!0)),this.currentFailzoneSpeed=Math.max((this.player.getPosition().x-(this.entity.getPosition().x+70))*this.distanceMulti,12)*this.failZoneLevel,Player.instance.firstInput&&this.entity.translateLocal(this.currentFailzoneSpeed*t/5,0,0)},FailZone.prototype.resetFailZoneSpeed=function(){this.failZoneSpeed=15,this.currentFailzoneSpeed=15,this.distanceMulti=2,this.failZoneLevel=1},FailZone.prototype.riveveFailZoneSpeed=function(){this.distanceMulti=Math.max(2,this.distanceMulti/1.3),this.failZoneLevel=Math.max(1,this.failZoneLevel/1.3)},FailZone.prototype.failZoneGameOver=function(){playSound("gameover"),adsPassCheck=!1,GameOver.instance.checkADSReady(),gameOvercount>1||(updatePlayerData(),FailZone.instance.failZoneSpeed=0,this.app.root.findByName("ObsLines").enabled=!1,reviveState=!0,failZoneStop=!0,GameOver.instance.isGameOver=!0,Player.instance.firstInput=!1,Player.instance.firstTouch=!1)};var GameOver=pc.createScript("gameOver");GameOver.prototype.initialize=function(){GameOver.instance=this,this.adsPanel=this.app.root.findByName("ReviveUI"),this.adsPanelRestartButton=this.adsPanel.findByName("RestartButton"),this.noAdsPanel=this.app.root.findByName("ReviveNoADS"),this.noAdsPanelRestartButton=this.noAdsPanel.findByName("RestartButton"),this.noAdsPanelScoreText=this.noAdsPanel.findByName("ScoreText"),this.noAdsPanelHighScoreGroup=this.app.root.findByName("HighScoreGroup"),this.reviveButtonUI=AppRoot.instance.reviveUi.findByName("ReviveButton"),this.restartButtonUI=AppRoot.instance.reviveUi.findByName("RestartButton"),this.timerUI=AppRoot.instance.reviveUi.findByName("Circle"),this.isGameOver=!1,this.app.on("gameover",this.gameOver,this),this.obsLines=this.app.root.findByName("ObsLines"),this.startPlatform=this.app.root.findByName("StartedPlatform")},GameOver.prototype.adsRemainTextAction=async function(){for(let t=5;t>=0;t--)adsPassCheck||(t-1>=0&&(adsRemainTextValue.element.text=t-1),0==t&&this.restart(!0),await sleep(1e3))},GameOver.prototype.checkADSReady=function(){AppRoot.instance.reviveUi.enabled=!0,window.famobi?window.famobi.hasFeature("rewarded")&&window.famobi.hasRewardedAd()?showADSPanel?window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:parseInt(AppRoot.instance.distanceText.element.text)}).then(function(){GameOver.instance.adsPanel.enabled=!1,GameOver.instance.noAdsPanel.enabled=!0,AppRoot.instance.distanceText.enabled=!1,GameOver.instance.noAdsPanelScoreText.element.text=AppRoot.instance.distanceText.element.text,GameOver.instance.noAdsPanelHighScoreGroup.setLocalPosition(0,74.338,0),setTimeout(function(){window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:"",reason:"dead"}),window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:parseInt(AppRoot.instance.distanceText.element.text)}),GameOver.instance.noAdsPanelRestartButton.enabled=!0},2e3,this)},function(){}):(GameOver.instance.adsPanel.enabled=!0,GameOver.instance.noAdsPanel.enabled=!1,GameOver.instance.adsRemainTextAction(),setTimeout(function(){GameOver.instance.adsPanelRestartButton.enabled=!0},2e3,this)):(GameOver.instance.adsPanel.enabled=!1,GameOver.instance.noAdsPanel.enabled=!0,AppRoot.instance.distanceText.enabled=!1,GameOver.instance.noAdsPanelScoreText.element.text=AppRoot.instance.distanceText.element.text,GameOver.instance.noAdsPanelHighScoreGroup.setLocalPosition(0,74.338,0),setTimeout(function(){GameOver.instance.noAdsPanelRestartButton.enabled=!0},2e3,this)):showADSPanel?(GameOver.instance.adsPanel.enabled=!1,GameOver.instance.noAdsPanel.enabled=!0,AppRoot.instance.distanceText.enabled=!1,GameOver.instance.noAdsPanelScoreText.element.text=AppRoot.instance.distanceText.element.text,GameOver.instance.noAdsPanelHighScoreGroup.setLocalPosition(0,74.338,0),setTimeout(function(){GameOver.instance.noAdsPanelRestartButton.enabled=!0},2e3,this)):(GameOver.instance.adsPanel.enabled=!0,GameOver.instance.noAdsPanel.enabled=!1,GameOver.instance.adsRemainTextAction(),setTimeout(function(){GameOver.instance.adsPanelRestartButton.enabled=!0},2e3,this))},GameOver.prototype.restartButtonAction=function(){runOneTime=!1,gameStarted=!1,stopSpriteChange=!1,adsPassCheck=!0,ButtonController.instance.positionReset(),GameOver.instance.restartMethod(),setTimeout(()=>{ButtonController.instance.setGameStatesForNewGame(),adsRemainTextValue.element.text=4},100),Player.instance.openTutorial(),Player.instance.setObstaclesCollisionOff(),GameOver.instance.noAdsPanelRestartButton.enabled=!1,GameOver.instance.adsPanelRestartButton.enabled=!1},GameOver.prototype.checkRewardedAds=function(){window.famobi&&setInterval(()=>{window.famobi.hasFeature("rewarded")&&window.famobi.hasRewardedAd()?(GameOver.instance.reviveButtonUI.element.opacity=1,GameOver.instance.reviveButtonUI.button.active=!0):(GameOver.instance.reviveButtonUI.element.opacity=.5,GameOver.instance.reviveButtonUI.button.active=!1)},2e3)},GameOver.prototype.gameOver=function(){playSound("gameover"),adsPassCheck=!1,GameOver.instance.checkADSReady(),this.isGameOver=!0,gameOvercount>1||(updatePlayerData(),failZoneStop=!0,Player.instance.entity.rigidbody.teleport(tempVec.set(Player.instance.entity.getLocalPosition().x,200,Player.instance.entity.getLocalPosition().z)),Player.instance.entity.rigidbody.enabled=!1,this.obsLines.enabled=!1,Player.instance.firstInput=!1,Player.instance.firstTouch=!1,Player.instance.maxHoldLimit=.1,reviveState=!0)},GameOver.prototype.restartMethod=function(){preScore2=0,enableProgressBar=!1,playerData.newPlayer&&(playerData.newPlayer=!1),updatePlayerData(),obstacles=[],Player.instance.entity.rigidbody.teleport(tempVec.set(0,25,0)),Player.instance.entity.rigidbody.enabled=!0,this.startPlatform.setPosition(tempVec.set(0,startedPlatformInitPos,0)),this.startPlatform.children.forEach(t=>{t.rigidbody&&t.rigidbody.teleport(tempVec.set(0,startedPlatformInitPos,0))}),Player.instance.entity.rigidbody.enabled=!0,Player.instance.entity.rigidbody.angularVelocity=tempVec.set(0,0,0),Player.instance.entity.rigidbody.linearVelocity=tempVec.set(0,0,0),Player.instance.reviveObs.setPosition(tempVec.set(-420,0,0)),Player.instance.findClosestObstacle(),gameOvercount=0,returnAllMapToPool_StartNewGame(),failZoneStop=!1,window.famobi&&window.famobi_analytics.trackEvent("EVENT_LEVELRESTART",{levelName:""})},GameOver.prototype.restart=function(t){adsPassCheck=!0,window.famobi.showInterstitialAd({eventId:"button:main:restart",callback:()=>{window.famobi&&t?window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:parseInt(AppRoot.instance.distanceText.element.text)}).then(function(){Promise.all([window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:"",reason:"dead"}),window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:parseInt(AppRoot.instance.distanceText.element.text)})]).then(()=>{GameOver.instance.restartButtonAction()})},function(){}):GameOver.instance.restartButtonAction()}})},GameOver.prototype.levelFailAPI=function(){window.famobi?window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:parseInt(AppRoot.instance.distanceText.element.text)}).then(function(){Promise.all([window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:"",reason:"dead"}),window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:parseInt(AppRoot.instance.distanceText.element.text)})]).then(()=>{GameOver.instance.restartButtonAction()})},function(){}):GameOver.instance.restartButtonAction()},GameOver.prototype.revive=function(){enableProgressBar=!1;let t=Player.instance.entity.getLocalPosition();FailZone.instance.entity.setPosition(tempVec.set(t.x-150,0,0)),entityPool.inGameStartedMap.forEach(e=>{e.find("name","Platform").forEach(e=>{Math.abs(t.x-e.getPosition().x)<gap&&(e.enabled=!1)})}),entityPool.inGameMaps.forEach(e=>{e.find("name","Platform").forEach(e=>{Math.abs(t.x-e.getPosition().x)<gap&&(e.enabled=!1)})}),Player.instance.entity.rigidbody.teleport(tempVec.set(Player.instance.closestObstacle.getPosition().x-5,25,0)),Player.instance.entity.rigidbody.enabled=!0,t=Player.instance.entity.getLocalPosition(),this.startPlatform.setPosition(Player.instance.closestObstacle.getPosition().x-5,Player.instance.closestObstacle.getPosition().y-15,t.z),this.startPlatform.children.forEach(e=>{e.rigidbody&&e.rigidbody.teleport(tempVec.set(Player.instance.closestObstacle.getPosition().x-5,Player.instance.closestObstacle.getPosition().y-15,t.z))}),Player.instance.entity.rigidbody.enabled=!0,Player.instance.entity.rigidbody.angularVelocity=tempVec.set(0,0,0),Player.instance.entity.rigidbody.linearVelocity=tempVec.set(0,0,0),Player.instance.findClosestObstacle();let e=obstacles.indexOf(Player.instance.closestObstacle);obstacles[e-1].enabled=!1,Player.instance.entity.enabled=!0,gameOvercount=0,failZoneStop=!1},GameOver.prototype.failzoneRevive=function(){enableProgressBar=!1;let t=FailZone.instance.gameOverPos;FailZone.instance.entity.setPosition(tempVec.set(t.x-150,0,0)),Player.instance.entity.rigidbody.teleport(tempVec.set(Player.instance.closestObstacle.getPosition().x-5,25,0)),entityPool.inGameStartedMap.forEach(t=>{t.find("name","Platform").forEach(t=>{Math.abs(Player.instance.entity.getPosition().x-t.getPosition().x)<gap&&(t.enabled=!1)})}),entityPool.inGameMaps.forEach(t=>{t.find("name","Platform").forEach(t=>{Math.abs(Player.instance.entity.getPosition().x-t.getPosition().x)<gap&&(t.enabled=!1)})}),Player.instance.entity.rigidbody.enabled=!0,t=Player.instance.entity.getLocalPosition(),this.startPlatform.setPosition(Player.instance.closestObstacle.getPosition().x-5,Player.instance.closestObstacle.getPosition().y-15,t.z),this.startPlatform.children.forEach(e=>{e.rigidbody&&e.rigidbody.teleport(tempVec.set(Player.instance.closestObstacle.getPosition().x-5,Player.instance.closestObstacle.getPosition().y-15,t.z))}),Player.instance.entity.rigidbody.enabled=!0,Player.instance.entity.rigidbody.angularVelocity=tempVec.set(0,0,0),Player.instance.entity.rigidbody.linearVelocity=tempVec.set(0,0,0),Player.instance.findClosestObstacle();let e=obstacles.indexOf(Player.instance.closestObstacle);obstacles[e-1].enabled=!1,Player.instance.entity.enabled=!0,gameOvercount=0,failZoneStop=!1},GameOver.prototype.failzoneReviveNEW=function(){enableProgressBar=!1};var GameStartController=pc.createScript("gameStartController");GameStartController.prototype.initialize=function(){let t=this;this.tutorialArrow=this.app.root.findByName("rightarrow"),t.app.root.findByName("GameInitialUI").enabled=!1,t.app.root.findByName("GameUI").enabled=!0,AppRoot.instance.player.enabled=!0,t.app.root.findByName("StartedPlatform").enabled=!0,t.isPlayClicked=!0,t.isGameStart=!0,gameStarted=!0,t.app.root.findByName("Tutorial").enabled=!0,TweenController.instance.tweenToTutorialArrow(this.tutorialArrow),AppRoot.instance.failZone.enabled=!0,t.app.root.findByName("Backgrounds").enabled=!0},GameStartController.prototype.update=function(t){};var CollectableController=pc.createScript("collectableController");let collectCount=0;CollectableController.prototype.initialize=function(){CollectableController.instance=this,this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.entity.collision.on("triggend",this.onTriggerEnd,this)},CollectableController.prototype.onTriggerEnter=function(t){"Player"!=t.name&&"StickmanCollision"!=t.name||(this.collectableTween(),collectCount+=1,playSound("collect"))},CollectableController.prototype.resetCollectCount=function(){collectCount=0},CollectableController.prototype.collectableTween=function(){let t=this.entity.findByName("collectableText");t.enabled=!0,t.element.outlineThickness=.3,this.entity.findByName("Spr_Star").enabled=!1,t.tween(t.getLocalPosition()).to(tempVec.set(0,20,0),.7,pc.SineOut).on("complete",()=>{t.setLocalPosition(tempVec.set(0,0,0))}).start(),this.app.tween(t.element).to({outlineThickness:0},1.5,pc.Linear).on("complete",()=>{t.element.outlineThickness=.3}).start(),this.app.tween(t.element).to({opacity:0},.6,pc.Linear).on("complete",()=>{t.element.opacity=1,t.enabled=!1,this.entity.enabled=!1}).start()};var CreateCollectable=pc.createScript("createCollectable");CreateCollectable.prototype.initialize=function(){this.collectableTemplate=this.app.assets.find("collectable"),this.collectablePosX=30,this.collectable_Yaxis_posArray=[15,17.5,12]},CreateCollectable.prototype.update=function(t){ButtonController.instance.isGameStart&&!GameOver.instance.isGameOver&&AppRoot.instance.player.getPosition().x>this.collectablePosX-40&&this.createCollectable()},CreateCollectable.prototype.createCollectable=function(){var t=this.collectableTemplate.resource.instantiate();t.setLocalPosition(this.collectablePosX+35,this.collectable_Yaxis_posArray[getRandom(0,3)],0),this.app.root.findByName("Root").addChild(t),this.collectablePosX+=30};var AddScore=pc.createScript("addScore");AddScore.prototype.initialize=function(){AddScore.instance=this,this.entity.element.outlineThickness=0,this.on("enable",this.tweenFunc,this)},AddScore.prototype.addScore=function(){this.pointTextTween=this.entity.tween(this.entity.getLocalPosition()).to(tempVec.set(0,5,0),1.5,pc.SineOut).on("complete",()=>{this.entity.setLocalPosition(tempVec.set(3,0,0))}).start(),this.app.tween(this.entity.element).to({opacity:0},1.5,pc.Linear).on("complete",()=>{this.entity.element.opacity=1}).start()},AddScore.prototype.collectableTween=function(){};let randomStartedMapIndex,_startedMap,entityPool={startingMaps:{1:[],2:[],3:[],4:[],5:[]},createdMaps:{0:[],1:[],2:[],3:[]},inGameMaps:[],inGameStartedMap:[]},startedMapCount=5,createdMapCount=4,uniqueArr=[],triggerCount=0,lastMapPointX=0,bGroundEndPoint=0,replacedFunCount=0;var Ribbon=pc.createScript("ribbon");Ribbon.attributes.add("lifetime",{type:"number",default:.5}),Ribbon.attributes.add("xoffset",{type:"number",default:-.8}),Ribbon.attributes.add("yoffset",{type:"number",default:1}),Ribbon.attributes.add("height",{type:"number",default:.4});var MAX_VERTICES=200,VERTEX_SIZE=4;Ribbon.prototype.initialize=function(){var t={attributes:{aPositionAge:pc.SEMANTIC_POSITION},vshader:["attribute vec4 aPositionAge;","","uniform mat4 matrix_viewProjection;","uniform float trail_time;","","varying float vAge;","","void main(void)","{","    vAge = trail_time - aPositionAge.w;","    gl_Position = matrix_viewProjection * vec4(aPositionAge.xyz, 1.0);","}"].join("\n"),fshader:["precision mediump float;","","varying float vAge;","","uniform float trail_lifetime;","","vec3 rainbow(float x)","{","float level = floor(x * 0.1);","float r = 1.0;","float g = 1.0;","float b = 1.0;","return vec3(r, g, b);","}","void main(void)","{","    gl_FragColor = vec4(rainbow(vAge / trail_lifetime), (1.0 - (vAge / (trail_lifetime))) * 0.1);","}"].join("\n")},e=new pc.Shader(this.app.graphicsDevice,t);this.material=new pc.Material,this.material.shader=e,this.material.setParameter("trail_time",0),this.material.setParameter("trail_lifetime",this.lifetime),this.material.cull=pc.CULLFACE_FRONT,this.material.blend=!0,this.material.blendSrc=pc.BLENDMODE_SRC_ALPHA,this.material.blendDst=pc.BLENDMODE_ONE_MINUS_SRC_ALPHA,this.material.blendEquation=pc.BLENDEQUATION_ADD,this.material.depthWrite=!1,this.timer=0,this.vertices=[],this.vertexData=new Float32Array(MAX_VERTICES*VERTEX_SIZE),this.vertexIndexArray=[];for(var i=0;i<this.vertexData.length;++i)this.vertexIndexArray.push(i);this.mesh=new pc.Mesh(this.app.graphicsDevice),this.mesh.clear(!0,!1),this.mesh.setPositions(this.vertexData,VERTEX_SIZE,MAX_VERTICES),this.mesh.setIndices(this.vertexIndexArray,MAX_VERTICES),this.mesh.update(pc.PRIMITIVE_TRISTRIP);var n=new pc.MeshInstance(this.mesh,this.material);this.entity.addComponent("render",{meshInstances:[n],layers:[this.app.scene.layers.getLayerByName("Trail").id]}),this.entity.render.enabled=!1},Ribbon.prototype.reset=function(){this.timer=0,this.vertices=[]},Ribbon.prototype.spawnNewVertices=function(){var t=this.entity,e=t.getPosition();let i;t.up.clone().scale(this.height);var n=this.timer;i="point"===this.entity.name?[e.x,e.y+this.height,e.z,e.x,e.y,e.z-this.height]:[e.x,e.y,e.z-this.height,e.x,e.y-this.height,e.z],this.vertices.unshift({spawnTime:n,vertexPair:i})},Ribbon.prototype.clearOldVertices=function(){for(var t=this.vertices.length-1;t>=0;t--){var e=this.vertices[t];if(!(this.timer-e.spawnTime>=this.lifetime))break;this.vertices.pop()}},Ribbon.prototype.prepareVertexData=function(){for(var t=0;t<this.vertices.length;t++){var e=this.vertices[t];if(this.vertexData[8*t+0]=e.vertexPair[0],this.vertexData[8*t+1]=e.vertexPair[1],this.vertexData[8*t+2]=e.vertexPair[2],this.vertexData[8*t+3]=e.spawnTime,this.vertexData[8*t+4]=e.vertexPair[3],this.vertexData[8*t+5]=e.vertexPair[4],this.vertexData[8*t+6]=e.vertexPair[5],this.vertexData[8*t+7]=e.spawnTime,this.vertexData.length===t)break}},Ribbon.prototype.update=function(t){if(this.timer+=t,this.material.setParameter("trail_time",this.timer),this.clearOldVertices(),this.spawnNewVertices(),this.vertices.length>1){this.prepareVertexData();var e=2*this.vertices.length,i=MAX_VERTICES;e<i&&(i=e),this.mesh.setPositions(this.vertexData,VERTEX_SIZE,i),this.mesh.setIndices(this.vertexIndexArray,i),this.mesh.update(pc.PRIMITIVE_TRISTRIP),this.entity.render.enabled=!0}};var HighScoreController=pc.createScript("highScoreController");let previousTimeStamp1,previousTimeStamp2;HighScoreController.prototype.initialize=function(){HighScoreController.instance=this,this.highScoreText=this.app.root.findByName("HighScoreText")},HighScoreController.prototype.updateHighScore=function(){playerData.newPlayer?(this.highScoreText.element.text=parseInt(AppRoot.instance.distanceText.element.text),playerData.highScore=parseInt(AppRoot.instance.distanceText.element.text)):(parseInt(AppRoot.instance.distanceText.element.text)>=playerData.highScore&&(playerData.highScore=parseInt(AppRoot.instance.distanceText.element.text),this.highScoreText.element.text=parseInt(AppRoot.instance.distanceText.element.text)),this.highScoreText.element.text=playerData.highScore)},window.requestAnimationFrame(renderLoop);let mapColor=[{r:255,g:195,b:195},{r:250,g:195,b:255},{r:195,g:198,b:255},{r:195,g:255,b:208},{r:230,g:255,b:195},{r:255,g:223,b:195}];var ColorChanger=pc.createScript("colorChanger");ColorChanger.prototype.initialize=function(){ColorChanger.instance=this,this.initBgrounds=this.app.root.find("name","InitBg")},ColorChanger.prototype.changeColor=function(){let t=getRandom(0,6);this.entity.children.forEach(e=>{let i=new pc.Color(e.element.color.r,e.element.color.g,e.element.color.b);app.tween(i).to(new pc.Color(mapColor[t].r/255,mapColor[t].g/255,mapColor[t].b/255),1,pc.Linear).on("update",function(){e.element.color=i}).start()}),this.initBgrounds.forEach(e=>{let i=new pc.Color(e.element.color.r,e.element.color.g,e.element.color.b);app.tween(i).to(new pc.Color(mapColor[t].r/255,mapColor[t].g/255,mapColor[t].b/255),1,pc.Linear).on("update",function(){e.element.color=i}).start()})};var SettingsButton=pc.createScript("settingsButton");SettingsButton.prototype.initialize=function(){this.open=!1;let t=this.entity.findByName("muteButton"),e=t.findByName("mute"),i=t.findByName("unmute");e.element.opacity=0,i.element.opacity=0,this.entity.button.on("click",async()=>{this.open?(await sleep(150),t.button.active=!1,this.entity.findByName("image").tween(this.entity.getLocalEulerAngles()).rotate({x:0,y:0,z:-45},.3,pc.Linear).start(),app.tween(e.element).to({opacity:0},.3,pc.Linear).start(),app.tween(i.element).to({opacity:0},.3,pc.Linear).start(),t.tween(t.getLocalPosition()).to({x:0,y:0,z:0},.3,pc.Linear).start(),this.open=!1):(this.entity.findByName("image").tween(this.entity.getLocalEulerAngles()).rotate({x:0,y:0,z:45},.3,pc.Linear).start(),app.tween(e.element).to({opacity:1},.3,pc.Linear).start(),app.tween(i.element).to({opacity:1},.3,pc.Linear).start(),t.tween(t.getLocalPosition()).to({x:100,y:0,z:0},.3,pc.Linear).start(),t.button.active=!0,this.open=!0)}),playerData.mute?(this.entity.findByName("mute").enabled=!0,this.entity.findByName("unmute").enabled=!1):(this.entity.findByName("mute").enabled=!1,this.entity.findByName("unmute").enabled=!0)};var MuteButton=pc.createScript("muteButton");MuteButton.prototype.initialize=function(){var t=this.entity.findByName("muteButton");null!=t&&(window.famobi.hasFeature("external_mute")&&(t.enabled=!1),this.entity.button.on("click",()=>{window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Level:Mute"}),playerData.mute?(playerData.mute=!1,updatePlayerData(),this.entity.findByName("mute").enabled=!1,this.entity.findByName("unmute").enabled=!0):(playerData.mute=!0,updatePlayerData(),this.entity.findByName("mute").enabled=!0,this.entity.findByName("unmute").enabled=!1)}))};var Sound=pc.createScript("sound");let sound;Sound.prototype.initialize=function(){sound=this.entity};var ButtonController=pc.createScript("buttonController");ButtonController.prototype.initialize=function(){ButtonController.instance=this,this.isPlayClicked=!0,this.isGameStart=!0,this.entity.button.on("click",this.onButtonClick,this),this.scoreForRevive=10,this.restartPanelStatus=!1},ButtonController.prototype.onButtonClick=function(){"PlayButton"==this.entity.name&&(document.getElementById("application-canvas").style.height="100%",document.getElementById("application-canvas").style.width="100%",document.getElementById("application-canvas").style.margin="0 0 0 0",this.entity.button.active=!1,addEventListener("resize",t=>{document.getElementById("application-canvas").style.height="100%",document.getElementById("application-canvas").style.width="100%",document.getElementById("application-canvas").style.margin="0 0 0 0"})),"RestartButton"===this.entity.name&&(window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Result:Restart"}),showADSPanel?GameOver.instance.restart(!1):GameOver.instance.restart(!0)),"ReviveButton"===this.entity.name&&(window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Design",eventId:"Button:Result:Revive"}),adsPassCheck=!0,window.famobi?window.famobi.rewardedAd(function(t){t.rewardGranted?(showADSPanel=!0,ButtonController.instance.reviveButtonMethod()):(showADSPanel=!1,GameOver.instance.restart(!0))}):(showADSPanel=!0,ButtonController.instance.reviveButtonMethod()))},ButtonController.prototype.reviveButtonMethod=function(){adsPassCheck=!0,runOneTime=!1,killedFromFailZone?(stopSpriteChange=!1,GameOver.instance.failzoneRevive(),setTimeout(()=>{this.setGameStatesForRevive(),killedFromFailZone=!1},100)):(stopSpriteChange=!1,GameOver.instance.revive(),setTimeout(()=>{
this.setGameStatesForRevive()},100))},ButtonController.prototype.reviveAndRestartGame=function(){getRandomStartedMap(),collectCount=0,FailZone.instance.riveveFailZoneSpeed(),preScore=0,reviveState=!1,Player.instance.maxHoldLimit=30,AppRoot.instance.reviveUi.enabled=!1,GameOver.instance.isGameOver=!1},ButtonController.prototype.setGameStatesForNewGame=function(){score=0,DistanceController.instance.distance=.1,AppRoot.instance.distanceText.element.text=0,getRandomStartedMap(),FailZone.instance.resetFailZoneSpeed(),collectCount=0,preScore=0,reviveState=!1,Player.instance.maxHoldLimit=30,showADSPanel&&(showADSPanel=!1,this.restartPanelStatus=!0,GameOver.instance.adsPanel.enabled=!0,GameOver.instance.noAdsPanel.enabled=!1),GameOver.instance.noAdsPanel.enabled=!1,AppRoot.instance.reviveUi.enabled=!1,GameOver.instance.isGameOver=!1,Player.instance.savedPoint=0,AppRoot.instance.distanceText.enabled=!0,GameOver.instance.noAdsPanelHighScoreGroup.setLocalPosition(0,0,0)},ButtonController.prototype.setGameStatesForRevive=function(){AppRoot.instance.reviveUi.enabled=!1,FailZone.instance.riveveFailZoneSpeed(),Player.instance.maxHoldLimit=30,reviveState=!1,GameOver.instance.isGameOver=!1},ButtonController.prototype.positionReset=function(){FailZone.instance.entity.setPosition(tempVec.set(-93,0,0)),AppRoot.instance.backgrounds.forEach((t,e)=>{t.setPosition(tempVec.set(90*e-33,18.143,0))}),this.app.root.findByName("Backgrounds").setPosition(tempVec.set(-22,-3,0)),bGroundEndPoint=585};var HandController=pc.createScript("handController");HandController.prototype.initialize=function(){HandController.instance=this},HandController.prototype.handAndCircleTween=function(){let t=this.app.root.findByName("Circle");t.element.opacity=1,this.entity.setLocalScale(tempVec.set(1,1,1)),this.circleTween=t.tween(t.element).to({opacity:0},.6,pc.Linear).yoyo(!0).loop(!0).start(),this.handTween=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1.3,1.3,1.3),.6,pc.SineOut).yoyo(!0).loop(!0).start()},HandController.prototype.stopHandAndCircleTween=function(){this.circleTween.stop(),this.handTween.stop()};var PointTextController=pc.createScript("pointTextController");PointTextController.prototype.initialize=function(){PointTextController.instance=this,this.entity.element.outlineThickness=.3,this.on("enable",this.tweenFunc,this),this.tweenFunc()},PointTextController.prototype.tweenFunc=function(){this.entity.tween(this.entity.getLocalPosition()).to(tempVec.set(this.entity.getLocalPosition().x,5,this.entity.getLocalPosition().z),1.5,pc.SineOut).on("complete",()=>{this.entity.setLocalPosition(tempVec.set(this.entity.getLocalPosition().x,0,0))}).start(),this.app.tween(this.entity.element).to({outlineThickness:0},1.5,pc.Linear).on("complete",()=>{this.entity.element.outlineThickness=.3}).start(),this.app.tween(this.entity.element).to({opacity:0},1.5,pc.Linear).on("complete",()=>{this.entity.element.opacity=1,this.entity.enabled=!1}).start()};var PauseButton=pc.createScript("pauseButton");PauseButton.prototype.initialize=function(){this.entity.button.on("click",()=>{pause?(this.resume(),this.setTheRightSpirteOn()):(this.pause(),this.setTheRightSpirteOn())})},PauseButton.prototype.pause=function(){app.timeScale=0,pause=!0},PauseButton.prototype.resume=function(){app.timeScale=1.2,pause=!1},PauseButton.prototype.setTheRightSpirteOn=function(){this.entity.findByName("pause").enabled?this.entity.findByName("pause").enabled=!1:this.entity.findByName("pause").enabled=!0,this.entity.findByName("resume").enabled?this.entity.findByName("resume").enabled=!1:this.entity.findByName("resume").enabled=!0};