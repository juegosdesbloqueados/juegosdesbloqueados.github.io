var Module=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(t){var n,r;(t=void 0!==(t=t||{})?t:{}).ready=new Promise((function(e,t){n=e,r=t}));var i,a=Object.assign({},t),o=[],s="./this.program",u=!0,c=!1,l="";(u||c)&&(c?l=self.location.href:"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),e&&(l=e),l=0!==l.indexOf("blob:")?l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):"",e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},c&&(i=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var d,f=t.print||console.log.bind(console),m=t.printErr||console.warn.bind(console);Object.assign(t,a),a=null,t.arguments&&(o=t.arguments),t.thisProgram&&(s=t.thisProgram),t.quit&&t.quit,t.wasmBinary&&(d=t.wasmBinary);var h;t.noExitRuntime;"object"!=typeof WebAssembly&&N("no native wasm support detected");var p,g,E,_,x,T=!1,w="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function b(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&w)return w.decode(e.subarray(t,i));for(var a="";t<i;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)a+=String.fromCharCode(o);else{var c=o-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}function v(e,t){return e?b(E,e,t):""}function A(e,t,n,r){if(!(r>0))return 0;for(var i=n,a=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function y(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}function I(e){p=e,t.HEAP8=g=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=_=new Int32Array(e),t.HEAPU8=E=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=x=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}t.INITIAL_MEMORY;var R,L=[],S=[],P=[];var C=0,F=null,B=null;function N(e){t.onAbort&&t.onAbort(e),m(e="Aborted("+e+")"),T=!0,1,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw r(n),n}var M,O,D="data:application/octet-stream;base64,";function U(e){return e.startsWith(D)}function k(e){try{if(e==M&&d)return new Uint8Array(d);if(i)return i(e);throw"both async and sync fetching of the wasm failed"}catch(e){N(e)}}function G(e){for(;e.length>0;)e.shift()(t)}U(M="fmb.05_04.05_sort_water_2023.wasm")||(O=M,M=t.locateFile?t.locateFile(O,l):l+O);var V={helpers:{returnBool:function(e,t,n){void 0===n&&(n=!1),R.get(t)(e,n)},returnStr:function(e,n,r){void 0===r&&(r="");var i=me(r);R.get(n)(e,i),t._free(i)},callCallback:function(e,t){void 0===t&&(t=!1),R.get(e.callback)(e.context,t),e.context=null,e.callback=null}},w4_getLink:function(){var e=location.protocol+"//"+location.host;V.helpers.returnStr(V.w4_getLinkContext,V.w4_getLinkCallback,e)},isScriptLoaded:function(e){return Boolean(document.querySelector('script[src="'+e+'"]'))},loadScript:function(e){return new Promise((function(t,n){try{var r=document.createElement("script");r.setAttribute("src",e),r.setAttribute("charSet","utf-8"),r.setAttribute("type","text/javascript"),r.addEventListener("load",(function(){console.log("script loaded success: "+e),t()})),r.addEventListener("error",(function(){console.error("script not loaded: ",e),n(-1)})),document.head.appendChild(r)}catch(t){console.error("script not loaded ("+t+"): "+e),n(-1)}}))},LITE_OnExternalPauseHandler:function(){void 0!==window.h5games&&(window.addEventListener("w4OnPause",(function(){V.helpers.returnBool(V.LITE_OnExternalPauseHandlerContext,V.LITE_OnExternalPauseHandlerCallback,!0)})),window.addEventListener("w4OnResume",(function(){V.helpers.returnBool(V.LITE_OnExternalPauseHandlerContext,V.LITE_OnExternalPauseHandlerCallback,!1)})))},LITE_OnExternalMuteHandler:function(){void 0!==window.h5games&&(window.addEventListener("w4OnMute",(function(){V.helpers.returnBool(V.LITE_OnExternalMuteHandlerContext,V.LITE_OnExternalMuteHandlerCallback,!0)})),window.addEventListener("w4OnUnmute",(function(){V.helpers.returnBool(V.LITE_OnExternalMuteHandlerContext,V.LITE_OnExternalMuteHandlerCallback,!1)})))},LITE_OnExternalStopGameHandler:function(){void 0!==window.h5games&&window.addEventListener("w4OnStopGame",(function(){V.helpers.returnBool(V.LITE_OnExternalStopGameHandlerContext,V.LITE_OnExternalStopGameHandlerCallback,!0)}))},LITE_OnExternalNextLevelHandler:function(){void 0!==window.h5games&&window.addEventListener("w4OnNextLevel",(function(e){var t=e.detail.level.toString();V.helpers.returnStr(V.LITE_OnExternalNextLevelHandlerContext,V.LITE_OnExternalNextLevelHandlerCallback,t)}))},fmbAPI_OnExternalPauseHandler:function(){void 0!==window.famobi&&(window.famobi.onRequest("pauseGameplay",(function(){V.helpers.returnBool(V.fmbAPI_OnExternalPauseHandlerContext,V.fmbAPI_OnExternalPauseHandlerCallback,!0)})),window.famobi.onRequest("resumeGameplay",(function(){V.helpers.returnBool(V.fmbAPI_OnExternalPauseHandlerContext,V.fmbAPI_OnExternalPauseHandlerCallback,!1)})))},fmbAPI_OnExternalMuteHandler:function(){void 0!==window.famobi&&(window.famobi.onRequest("disableAudio",(function(){V.helpers.returnBool(V.fmbAPI_OnExternalMuteHandlerContext,V.fmbAPI_OnExternalMuteHandlerCallback,!0)})),window.famobi.onRequest("enableAudio",(function(){V.helpers.returnBool(V.fmbAPI_OnExternalMuteHandlerContext,V.fmbAPI_OnExternalMuteHandlerCallback,!1)})))},fmbAPI_OnOffsetChangeHandler:function(){void 0!==window.famobi&&(window.famobi.onOffsetChange((e=>{V.helpers.returnBool(V.fmbAPI_OnOffsetChangeHandlerContext,V.fmbAPI_OnOffsetChangeHandlerCallback,!0)})),window.addEventListener("w4TriggerOfssetsChange",(function(e){window.famobi.getOffsets();V.helpers.returnBool(V.fmbAPI_OnOffsetChangeHandlerContext,V.fmbAPI_OnOffsetChangeHandlerCallback,!0)})))}};var H=function(e,t){return new Promise((function(n,r){var i=new XMLHttpRequest;i.open("GET",e.trim(),!0),i.responseType=t||"arraybuffer",i.onload=function(){200===i.status?n({type:i.getResponseHeader("Content-Type"),data:i.response,code:i.status,text:i.statusText}):r({code:i.status,text:i.statusText})},i.onabort=function(){r({code:-2,text:i.statusText})},i.onerror=function(e){de.error("XML HTTP Request: type: "+e.type+" loaded: "+e.loaded+" bytes"),r({code:-1,text:i.statusText})},i.send()}))},X=function(e,n){if(0!==Object.keys(e).length){const r=[];for(const t in e)r.push(W.open(t,e[t]));Promise.all(r).then((function(){t.VFSLoadedCallback&&t.VFSLoadedCallback(),R.get(n)()}))}else R.get(n)()},W={Files:{},loaded:!1,UnpackCallback:void 0,getArchiveFilePath:function(e){let t=e.split(".")[0];return"/"==t.charAt(0)&&(t=t.substr(1)),t},onFileReceived:function(e,n){if(n.type&&n.type.includes("w4pack")||e.includes("w4pack")){const e=n.data;if(void 0!==e){const n=e.byteLength,r=t._malloc(n),i=new Uint8Array(t.HEAPU8.buffer,r,n);i.set(new Uint8Array(e)),W.UnpackCallback=function(e,t,n,r){const i=new Uint8Array(h.buffer,n,r),a={type:v(t),data:i};W.put(v(e),a)},t._loadZipFile(i.byteOffset,n)}}else W.put(e,n)},open:function(e,t){if(this.parse(e,t,this.onFileReceived))return;return function(t){return new Promise(((n,r)=>{H(t).then((function(t){W.onFileReceived(e,t),n()}),(function(i){de.warning("XML HTTP Request: "+t+" on error status: "+i.code+" "+i.text),H(t).then((function(t){W.onFileReceived(e,t),n()}),(function(e){de.error("XML HTTP Request: again "+t+" on error status: "+e.code+" "+e.text),r()}))}))}))}(t)},Ascii85:{_alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!#$%&()*+-;<=>?@^_`{|}~",decode:function(e){let t,n,r,i,a,o,s=W.Ascii85._alphabet,u="";for(r=0,a=e.length;r<a;){for(t=[0,0,0,0,0],i=0;i<5;i++)e[r]&&(t[i]=s.indexOf(e[r++]));for(n=t[0],i=1;i<5;i++)n=85*n+t[i];for(o=[0,0,0,0],i=0;i<4;i++)o[3-i]=String.fromCharCode(n%256),n=Math.floor(n/256);for(i=0;i<4;i++)u+=o[i]}return u}},parse:function(e,t,n){const r=";base85,",i=t.substring(0,64),a=i.indexOf(r);if(-1!=a){const r=i.substring(5,a),o=t.substring(a+8),s=W.Ascii85.decode(o),u=s.length,c=new ArrayBuffer(u),l=new Uint8Array(c);for(let e=0;e<u;e++)l[e]=s.charCodeAt(e);return n(e,{type:r,data:c}),!0}return!1},close:function(e){delete W.Files[e]},put:function(e,t){W.Files[e]=t},isExists:function(e){return void 0!==W.Files[e]},isURL:function(e){let t;try{t=new URL(e)}catch(e){return!1}return!0},get:function(e){const t=W.Files[e];return void 0===t&&(console.log(W.Files),ce("No file "+e+" in file system")),t}};function Y(e){try{return h.grow(e-p.byteLength+65535>>>16),I(h.buffer),1}catch(e){}}var z={};function j(){if(!j.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(var t in z)void 0===z[t]?delete e[t]:e[t]=z[t];var n=[];for(var t in e)n.push(t+"="+e[t]);j.strings=n}return j.strings}function K(e,t,n){for(var r=0;r<e.length;++r)g[t++>>0]=e.charCodeAt(r);n||(g[t>>0]=0)}var Z=[null,[],[]];function q(e,t){var n=Z[e];0===t||10===t?((1===e?f:m)(b(n,0)),n.length=0):n.push(t)}function J(e){return e%4==0&&(e%100!=0||e%400==0)}var Q=[31,29,31,30,31,30,31,31,30,31,30,31],$=[31,28,31,30,31,30,31,31,30,31,30,31];function ee(e,t){g.set(e,t)}function te(e,t,n,r){var i=_[r+40>>2],a={tm_sec:_[r>>2],tm_min:_[r+4>>2],tm_hour:_[r+8>>2],tm_mday:_[r+12>>2],tm_mon:_[r+16>>2],tm_year:_[r+20>>2],tm_wday:_[r+24>>2],tm_yday:_[r+28>>2],tm_isdst:_[r+32>>2],tm_gmtoff:_[r+36>>2],tm_zone:i?v(i):""},o=v(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)o=o.replace(new RegExp(u,"g"),s[u]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function f(e,t){return d(e,t,"0")}function m(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function h(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){var t=function(e,t){for(var n=new Date(e.getTime());t>0;){var r=J(n.getFullYear()),i=n.getMonth(),a=(r?Q:$)[i];if(!(t>a-n.getDate()))return n.setDate(n.getDate()+t),n;t-=a-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=h(n),a=h(r);return m(i,t)<=0?m(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return f((e.tm_year+1900)/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return p(e).toString().substring(2)},"%G":function(e){return p(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+function(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}(J(e.tm_year+1900)?Q:$,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return f(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var n=(e.tm_wday+371-e.tm_yday)%7;4==n||3==n&&J(e.tm_year)||(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(4==r||5==r&&J(e.tm_year%400-1))&&t++}return f(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return f(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var u in o=o.replace(/%%/g,"\0\0"),g)o.includes(u)&&(o=o.replace(new RegExp(u,"g"),g[u](a)));o=o.replace(/\0\0/g,"%");var E,x,T,w,b,I,R=(E=o,x=!1,w=T>0?T:y(E)+1,b=new Array(w),I=A(E,b,0,b.length),x&&(b.length=I),b);return R.length>t?0:(ee(R,e),R.length-1)}var ne={context:void 0,debugLogging:!1,debugCheckErrors:!0,loadedGeometries:0,loadedTextures:0,frame:0,frameRenderCalls:0,frameTriangles:0,framePoints:0,frameLines:0,initialize:function(e){this.context=e},startFrame:function(){this.frame++,this.frameRenderCalls=0,this.frameTriangles=0,this.framePoints=0,this.frameLines=0},updateFrame:function(e,t,n){switch(this.frameRenderCalls++,mode){case Ve.TRIANGLES:this.frameTriangles+=n*(t/3);break;case Ve.LINES:this.frameLines+=n*(t/2);break;case Ve.LINE_STRIP:this.frameLines+=n*(t-1);break;case Ve.LINE_LOOP:this.frameLines+=n*t;break;case Ve.POINTS:this.framePoints+=n*t;break;default:console.error("Unknown primitive type: ",e)}}},re={context:void 0,_primitiveTypeMap:void 0,initialize:function(e){this.context=e,this._primitiveTypeMap={0:Ve.POINTS,1:Ve.LINE_STRIP,2:Ve.LINE_LOOP,3:Ve.LINES,4:Ve.TRIANGLE_STRIP,5:Ve.TRIANGLE_FAN,6:Ve.TRIANGLES}},number2glPrimitiveType:function(e){return this._primitiveTypeMap[e]},number2glShaderType:function(e){switch(e){case 1:return Ve.VERTEX_SHADER;case 2:return Ve.FRAGMENT_SHADER}de.error("Unknown shader type: "+e)},glShaderType2number:function(e){switch(e){case Ve.VERTEX_SHADER:return 1;case Ve.FRAGMENT_SHADER:return 2}de.error("Unknown shader type: "+e)},number2glClearMask:function(e){let t=0;return 0!=(1&e)&&(t|=Ve.COLOR_BUFFER_BIT),0!=(2&e)&&(t|=Ve.DEPTH_BUFFER_BIT),t},number2glBlendEnum:function(e){switch(e){case 0:return Ve.ZERO;case 1:return Ve.ONE;case 2:return Ve.SRC_COLOR;case 3:return Ve.ONE_MINUS_SRC_COLOR;case 4:return Ve.DST_COLOR;case 5:return Ve.ONE_MINUS_DST_COLOR;case 6:return Ve.SRC_ALPHA;case 7:return Ve.ONE_MINUS_SRC_ALPHA;case 8:return Ve.DST_ALPHA;case 9:return Ve.ONE_MINUS_DST_ALPHA;case 10:return Ve.CONSTANT_COLOR;case 11:return Ve.ONE_MINUS_CONSTANT_COLOR;case 12:return Ve.CONSTANT_ALPHA;case 13:return Ve.ONE_MINUS_CONSTANT_ALPHA;case 14:return Ve.SRC_ALPHA_SATURATE}return de.error("Unknown blend enum: "+e),Ve.ZERO},number2glCullFaceMode:function(e){switch(e){case 0:return Ve.BACK;case 1:return Ve.FRONT;case 2:return Ve.FRONT_AND_BACK;case 3:return Ve.ZERO}return de.error("Unknown cull face enum: "+e),Ve.BACK},string2glValueEnum:function(e){switch(e){case"int":return Ve.INT;case"float":return Ve.FLOAT;case"w4::math::vec2":return Ve.FLOAT_VEC2;case"w4::math::vec3":return Ve.FLOAT_VEC3;case"w4::math::vec4":return Ve.FLOAT_VEC4;case"w4::math::mat3":return Ve.FLOAT_MAT3;case"w4::math::mat4":return Ve.FLOAT_MAT4;case"TextureOuterId":return Ve.SAMPLER_2D}de.error("Unknown GL value type: "+e)},glValueEnum2size:function(e){switch(e){case"ID":case Ve.FLOAT:return 1;case Ve.FLOAT_VEC2:return 2;case Ve.FLOAT_VEC3:return 3;case Ve.FLOAT_VEC4:return 4;case Ve.INT:return 1;case Ve.INT_VEC2:return 2;case Ve.INT_VEC3:return 3;case Ve.INT_VEC4:return 4;case Ve.BOOL:return 1;case Ve.BOOL_VEC2:return 2;case Ve.BOOL_VEC3:return 3;case Ve.BOOL_VEC4:case Ve.FLOAT_MAT2:return 4;case Ve.FLOAT_MAT3:return 9;case Ve.FLOAT_MAT4:return 16;case Ve.SAMPLER_2D:case Ve.SAMPLER_CUBE:return 1}return de.error("Unknown uniform type: "+e),0}},ie={context:void 0,isWebGL2:!1,drawBuffers:!1,logarithmicDepthBuffer:!1,vertexTextures:!1,floatFragmentTextures:!1,floatVertexTextures:!1,maxPrecision:0,maxAnisotropy:0,maxTextures:0,maxVertexTextures:0,maxTextureSize:0,maxCubemapSize:0,maxVertexAttributes:0,maxVertexUniforms:0,maxVaryings:0,maxFragmentUniforms:0,maxSamples:0,hasFloatTextures:!1,hasDepthTextures:!1,depthSupportedFormat:null,depthInternalFormat:null,_extensions:{},initialize:function(e){if(this.context=e,this.isWebGL2="undefined"!=typeof WebGL2RenderingContext&&this.context instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&this.context instanceof WebGL2ComputeRenderingContext,this.isWebGL2)this.getExtension("EXT_color_buffer_float"),this.hasExtension("EXT_color_buffer_float")&&(this.hasFloatTextures=!0),this.hasDepthTextures=!0,this.depthSupportedFormat=this.context.DEPTH_COMPONENT24,this.depthInternalFormat=this.context.DEPTH_COMPONENT24;else{if(de.error("WebGL1! 6.7% - https://developer.android.com/about/dashboards#OpenGL"),this.getExtension("OES_texture_float"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_standard_derivatives"),this.getExtension("ANGLE_instanced_arrays"),this.hasExtension("OES_element_index_uint")||ce("OES_element_index_uint isn't supported"),this.hasExtension("OES_vertex_array_object")){const e=this.getExtension("OES_vertex_array_object");this.context.createVertexArray=function(){return e.createVertexArrayOES()},this.context.bindVertexArray=function(t){e.bindVertexArrayOES(t)},this.context.deleteVertexArray=function(t){e.deleteVertexArrayOES(t)}}else ce("OES_vertex_array_object isn't supported");this.hasExtension("WEBGL_depth_texture")&&(this.hasDepthTextures=!0,this.depthSupportedFormat=this.context.DEPTH_COMPONENT,this.depthInternalFormat=this.context.DEPTH_COMPONENT16)}if(this.getExtension("OES_texture_float_linear"),this.getExtension("EXT_color_buffer_half_float"),this.getExtension("WEBGL_multisampled_render_to_texture"),this.hasExtension("EXT_texture_filter_anisotropic")){const e=this.getExtension("EXT_texture_filter_anisotropic");this.maxAnisotropy=this.context.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;void 0===this.context.getShaderPrecisionFormat&&(this.context.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});let t="highp";this.maxPrecision=this.getMaxPrecision(t),this.maxPrecision!==t&&de.warning(t+" not supported, using "+this.maxPrecision),this.drawBuffers=this.isWebGL2||this.hasExtension("WEBGL_draw_buffers"),this.logarithmicDepthBuffer=!0,this.maxTextures=this.context.getParameter(this.context.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=this.context.getParameter(this.context.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=this.context.getParameter(this.context.MAX_TEXTURE_SIZE),this.maxCubemapSize=this.context.getParameter(this.context.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxVertexAttributes=this.context.getParameter(this.context.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=this.context.getParameter(this.context.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=this.context.getParameter(this.context.MAX_VARYING_VECTORS),this.maxFragmentUniforms=this.context.getParameter(this.context.MAX_FRAGMENT_UNIFORM_VECTORS),this.maxSamples=this.isWebGL2?this.context.getParameter(this.context.MAX_SAMPLES):0,this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=this.isWebGL2||this.hasExtension("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures,de.__internal.pushIndentLevel(),de.trace("isWebGL2: "+this.isWebGL2),de.trace("drawBuffers: "+this.drawBuffers),de.trace("logarithmicDepthBuffer: "+this.logarithmicDepthBuffer),de.trace("vertexTextures: "+this.vertexTextures),de.trace("floatFragmentTextures: "+this.floatFragmentTextures),de.trace("floatVertexTextures: "+this.floatVertexTextures),de.trace("maxPrecision: "+this.maxPrecision),de.trace("maxAnisotropy: "+this.maxAnisotropy),de.trace("maxTextures: "+this.maxTextures),de.trace("maxVertexTextures: "+this.maxVertexTextures),de.trace("maxTextureSize: "+this.maxTextureSize),de.trace("maxCubemapSize: "+this.maxCubemapSize),de.trace("maxVertexAttributes: "+this.maxVertexAttributes),de.trace("maxVertexUniforms: "+this.maxVertexUniforms),de.trace("maxVaryings: "+this.maxVaryings),de.trace("maxFragmentUniforms: "+this.maxFragmentUniforms),de.trace("maxSamples: "+this.maxSamples),de.trace("hasFloatTextures: "+this.hasFloatTextures),de.trace("hasDepthTextures: "+this.hasDepthTextures),de.trace("depthSupportedFormat: "+this.depthSupportedFormat),de.trace("depthInternalFormat: "+this.depthInternalFormat),de.trace("extensions:"),de.__internal.pushIndentLevel();for(const e in this._extensions)de.trace(e+": "+(null!==this._extensions[e]));de.__internal.popIndentLevel(),de.__internal.popIndentLevel()},getExtension:function(e){let t=this._extensions[e];if(void 0!==t)return t;switch(e){case"WEBGL_depth_texture":t=this.context.getExtension("WEBGL_depth_texture")||this.context.getExtension("MOZ_WEBGL_depth_texture")||this.context.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=this.context.getExtension("EXT_texture_filter_anisotropic")||this.context.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.context.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=this.context.getExtension("WEBGL_compressed_texture_s3tc")||this.context.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||this.context.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=this.context.getExtension("WEBGL_compressed_texture_pvrtc")||this.context.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=this.context.getExtension(e)}return this._extensions[e]=t,t},hasExtension:function(e){return null!==this.getExtension(e)},getMaxPrecision:function(e){let t=e;if("highp"===t){if(this.context.getShaderPrecisionFormat(this.context.VERTEX_SHADER,this.context.HIGH_FLOAT).precision>0&&this.context.getShaderPrecisionFormat(this.context.FRAGMENT_SHADER,this.context.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&this.context.getShaderPrecisionFormat(this.context.VERTEX_SHADER,this.context.MEDIUM_FLOAT).precision>0&&this.context.getShaderPrecisionFormat(this.context.FRAGMENT_SHADER,this.context.MEDIUM_FLOAT).precision>0?"mediump":"lowp"},getContextAttributes:function(){return this.context.getContextAttributes()}},ae={canvas:void 0,context:void 0,_isContextLost:!1,_onContextLostHandler:function(e){de.warning("GL: Context lost"),e.preventDefault(),ae._isContextLost=!0},_onContextRestoreHandler:function(){de.warning("GL: Context restored"),ae._isContextLost=!1},_onContextCreationErrorHandler:function(e){de.error("GL: Context creating error: ",e.statusMessage)},createContext:function(e,t=!1){this.context&&ce("Context was already initialized"),this.canvas=e;const n=["webgl2","experimental-webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];t&&(de.warning("GL: Forced WebGL1"),n.shift(),n.shift());for(let t=0;t<n.length&&(this.context=e.getContext(n[t],{preserveDrawingBuffer:!0,alpha:!1}),!this.context);++t);this.context?de.trace("WebGL context initialized"):ce("WebGL context init failed"),Ve=this.context,this.canvas.addEventListener("webglcontextlost",this._onContextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this._onContextRestoreHandler,!1),this.canvas.addEventListener("webglcontextcreationerror",this._onContextCreationErrorHandler,!1),ne.initialize(this.context),re.initialize(this.context),ie.initialize(this.context),this.context.enable(this.context.CULL_FACE),this.context.cullFace(this.context.BACK),this.context.enable(this.context.DEPTH_TEST),this.context.depthFunc(this.context.LESS),ne.debugLogging&&de.trace("GL: createContext")},destroyContext:function(){de.warning("GL: destroyContext"),this.canvas.removeEventListener("webglcontextlost",this._onContextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this._onContextRestoreHandler,!1),this.canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationErrorHandler,!1)},forceContextLoss:function(){const e=ie.getExtension("WEBGL_lose_context");e&&(de.trace("GL: forceContextLoss"),e.loseContext())},forceContextRestore:function(){const e=ie.getExtension("WEBGL_lose_context");e&&(de.trace("GL: forceContextRestore"),e.restoreContext())},prepareRender:function(){this.context.enable(this.context.CULL_FACE),this.context.cullFace(this.context.BACK),this.context.enable(this.context.DEPTH_TEST),this.context.depthFunc(this.context.LEQUAL)},cleanupRender:function(){this.context.bindVertexArray(null)},enableBlend:function(){this.context.enable(this.context.BLEND)},disableBlend:function(){this.context.disable(this.context.BLEND)},enableDepthTest:function(){this.context.enable(this.context.DEPTH_TEST)},disableDepthTest:function(){this.context.disable(this.context.DEPTH_TEST)},enableDepthWrite:function(){this.context.depthMask(!0)},disableDepthWrite:function(){this.context.depthMask(!1)},dropVao:function(){this.context.bindVertexArray(null)},clearBackBuffer:function(e,t){0!=(e&this.context.COLOR_BUFFER_BIT)&&this.context.clearColor(t[0],t[1],t[2],t[3]),0!==e&&this.context.clear(e)},glClear:function(e=!0,t=!0,n=!0){let r=0;e&&(r|=Ve.COLOR_BUFFER_BIT),t&&(r|=Ve.DEPTH_BUFFER_BIT),n&&(r|=Ve.STENCIL_BUFFER_BIT),Ve.clear(r)}};var oe={context:void 0,initialize:function(){const e=window.AudioContext||window.webkitAudioContext;this.context=new e},create:function(e){const t=this.context,n={source:e,__callbacks:[]},r=W.get(e);void 0===r&&ce("file '"+e+"' not found");let i=r.data.slice(0);return i.buffer&&(i=i.buffer),t.decodeAudioData(i,(function(e){n.buffer=e,n.__callbacks.forEach((function(e){e()}));for(const e in n)"buffer"!==e&&"source"!==e&&delete n[e];Object.freeze(n)}),(function(t){de.error("fail to decode audio data '"+e+"': "+t),ce()})),le.make(n,void 0,"AudioData")},get:function(e){return new Promise((function(t){const n=le.get(e);"buffer"in n?t(n):n.__callbacks.push((function(){t(n)}))}))},delete:function(e){le.free(e)}},se={State:{IDLE:0,PLAYED:1,PAUSED:2},DistanceModel:{0:"inverse",1:"linear",2:"exponential"},PanningModel:{0:"equalpower",1:"HRTF"},UserCallbackNames:["click","mousedown","keydown","touchstart","touchend"],context:null,listener:null,listenerGainNode:null,listenerFilter:null,globalPause:!1,audioSourceById:{},globalGain:1,waitingForInteraction:!1,isCreated:function(){return null!==se.context},isRunning:function(){return se.context&&"running"===se.context.state},isWaitingForInteraction:function(){return se.waitingForInteraction},initialize:function(){if(!se.isRunning()){if(null===se.context||"closed"===se.context.state){const e=window.AudioContext||window.webkitAudioContext;se.context=new e,se.listener=se.context.listener,se.listenerGainNode=se.context.createGain(),se.listenerGainNode.connect(se.context.destination),se.setGlobalGain(se.globalGain);for(const e in se.audioSourceById)se.createAudioSourceInternal(se.audioSourceById[e])}if(!se.waitingForInteraction&&("suspended"===se.context.state||"interrupted"===se.context.state)){se.waitingForInteraction=!0;const e=function(t){se.context.resume().then((function(){if(se.waitingForInteraction){se.waitingForInteraction=!1,de.info("W4Audio context initialized: "+se.context.state+" by "+t.type);for(const t of se.UserCallbackNames)document.documentElement.removeEventListener(t,e,!1);for(const e in se.audioSourceById)se.createAudioSourceInternal(se.audioSourceById[e])}}))};for(const t of se.UserCallbackNames)document.documentElement.addEventListener(t,e,!1);e({type:"manual"})}}},setListenerTransform:function(e,t,n,r,i,a,o,s,u,c){if(this.listener.positionX){const l=this.context.currentTime+c;this.listener.positionX.linearRampToValueAtTime(e,l),this.listener.positionY.linearRampToValueAtTime(t,l),this.listener.positionZ.linearRampToValueAtTime(n,l),this.listener.forwardX.linearRampToValueAtTime(r,l),this.listener.forwardY.linearRampToValueAtTime(i,l),this.listener.forwardZ.linearRampToValueAtTime(a,l),this.listener.upX.linearRampToValueAtTime(o,l),this.listener.upY.linearRampToValueAtTime(s,l),this.listener.upZ.linearRampToValueAtTime(u,l)}else this.listener.setPosition(e,t,n),this.listener.setOrientation(r,i,a,o,s,u)},setListenerFilter:function(e){null===this.listenerFilter?this.listenerGainNode.disconnect(this.context.destination):(this.listenerGainNode.disconnect(this.listenerFilter),this.listenerFilter.disconnect(this.context.destination)),null===this.filter?(this.listenerFilter=null,this.listenerGainNode.connect(this.context.destination)):(this.listenerFilter=e,this.listenerGainNode.connect(this.listenerFilter),this.listenerFilter.connect(this.context.destination))},getGlobalGain:function(){return se.globalGain},setGlobalGain:function(e){se.globalGain=e,se.listenerGainNode.gain.setTargetAtTime(se.globalGain,se.context.currentTime,.01)},_audioSourceDestructor:function(e){e&&e.sourceNode&&e.sourceNode.stop()},createAudioSource:function(e){const t={state:this.State.IDLE,sourceNode:null,gainNode:null,pannerNode:null,startTime:0,startOffset:0,loop:!1,playbackRate:1,description:null,buffer:null};se.createAudioSourceInternal(t),oe.get(e).then((function(e){t.description=e.source,t.buffer=e.buffer,t.state===se.State.PLAYED&&se.playAudioSource(t)}));const n=le.make(t,this._audioSourceDestructor,"AudioSource");return this.audioSourceById[n]=t,n},createAudioSourceInternal:function(e){e.gainNode=se.context.createGain(),e.gainNode.connect(se.listenerGainNode),e.buffer&&e.state===se.State.PLAYED&&se.resumeAudioSourceInternal(e)},deleteAudioSource:function(e){this.audioSourceById.hasOwnProperty(e)&&delete this.audioSourceById[e],le.free(e)},getAudioSourceGain:function(e){return e.gainNode.gain.value},setAudioSourceGain:function(e,t){e.gainNode.gain.setValueAtTime(t,this.context.currentTime)},setAudioSourceGainLinear:function(e,t,n){e.gainNode.gain.linearRampToValueAtTime(t,this.context.currentTime+n)},getAudioSourcePlaybackRate:function(e){return e.playbackRate},setAudioSourcePlaybackRate:function(e,t){e.playbackRate=t,e.sourceNode&&(e.sourceNode.playbackRate.value=e.playbackRate)},getAudioSourceIsLooped:function(e){return e.loop},setAudioSourceIsLooped:function(e,t){e.loop=t,e.sourceNode&&(e.sourceNode.loop=e.loop)},getAudioSourceIsLoading:function(e){return!e.buffer},getAudioSourceIsPlaying:function(e){return e.state===this.State.PLAYED},getAudioSourceIsPaused:function(e){return e.state===this.State.PAUSED},playAudioSource:function(e){se.playAudioSourceInternal(e),e.state=this.State.PLAYED},playAudioSourceInternal:function(e){se.isRunning()&&(se.getAudioSourceIsPlaying(e)&&se.stopAudioSource(e),se.getAudioSourceIsLoading(e)||(e.sourceNode=this.context.createBufferSource(),e.sourceNode.buffer=e.buffer,e.sourceNode.connect(e.gainNode),e.sourceNode.addEventListener("ended",(function(){this===e.sourceNode&&e.state===se.State.PLAYED&&(e.state=se.State.IDLE)})),this.setAudioSourceIsLooped(e,e.loop),this.setAudioSourcePlaybackRate(e,e.playbackRate),e.sourceNode.start(0))),e.startTime=Date.now()},pauseAudioSource:function(e){se.getAudioSourceIsPlaying(e)?(se.pauseAudioSourceInternal(e),e.state=this.State.PAUSED):de.warning(e.description+": fail to pause - not played")},pauseAudioSourceInternal:function(e){se.isRunning()&&(se.getAudioSourceIsLoading(e)||(e.startOffset+=(Date.now()-e.startTime)/1e3,e.startOffset-=Math.floor(e.startOffset/e.buffer.duration)),e.sourceNode&&(e.sourceNode.stop(),e.sourceNode=null))},resumeAudioSource:function(e){se.getAudioSourceIsPaused(e)?(se.resumeAudioSourceInternal(e),e.state=this.State.PLAYED):de.warning(e.description+": fail to resume - not paused")},resumeAudioSourceInternal:function(e){se.isRunning()&&!se.getAudioSourceIsLoading(e)&&(se.stopAudioSourceInternal(e),e.sourceNode=this.context.createBufferSource(),e.sourceNode.buffer=e.buffer,e.sourceNode.connect(e.gainNode),this.setAudioSourceIsLooped(e,e.loop),this.setAudioSourcePlaybackRate(e,e.playbackRate),e.sourceNode.start(0,e.startOffset)),e.startTime=Date.now()},stopAudioSource:function(e){se.stopAudioSourceInternal(e),e.state=this.State.IDLE},stopAudioSourceInternal:function(e){e.sourceNode&&(e.sourceNode.stop(),e.sourceNode=null)},createPanner:function(e){e.pannerNode?de.warning("pannerNode already exists"):(e.gainNode.disconnect(this.listenerGainNode),e.pannerNode=this.context.createPanner(),e.gainNode.connect(e.pannerNode),e.pannerNode.connect(this.listenerGainNode))},deletePanner:function(e){e.pannerNode?(e.gainNode.disconnect(e.pannerNode),e.pannerNode.disconnect(this.listenerGainNode),e.pannerNode=null,e.gainNode.connect(this.listenerGainNode)):de.warning("pannerNode already destroyed")},setPannerTransform:function(e,t,n,r,i,a,o,s){e.pannerNode.setPosition(t,n,r),e.pannerNode.setOrientation(i,a,o)},setPannerDistance:function(e,t,n,r){e.pannerNode.refDistance=t,e.pannerNode.maxDistance=n,e.pannerNode.rolloffFactor=r},setPannerCone:function(e,t,n,r){e.pannerNode.coneInnerAngle=t,e.pannerNode.coneOuterAngle=n,e.pannerNode.coneOuterGain=r},setPannerModel:function(e,t,n){e.pannerNode.distanceModel=this.DistanceModel[t],e.pannerNode.panningModel=this.PanningModel[n]}};var ue={types:{},defaultTypeConvertions:{bool:function(e,t){return new Int8Array(h.buffer,e,t)},int:function(e,t){return new Int32Array(h.buffer,e,t)},int32_t:function(e,t){return new Int32Array(h.buffer,e,t)},uint32_t:function(e,t){return new Uint32Array(h.buffer,e,t)},uint:function(e,t){return new Uint32Array(h.buffer,e,t)},float:function(e,t){return new Float32Array(h.buffer,e,t)},"w4::core::OuterID::ndxType":function(e,t){return new Int32Array(h.buffer,e,t)},TextureOuterId:function(e,t){return new Int32Array(h.buffer,e,t)},utf8CharPtr:function(e,t){return new Int32Array(h.buffer,e,t)},"w4::math::uvec2":function(e,t){return new Uint32Array(h.buffer,e,2*t)},"w4::math::point":function(e,t){return new Uint32Array(h.buffer,e,2*t)},"w4::math::ivec2":function(e,t){return new Int32Array(h.buffer,e,2*t)},"w4::math::ivec3":function(e,t){return new Int32Array(h.buffer,e,3*t)},"w4::math::ivec4":function(e,t){return new Int32Array(h.buffer,e,4*t)},"w4::math::vec2":function(e,t){return new Float32Array(h.buffer,e,2*t)},"w4::math::vec3":function(e,t){return new Float32Array(h.buffer,e,3*t)},"w4::math::vec4":function(e,t){return new Float32Array(h.buffer,e,4*t)},"w4::math::mat3":function(e,t){return new Float32Array(h.buffer,e,9*t)},"w4::math::mat4":function(e,t){return new Float32Array(h.buffer,e,16*t)},"w4::math::rect":function(e,t){return new Float32Array(h.buffer,e,4*t)}},createProxy:function(e,t,n){const r=n.control,i={ctr:new Int8Array(h.buffer,t+r,1),set:function(e,t,n,r){return e[t]=n,this.ctr[0]=1,!0}};return new Proxy(e,i)},createPodRepl:function(e,t){let n;const r={__meta:{}};for(const i in t.descr){const a=t.descr[i];if("count"in a){const t=[];for(let r=0;r<a.count;++r)n=this.createField(e+a.offset+a.size*r,a.type,1),"control"in a&&(n=this.createProxy(n,e,a)),t.push(n);r[i]=t,r.__meta[i]={type:a.type,isArray:!0}}else n=this.createField(e+a.offset,a.type,1),"control"in a&&(n=this.createProxy(n,e,a)),null!=n&&(r[i]=n,r.__meta[i]={type:a.type,isArray:!1})}return r},createField:function(e,t,n){const r=this.defaultTypeConvertions[t];if(r)return r(e,n);const i=this.types[t];if(!i)return;const a=le.get(i);return this.createPodRepl(e,a)},registerPOD:function(e,t){const n=le.get(t),r=this.createPodRepl(e,n);return le.make(r,ue.deletePOD,`PodInstance.${n.typeName}`)},deletePOD:function(e){},registerType:function(e){const t=pe(e),n=le.make({descr:{},typeName:t},ue.deleteTypeDescr,`PodType.${t}`);return this.types[t]=n,n},deleteTypeDescr:function(e){}};function ce(e){de.error("JS: "+e),ge.stopUpdate();const t=document.getElementById("w4-gui");if(void 0===t)alert("JS: W4 FATAL ERROR:\n\n"+e);else{const n=document.createElement("div");n.classList.add("w4-fatal");const r=document.createTextNode("JS: W4 FATAL ERROR: "+e+" ... ");n.appendChild(r),t.appendChild(n)}throw"JS: W4L: TERMINATE :  "+e}var le={_table:{},_deleters:{},_types:{},_nextId:1,invalid:0,make:function(e,t,n){if(null==e)return 0;const r=this._nextId;return this._nextId++,this._table[r]=e,e.__outerId=r,t&&(this._deleters[r]=t),n&&(this._types[r]=n),r},isValid:function(e){return e!==this.invalid},get:function(e){return e in this._table||ce("Invalid pointer index "+e),this._table[e]},free:function(e){e in this._table||ce("Double free "+e);const t=this._table[e];e in this._deleters&&(this._deleters[e](t),delete this._deleters[e]),e in this._types&&delete this._types[e],delete this._table[e]}},de={__internal:{remote:{clientId:void 0,connected:!1,address:void 0,lastTimeConnected:0,lastErrorTime:0,reconnectTimeout:5e3},Level:{TRACE:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4,FATAL:5},Color:{0:"LightSlateGray",1:"darkgray",2:"darkcyan",3:"DarkGoldenRod",4:"maroon",5:"purple",6:"steelblue",7:"gray",8:"mediumpurple",9:"chocolate",10:"red",11:"crimson"},indentLevel:0,pushIndentLevel:function(){this.indentLevel+=1},popIndentLevel:function(){this.indentLevel>0&&(this.indentLevel-=1)},writeLog:function(e,t,n,r,i){this.writeLocalLog(Date.now(),e,t,n,r,i)},writeLocalLog:function(e,t,n,r,i,a){const o=new Date(e);let s=o.getMilliseconds()+"";for(;s.length<3;)s="0"+s;const u=o.getDate()+"."+o.getMonth()+"."+o.getFullYear()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"."+s,c=Object.keys(this.Level)[t][0],l=this.Color[t+n];let d="%c";t>this.Level.INFO&&void 0!==i&&(d+="("+i,void 0!==a&&(d+=":"+a),d+=")"),t>this.Level.ERROR?console.error((new Error).stack):t>this.Level.INFO?console.error("%c"+u+" ["+c+"] "+"  ".repeat(this.indentLevel)+r+d,"color:"+l,"color:black"):console.log("%c"+u+" ["+c+"] "+"  ".repeat(this.indentLevel)+r+d,"color:"+l,"color:black"),"object"==typeof r&&console.dir(r)},writeRemoteLog:function(e,t,n,r,i,a){const o={id:this.remote.clientId,level:t,timestamp:e,message:r};void 0!==i&&(o.fileName=i,void 0!==a&&(o.lineNumber=a)),t>this.Level.INFO&&(o.stack=(new Error).stack),fetch(this.remote.address,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(){de.__internal.remote.connected=!0}),(function(o){const s=new Error,u=Date.now();de.__internal.remote.connected=!1,de.__internal.remote.lastTimeConnected=u,u-de.__internal.remote.lastErrorTime>de.__internal.remote.reconnectTimeout&&(de.__internal.writeLocalLog(de.__internal.remote.lastTimeConnected,de.__internal.Level.ERROR,0,"fail send log to remote server '"+de.__internal.remote.address+"': "+o,s.fileName,s.lineNumber),de.__internal.remote.lastErrorTime=u),de.__internal.writeLocalLog(e,t,n,r,i,a)}))}},trace:function(e){this.__internal.writeLog(this.__internal.Level.TRACE,0,e)},debug:function(e){this.__internal.writeLog(this.__internal.Level.DEBUG,0,e)},info:function(e){this.__internal.writeLog(this.__internal.Level.INFO,0,e)},warning:function(e){this.__internal.writeLog(this.__internal.Level.WARNING,0,e)},error:function(e){this.__internal.writeLog(this.__internal.Level.ERROR,0,e)},initialize:function(e,t){this.__internal.remote.clientId=e,this.__internal.remote.address=t}};function fe(){var e=function(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}();return t.extraStackTrace&&(e+="\n"+t.extraStackTrace()),e.replace(/\b_Z[\w\d_]+/g,(function(e){return e==e?e:e+" ["+e+"]"}))}function me(e){var t=y(e)+1,n=je(t);return n&&A(e,g,n,t),n}function he(e,t){return K(e,t,!1)}function pe(e){for(var t="";;){var n=E[e++>>0];if(!n)return t;t+=String.fromCharCode(n)}}var ge={isUpdating:!1,fpsCap:8.333333333333334,_previousFrameTime:1715011540460,_updateCallback:void 0,_updateCallbackId:void 0,load:function(e,t){de.trace("JS: load script : "+e);const n=document.createElement("script");n.src=e,document.body.appendChild(n),n.onload=t},onPause:function(){const e=se.getGlobalGain();se.setGlobalGain(0);const t=function(){se.setGlobalGain(e),document.removeEventListener("touchstart",t)};document.addEventListener("touchstart",t)},setUpdate:function(e){de.trace("Set update callback"),this._previousFrameTime=Date.now(),this._updateCallback=e;const t=this;!function e(n){now=Date.now();let r=now-t._previousFrameTime;t._updateCallbackId=requestAnimationFrame(e),r>t.fpsCap&&(t._previousFrameTime=now-r%t.fpsCap,t._updateCallback())}(),this.isUpdating=!0},stopUpdate:function(){de.trace("Stop update"),this._updateCallbackId?(cancelAnimationFrame(this._updateCallbackId),this.isUpdating=!1):de.error("Call to stopUpdate() without set callback function")},startUpdate:function(){de.trace("Start update"),this._updateCallback?this.setUpdate(this._updateCallback):de.error("Call to startUpdate() without set callback function")},toggleUpdate:function(){this.isUpdating?this.stopUpdate():this.startUpdate()},abort:function(e){de.error(fe()),ce(e)},setFPSCap:function(e){de.trace("Setting fps cap: "+e),this.fpsCap=1e3/e}};var Ee=function(e){const t=e>>>0;return[(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},_e=function(e){const t=e>>>0;return"rgba("+[(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,(255&t)/255].join(",")+")"},xe={initialize:function(e,t){Te.callbackCreateBegin=e,Te.callbackCreateEnd=t},create:function(e,t,n=!1){const r=n?xe.prototype(t,new Uint8Array(Te.defaultTextures.transparent.textureData),Te.defaultTextures.transparent.textureWidth,Te.defaultTextures.transparent.textureHeight):xe.prototype(t,new Uint8Array(Te.defaultTextures.default.textureData),Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight);return Te.texturesParams[r]=t,Te.callbackCreateBegin(r),Le.get(e).then((function(e){const t=Le.processImagePowerOf2(e);Ve.bindTexture(Ve.TEXTURE_2D,le.get(r)),Ve.pixelStorei(Ve.UNPACK_FLIP_Y_WEBGL,!0),Ve.texImage2D(Ve.TEXTURE_2D,0,Ve.RGBA,Ve.RGBA,Ve.UNSIGNED_BYTE,t);const n=Te.texturesParams[r];Te.validateParameters(n),Te.setParameters(n),Te.generateMipmap(n),Ve.bindTexture(Ve.TEXTURE_2D,null),Ve.pixelStorei(Ve.UNPACK_FLIP_Y_WEBGL,!1),Te.callbackCreateEnd(r)})),Ve.bindTexture(Ve.TEXTURE_2D,null),r},createEmpty:function(e){const t=Ve.createTexture();return Ve.bindTexture(Ve.TEXTURE_2D,t),Te.validateParameters(e),Te.setParameters(e),le.make(t,Te.deleteTexture,"Texture")},prototype:function(e,t,n,r){const i=xe.createEmpty(e);return Ve.texImage2D(Ve.TEXTURE_2D,0,Ve.RGBA,n,r,0,Ve.RGBA,Ve.UNSIGNED_BYTE,t),Te.generateMipmap(e),i},update:function(e,t){Ve.bindTexture(Ve.TEXTURE_2D,le.get(e)),Te.texturesParams[e]=t,Te.validateParameters(t),Te.setParameters(t),Te.generateMipmap(t),Ve.bindTexture(Ve.TEXTURE_2D,null)},delete:function(e){delete Te.texturesParams[e],le.free(e)}},Te={defaults:{minFilter:function(){return Ve.LINEAR},magFilter:function(){return Ve.LINEAR},wrapS:function(){return Ve.CLAMP_TO_EDGE},wrapT:function(){return Ve.CLAMP_TO_EDGE}},defaultTextures:{default:{textureData:[0,0,0,255,255,0,255,255,255,0,255,255,0,0,0,255],textureWidth:2,textureHeight:2},transparent:{textureData:[0,0,0,0,255,0,255,0,255,0,255,0,0,0,0,0],textureWidth:2,textureHeight:2}},anisoExt:void 0,getAnisoExt:function(){return void 0===this.anisoExt&&(this.anisoExt=Ve.getExtension("EXT_texture_filter_anisotropic")||Ve.getExtension("MOZ_EXT_texture_filter_anisotropic")||Ve.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),this.anisoExt},deleteTexture:function(e){Ve.deleteTexture(e)},setParameters:function(e){if(Ve.texParameterf(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,e.minFilter),Ve.texParameterf(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,e.magFilter),Ve.texParameterf(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,e.wrapS),Ve.texParameterf(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,e.wrapT),!0===e.hasAniso){const e=this.getAnisoExt();if(e){const t=Ve.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);Ve.texParameterf(Ve.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,t)}}},decodeFilterLevel:function(e,t){switch(e){case 0:return t.minFilter=Ve.NEAREST,void(t.magFilter=Ve.NEAREST);case 1:return t.minFilter=Ve.LINEAR,void(t.magFilter=Ve.LINEAR);case 2:return t.minFilter=Ve.LINEAR_MIPMAP_NEAREST,void(t.magFilter=Ve.LINEAR);case 3:return t.minFilter=Ve.LINEAR_MIPMAP_LINEAR,void(t.magFilter=Ve.LINEAR);case 4:return t.minFilter=Ve.LINEAR_MIPMAP_NEAREST,t.magFilter=Ve.LINEAR,void(t.hasAniso=!0);case 5:return t.minFilter=Ve.LINEAR_MIPMAP_LINEAR,t.magFilter=Ve.LINEAR,void(t.hasAniso=!0)}ce("texture.setFilters: unsupported filter level '"+e+"'")},decodeWrap:function(e,t,n){switch(e){case 0:return void(t[n]=Ve.REPEAT);case 1:return void(t[n]=Ve.MIRRORED_REPEAT);case 2:return void(t[n]=Ve.CLAMP_TO_EDGE)}ce("texture.setFilters: unsupported '"+n+"' wrapping '"+e+"'")},decodeParameters:function(e,t,n,r){return this.decodeFilterLevel(t,e),this.decodeWrap(n,e,"wrapS"),this.decodeWrap(r,e,"wrapT"),e},validateParameters:function(e){e.hasOwnProperty("minFilter")||(e.minFilter=Te.defaults.minFilter()),e.hasOwnProperty("magFilter")||(e.magFilter=Te.defaults.magFilter()),e.hasOwnProperty("wrapS")||(e.wrapS=Te.defaults.wrapS()),e.hasOwnProperty("wrapT")||(e.wrapT=Te.defaults.wrapT())},generateMipmap:function(e){(e.minFilter===Ve.LINEAR||e.minFilter===Ve.LINEAR_MIPMAP_LINEAR||e.minFilter===Ve.LINEAR_MIPMAP_NEAREST)&&Ve.generateMipmap(Ve.TEXTURE_2D)},callbackCreateBegin:function(e){},callbackCreateEnd:function(e){},texturesParams:{}},we=function(e){var t=Ve.createTexture();return Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,t),ye.setParameters(e,!0),ye.loadImage(e.sources.POSITIVE_X,t,"POSITIVE_X"),ye.loadImage(e.sources.NEGATIVE_X,t,"NEGATIVE_X"),ye.loadImage(e.sources.POSITIVE_Y,t,"POSITIVE_Y"),ye.loadImage(e.sources.NEGATIVE_Y,t,"NEGATIVE_Y"),ye.loadImage(e.sources.POSITIVE_Z,t,"POSITIVE_Z"),ye.loadImage(e.sources.NEGATIVE_Z,t,"NEGATIVE_Z"),Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,null),le.make(t,ye.delete,"Cubemap")},be=function(e){var t=Ve.createTexture();return Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,t),ye.setParameters({},!0),Ve.texImage2D(Ve.TEXTURE_CUBE_MAP_POSITIVE_X,0,Ve.RGBA,Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight,0,Ve.RGBA,Ve.UNSIGNED_BYTE,new Uint8Array(Te.defaultTextures.default.textureData)),Ve.texImage2D(Ve.TEXTURE_CUBE_MAP_NEGATIVE_X,0,Ve.RGBA,Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight,0,Ve.RGBA,Ve.UNSIGNED_BYTE,new Uint8Array(Te.defaultTextures.default.textureData)),Ve.texImage2D(Ve.TEXTURE_CUBE_MAP_POSITIVE_Y,0,Ve.RGBA,Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight,0,Ve.RGBA,Ve.UNSIGNED_BYTE,new Uint8Array(Te.defaultTextures.default.textureData)),Ve.texImage2D(Ve.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,Ve.RGBA,Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight,0,Ve.RGBA,Ve.UNSIGNED_BYTE,new Uint8Array(Te.defaultTextures.default.textureData)),Ve.texImage2D(Ve.TEXTURE_CUBE_MAP_POSITIVE_Z,0,Ve.RGBA,Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight,0,Ve.RGBA,Ve.UNSIGNED_BYTE,new Uint8Array(Te.defaultTextures.default.textureData)),Ve.texImage2D(Ve.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,Ve.RGBA,Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight,0,Ve.RGBA,Ve.UNSIGNED_BYTE,new Uint8Array(Te.defaultTextures.default.textureData)),Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,null),le.make(t,ye.delete,"CubemapDefault")},ve=function(e,t){Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,le.get(e)),ye.setParameters(t,!1),Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,null)},Ae=function(e){le.free(e)},ye={defaults:{min:function(){return Ve.LINEAR},mag:function(){return Ve.LINEAR},wrapS:function(){return Ve.CLAMP_TO_EDGE},wrapT:function(){return Ve.CLAMP_TO_EDGE},NEGATIVE_X:[1,0,0,1],POSITIVE_X:[0,1,1,1],NEGATIVE_Y:[0,1,0,1],POSITIVE_Y:[1,0,1,1],NEGATIVE_Z:[0,0,1,1],POSITIVE_Z:[1,1,0,1]},setParameters:function(e,t){("min"in e||t)&&Ve.texParameteri(Ve.TEXTURE_CUBE_MAP,Ve.TEXTURE_MIN_FILTER,"min"in e?e.min:this.defaults.min()),("mag"in e||t)&&Ve.texParameteri(Ve.TEXTURE_CUBE_MAP,Ve.TEXTURE_MAG_FILTER,"mag"in e?e.mag:this.defaults.mag()),("wrapS"in e||t)&&Ve.texParameteri(Ve.TEXTURE_CUBE_MAP,Ve.TEXTURE_WRAP_S,"wrapS"in e?e.wrapS:this.defaults.wrapS()),("wrapT"in e||t)&&Ve.texParameteri(Ve.TEXTURE_CUBE_MAP,Ve.TEXTURE_WRAP_T,"wrapT"in e?e.wrapT:this.defaults.wrapT())},loadImage:function(e,t,n){Ve.texImage2D(Ve["TEXTURE_CUBE_MAP_"+n],0,Ve.RGBA,Te.defaultTextures.default.textureWidth,Te.defaultTextures.default.textureHeight,0,Ve.RGBA,Ve.UNSIGNED_BYTE,new Uint8Array(Te.defaultTextures.default.textureData)),Le.get(e).then((function(e){Ve.isTexture(t)&&(Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,t),Ve.texImage2D(Ve["TEXTURE_CUBE_MAP_"+n],0,Ve.RGBA,Ve.RGBA,Ve.UNSIGNED_BYTE,e),Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,null))}))},delete:function(e){Ve.deleteTexture(e)},decodeFilterLevel:function(e,t){switch(e){case 0:return t.min=Ve.NEAREST,void(t.mag=Ve.NEAREST);case 1:return t.min=Ve.LINEAR,void(t.mag=Ve.LINEAR);case 2:return t.min=Ve.LINEAR_MIPMAP_NEAREST,void(t.mag=Ve.LINEAR);case 3:return t.min=Ve.LINEAR_MIPMAP_LINEAR,void(t.mag=Ve.LINEAR)}},decodeWrap:function(e,t,n){switch(e){case 0:return void(t[n]=Ve.REPEAT);case 1:return void(t[n]=Ve.MIRRORED_REPEAT);case 2:return void(t[n]=Ve.CLAMP_TO_EDGE)}},decodeParameters:function(e,t,n,r){return this.decodeFilterLevel(t,e),this.decodeWrap(n,e,"wrapS"),this.decodeWrap(r,e,"wrapT"),e}};var Ie={loader:void 0,initialize:function(e,t){de.trace("Creating loader..."),this.loader=document.getElementById(t),e.appendChild(this.loader)}},Re={baseDiv:void 0,canvas:void 0,onResizeCallback:void 0,aspectW:9,aspectH:16,aspectWH:null,aspectHW:null,DPR:1,initialize:function(e,t,n,r){this.baseDiv=document.getElementById(e),(void 0===this.baseDiv||null===this.baseDiv||"DIV"!==this.baseDiv.tagName)&&ce("Window initialize: '"+e+"' is not DIV element"),this.onResizeCallback=t,this.canvas=document.createElement("canvas"),this.canvas.id=e+"-canvas",this.canvas.style.cssText="position: absolute; display: block; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: all; ",this.baseDiv.appendChild(this.canvas),this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,de.trace("W4: Canvas: "+this.canvas.width+"x"+this.canvas.height);const i=document.createElement("div");i.id="w4-gui",i.style.cssText="position: relative; display: block; width: 100%; height: 100%;  pointer-events: none; top: 0; left: 0; margin: auto; z-index: 2;",this.baseDiv.appendChild(i),Ie.initialize(this.baseDiv,"w4-loader"),de.trace("W4: create WebGL Context..."),ae.createContext(this.canvas),this.DPR=window.devicePixelRatio,this.setStyle(this.baseDiv.className),window.addEventListener("resize",(function(){Re.doResize()}),!0),window.addEventListener("blur",(function(e){n(),e.preventDefault()}),!1),window.addEventListener("focus",(function(e){r(),e.preventDefault()}),!1),window.addEventListener("pagehide",(function(e){n(),e.preventDefault()}),!1),window.addEventListener("pageshow",(function(e){r(),e.preventDefault()}),!1),window.addEventListener("visibilitychange",(function(e){"visible"===document.visibilityState?r():n(),e.preventDefault()}),!1)},setAspect:function(e,t){this.aspectW=e,this.aspectH=t,this.aspectWH=e/t,this.aspectHW=t/e,this.setStyle(this.currentStyle)},setStyle:function(e){this.currentStyle=e;const t=window.innerWidth,n=window.innerHeight,r=t/n;de.trace("Platform::SetStyle("+e+")  "+this.aspectW+" / "+this.aspectH+"  "+t+" x "+n);const i="top:0; left:0; z-index: 0; pointer-events: all; margin: auto;";let a={};r<=this.aspectWH?(a.portrait=i+"position: absolute; bottom: 0;right: 0; width: 100vw; height: calc(100vw * "+this.aspectHW+");",a.landscape=i+"position: absolute; bottom: 0; right: 0; width: 100vw; height: calc(100vw * "+this.aspectHW+");"):(a.portrait=i+"position: relative; width: calc(100vh * "+this.aspectWH+"); height: 100vh;",a.landscape=i+"position: relative; width: calc(100vh * "+this.aspectWH+"); height: 100vh;"),void 0===a[e]?this.baseDiv.style.cssText=i+"position: absolute; width: 100%; height: 100%;":this.baseDiv.style.cssText=a[e],this.applyResize()},applyResize:function(){this.canvas.width=Math.floor(this.canvas.clientWidth*this.DPR),this.canvas.height=Math.floor(this.canvas.clientHeight*this.DPR),this.onResizeCallback(this.canvas.width,this.canvas.height),ae.context.viewport(0,0,this.canvas.width,this.canvas.height),ae.context.bindFramebuffer(ae.context.FRAMEBUFFER,null)},doResize:function(){this.currentStyle&&this.setStyle(this.currentStyle)}},Le={isPowerOfTwo:function(e){return 0==(e&e-1)},nextHighestPowerOfTwo:function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1},processImagePowerOf2:function(e){if(null==e)return null;if(!Le.isPowerOfTwo(e.width)||!Le.isPowerOfTwo(e.height)){const t=document.createElement("canvas");t.width=Le.nextHighestPowerOfTwo(e.width),t.height=Le.nextHighestPowerOfTwo(e.height);return t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}return e},_createInternal:function(e){const t={image:new Image,isLoading:!0,isError:!1,callbacks:[]};return t.image.onload=function(){const e=t.image.src;URL.revokeObjectURL(e),t.isLoading=!1,t.callbacks.forEach((function(e){e()}))},t.image.onerror=function(){t.isLoading=!1,t.isError=!0,de.warning("fail to load image from '"+e+"'")},t.image.crossOrigin="anonymous",t},createFromUrl:function(e){const t=Le._createInternal();let n=e;if(!W.isURL(e)){const t=W.get(e);void 0===t&&ce("fail to load image from '"+e+"'");const r=new Blob([t.data],{type:t.type});n=(window.URL||window.webkitURL).createObjectURL(r)}return t.image.src=n,le.make(t,void 0,"Image.FromUrl")},createFromData:function(e,t){const n=Le._createInternal(),r=new Blob([t],{type:e}),i=window.URL||window.webkitURL;return n.image.src=i.createObjectURL(r),le.make(n,void 0,"Image.FromData")},createFromBlob:function(e){const t=Le._createInternal();return t.image.src=e,le.make(t,void 0,"Image.FromBlob")},get:function(e){return new Promise((function(t){const n=le.get(e),r=function(){t(n.image)};n.isLoading?n.callbacks.push(r):r()}))},delete:function(e){le.free(e)}};var Se={gamePadCount:0,gamepadData:void 0,_updateCallbackId:void 0,initialize:function(e,t){this.gamepadData=t,e.addEventListener("gamepadconnected",(function(t){de.info("JS: Gamepad connected at index "+t.gamepad.index+": "+t.gamepad.id+". "+t.gamepad.buttons.length+" buttons, "+t.gamepad.axes.length+" axes."),Se.gamePadCount++,function t(n){if(Se.gamePadCount){let n;if(navigator.getGamepads)n=navigator.getGamepads();else{if(!navigator.webkitGetGamepads)return;n=navigator.webkitGetGamepads()}let r=n[0];Se.gamepadData.buttonsCount[0]=r.buttons.length,Se.gamepadData.axesCount[0]=r.axes.length;for(let e=0;e<r.buttons.length;++e)Se.gamepadData.buttonsState[e][0]=r.buttons[e].pressed?1:0;for(let e=0;e<r.axes.length;++e)Se.gamepadData.axesState[e][0]=r.axes[e].valueOf();Se._updateCallbackId=e.requestAnimationFrame(t)}}()})),e.addEventListener("gamepaddisconnected",(function(e){de.info("Gamepad disconnected from index "+e.gamepad.index+": "+e.gamepad.id),Se.gamePadCount--}))}};var Pe={keyboardLocked:!1,KeyCodeByName:{Unidentified:0,Backspace:8,Tab:9,Enter:13,NumpadEnter:13,ShiftLeft:16,ShiftRight:16,ControlLeft:17,ControlRight:17,AltLeft:18,AltRight:8,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,PrintScreen:44,Insert:45,Delete:46,Digit0:48,Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,MetaLeft:91,MetaRight:92,ContextMenu:93,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,NumpadMultiply:106,NumpadAdd:107,NumpadSubtract:109,NumpadDecimal:110,NumpadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,AudioVolumeMute:173,VolumeMute:173,AudioVolumeDown:174,VolumeDown:174,AudioVolumeUp:175,VolumeUp:175,Semicolon:186,Equal:187,Comma:188,Minus:189,Period:190,Slash:191,Backquote:192,BracketLeft:219,Backslash:220,BracketRight:221,Quote:222},getPlatformKeyboardCode:function(e){return this.KeyCodeByName.hasOwnProperty(e)?this.KeyCodeByName[e]:0},initialize:function(e,t,n){e.addEventListener("keydown",(function(e){const r=e.altKey|e.ctrlKey<<1|e.shiftKey<<2;if(t(Pe.getPlatformKeyboardCode(e.code),1,r),1===e.key.length&&!e.ctrlKey&&!e.metaKey){const t=e.key.codePointAt(0);n(t)}Pe.keyboardLocked&&e.preventDefault()}),!1),e.addEventListener("keyup",(function(e){const n=e.altKey|e.ctrlKey<<1|e.shiftKey<<2;t(Pe.getPlatformKeyboardCode(e.code),0,n),Pe.keyboardLocked&&e.preventDefault()}),!1)}};var Ce={context:void 0,PointerState:{up:0,down:1,move:2},_contextMenuBlockHandler:function(e){e.preventDefault()},_pointerLockHandler:function(){Ce.isPointerLocked()||Ce.requestPointerLock()},initialize:function(e,t){this.context=e;{let n=new Set;e.addEventListener("mousedown",(function(r){const i=Ce.getMousePos(e,r),a=r.movementX||r.mozMovementX||r.webkitMovementX||r.msMovementX||r.oMovementX||0,o=r.movementY||r.mozMovementY||r.webkitMovementY||r.msMovementY||r.oMovementY||0,s=r.hasOwnProperty("id")?r.id:0;n.add(r.button),t(i.x,i.y,a,o,r.button,Ce.PointerState.down,s)}),!1),e.addEventListener("mouseup",(function(r){const i=Ce.getMousePos(e,r),a=r.movementX||r.mozMovementX||r.webkitMovementX||r.msMovementX||r.oMovementX||0,o=r.movementY||r.mozMovementY||r.webkitMovementY||r.msMovementY||r.oMovementY||0,s=r.hasOwnProperty("id")?r.id:0;n.delete(r.button),t(i.x,i.y,a,o,r.button,Ce.PointerState.up,s)}),!1),e.addEventListener("mousemove",(function(n){const r=Ce.getMousePos(e,n),i=n.movementX||n.mozMovementX||n.webkitMovementX||n.msMovementX||n.oMovementX||0,a=n.movementY||n.mozMovementY||n.webkitMovementY||n.msMovementY||n.oMovementY||0,o=n.hasOwnProperty("id")?n.id:0;t(r.x,r.y,i,a,n.button,Ce.PointerState.move,o)}),!1),window.addEventListener("mouseup",(function(t){if(n.has(t.button)){let n=new MouseEvent("mouseup",t);e.dispatchEvent(n)}}),!1);let r={},i={};e.addEventListener("touchstart",(function(t){for(let n=0;n<t.changedTouches.length;++n){let a=t.changedTouches[n],o=new MouseEvent("mousedown",{clientX:a.clientX,clientY:a.clientY,movementX:0,movementY:0,button:100});o.id=a.identifier,r[a.identifier]=a.clientX,i[a.identifier]=a.clientY,e.dispatchEvent(o)}t.preventDefault()}),!1),e.addEventListener("touchend",(function(t){for(let n=0;n<t.changedTouches.length;++n){let r=t.changedTouches[n],i=new MouseEvent("mouseup",{clientX:r.clientX,clientY:r.clientY,movementX:0,movementY:0,button:100});i.id=r.identifier,e.dispatchEvent(i)}t.preventDefault()}),!1),e.addEventListener("touchmove",(function(t){for(let n=0;n<t.changedTouches.length;++n){let a=t.changedTouches[n],o=new MouseEvent("mousemove",{clientX:a.clientX,clientY:a.clientY,movementX:a.clientX-r[a.identifier],movementY:a.clientY-i[a.identifier],button:100});o.id=a.identifier,r[a.identifier]=a.clientX,i[a.identifier]=a.clientY,e.dispatchEvent(o)}t.preventDefault()}),!1)}},getMousePos:function(e,t){const n=e.getBoundingClientRect();return{x:(t.clientX-n.left)*Re.DPR,y:(t.clientY-n.top)*Re.DPR}},isPointerLocked:function(){return null!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement||document.oPointerLockElement||null)},requestPointerLock:function(){const e=this.context.requestPointerLock||this.context.mozRequestPointerLock||this.context.webkitRequestPointerLock||this.context.msRequestPointerLock||this.context.oRequestPointerLock||null;null===e?de.warning("Pointer lock is not supported in this browser."):this.isPointerLocked()?de.trace("Pointer is already locked"):e.bind(this.context)()},exitPointerLock:function(){const e=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||document.oExitPointerLock||null;null===e?console.warn("Pointer lock exit is not supported in this browser."):this.isPointerLocked()?e.bind(document)():console.warn("Pointer is already unlocked")},setPointerLockedOnce:function(e){e?this.requestPointerLock():this.exitPointerLock()},setPointerLockedAlways:function(e){e?(this.requestPointerLock(),this.context.addEventListener("click",this._pointerLockHandler)):(this.exitPointerLock(),this.context.removeEventListener("click",this._pointerLockHandler))},setContextMenuEnabled:function(e,t){const n=e||this.context;t?n.removeEventListener("contextmenu",Ce._contextMenuBlockHandler):n.addEventListener("contextmenu",Ce._contextMenuBlockHandler)}};var Fe=function(e,t){const n=function(e){const n=(e.deltaY||-e.wheelDelta||e.detail)>>10||1;t(n)};e.addEventListener("wheel",n,!1),e.addEventListener("mousewheel",n,!1),e.addEventListener("DOMMouseScroll",n,!1)};var Be=function(e){return null!==window.localStorage.getItem(e)},Ne=function(e){return window.localStorage.getItem(e)},Me=function(e,t){window.localStorage.setItem(e,t)};var Oe={renderState:{isBlending:!1,prevProgram:null,prevMatInst:null,prevVao:null,frame:null,shadowData:null,object:null,buildInId:[],buildInData:[],_convertTypes:function(e){e.__glBinding={};for(const t in e.__meta){let n=re.string2glValueEnum(e.__meta[t].type);if(n){let r=e[t];if(Array.isArray(r))for(let i=0;i<r.length;++i)e.__glBinding[t+"["+i+"]"]={type:n,value:r[i]};else e.__glBinding[t]={type:n,value:r}}}},_updateBuildInData:function(e,t){e.__idx=t,this.buildInData[t]=e,this._convertTypes(e),this.buildInId[t]?this.buildInId[t]++:this.buildInId[t]=1},updateRenderState:function(e,t,n,r){this.frame=e,this._updateBuildInData(this.frame,0),this.shadowData=t,this._updateBuildInData(this.shadowData,1),this.object=n,this._updateBuildInData(this.object,2),this.objectData=r}},_setupBuiltinParams:function(e,t,n){const r=e.__idx,i=t.material;i.buildInId[r]!==this.renderState.buildInId[r]&&(De.resetBuiltinParams(i,r,e),i.buildInId[r]=this.renderState.buildInId[r]),De.setupBuiltinParams(t,r,n)},draw:function(){const e=this.renderState,t=e.object,n=e.objectData.surface[0],r=le.get(n),i=this.overrideMaterial||r.material;if(r.hasVao){const t=r.getVao(i);t!==e.prevVao&&(Ve.bindVertexArray(t),e.prevVao=t)}else Ve.bindVertexArray(null),e.prevVao=null,ke.bindBuffers(r,i);const a=r.renderType,o=De.getShaderProgram(i,a);if(o!==e.prevProgram){Ve.useProgram(o),De.resetBuiltinContext(i,a);const t=e.frame,n=e.shadowData;this._setupBuiltinParams(t,i,a),this._setupBuiltinParams(n,i,a),e.prevProgram=o,e.prevMatInst=void 0}e.prevMatInst!==i&&(De.setupUserParams(i,a),e.prevMatInst=i),this._setupBuiltinParams(t,i,a),Oe.renderState.isBlending&&Ve.blendFunc(i.blending.src,i.blending.dst);const s=i.scissor.enabled,u=i.depthWrite,c=i.cullFaceMode;if(s){Ve.enable(Ve.SCISSOR_TEST);const{posX:e,posY:t,sizeX:n,sizeY:r}=i.scissor;Ve.scissor(e,t,n,r)}!1===u&&Ve.depthMask(!1),c!==Ve.BACK&&(c===Ve.ZERO?Ve.disable(Ve.CULL_FACE):Ve.cullFace(c)),Ve.drawElements(i.material.primitiveType,r.indicesBuffer.count,Ve.UNSIGNED_INT,r.indicesBuffer.offset),s&&Ve.disable(Ve.SCISSOR_TEST),!1===u&&Ve.depthMask(!0),c!==Ve.BACK&&(c===Ve.ZERO?Ve.enable(Ve.CULL_FACE):Ve.cullFace(Ve.BACK))}},De={materialCache:{},invalidMaterial:void 0,findInCache:function(e,t){return e in this.materialCache?this.materialCache[e][t]:null},createUniformView:function(e,t,n){const r=re.glValueEnum2size(t)*(n||1);switch(t){case Ve.INT:return new Int32Array(h.buffer,e,r);case Ve.FLOAT:case Ve.FLOAT_VEC2:case Ve.FLOAT_VEC3:case Ve.FLOAT_VEC4:case Ve.FLOAT_MAT3:case Ve.FLOAT_MAT4:return new Float32Array(h.buffer,e,r);case Ve.SAMPLER_2D:case Ve.SAMPLER_CUBE:return new Int32Array(h.buffer,e,r)}return de.error("RenderState: unsupported field type '"+t+"'"),null},createShader:function(e,t){let n=null;switch(t){case 1:n=Ve.VERTEX_SHADER;break;case 2:n=Ve.FRAGMENT_SHADER}const r=Ve.createShader(n);Ve.shaderSource(r,pe(e)),Ve.compileShader(r);return Ve.getShaderParameter(r,Ve.COMPILE_STATUS)?le.make(r,De.deleteShader,"Shader"):(console.error("could not compile shader("+t+"): "+Ve.getShaderInfoLog(r)+"\n"+pe(e)),le.invalid)},deleteShader:function(e){Ve.deleteShader(e)},createShaderProgram:function(e,n,r,i,a){let o=this.findInCache(n,r);if(o)for(let n=0;n<o.paramMapping.length;++n){let r=o.paramMapping[n].uniform,i=t._malloc(r.name.length+1);he(r.name,i);let s=4*re.glValueEnum2size(r.type);R.get(a)(e.context,i,r.type,s),t._free(i)}else{const i=Ve.createProgram();Ve.attachShader(i,le.get(n)),Ve.attachShader(i,le.get(r)),Ve.linkProgram(i);if(!Ve.getProgramParameter(i,Ve.LINK_STATUS))return console.error("program failed to link: "+Ve.getProgramInfoLog(i)),le.invalid;const s=Ve.getProgramParameter(i,Ve.ACTIVE_UNIFORMS),u=[],c={};for(let n=0;n<s;n++){const r=Ve.getActiveUniform(i,n);let o,s=Ve.getUniformLocation(i,r.name);if("[0]"===r.name.substr(-3)){o=r.name.slice(0,-3);for(let e=0;e<r.size;++e){const t=o+"["+e+"]";s=Ve.getUniformLocation(i,t),c[t]={info:r,location:s}}}else o=r.name,c[o]={info:r,location:s};let l=!1;for(let e=0;e<Oe.renderState.buildInData.length;e++)if(o in Oe.renderState.buildInData[e]){l=!0;break}if(l)continue;const d=t._malloc(r.name.length+1);he(r.name,d);const f=4*re.glValueEnum2size(r.type),m=R.get(a)(e.context,d,r.type,f);t._free(d),u.push({uniform:r,location:s,offset:m})}const l=Ve.getProgramParameter(i,Ve.ACTIVE_ATTRIBUTES),d={},f={};for(let e=0;e<l;e++){const t=Ve.getActiveAttrib(i,e);d[e]=t;const n=Ve.getAttribLocation(i,t.name);f[t.name]={info:t,location:n}}o={program:i,paramMapping:u,attributes:f,uniforms:c,buildInSetters:[],builtInContext:{currentTextureIdx:0}},n in this.materialCache||(this.materialCache[n]={}),this.materialCache[n][r]=o}return e.programs[i]=o,e.programs.length-1},createMaterial:function(e,t){return le.make({context:e,programs:{},buildInId:[],primitiveType:re.number2glPrimitiveType(t)},De.deleteMaterial,"Material")},getShaderProgram:function(e,t){return e.material.programs[t].program},deleteMaterial:function(e){Ve.deleteProgram(e.program)},createMaterialInst:function(e,t){const n={},r={},i=le.get(e);for(const e in i.programs){const a=i.programs[e],o={},s=[];for(const e in a.paramMapping){const n=a.paramMapping[e],r={view:this.createUniformView(t+n.offset,n.uniform.type),location:n.location,uniform:n.uniform};o[n.uniform.name]=r,s.push(r)}n[e]=o,r[e]=s}return le.make({material:i,dataPtr:t,userParams:n,userParamsList:r,blending:{src:Ve.ONE,dst:Ve.ZERO},scissor:{enabled:!1,posX:0,posY:0,sizeX:0,sizeY:0},depthWrite:!0,cullFaceMode:Ve.BACK},De.deleteMaterialInst,"MaterialInstance")},deleteMaterialInst:function(e){},setupUserParams:function(e,t){const n={currentTextureIdx:e.material.programs[t].builtInContext.currentTextureIdx},r=e.userParamsList[t];for(let e=0,t=r.length;e<t;e++){const t=r[e];this.setParam(t.location,t.uniform.type,t.view,n)}},getAttributes:function(e,t){return e.material.programs[t].attributes},resetBuiltinParams:function(e,t,n){for(const r in e.programs){const i=e.programs[r];i.buildInSetters[t]=[];for(const e in n.__glBinding){const r=n.__glBinding[e],a=r.value,o=i.uniforms[e];void 0!==o&&De.addBuiltinSetter(i,t,o,r.type,a)}}},resetBuiltinContext:function(e,t){e.material.programs[t].builtInContext.currentTextureIdx=0},setupBuiltinParams:function(e,t,n){const r=e.material.programs[n];for(let e=0,n=r.buildInSetters[t].length;e<n;e++)r.buildInSetters[t][e]()},addBuiltinSetter:function(e,t,n,r,i){e.buildInSetters[t].push((function(){De.setParam(n.location,r,i,e.builtInContext)}))},setBlending:function(e,t,n){const r=le.get(e);r.blending.src=t,r.blending.dst=n},setScissor:function(e,t,n,r,i,a){const o=le.get(e);o.scissor.enabled=t,o.scissor.posX=n,o.scissor.posY=r,o.scissor.sizeX=i,o.scissor.sizeY=a},setDepthWrite:function(e,t){le.get(e).depthWrite=t},setCullFace:function(e,t){le.get(e).cullFaceMode=t},setParam:function(e,t,n,r){let i,a,o;switch(t){case Ve.FLOAT:Ve.uniform1f(e,n);break;case Ve.INT:Ve.uniform1i(e,n);break;case Ve.FLOAT_VEC2:Ve.uniform2fv(e,n);break;case Ve.FLOAT_VEC3:Ve.uniform3fv(e,n);break;case Ve.FLOAT_VEC4:Ve.uniform4fv(e,n);break;case Ve.FLOAT_MAT3:Ve.uniformMatrix3fv(e,!1,n);break;case Ve.FLOAT_MAT4:Ve.uniformMatrix4fv(e,!1,n);break;case Ve.SAMPLER_2D:i=n[0],i!=le.invalid&&(a=le.get(i),o=a,Ve.activeTexture(Ve.TEXTURE0+r.currentTextureIdx),o?(Ve.bindTexture(Ve.TEXTURE_2D,o),Ve.uniform1i(e,r.currentTextureIdx)):Ve.bindTexture(Ve.TEXTURE_2D,null),r.currentTextureIdx+=1);break;case Ve.SAMPLER_CUBE:i=n[0],i!=le.invalid&&(a=le.get(i),o=a,Ve.activeTexture(Ve.TEXTURE0+r.currentTextureIdx),o?(Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,o),Ve.uniform1i(e,+r.currentTextureIdx)):Ve.bindTexture(Ve.TEXTURE_CUBE_MAP,null),r.currentTextureIdx+=1)}}};var Ue={_board:null,_onGUIEvent:void 0,virtualSize:{width:0,height:0},widgetClasses:{},imagesBlobs:{},isValid:function(){return void 0!==Ue._board&&null!==Ue._board},onEvent:function(e,t){R.get(Ue._onGUIEvent)(e,t)},Event:{Tap:0,TouchBegin:1,TouchEnd:2},registerWidgetClass:function(e,t){void 0!==t.init&&t.init(),Ue.widgetClasses[e]=t},findWidgetClass:function(e){return Ue.widgetClasses[e]},addElement:function(e){return Ue._board.appendChild(e),le.make(e)},findElement:function(e){return le.get(e)},removeElement:function(e){if(null!=e){var t=le.get(e);t&&(Ue._board.removeChild(t),le.free(e))}},init:function(e,t){if(Ue._board=document.getElementById(e),Ue._onGUIEvent=t,null!=Ue._board){var n=Ue._board.getBoundingClientRect();n.width>n.height?(Ue.virtualSize.width=1920,Ue.virtualSize.height=1080):(Ue.virtualSize.width=1080,Ue.virtualSize.height=1920)}},getScreenSize:function(){if(null!=Ue._board){var e=Ue._board.getBoundingClientRect();return{width:e.width,height:e.height}}},getVirtualSize:function(){return Ue.virtualSize},toNormalizeCoord:function(e,t){return{x:e.x/Ue.virtualSize.width*100,y:e.y/Ue.virtualSize.height*100}},delete:function(e){le.free(e)},getImageUrl:function(e){var t,n,r,i;if(0==e&&ce("getImageUrl '"+e+" is null pointer'"),0!=(t=v(e)).length)return t in this.imagesBlobs?this.imagesBlobs[t]:W.isURL(t)?t:(void 0===(n=W.get(t))&&ce("fail to load image from '"+t+"'"),r=new Blob([n.data],{type:n.type}),i=(window.URL||window.webkitURL).createObjectURL(r),this.imagesBlobs[t]=i,i)},toColor:function(e){return"rgba("+[(4278190080&(e>>>=0))>>>24,(16711680&e)>>>16,(65280&e)>>>8,(255&e)/255].join(",")+")"},CSSlinearGradient:function(e,t){return"linear-gradient(to bottom, "+this.toColor(e)+", "+this.toColor(t)+")"},toDarkenColor:function(e,t){return this.toLightenDarkenColor(e,-t)},toLightenColor:function(e,t){return this.toLightenDarkenColor(e,t)},toLightenDarkenColor:function(e,t){var n=(65280&(e>>>=0))>>>8,r=(16711680&e)>>>16,i=(4278190080&e)>>>24;return(i+=t)>255?i=255:i<0&&(i=0),(n+=t)>255?n=255:n<0&&(n=0),(r+=t)>255?r=255:r<0&&(r=0),"rgba("+[i,r,n,(255&e)/255].join(",")+")"},getFont:function(e){var t;switch(e){case 0:default:t="Courier New, Courier, monospace";break;case 1:t="Arial, sans-serif";break;case 2:t="Times, serif";break;case 3:t="Copperplate, fantasy";break;case 4:t="Helvetica, sans-serif";break;case 5:t="FreeMono, monospace";break;case 6:t="ComicSans, cursive";break;case 7:t="Tahoma, sans-serif";break;case 8:t="Lato, sans-serif"}return t}};var ke={__internal:{cache:{},surfacesByVao:{},bindBuffers:function(e,t){Ve.bindBuffer(Ve.ARRAY_BUFFER,e.verticesBuffer),Ve.bindBuffer(Ve.ELEMENT_ARRAY_BUFFER,e.indicesBuffer);const n=De.getAttributes(t,e.renderType);for(const t in n){const r=n[t].location,i=e.verticesBuffer.vertexFormat.attributes[t];void 0===i&&ce("Unknown vertex attribute "+t),Ve.vertexAttribPointer(r,i.size/4,Ve.FLOAT,!1,e.verticesBuffer.vertexFormat.stride,i.offset),Ve.enableVertexAttribArray(r)}},getVao:function(e,t){if(void 0!==t&&void 0!==e.verticesBuffer&&void 0!==e.indicesBuffer){const n=t.__outerId;n in this.cache||(this.cache[n]={});const r=this.cache[n];if(!(e.verticesBufferId in r)||e.verticesBuffer.updated){const t=r[e.verticesBufferId];t&&Object.entries(t).map((([e,t])=>{Ve.bindVertexArray(null),Ve.deleteVertexArray(t)})),r[e.verticesBufferId]={},e.verticesBuffer.updated=!1}const i=r[e.verticesBufferId];if(!(e.indicesBufferId in i)||e.indicesBuffer.updated){e.indicesBuffer.updated=!1;const n=i[e.indicesBufferId];n&&(Ve.bindVertexArray(null),Ve.deleteVertexArray(n));const r=Ve.createVertexArray();i[e.indicesBufferId]=r,Ve.bindVertexArray(r),this.bindBuffers(e,t),Ve.bindVertexArray(null)}return i[e.indicesBufferId]}return null},updateVao:function(e){e.needUpdate&&(e.vao=this.getVao(e,e.material),e.vao&&(e.needUpdate=!1))},delete:function(e){}},create:function(e){const t={vao:void 0,hasVao:e,material:void 0,verticesBuffer:void 0,verticesBufferId:void 0,indicesBuffer:void 0,indicesBufferId:void 0,renderType:void 0,needUpdate:!0,__vaoCache:{},__prevMat:{__outerId:void 0},__prevVao:void 0,getVao:function(e){(this.verticesBuffer.updated||this.indicesBuffer.updated)&&(this.needUpdate=!0,ke.__internal.updateVao(this),this.__prevMat={__outerId:void 0},this.__prevVao=void 0);const t=e.__outerId;if(t===this.material.__outerId)return this.vao;if(t===this.__prevMat.__outerId)return this.__prevVao;let n=this.__vaoCache[t];return n||(n=ke.__internal.getVao(this,e),this.__vaoCache[t]=n),this.__prevMat=e,this.__prevVao=n,n}};return le.make(t,(function(){ke.__internal.delete(t)}),"Surface")},setMaterial:function(e,t){const n=le.get(e);n.materialId=t,n.material=le.get(t),n.needUpdate=!0,n.hasVao&&this.__internal.updateVao(n)},setRenderType:function(e,t){const n=le.get(e);n.renderType=t,n.needUpdate=!0,n.hasVao&&this.__internal.updateVao(n)},setVerticesBuffer:function(e,t){const n=le.get(e);n.needUpdate=!0,n.verticesBufferId=t,n.verticesBuffer=le.get(t),n.__vaoCache={},n.hasVao&&this.__internal.updateVao(n)},setIndicesBuffer:function(e,t){const n=le.get(e);n.needUpdate=void 0===n.indicesBuffer,n.indicesBufferId=t,n.indicesBuffer=le.get(t),n.__vaoCache={},n.hasVao&&this.__internal.updateVao(n)},bindBuffers:function(e,t){this.__internal.bindBuffers(e,t)}};var Ge={__internal:{indicesTypeLength:4,decryptBufferUsage:function(e){switch(e){case 0:return Ve.STATIC_DRAW;case 1:return Ve.DYNAMIC_DRAW;case 2:return Ve.STREAM_DRAW}ce("invalid buffer usage value: "+e)},delete:function(e){Ve.deleteBuffer(e)}},createVerticesBuffer:function(e,t){const n=Ve.createBuffer();n.type=Ve.ARRAY_BUFFER,n.usage=e,n.vertexFormat={attributes:le.get(t).descr,stride:0};for(const e in n.vertexFormat.attributes)n.vertexFormat.stride+=n.vertexFormat.attributes[e].size;return n.data=void 0,le.make(n,this.__internal.delete,"VerticesBuffer")},createIndicesBuffer:function(e){const t=Ve.createBuffer();return t.type=Ve.ELEMENT_ARRAY_BUFFER,t.usage=e,t.offset=0,t.count=0,le.make(t,this.__internal.delete,"IndicesBuffer")},updateData:function(e,t,n){const r=le.get(e);let i;Ve.bindBuffer(r.type,r),r.data&&(delete r.data,r.data=null),i=r.type===Ve.ELEMENT_ARRAY_BUFFER?new Uint32Array(h.buffer,t,n/4):new Float32Array(h.buffer,t,n/4),r.data=i,r.updated=!0,Ve.bufferData(r.type,i,r.usage)},updateIndicesUsage:function(e,t,n){const r=le.get(e);r.offset=t,r.count=n}};var Ve,He=function(e){Ve.deleteFramebuffer(e)};function Xe(e){return t["_"+e]}function We(e,t,n,r,i){var a={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){A(e,E,t,n)})(e,t=qe(n),n)}return t},array:e=>{var t=qe(e.length);return ee(e,t),t}};var o=Xe(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=a[n[c]];l?(0===u&&(u=Ke()),s[c]=l(r[c])):s[c]=r[c]}var d=o.apply(null,s);return d=function(e){return 0!==u&&Ze(u),function(e){return"string"===t?v(e):"boolean"===t?Boolean(e):e}(e)}(d)}window.w4gl=ae,window.W4WebGLProfiler=ne,de.info("W4 Engine is loading..."),t.W4L=ge,N=ge.abort,window.w4=t,t.W4Platform=Re,t.registerWidgetClass=Ue.registerWidgetClass;var Ye,ze={pb:function(){void 0!==window.h5games&&window.h5games.gameOver()},eb:function(e){if(void 0!==window.h5games)return window.h5games.getPresets(v(e))},Wa:function(){if(void 0!==window.h5games)return window.h5games.hasRewardedAd()},Bb:function(e,t){void 0!==window.h5games?window.h5games.init().then((()=>{if(void 0!==window.h5config){var n="h5config.js";V.isScriptLoaded(n)||V.loadScript(n).then((function(){})).catch((function(e){console.error("Failed! H5CONFIG wasn't initialized! "+e),reject(!1)}))}V.helpers.returnBool(e,t,!0)}),(()=>{V.helpers.returnBool(e,t,!1)})):V.helpers.returnBool(e,t,!0)},La:function(e,t){void 0!==window.h5games?window.h5games.gameOver().then((()=>{V.helpers.returnBool(e,t,!0)})):V.helpers.returnBool(e,t,!0)},y:function(){void 0!==window.h5games&&window.h5games.levelEnd()},Ab:function(e){void 0!==window.h5games&&window.h5games.nextLevel(e)},ra:function(e,t){V.LITE_OnExternalMuteHandlerContext=e,V.LITE_OnExternalMuteHandlerCallback=t,V.LITE_OnExternalMuteHandler()},oa:function(e,t){V.LITE_OnExternalNextLevelHandlerContext=e,V.LITE_OnExternalNextLevelHandlerCallback=t,V.LITE_OnExternalNextLevelHandler()},ta:function(e,t){V.LITE_OnExternalPauseHandlerContext=e,V.LITE_OnExternalPauseHandlerCallback=t,V.LITE_OnExternalPauseHandler()},pa:function(e,t){V.LITE_OnExternalStopGameHandlerContext=e,V.LITE_OnExternalStopGameHandlerCallback=t,V.LITE_OnExternalStopGameHandler()},Na:function(e,t){void 0!==window.h5games&&window.h5games.hasRewardedAd()&&window.h5games.rewardedAd().then((n=>{n.isRewardGranted?V.helpers.returnBool(e,t,!0):V.helpers.returnBool(e,t,!1)}))},da:function(){void 0!==window.h5games&&window.h5games.playerReady()},Ia:function(e){void 0!==window.h5games&&window.h5games.sendPreloadProgress(e)},M:function(e){void 0!==window.h5games&&window.h5games.sendScore(e)},V:function(e,t){void 0!==window.h5games?new Promise(((n,r)=>{window.h5games.startGame().then((()=>{V.helpers.returnBool(e,t,!0),n(!0)})).catch((()=>{V.helpers.returnBool(e,t,!1),r(!1)}))})):V.helpers.returnBool(e,t,!0)},q:function(e,t,n,r){W.UnpackCallback&&W.UnpackCallback(e,t,n,r)},ha:function(e){W.Files={},R.get(e)()},ia:function(e,n){if(W.Files={},t.getFileFromVFS=W.get,t.isFileSystemValid=W.isLoaded,0!==e){console.log(v(e));const t=JSON.parse(v(e));X(t,n)}else void 0!==window.W4_VFS_DEC?X(window.W4_VFS_DEC,n):ce("W4_VFS_DEC not found. File system is not declared")},ga:function(e){return v(e)in W.Files?1:0},fa:function(e,n,r){const i=W.get(v(e));if(null==i)return void ce("VFS_sync: "+e+" file not found ");const a=i.data;if(void 0!==a){const e=a.byteLength,i=t._malloc(e),o=new Uint8Array(t.HEAPU8.buffer,i,e);o.set(new Uint8Array(a)),R.get(r)(n,o.byteOffset,e)}else R.get(r)(n,null,0)},Ya:function(){return true},a:function(){N("")},r:function(){return Date.now()},Ua:function(e){var t,n,r=E.length,i=1073741824;if((e>>>=0)>i)return!1;for(var a=1;a<=4;a*=2){var o=r*(1+.2/a);if(o=Math.min(o,e+100663296),Y(Math.min(i,(t=Math.max(e,o))+((n=65536)-t%n)%n)))return!0}return!1},Sa:function(e,t){var n=0;return j().forEach((function(r,i){var a=t+n;x[e+4*i>>2]=a,K(r,a),n+=r.length+1})),0},Ta:function(e,t){var n=j();x[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),x[t>>2]=r,0},Va:function(e){return 52},Pa:function(e,t,n,r,i){return 70},Xa:function(e,t,n,r){for(var i=0,a=0;a<n;a++){var o=x[t>>2],s=x[t+4>>2];t+=8;for(var u=0;u<s;u++)q(e,E[o+u]);i+=s}return x[r>>2]=i,0},Aa:function(e,t){if(void 0!==window.h5games||void 0===window.famobi)return"";str=window.famobi.getBrandingButtonImage([!0]),V.helpers.returnStr(e,t,str)},va:function(e){if(void 0!==window.famobi){var t=v(e);return window.famobi.localStorage.getItem(t)}},ya:function(e){if(void 0!==window.famobi)return window.famobi.hasFeature(v(e))},Oa:function(){if(void 0!==window.famobi)return window.famobi.hasRewardedAd()},qa:function(e,t){V.fmbAPI_OnExternalMuteHandlerContext=e,V.fmbAPI_OnExternalMuteHandlerCallback=t,V.fmbAPI_OnExternalMuteHandler()},sa:function(e,t){V.fmbAPI_OnExternalPauseHandlerContext=e,V.fmbAPI_OnExternalPauseHandlerCallback=t,V.fmbAPI_OnExternalPauseHandler()},na:function(e,t){V.fmbAPI_OnOffsetChangeHandlerContext=e,V.fmbAPI_OnOffsetChangeHandlerCallback=t,V.fmbAPI_OnOffsetChangeHandler()},za:function(){void 0!==window.famobi&&window.famobi.openBrandingLink()},Ma:function(e,t){void 0!==window.famobi&&window.famobi.rewardedAd((function(n){V.helpers.returnBool(e,t,n.rewardGranted)}))},ma:function(){void 0!==window.famobi&&window.famobi.gameReady()},D:function(e){void 0!==window.famobi&&window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:e})},la:function(){if(void 0!==window.famobi){let e=window.famobi.getOffsets(),t=w4.W4Platform.baseDiv,n=w4.W4Platform.canvas,r=t.style.width,i=t.style.height;t.style.width="100%",t.style.height="100%";let a=t.offsetWidth-(e.right+e.left),o=t.offsetHeight-(e.top+e.bottom);if(r==a+"px"&&i==o+"px")return t.style.width=r,void(t.style.height=i);t.style.width=a+"px",t.style.height=o+"px",t.style["margin-left"]=e.left+"px",t.style["margin-top"]=e.top+"px",t.style["margin-right"]=e.right+"px",t.style["margin-bottom"]=e.bottom+"px",n.width=a*w4.W4Platform.DPR,n.height=o*w4.W4Platform.DPR,w4.W4Platform.applyResize()}},wa:function(e,t){if(void 0!==window.famobi){var n=v(e);window.famobi.localStorage.setItem(n,t)}},xa:function(e){void 0!==window.famobi&&window.famobi.setPreloadProgress(e)},Ha:function(e,t,n){void 0!==window.famobi_analytics?window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:v(n)}).then((function(){V.helpers.returnBool(e,t,!0)})):V.helpers.returnBool(e,t,!0)},Ga:function(e,t,n,r){if(void 0!==window.famobi){const i=new Promise(((e,t)=>{window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:v(n),reason:v(r)}).then((()=>{e(!0)})).catch((()=>{t(!1)}))})),a=new Promise(((e,t)=>{window.famobi.showInterstitialAd({eventId:"button:main:restart",callback:()=>{e(!0)}})}));Promise.all([i,a]).then((()=>{V.helpers.returnBool(e,t,!0)}))}else V.helpers.returnBool(e,t,!0)},Ja:function(e,t,n){void 0!==window.famobi?new Promise(((r,i)=>{window.famobi_analytics.trackEvent("EVENT_LEVELRESTART",{levelName:v(n)}).then((()=>{V.helpers.returnBool(e,t,!0),r(!0)})).catch((()=>{V.helpers.returnBool(e,t,!1),i(!1)}))})):V.helpers.returnBool(e,t,!0)},Ka:function(e,t,n){void 0!==window.famobi_analytics&&window.famobi_analytics.trackEvent("EVENT_LEVELSTART",{levelName:v(n)}).then((()=>{V.helpers.returnBool(e,t,!0)}))},Fa:function(e,t,n){if(void 0!==window.famobi){const r=new Promise(((e,t)=>{window.famobi_analytics.trackEvent("EVENT_LEVELSUCCESS",{levelName:v(n)}).then((()=>{e(!0)})).catch((()=>{t(!1)}))})),i=new Promise(((e,t)=>{window.famobi.showInterstitialAd({eventId:"button:main:next",callback:()=>{e(!0)}})}));Promise.all([r,i]).then((()=>{V.helpers.returnBool(e,t,!0)}))}else V.helpers.returnBool(e,t,!0)},Ea:function(e,t){void 0!==window.h5games?V.helpers.returnBool(e,t,!0):void 0!==window.famobi?window.famobi_analytics.trackEvent("EVENT_PAUSE").then((()=>{V.helpers.returnBool(e,t,!0)})):V.helpers.returnBool(e,t,!0)},Da:function(e,t){void 0!==window.famobi?window.famobi_analytics.trackEvent("EVENT_RESUME").then((()=>{V.helpers.returnBool(e,t,!0)})):V.helpers.returnBool(e,t,!0)},Ca:function(e,t){void 0!==window.famobi_analytics&&window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Progression",progressionStatus:v(e),progression01:"level_"+v(t)})},Ba:function(e,t,n){void 0!==window.famobi_analytics&&window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"GA:Resource",itemType:v(e),itemId:v(t),amount:1,resourceCurrency:v(n)})},ua:function(){void 0!==window.famobi&&window.famobi.localStorage.clear()},Qa:function e(t,n){e.randomDevice||(e.randomDevice=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>N("randomDevice")}());for(var r=0;r<n;r++)g[t+r>>0]=e.randomDevice();return 0},Ra:function(e,t,n,r,i){return te(e,t,n,r)},z:function(){return ie.hasDepthTextures},x:function(){return ie.hasFloatTextures},W:function(){se.initialize()},U:function(){return se.isCreated()},T:function(){return se.isRunning()},c:function(e){se.setGlobalGain(e)},R:function(e){return oe.create(v(e))},Q:function(e){oe.delete(e)},S:function(){oe.initialize()},_:function(e){return se.createAudioSource(e)},Z:function(e){se.deleteAudioSource(e)},X:function(e){se.playAudioSource(le.get(e))},Y:function(e,t){se.setAudioSourceGain(le.get(e),t)},ja:function(){de.info("W4 Engine was loaded")},ob:function(e,t,n,r,i,a,o,s,u){return we(ye.decodeParameters({sources:{POSITIVE_X:e,NEGATIVE_X:t,POSITIVE_Y:n,NEGATIVE_Y:r,POSITIVE_Z:i,NEGATIVE_Z:a}},o,s,u))},qb:function(){return be()},nb:function(e){Ae(e)},mb:function(e,t,n,r){ve(e,ye.decodeParameters({},t,n,r))},lb:function(e,t,n){return Le.createFromData(v(e),new Uint8Array(h.buffer,t,n))},kb:function(e){return Le.createFromUrl(v(e))},jb:function(e){return Le.delete(e)},L:function(e){Se.initialize(window,le.get(e))},K:function(e,t){Pe.initialize(window,R.get(e),R.get(t))},J:function(e){Ce.initialize(Re.canvas,R.get(e))},I:function(e){Fe(Re.canvas,R.get(e))},e:function(e){void 0!==Ie.loader&&(Ie.loader.style.display=0===e?"none":"block")},E:function(e,n){const r=me(Ne(v(e)));R.get(n)(r),t._free(r)},F:function(e){return Be(v(e))},C:function(e,t){Me(v(e),v(t))},wb:function(e,t){return De.createMaterialInst(e,t)},vb:function(e,t,n){return De.setBlending(e,re.number2glBlendEnum(t),re.number2glBlendEnum(n))},sb:function(e,t){return De.setCullFace(e,re.number2glCullFaceMode(t))},tb:function(e,t){return De.setDepthWrite(e,0!==t)},ub:function(e,t,n,r,i,a){return De.setScissor(e,0!==t,n,r,i,a)},xb:function(e,t){return De.createMaterial(e,t)},ka:function(e){le.free(e)},p:function(){return Re.DPR},G:function(){return Re.canvas.height},H:function(){return Re.canvas.width},N:function(e,t,n,r){Re.initialize(v(e),R.get(t),R.get(n),R.get(r))},yb:function(e,t,n,r,i){return De.createShaderProgram(le.get(e),t,n,r,i)},rb:function(e,t){return De.createShader(e,t)},fb:function(e,t,n,r){const i=Te.decodeParameters({},t,n,r);return le.isValid(e)?xe.create(e,i):xe.createEmpty(i)},hb:function(e){const t=Ee(e),n=[t[0],t[1],t[2],t[3],t[0],t[1],t[2],t[3],t[0],t[1],t[2],t[3],t[0],t[1],t[2],t[3]],r={};return r.minFilter=Ve.NEAREST,r.magFilter=Ve.NEAREST,r.wrapS=Ve.REPEAT,r.wrapT=Ve.REPEAT,xe.prototype(r,new Uint8Array(n),2,2)},ib:function(){const e=Te.defaultTextures.default,t={};return t.minFilter=Ve.NEAREST,t.magFilter=Ve.NEAREST,t.wrapS=Ve.REPEAT,t.wrapT=Ve.REPEAT,xe.prototype(t,new Uint8Array(e.textureData),e.textureWidth,e.textureHeight)},gb:function(e,t,n,r,i,a,o,s,u,c,l,d,f,m,p){const g={};g.minFilter=Ve.NEAREST,g.magFilter=Ve.NEAREST,g.wrapS=Ve.CLAMP_TO_EDGE,g.wrapT=Ve.CLAMP_TO_EDGE;const E=v(e),_=document.createElement("canvas"),x=_.getContext("2d");x.textAlign="left",x.textBaseline="top";const T=["normal","italic","oblique"],w=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"];let b;b=n&&r?T[n]+" "+w[r]+" "+t+"px "+v(i):n?T[n]+" "+t+"px "+v(i):r?w[r]+" "+t+"px "+v(i):t+"px "+v(i),x.font=b;const A=x.measureText(E);_.width=A.width+m+d,_.height=Math.abs(A.actualBoundingBoxDescent)+Math.abs(A.actualBoundingBoxAscent)+l+f,x.textAlign="left",x.textBaseline="top",x.font=b,0!=(4&a)&&(x.fillStyle=_e(c),x.fillRect(0,0,_.width,_.height)),0!=(2&a)&&(x.lineWidth=o,x.strokeStyle=_e(u),x.strokeText(E,m,l)),0!=(1&a)&&(x.fillStyle=_e(s),x.fillText(E,m,l));const y=Le.createFromBlob(x.canvas.toDataURL("image/png")),I=new Uint32Array(h.buffer,p,2);return I[0]=_.width,I[1]=_.height,le.isValid(y)?xe.create(y,g,!0):xe.createEmpty(g)},db:function(e){xe.delete(e)},cb:function(e,t,n,r){xe.update(e,Te.decodeParameters({},t,n,r))},Cb:function(e,t){V.w4_getLinkContext=e,V.w4_getLinkCallback=t,V.w4_getLink()},B:function(e,t){Ue.virtualSize.width=e,Ue.virtualSize.height=t},o:function(e){return ke.create(e)},n:function(e){le.free(e)},A:function(e){const t=le.get(e).vao;t&&(Ve.bindVertexArray(null),Ve.deleteVertexArray(t))},j:function(e,t){ke.setIndicesBuffer(e,t)},i:function(e,t){ke.setMaterial(e,t)},h:function(e,t){ke.setRenderType(e,t)},g:function(e,t){ke.setVerticesBuffer(e,t)},$a:function(e){return Ge.createIndicesBuffer(Ge.__internal.decryptBufferUsage(e))},Za:function(e,t){return Ge.createVerticesBuffer(Ge.__internal.decryptBufferUsage(e),t)},ab:function(e){le.free(e)},bb:function(e,t,n){Ge.updateData(e,t,n)},_a:function(e,t,n){Ge.updateIndicesUsage(e,t,n)},ea:function(e){ce(v(e))},ca:function(e,t,n,r){de.__internal.writeLog(e,6,v(r),v(t),n)},ba:function(e,t){de.initialize(v(e),0===t?void 0:v(t))},$:function(){de.__internal.popIndentLevel()},aa:function(){de.__internal.pushIndentLevel()},f:function(e,t){return ue.registerPOD(e,t)},v:function(){ae.cleanupRender()},b:function(){const e=Oe.renderState.frame.clearColor,t=re.number2glClearMask(Oe.renderState.frame.clearMask[0]);ae.clearBackBuffer(t,e),Oe.renderState.prevProgram=null,Oe.renderState.prevMatInst=null,Oe.renderState.prevVao=null},m:function(){Oe.draw()},w:function(){ae.prepareRender()},d:function(e){Oe.renderState.isBlending=e,e?ae.enableBlend():ae.disableBlend()},u:function(e){e===le.invalid?(Oe.overrideMaterial=null,Oe.overrideMaterialId=null):(Oe.overrideMaterial=le.get(e),Oe.overrideMaterialId=e)},s:function(e,t,n,r,i){const a=Ve.createFramebuffer();Ve.bindFramebuffer(Ve.FRAMEBUFFER,a);const o=le.get(r);if(Ve.bindTexture(Ve.TEXTURE_2D,o),n?(Ve.texImage2D(Ve.TEXTURE_2D,0,Ve.RGBA32F,e,t,0,Ve.RGBA,Ve.FLOAT,null),Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_2D,o,0)):(Ve.texImage2D(Ve.TEXTURE_2D,0,Ve.RGBA,e,t,0,Ve.RGBA,Ve.UNSIGNED_BYTE,null),Ve.texParameterf(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,Ve.LINEAR),Ve.texParameterf(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,Ve.LINEAR),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,Ve.CLAMP_TO_EDGE),Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_2D,o,0)),i&&i!==le.invalid){const n=le.get(i);Ve.bindTexture(Ve.TEXTURE_2D,n),Ve.texImage2D(Ve.TEXTURE_2D,0,ie.depthSupportedFormat,e,t,0,Ve.DEPTH_COMPONENT,Ve.UNSIGNED_INT,null),Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.DEPTH_ATTACHMENT,Ve.TEXTURE_2D,n,0)}else{const n=Ve.createRenderbuffer();Ve.bindRenderbuffer(Ve.RENDERBUFFER,n),Ve.renderbufferStorage(Ve.RENDERBUFFER,ie.depthInternalFormat,e,t),Ve.framebufferRenderbuffer(Ve.FRAMEBUFFER,Ve.DEPTH_ATTACHMENT,Ve.RENDERBUFFER,n),Ve.bindRenderbuffer(Ve.RENDERBUFFER,null)}return Ve.checkFramebufferStatus(Ve.FRAMEBUFFER)!==Ve.FRAMEBUFFER_COMPLETE&&console.log(Ve.getError()),Ve.bindFramebuffer(Ve.FRAMEBUFFER,null),le.make(a,He,"Framebuffer")},zb:function(e){le.free(e)},l:function(e,t,n,r,i){i===le.invalid?Ve.bindFramebuffer(Ve.FRAMEBUFFER,null):Ve.bindFramebuffer(Ve.FRAMEBUFFER,le.get(i)),Ve.viewport(e,t,n,r)},t:function(e,t,n,r){Oe.renderState.updateRenderState(le.get(e),le.get(t),le.get(n),le.get(r))},k:function(){return Date.now()},O:function(e,t,n,r,i,a,o){const s=le.get(e),u={};u.type=pe(n),u.offset=r,u.size=i,a>0&&(u.count=a),o>0&&(u.control=o-1),s.descr[pe(t)]=u},P:function(e){return ue.registerType(e)}},je=(function(){var e={a:ze};function n(e,n){var r,i=e.exports;t.asm=i,I((h=t.asm.Db).buffer),R=t.asm.Kb,r=t.asm.Eb,S.unshift(r),function(e){if(C--,t.monitorRunDependencies&&t.monitorRunDependencies(C),0==C&&(null!==F&&(clearInterval(F),F=null),B)){var n=B;B=null,n()}}()}function i(e){n(e.instance)}function a(t){return(d||!u&&!c||"function"!=typeof fetch?Promise.resolve().then((function(){return k(M)})):fetch(M,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+M+"'";return e.arrayBuffer()})).catch((function(){return k(M)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){m("failed to asynchronously prepare wasm: "+e),N(e)}))}if(C++,t.monitorRunDependencies&&t.monitorRunDependencies(C),t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(e){m("Module.instantiateWasm callback failed with error: "+e),r(e)}(d||"function"!=typeof WebAssembly.instantiateStreaming||U(M)||"function"!=typeof fetch?a(i):fetch(M,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(i,(function(e){return m("wasm streaming compile failed: "+e),m("falling back to ArrayBuffer instantiation"),a(i)}))}))).catch(r)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.Eb).apply(null,arguments)},t._entry=function(){return(t._entry=t.asm.Fb).apply(null,arguments)},t._draw=function(){return(t._draw=t.asm.Gb).apply(null,arguments)},t._loadZipFile=function(){return(t._loadZipFile=t.asm.Hb).apply(null,arguments)},t._malloc=function(){return(je=t._malloc=t.asm.Ib).apply(null,arguments)}),Ke=(t._free=function(){return(t._free=t.asm.Jb).apply(null,arguments)},t.stackSave=function(){return(Ke=t.stackSave=t.asm.Lb).apply(null,arguments)}),Ze=t.stackRestore=function(){return(Ze=t.stackRestore=t.asm.Mb).apply(null,arguments)},qe=t.stackAlloc=function(){return(qe=t.stackAlloc=t.asm.Nb).apply(null,arguments)};function Je(e){function r(){Ye||(Ye=!0,t.calledRun=!0,T||(!0,G(S),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),P.unshift(e);var e;G(P)}()))}e=e||o,C>0||(!function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),L.unshift(e);var e;G(L)}(),C>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),r()}),1)):r()))}if(t.cwrap=function(e,t,n,r){var i=(n=n||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&i&&!r?Xe(e):function(){return We(e,t,n,arguments)}},B=function e(){Ye||Je(),Ye||(B=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Je(),t.ready}})();"object"==typeof exports&&"object"==typeof module?module.exports=Module:"function"==typeof define&&define.amd?define([],(function(){return Module})):"object"==typeof exports&&(exports.Module=Module),window.W4_VFS_DEC={"default.w4a":"resources/default.w4a","3d/flask_piece/flask_x3.w4a":"resources/3d/flask_piece/flask_x3.w4a","3d/flask_piece/flask_x4.w4a":"resources/3d/flask_piece/flask_x4.w4a","3d/flask_piece/flask_x5.w4a":"resources/3d/flask_piece/flask_x5.w4a","3d/sphere/sphere.w4a":"resources/3d/sphere/sphere.w4a","config/adaptiveNodesSettings.json":"resources/config/adaptiveNodesSettings.json","config/cameraConfig.json":"resources/config/cameraConfig.json","config/customSettings.json":"resources/config/customSettings.json","config/digitsSettings.json":"resources/config/digitsSettings.json","config/meshesContainerSettings.json":"resources/config/meshesContainerSettings.json","config/particlesSettings.json":"resources/config/particlesSettings.json","config/progressBarContainerSettings.json":"resources/config/progressBarContainerSettings.json","config/resources.json":"resources/config/resources.json","config/settings.json":"resources/config/settings.json","config/spriteContainerSettings.json":"resources/config/spriteContainerSettings.json","config/game_config/account.json":"resources/config/game_config/account.json","config/game_config/debug.json":"resources/config/game_config/debug.json","config/game_config/map_config.json":"resources/config/game_config/map_config.json","config/game_config/items/item_groups.json":"resources/config/game_config/items/item_groups.json","sounds/click.mp3":"resources/sounds/click.mp3","sounds/reward.mp3":"resources/sounds/reward.mp3","sounds/whoosh.mp3":"resources/sounds/whoosh.mp3","sounds/win.mp3":"resources/sounds/win.mp3","textures/balls.zip":"resources/textures/balls.zip"};