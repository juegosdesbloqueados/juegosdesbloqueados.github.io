function _TX(t){return atob(_STR[t])}function se_savePref(t,e){if(1!=Trigger_DisablePreferences){var n=_TX(0)+t;try{window.famobi.localStorage.setItem(n,e)}catch(t){localStorage.setItem(n,e)}}}function se_GetPref(t){if(1==Trigger_DisablePreferences)return-1;var e=_TX(0)+t;try{Temp=window.famobi.localStorage.getItem(e)}catch(t){Temp=localStorage.getItem(e)}return Temp=parseInt(Temp),typeof Temp==_TX(1)||isNaN(Temp)?-1:Temp==1*Temp?1*Temp:Temp}function se_GetStringPref(t){if(1==Trigger_DisablePreferences)return-1;var e,n=_TX(0)+t;try{e=window.famobi.localStorage.getItem(n)}catch(t){e=localStorage.getItem(n)}return console.log(n,e),typeof e==_TX(1)?-1:e}function f224(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function f176(t,e){return Math.atan2(e[1]-t[1],e[0]-t[0])}function f239(t,e,n,i){this.x=t,this.y=e,this.z=n,this.w=i}function f177(t){return 0==(t&t-1)}function f178(t,e){return t[0]*e[0]+t[1]*e[1]}function f240(t){return t*Math.PI/180}function f209(t,e){var n=t.x-e.x,i=t.y-e.y,o=t.z-e.z;return Math.sqrt(n*n+i*i+o*o)}function f241(t,e,n,i){var o=t-n,r=e-i;return Math.sqrt(o*o+r*r)}function f195(t,e){if(0==t&&0==e)return[t,e];var n=Math.atan2(e,t);return[Math.cos(n),Math.sin(n)]}function f196(t){var e,n=new f239;return 0==t.x&&0==t.y&&0==t.z?(n.x=0,n.y=0,n.z=0,n):(e=1/Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n)}function f210(t,e,n){var i=new f239,o=new f239,r=new f239;return i.x=e.x-n.x,i.y=e.y-n.y,i.z=e.z-n.z,o.x=t.x-n.x,o.y=t.y-n.y,o.z=t.z-n.z,r.x=i.y*o.z-i.z*o.y,r.y=i.z*o.x-i.x*o.z,r.z=i.x*o.y-i.y*o.x,f196(r)}function f253(t,e){return t<e?t:e}function f254(t,e){return t>e?t:e}function f134(t,e,n){var i=n.x-e.x,o=n.y-e.y,r=n.z-e.z,a=(t.x-e.x)*i+(t.y-e.y)*o+(t.z-e.z)*r,s=f253(1,f254(0,a/(i*i+o*o+r*r)));return a=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x)-(n.z-e.z)*(t.z-e.z),{x:e.x+i*s,y:e.y+o*s,z:e.z+r*s}}function f197(t,e,n){var i=n.x-e.x,o=n.y-e.y,r=(t.x-e.x)*i+(t.y-e.y)*o,a=f253(1,f254(0,r/(i*i+o*o)));return r=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x),{x:e.x+i*a,y:e.y+o*a}}function f245(t,e){var n=t.x*e.x+t.y*e.y;return{x:t.x-n*e.x*2,y:t.y-n*e.y*2}}!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,(function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){e.glMatrix=n(1),e.mat2=n(2),e.mat2d=n(3),e.mat3=n(4),e.mat4=n(5),e.quat=n(6),e.vec2=n(9),e.vec3=n(7),e.vec4=n(8)},function(t,e){var n={EPSILON:1e-6};n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===this.Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var i=Math.PI/180;n.toRadian=function(t){return t*i},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){var i=n(1),o={create:function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},clone:function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,e,n,o){var r=new i.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r},set:function(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t},transpose:function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},invert:function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n*r-o*i;return a?(a=1/a,t[0]=r*a,t[1]=-i*a,t[2]=-o*a,t[3]=n*a,t):null},adjoint:function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*s+r*l,t[1]=o*s+a*l,t[2]=i*c+r*u,t[3]=o*c+a*u,t}};o.mul=o.multiply,o.rotate=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*s,t[1]=o*l+a*s,t[2]=i*-s+r*l,t[3]=o*-s+a*l,t},o.scale=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[0],l=n[1];return t[0]=i*s,t[1]=o*s,t[2]=r*l,t[3]=a*l,t},o.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],a=t[3],s=e[0],l=e[1],c=e[2],u=e[3];return Math.abs(n-s)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(r-c)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-u)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))},o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},t.exports=o},function(t,e,n){var i=n(1),o={create:function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},clone:function(t){var e=new i.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,e,n,o,r,a){var s=new i.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=o,s[4]=r,s[5]=a,s},set:function(t,e,n,i,o,r,a){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=a,t},invert:function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=n*r-i*o;return l?(l=1/l,t[0]=r*l,t[1]=-i*l,t[2]=-o*l,t[3]=n*l,t[4]=(o*s-r*a)*l,t[5]=(i*a-n*s)*l,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=n[0],u=n[1],f=n[2],v=n[3],h=n[4],d=n[5];return t[0]=i*c+r*u,t[1]=o*c+a*u,t[2]=i*f+r*v,t[3]=o*f+a*v,t[4]=i*h+r*d+s,t[5]=o*h+a*d+l,t}};o.mul=o.multiply,o.rotate=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*c,t[1]=o*u+a*c,t[2]=i*-c+r*u,t[3]=o*-c+a*u,t[4]=s,t[5]=l,t},o.scale=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i*c,t[1]=o*c,t[2]=r*u,t[3]=a*u,t[4]=s,t[5]=l,t},o.translate=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=i*c+r*u+s,t[5]=o*c+a*u+l,t},o.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},o.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=e[0],u=e[1],f=e[2],v=e[3],h=e[4],d=e[5];return Math.abs(n-c)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-u)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(r-f)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-v)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-h)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-d)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))},t.exports=o},function(t,e,n){var i=n(1),o={create:function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone:function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues:function(t,e,n,o,r,a,s,l,c){var u=new i.ARRAY_TYPE(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=o,u[4]=r,u[5]=a,u[6]=s,u[7]=l,u[8]=c,u},set:function(t,e,n,i,o,r,a,s,l,c){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=a,t[6]=s,t[7]=l,t[8]=c,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var n=e[1],i=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=u*a-s*c,v=-u*r+s*l,h=c*r-a*l,d=n*f+i*v+o*h;return d?(d=1/d,t[0]=f*d,t[1]=(-u*i+o*c)*d,t[2]=(s*i-o*a)*d,t[3]=v*d,t[4]=(u*n-o*l)*d,t[5]=(-s*n+o*r)*d,t[6]=h*d,t[7]=(-c*n+i*l)*d,t[8]=(a*n-i*r)*d,t):null},adjoint:function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return t[0]=a*u-s*c,t[1]=o*c-i*u,t[2]=i*s-o*a,t[3]=s*l-r*u,t[4]=n*u-o*l,t[5]=o*r-n*s,t[6]=r*c-a*l,t[7]=i*l-n*c,t[8]=n*a-i*r,t},determinant:function(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*(c*r-a*l)+n*(-c*o+a*s)+i*(l*o-r*s)},multiply:function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],v=n[0],h=n[1],d=n[2],p=n[3],_=n[4],g=n[5],y=n[6],m=n[7],b=n[8];return t[0]=v*i+h*a+d*c,t[1]=v*o+h*s+d*u,t[2]=v*r+h*l+d*f,t[3]=p*i+_*a+g*c,t[4]=p*o+_*s+g*u,t[5]=p*r+_*l+g*f,t[6]=y*i+m*a+b*c,t[7]=y*o+m*s+b*u,t[8]=y*r+m*l+b*f,t}};o.mul=o.multiply,o.translate=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],v=n[0],h=n[1];return t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=s,t[5]=l,t[6]=v*i+h*a+c,t[7]=v*o+h*s+u,t[8]=v*r+h*l+f,t},o.rotate=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],v=Math.sin(n),h=Math.cos(n);return t[0]=h*i+v*a,t[1]=h*o+v*s,t[2]=h*r+v*l,t[3]=h*a-v*i,t[4]=h*s-v*o,t[5]=h*l-v*r,t[6]=c,t[7]=u,t[8]=f,t},o.scale=function(t,e,n){var i=n[0],o=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},o.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},o.fromQuat=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n+n,s=i+i,l=o+o,c=n*a,u=i*a,f=i*s,v=o*a,h=o*s,d=o*l,p=r*a,_=r*s,g=r*l;return t[0]=1-f-d,t[3]=u-g,t[6]=v+_,t[1]=u+g,t[4]=1-c-d,t[7]=h-p,t[2]=v-_,t[5]=h+p,t[8]=1-c-f,t},o.normalFromMat4=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],v=e[10],h=e[11],d=e[12],p=e[13],_=e[14],g=e[15],y=n*s-i*a,m=n*l-o*a,b=n*c-r*a,x=i*l-o*s,w=i*c-r*s,A=o*c-r*l,M=u*p-f*d,S=u*_-v*d,T=u*g-h*d,B=f*_-v*p,E=f*g-h*p,F=v*g-h*_,R=y*F-m*E+b*B+x*T-w*S+A*M;return R?(R=1/R,t[0]=(s*F-l*E+c*B)*R,t[1]=(l*T-a*F-c*S)*R,t[2]=(a*E-s*T+c*M)*R,t[3]=(o*E-i*F-r*B)*R,t[4]=(n*F-o*T+r*S)*R,t[5]=(i*T-n*E-r*M)*R,t[6]=(p*A-_*w+g*x)*R,t[7]=(_*b-d*A-g*m)*R,t[8]=(d*w-p*b+g*y)*R,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},o.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],v=e[0],h=e[1],d=e[2],p=e[3],_=e[4],g=e[5],y=t[6],m=e[7],b=e[8];return Math.abs(n-v)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-h)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(r-d)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-p)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-_)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(l-g)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-y)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-m)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(f-b)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))},t.exports=o},function(t,e,n){var i=n(1),o={scalar:{},SIMD:{},create:function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var e=new i.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(t,e,n,o,r,a,s,l,c,u,f,v,h,d,p,_){var g=new i.ARRAY_TYPE(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=o,g[4]=r,g[5]=a,g[6]=s,g[7]=l,g[8]=c,g[9]=u,g[10]=f,g[11]=v,g[12]=h,g[13]=d,g[14]=p,g[15]=_,g},set:function(t,e,n,i,o,r,a,s,l,c,u,f,v,h,d,p,_){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=a,t[6]=s,t[7]=l,t[8]=c,t[9]=u,t[10]=f,t[11]=v,t[12]=h,t[13]=d,t[14]=p,t[15]=_,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}};o.scalar.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],o=e[3],r=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},o.SIMD.transpose=function(t,e){var n,i,o,r,a,s,l,c,u,f;return n=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),r=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4.shuffle(n,i,0,1,4,5),s=SIMD.Float32x4.shuffle(o,r,0,1,4,5),l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),c=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,c),a=SIMD.Float32x4.shuffle(n,i,2,3,6,7),s=SIMD.Float32x4.shuffle(o,r,2,3,6,7),u=SIMD.Float32x4.shuffle(a,s,0,2,4,6),f=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,8,u),SIMD.Float32x4.store(t,12,f),t},o.transpose=i.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],v=e[10],h=e[11],d=e[12],p=e[13],_=e[14],g=e[15],y=n*s-i*a,m=n*l-o*a,b=n*c-r*a,x=i*l-o*s,w=i*c-r*s,A=o*c-r*l,M=u*p-f*d,S=u*_-v*d,T=u*g-h*d,B=f*_-v*p,E=f*g-h*p,F=v*g-h*_,R=y*F-m*E+b*B+x*T-w*S+A*M;return R?(R=1/R,t[0]=(s*F-l*E+c*B)*R,t[1]=(o*E-i*F-r*B)*R,t[2]=(p*A-_*w+g*x)*R,t[3]=(v*w-f*A-h*x)*R,t[4]=(l*T-a*F-c*S)*R,t[5]=(n*F-o*T+r*S)*R,t[6]=(_*b-d*A-g*m)*R,t[7]=(u*A-v*b+h*m)*R,t[8]=(a*E-s*T+c*M)*R,t[9]=(i*T-n*E-r*M)*R,t[10]=(d*w-p*b+g*y)*R,t[11]=(f*b-u*w-h*y)*R,t[12]=(s*S-a*B-l*M)*R,t[13]=(n*B-i*S+o*M)*R,t[14]=(p*m-d*x-_*y)*R,t[15]=(u*x-f*m+v*y)*R,t):null},o.SIMD.invert=function(t,e){var n,i,o,r,a,s,l,c,u,f,v=SIMD.Float32x4.load(e,0),h=SIMD.Float32x4.load(e,4),d=SIMD.Float32x4.load(e,8),p=SIMD.Float32x4.load(e,12);return a=SIMD.Float32x4.shuffle(v,h,0,1,4,5),i=SIMD.Float32x4.shuffle(d,p,0,1,4,5),n=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.shuffle(v,h,2,3,6,7),r=SIMD.Float32x4.shuffle(d,p,2,3,6,7),o=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.mul(o,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(i,a),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(i,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),s),u=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),c),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),c),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),f=SIMD.Float32x4.mul(n,s),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),a=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(f,c)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(f,u)),t):null},o.invert=i.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],v=e[10],h=e[11],d=e[12],p=e[13],_=e[14],g=e[15];return t[0]=s*(v*g-h*_)-f*(l*g-c*_)+p*(l*h-c*v),t[1]=-(i*(v*g-h*_)-f*(o*g-r*_)+p*(o*h-r*v)),t[2]=i*(l*g-c*_)-s*(o*g-r*_)+p*(o*c-r*l),t[3]=-(i*(l*h-c*v)-s*(o*h-r*v)+f*(o*c-r*l)),t[4]=-(a*(v*g-h*_)-u*(l*g-c*_)+d*(l*h-c*v)),t[5]=n*(v*g-h*_)-u*(o*g-r*_)+d*(o*h-r*v),t[6]=-(n*(l*g-c*_)-a*(o*g-r*_)+d*(o*c-r*l)),t[7]=n*(l*h-c*v)-a*(o*h-r*v)+u*(o*c-r*l),t[8]=a*(f*g-h*p)-u*(s*g-c*p)+d*(s*h-c*f),t[9]=-(n*(f*g-h*p)-u*(i*g-r*p)+d*(i*h-r*f)),t[10]=n*(s*g-c*p)-a*(i*g-r*p)+d*(i*c-r*s),t[11]=-(n*(s*h-c*f)-a*(i*h-r*f)+u*(i*c-r*s)),t[12]=-(a*(f*_-v*p)-u*(s*_-l*p)+d*(s*v-l*f)),t[13]=n*(f*_-v*p)-u*(i*_-o*p)+d*(i*v-o*f),t[14]=-(n*(s*_-l*p)-a*(i*_-o*p)+d*(i*l-o*s)),t[15]=n*(s*v-l*f)-a*(i*v-o*f)+u*(i*l-o*s),t},o.SIMD.adjoint=function(t,e){var n,i,o,r,a,s,l,c,u,f,v,h,d;return n=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),r=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.shuffle(n,i,0,1,4,5),s=SIMD.Float32x4.shuffle(o,r,0,1,4,5),a=SIMD.Float32x4.shuffle(u,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,u,1,3,5,7),u=SIMD.Float32x4.shuffle(n,i,2,3,6,7),c=SIMD.Float32x4.shuffle(o,r,2,3,6,7),l=SIMD.Float32x4.shuffle(u,c,0,2,4,6),c=SIMD.Float32x4.shuffle(c,u,1,3,5,7),u=SIMD.Float32x4.mul(l,c),u=SIMD.Float32x4.swizzle(u,1,0,3,2),f=SIMD.Float32x4.mul(s,u),v=SIMD.Float32x4.mul(a,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,u),f),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,u),v),v=SIMD.Float32x4.swizzle(v,2,3,0,1),u=SIMD.Float32x4.mul(s,l),u=SIMD.Float32x4.swizzle(u,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,u),f),d=SIMD.Float32x4.mul(a,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,u)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,u),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),c),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),f),h=SIMD.Float32x4.mul(a,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,u)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,u),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),u=SIMD.Float32x4.mul(a,s),u=SIMD.Float32x4.swizzle(u,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,u),h),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,u),d),u=SIMD.Float32x4.swizzle(u,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,u),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,u)),u=SIMD.Float32x4.mul(a,c),u=SIMD.Float32x4.swizzle(u,1,0,3,2),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(l,u)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,u),h),u=SIMD.Float32x4.swizzle(u,2,3,0,1),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),v),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,u)),u=SIMD.Float32x4.mul(a,l),u=SIMD.Float32x4.swizzle(u,1,0,3,2),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,u),v),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(c,u)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,u),d),SIMD.Float32x4.store(t,0,f),SIMD.Float32x4.store(t,4,v),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,d),t},o.adjoint=i.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],v=t[11],h=t[12],d=t[13],p=t[14],_=t[15];return(e*a-n*r)*(f*_-v*p)-(e*s-i*r)*(u*_-v*d)+(e*l-o*r)*(u*p-f*d)+(n*s-i*a)*(c*_-v*h)-(n*l-o*a)*(c*p-f*h)+(i*l-o*s)*(c*d-u*h)},o.SIMD.multiply=function(t,e,n){var i=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(t,0,l);var c=SIMD.Float32x4.load(n,4),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),a))));SIMD.Float32x4.store(t,4,u);var f=SIMD.Float32x4.load(n,8),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(t,8,v);var h=SIMD.Float32x4.load(n,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),a))));return SIMD.Float32x4.store(t,12,d),t},o.scalar.multiply=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],v=e[9],h=e[10],d=e[11],p=e[12],_=e[13],g=e[14],y=e[15],m=n[0],b=n[1],x=n[2],w=n[3];return t[0]=m*i+b*s+x*f+w*p,t[1]=m*o+b*l+x*v+w*_,t[2]=m*r+b*c+x*h+w*g,t[3]=m*a+b*u+x*d+w*y,m=n[4],b=n[5],x=n[6],w=n[7],t[4]=m*i+b*s+x*f+w*p,t[5]=m*o+b*l+x*v+w*_,t[6]=m*r+b*c+x*h+w*g,t[7]=m*a+b*u+x*d+w*y,m=n[8],b=n[9],x=n[10],w=n[11],t[8]=m*i+b*s+x*f+w*p,t[9]=m*o+b*l+x*v+w*_,t[10]=m*r+b*c+x*h+w*g,t[11]=m*a+b*u+x*d+w*y,m=n[12],b=n[13],x=n[14],w=n[15],t[12]=m*i+b*s+x*f+w*p,t[13]=m*o+b*l+x*v+w*_,t[14]=m*r+b*c+x*h+w*g,t[15]=m*a+b*u+x*d+w*y,t},o.multiply=i.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(t,e,n){var i,o,r,a,s,l,c,u,f,v,h,d,p=n[0],_=n[1],g=n[2];return e===t?(t[12]=e[0]*p+e[4]*_+e[8]*g+e[12],t[13]=e[1]*p+e[5]*_+e[9]*g+e[13],t[14]=e[2]*p+e[6]*_+e[10]*g+e[14],t[15]=e[3]*p+e[7]*_+e[11]*g+e[15]):(i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],v=e[9],h=e[10],d=e[11],t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=f,t[9]=v,t[10]=h,t[11]=d,t[12]=i*p+s*_+f*g+e[12],t[13]=o*p+l*_+v*g+e[13],t[14]=r*p+c*_+h*g+e[14],t[15]=a*p+u*_+d*g+e[15]),t},o.SIMD.translate=function(t,e,n){var i=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,1,1,1,1)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(i,SIMD.Float32x4.add(o,SIMD.Float32x4.add(r,a)));return SIMD.Float32x4.store(t,12,l),t},o.translate=i.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(t,e,n){var i=n[0],o=n[1],r=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.SIMD.scale=function(t,e,n){var i,o,r,a=SIMD.Float32x4(n[0],n[1],n[2],0);return i=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,0,0,0,0))),o=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,1,1,1,1))),r=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.scale=i.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(t,e,n,o){var r,a,s,l,c,u,f,v,h,d,p,_,g,y,m,b,x,w,A,M,S,T,B,E,F=o[0],R=o[1],I=o[2],C=Math.sqrt(F*F+R*R+I*I);return Math.abs(C)<i.EPSILON?null:(F*=C=1/C,R*=C,I*=C,r=Math.sin(n),s=1-(a=Math.cos(n)),l=e[0],c=e[1],u=e[2],f=e[3],v=e[4],h=e[5],d=e[6],p=e[7],_=e[8],g=e[9],y=e[10],m=e[11],b=F*F*s+a,x=R*F*s+I*r,w=I*F*s-R*r,A=F*R*s-I*r,M=R*R*s+a,S=I*R*s+F*r,T=F*I*s+R*r,B=R*I*s-F*r,E=I*I*s+a,t[0]=l*b+v*x+_*w,t[1]=c*b+h*x+g*w,t[2]=u*b+d*x+y*w,t[3]=f*b+p*x+m*w,t[4]=l*A+v*M+_*S,t[5]=c*A+h*M+g*S,t[6]=u*A+d*M+y*S,t[7]=f*A+p*M+m*S,t[8]=l*T+v*B+_*E,t[9]=c*T+h*B+g*E,t[10]=u*T+d*B+y*E,t[11]=f*T+p*B+m*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},o.scalar.rotateX=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],f=e[10],v=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+c*i,t[5]=a*o+u*i,t[6]=s*o+f*i,t[7]=l*o+v*i,t[8]=c*o-r*i,t[9]=u*o-a*i,t[10]=f*o-s*i,t[11]=v*o-l*i,t},o.SIMD.rotateX=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),SIMD.Float32x4.mul(a,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(r,i))),t},o.rotateX=i.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],f=e[10],v=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o-c*i,t[1]=a*o-u*i,t[2]=s*o-f*i,t[3]=l*o-v*i,t[8]=r*i+c*o,t[9]=a*i+u*o,t[10]=s*i+f*o,t[11]=l*i+v*o,t},o.SIMD.rotateY=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),SIMD.Float32x4.mul(a,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),SIMD.Float32x4.mul(a,o))),t},o.rotateY=i.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],f=e[6],v=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o+c*i,t[1]=a*o+u*i,t[2]=s*o+f*i,t[3]=l*o+v*i,t[4]=c*o-r*i,t[5]=u*o-a*i,t[6]=f*o-s*i,t[7]=v*o-l*i,t},o.SIMD.rotateZ=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),SIMD.Float32x4.mul(a,i))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(r,i))),t},o.rotateZ=i.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,e,n){var o,r,a,s=n[0],l=n[1],c=n[2],u=Math.sqrt(s*s+l*l+c*c);return Math.abs(u)<i.EPSILON?null:(s*=u=1/u,l*=u,c*=u,o=Math.sin(e),a=1-(r=Math.cos(e)),t[0]=s*s*a+r,t[1]=l*s*a+c*o,t[2]=c*s*a-l*o,t[3]=0,t[4]=s*l*a-c*o,t[5]=l*l*a+r,t[6]=c*l*a+s*o,t[7]=0,t[8]=s*c*a+l*o,t[9]=l*c*a-s*o,t[10]=c*c*a+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=i+i,l=o+o,c=r+r,u=i*s,f=i*l,v=i*c,h=o*l,d=o*c,p=r*c,_=a*s,g=a*l,y=a*c;return t[0]=1-(h+p),t[1]=f+y,t[2]=v-g,t[3]=0,t[4]=f-y,t[5]=1-(u+p),t[6]=d+_,t[7]=0,t[8]=v+g,t[9]=d-_,t[10]=1-(u+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},o.getRotation=function(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t},o.fromRotationTranslationScale=function(t,e,n,i){var o=e[0],r=e[1],a=e[2],s=e[3],l=o+o,c=r+r,u=a+a,f=o*l,v=o*c,h=o*u,d=r*c,p=r*u,_=a*u,g=s*l,y=s*c,m=s*u,b=i[0],x=i[1],w=i[2];return t[0]=(1-(d+_))*b,t[1]=(v+m)*b,t[2]=(h-y)*b,t[3]=0,t[4]=(v-m)*x,t[5]=(1-(f+_))*x,t[6]=(p+g)*x,t[7]=0,t[8]=(h+y)*w,t[9]=(p-g)*w,t[10]=(1-(f+d))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,e,n,i,o){var r=e[0],a=e[1],s=e[2],l=e[3],c=r+r,u=a+a,f=s+s,v=r*c,h=r*u,d=r*f,p=a*u,_=a*f,g=s*f,y=l*c,m=l*u,b=l*f,x=i[0],w=i[1],A=i[2],M=o[0],S=o[1],T=o[2];return t[0]=(1-(p+g))*x,t[1]=(h+b)*x,t[2]=(d-m)*x,t[3]=0,t[4]=(h-b)*w,t[5]=(1-(v+g))*w,t[6]=(_+y)*w,t[7]=0,t[8]=(d+m)*A,t[9]=(_-y)*A,t[10]=(1-(v+p))*A,t[11]=0,t[12]=n[0]+M-(t[0]*M+t[4]*S+t[8]*T),t[13]=n[1]+S-(t[1]*M+t[5]*S+t[9]*T),t[14]=n[2]+T-(t[2]*M+t[6]*S+t[10]*T),t[15]=1,t},o.fromQuat=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n+n,s=i+i,l=o+o,c=n*a,u=i*a,f=i*s,v=o*a,h=o*s,d=o*l,p=r*a,_=r*s,g=r*l;return t[0]=1-f-d,t[1]=u+g,t[2]=v-_,t[3]=0,t[4]=u-g,t[5]=1-c-d,t[6]=h+p,t[7]=0,t[8]=v+_,t[9]=h-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,e,n,i,o,r,a){var s=1/(n-e),l=1/(o-i),c=1/(r-a);return t[0]=2*r*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+i)*l,t[10]=(a+r)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r*2*c,t[15]=0,t},o.perspective=function(t,e,n,i,o){var r=1/Math.tan(e/2),a=1/(i-o);return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*i*a,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,e,n,i){var o=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),c=2/(o+r);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*l*.5,t[9]=(o-r)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t},o.ortho=function(t,e,n,i,o,r,a){var s=1/(e-n),l=1/(i-o),c=1/(r-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+i)*l,t[14]=(a+r)*c,t[15]=1,t},o.lookAt=function(t,e,n,r){var a,s,l,c,u,f,v,h,d,p,_=e[0],g=e[1],y=e[2],m=r[0],b=r[1],x=r[2],w=n[0],A=n[1],M=n[2];return Math.abs(_-w)<i.EPSILON&&Math.abs(g-A)<i.EPSILON&&Math.abs(y-M)<i.EPSILON?o.identity(t):(v=_-w,h=g-A,d=y-M,a=b*(d*=p=1/Math.sqrt(v*v+h*h+d*d))-x*(h*=p),s=x*(v*=p)-m*d,l=m*h-b*v,(p=Math.sqrt(a*a+s*s+l*l))?(a*=p=1/p,s*=p,l*=p):(a=0,s=0,l=0),c=h*l-d*s,u=d*a-v*l,f=v*s-h*a,(p=Math.sqrt(c*c+u*u+f*f))?(c*=p=1/p,u*=p,f*=p):(c=0,u=0,f=0),t[0]=a,t[1]=c,t[2]=v,t[3]=0,t[4]=s,t[5]=u,t[6]=h,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=-(a*_+s*g+l*y),t[13]=-(c*_+u*g+f*y),t[14]=-(v*_+h*g+d*y),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},o.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],v=t[9],h=t[10],d=t[11],p=t[12],_=t[13],g=t[14],y=t[15],m=e[0],b=e[1],x=e[2],w=e[3],A=e[4],M=e[5],S=e[6],T=e[7],B=e[8],E=e[9],F=e[10],R=e[11],I=e[12],C=e[13],L=e[14],P=e[15];return Math.abs(n-m)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-b)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(r-x)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-w)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-A)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-M)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-S)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(u-T)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(f-B)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(v-E)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(E))&&Math.abs(h-F)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(d-R)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(p-I)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(_-C)<=i.EPSILON*Math.max(1,Math.abs(_),Math.abs(C))&&Math.abs(g-L)<=i.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(y-P)<=i.EPSILON*Math.max(1,Math.abs(y),Math.abs(P))},t.exports=o},function(t,e,n){var i=n(1),o=n(4),r=n(7),a=n(8),s={create:function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}};s.rotationTo=function(){var t=r.create(),e=r.fromValues(1,0,0),n=r.fromValues(0,1,0);return function(i,o,a){var l=r.dot(o,a);return-.999999>l?(r.cross(t,e,o),r.length(t)<1e-6&&r.cross(t,n,o),r.normalize(t,t),s.setAxisAngle(i,t,Math.PI),i):l>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(r.cross(t,o,a),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+l,s.normalize(i,i))}}(),s.setAxes=function(){var t=o.create();return function(e,n,i,o){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t},s.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return 0!=i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n},s.add=a.add,s.multiply=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+a*s+o*c-r*l,t[1]=o*u+a*l+r*s-i*c,t[2]=r*u+a*c+i*l-o*s,t[3]=a*u-i*s-o*l-r*c,t},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+a*s,t[1]=o*l+r*s,t[2]=r*l-o*s,t[3]=a*l-i*s,t},s.rotateY=function(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l-r*s,t[1]=o*l+a*s,t[2]=r*l+i*s,t[3]=a*l-o*s,t},s.rotateZ=function(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*s,t[1]=o*l-i*s,t[2]=r*l+a*s,t[3]=a*l-r*s,t},s.calculateW=function(t,e){var n=e[0],i=e[1],o=e[2];return t[0]=n,t[1]=i,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-o*o)),t},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(t,e,n,i){var o,r,a,s,l,c=e[0],u=e[1],f=e[2],v=e[3],h=n[0],d=n[1],p=n[2],_=n[3];return 0>(r=c*h+u*d+f*p+v*_)&&(r=-r,h=-h,d=-d,p=-p,_=-_),1-r>1e-6?(o=Math.acos(r),a=Math.sin(o),s=Math.sin((1-i)*o)/a,l=Math.sin(i*o)/a):(s=1-i,l=i),t[0]=s*c+l*h,t[1]=s*u+l*d,t[2]=s*f+l*p,t[3]=s*v+l*_,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(n,i,o,r,a,l){return s.slerp(t,i,a,l),s.slerp(e,o,r,l),s.slerp(n,t,e,2*l*(1-l)),n}}(),s.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n*n+i*i+o*o+r*r,s=a?1/a:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-o*s,t[3]=r*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var r=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*r+r]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*r+a]-e[3*a+r])*n,t[r]=(e[3*r+o]+e[3*o+r])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=a.exactEquals,s.equals=a.equals,t.exports=s},function(t,e,n){var i=n(1),o={create:function(){var t=new i.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var e=new i.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},fromValues:function(t,e,n){var o=new i.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},subtract:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}};o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},o.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},o.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return n*n+i*i+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},o.normalize=function(t,e){var n=e[0],i=e[1],o=e[2],r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[0],s=n[1],l=n[2];return t[0]=o*l-r*s,t[1]=r*a-i*l,t[2]=i*s-o*a,t},o.lerp=function(t,e,n,i){var o=e[0],r=e[1],a=e[2];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t[2]=a+i*(n[2]-a),t},o.hermite=function(t,e,n,i,o,r){var a=r*r,s=a*(2*r-3)+1,l=a*(r-2)+r,c=a*(r-1),u=a*(3-2*r);return t[0]=e[0]*s+n[0]*l+i[0]*c+o[0]*u,t[1]=e[1]*s+n[1]*l+i[1]*c+o[1]*u,t[2]=e[2]*s+n[2]*l+i[2]*c+o[2]*u,t},o.bezier=function(t,e,n,i,o,r){var a=1-r,s=a*a,l=r*r,c=s*a,u=3*r*s,f=3*l*a,v=l*r;return t[0]=e[0]*c+n[0]*u+i[0]*f+o[0]*v,t[1]=e[1]*c+n[1]*u+i[1]*f+o[1]*v,t[2]=e[2]*c+n[2]*u+i[2]*f+o[2]*v,t},o.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI,o=2*i.RANDOM()-1,r=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=o*e,t},o.transformMat4=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[3]*i+n[7]*o+n[11]*r+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*o+n[8]*r+n[12])/a,t[1]=(n[1]*i+n[5]*o+n[9]*r+n[13])/a,t[2]=(n[2]*i+n[6]*o+n[10]*r+n[14])/a,t},o.transformMat3=function(t,e,n){var i=e[0],o=e[1],r=e[2];return t[0]=i*n[0]+o*n[3]+r*n[6],t[1]=i*n[1]+o*n[4]+r*n[7],t[2]=i*n[2]+o*n[5]+r*n[8],t},o.transformQuat=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*r-l*o,f=c*o+l*i-a*r,v=c*r+a*o-s*i,h=-a*i-s*o-l*r;return t[0]=u*c+h*-a+f*-l-v*-s,t[1]=f*c+h*-s+v*-a-u*-l,t[2]=v*c+h*-l+u*-s-f*-a,t},o.rotateX=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0],r[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),r[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.rotateY=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),r[1]=o[1],r[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.rotateZ=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),r[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),r[2]=o[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.forEach=function(){var t=o.create();return function(e,n,i,o,r,a){var s,l;for(n||(n=3),i||(i=0),l=o?Math.min(o*n+i,e.length):e.length,s=i;l>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],r(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),o.angle=function(t,e){var n=o.fromValues(t[0],t[1],t[2]),i=o.fromValues(e[0],e[1],e[2]);o.normalize(n,n),o.normalize(i,i);var r=o.dot(n,i);return r>1?0:Math.acos(r)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],a=e[0],s=e[1],l=e[2];return Math.abs(n-a)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},t.exports=o},function(t,e,n){var i=n(1),o={create:function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},fromValues:function(t,e,n,o){var r=new i.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},set:function(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},subtract:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}};o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},o.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(n*n+i*i+o*o+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return n*n+i*i+o*o+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],i=t[2],o=t[3];return Math.sqrt(e*e+n*n+i*i+o*o)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],o=t[3];return e*e+n*n+i*i+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},o.normalize=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n*n+i*i+o*o+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=i*a,t[2]=o*a,t[3]=r*a),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},o.lerp=function(t,e,n,i){var o=e[0],r=e[1],a=e[2],s=e[3];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t[2]=a+i*(n[2]-a),t[3]=s+i*(n[3]-s),t},o.random=function(t,e){return e=e||1,t[0]=i.RANDOM(),t[1]=i.RANDOM(),t[2]=i.RANDOM(),t[3]=i.RANDOM(),o.normalize(t,t),o.scale(t,t,e),t},o.transformMat4=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3];return t[0]=n[0]*i+n[4]*o+n[8]*r+n[12]*a,t[1]=n[1]*i+n[5]*o+n[9]*r+n[13]*a,t[2]=n[2]*i+n[6]*o+n[10]*r+n[14]*a,t[3]=n[3]*i+n[7]*o+n[11]*r+n[15]*a,t},o.transformQuat=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*r-l*o,f=c*o+l*i-a*r,v=c*r+a*o-s*i,h=-a*i-s*o-l*r;return t[0]=u*c+h*-a+f*-l-v*-s,t[1]=f*c+h*-s+v*-a-u*-l,t[2]=v*c+h*-l+u*-s-f*-a,t[3]=e[3],t},o.forEach=function(){var t=o.create();return function(e,n,i,o,r,a){var s,l;for(n||(n=4),i||(i=0),l=o?Math.min(o*n+i,e.length):e.length,s=i;l>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],r(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],a=t[3],s=e[0],l=e[1],c=e[2],u=e[3];return Math.abs(n-s)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(r-c)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-u)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))},t.exports=o},function(t,e,n){var i=n(1),o={create:function(){var t=new i.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},clone:function(t){var e=new i.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},fromValues:function(t,e){var n=new i.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},subtract:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}};o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},o.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},o.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},o.normalize=function(t,e){var n=e[0],i=e[1],o=n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t},o.lerp=function(t,e,n,i){var o=e[0],r=e[1];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t},o.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},o.transformMat2=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o,t[1]=n[1]*i+n[3]*o,t},o.transformMat2d=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o+n[4],t[1]=n[1]*i+n[3]*o+n[5],t},o.transformMat3=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[3]*o+n[6],t[1]=n[1]*i+n[4]*o+n[7],t},o.transformMat4=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[4]*o+n[12],t[1]=n[1]*i+n[5]*o+n[13],t},o.forEach=function(){var t=o.create();return function(e,n,i,o,r,a){var s,l;for(n||(n=2),i||(i=0),l=o?Math.min(o*n+i,e.length):e.length,s=i;l>s;s+=n)t[0]=e[s],t[1]=e[s+1],r(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},o.equals=function(t,e){var n=t[0],o=t[1],r=e[0],a=e[1];return Math.abs(n-r)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(o-a)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))},t.exports=o}])})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).zip={})}(this,(function(t){"use strict";const e=-2;function n(t){return t.map((([t,e])=>new Array(t).fill(e,0,t))).flat()}const i=[0,1,2,3].concat(...n([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function o(){const t=this;function e(t,e){let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}t.build_tree=function(n){const i=t.dyn_tree,o=t.stat_desc.static_tree,r=t.stat_desc.elems;let a,s,l,c=-1;for(n.heap_len=0,n.heap_max=573,a=0;a<r;a++)0!==i[2*a]?(n.heap[++n.heap_len]=c=a,n.depth[a]=0):i[2*a+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,i[2*l]=1,n.depth[l]=0,n.opt_len--,o&&(n.static_len-=o[2*l+1]);for(t.max_code=c,a=Math.floor(n.heap_len/2);a>=1;a--)n.pqdownheap(i,a);l=r;do{a=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(i,1),s=n.heap[1],n.heap[--n.heap_max]=a,n.heap[--n.heap_max]=s,i[2*l]=i[2*a]+i[2*s],n.depth[l]=Math.max(n.depth[a],n.depth[s])+1,i[2*a+1]=i[2*s+1]=l,n.heap[1]=l++,n.pqdownheap(i,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(e){const n=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.extra_bits,r=t.stat_desc.extra_base,a=t.stat_desc.max_length;let s,l,c,u,f,v,h=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(n[2*e.heap[e.heap_max]+1]=0,s=e.heap_max+1;s<573;s++)l=e.heap[s],u=n[2*n[2*l+1]+1]+1,u>a&&(u=a,h++),n[2*l+1]=u,l>t.max_code||(e.bl_count[u]++,f=0,l>=r&&(f=o[l-r]),v=n[2*l],e.opt_len+=v*(u+f),i&&(e.static_len+=v*(i[2*l+1]+f)));if(0!==h){do{for(u=a-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[a]--,h-=2}while(h>0);for(u=a;0!==u;u--)for(l=e.bl_count[u];0!==l;)c=e.heap[--s],c>t.max_code||(n[2*c+1]!=u&&(e.opt_len+=(u-n[2*c+1])*n[2*c],n[2*c+1]=u),l--)}}(n),function(t,n,i){const o=[];let r,a,s,l=0;for(r=1;r<=15;r++)o[r]=l=l+i[r-1]<<1;for(a=0;a<=n;a++)s=t[2*a+1],0!==s&&(t[2*a]=e(o[s]++,s))}(i,t.max_code,n.bl_count)}}function r(t,e,n,i,o){const r=this;r.static_tree=t,r.extra_bits=e,r.extra_base=n,r.elems=i,r.max_length=o}function a(t,e,n,i,o){const r=this;r.good_length=t,r.max_lazy=e,r.nice_length=n,r.max_chain=i,r.func=o}o._length_code=[0,1,2,3,4,5,6,7].concat(...n([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),o.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],o.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],o.d_code=function(t){return t<256?i[t]:i[256+(t>>>7)]},o.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],o.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],r.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],r.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],r.static_l_desc=new r(r.static_ltree,o.extra_lbits,257,286,15),r.static_d_desc=new r(r.static_dtree,o.extra_dbits,0,30,15),r.static_bl_desc=new r(null,o.extra_blbits,0,19,7);const s=[new a(0,0,0,0,0),new a(4,4,8,4,1),new a(4,5,16,8,1),new a(4,6,32,32,1),new a(4,4,16,16,2),new a(8,16,32,32,2),new a(8,16,128,128,2),new a(8,32,128,256,2),new a(32,128,258,1024,2),new a(32,258,258,4096,2)],l=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],c=113,u=666,f=262;function v(t,e,n,i){const o=t[2*e],r=t[2*n];return o<r||o==r&&i[e]<=i[n]}function h(){const t=this;let n,i,a,h,d,p,_,g,y,m,b,x,w,A,M,S,T,B,E,F,R,I,C,L,P,D,X,k,U,z,V,N,G;const q=new o,O=new o,Y=new o;let W,Z,H,j,Q,K,J,$;function tt(){let e;for(e=0;e<286;e++)V[2*e]=0;for(e=0;e<30;e++)N[2*e]=0;for(e=0;e<19;e++)G[2*e]=0;V[512]=1,t.opt_len=t.static_len=0,H=Q=0}function et(t,e){let n,i=-1,o=t[1],r=0,a=7,s=4;0===o&&(a=138,s=3),t[2*(e+1)+1]=65535;for(let l=0;l<=e;l++)n=o,o=t[2*(l+1)+1],++r<a&&n==o||(r<s?G[2*n]+=r:0!==n?(n!=i&&G[2*n]++,G[32]++):r<=10?G[34]++:G[36]++,r=0,i=n,0===o?(a=138,s=3):n==o?(a=6,s=3):(a=7,s=4))}function nt(e){t.pending_buf[t.pending++]=e}function it(t){nt(255&t),nt(t>>>8&255)}function ot(t,e){let n;const i=e;$>16-i?(n=t,J|=n<<$&65535,it(J),J=n>>>16-$,$+=i-16):(J|=t<<$&65535,$+=i)}function rt(t,e){const n=2*t;ot(65535&e[n],65535&e[n+1])}function at(t,e){let n,i,o=-1,r=t[1],a=0,s=7,l=4;for(0===r&&(s=138,l=3),n=0;n<=e;n++)if(i=r,r=t[2*(n+1)+1],!(++a<s&&i==r)){if(a<l)do{rt(i,G)}while(0!=--a);else 0!==i?(i!=o&&(rt(i,G),a--),rt(16,G),ot(a-3,2)):a<=10?(rt(17,G),ot(a-3,3)):(rt(18,G),ot(a-11,7));a=0,o=i,0===r?(s=138,l=3):i==r?(s=6,l=3):(s=7,l=4)}}function st(){16==$?(it(J),J=0,$=0):$>=8&&(nt(255&J),J>>>=8,$-=8)}function lt(e,n){let i,r,a;if(t.pending_buf[j+2*H]=e>>>8&255,t.pending_buf[j+2*H+1]=255&e,t.pending_buf[W+H]=255&n,H++,0===e?V[2*n]++:(Q++,e--,V[2*(o._length_code[n]+256+1)]++,N[2*o.d_code(e)]++),0==(8191&H)&&X>2){for(i=8*H,r=R-T,a=0;a<30;a++)i+=N[2*a]*(5+o.extra_dbits[a]);if(i>>>=3,Q<Math.floor(H/2)&&i<Math.floor(r/2))return!0}return H==Z-1}function ct(e,n){let i,r,a,s,l=0;if(0!==H)do{i=t.pending_buf[j+2*l]<<8&65280|255&t.pending_buf[j+2*l+1],r=255&t.pending_buf[W+l],l++,0===i?rt(r,e):(a=o._length_code[r],rt(a+256+1,e),s=o.extra_lbits[a],0!==s&&(r-=o.base_length[a],ot(r,s)),i--,a=o.d_code(i),rt(a,n),s=o.extra_dbits[a],0!==s&&(i-=o.base_dist[a],ot(i,s)))}while(l<H);rt(256,e),K=e[513]}function ut(){$>8?it(J):$>0&&nt(255&J),J=0,$=0}function ft(e,n,i){ot(0+(i?1:0),3),function(e,n,i){ut(),K=8,it(n),it(~n),t.pending_buf.set(g.subarray(e,e+n),t.pending),t.pending+=n}(e,n)}function vt(e,n,i){let a,s,l=0;X>0?(q.build_tree(t),O.build_tree(t),l=function(){let e;for(et(V,q.max_code),et(N,O.max_code),Y.build_tree(t),e=18;e>=3&&0===G[2*o.bl_order[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(),a=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!=e?ft(e,n,i):s==a?(ot(2+(i?1:0),3),ct(r.static_ltree,r.static_dtree)):(ot(4+(i?1:0),3),function(t,e,n){let i;for(ot(t-257,5),ot(e-1,5),ot(n-4,4),i=0;i<n;i++)ot(G[2*o.bl_order[i]+1],3);at(V,t-1),at(N,e-1)}(q.max_code+1,O.max_code+1,l+1),ct(V,N)),tt(),i&&ut()}function ht(t){vt(T>=0?T:-1,R-T,t),T=R,n.flush_pending()}function dt(){let t,e,i,o;do{if(o=y-C-R,0===o&&0===R&&0===C)o=d;else if(-1==o)o--;else if(R>=d+d-f){g.set(g.subarray(d,d+d),0),I-=d,R-=d,T-=d,t=w,i=t;do{e=65535&b[--i],b[i]=e>=d?e-d:0}while(0!=--t);t=d,i=t;do{e=65535&m[--i],m[i]=e>=d?e-d:0}while(0!=--t);o+=d}if(0===n.avail_in)return;t=n.read_buf(g,R+C,o),C+=t,C>=3&&(x=255&g[R],x=(x<<S^255&g[R+1])&M)}while(C<f&&0!==n.avail_in)}function pt(t){let e,n,i=P,o=R,r=L;const a=R>d-f?R-(d-f):0;let s=z;const l=_,c=R+258;let u=g[o+r-1],v=g[o+r];L>=U&&(i>>=2),s>C&&(s=C);do{if(e=t,g[e+r]==v&&g[e+r-1]==u&&g[e]==g[o]&&g[++e]==g[o+1]){o+=2,e++;do{}while(g[++o]==g[++e]&&g[++o]==g[++e]&&g[++o]==g[++e]&&g[++o]==g[++e]&&g[++o]==g[++e]&&g[++o]==g[++e]&&g[++o]==g[++e]&&g[++o]==g[++e]&&o<c);if(n=258-(c-o),o=c-258,n>r){if(I=t,r=n,n>=s)break;u=g[o+r-1],v=g[o+r]}}}while((t=65535&m[t&l])>a&&0!=--i);return r<=C?r:C}function _t(e){return e.total_in=e.total_out=0,e.msg=null,t.pending=0,t.pending_out=0,i=c,h=0,q.dyn_tree=V,q.stat_desc=r.static_l_desc,O.dyn_tree=N,O.stat_desc=r.static_d_desc,Y.dyn_tree=G,Y.stat_desc=r.static_bl_desc,J=0,$=0,K=8,tt(),function(){y=2*d,b[w-1]=0;for(let t=0;t<w-1;t++)b[t]=0;D=s[X].max_lazy,U=s[X].good_length,z=s[X].nice_length,P=s[X].max_chain,R=0,T=0,C=0,B=L=2,F=0,x=0}(),0}t.depth=[],t.bl_count=[],t.heap=[],V=[],N=[],G=[],t.pqdownheap=function(e,n){const i=t.heap,o=i[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&v(e,i[r+1],i[r],t.depth)&&r++,!v(e,o,i[r],t.depth));)i[n]=i[r],n=r,r<<=1;i[n]=o},t.deflateInit=function(n,i,o,r,s,l){return r||(r=8),s||(s=8),l||(l=0),n.msg=null,-1==i&&(i=6),s<1||s>9||8!=r||o<9||o>15||i<0||i>9||l<0||l>2?e:(n.dstate=t,p=o,d=1<<p,_=d-1,A=s+7,w=1<<A,M=w-1,S=Math.floor((A+3-1)/3),g=new Uint8Array(2*d),m=[],b=[],Z=1<<s+6,t.pending_buf=new Uint8Array(4*Z),a=4*Z,j=Math.floor(Z/2),W=3*Z,X=i,k=l,_t(n))},t.deflateEnd=function(){return 42!=i&&i!=c&&i!=u?e:(t.pending_buf=null,b=null,m=null,g=null,t.dstate=null,i==c?-3:0)},t.deflateParams=function(t,n,i){let o=0;return-1==n&&(n=6),n<0||n>9||i<0||i>2?e:(s[X].func!=s[n].func&&0!==t.total_in&&(o=t.deflate(1)),X!=n&&(X=n,D=s[X].max_lazy,U=s[X].good_length,z=s[X].nice_length,P=s[X].max_chain),k=i,o)},t.deflateSetDictionary=function(t,n,o){let r,a=o,s=0;if(!n||42!=i)return e;if(a<3)return 0;for(a>d-f&&(a=d-f,s=o-a),g.set(n.subarray(s,s+a),0),R=a,T=a,x=255&g[0],x=(x<<S^255&g[1])&M,r=0;r<=a-3;r++)x=(x<<S^255&g[r+2])&M,m[r&_]=b[x],b[x]=r;return 0},t.deflate=function(o,v){let y,A,P,U,z;if(v>4||v<0)return e;if(!o.next_out||!o.next_in&&0!==o.avail_in||i==u&&4!=v)return o.msg=l[4],e;if(0===o.avail_out)return o.msg=l[7],-5;var V;if(n=o,U=h,h=v,42==i&&(A=8+(p-8<<4)<<8,P=(X-1&255)>>1,P>3&&(P=3),A|=P<<6,0!==R&&(A|=32),A+=31-A%31,i=c,nt((V=A)>>8&255),nt(255&V)),0!==t.pending){if(n.flush_pending(),0===n.avail_out)return h=-1,0}else if(0===n.avail_in&&v<=U&&4!=v)return n.msg=l[7],-5;if(i==u&&0!==n.avail_in)return o.msg=l[7],-5;if(0!==n.avail_in||0!==C||0!=v&&i!=u){switch(z=-1,s[X].func){case 0:z=function(t){let e,i=65535;for(i>a-5&&(i=a-5);;){if(C<=1){if(dt(),0===C&&0==t)return 0;if(0===C)break}if(R+=C,C=0,e=T+i,(0===R||R>=e)&&(C=R-e,R=e,ht(!1),0===n.avail_out))return 0;if(R-T>=d-f&&(ht(!1),0===n.avail_out))return 0}return ht(4==t),0===n.avail_out?4==t?2:0:4==t?3:1}(v);break;case 1:z=function(t){let e,i=0;for(;;){if(C<f){if(dt(),C<f&&0==t)return 0;if(0===C)break}if(C>=3&&(x=(x<<S^255&g[R+2])&M,i=65535&b[x],m[R&_]=b[x],b[x]=R),0!==i&&(R-i&65535)<=d-f&&2!=k&&(B=pt(i)),B>=3)if(e=lt(R-I,B-3),C-=B,B<=D&&C>=3){B--;do{R++,x=(x<<S^255&g[R+2])&M,i=65535&b[x],m[R&_]=b[x],b[x]=R}while(0!=--B);R++}else R+=B,B=0,x=255&g[R],x=(x<<S^255&g[R+1])&M;else e=lt(0,255&g[R]),C--,R++;if(e&&(ht(!1),0===n.avail_out))return 0}return ht(4==t),0===n.avail_out?4==t?2:0:4==t?3:1}(v);break;case 2:z=function(t){let e,i,o=0;for(;;){if(C<f){if(dt(),C<f&&0==t)return 0;if(0===C)break}if(C>=3&&(x=(x<<S^255&g[R+2])&M,o=65535&b[x],m[R&_]=b[x],b[x]=R),L=B,E=I,B=2,0!==o&&L<D&&(R-o&65535)<=d-f&&(2!=k&&(B=pt(o)),B<=5&&(1==k||3==B&&R-I>4096)&&(B=2)),L>=3&&B<=L){i=R+C-3,e=lt(R-1-E,L-3),C-=L-1,L-=2;do{++R<=i&&(x=(x<<S^255&g[R+2])&M,o=65535&b[x],m[R&_]=b[x],b[x]=R)}while(0!=--L);if(F=0,B=2,R++,e&&(ht(!1),0===n.avail_out))return 0}else if(0!==F){if(e=lt(0,255&g[R-1]),e&&ht(!1),R++,C--,0===n.avail_out)return 0}else F=1,R++,C--}return 0!==F&&(e=lt(0,255&g[R-1]),F=0),ht(4==t),0===n.avail_out?4==t?2:0:4==t?3:1}(v)}if(2!=z&&3!=z||(i=u),0==z||2==z)return 0===n.avail_out&&(h=-1),0;if(1==z){if(1==v)ot(2,3),rt(256,r.static_ltree),st(),1+K+10-$<9&&(ot(2,3),rt(256,r.static_ltree),st()),K=7;else if(ft(0,0,!1),3==v)for(y=0;y<w;y++)b[y]=0;if(n.flush_pending(),0===n.avail_out)return h=-1,0}}return 4!=v?0:1}}function d(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}d.prototype={deflateInit:function(t,e){const n=this;return n.dstate=new h,e||(e=15),n.dstate.deflateInit(n,t,e)},deflate:function(t){const n=this;return n.dstate?n.dstate.deflate(n,t):e},deflateEnd:function(){const t=this;if(!t.dstate)return e;const n=t.dstate.deflateEnd();return t.dstate=null,n},deflateParams:function(t,n){const i=this;return i.dstate?i.dstate.deflateParams(i,t,n):e},deflateSetDictionary:function(t,n){const i=this;return i.dstate?i.dstate.deflateSetDictionary(i,t,n):e},read_buf:function(t,e,n){const i=this;let o=i.avail_in;return o>n&&(o=n),0===o?0:(i.avail_in-=o,t.set(i.next_in.subarray(i.next_in_index,i.next_in_index+o),e),i.next_in_index+=o,i.total_in+=o,o)},flush_pending:function(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};const p=-2,_=-3,g=-5,y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],m=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],b=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=15;function T(){let t,e,n,i,o,r;function a(t,e,a,s,l,c,u,f,v,h,d){let p,y,m,b,x,w,A,M,T,B,E,F,R,I,C;B=0,x=a;do{n[t[e+B]]++,B++,x--}while(0!==x);if(n[0]==a)return u[0]=-1,f[0]=0,0;for(M=f[0],w=1;w<=S&&0===n[w];w++);for(A=w,M<w&&(M=w),x=S;0!==x&&0===n[x];x--);for(m=x,M>x&&(M=x),f[0]=M,I=1<<w;w<x;w++,I<<=1)if((I-=n[w])<0)return _;if((I-=n[x])<0)return _;for(n[x]+=I,r[1]=w=0,B=1,R=2;0!=--x;)r[R]=w+=n[B],R++,B++;x=0,B=0;do{0!==(w=t[e+B])&&(d[r[w]++]=x),B++}while(++x<a);for(a=r[m],r[0]=x=0,B=0,b=-1,F=-M,o[0]=0,E=0,C=0;A<=m;A++)for(p=n[A];0!=p--;){for(;A>F+M;){if(b++,F+=M,C=m-F,C=C>M?M:C,(y=1<<(w=A-F))>p+1&&(y-=p+1,R=A,w<C))for(;++w<C&&!((y<<=1)<=n[++R]);)y-=n[R];if(C=1<<w,h[0]+C>1440)return _;o[b]=E=h[0],h[0]+=C,0!==b?(r[b]=x,i[0]=w,i[1]=M,w=x>>>F-M,i[2]=E-o[b-1]-w,v.set(i,3*(o[b-1]+w))):u[0]=E}for(i[1]=A-F,B>=a?i[0]=192:d[B]<s?(i[0]=d[B]<256?0:96,i[2]=d[B++]):(i[0]=c[d[B]-s]+16+64,i[2]=l[d[B++]-s]),y=1<<A-F,w=x>>>F;w<C;w+=y)v.set(i,3*(E+w));for(w=1<<A-1;0!=(x&w);w>>>=1)x^=w;for(x^=w,T=(1<<F)-1;(x&T)!=r[b];)b--,F-=M,T=(1<<F)-1}return 0!==I&&1!=m?g:0}function s(a){let s;for(t||(t=[],e=[],n=new Int32Array(16),i=[],o=new Int32Array(S),r=new Int32Array(16)),e.length<a&&(e=[]),s=0;s<a;s++)e[s]=0;for(s=0;s<16;s++)n[s]=0;for(s=0;s<3;s++)i[s]=0;o.set(n.subarray(0,S),0),r.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(n,i,o,r,l){let c;return s(19),t[0]=0,c=a(n,0,19,19,null,null,o,i,r,t,e),c==_?l.msg="oversubscribed dynamic bit lengths tree":c!=g&&0!==i[0]||(l.msg="incomplete dynamic bit lengths tree",c=_),c},this.inflate_trees_dynamic=function(n,i,o,r,l,c,u,f,v){let h;return s(288),t[0]=0,h=a(o,0,n,257,x,w,c,r,f,t,e),0!=h||0===r[0]?(h==_?v.msg="oversubscribed literal/length tree":-4!=h&&(v.msg="incomplete literal/length tree",h=_),h):(s(288),h=a(o,n,i,0,A,M,u,l,f,t,e),0!=h||0===l[0]&&n>257?(h==_?v.msg="oversubscribed distance tree":h==g?(v.msg="incomplete distance tree",h=_):-4!=h&&(v.msg="empty distance tree with lengths",h=_),h):0)}}function B(){const t=this;let e,n,i,o,r=0,a=0,s=0,l=0,c=0,u=0,f=0,v=0,h=0,d=0;function g(t,e,n,i,o,r,a,s){let l,c,u,f,v,h,d,p,g,m,b,x,w,A,M,S;d=s.next_in_index,p=s.avail_in,v=a.bitb,h=a.bitk,g=a.write,m=g<a.read?a.read-g-1:a.end-g,b=y[t],x=y[e];do{for(;h<20;)p--,v|=(255&s.read_byte(d++))<<h,h+=8;if(l=v&b,c=n,u=i,S=3*(u+l),0!==(f=c[S]))for(;;){if(v>>=c[S+1],h-=c[S+1],0!=(16&f)){for(f&=15,w=c[S+2]+(v&y[f]),v>>=f,h-=f;h<15;)p--,v|=(255&s.read_byte(d++))<<h,h+=8;for(l=v&x,c=o,u=r,S=3*(u+l),f=c[S];;){if(v>>=c[S+1],h-=c[S+1],0!=(16&f)){for(f&=15;h<f;)p--,v|=(255&s.read_byte(d++))<<h,h+=8;if(A=c[S+2]+(v&y[f]),v>>=f,h-=f,m-=w,g>=A)M=g-A,g-M>0&&2>g-M?(a.window[g++]=a.window[M++],a.window[g++]=a.window[M++],w-=2):(a.window.set(a.window.subarray(M,M+2),g),g+=2,M+=2,w-=2);else{M=g-A;do{M+=a.end}while(M<0);if(f=a.end-M,w>f){if(w-=f,g-M>0&&f>g-M)do{a.window[g++]=a.window[M++]}while(0!=--f);else a.window.set(a.window.subarray(M,M+f),g),g+=f,M+=f,f=0;M=0}}if(g-M>0&&w>g-M)do{a.window[g++]=a.window[M++]}while(0!=--w);else a.window.set(a.window.subarray(M,M+w),g),g+=w,M+=w,w=0;break}if(0!=(64&f))return s.msg="invalid distance code",w=s.avail_in-p,w=h>>3<w?h>>3:w,p+=w,d-=w,h-=w<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=g,_;l+=c[S+2],l+=v&y[f],S=3*(u+l),f=c[S]}break}if(0!=(64&f))return 0!=(32&f)?(w=s.avail_in-p,w=h>>3<w?h>>3:w,p+=w,d-=w,h-=w<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=g,1):(s.msg="invalid literal/length code",w=s.avail_in-p,w=h>>3<w?h>>3:w,p+=w,d-=w,h-=w<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=g,_);if(l+=c[S+2],l+=v&y[f],S=3*(u+l),0===(f=c[S])){v>>=c[S+1],h-=c[S+1],a.window[g++]=c[S+2],m--;break}}else v>>=c[S+1],h-=c[S+1],a.window[g++]=c[S+2],m--}while(m>=258&&p>=10);return w=s.avail_in-p,w=h>>3<w?h>>3:w,p+=w,d-=w,h-=w<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=g,0}t.init=function(t,r,a,s,l,c){e=0,f=t,v=r,i=a,h=s,o=l,d=c,n=null},t.proc=function(t,m,b){let x,w,A,M,S,T,B,E=0,F=0,R=0;for(R=m.next_in_index,M=m.avail_in,E=t.bitb,F=t.bitk,S=t.write,T=S<t.read?t.read-S-1:t.end-S;;)switch(e){case 0:if(T>=258&&M>=10&&(t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,b=g(f,v,i,h,o,d,t,m),R=m.next_in_index,M=m.avail_in,E=t.bitb,F=t.bitk,S=t.write,T=S<t.read?t.read-S-1:t.end-S,0!=b)){e=1==b?7:9;break}s=f,n=i,a=h,e=1;case 1:for(x=s;F<x;){if(0===M)return t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);b=0,M--,E|=(255&m.read_byte(R++))<<F,F+=8}if(w=3*(a+(E&y[x])),E>>>=n[w+1],F-=n[w+1],A=n[w],0===A){l=n[w+2],e=6;break}if(0!=(16&A)){c=15&A,r=n[w+2],e=2;break}if(0==(64&A)){s=A,a=w/3+n[w+2];break}if(0!=(32&A)){e=7;break}return e=9,m.msg="invalid literal/length code",b=_,t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);case 2:for(x=c;F<x;){if(0===M)return t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);b=0,M--,E|=(255&m.read_byte(R++))<<F,F+=8}r+=E&y[x],E>>=x,F-=x,s=v,n=o,a=d,e=3;case 3:for(x=s;F<x;){if(0===M)return t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);b=0,M--,E|=(255&m.read_byte(R++))<<F,F+=8}if(w=3*(a+(E&y[x])),E>>=n[w+1],F-=n[w+1],A=n[w],0!=(16&A)){c=15&A,u=n[w+2],e=4;break}if(0==(64&A)){s=A,a=w/3+n[w+2];break}return e=9,m.msg="invalid distance code",b=_,t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);case 4:for(x=c;F<x;){if(0===M)return t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);b=0,M--,E|=(255&m.read_byte(R++))<<F,F+=8}u+=E&y[x],E>>=x,F-=x,e=5;case 5:for(B=S-u;B<0;)B+=t.end;for(;0!==r;){if(0===T&&(S==t.end&&0!==t.read&&(S=0,T=S<t.read?t.read-S-1:t.end-S),0===T&&(t.write=S,b=t.inflate_flush(m,b),S=t.write,T=S<t.read?t.read-S-1:t.end-S,S==t.end&&0!==t.read&&(S=0,T=S<t.read?t.read-S-1:t.end-S),0===T)))return t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);t.window[S++]=t.window[B++],T--,B==t.end&&(B=0),r--}e=0;break;case 6:if(0===T&&(S==t.end&&0!==t.read&&(S=0,T=S<t.read?t.read-S-1:t.end-S),0===T&&(t.write=S,b=t.inflate_flush(m,b),S=t.write,T=S<t.read?t.read-S-1:t.end-S,S==t.end&&0!==t.read&&(S=0,T=S<t.read?t.read-S-1:t.end-S),0===T)))return t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);b=0,t.window[S++]=l,T--,e=0;break;case 7:if(F>7&&(F-=8,M++,R--),t.write=S,b=t.inflate_flush(m,b),S=t.write,T=S<t.read?t.read-S-1:t.end-S,t.read!=t.write)return t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);e=8;case 8:return b=1,t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);case 9:return b=_,t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b);default:return b=p,t.bitb=E,t.bitk=F,m.avail_in=M,m.total_in+=R-m.next_in_index,m.next_in_index=R,t.write=S,t.inflate_flush(m,b)}},t.free=function(){}}T.inflate_trees_fixed=function(t,e,n,i){return t[0]=9,e[0]=5,n[0]=m,i[0]=b,0};const E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function F(t,e){const n=this;let i,o=0,r=0,a=0,s=0;const l=[0],c=[0],u=new B;let f=0,v=new Int32Array(4320);const h=new T;n.bitk=0,n.bitb=0,n.window=new Uint8Array(e),n.end=e,n.read=0,n.write=0,n.reset=function(t,e){e&&(e[0]=0),6==o&&u.free(t),o=0,n.bitk=0,n.bitb=0,n.read=n.write=0},n.reset(t,null),n.inflate_flush=function(t,e){let i,o,r;return o=t.next_out_index,r=n.read,i=(r<=n.write?n.write:n.end)-r,i>t.avail_out&&(i=t.avail_out),0!==i&&e==g&&(e=0),t.avail_out-=i,t.total_out+=i,t.next_out.set(n.window.subarray(r,r+i),o),o+=i,r+=i,r==n.end&&(r=0,n.write==n.end&&(n.write=0),i=n.write-r,i>t.avail_out&&(i=t.avail_out),0!==i&&e==g&&(e=0),t.avail_out-=i,t.total_out+=i,t.next_out.set(n.window.subarray(r,r+i),o),o+=i,r+=i),t.next_out_index=o,n.read=r,e},n.proc=function(t,e){let d,g,m,b,x,w,A,M;for(b=t.next_in_index,x=t.avail_in,g=n.bitb,m=n.bitk,w=n.write,A=w<n.read?n.read-w-1:n.end-w;;){let S,B,F,R,I,C,L,P;switch(o){case 0:for(;m<3;){if(0===x)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);e=0,x--,g|=(255&t.read_byte(b++))<<m,m+=8}switch(d=7&g,f=1&d,d>>>1){case 0:g>>>=3,m-=3,d=7&m,g>>>=d,m-=d,o=1;break;case 1:S=[],B=[],F=[[]],R=[[]],T.inflate_trees_fixed(S,B,F,R),u.init(S[0],B[0],F[0],0,R[0],0),g>>>=3,m-=3,o=6;break;case 2:g>>>=3,m-=3,o=3;break;case 3:return g>>>=3,m-=3,o=9,t.msg="invalid block type",e=_,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e)}break;case 1:for(;m<32;){if(0===x)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);e=0,x--,g|=(255&t.read_byte(b++))<<m,m+=8}if((~g>>>16&65535)!=(65535&g))return o=9,t.msg="invalid stored block lengths",e=_,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);r=65535&g,g=m=0,o=0!==r?2:0!==f?7:0;break;case 2:if(0===x)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);if(0===A&&(w==n.end&&0!==n.read&&(w=0,A=w<n.read?n.read-w-1:n.end-w),0===A&&(n.write=w,e=n.inflate_flush(t,e),w=n.write,A=w<n.read?n.read-w-1:n.end-w,w==n.end&&0!==n.read&&(w=0,A=w<n.read?n.read-w-1:n.end-w),0===A)))return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);if(e=0,d=r,d>x&&(d=x),d>A&&(d=A),n.window.set(t.read_buf(b,d),w),b+=d,x-=d,w+=d,A-=d,0!=(r-=d))break;o=0!==f?7:0;break;case 3:for(;m<14;){if(0===x)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);e=0,x--,g|=(255&t.read_byte(b++))<<m,m+=8}if(a=d=16383&g,(31&d)>29||(d>>5&31)>29)return o=9,t.msg="too many length or distance symbols",e=_,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);if(d=258+(31&d)+(d>>5&31),!i||i.length<d)i=[];else for(M=0;M<d;M++)i[M]=0;g>>>=14,m-=14,s=0,o=4;case 4:for(;s<4+(a>>>10);){for(;m<3;){if(0===x)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);e=0,x--,g|=(255&t.read_byte(b++))<<m,m+=8}i[E[s++]]=7&g,g>>>=3,m-=3}for(;s<19;)i[E[s++]]=0;if(l[0]=7,d=h.inflate_trees_bits(i,l,c,v,t),0!=d)return(e=d)==_&&(i=null,o=9),n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);s=0,o=5;case 5:for(;d=a,!(s>=258+(31&d)+(d>>5&31));){let r,u;for(d=l[0];m<d;){if(0===x)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);e=0,x--,g|=(255&t.read_byte(b++))<<m,m+=8}if(d=v[3*(c[0]+(g&y[d]))+1],u=v[3*(c[0]+(g&y[d]))+2],u<16)g>>>=d,m-=d,i[s++]=u;else{for(M=18==u?7:u-14,r=18==u?11:3;m<d+M;){if(0===x)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);e=0,x--,g|=(255&t.read_byte(b++))<<m,m+=8}if(g>>>=d,m-=d,r+=g&y[M],g>>>=M,m-=M,M=s,d=a,M+r>258+(31&d)+(d>>5&31)||16==u&&M<1)return i=null,o=9,t.msg="invalid bit length repeat",e=_,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);u=16==u?i[M-1]:0;do{i[M++]=u}while(0!=--r);s=M}}if(c[0]=-1,I=[],C=[],L=[],P=[],I[0]=9,C[0]=6,d=a,d=h.inflate_trees_dynamic(257+(31&d),1+(d>>5&31),i,I,C,L,P,v,t),0!=d)return d==_&&(i=null,o=9),e=d,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);u.init(I[0],C[0],v,L[0],v,P[0]),o=6;case 6:if(n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,1!=(e=u.proc(n,t,e)))return n.inflate_flush(t,e);if(e=0,u.free(t),b=t.next_in_index,x=t.avail_in,g=n.bitb,m=n.bitk,w=n.write,A=w<n.read?n.read-w-1:n.end-w,0===f){o=0;break}o=7;case 7:if(n.write=w,e=n.inflate_flush(t,e),w=n.write,A=w<n.read?n.read-w-1:n.end-w,n.read!=n.write)return n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);o=8;case 8:return e=1,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);case 9:return e=_,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e);default:return e=p,n.bitb=g,n.bitk=m,t.avail_in=x,t.total_in+=b-t.next_in_index,t.next_in_index=b,n.write=w,n.inflate_flush(t,e)}}},n.free=function(t){n.reset(t,null),n.window=null,v=null},n.set_dictionary=function(t,e,i){n.window.set(t.subarray(e,e+i),0),n.read=n.write=i},n.sync_point=function(){return 1==o?1:0}}const R=13,I=[0,0,255,255];function C(){const t=this;function e(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=7,t.istate.blocks.reset(t,null),0):p}t.mode=0,t.method=0,t.was=[0],t.need=0,t.marker=0,t.wbits=0,t.inflateEnd=function(e){return t.blocks&&t.blocks.free(e),t.blocks=null,0},t.inflateInit=function(n,i){return n.msg=null,t.blocks=null,i<8||i>15?(t.inflateEnd(n),p):(t.wbits=i,n.istate.blocks=new F(n,1<<i),e(n),0)},t.inflate=function(t,e){let n,i;if(!t||!t.istate||!t.next_in)return p;const o=t.istate;for(e=4==e?g:0,n=g;;)switch(o.mode){case 0:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,8!=(15&(o.method=t.read_byte(t.next_in_index++)))){o.mode=R,t.msg="unknown compression method",o.marker=5;break}if(8+(o.method>>4)>o.wbits){o.mode=R,t.msg="invalid window size",o.marker=5;break}o.mode=1;case 1:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,i=255&t.read_byte(t.next_in_index++),((o.method<<8)+i)%31!=0){o.mode=R,t.msg="incorrect header check",o.marker=5;break}if(0==(32&i)){o.mode=7;break}o.mode=2;case 2:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,o.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,o.mode=3;case 3:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,o.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,o.mode=4;case 4:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,o.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,o.mode=5;case 5:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,o.need+=255&t.read_byte(t.next_in_index++),o.mode=6,2);case 6:return o.mode=R,t.msg="need dictionary",o.marker=0,p;case 7:if(n=o.blocks.proc(t,n),n==_){o.mode=R,o.marker=0;break}if(0==n&&(n=e),1!=n)return n;n=e,o.blocks.reset(t,o.was),o.mode=12;case 12:return 1;case R:return _;default:return p}},t.inflateSetDictionary=function(t,e,n){let i=0,o=n;if(!t||!t.istate||6!=t.istate.mode)return p;const r=t.istate;return o>=1<<r.wbits&&(o=(1<<r.wbits)-1,i=n-o),r.blocks.set_dictionary(e,i,o),r.mode=7,0},t.inflateSync=function(t){let n,i,o,r,a;if(!t||!t.istate)return p;const s=t.istate;if(s.mode!=R&&(s.mode=R,s.marker=0),0===(n=t.avail_in))return g;for(i=t.next_in_index,o=s.marker;0!==n&&o<4;)t.read_byte(i)==I[o]?o++:o=0!==t.read_byte(i)?0:4-o,i++,n--;return t.total_in+=i-t.next_in_index,t.next_in_index=i,t.avail_in=n,s.marker=o,4!=o?_:(r=t.total_in,a=t.total_out,e(t),t.total_in=r,t.total_out=a,s.mode=7,0)},t.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():p}}function L(){}L.prototype={inflateInit:function(t){const e=this;return e.istate=new C,t||(t=15),e.istate.inflateInit(e,t)},inflate:function(t){const e=this;return e.istate?e.istate.inflate(e,t):p},inflateEnd:function(){const t=this;if(!t.istate)return p;const e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync:function(){const t=this;return t.istate?t.istate.inflateSync(t):p},inflateSetDictionary:function(t,e){const n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):p},read_byte:function(t){return this.next_in[t]},read_buf:function(t,e){return this.next_in.subarray(t,t+e)}};const P={chunkSize:524288,maxWorkers:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},D=Object.assign({},P);function X(){return D}function k(t){if(void 0!==t.chunkSize&&(D.chunkSize=t.chunkSize),void 0!==t.maxWorkers&&(D.maxWorkers=t.maxWorkers),void 0!==t.terminateWorkerTimeout&&(D.terminateWorkerTimeout=t.terminateWorkerTimeout),void 0!==t.useWebWorkers&&(D.useWebWorkers=t.useWebWorkers),void 0!==t.Deflate&&(D.Deflate=t.Deflate),void 0!==t.Inflate&&(D.Inflate=t.Inflate),void 0!==t.workerScripts){if(t.workerScripts.deflate){if(!Array.isArray(t.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");D.workerScripts||(D.workerScripts={}),D.workerScripts.deflate=t.workerScripts.deflate}if(t.workerScripts.inflate){if(!Array.isArray(t.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array");D.workerScripts||(D.workerScripts={}),D.workerScripts.inflate=t.workerScripts.inflate}}}function U(t,e,n){return class{constructor(i){const o=this;o.codec=new t(Object.assign({},e,i)),n(o.codec,(t=>{if(o.pendingData){const e=o.pendingData;o.pendingData=new Uint8Array(e.length+t.length),o.pendingData.set(e,0),o.pendingData.set(t,e.length)}else o.pendingData=new Uint8Array(t)}))}async append(t){return this.codec.push(t),i(this)}async flush(){return this.codec.push(new Uint8Array(0),!0),i(this)}};function i(t){if(t.pendingData){const e=t.pendingData;return t.pendingData=null,e}return new Uint8Array(0)}}const z=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;z[t]=e}class V{constructor(t){this.crc=t||-1}append(t){let e=0|this.crc;for(let n=0,i=0|t.length;n<i;n++)e=e>>>8^z[255&(e^t[n])];this.crc=e}get(){return~this.crc}}const N={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const n=t[t.length-1],i=N.getPartial(n);return 32===i?t.concat(e):N._shiftRight(e,i,0|n,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const n=t[e-1];return 32*(e-1)+N.getPartial(n)},clamp(t,e){if(32*t.length<e)return t;const n=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,n>0&&e&&(t[n-1]=N.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,_shiftRight(t,e,n,i){for(void 0===i&&(i=[]);e>=32;e-=32)i.push(n),n=0;if(0===e)return i.concat(t);for(let o=0;o<t.length;o++)i.push(n|t[o]>>>e),n=t[o]<<32-e;const o=t.length?t[t.length-1]:0,r=N.getPartial(o);return i.push(N.partial(e+r&31,e+r>32?n:i.pop(),1)),i}},G={bytes:{fromBits(t){const e=N.bitLength(t)/8,n=new Uint8Array(e);let i;for(let o=0;o<e;o++)0==(3&o)&&(i=t[o/4]),n[o]=i>>>24,i<<=8;return n},toBits(t){const e=[];let n,i=0;for(n=0;n<t.length;n++)i=i<<8|t[n],3==(3&n)&&(e.push(i),i=0);return 3&n&&e.push(N.partial(8*(3&n),i)),e}}},q={sha1:function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()}};q.sha1.prototype={blockSize:512,reset:function(){const t=this;return t._h=this._init.slice(0),t._buffer=[],t._length=0,t},update:function(t){const e=this;"string"==typeof t&&(t=G.utf8String.toBits(t));const n=e._buffer=N.concat(e._buffer,t),i=e._length,o=e._length=i+N.bitLength(t);if(o>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const r=new Uint32Array(n);let a=0;for(let t=e.blockSize+i-(e.blockSize+i&e.blockSize-1);t<=o;t+=e.blockSize)e._block(r.subarray(16*a,16*(a+1))),a+=1;return n.splice(0,16*a),e},finalize:function(){const t=this;let e=t._buffer;const n=t._h;e=N.concat(e,[N.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),n},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,n,i){return t<=19?e&n|~e&i:t<=39?e^n^i:t<=59?e&n|e&i|n&i:t<=79?e^n^i:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){const e=this,n=e._h,i=Array(80);for(let e=0;e<16;e++)i[e]=t[e];let o=n[0],r=n[1],a=n[2],s=n[3],l=n[4];for(let t=0;t<=79;t++){t>=16&&(i[t]=e._S(1,i[t-3]^i[t-8]^i[t-14]^i[t-16]));const n=e._S(5,o)+e._f(t,r,a,s)+l+i[t]+e._key[Math.floor(t/20)]|0;l=s,s=a,a=e._S(30,r),r=o,o=n}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0}};const O=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],i=e._tables[1],o=t.length;let r,a,s,l=1;if(4!==o&&6!==o&&8!==o)throw new Error("invalid aes key size");for(e._key=[a=t.slice(0),s=[]],r=o;r<4*o+28;r++){let t=a[r-1];(r%o==0||8===o&&r%o==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],r%o==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),a[r]=a[r-o]^t}for(let t=0;r;t++,r--){const e=a[3&t?r:r-4];s[t]=r<=4||t<4?e:i[0][n[e>>>24]]^i[1][n[e>>16&255]]^i[2][n[e>>8&255]]^i[3][n[255&e]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],i=e[4],o=[],r=[];let a,s,l,c;for(let t=0;t<256;t++)r[(o[t]=t<<1^283*(t>>7))^t]=t;for(let u=a=0;!n[u];u^=s||1,a=r[a]||1){let r=a^a<<1^a<<2^a<<3^a<<4;r=r>>8^255&r^99,n[u]=r,i[r]=u,c=o[l=o[s=o[u]]];let f=16843009*c^65537*l^257*s^16843008*u,v=257*o[r]^16843008*r;for(let n=0;n<4;n++)t[n][u]=v=v<<24^v>>>8,e[n][r]=f=f<<24^f>>>8}for(let n=0;n<5;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0)}_crypt(t,e){if(4!==t.length)throw new Error("invalid aes block size");const n=this._key[e],i=n.length/4-2,o=[0,0,0,0],r=this._tables[e],a=r[0],s=r[1],l=r[2],c=r[3],u=r[4];let f,v,h,d=t[0]^n[0],p=t[e?3:1]^n[1],_=t[2]^n[2],g=t[e?1:3]^n[3],y=4;for(let t=0;t<i;t++)f=a[d>>>24]^s[p>>16&255]^l[_>>8&255]^c[255&g]^n[y],v=a[p>>>24]^s[_>>16&255]^l[g>>8&255]^c[255&d]^n[y+1],h=a[_>>>24]^s[g>>16&255]^l[d>>8&255]^c[255&p]^n[y+2],g=a[g>>>24]^s[d>>16&255]^l[p>>8&255]^c[255&_]^n[y+3],y+=4,d=f,p=v,_=h;for(let t=0;t<4;t++)o[e?3&-t:t]=u[d>>>24]<<24^u[p>>16&255]<<16^u[_>>8&255]<<8^u[255&g]^n[y++],f=d,d=p,p=_,_=g,g=f;return o}},Y=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i}else t+=1<<24;return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]))}calculate(t,e,n){let i;if(!(i=e.length))return[];const o=N.bitLength(e);for(let o=0;o<i;o+=4){this.incCounter(n);const i=t.encrypt(n);e[o]^=i[0],e[o+1]^=i[1],e[o+2]^=i[2],e[o+3]^=i[3]}return N.clamp(e,o)}},W=class{constructor(t){const e=this,n=e._hash=q.sha1,i=[[],[]],o=n.prototype.blockSize/32;e._baseHash=[new n,new n],t.length>o&&(t=n.hash(t));for(let e=0;e<o;e++)i[0][e]=909522486^t[e],i[1][e]=1549556828^t[e];e._baseHash[0].update(i[0]),e._baseHash[1].update(i[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}},Z="Invalid pasword",H=16,j={name:"PBKDF2"},Q=Object.assign({hash:{name:"HMAC"}},j),K=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},j),J=["deriveBits"],$=[8,12,16],tt=[16,24,32],et=10,nt=[0,0,0,0],it=crypto.subtle,ot=G.bytes,rt=O,at=Y,st=W;class lt{constructor(t,e,n){Object.assign(this,{password:t,signed:e,strength:n-1,pendingInput:new Uint8Array(0)})}async append(t){const e=this;if(e.password){const n=ht(t,0,$[e.strength]+2);await async function(t,e,n){await ft(t,n,ht(e,0,$[t.strength]));const i=ht(e,$[t.strength]),o=t.keys.passwordVerification;if(o[0]!=i[0]||o[1]!=i[1])throw new Error(Z)}(e,n,e.password),e.password=null,e.aesCtrGladman=new at(new rt(e.keys.key),Array.from(nt)),e.hmac=new st(e.keys.authentication),t=ht(t,$[e.strength]+2)}return ut(e,t,new Uint8Array(t.length-et-(t.length-et)%H),0,et,!0)}async flush(){const t=this,e=t.pendingInput,n=ht(e,0,e.length-et),i=ht(e,e.length-et);let o=new Uint8Array(0);if(n.length){const e=ot.toBits(n);t.hmac.update(e);const i=t.aesCtrGladman.update(e);o=ot.fromBits(i)}let r=!0;if(t.signed){const e=ht(ot.fromBits(t.hmac.digest()),0,et);for(let t=0;t<et;t++)e[t]!=i[t]&&(r=!1)}return{valid:r,data:o}}}class ct{constructor(t,e){Object.assign(this,{password:t,strength:e-1,pendingInput:new Uint8Array(0)})}async append(t){const e=this;let n=new Uint8Array(0);e.password&&(n=await async function(t,e){const n=crypto.getRandomValues(new Uint8Array($[t.strength]));return await ft(t,e,n),vt(n,t.keys.passwordVerification)}(e,e.password),e.password=null,e.aesCtrGladman=new at(new rt(e.keys.key),Array.from(nt)),e.hmac=new st(e.keys.authentication));const i=new Uint8Array(n.length+t.length-t.length%H);return i.set(n,0),ut(e,t,i,n.length,0)}async flush(){const t=this;let e=new Uint8Array(0);if(t.pendingInput.length){const n=t.aesCtrGladman.update(ot.toBits(t.pendingInput));t.hmac.update(n),e=ot.fromBits(n)}const n=ht(ot.fromBits(t.hmac.digest()),0,et);return{data:vt(e,n),signature:n}}}function ut(t,e,n,i,o,r){const a=e.length-o;let s;for(t.pendingInput.length&&(e=vt(t.pendingInput,e),n=function(t,e){if(e&&e>t.length){const n=t;(t=new Uint8Array(e)).set(n,0)}return t}(n,a-a%H)),s=0;s<=a-H;s+=H){const o=ot.toBits(ht(e,s,s+H));r&&t.hmac.update(o);const a=t.aesCtrGladman.update(o);r||t.hmac.update(a),n.set(ot.fromBits(a),s+i)}return t.pendingInput=ht(e,s),n}async function ft(t,e,n){const i=(new TextEncoder).encode(e),o=await it.importKey("raw",i,Q,!1,J),r=await it.deriveBits(Object.assign({salt:n},K),o,8*(2*tt[t.strength]+2)),a=new Uint8Array(r);t.keys={key:ot.toBits(ht(a,0,tt[t.strength])),authentication:ot.toBits(ht(a,tt[t.strength],2*tt[t.strength])),passwordVerification:ht(a,2*tt[t.strength])}}function vt(t,e){let n=t;return t.length+e.length&&(n=new Uint8Array(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function ht(t,e,n){return t.subarray(e,n)}class dt{constructor(t,e){Object.assign(this,{password:t,passwordVerification:e}),yt(this,t)}async append(t){const e=this;if(e.password){const n=_t(e,t.subarray(0,12));if(e.password=null,n[11]!=e.passwordVerification)throw new Error(Z);t=t.subarray(12)}return _t(e,t)}async flush(){return{valid:!0,data:new Uint8Array(0)}}}class pt{constructor(t,e){Object.assign(this,{password:t,passwordVerification:e}),yt(this,t)}async append(t){const e=this;let n,i;if(e.password){e.password=null;const o=crypto.getRandomValues(new Uint8Array(12));o[11]=e.passwordVerification,n=new Uint8Array(t.length+o.length),n.set(gt(e,o),0),i=12}else n=new Uint8Array(t.length),i=0;return n.set(gt(e,t),i),n}async flush(){return{data:new Uint8Array(0)}}}function _t(t,e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=bt(t)^e[i],mt(t,n[i]);return n}function gt(t,e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=bt(t)^e[i],mt(t,e[i]);return n}function yt(t,e){t.keys=[305419896,591751049,878082192],t.crcKey0=new V(t.keys[0]),t.crcKey2=new V(t.keys[2]);for(let n=0;n<e.length;n++)mt(t,e.charCodeAt(n))}function mt(t,e){t.crcKey0.append([e]),t.keys[0]=~t.crcKey0.get(),t.keys[1]=wt(t.keys[1]+xt(t.keys[0])),t.keys[1]=wt(Math.imul(t.keys[1],134775813)+1),t.crcKey2.append([t.keys[1]>>>24]),t.keys[2]=~t.crcKey2.get()}function bt(t){const e=2|t.keys[2];return xt(Math.imul(e,1^e)>>>8)}function xt(t){return 255&t}function wt(t){return 4294967295&t}const At="deflate",Mt="inflate",St="Invalid signature";class Tt{constructor(t,{signature:e,password:n,signed:i,compressed:o,zipCrypto:r,passwordVerification:a,encryptionStrength:s},{chunkSize:l}){const c=Boolean(n);Object.assign(this,{signature:e,encrypted:c,signed:i,compressed:o,inflate:o&&new t({chunkSize:l}),crc32:i&&new V,zipCrypto:r,decrypt:c&&r?new dt(n,a):new lt(n,i,s)})}async append(t){const e=this;return e.encrypted&&t.length&&(t=await e.decrypt.append(t)),e.compressed&&t.length&&(t=await e.inflate.append(t)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),t}async flush(){const t=this;let e,n=new Uint8Array(0);if(t.encrypted){const e=await t.decrypt.flush();if(!e.valid)throw new Error(St);n=e.data}if((!t.encrypted||t.zipCrypto)&&t.signed){const n=new DataView(new Uint8Array(4).buffer);if(e=t.crc32.get(),n.setUint32(0,e),t.signature!=n.getUint32(0,!1))throw new Error(St)}return t.compressed&&(n=await t.inflate.append(n)||new Uint8Array(0),await t.inflate.flush()),{data:n,signature:e}}}class Bt{constructor(t,{encrypted:e,signed:n,compressed:i,level:o,zipCrypto:r,password:a,passwordVerification:s,encryptionStrength:l},{chunkSize:c}){Object.assign(this,{encrypted:e,signed:n,compressed:i,deflate:i&&new t({level:o||5,chunkSize:c}),crc32:n&&new V,zipCrypto:r,encrypt:e&&r?new pt(a,s):new ct(a,l)})}async append(t){const e=this;let n=t;return e.compressed&&t.length&&(n=await e.deflate.append(t)),e.encrypted&&n.length&&(n=await e.encrypt.append(n)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),n}async flush(){const t=this;let e,n=new Uint8Array(0);if(t.compressed&&(n=await t.deflate.flush()||new Uint8Array(0)),t.encrypted){n=await t.encrypt.append(n);const i=await t.encrypt.flush();e=i.signature;const o=new Uint8Array(n.length+i.data.length);o.set(n,0),o.set(i.data,n.length),n=o}return t.encrypted&&!t.zipCrypto||!t.signed||(e=t.crc32.get()),{data:n,signature:e}}}const Et="init",Ft="append",Rt="flush";var It=(t,e,n,i,o,r,a)=>(Object.assign(t,{busy:!0,codecConstructor:e,options:Object.assign({},n),scripts:a,terminate(){t.worker&&!t.busy&&(t.worker.terminate(),t.interface=null)},onTaskFinished(){t.busy=!1,o(t)}}),r?function(t,e){let n;return t.interface||(t.worker=new Worker(new URL(t.scripts[0],"undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("zip-full.min.js",document.baseURI).href)),t.worker.addEventListener("message",(function(e){const i=e.data;if(n){const e=i.error,o=i.type;if(e){const i=new Error(e.message);i.stack=e.stack,n.reject(i),n=null,t.onTaskFinished()}else if(o==Et||o==Rt||o==Ft){const e=i.data;o==Rt?(n.resolve({data:new Uint8Array(e),signature:i.signature}),n=null,t.onTaskFinished()):n.resolve(e&&new Uint8Array(e))}}}),!1),t.interface={append:t=>i({type:Ft,data:t}),flush:()=>i({type:Rt})}),t.interface;async function i(i){if(!n){const n=t.options,i=t.scripts.slice(1);await o({scripts:i,type:Et,options:n,config:{chunkSize:e.chunkSize}})}return o(i)}function o(e){const i=t.worker,o=new Promise(((t,e)=>n={resolve:t,reject:e}));try{if(e.data)try{e.data=e.data.buffer,i.postMessage(e,[e.data])}catch(t){i.postMessage(e)}else i.postMessage(e)}catch(e){n.reject(e),n=null,t.onTaskFinished()}return o}}(t,i):function(t,e){const n=function(t,e,n){return e.codecType.startsWith(At)?new Bt(t,e,n):e.codecType.startsWith(Mt)?new Tt(t,e,n):void 0}(t.codecConstructor,t.options,e);return{async append(e){try{return await n.append(e)}catch(e){throw t.onTaskFinished(),e}},async flush(){try{return await n.flush()}finally{t.onTaskFinished()}}}}(t,i));let Ct=[],Lt=[];function Pt(t,e,n){const i=!(!e.compressed&&!e.signed&&!e.encrypted)&&(e.useWebWorkers||void 0===e.useWebWorkers&&n.useWebWorkers),o=i&&n.workerScripts?n.workerScripts[e.codecType]:[];if(Ct.length<n.maxWorkers){const a={};return Ct.push(a),It(a,t,e,n,r,i,o)}{const a=Ct.find((t=>!t.busy));return a?(Dt(a),It(a,t,e,n,r,i,o)):new Promise((n=>Lt.push({resolve:n,codecConstructor:t,options:e,webWorker:i,scripts:o})))}function r(t){if(Lt.length){const[{resolve:e,codecConstructor:i,options:o,webWorker:a,scripts:s}]=Lt.splice(0,1);e(It(t,i,o,n,r,a,s))}else t.worker?(Dt(t),Number.isFinite(n.terminateWorkerTimeout)&&n.terminateWorkerTimeout>=0&&(t.terminateTimeout=setTimeout((()=>{Ct=Ct.filter((e=>e!=t)),t.terminate()}),n.terminateWorkerTimeout))):Ct=Ct.filter((e=>e!=t))}}function Dt(t){t.terminateTimeout&&(clearTimeout(t.terminateTimeout),t.terminateTimeout=null)}const Xt="Abort error";async function kt(t,e,n,i,o,r,a){const s=Math.max(r.chunkSize,64);return async function r(l=0,c=0){const u=a.signal;if(l<o){Ut(u,t);const f=await e.readUint8Array(l+i,Math.min(s,o-l)),v=f.length;Ut(u,t);const h=await t.append(f);if(Ut(u,t),c+=await zt(n,h),a.onprogress)try{a.onprogress(l+v,o)}catch(t){}return r(l+s,c)}{const e=await t.flush();return c+=await zt(n,e.data),{signature:e.signature,length:c}}}()}function Ut(t,e){if(t&&t.aborted)throw e.flush(),new Error(Xt)}async function zt(t,e){return e.length&&await t.writeUint8Array(e),e.length}const Vt="HTTP error ",Nt="HTTP Range not supported",Gt="text/plain",qt="Content-Length",Ot="Accept-Ranges",Yt="HEAD",Wt="GET",Zt="bytes";class Ht{constructor(){this.size=0}init(){this.initialized=!0}}class jt extends Ht{}class Qt extends Ht{writeUint8Array(t){this.size+=t.length}}class Kt extends jt{constructor(t){super(),this.blob=t,this.size=t.size}async readUint8Array(t,e){const n=new FileReader;return new Promise(((i,o)=>{n.onload=t=>i(new Uint8Array(t.target.result)),n.onerror=()=>o(n.error),n.readAsArrayBuffer(this.blob.slice(t,t+e))}))}}class Jt extends Qt{constructor(t){super(),this.offset=0,this.contentType=t,this.blob=new Blob([],{type:t})}async writeUint8Array(t){super.writeUint8Array(t),this.blob=new Blob([this.blob,t.buffer],{type:this.contentType}),this.offset=this.blob.size}getData(){return this.blob}}class $t extends jt{constructor(t,e){super(),this.url=t,this.preventHeadRequest=e.preventHeadRequest,this.useRangeHeader=e.useRangeHeader,this.forceRangeRequests=e.forceRangeRequests,this.options=Object.assign({},e),delete this.options.preventHeadRequest,delete this.options.useRangeHeader,delete this.options.forceRangeRequests,delete this.options.useXHR}async init(){if(super.init(),ae(this.url)&&!this.preventHeadRequest){const t=await ee(Yt,this.url,this.options);if(this.size=Number(t.headers.get(qt)),!this.forceRangeRequests&&this.useRangeHeader&&t.headers.get(Ot)!=Zt)throw new Error(Nt);void 0===this.size&&await te(this,this.options)}else await te(this,this.options)}async readUint8Array(t,e){if(this.useRangeHeader){const n=await ee(Wt,this.url,this.options,Object.assign({},this.options.headers,{HEADER_RANGE:"bytes="+t+"-"+(t+e-1)}));if(206!=n.status)throw new Error(Nt);return new Uint8Array(await n.arrayBuffer())}return this.data||await te(this,this.options),new Uint8Array(this.data.subarray(t,t+e))}}async function te(t,e){const n=await ee(Wt,t.url,e);t.data=new Uint8Array(await n.arrayBuffer()),t.size||(t.size=t.data.length)}async function ee(t,e,n,i){i=Object.assign({},n.headers,i);const o=await fetch(e,Object.assign({},n,{method:t,headers:i}));if(o.status<400)return o;throw new Error(Vt+(o.statusText||o.status))}class ne extends jt{constructor(t,e){super(),this.url=t,this.preventHeadRequest=e.preventHeadRequest,this.useRangeHeader=e.useRangeHeader,this.forceRangeRequests=e.forceRangeRequests}async init(){if(super.init(),ae(this.url)&&!this.preventHeadRequest)return new Promise(((t,e)=>oe(Yt,this.url,(n=>{this.size=Number(n.getResponseHeader(qt)),this.useRangeHeader?this.forceRangeRequests||n.getResponseHeader(Ot)==Zt?t():e(new Error(Nt)):void 0===this.size?ie(this,this.url).then((()=>t())).catch(e):t()}),e)));await ie(this,this.url)}async readUint8Array(t,e){if(!this.useRangeHeader)return this.data||await ie(this,this.url),new Uint8Array(this.data.subarray(t,t+e));if(206!=(await new Promise(((n,i)=>oe(Wt,this.url,(t=>n(new Uint8Array(t.response))),i,[["Range","bytes="+t+"-"+(t+e-1)]])))).status)throw new Error(Nt)}}function ie(t,e){return new Promise(((n,i)=>oe(Wt,e,(e=>{t.data=new Uint8Array(e.response),t.size||(t.size=t.data.length),n()}),i)))}function oe(t,e,n,i,o=[]){const r=new XMLHttpRequest;return r.addEventListener("load",(()=>{r.status<400?n(r):i(Vt+(r.statusText||r.status))}),!1),r.addEventListener("error",i,!1),r.open(t,e),o.forEach((t=>r.setRequestHeader(t[0],t[1]))),r.responseType="arraybuffer",r.send(),r}class re extends jt{constructor(t,e={}){super(),this.url=t,e.useXHR?this.reader=new ne(t,e):this.reader=new $t(t,e)}set size(t){}get size(){return this.reader.size}async init(){super.init(),await this.reader.init()}async readUint8Array(t,e){return this.reader.readUint8Array(t,e)}}function ae(t){if("undefined"!=typeof document){const e=document.createElement("a");return e.href=t,"http:"==e.protocol||"https:"==e.protocol}return/^https?:\/\//i.test(t)}const se=4294967295,le=65535,ce=67324752,ue=33639248,fe=101010256,ve=101075792,he=117853008,de=21589,pe=2048,_e="/",ge=new Date(2107,11,31),ye=new Date(1980,0,1),me="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ ".split(""),be=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class xe{constructor(t){be.forEach((e=>this[e]=t[e]))}}const we="File format is not recognized",Ae="End of central directory not found",Me="End of Zip64 central directory not found",Se="End of Zip64 central directory locator not found",Te="Central directory header not found",Be="Local file header not found",Ee="Zip64 extra field not found",Fe="File contains encrypted entry",Re="Encryption method not supported",Ie="Compression method not supported",Ce="utf-8",Le=["uncompressedSize","compressedSize","offset"];class Pe{constructor(t,e,n){Object.assign(this,{reader:t,config:e,options:n})}async getData(t,e,n={}){const i=this,{reader:o,offset:r,extraFieldAES:a,compressionMethod:s,config:l,bitFlag:c,signature:u,rawLastModDate:f,compressedSize:v}=i,h=i.localDirectory={};o.initialized||await o.init();let d=await Ze(o,r,30);const p=We(d);let _=Ue(i,n,"password");if(_=_&&_.length&&_,a&&99!=a.originalCompressionMethod)throw new Error(Ie);if(0!=s&&8!=s)throw new Error(Ie);if(Oe(p,0)!=ce)throw new Error(Be);De(h,p,4),d=await Ze(o,r,30+h.filenameLength+h.extraFieldLength),h.rawExtraField=d.subarray(30+h.filenameLength),Xe(i,h,p,4),e.lastAccessDate=h.lastAccessDate,e.creationDate=h.creationDate;const g=i.encrypted&&h.encrypted,y=g&&!a;if(g){if(!y&&void 0===a.strength)throw new Error(Re);if(!_)throw new Error(Fe)}const m=await Pt(l.Inflate,{codecType:Mt,password:_,zipCrypto:y,encryptionStrength:a&&a.strength,signed:Ue(i,n,"checkSignature"),passwordVerification:y&&(c.dataDescriptor?f>>>8&255:u>>>24&255),signature:u,compressed:0!=s,encrypted:g,useWebWorkers:Ue(i,n,"useWebWorkers")},l);t.initialized||await t.init();const b=Ue(i,n,"signal"),x=r+30+h.filenameLength+h.extraFieldLength;return await kt(m,o,t,x,v,l,{onprogress:n.onprogress,signal:b}),t.getData()}}function De(t,e,n){const i=t.rawBitFlag=qe(e,n+2),o=1==(1&i),r=Oe(e,n+6);Object.assign(t,{encrypted:o,version:qe(e,n),bitFlag:{level:(6&i)>>1,dataDescriptor:8==(8&i),languageEncodingFlag:(i&pe)==pe},rawLastModDate:r,lastModDate:Ve(r),filenameLength:qe(e,n+22),extraFieldLength:qe(e,n+24)})}function Xe(t,e,n,i){const o=e.rawExtraField,r=e.extraField=new Map,a=We(new Uint8Array(o));let s=0;try{for(;s<o.length;){const t=qe(a,s),e=qe(a,s+2);r.set(t,{type:t,data:o.slice(s+4,s+4+e)}),s+=4+e}}catch(t){}const l=qe(n,i+4);e.signature=Oe(n,i+10),e.uncompressedSize=Oe(n,i+18),e.compressedSize=Oe(n,i+14);const c=r.get(1);c&&(function(t,e){e.zip64=!0;const n=We(t.data);t.values=[];for(let e=0;e<Math.floor(t.data.length/8);e++)t.values.push(Ye(n,0+8*e));const i=Le.filter((t=>e[t]==se));for(let e=0;e<i.length;e++)t[i[e]]=t.values[e];Le.forEach((n=>{if(e[n]==se){if(void 0===t[n])throw new Error(Ee);e[n]=t[n]}}))}(c,e),e.extraFieldZip64=c);const u=r.get(28789);u&&(ke(u,"filename","rawFilename",e,t),e.extraFieldUnicodePath=u);const f=r.get(25461);f&&(ke(f,"comment","rawComment",e,t),e.extraFieldUnicodeComment=f);const v=r.get(39169);v?(function(t,e,n){const i=We(t.data);t.vendorVersion=Ge(i,0),t.vendorId=Ge(i,2);const o=Ge(i,4);t.strength=o,t.originalCompressionMethod=n,e.compressionMethod=t.compressionMethod=qe(i,5)}(v,e,l),e.extraFieldAES=v):e.compressionMethod=l;const h=r.get(10);h&&(function(t,e){const n=We(t.data);let i,o=4;try{for(;o<t.data.length&&!i;){const e=qe(n,o),r=qe(n,o+2);1==e&&(i=t.data.slice(o+4,o+4+r)),o+=4+r}}catch(t){}try{if(i&&24==i.length){const n=We(i),o=n.getBigUint64(0,!0),r=n.getBigUint64(8,!0),a=n.getBigUint64(16,!0);Object.assign(t,{rawLastModDate:o,rawLastAccessDate:r,rawCreationDate:a});const s=Ne(o),l={lastModDate:s,lastAccessDate:Ne(r),creationDate:Ne(a)};Object.assign(t,l),Object.assign(e,l)}}catch(t){}}(h,e),e.extraFieldNTFS=h);const d=r.get(de);d&&(function(t,e){const n=We(t.data),i=Ge(n,0),o=[],r=[];1==(1&i)&&(o.push("lastModDate"),r.push("rawLastModDate")),2==(2&i)&&(o.push("lastAccessDate"),r.push("rawLastAccessDate")),4==(4&i)&&(o.push("creationDate"),r.push("rawCreationDate"));let a=1;o.forEach(((i,o)=>{if(t.data.length>=a+4){const s=Oe(n,a);e[i]=t[i]=new Date(1e3*s);const l=r[o];t[l]=s}a+=4}))}(d,e),e.extraFieldExtendedTimestamp=d)}function ke(t,e,n,i,o){const r=We(t.data);t.version=Ge(r,0),t.signature=Oe(r,1);const a=new V;a.append(o[n]);const s=We(new Uint8Array(4));s.setUint32(0,a.get(),!0),t[e]=(new TextDecoder).decode(t.data.subarray(5)),t.valid=!o.bitFlag.languageEncodingFlag&&t.signature==Oe(s,0),t.valid&&(i[e]=t[e],i[e+"UTF8"]=!0)}function Ue(t,e,n){return void 0===e[n]?t.options[n]:e[n]}function ze(t,e){return e&&"cp437"!=e.trim().toLowerCase()?new TextDecoder(e).decode(t):(t=>{let e="";for(let n=0;n<t.length;n++)e+=me[t[n]];return e})(t)}function Ve(t){const e=(4294901760&t)>>16,n=65535&t;try{return new Date(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(t){}}function Ne(t){return new Date(Number(t/10000n-11644473600000n))}function Ge(t,e){return t.getUint8(e)}function qe(t,e){return t.getUint16(e,!0)}function Oe(t,e){return t.getUint32(e,!0)}function Ye(t,e){return Number(t.getBigUint64(e,!0))}function We(t){return new DataView(t.buffer)}function Ze(t,e,n){return t.readUint8Array(e,n)}const He="File already exists",je="Zip file comment exceeds 64KB",Qe="File entry comment exceeds 64KB",Ke="File entry name exceeds 64KB",Je="Version exceeds 65535",$e="The strength must equal 1, 2, or 3",tn="Extra field type exceeds 65535",en="Extra field data exceeds 64KB",nn="Zip64 is not supported",on=new Uint8Array([7,0,2,0,65,69,3,0,0]);let rn=0;function an(t,e,n){const i=new FileReader;return new Promise(((o,r)=>{i.onload=t=>o(t.target.result),i.onerror=()=>r(i.error),i.readAsArrayBuffer(e||n?t.slice(e,n):t)}))}function sn(t){if(t)return 10000n*(BigInt(t.getTime())+11644473600000n)}function ln(t,e,n){return void 0===e[n]?t.options[n]:e[n]}function cn(t,e,n){t.setUint8(e,n)}function un(t,e,n){t.setUint16(e,n,!0)}function fn(t,e,n){t.setUint32(e,n,!0)}function vn(t,e,n){t.setBigUint64(e,n,!0)}function hn(t,e,n){t.set(e,n)}function dn(t){return new DataView(t.buffer)}(()=>{if("function"==typeof URL.createObjectURL){const t=(()=>{const t=[];for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;t[e]=n}class e{constructor(t){this.crc=t||-1}append(e){let n=0|this.crc;for(let i=0,o=0|e.length;i<o;i++)n=n>>>8^t[255&(n^e[i])];this.crc=n}get(){return~this.crc}}const n={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const i=t[t.length-1],o=n.getPartial(i);return 32===o?t.concat(e):n._shiftRight(e,o,0|i,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const i=t[e-1];return 32*(e-1)+n.getPartial(i)},clamp(t,e){if(32*t.length<e)return t;const i=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,i>0&&e&&(t[i-1]=n.partial(e,t[i-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,_shiftRight(t,e,i,o){for(void 0===o&&(o=[]);e>=32;e-=32)o.push(i),i=0;if(0===e)return o.concat(t);for(let n=0;n<t.length;n++)o.push(i|t[n]>>>e),i=t[n]<<32-e;const r=t.length?t[t.length-1]:0,a=n.getPartial(r);return o.push(n.partial(e+a&31,e+a>32?i:o.pop(),1)),o}},i={bytes:{fromBits(t){const e=n.bitLength(t)/8,i=new Uint8Array(e);let o;for(let n=0;n<e;n++)0==(3&n)&&(o=t[n/4]),i[n]=o>>>24,o<<=8;return i},toBits(t){const e=[];let i,o=0;for(i=0;i<t.length;i++)o=o<<8|t[i],3==(3&i)&&(e.push(o),o=0);return 3&i&&e.push(n.partial(8*(3&i),o)),e}}},o={sha1:function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()}};o.sha1.prototype={blockSize:512,reset:function(){const t=this;return t._h=this._init.slice(0),t._buffer=[],t._length=0,t},update:function(t){const e=this;"string"==typeof t&&(t=i.utf8String.toBits(t));const o=e._buffer=n.concat(e._buffer,t),r=e._length,a=e._length=r+n.bitLength(t);if(a>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const s=new Uint32Array(o);let l=0;for(let t=e.blockSize+r-(e.blockSize+r&e.blockSize-1);t<=a;t+=e.blockSize)e._block(s.subarray(16*l,16*(l+1))),l+=1;return o.splice(0,16*l),e},finalize:function(){const t=this;let e=t._buffer;const i=t._h;e=n.concat(e,[n.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),i},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,n,i){return t<=19?e&n|~e&i:t<=39?e^n^i:t<=59?e&n|e&i|n&i:t<=79?e^n^i:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){const e=this,n=e._h,i=Array(80);for(let e=0;e<16;e++)i[e]=t[e];let o=n[0],r=n[1],a=n[2],s=n[3],l=n[4];for(let t=0;t<=79;t++){t>=16&&(i[t]=e._S(1,i[t-3]^i[t-8]^i[t-14]^i[t-16]));const n=e._S(5,o)+e._f(t,r,a,s)+l+i[t]+e._key[Math.floor(t/20)]|0;l=s,s=a,a=e._S(30,r),r=o,o=n}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0}};const r={name:"PBKDF2"},a=Object.assign({hash:{name:"HMAC"}},r),s=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},r),l=["deriveBits"],c=[8,12,16],u=[16,24,32],f=[0,0,0,0],v=crypto.subtle,h=i.bytes,d=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],i=e._tables[1],o=t.length;let r,a,s,l=1;if(4!==o&&6!==o&&8!==o)throw new Error("invalid aes key size");for(e._key=[a=t.slice(0),s=[]],r=o;r<4*o+28;r++){let t=a[r-1];(r%o==0||8===o&&r%o==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],r%o==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),a[r]=a[r-o]^t}for(let t=0;r;t++,r--){const e=a[3&t?r:r-4];s[t]=r<=4||t<4?e:i[0][n[e>>>24]]^i[1][n[e>>16&255]]^i[2][n[e>>8&255]]^i[3][n[255&e]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],i=e[4],o=[],r=[];let a,s,l,c;for(let t=0;t<256;t++)r[(o[t]=t<<1^283*(t>>7))^t]=t;for(let u=a=0;!n[u];u^=s||1,a=r[a]||1){let r=a^a<<1^a<<2^a<<3^a<<4;r=r>>8^255&r^99,n[u]=r,i[r]=u,c=o[l=o[s=o[u]]];let f=16843009*c^65537*l^257*s^16843008*u,v=257*o[r]^16843008*r;for(let n=0;n<4;n++)t[n][u]=v=v<<24^v>>>8,e[n][r]=f=f<<24^f>>>8}for(let n=0;n<5;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0)}_crypt(t,e){if(4!==t.length)throw new Error("invalid aes block size");const n=this._key[e],i=n.length/4-2,o=[0,0,0,0],r=this._tables[e],a=r[0],s=r[1],l=r[2],c=r[3],u=r[4];let f,v,h,d=t[0]^n[0],p=t[e?3:1]^n[1],_=t[2]^n[2],g=t[e?1:3]^n[3],y=4;for(let t=0;t<i;t++)f=a[d>>>24]^s[p>>16&255]^l[_>>8&255]^c[255&g]^n[y],v=a[p>>>24]^s[_>>16&255]^l[g>>8&255]^c[255&d]^n[y+1],h=a[_>>>24]^s[g>>16&255]^l[d>>8&255]^c[255&p]^n[y+2],g=a[g>>>24]^s[d>>16&255]^l[p>>8&255]^c[255&_]^n[y+3],y+=4,d=f,p=v,_=h;for(let t=0;t<4;t++)o[e?3&-t:t]=u[d>>>24]<<24^u[p>>16&255]<<16^u[_>>8&255]<<8^u[255&g]^n[y++],f=d,d=p,p=_,_=g,g=f;return o}},p=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i}else t+=1<<24;return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]))}calculate(t,e,i){let o;if(!(o=e.length))return[];const r=n.bitLength(e);for(let n=0;n<o;n+=4){this.incCounter(i);const o=t.encrypt(i);e[n]^=o[0],e[n+1]^=o[1],e[n+2]^=o[2],e[n+3]^=o[3]}return n.clamp(e,r)}},_=class{constructor(t){const e=this,n=e._hash=o.sha1,i=[[],[]],r=n.prototype.blockSize/32;e._baseHash=[new n,new n],t.length>r&&(t=n.hash(t));for(let e=0;e<r;e++)i[0][e]=909522486^t[e],i[1][e]=1549556828^t[e];e._baseHash[0].update(i[0]),e._baseHash[1].update(i[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}};class g{constructor(t,e,n){Object.assign(this,{password:t,signed:e,strength:n-1,pendingInput:new Uint8Array(0)})}async append(t){const e=this;if(e.password){const n=w(t,0,c[e.strength]+2);await async function(t,e,n){await b(t,n,w(e,0,c[t.strength]));const i=w(e,c[t.strength]),o=t.keys.passwordVerification;if(o[0]!=i[0]||o[1]!=i[1])throw new Error("Invalid pasword")}(e,n,e.password),e.password=null,e.aesCtrGladman=new p(new d(e.keys.key),Array.from(f)),e.hmac=new _(e.keys.authentication),t=w(t,c[e.strength]+2)}return m(e,t,new Uint8Array(t.length-10-(t.length-10)%16),0,10,!0)}async flush(){const t=this,e=t.pendingInput,n=w(e,0,e.length-10),i=w(e,e.length-10);let o=new Uint8Array(0);if(n.length){const e=h.toBits(n);t.hmac.update(e);const i=t.aesCtrGladman.update(e);o=h.fromBits(i)}let r=!0;if(t.signed){const e=w(h.fromBits(t.hmac.digest()),0,10);for(let t=0;t<10;t++)e[t]!=i[t]&&(r=!1)}return{valid:r,data:o}}}class y{constructor(t,e){Object.assign(this,{password:t,strength:e-1,pendingInput:new Uint8Array(0)})}async append(t){const e=this;let n=new Uint8Array(0);e.password&&(n=await async function(t,e){const n=crypto.getRandomValues(new Uint8Array(c[t.strength]));return await b(t,e,n),x(n,t.keys.passwordVerification)}(e,e.password),e.password=null,e.aesCtrGladman=new p(new d(e.keys.key),Array.from(f)),e.hmac=new _(e.keys.authentication));const i=new Uint8Array(n.length+t.length-t.length%16);return i.set(n,0),m(e,t,i,n.length,0)}async flush(){const t=this;let e=new Uint8Array(0);if(t.pendingInput.length){const n=t.aesCtrGladman.update(h.toBits(t.pendingInput));t.hmac.update(n),e=h.fromBits(n)}const n=w(h.fromBits(t.hmac.digest()),0,10);return{data:x(e,n),signature:n}}}function m(t,e,n,i,o,r){const a=e.length-o;let s;for(t.pendingInput.length&&(e=x(t.pendingInput,e),n=function(t,e){if(e&&e>t.length){const n=t;(t=new Uint8Array(e)).set(n,0)}return t}(n,a-a%16)),s=0;s<=a-16;s+=16){const o=h.toBits(w(e,s,s+16));r&&t.hmac.update(o);const a=t.aesCtrGladman.update(o);r||t.hmac.update(a),n.set(h.fromBits(a),s+i)}return t.pendingInput=w(e,s),n}async function b(t,e,n){const i=(new TextEncoder).encode(e),o=await v.importKey("raw",i,a,!1,l),r=await v.deriveBits(Object.assign({salt:n},s),o,8*(2*u[t.strength]+2)),c=new Uint8Array(r);t.keys={key:h.toBits(w(c,0,u[t.strength])),authentication:h.toBits(w(c,u[t.strength],2*u[t.strength])),passwordVerification:w(c,2*u[t.strength])}}function x(t,e){let n=t;return t.length+e.length&&(n=new Uint8Array(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function w(t,e,n){return t.subarray(e,n)}class A{constructor(t,e){Object.assign(this,{password:t,passwordVerification:e}),B(this,t)}async append(t){const e=this;if(e.password){const n=S(e,t.subarray(0,12));if(e.password=null,n[11]!=e.passwordVerification)throw new Error("Invalid pasword");t=t.subarray(12)}return S(e,t)}async flush(){return{valid:!0,data:new Uint8Array(0)}}}class M{constructor(t,e){Object.assign(this,{password:t,passwordVerification:e}),B(this,t)}async append(t){const e=this;let n,i;if(e.password){e.password=null;const o=crypto.getRandomValues(new Uint8Array(12));o[11]=e.passwordVerification,n=new Uint8Array(t.length+o.length),n.set(T(e,o),0),i=12}else n=new Uint8Array(t.length),i=0;return n.set(T(e,t),i),n}async flush(){return{data:new Uint8Array(0)}}}function S(t,e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=F(t)^e[i],E(t,n[i]);return n}function T(t,e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=F(t)^e[i],E(t,e[i]);return n}function B(t,n){t.keys=[305419896,591751049,878082192],t.crcKey0=new e(t.keys[0]),t.crcKey2=new e(t.keys[2]);for(let e=0;e<n.length;e++)E(t,n.charCodeAt(e))}function E(t,e){t.crcKey0.append([e]),t.keys[0]=~t.crcKey0.get(),t.keys[1]=I(t.keys[1]+R(t.keys[0])),t.keys[1]=I(Math.imul(t.keys[1],134775813)+1),t.crcKey2.append([t.keys[1]>>>24]),t.keys[2]=~t.crcKey2.get()}function F(t){const e=2|t.keys[2];return R(Math.imul(e,1^e)>>>8)}function R(t){return 255&t}function I(t){return 4294967295&t}class C{constructor(t,{signature:n,password:i,signed:o,compressed:r,zipCrypto:a,passwordVerification:s,encryptionStrength:l},{chunkSize:c}){const u=Boolean(i);Object.assign(this,{signature:n,encrypted:u,signed:o,compressed:r,inflate:r&&new t({chunkSize:c}),crc32:o&&new e,zipCrypto:a,decrypt:u&&a?new A(i,s):new g(i,o,l)})}async append(t){const e=this;return e.encrypted&&t.length&&(t=await e.decrypt.append(t)),e.compressed&&t.length&&(t=await e.inflate.append(t)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),t}async flush(){const t=this;let e,n=new Uint8Array(0);if(t.encrypted){const e=await t.decrypt.flush();if(!e.valid)throw new Error("Invalid signature");n=e.data}if((!t.encrypted||t.zipCrypto)&&t.signed){const n=new DataView(new Uint8Array(4).buffer);if(e=t.crc32.get(),n.setUint32(0,e),t.signature!=n.getUint32(0,!1))throw new Error("Invalid signature")}return t.compressed&&(n=await t.inflate.append(n)||new Uint8Array(0),await t.inflate.flush()),{data:n,signature:e}}}class L{constructor(t,{encrypted:n,signed:i,compressed:o,level:r,zipCrypto:a,password:s,passwordVerification:l,encryptionStrength:c},{chunkSize:u}){Object.assign(this,{encrypted:n,signed:i,compressed:o,deflate:o&&new t({level:r||5,chunkSize:u}),crc32:i&&new e,zipCrypto:a,encrypt:n&&a?new M(s,l):new y(s,c)})}async append(t){const e=this;let n=t;return e.compressed&&t.length&&(n=await e.deflate.append(t)),e.encrypted&&n.length&&(n=await e.encrypt.append(n)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),n}async flush(){const t=this;let e,n=new Uint8Array(0);if(t.compressed&&(n=await t.deflate.flush()||new Uint8Array(0)),t.encrypted){n=await t.encrypt.append(n);const i=await t.encrypt.flush();e=i.signature;const o=new Uint8Array(n.length+i.data.length);o.set(n,0),o.set(i.data,n.length),n=o}return t.encrypted&&!t.zipCrypto||!t.signed||(e=t.crc32.get()),{data:n,signature:e}}}const P={init(t){t.scripts&&t.scripts.length&&importScripts.apply(void 0,t.scripts);const e=t.options;let n;self.initCodec&&self.initCodec(),e.codecType.startsWith("deflate")?n=self.Deflate:e.codecType.startsWith("inflate")&&(n=self.Inflate),D=function(t,e,n){return e.codecType.startsWith("deflate")?new L(t,e,n):e.codecType.startsWith("inflate")?new C(t,e,n):void 0}(n,e,t.config)},append:async t=>({data:await D.append(t.data)}),flush:()=>D.flush()};let D;function X(t){return t.map((([t,e])=>new Array(t).fill(e,0,t))).flat()}addEventListener("message",(async t=>{const e=t.data,n=e.type,i=P[n];if(i)try{e.data&&(e.data=new Uint8Array(e.data));const t=await i(e)||{};if(t.type=n,t.data)try{t.data=t.data.buffer,postMessage(t,[t.data])}catch(e){postMessage(t)}else postMessage(t)}catch(t){postMessage({type:n,error:{message:t.message,stack:t.stack}})}}));const k=[0,1,2,3].concat(...X([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function U(){const t=this;function e(t,e){let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}t.build_tree=function(n){const i=t.dyn_tree,o=t.stat_desc.static_tree,r=t.stat_desc.elems;let a,s,l,c=-1;for(n.heap_len=0,n.heap_max=573,a=0;a<r;a++)0!==i[2*a]?(n.heap[++n.heap_len]=c=a,n.depth[a]=0):i[2*a+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,i[2*l]=1,n.depth[l]=0,n.opt_len--,o&&(n.static_len-=o[2*l+1]);for(t.max_code=c,a=Math.floor(n.heap_len/2);a>=1;a--)n.pqdownheap(i,a);l=r;do{a=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(i,1),s=n.heap[1],n.heap[--n.heap_max]=a,n.heap[--n.heap_max]=s,i[2*l]=i[2*a]+i[2*s],n.depth[l]=Math.max(n.depth[a],n.depth[s])+1,i[2*a+1]=i[2*s+1]=l,n.heap[1]=l++,n.pqdownheap(i,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(e){const n=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.extra_bits,r=t.stat_desc.extra_base,a=t.stat_desc.max_length;let s,l,c,u,f,v,h=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(n[2*e.heap[e.heap_max]+1]=0,s=e.heap_max+1;s<573;s++)l=e.heap[s],u=n[2*n[2*l+1]+1]+1,u>a&&(u=a,h++),n[2*l+1]=u,l>t.max_code||(e.bl_count[u]++,f=0,l>=r&&(f=o[l-r]),v=n[2*l],e.opt_len+=v*(u+f),i&&(e.static_len+=v*(i[2*l+1]+f)));if(0!==h){do{for(u=a-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[a]--,h-=2}while(h>0);for(u=a;0!==u;u--)for(l=e.bl_count[u];0!==l;)c=e.heap[--s],c>t.max_code||(n[2*c+1]!=u&&(e.opt_len+=(u-n[2*c+1])*n[2*c],n[2*c+1]=u),l--)}}(n),function(t,n,i){const o=[];let r,a,s,l=0;for(r=1;r<=15;r++)o[r]=l=l+i[r-1]<<1;for(a=0;a<=n;a++)s=t[2*a+1],0!==s&&(t[2*a]=e(o[s]++,s))}(i,t.max_code,n.bl_count)}}function z(t,e,n,i,o){const r=this;r.static_tree=t,r.extra_bits=e,r.extra_base=n,r.elems=i,r.max_length=o}function V(t,e,n,i,o){const r=this;r.good_length=t,r.max_lazy=e,r.nice_length=n,r.max_chain=i,r.func=o}U._length_code=[0,1,2,3,4,5,6,7].concat(...X([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),U.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],U.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],U.d_code=function(t){return t<256?k[t]:k[256+(t>>>7)]},U.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],z.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],z.static_l_desc=new z(z.static_ltree,U.extra_lbits,257,286,15),z.static_d_desc=new z(z.static_dtree,U.extra_dbits,0,30,15),z.static_bl_desc=new z(null,U.extra_blbits,0,19,7);const N=[new V(0,0,0,0,0),new V(4,4,8,4,1),new V(4,5,16,8,1),new V(4,6,32,32,1),new V(4,4,16,16,2),new V(8,16,32,32,2),new V(8,16,128,128,2),new V(8,32,128,256,2),new V(32,128,258,1024,2),new V(32,258,258,4096,2)],G=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function q(t,e,n,i){const o=t[2*e],r=t[2*n];return o<r||o==r&&i[e]<=i[n]}function O(){const t=this;let e,n,i,o,r,a,s,l,c,u,f,v,h,d,p,_,g,y,m,b,x,w,A,M,S,T,B,E,F,R,I,C,L;const P=new U,D=new U,X=new U;let k,V,O,Y,W,Z,H,j;function Q(){let e;for(e=0;e<286;e++)I[2*e]=0;for(e=0;e<30;e++)C[2*e]=0;for(e=0;e<19;e++)L[2*e]=0;I[512]=1,t.opt_len=t.static_len=0,O=W=0}function K(t,e){let n,i=-1,o=t[1],r=0,a=7,s=4;0===o&&(a=138,s=3),t[2*(e+1)+1]=65535;for(let l=0;l<=e;l++)n=o,o=t[2*(l+1)+1],++r<a&&n==o||(r<s?L[2*n]+=r:0!==n?(n!=i&&L[2*n]++,L[32]++):r<=10?L[34]++:L[36]++,r=0,i=n,0===o?(a=138,s=3):n==o?(a=6,s=3):(a=7,s=4))}function J(e){t.pending_buf[t.pending++]=e}function $(t){J(255&t),J(t>>>8&255)}function tt(t,e){let n;const i=e;j>16-i?(n=t,H|=n<<j&65535,$(H),H=n>>>16-j,j+=i-16):(H|=t<<j&65535,j+=i)}function et(t,e){const n=2*t;tt(65535&e[n],65535&e[n+1])}function nt(t,e){let n,i,o=-1,r=t[1],a=0,s=7,l=4;for(0===r&&(s=138,l=3),n=0;n<=e;n++)if(i=r,r=t[2*(n+1)+1],!(++a<s&&i==r)){if(a<l)do{et(i,L)}while(0!=--a);else 0!==i?(i!=o&&(et(i,L),a--),et(16,L),tt(a-3,2)):a<=10?(et(17,L),tt(a-3,3)):(et(18,L),tt(a-11,7));a=0,o=i,0===r?(s=138,l=3):i==r?(s=6,l=3):(s=7,l=4)}}function it(){16==j?($(H),H=0,j=0):j>=8&&(J(255&H),H>>>=8,j-=8)}function ot(e,n){let i,o,r;if(t.pending_buf[Y+2*O]=e>>>8&255,t.pending_buf[Y+2*O+1]=255&e,t.pending_buf[k+O]=255&n,O++,0===e?I[2*n]++:(W++,e--,I[2*(U._length_code[n]+256+1)]++,C[2*U.d_code(e)]++),0==(8191&O)&&B>2){for(i=8*O,o=x-g,r=0;r<30;r++)i+=C[2*r]*(5+U.extra_dbits[r]);if(i>>>=3,W<Math.floor(O/2)&&i<Math.floor(o/2))return!0}return O==V-1}function rt(e,n){let i,o,r,a,s=0;if(0!==O)do{i=t.pending_buf[Y+2*s]<<8&65280|255&t.pending_buf[Y+2*s+1],o=255&t.pending_buf[k+s],s++,0===i?et(o,e):(r=U._length_code[o],et(r+256+1,e),a=U.extra_lbits[r],0!==a&&(o-=U.base_length[r],tt(o,a)),i--,r=U.d_code(i),et(r,n),a=U.extra_dbits[r],0!==a&&(i-=U.base_dist[r],tt(i,a)))}while(s<O);et(256,e),Z=e[513]}function at(){j>8?$(H):j>0&&J(255&H),H=0,j=0}function st(e,n,i){tt(0+(i?1:0),3),function(e,n,i){at(),Z=8,$(n),$(~n),t.pending_buf.set(l.subarray(e,e+n),t.pending),t.pending+=n}(e,n)}function lt(e,n,i){let o,r,a=0;B>0?(P.build_tree(t),D.build_tree(t),a=function(){let e;for(K(I,P.max_code),K(C,D.max_code),X.build_tree(t),e=18;e>=3&&0===L[2*U.bl_order[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(),o=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!=e?st(e,n,i):r==o?(tt(2+(i?1:0),3),rt(z.static_ltree,z.static_dtree)):(tt(4+(i?1:0),3),function(t,e,n){let i;for(tt(t-257,5),tt(e-1,5),tt(n-4,4),i=0;i<n;i++)tt(L[2*U.bl_order[i]+1],3);nt(I,t-1),nt(C,e-1)}(P.max_code+1,D.max_code+1,a+1),rt(I,C)),Q(),i&&at()}function ct(t){lt(g>=0?g:-1,x-g,t),g=x,e.flush_pending()}function ut(){let t,n,i,o;do{if(o=c-A-x,0===o&&0===x&&0===A)o=r;else if(-1==o)o--;else if(x>=r+r-262){l.set(l.subarray(r,r+r),0),w-=r,x-=r,g-=r,t=h,i=t;do{n=65535&f[--i],f[i]=n>=r?n-r:0}while(0!=--t);t=r,i=t;do{n=65535&u[--i],u[i]=n>=r?n-r:0}while(0!=--t);o+=r}if(0===e.avail_in)return;t=e.read_buf(l,x+A,o),A+=t,A>=3&&(v=255&l[x],v=(v<<_^255&l[x+1])&p)}while(A<262&&0!==e.avail_in)}function ft(t){let e,n,i=S,o=x,a=M;const c=x>r-262?x-(r-262):0;let f=R;const v=s,h=x+258;let d=l[o+a-1],p=l[o+a];M>=F&&(i>>=2),f>A&&(f=A);do{if(e=t,l[e+a]==p&&l[e+a-1]==d&&l[e]==l[o]&&l[++e]==l[o+1]){o+=2,e++;do{}while(l[++o]==l[++e]&&l[++o]==l[++e]&&l[++o]==l[++e]&&l[++o]==l[++e]&&l[++o]==l[++e]&&l[++o]==l[++e]&&l[++o]==l[++e]&&l[++o]==l[++e]&&o<h);if(n=258-(h-o),o=h-258,n>a){if(w=t,a=n,n>=f)break;d=l[o+a-1],p=l[o+a]}}}while((t=65535&u[t&v])>c&&0!=--i);return a<=A?a:A}function vt(e){return e.total_in=e.total_out=0,e.msg=null,t.pending=0,t.pending_out=0,n=113,o=0,P.dyn_tree=I,P.stat_desc=z.static_l_desc,D.dyn_tree=C,D.stat_desc=z.static_d_desc,X.dyn_tree=L,X.stat_desc=z.static_bl_desc,H=0,j=0,Z=8,Q(),function(){c=2*r,f[h-1]=0;for(let t=0;t<h-1;t++)f[t]=0;T=N[B].max_lazy,F=N[B].good_length,R=N[B].nice_length,S=N[B].max_chain,x=0,g=0,A=0,y=M=2,b=0,v=0}(),0}t.depth=[],t.bl_count=[],t.heap=[],I=[],C=[],L=[],t.pqdownheap=function(e,n){const i=t.heap,o=i[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&q(e,i[r+1],i[r],t.depth)&&r++,!q(e,o,i[r],t.depth));)i[n]=i[r],n=r,r<<=1;i[n]=o},t.deflateInit=function(e,n,o,c,v,g){return c||(c=8),v||(v=8),g||(g=0),e.msg=null,-1==n&&(n=6),v<1||v>9||8!=c||o<9||o>15||n<0||n>9||g<0||g>2?-2:(e.dstate=t,a=o,r=1<<a,s=r-1,d=v+7,h=1<<d,p=h-1,_=Math.floor((d+3-1)/3),l=new Uint8Array(2*r),u=[],f=[],V=1<<v+6,t.pending_buf=new Uint8Array(4*V),i=4*V,Y=Math.floor(V/2),k=3*V,B=n,E=g,vt(e))},t.deflateEnd=function(){return 42!=n&&113!=n&&666!=n?-2:(t.pending_buf=null,f=null,u=null,l=null,t.dstate=null,113==n?-3:0)},t.deflateParams=function(t,e,n){let i=0;return-1==e&&(e=6),e<0||e>9||n<0||n>2?-2:(N[B].func!=N[e].func&&0!==t.total_in&&(i=t.deflate(1)),B!=e&&(B=e,T=N[B].max_lazy,F=N[B].good_length,R=N[B].nice_length,S=N[B].max_chain),E=n,i)},t.deflateSetDictionary=function(t,e,i){let o,a=i,c=0;if(!e||42!=n)return-2;if(a<3)return 0;for(a>r-262&&(a=r-262,c=i-a),l.set(e.subarray(c,c+a),0),x=a,g=a,v=255&l[0],v=(v<<_^255&l[1])&p,o=0;o<=a-3;o++)v=(v<<_^255&l[o+2])&p,u[o&s]=f[v],f[v]=o;return 0},t.deflate=function(c,d){let S,F,R,I,C;if(d>4||d<0)return-2;if(!c.next_out||!c.next_in&&0!==c.avail_in||666==n&&4!=d)return c.msg=G[4],-2;if(0===c.avail_out)return c.msg=G[7],-5;var L;if(e=c,I=o,o=d,42==n&&(F=8+(a-8<<4)<<8,R=(B-1&255)>>1,R>3&&(R=3),F|=R<<6,0!==x&&(F|=32),F+=31-F%31,n=113,J((L=F)>>8&255),J(255&L)),0!==t.pending){if(e.flush_pending(),0===e.avail_out)return o=-1,0}else if(0===e.avail_in&&d<=I&&4!=d)return e.msg=G[7],-5;if(666==n&&0!==e.avail_in)return c.msg=G[7],-5;if(0!==e.avail_in||0!==A||0!=d&&666!=n){switch(C=-1,N[B].func){case 0:C=function(t){let n,o=65535;for(o>i-5&&(o=i-5);;){if(A<=1){if(ut(),0===A&&0==t)return 0;if(0===A)break}if(x+=A,A=0,n=g+o,(0===x||x>=n)&&(A=x-n,x=n,ct(!1),0===e.avail_out))return 0;if(x-g>=r-262&&(ct(!1),0===e.avail_out))return 0}return ct(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(d);break;case 1:C=function(t){let n,i=0;for(;;){if(A<262){if(ut(),A<262&&0==t)return 0;if(0===A)break}if(A>=3&&(v=(v<<_^255&l[x+2])&p,i=65535&f[v],u[x&s]=f[v],f[v]=x),0!==i&&(x-i&65535)<=r-262&&2!=E&&(y=ft(i)),y>=3)if(n=ot(x-w,y-3),A-=y,y<=T&&A>=3){y--;do{x++,v=(v<<_^255&l[x+2])&p,i=65535&f[v],u[x&s]=f[v],f[v]=x}while(0!=--y);x++}else x+=y,y=0,v=255&l[x],v=(v<<_^255&l[x+1])&p;else n=ot(0,255&l[x]),A--,x++;if(n&&(ct(!1),0===e.avail_out))return 0}return ct(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(d);break;case 2:C=function(t){let n,i,o=0;for(;;){if(A<262){if(ut(),A<262&&0==t)return 0;if(0===A)break}if(A>=3&&(v=(v<<_^255&l[x+2])&p,o=65535&f[v],u[x&s]=f[v],f[v]=x),M=y,m=w,y=2,0!==o&&M<T&&(x-o&65535)<=r-262&&(2!=E&&(y=ft(o)),y<=5&&(1==E||3==y&&x-w>4096)&&(y=2)),M>=3&&y<=M){i=x+A-3,n=ot(x-1-m,M-3),A-=M-1,M-=2;do{++x<=i&&(v=(v<<_^255&l[x+2])&p,o=65535&f[v],u[x&s]=f[v],f[v]=x)}while(0!=--M);if(b=0,y=2,x++,n&&(ct(!1),0===e.avail_out))return 0}else if(0!==b){if(n=ot(0,255&l[x-1]),n&&ct(!1),x++,A--,0===e.avail_out)return 0}else b=1,x++,A--}return 0!==b&&(n=ot(0,255&l[x-1]),b=0),ct(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(d)}if(2!=C&&3!=C||(n=666),0==C||2==C)return 0===e.avail_out&&(o=-1),0;if(1==C){if(1==d)tt(2,3),et(256,z.static_ltree),it(),1+Z+10-j<9&&(tt(2,3),et(256,z.static_ltree),it()),Z=7;else if(st(0,0,!1),3==d)for(S=0;S<h;S++)f[S]=0;if(e.flush_pending(),0===e.avail_out)return o=-1,0}}return 4!=d?0:1}}function Y(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}function W(t){const e=new Y,n=(i=t&&t.chunkSize?t.chunkSize:65536)+5*(Math.floor(i/16383)+1);var i;const o=new Uint8Array(n);let r=t?t.level:-1;void 0===r&&(r=-1),e.deflateInit(r),e.next_out=o,this.append=function(t,i){let r,a,s=0,l=0,c=0;const u=[];if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,r=e.deflate(0),0!=r)throw new Error("deflating: "+e.msg);e.next_out_index&&(e.next_out_index==n?u.push(new Uint8Array(o)):u.push(o.slice(0,e.next_out_index))),c+=e.next_out_index,i&&e.next_in_index>0&&e.next_in_index!=s&&(i(e.next_in_index),s=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return u.length>1?(a=new Uint8Array(c),u.forEach((function(t){a.set(t,l),l+=t.length}))):a=u[0]||new Uint8Array(0),a}},this.flush=function(){let t,i,r=0,a=0;const s=[];do{if(e.next_out_index=0,e.avail_out=n,t=e.deflate(4),1!=t&&0!=t)throw new Error("deflating: "+e.msg);n-e.avail_out>0&&s.push(o.slice(0,e.next_out_index)),a+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),i=new Uint8Array(a),s.forEach((function(t){i.set(t,r),r+=t.length})),i}}Y.prototype={deflateInit:function(t,e){const n=this;return n.dstate=new O,e||(e=15),n.dstate.deflateInit(n,t,e)},deflate:function(t){const e=this;return e.dstate?e.dstate.deflate(e,t):-2},deflateEnd:function(){const t=this;if(!t.dstate)return-2;const e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams:function(t,e){const n=this;return n.dstate?n.dstate.deflateParams(n,t,e):-2},deflateSetDictionary:function(t,e){const n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):-2},read_buf:function(t,e,n){const i=this;let o=i.avail_in;return o>n&&(o=n),0===o?0:(i.avail_in-=o,t.set(i.next_in.subarray(i.next_in_index,i.next_in_index+o),e),i.next_in_index+=o,i.total_in+=o,o)},flush_pending:function(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};const Z=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],H=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],j=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function tt(){let t,e,n,i,o,r;function a(t,e,a,s,l,c,u,f,v,h,d){let p,_,g,y,m,b,x,w,A,M,S,T,B,E,F;M=0,m=a;do{n[t[e+M]]++,M++,m--}while(0!==m);if(n[0]==a)return u[0]=-1,f[0]=0,0;for(w=f[0],b=1;b<=15&&0===n[b];b++);for(x=b,w<b&&(w=b),m=15;0!==m&&0===n[m];m--);for(g=m,w>m&&(w=m),f[0]=w,E=1<<b;b<m;b++,E<<=1)if((E-=n[b])<0)return-3;if((E-=n[m])<0)return-3;for(n[m]+=E,r[1]=b=0,M=1,B=2;0!=--m;)r[B]=b+=n[M],B++,M++;m=0,M=0;do{0!==(b=t[e+M])&&(d[r[b]++]=m),M++}while(++m<a);for(a=r[g],r[0]=m=0,M=0,y=-1,T=-w,o[0]=0,S=0,F=0;x<=g;x++)for(p=n[x];0!=p--;){for(;x>T+w;){if(y++,T+=w,F=g-T,F=F>w?w:F,(_=1<<(b=x-T))>p+1&&(_-=p+1,B=x,b<F))for(;++b<F&&!((_<<=1)<=n[++B]);)_-=n[B];if(F=1<<b,h[0]+F>1440)return-3;o[y]=S=h[0],h[0]+=F,0!==y?(r[y]=m,i[0]=b,i[1]=w,b=m>>>T-w,i[2]=S-o[y-1]-b,v.set(i,3*(o[y-1]+b))):u[0]=S}for(i[1]=x-T,M>=a?i[0]=192:d[M]<s?(i[0]=d[M]<256?0:96,i[2]=d[M++]):(i[0]=c[d[M]-s]+16+64,i[2]=l[d[M++]-s]),_=1<<x-T,b=m>>>T;b<F;b+=_)v.set(i,3*(S+b));for(b=1<<x-1;0!=(m&b);b>>>=1)m^=b;for(m^=b,A=(1<<T)-1;(m&A)!=r[y];)y--,T-=w,A=(1<<T)-1}return 0!==E&&1!=g?-5:0}function s(a){let s;for(t||(t=[],e=[],n=new Int32Array(16),i=[],o=new Int32Array(15),r=new Int32Array(16)),e.length<a&&(e=[]),s=0;s<a;s++)e[s]=0;for(s=0;s<16;s++)n[s]=0;for(s=0;s<3;s++)i[s]=0;o.set(n.subarray(0,15),0),r.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(n,i,o,r,l){let c;return s(19),t[0]=0,c=a(n,0,19,19,null,null,o,i,r,t,e),-3==c?l.msg="oversubscribed dynamic bit lengths tree":-5!=c&&0!==i[0]||(l.msg="incomplete dynamic bit lengths tree",c=-3),c},this.inflate_trees_dynamic=function(n,i,o,r,l,c,u,f,v){let h;return s(288),t[0]=0,h=a(o,0,n,257,Q,K,c,r,f,t,e),0!=h||0===r[0]?(-3==h?v.msg="oversubscribed literal/length tree":-4!=h&&(v.msg="incomplete literal/length tree",h=-3),h):(s(288),h=a(o,n,i,0,J,$,u,l,f,t,e),0!=h||0===l[0]&&n>257?(-3==h?v.msg="oversubscribed distance tree":-5==h?(v.msg="incomplete distance tree",h=-3):-4!=h&&(v.msg="empty distance tree with lengths",h=-3),h):0)}}function et(){const t=this;let e,n,i,o,r=0,a=0,s=0,l=0,c=0,u=0,f=0,v=0,h=0,d=0;function p(t,e,n,i,o,r,a,s){let l,c,u,f,v,h,d,p,_,g,y,m,b,x,w,A;d=s.next_in_index,p=s.avail_in,v=a.bitb,h=a.bitk,_=a.write,g=_<a.read?a.read-_-1:a.end-_,y=Z[t],m=Z[e];do{for(;h<20;)p--,v|=(255&s.read_byte(d++))<<h,h+=8;if(l=v&y,c=n,u=i,A=3*(u+l),0!==(f=c[A]))for(;;){if(v>>=c[A+1],h-=c[A+1],0!=(16&f)){for(f&=15,b=c[A+2]+(v&Z[f]),v>>=f,h-=f;h<15;)p--,v|=(255&s.read_byte(d++))<<h,h+=8;for(l=v&m,c=o,u=r,A=3*(u+l),f=c[A];;){if(v>>=c[A+1],h-=c[A+1],0!=(16&f)){for(f&=15;h<f;)p--,v|=(255&s.read_byte(d++))<<h,h+=8;if(x=c[A+2]+(v&Z[f]),v>>=f,h-=f,g-=b,_>=x)w=_-x,_-w>0&&2>_-w?(a.window[_++]=a.window[w++],a.window[_++]=a.window[w++],b-=2):(a.window.set(a.window.subarray(w,w+2),_),_+=2,w+=2,b-=2);else{w=_-x;do{w+=a.end}while(w<0);if(f=a.end-w,b>f){if(b-=f,_-w>0&&f>_-w)do{a.window[_++]=a.window[w++]}while(0!=--f);else a.window.set(a.window.subarray(w,w+f),_),_+=f,w+=f,f=0;w=0}}if(_-w>0&&b>_-w)do{a.window[_++]=a.window[w++]}while(0!=--b);else a.window.set(a.window.subarray(w,w+b),_),_+=b,w+=b,b=0;break}if(0!=(64&f))return s.msg="invalid distance code",b=s.avail_in-p,b=h>>3<b?h>>3:b,p+=b,d-=b,h-=b<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=_,-3;l+=c[A+2],l+=v&Z[f],A=3*(u+l),f=c[A]}break}if(0!=(64&f))return 0!=(32&f)?(b=s.avail_in-p,b=h>>3<b?h>>3:b,p+=b,d-=b,h-=b<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=_,1):(s.msg="invalid literal/length code",b=s.avail_in-p,b=h>>3<b?h>>3:b,p+=b,d-=b,h-=b<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=_,-3);if(l+=c[A+2],l+=v&Z[f],A=3*(u+l),0===(f=c[A])){v>>=c[A+1],h-=c[A+1],a.window[_++]=c[A+2],g--;break}}else v>>=c[A+1],h-=c[A+1],a.window[_++]=c[A+2],g--}while(g>=258&&p>=10);return b=s.avail_in-p,b=h>>3<b?h>>3:b,p+=b,d-=b,h-=b<<3,a.bitb=v,a.bitk=h,s.avail_in=p,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=_,0}t.init=function(t,r,a,s,l,c){e=0,f=t,v=r,i=a,h=s,o=l,d=c,n=null},t.proc=function(t,_,g){let y,m,b,x,w,A,M,S=0,T=0,B=0;for(B=_.next_in_index,x=_.avail_in,S=t.bitb,T=t.bitk,w=t.write,A=w<t.read?t.read-w-1:t.end-w;;)switch(e){case 0:if(A>=258&&x>=10&&(t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,g=p(f,v,i,h,o,d,t,_),B=_.next_in_index,x=_.avail_in,S=t.bitb,T=t.bitk,w=t.write,A=w<t.read?t.read-w-1:t.end-w,0!=g)){e=1==g?7:9;break}s=f,n=i,a=h,e=1;case 1:for(y=s;T<y;){if(0===x)return t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);g=0,x--,S|=(255&_.read_byte(B++))<<T,T+=8}if(m=3*(a+(S&Z[y])),S>>>=n[m+1],T-=n[m+1],b=n[m],0===b){l=n[m+2],e=6;break}if(0!=(16&b)){c=15&b,r=n[m+2],e=2;break}if(0==(64&b)){s=b,a=m/3+n[m+2];break}if(0!=(32&b)){e=7;break}return e=9,_.msg="invalid literal/length code",g=-3,t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);case 2:for(y=c;T<y;){if(0===x)return t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);g=0,x--,S|=(255&_.read_byte(B++))<<T,T+=8}r+=S&Z[y],S>>=y,T-=y,s=v,n=o,a=d,e=3;case 3:for(y=s;T<y;){if(0===x)return t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);g=0,x--,S|=(255&_.read_byte(B++))<<T,T+=8}if(m=3*(a+(S&Z[y])),S>>=n[m+1],T-=n[m+1],b=n[m],0!=(16&b)){c=15&b,u=n[m+2],e=4;break}if(0==(64&b)){s=b,a=m/3+n[m+2];break}return e=9,_.msg="invalid distance code",g=-3,t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);case 4:for(y=c;T<y;){if(0===x)return t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);g=0,x--,S|=(255&_.read_byte(B++))<<T,T+=8}u+=S&Z[y],S>>=y,T-=y,e=5;case 5:for(M=w-u;M<0;)M+=t.end;for(;0!==r;){if(0===A&&(w==t.end&&0!==t.read&&(w=0,A=w<t.read?t.read-w-1:t.end-w),0===A&&(t.write=w,g=t.inflate_flush(_,g),w=t.write,A=w<t.read?t.read-w-1:t.end-w,w==t.end&&0!==t.read&&(w=0,A=w<t.read?t.read-w-1:t.end-w),0===A)))return t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);t.window[w++]=t.window[M++],A--,M==t.end&&(M=0),r--}e=0;break;case 6:if(0===A&&(w==t.end&&0!==t.read&&(w=0,A=w<t.read?t.read-w-1:t.end-w),0===A&&(t.write=w,g=t.inflate_flush(_,g),w=t.write,A=w<t.read?t.read-w-1:t.end-w,w==t.end&&0!==t.read&&(w=0,A=w<t.read?t.read-w-1:t.end-w),0===A)))return t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);g=0,t.window[w++]=l,A--,e=0;break;case 7:if(T>7&&(T-=8,x++,B--),t.write=w,g=t.inflate_flush(_,g),w=t.write,A=w<t.read?t.read-w-1:t.end-w,t.read!=t.write)return t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);e=8;case 8:return g=1,t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);case 9:return g=-3,t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g);default:return g=-2,t.bitb=S,t.bitk=T,_.avail_in=x,_.total_in+=B-_.next_in_index,_.next_in_index=B,t.write=w,t.inflate_flush(_,g)}},t.free=function(){}}tt.inflate_trees_fixed=function(t,e,n,i){return t[0]=9,e[0]=5,n[0]=H,i[0]=j,0};const nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function it(t,e){const n=this;let i,o=0,r=0,a=0,s=0;const l=[0],c=[0],u=new et;let f=0,v=new Int32Array(4320);const h=new tt;n.bitk=0,n.bitb=0,n.window=new Uint8Array(e),n.end=e,n.read=0,n.write=0,n.reset=function(t,e){e&&(e[0]=0),6==o&&u.free(t),o=0,n.bitk=0,n.bitb=0,n.read=n.write=0},n.reset(t,null),n.inflate_flush=function(t,e){let i,o,r;return o=t.next_out_index,r=n.read,i=(r<=n.write?n.write:n.end)-r,i>t.avail_out&&(i=t.avail_out),0!==i&&-5==e&&(e=0),t.avail_out-=i,t.total_out+=i,t.next_out.set(n.window.subarray(r,r+i),o),o+=i,r+=i,r==n.end&&(r=0,n.write==n.end&&(n.write=0),i=n.write-r,i>t.avail_out&&(i=t.avail_out),0!==i&&-5==e&&(e=0),t.avail_out-=i,t.total_out+=i,t.next_out.set(n.window.subarray(r,r+i),o),o+=i,r+=i),t.next_out_index=o,n.read=r,e},n.proc=function(t,e){let d,p,_,g,y,m,b,x;for(g=t.next_in_index,y=t.avail_in,p=n.bitb,_=n.bitk,m=n.write,b=m<n.read?n.read-m-1:n.end-m;;){let w,A,M,S,T,B,E,F;switch(o){case 0:for(;_<3;){if(0===y)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);e=0,y--,p|=(255&t.read_byte(g++))<<_,_+=8}switch(d=7&p,f=1&d,d>>>1){case 0:p>>>=3,_-=3,d=7&_,p>>>=d,_-=d,o=1;break;case 1:w=[],A=[],M=[[]],S=[[]],tt.inflate_trees_fixed(w,A,M,S),u.init(w[0],A[0],M[0],0,S[0],0),p>>>=3,_-=3,o=6;break;case 2:p>>>=3,_-=3,o=3;break;case 3:return p>>>=3,_-=3,o=9,t.msg="invalid block type",e=-3,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e)}break;case 1:for(;_<32;){if(0===y)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);e=0,y--,p|=(255&t.read_byte(g++))<<_,_+=8}if((~p>>>16&65535)!=(65535&p))return o=9,t.msg="invalid stored block lengths",e=-3,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);r=65535&p,p=_=0,o=0!==r?2:0!==f?7:0;break;case 2:if(0===y)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);if(0===b&&(m==n.end&&0!==n.read&&(m=0,b=m<n.read?n.read-m-1:n.end-m),0===b&&(n.write=m,e=n.inflate_flush(t,e),m=n.write,b=m<n.read?n.read-m-1:n.end-m,m==n.end&&0!==n.read&&(m=0,b=m<n.read?n.read-m-1:n.end-m),0===b)))return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);if(e=0,d=r,d>y&&(d=y),d>b&&(d=b),n.window.set(t.read_buf(g,d),m),g+=d,y-=d,m+=d,b-=d,0!=(r-=d))break;o=0!==f?7:0;break;case 3:for(;_<14;){if(0===y)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);e=0,y--,p|=(255&t.read_byte(g++))<<_,_+=8}if(a=d=16383&p,(31&d)>29||(d>>5&31)>29)return o=9,t.msg="too many length or distance symbols",e=-3,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);if(d=258+(31&d)+(d>>5&31),!i||i.length<d)i=[];else for(x=0;x<d;x++)i[x]=0;p>>>=14,_-=14,s=0,o=4;case 4:for(;s<4+(a>>>10);){for(;_<3;){if(0===y)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);e=0,y--,p|=(255&t.read_byte(g++))<<_,_+=8}i[nt[s++]]=7&p,p>>>=3,_-=3}for(;s<19;)i[nt[s++]]=0;if(l[0]=7,d=h.inflate_trees_bits(i,l,c,v,t),0!=d)return-3==(e=d)&&(i=null,o=9),n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);s=0,o=5;case 5:for(;d=a,!(s>=258+(31&d)+(d>>5&31));){let r,u;for(d=l[0];_<d;){if(0===y)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);e=0,y--,p|=(255&t.read_byte(g++))<<_,_+=8}if(d=v[3*(c[0]+(p&Z[d]))+1],u=v[3*(c[0]+(p&Z[d]))+2],u<16)p>>>=d,_-=d,i[s++]=u;else{for(x=18==u?7:u-14,r=18==u?11:3;_<d+x;){if(0===y)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);e=0,y--,p|=(255&t.read_byte(g++))<<_,_+=8}if(p>>>=d,_-=d,r+=p&Z[x],p>>>=x,_-=x,x=s,d=a,x+r>258+(31&d)+(d>>5&31)||16==u&&x<1)return i=null,o=9,t.msg="invalid bit length repeat",e=-3,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);u=16==u?i[x-1]:0;do{i[x++]=u}while(0!=--r);s=x}}if(c[0]=-1,T=[],B=[],E=[],F=[],T[0]=9,B[0]=6,d=a,d=h.inflate_trees_dynamic(257+(31&d),1+(d>>5&31),i,T,B,E,F,v,t),0!=d)return-3==d&&(i=null,o=9),e=d,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);u.init(T[0],B[0],v,E[0],v,F[0]),o=6;case 6:if(n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,1!=(e=u.proc(n,t,e)))return n.inflate_flush(t,e);if(e=0,u.free(t),g=t.next_in_index,y=t.avail_in,p=n.bitb,_=n.bitk,m=n.write,b=m<n.read?n.read-m-1:n.end-m,0===f){o=0;break}o=7;case 7:if(n.write=m,e=n.inflate_flush(t,e),m=n.write,b=m<n.read?n.read-m-1:n.end-m,n.read!=n.write)return n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);o=8;case 8:return e=1,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);case 9:return e=-3,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e);default:return e=-2,n.bitb=p,n.bitk=_,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=m,n.inflate_flush(t,e)}}},n.free=function(t){n.reset(t,null),n.window=null,v=null},n.set_dictionary=function(t,e,i){n.window.set(t.subarray(e,e+i),0),n.read=n.write=i},n.sync_point=function(){return 1==o?1:0}}const ot=[0,0,255,255];function rt(){const t=this;function e(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=7,t.istate.blocks.reset(t,null),0):-2}t.mode=0,t.method=0,t.was=[0],t.need=0,t.marker=0,t.wbits=0,t.inflateEnd=function(e){return t.blocks&&t.blocks.free(e),t.blocks=null,0},t.inflateInit=function(n,i){return n.msg=null,t.blocks=null,i<8||i>15?(t.inflateEnd(n),-2):(t.wbits=i,n.istate.blocks=new it(n,1<<i),e(n),0)},t.inflate=function(t,e){let n,i;if(!t||!t.istate||!t.next_in)return-2;const o=t.istate;for(e=4==e?-5:0,n=-5;;)switch(o.mode){case 0:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,8!=(15&(o.method=t.read_byte(t.next_in_index++)))){o.mode=13,t.msg="unknown compression method",o.marker=5;break}if(8+(o.method>>4)>o.wbits){o.mode=13,t.msg="invalid window size",o.marker=5;break}o.mode=1;case 1:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,i=255&t.read_byte(t.next_in_index++),((o.method<<8)+i)%31!=0){o.mode=13,t.msg="incorrect header check",o.marker=5;break}if(0==(32&i)){o.mode=7;break}o.mode=2;case 2:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,o.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,o.mode=3;case 3:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,o.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,o.mode=4;case 4:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,o.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,o.mode=5;case 5:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,o.need+=255&t.read_byte(t.next_in_index++),o.mode=6,2);case 6:return o.mode=13,t.msg="need dictionary",o.marker=0,-2;case 7:if(n=o.blocks.proc(t,n),-3==n){o.mode=13,o.marker=0;break}if(0==n&&(n=e),1!=n)return n;n=e,o.blocks.reset(t,o.was),o.mode=12;case 12:return 1;case 13:return-3;default:return-2}},t.inflateSetDictionary=function(t,e,n){let i=0,o=n;if(!t||!t.istate||6!=t.istate.mode)return-2;const r=t.istate;return o>=1<<r.wbits&&(o=(1<<r.wbits)-1,i=n-o),r.blocks.set_dictionary(e,i,o),r.mode=7,0},t.inflateSync=function(t){let n,i,o,r,a;if(!t||!t.istate)return-2;const s=t.istate;if(13!=s.mode&&(s.mode=13,s.marker=0),0===(n=t.avail_in))return-5;for(i=t.next_in_index,o=s.marker;0!==n&&o<4;)t.read_byte(i)==ot[o]?o++:o=0!==t.read_byte(i)?0:4-o,i++,n--;return t.total_in+=i-t.next_in_index,t.next_in_index=i,t.avail_in=n,s.marker=o,4!=o?-3:(r=t.total_in,a=t.total_out,e(t),t.total_in=r,t.total_out=a,s.mode=7,0)},t.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():-2}}function at(){}function st(t){const e=new at,n=t&&t.chunkSize?Math.floor(2*t.chunkSize):131072,i=new Uint8Array(n);let o=!1;e.inflateInit(),e.next_out=i,this.append=function(t,r){const a=[];let s,l,c=0,u=0,f=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||o||(e.next_in_index=0,o=!0),s=e.inflate(0),o&&-5===s){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==s&&1!==s)throw new Error("inflating: "+e.msg);if((o||1===s)&&e.avail_in===t.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===n?a.push(new Uint8Array(i)):a.push(i.slice(0,e.next_out_index))),f+=e.next_out_index,r&&e.next_in_index>0&&e.next_in_index!=c&&(r(e.next_in_index),c=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return a.length>1?(l=new Uint8Array(f),a.forEach((function(t){l.set(t,u),u+=t.length}))):l=a[0]||new Uint8Array(0),l}},this.flush=function(){e.inflateEnd()}}at.prototype={inflateInit:function(t){const e=this;return e.istate=new rt,t||(t=15),e.istate.inflateInit(e,t)},inflate:function(t){const e=this;return e.istate?e.istate.inflate(e,t):-2},inflateEnd:function(){const t=this;if(!t.istate)return-2;const e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync:function(){const t=this;return t.istate?t.istate.inflateSync(t):-2},inflateSetDictionary:function(t,e){const n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):-2},read_byte:function(t){return this.next_in[t]},read_buf:function(t,e){return this.next_in.subarray(t,t+e)}},self.initCodec=()=>{self.Deflate=W,self.Inflate=st}}).toString(),e=URL.createObjectURL(new Blob(["("+t+")()"],{type:"text/javascript"}));k({workerScripts:{inflate:[e],deflate:[e]}})}})(),k({Deflate:function(t){const e=new d,n=(i=t&&t.chunkSize?t.chunkSize:65536)+5*(Math.floor(i/16383)+1);var i;const o=new Uint8Array(n);let r=t?t.level:-1;void 0===r&&(r=-1),e.deflateInit(r),e.next_out=o,this.append=function(t,i){let r,a,s=0,l=0,c=0;const u=[];if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,r=e.deflate(0),0!=r)throw new Error("deflating: "+e.msg);e.next_out_index&&(e.next_out_index==n?u.push(new Uint8Array(o)):u.push(o.slice(0,e.next_out_index))),c+=e.next_out_index,i&&e.next_in_index>0&&e.next_in_index!=s&&(i(e.next_in_index),s=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return u.length>1?(a=new Uint8Array(c),u.forEach((function(t){a.set(t,l),l+=t.length}))):a=u[0]||new Uint8Array(0),a}},this.flush=function(){let t,i,r=0,a=0;const s=[];do{if(e.next_out_index=0,e.avail_out=n,t=e.deflate(4),1!=t&&0!=t)throw new Error("deflating: "+e.msg);n-e.avail_out>0&&s.push(o.slice(0,e.next_out_index)),a+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),i=new Uint8Array(a),s.forEach((function(t){i.set(t,r),r+=t.length})),i}},Inflate:function(t){const e=new L,n=t&&t.chunkSize?Math.floor(2*t.chunkSize):131072,i=new Uint8Array(n);let o=!1;e.inflateInit(),e.next_out=i,this.append=function(t,r){const a=[];let s,l,c=0,u=0,f=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||o||(e.next_in_index=0,o=!0),s=e.inflate(0),o&&s===g){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==s&&1!==s)throw new Error("inflating: "+e.msg);if((o||1===s)&&e.avail_in===t.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===n?a.push(new Uint8Array(i)):a.push(i.slice(0,e.next_out_index))),f+=e.next_out_index,r&&e.next_in_index>0&&e.next_in_index!=c&&(r(e.next_in_index),c=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return a.length>1?(l=new Uint8Array(f),a.forEach((function(t){l.set(t,u),u+=t.length}))):l=a[0]||new Uint8Array(0),l}},this.flush=function(){e.inflateEnd()}}}),t.BlobReader=Kt,t.BlobWriter=Jt,t.Data64URIReader=class extends jt{constructor(t){super(),this.dataURI=t;let e=t.length;for(;"="==t.charAt(e-1);)e--;this.dataStart=t.indexOf(",")+1,this.size=Math.floor(.75*(e-this.dataStart))}async readUint8Array(t,e){const n=new Uint8Array(e),i=4*Math.floor(t/3),o=atob(this.dataURI.substring(i+this.dataStart,4*Math.ceil((t+e)/3)+this.dataStart)),r=t-3*Math.floor(i/4);for(let t=r;t<r+e;t++)n[t-r]=o.charCodeAt(t);return n}},t.Data64URIWriter=class extends Qt{constructor(t){super(),this.data="data:"+(t||"")+";base64,",this.pending=[]}async writeUint8Array(t){super.writeUint8Array(t);let e=0,n=this.pending;const i=this.pending.length;for(this.pending="",e=0;e<3*Math.floor((i+t.length)/3)-i;e++)n+=String.fromCharCode(t[e]);for(;e<t.length;e++)this.pending+=String.fromCharCode(t[e]);n.length>2?this.data+=btoa(n):this.pending=n}getData(){return this.data+btoa(this.pending)}},t.ERR_ABORT=Xt,t.ERR_BAD_FORMAT=we,t.ERR_CENTRAL_DIRECTORY_NOT_FOUND=Te,t.ERR_DUPLICATED_NAME=He,t.ERR_ENCRYPTED=Fe,t.ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND=Se,t.ERR_EOCDR_NOT_FOUND=Ae,t.ERR_EOCDR_ZIP64_NOT_FOUND=Me,t.ERR_EXTRAFIELD_ZIP64_NOT_FOUND=Ee,t.ERR_HTTP_RANGE=Nt,t.ERR_INVALID_COMMENT=je,t.ERR_INVALID_ENCRYPTION_STRENGTH=$e,t.ERR_INVALID_ENTRY_COMMENT=Qe,t.ERR_INVALID_ENTRY_NAME=Ke,t.ERR_INVALID_EXTRAFIELD_DATA=en,t.ERR_INVALID_EXTRAFIELD_TYPE=tn,t.ERR_INVALID_PASSWORD=Z,t.ERR_INVALID_SIGNATURE=St,t.ERR_INVALID_VERSION=Je,t.ERR_LOCAL_FILE_HEADER_NOT_FOUND=Be,t.ERR_UNSUPPORTED_COMPRESSION=Ie,t.ERR_UNSUPPORTED_ENCRYPTION=Re,t.ERR_UNSUPPORTED_FORMAT=nn,t.HttpRangeReader=class extends re{constructor(t,e={}){e.useRangeHeader=!0,super(t,e)}},t.HttpReader=re,t.Reader=jt,t.TextReader=class extends jt{constructor(t){super(),this.blobReader=new Kt(new Blob([t],{type:Gt}))}async init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}async readUint8Array(t,e){return this.blobReader.readUint8Array(t,e)}},t.TextWriter=class extends Qt{constructor(t){super(),this.encoding=t,this.blob=new Blob([],{type:Gt})}async writeUint8Array(t){super.writeUint8Array(t),this.blob=new Blob([this.blob,t.buffer],{type:Gt})}getData(){const t=new FileReader;return new Promise(((e,n)=>{t.onload=t=>e(t.target.result),t.onerror=()=>n(t.error),t.readAsText(this.blob,this.encoding)}))}},t.Uint8ArrayReader=class extends jt{constructor(t){super(),this.array=t,this.size=t.length}async readUint8Array(t,e){return this.array.slice(t,t+e)}},t.Uint8ArrayWriter=class extends Qt{constructor(){super(),this.array=new Uint8Array(0)}async writeUint8Array(t){super.writeUint8Array(t);const e=this.array;this.array=new Uint8Array(e.length+t.length),this.array.set(e),this.array.set(t,e.length)}getData(){return this.array}},t.Writer=Qt,t.ZipReader=class{constructor(t,e={}){Object.assign(this,{reader:t,options:e,config:X()})}async getEntries(t={}){const e=this,n=e.reader;if(n.initialized||await n.init(),n.size<22)throw new Error(we);const i=await async function(t,e,n,i,o){const r=new Uint8Array(4);!function(t,e,n){t.setUint32(0,101010256,!0)}(We(r));const a=i+1048560;return await s(i)||await s(Math.min(a,n));async function s(e){const o=n-e,a=await Ze(t,o,e);for(let t=a.length-i;t>=0;t--)if(a[t]==r[0]&&a[t+1]==r[1]&&a[t+2]==r[2]&&a[t+3]==r[3])return{offset:o+t,buffer:a.slice(t,t+i).buffer}}}(n,0,n.size,22);if(!i)throw new Error(Ae);const o=We(i);let r=Oe(o,12),a=Oe(o,16),s=qe(o,8),l=0;if(a==se||s==le){const t=We(await Ze(n,i.offset-20,20));if(Oe(t,0)!=he)throw new Error(Me);a=Ye(t,8);let e=await Ze(n,a,56),o=We(e);const c=i.offset-20-56;if(Oe(o,0)!=ve&&a!=c){const t=a;a=c,l=a-t,e=await Ze(n,a,56),o=We(e)}if(Oe(o,0)!=ve)throw new Error(Se);s=Ye(o,24),r=Oe(t,4),a-=Ye(o,40)}if(a<0||a>=n.size)throw new Error(we);let c=0,u=await Ze(n,a,n.size-a),f=We(u);const v=i.offset-r;if(Oe(f,c)!=ue&&a!=v){const t=a;a=v,l=a-t,u=await Ze(n,a,n.size-a),f=We(u)}if(a<0||a>=n.size)throw new Error(we);const h=[];for(let i=0;i<s;i++){const o=new Pe(n,e.config,e.options);if(Oe(f,c)!=ue)throw new Error(Te);De(o,f,c+6);const r=Boolean(o.bitFlag.languageEncodingFlag),a=c+46,v=a+o.filenameLength,d=v+o.extraFieldLength,p=qe(f,c+4),_=0==(0&p);Object.assign(o,{versionMadeBy:p,msDosCompatible:_,compressedSize:0,uncompressedSize:0,commentLength:qe(f,c+32),directory:_&&16==(16&Ge(f,c+38)),offset:Oe(f,c+42)+l,internalFileAttribute:Oe(f,c+34),externalFileAttribute:Oe(f,c+38),rawFilename:u.subarray(a,v),filenameUTF8:r,commentUTF8:r,rawExtraField:u.subarray(v,d)});const g=d+o.commentLength;o.rawComment=u.subarray(d,g),o.filename=ze(o.rawFilename,o.filenameUTF8?Ce:Ue(e,t,"filenameEncoding")),o.comment=ze(o.rawComment,o.commentUTF8?Ce:Ue(e,t,"commentEncoding")),!o.directory&&o.filename.endsWith(_e)&&(o.directory=!0),Xe(o,o,f,c+6);const y=new xe(o);if(y.getData=(t,e)=>o.getData(t,y,e),h.push(y),c=g,t.onprogress)try{t.onprogress(i+1,s,new xe(o))}catch(t){}}return h}async close(){}},t.ZipWriter=class{constructor(t,e={}){Object.assign(this,{writer:t,options:e,config:X(),files:new Map,offset:t.size,pendingCompressedSize:0,pendingEntries:[]})}async add(t="",e,n={}){const i=this;if(!(rn<i.config.maxWorkers))return new Promise(((o,r)=>i.pendingEntries.push({name:t,reader:e,options:n,resolve:o,reject:r})));rn++;try{return await async function(t,e,n,i){if(e=e.trim(),i.directory&&!e.endsWith(_e)?e+=_e:i.directory=e.endsWith(_e),t.files.has(e))throw new Error(He);const o=(new TextEncoder).encode(e);if(o.length>le)throw new Error(Ke);const r=i.comment||"",a=(new TextEncoder).encode(r);if(a.length>le)throw new Error(Qe);const s=t.options.version||i.version||0;if(s>le)throw new Error(Je);const l=t.options.versionMadeBy||i.versionMadeBy||20;if(l>le)throw new Error(Je);const c=ln(t,i,"lastModDate")||new Date,u=ln(t,i,"lastAccessDate"),f=ln(t,i,"creationDate"),v=ln(t,i,"password"),h=ln(t,i,"encryptionStrength")||3,d=ln(t,i,"zipCrypto");if(void 0!==v&&void 0!==h&&(h<1||h>3))throw new Error($e);let p=new Uint8Array(0);const _=i.extraField;if(_){let t=0,e=0;_.forEach((e=>t+=4+e.length)),p=new Uint8Array(t),_.forEach(((t,n)=>{if(n>le)throw new Error(tn);if(t.length>le)throw new Error(en);hn(p,new Uint16Array([n]),e),hn(p,new Uint16Array([t.length]),e+2),hn(p,t,e+4),e+=4+t.length}))}let g=ln(t,i,"extendedTimestamp");void 0===g&&(g=!0);let y=0,m=ln(t,i,"keepOrder");void 0===m&&(m=!0);let b=0,x=ln(t,i,"msDosCompatible");void 0===x&&(x=!0);const w=ln(t,i,"internalFileAttribute")||0,A=ln(t,i,"externalFileAttribute")||0;n&&(n.initialized||await n.init(),b=n.size,y=function(t){return t+5*(Math.floor(t/16383)+1)}(b));let M=i.zip64||t.options.zip64||!1;if(t.offset+t.pendingCompressedSize>=se||b>=se||y>=se){if(!1===i.zip64||!1===t.options.zip64||!m)throw new Error(nn);M=!0}t.pendingCompressedSize+=y,await Promise.resolve();const S=ln(t,i,"level"),T=ln(t,i,"useWebWorkers"),B=ln(t,i,"bufferedWrite");let E=ln(t,i,"dataDescriptor");const F=ln(t,i,"signal");void 0===E&&(E=!0);const R=await async function(t,e,n,i){const o=t.files,r=t.writer,a=Array.from(o.values()).pop();let s,l,c,u={};o.set(e,u);try{let f,v,h;if(i.keepOrder&&(f=a&&a.lock),u.lock=h=new Promise((t=>c=t)),i.bufferedWrite||t.lockWrite||!i.dataDescriptor?(v=new Jt,v.init(),s=!0):(t.lockWrite=new Promise((t=>l=t)),r.initialized||await r.init(),v=r),u=await async function(t,e,n,i){const{rawFilename:o,lastAccessDate:r,creationDate:a,password:s,level:l,zip64:c,zipCrypto:u,dataDescriptor:f,directory:v,version:h,versionMadeBy:d,rawComment:p,rawExtraField:_,useWebWorkers:g,onprogress:y,signal:m,encryptionStrength:b,extendedTimestamp:x,msDosCompatible:w,internalFileAttribute:A,externalFileAttribute:M}=i,S=Boolean(s&&s.length),T=0!==l&&!v;let B,E,F;if(S&&!u){B=new Uint8Array(on.length+2);const t=dn(B);un(t,0,39169),hn(B,on,2),cn(t,8,b)}else B=new Uint8Array(0);if(x){F=new Uint8Array(9+(r?4:0)+(a?4:0));const e=dn(F);un(e,0,de),un(e,2,F.length-4),cn(e,4,1+(r?2:0)+(a?4:0)),fn(e,5,Math.floor(i.lastModDate.getTime()/1e3)),r&&fn(e,9,Math.floor(r.getTime()/1e3)),a&&fn(e,13,Math.floor(a.getTime()/1e3));try{E=new Uint8Array(36);const t=dn(E),e=sn(i.lastModDate);un(t,0,10),un(t,2,32),un(t,8,1),un(t,10,24),vn(t,12,e),vn(t,20,sn(r)||e),vn(t,28,sn(a)||e)}catch(t){E=new Uint8Array(0)}}else E=F=new Uint8Array(0);const R={version:h||20,versionMadeBy:d,zip64:c,directory:Boolean(v),filenameUTF8:!0,rawFilename:o,commentUTF8:!0,rawComment:p,rawExtraFieldZip64:c?new Uint8Array(28):new Uint8Array(0),rawExtraFieldExtendedTimestamp:F,rawExtraFieldNTFS:E,rawExtraFieldAES:B,rawExtraField:_,extendedTimestamp:x,msDosCompatible:w,internalFileAttribute:A,externalFileAttribute:M};let I=R.uncompressedSize=0,C=pe;f&&(C|=8);let L=0;T&&(L=8),c&&(R.version=R.version>45?R.version:45),S&&(C|=1,u||(R.version=R.version>51?R.version:51,L=99,T&&(R.rawExtraFieldAES[9]=8))),R.compressionMethod=L;const P=R.headerArray=new Uint8Array(26),D=dn(P);un(D,0,R.version),un(D,2,C),un(D,4,L);const X=new Uint32Array(1),k=dn(X);let U;U=i.lastModDate<ye?ye:i.lastModDate>ge?ge:i.lastModDate,un(k,0,(U.getHours()<<6|U.getMinutes())<<5|U.getSeconds()/2),un(k,2,(U.getFullYear()-1980<<4|U.getMonth()+1)<<5|U.getDate());const z=X[0];fn(D,6,z),un(D,22,o.length);const V=B.length+F.length+E.length+R.rawExtraField.length;un(D,24,V);const N=new Uint8Array(30+o.length+V);let G;fn(dn(N),0,ce),hn(N,P,4),hn(N,o,30),hn(N,B,30+o.length),hn(N,F,30+o.length+B.length),hn(N,E,30+o.length+B.length+F.length),hn(N,R.rawExtraField,30+o.length+B.length+F.length+E.length);let q=0;if(t){I=R.uncompressedSize=t.size;const i=await Pt(n.Deflate,{codecType:At,level:l,password:s,encryptionStrength:b,zipCrypto:S&&u,passwordVerification:S&&u&&z>>8&255,signed:!0,compressed:T,encrypted:S,useWebWorkers:g},n);await e.writeUint8Array(N),R.dataWritten=!0,G=await kt(i,t,e,0,I,n,{onprogress:y,signal:m}),q=G.length}else await e.writeUint8Array(N),R.dataWritten=!0;let O,Y=new Uint8Array(0);if(f&&(Y=new Uint8Array(c?24:16),O=dn(Y),fn(O,0,134695760)),t){const t=G.signature;if(S&&!u||void 0===t||(fn(D,10,t),R.signature=t,f&&fn(O,4,t)),c){const t=dn(R.rawExtraFieldZip64);un(t,0,1),un(t,2,24),fn(D,14,se),vn(t,12,BigInt(q)),fn(D,18,se),vn(t,4,BigInt(I)),f&&(vn(O,8,BigInt(q)),vn(O,16,BigInt(I)))}else fn(D,14,q),fn(D,18,I),f&&(fn(O,8,q),fn(O,12,I))}f&&await e.writeUint8Array(Y);const W=N.length+q+Y.length;return Object.assign(R,{compressedSize:q,lastModDate:U,rawLastModDate:z,creationDate:a,lastAccessDate:r,encrypted:S,length:W}),R}(n,v,t.config,i),u.lock=h,o.set(e,u),u.filename=e,s){let e=0;const n=v.getData();let a;await Promise.all([t.lockWrite,f]);do{a=Array.from(o.values()).find((t=>t.writingBufferedData)),a&&await a.lock}while(a&&a.lock);if(u.writingBufferedData=!0,!i.dataDescriptor){const t=26,o=await an(n,0,t),a=new DataView(o);u.encrypted&&!i.zipCrypto||fn(a,14,u.signature),u.zip64?(fn(a,18,se),fn(a,22,se)):(fn(a,18,u.compressedSize),fn(a,22,u.uncompressedSize)),await r.writeUint8Array(new Uint8Array(o)),e=t}await async function(t,e,n=0){const i=536870912;await async function o(){if(n<e.size){const r=await an(e,n,n+i);await t.writeUint8Array(new Uint8Array(r)),n+=i,await o()}}()}(r,n,e),delete u.writingBufferedData}if(u.offset=t.offset,u.zip64)vn(dn(u.rawExtraFieldZip64),20,BigInt(u.offset));else if(u.offset>=se)throw new Error(nn);return t.offset+=u.length,u}catch(n){throw(s&&u.writingBufferedData||!s&&u.dataWritten)&&(n.corruptedEntry=t.hasCorruptedEntries=!0,u.uncompressedSize&&(t.offset+=u.uncompressedSize)),o.delete(e),n}finally{c(),l&&l()}}(t,e,n,Object.assign({},i,{rawFilename:o,rawComment:a,version:s,versionMadeBy:l,lastModDate:c,lastAccessDate:u,creationDate:f,rawExtraField:p,zip64:M,password:v,level:S,useWebWorkers:T,encryptionStrength:h,extendedTimestamp:g,zipCrypto:d,bufferedWrite:B,keepOrder:m,dataDescriptor:E,signal:F,msDosCompatible:x,internalFileAttribute:w,externalFileAttribute:A}));return y&&(t.pendingCompressedSize-=y),Object.assign(R,{name:e,comment:r,extraField:_}),new xe(R)}(i,t,e,n)}finally{rn--;const t=i.pendingEntries.shift();t&&i.add(t.name,t.reader,t.options).then(t.resolve).catch(t.reject)}}async close(t=new Uint8Array(0),e={}){return await async function(t,e,n){const i=t.writer,o=t.files;let r=0,a=0,s=t.offset,l=o.size;for(const[,t]of o)a+=46+t.rawFilename.length+t.rawComment.length+t.rawExtraFieldZip64.length+t.rawExtraFieldAES.length+t.rawExtraFieldExtendedTimestamp.length+t.rawExtraFieldNTFS.length+t.rawExtraField.length;let c=n.zip64||t.options.zip64||!1;if(s>=se||a>=se||l>=le){if(!1===n.zip64||!1===t.options.zip64)throw new Error(nn);c=!0}const u=new Uint8Array(a+(c?98:22)),f=dn(u);if(e&&e.length){if(!(e.length<=le))throw new Error(je);un(f,r+20,e.length)}for(const[e,i]of Array.from(o.values()).entries()){const{rawFilename:a,rawExtraFieldZip64:s,rawExtraFieldAES:l,rawExtraField:c,rawComment:v,versionMadeBy:h,headerArray:d,directory:p,zip64:_,msDosCompatible:g,internalFileAttribute:y,externalFileAttribute:m}=i;let b,x;if(i.extendedTimestamp){x=i.rawExtraFieldNTFS,b=new Uint8Array(9);const t=dn(b);un(t,0,de),un(t,2,b.length-4),cn(t,4,1),fn(t,5,Math.floor(i.lastModDate.getTime()/1e3))}else x=b=new Uint8Array(0);const w=s.length+l.length+b.length+x.length+c.length;if(fn(f,r,ue),un(f,r+4,h),hn(u,d,r+6),un(f,r+30,w),un(f,r+32,v.length),fn(f,r+34,y),m?fn(f,r+38,m):p&&g&&cn(f,r+38,16),fn(f,r+42,_?se:i.offset),hn(u,a,r+46),hn(u,s,r+46+a.length),hn(u,l,r+46+a.length+s.length),hn(u,b,r+46+a.length+s.length+l.length),hn(u,x,r+46+a.length+s.length+l.length+b.length),hn(u,c,r+46+a.length+s.length+l.length+b.length+x.length),hn(u,v,r+46+a.length+w),r+=46+a.length+w+v.length,n.onprogress)try{n.onprogress(e+1,o.size,new xe(i))}catch(t){}}c&&(fn(f,r,ve),vn(f,r+4,BigInt(44)),un(f,r+12,45),un(f,r+14,45),vn(f,r+24,BigInt(l)),vn(f,r+32,BigInt(l)),vn(f,r+40,BigInt(a)),vn(f,r+48,BigInt(s)),fn(f,r+56,he),vn(f,r+64,BigInt(s)+BigInt(a)),fn(f,r+72,1),l=le,s=se,a=se,r+=76),fn(f,r,fe),un(f,r+8,l),un(f,r+10,l),fn(f,r+12,a),fn(f,r+16,s),await i.writeUint8Array(u),e&&e.length&&await i.writeUint8Array(e)}(this,t,e),this.writer.getData()}},t.configure=k,t.getMimeType=function(){return"application/octet-stream"},t.initShimAsyncCodec=(t,e={},n)=>({Deflate:U(t.Deflate,e.deflate,n),Inflate:U(t.Inflate,e.inflate,n)}),t.terminateWorkers=function(){Ct.forEach((t=>t.terminate()))},Object.defineProperty(t,"__esModule",{value:!0})})),function(t){var e;"object"==typeof exports?module.exports=t():("undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.p2=t())}((function(){return function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){var n=e[a][1][t];return o(n||t)}),c,c.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){function i(){}var o=t("./Scalar");e.exports=i,i.lineInt=function(t,e,n){n=n||0;var i,r,a,s,l,c,u,f=[0,0];return i=t[1][1]-t[0][1],r=t[0][0]-t[1][0],a=i*t[0][0]+r*t[0][1],s=e[1][1]-e[0][1],l=e[0][0]-e[1][0],c=s*e[0][0]+l*e[0][1],u=i*l-s*r,o.eq(u,0,n)||(f[0]=(l*a-r*c)/u,f[1]=(i*c-s*a)/u),f},i.segmentsIntersect=function(t,e,n,i){var o=e[0]-t[0],r=e[1]-t[1],a=i[0]-n[0],s=i[1]-n[1];if(a*r-s*o==0)return!1;var l=(o*(n[1]-t[1])+r*(t[0]-n[0]))/(a*r-s*o),c=(a*(t[1]-n[1])+s*(n[0]-t[0]))/(s*o-a*r);return l>=0&&1>=l&&c>=0&&1>=c}},{"./Scalar":4}],2:[function(t,e,n){function i(){}e.exports=i,i.area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},i.left=function(t,e,n){return i.area(t,e,n)>0},i.leftOn=function(t,e,n){return i.area(t,e,n)>=0},i.right=function(t,e,n){return i.area(t,e,n)<0},i.rightOn=function(t,e,n){return i.area(t,e,n)<=0};var o=[],r=[];i.collinear=function(t,e,n,a){if(a){var s=o,l=r;s[0]=e[0]-t[0],s[1]=e[1]-t[1],l[0]=n[0]-e[0],l[1]=n[1]-e[1];var c=s[0]*l[0]+s[1]*l[1],u=Math.sqrt(s[0]*s[0]+s[1]*s[1]),f=Math.sqrt(l[0]*l[0]+l[1]*l[1]);return a>Math.acos(c/(u*f))}return 0==i.area(t,e,n)},i.sqdist=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}},{}],3:[function(t,e,n){function i(){this.vertices=[]}function o(t,e,n,i,o){o=o||0;var r=e[1]-t[1],a=t[0]-e[0],l=r*t[0]+a*t[1],c=i[1]-n[1],u=n[0]-i[0],f=c*n[0]+u*n[1],v=r*u-c*a;return s.eq(v,0,o)?[0,0]:[(u*l-a*f)/v,(r*f-c*l)/v]}var r=t("./Line"),a=t("./Point"),s=t("./Scalar");e.exports=i,i.prototype.at=function(t){var e=this.vertices,n=e.length;return e[0>t?t%n+n:t%n]},i.prototype.first=function(){return this.vertices[0]},i.prototype.last=function(){return this.vertices[this.vertices.length-1]},i.prototype.clear=function(){this.vertices.length=0},i.prototype.append=function(t,e,n){if(void 0===e)throw new Error("From is not given!");if(void 0===n)throw new Error("To is not given!");if(e>n-1)throw new Error("lol1");if(n>t.vertices.length)throw new Error("lol2");if(0>e)throw new Error("lol3");for(var i=e;n>i;i++)this.vertices.push(t.vertices[i])},i.prototype.makeCCW=function(){for(var t=0,e=this.vertices,n=1;n<this.vertices.length;++n)(e[n][1]<e[t][1]||e[n][1]==e[t][1]&&e[n][0]>e[t][0])&&(t=n);a.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},i.prototype.reverse=function(){for(var t=[],e=0,n=this.vertices.length;e!==n;e++)t.push(this.vertices.pop());this.vertices=t},i.prototype.isReflex=function(t){return a.right(this.at(t-1),this.at(t),this.at(t+1))};var l=[],c=[];i.prototype.canSee=function(t,e){var n,i,o=l,s=c;if(a.leftOn(this.at(t+1),this.at(t),this.at(e))&&a.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;i=a.sqdist(this.at(t),this.at(e));for(var u=0;u!==this.vertices.length;++u)if((u+1)%this.vertices.length!==t&&u!==t&&a.leftOn(this.at(t),this.at(e),this.at(u+1))&&a.rightOn(this.at(t),this.at(e),this.at(u))&&(o[0]=this.at(t),o[1]=this.at(e),s[0]=this.at(u),s[1]=this.at(u+1),n=r.lineInt(o,s),a.sqdist(this.at(t),n)<i))return!1;return!0},i.prototype.copy=function(t,e,n){var o=n||new i;if(o.clear(),e>t)for(var r=t;e>=r;r++)o.vertices.push(this.vertices[r]);else{for(r=0;e>=r;r++)o.vertices.push(this.vertices[r]);for(r=t;r<this.vertices.length;r++)o.vertices.push(this.vertices[r])}return o},i.prototype.getCutEdges=function(){for(var t=[],e=[],n=[],o=new i,r=Number.MAX_VALUE,a=0;a<this.vertices.length;++a)if(this.isReflex(a))for(var s=0;s<this.vertices.length;++s)if(this.canSee(a,s)){e=this.copy(a,s,o).getCutEdges(),n=this.copy(s,a,o).getCutEdges();for(var l=0;l<n.length;l++)e.push(n[l]);e.length<r&&(t=e,r=e.length,t.push([this.at(a),this.at(s)]))}return t},i.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},i.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],n=0;n<t.length;n++)for(var i=t[n],o=0;o<e.length;o++){var r=e[o].slice(i);if(r){e.splice(o,1),e.push(r[0],r[1]);break}}return e}i=t,n=this.vertices.indexOf(i[0]),o=this.vertices.indexOf(i[1]);return-1!=n&&-1!=o&&[this.copy(n,o),this.copy(o,n)]},i.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var n=0;e-1>n;n++)if(r.segmentsIntersect(t[e],t[e+1],t[n],t[n+1]))return!1;for(e=1;e<t.length-2;e++)if(r.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},i.prototype.quickDecomp=function(t,e,n,r,s,l){s=s||100,l=l||0,r=r||25,t=void 0!==t?t:[],e=e||[],n=n||[];var c=[0,0],u=[0,0],f=[0,0],v=0,h=0,d=0,p=0,_=0,g=0,y=0,m=new i,b=new i,x=this,w=this.vertices;if(w.length<3)return t;if(++l>s)return console.warn("quickDecomp: max level ("+s+") reached."),t;for(var A=0;A<this.vertices.length;++A)if(x.isReflex(A)){e.push(x.vertices[A]),v=h=Number.MAX_VALUE;for(var M=0;M<this.vertices.length;++M)a.left(x.at(A-1),x.at(A),x.at(M))&&a.rightOn(x.at(A-1),x.at(A),x.at(M-1))&&(f=o(x.at(A-1),x.at(A),x.at(M),x.at(M-1)),a.right(x.at(A+1),x.at(A),f)&&(h>(d=a.sqdist(x.vertices[A],f))&&(h=d,u=f,g=M))),a.left(x.at(A+1),x.at(A),x.at(M+1))&&a.rightOn(x.at(A+1),x.at(A),x.at(M))&&(f=o(x.at(A+1),x.at(A),x.at(M),x.at(M+1)),a.left(x.at(A-1),x.at(A),f)&&(v>(d=a.sqdist(x.vertices[A],f))&&(v=d,c=f,_=M)));if(g==(_+1)%this.vertices.length)f[0]=(u[0]+c[0])/2,f[1]=(u[1]+c[1])/2,n.push(f),_>A?(m.append(x,A,_+1),m.vertices.push(f),b.vertices.push(f),0!=g&&b.append(x,g,x.vertices.length),b.append(x,0,A+1)):(0!=A&&m.append(x,A,x.vertices.length),m.append(x,0,_+1),m.vertices.push(f),b.vertices.push(f),b.append(x,g,A+1));else{if(g>_&&(_+=this.vertices.length),p=Number.MAX_VALUE,g>_)return t;for(M=g;_>=M;++M)a.leftOn(x.at(A-1),x.at(A),x.at(M))&&a.rightOn(x.at(A+1),x.at(A),x.at(M))&&(p>(d=a.sqdist(x.at(A),x.at(M)))&&(p=d,y=M%this.vertices.length));y>A?(m.append(x,A,y+1),0!=y&&b.append(x,y,w.length),b.append(x,0,A+1)):(0!=A&&m.append(x,A,w.length),m.append(x,0,y+1),b.append(x,y,A+1))}return m.vertices.length<b.vertices.length?(m.quickDecomp(t,e,n,r,s,l),b.quickDecomp(t,e,n,r,s,l)):(b.quickDecomp(t,e,n,r,s,l),m.quickDecomp(t,e,n,r,s,l)),t}return t.push(this),t},i.prototype.removeCollinearPoints=function(t){for(var e=0,n=this.vertices.length-1;this.vertices.length>3&&n>=0;--n)a.collinear(this.at(n-1),this.at(n),this.at(n+1),t)&&(this.vertices.splice(n%this.vertices.length,1),n--,e++);return e}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(t,e,n){function i(){}e.exports=i,i.eq=function(t,e,n){return n=n||0,Math.abs(t-e)<n}},{}],5:[function(t,e,n){e.exports={Polygon:t("./Polygon"),Point:t("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(t,e,n){e.exports={name:"p2",version:"0.7.1",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.1"}}},{}],7:[function(t,e,n){function i(t){this.lowerBound=o.create(),t&&t.lowerBound&&o.copy(this.lowerBound,t.lowerBound),this.upperBound=o.create(),t&&t.upperBound&&o.copy(this.upperBound,t.upperBound)}var o=t("../math/vec2");t("../utils/Utils"),e.exports=i;var r=o.create();i.prototype.setFromPoints=function(t,e,n,i){var a=this.lowerBound,s=this.upperBound;"number"!=typeof n&&(n=0),0!==n?o.rotate(a,t[0],n):o.copy(a,t[0]),o.copy(s,a);for(var l=Math.cos(n),c=Math.sin(n),u=1;u<t.length;u++){var f=t[u];if(0!==n){var v=f[0],h=f[1];r[0]=l*v-c*h,r[1]=c*v+l*h,f=r}for(var d=0;2>d;d++)f[d]>s[d]&&(s[d]=f[d]),f[d]<a[d]&&(a[d]=f[d])}e&&(o.add(this.lowerBound,this.lowerBound,e),o.add(this.upperBound,this.upperBound,e)),i&&(this.lowerBound[0]-=i,this.lowerBound[1]-=i,this.upperBound[0]+=i,this.upperBound[1]+=i)},i.prototype.copy=function(t){o.copy(this.lowerBound,t.lowerBound),o.copy(this.upperBound,t.upperBound)},i.prototype.extend=function(t){for(var e=2;e--;){var n=t.lowerBound[e];this.lowerBound[e]>n&&(this.lowerBound[e]=n);var i=t.upperBound[e];this.upperBound[e]<i&&(this.upperBound[e]=i)}},i.prototype.overlaps=function(t){var e=this.lowerBound,n=this.upperBound,i=t.lowerBound,o=t.upperBound;return(i[0]<=n[0]&&n[0]<=o[0]||e[0]<=o[0]&&o[0]<=n[0])&&(i[1]<=n[1]&&n[1]<=o[1]||e[1]<=o[1]&&o[1]<=n[1])},i.prototype.containsPoint=function(t){var e=this.lowerBound,n=this.upperBound;return e[0]<=t[0]&&t[0]<=n[0]&&e[1]<=t[1]&&t[1]<=n[1]},i.prototype.overlapsRay=function(t){var e=1/t.direction[0],n=1/t.direction[1],i=(this.lowerBound[0]-t.from[0])*e,o=(this.upperBound[0]-t.from[0])*e,r=(this.lowerBound[1]-t.from[1])*n,a=(this.upperBound[1]-t.from[1])*n,s=Math.max(Math.max(Math.min(i,o),Math.min(r,a))),l=Math.min(Math.min(Math.max(i,o),Math.max(r,a)));return 0>l||s>l?-1:s}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(t,e,n){function i(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=i.AABB}var o=t("../math/vec2"),r=t("../objects/Body");e.exports=i,i.AABB=1,i.BOUNDING_CIRCLE=2,i.prototype.setWorld=function(t){this.world=t},i.prototype.getCollisionPairs=function(t){};var a=o.create();i.boundingRadiusCheck=function(t,e){o.sub(a,t.position,e.position);var n=o.squaredLength(a),i=t.boundingRadius+e.boundingRadius;return i*i>=n},i.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},i.prototype.boundingVolumeCheck=function(t,e){var n;switch(this.boundingVolumeType){case i.BOUNDING_CIRCLE:n=i.boundingRadiusCheck(t,e);break;case i.AABB:n=i.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return n},i.canCollide=function(t,e){var n=r.KINEMATIC,i=r.STATIC;return(t.type!==i||e.type!==i)&&(!(t.type===n&&e.type===i||t.type===i&&e.type===n)&&((t.type!==n||e.type!==n)&&((t.sleepState!==r.SLEEPING||e.sleepState!==r.SLEEPING)&&!(t.sleepState===r.SLEEPING&&e.type===i||e.sleepState===r.SLEEPING&&t.type===i))))},i.NAIVE=1,i.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(t,e,n){function i(){o.call(this,o.NAIVE)}var o=(t("../shapes/Circle"),t("../shapes/Plane"),t("../shapes/Shape"),t("../shapes/Particle"),t("../collision/Broadphase"));t("../math/vec2"),e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.getCollisionPairs=function(t){var e=t.bodies,n=this.result;n.length=0;for(var i=0,r=e.length;i!==r;i++)for(var a=e[i],s=0;i>s;s++){var l=e[s];o.canCollide(a,l)&&this.boundingVolumeCheck(a,l)&&n.push(a,l)}return n},i.prototype.aabbQuery=function(t,e,n){n=n||[];for(var i=t.bodies,o=0;o<i.length;o++){var r=i[o];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&n.push(r)}return n}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(t,e,n){function i(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new u({size:32}),this.frictionEquationPool=new f({size:64}),this.restitution=0,this.stiffness=h.DEFAULT_STIFFNESS,this.relaxation=h.DEFAULT_RELAXATION,this.frictionStiffness=h.DEFAULT_STIFFNESS,this.frictionRelaxation=h.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new v,this.contactSkinSize=.01}function o(t,e){a.set(t.vertices[0],.5*-e.length,-e.radius),a.set(t.vertices[1],.5*e.length,-e.radius),a.set(t.vertices[2],.5*e.length,e.radius),a.set(t.vertices[3],.5*-e.length,e.radius)}function r(t,e,n,i){for(var o=Y,r=W,c=Z,u=H,f=t,v=e.vertices,h=null,d=0;d!==v.length+1;d++){var p=v[d%v.length],_=v[(d+1)%v.length];a.rotate(o,p,i),a.rotate(r,_,i),l(o,o,n),l(r,r,n),s(c,o,f),s(u,r,f);var g=a.crossLength(c,u);if(null===h&&(h=g),0>=g*h)return!1;h=g}return!0}var a=t("../math/vec2"),s=a.sub,l=a.add,c=a.dot,u=(t("../utils/Utils"),t("../utils/ContactEquationPool")),f=t("../utils/FrictionEquationPool"),v=t("../utils/TupleDictionary"),h=t("../equations/Equation"),d=(t("../equations/ContactEquation"),t("../equations/FrictionEquation"),t("../shapes/Circle")),p=t("../shapes/Convex"),_=t("../shapes/Shape"),g=(t("../objects/Body"),t("../shapes/Box"));e.exports=i;var y=a.fromValues(0,1),m=a.fromValues(0,0),b=a.fromValues(0,0),x=a.fromValues(0,0),w=a.fromValues(0,0),A=a.fromValues(0,0),M=a.fromValues(0,0),S=a.fromValues(0,0),T=a.fromValues(0,0),B=a.fromValues(0,0),E=a.fromValues(0,0),F=a.fromValues(0,0),R=a.fromValues(0,0),I=a.fromValues(0,0),C=a.fromValues(0,0),L=a.fromValues(0,0),P=a.fromValues(0,0),D=a.fromValues(0,0),X=a.fromValues(0,0),k=[],U=a.create(),z=a.create();i.prototype.bodiesOverlap=function(t,e){for(var n=U,i=z,o=0,r=t.shapes.length;o!==r;o++){var a=t.shapes[o];t.toWorldFrame(n,a.position);for(var s=0,l=e.shapes.length;s!==l;s++){var c=e.shapes[s];if(e.toWorldFrame(i,c.position),this[a.type|c.type](t,a,n,a.angle+t.angle,e,c,i,c.angle+e.angle,!0))return!0}}return!1},i.prototype.collidedLastStep=function(t,e){var n=0|t.id,i=0|e.id;return!!this.collidingBodiesLastStep.get(n,i)},i.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var n=t[e],i=n.bodyA.id,o=n.bodyB.id;this.collidingBodiesLastStep.set(i,o,!0)}for(var r=this.contactEquations,a=this.frictionEquations,s=0;s<r.length;s++)this.contactEquationPool.release(r[s]);for(s=0;s<a.length;s++)this.frictionEquationPool.release(a[s]);this.contactEquations.length=this.frictionEquations.length=0},i.prototype.createContactEquation=function(t,e,n,i){var o=this.contactEquationPool.get();return o.bodyA=t,o.bodyB=e,o.shapeA=n,o.shapeB=i,o.restitution=this.restitution,o.firstImpact=!this.collidedLastStep(t,e),o.stiffness=this.stiffness,o.relaxation=this.relaxation,o.needsUpdate=!0,o.enabled=this.enabledEquations,o.offset=this.contactSkinSize,o},i.prototype.createFrictionEquation=function(t,e,n,i){var o=this.frictionEquationPool.get();return o.bodyA=t,o.bodyB=e,o.shapeA=n,o.shapeB=i,o.setSlipForce(this.slipForce),o.frictionCoefficient=this.frictionCoefficient,o.relativeVelocity=this.surfaceVelocity,o.enabled=this.enabledEquations,o.needsUpdate=!0,o.stiffness=this.frictionStiffness,o.relaxation=this.frictionRelaxation,o.contactEquations.length=0,o},i.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return a.copy(e.contactPointA,t.contactPointA),a.copy(e.contactPointB,t.contactPointB),a.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},i.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],n=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),i=e.bodyA;e.bodyB,a.set(n.contactPointA,0,0),a.set(n.contactPointB,0,0),a.set(n.t,0,0);for(var o=0;o!==t;o++)(e=this.contactEquations[this.contactEquations.length-1-o]).bodyA===i?(a.add(n.t,n.t,e.normalA),a.add(n.contactPointA,n.contactPointA,e.contactPointA),a.add(n.contactPointB,n.contactPointB,e.contactPointB)):(a.sub(n.t,n.t,e.normalA),a.add(n.contactPointA,n.contactPointA,e.contactPointB),a.add(n.contactPointB,n.contactPointB,e.contactPointA)),n.contactEquations.push(e);var r=1/t;return a.scale(n.contactPointA,n.contactPointA,r),a.scale(n.contactPointB,n.contactPointB,r),a.normalize(n.t,n.t),a.rotate90cw(n.t,n.t),n},i.prototype[_.LINE|_.CONVEX]=i.prototype.convexLine=function(t,e,n,i,o,r,a,s,l){return!l&&0},i.prototype[_.LINE|_.BOX]=i.prototype.lineBox=function(t,e,n,i,o,r,a,s,l){return!l&&0};var V=new g({width:1,height:1}),N=a.create();i.prototype[_.CAPSULE|_.CONVEX]=i.prototype[_.CAPSULE|_.BOX]=i.prototype.convexCapsule=function(t,e,n,i,r,s,l,c,u){var f=N;a.set(f,s.length/2,0),a.rotate(f,f,c),a.add(f,f,l);var v=this.circleConvex(r,s,f,c,t,e,n,i,u,s.radius);a.set(f,-s.length/2,0),a.rotate(f,f,c),a.add(f,f,l);var h=this.circleConvex(r,s,f,c,t,e,n,i,u,s.radius);if(u&&(v||h))return!0;var d=V;return o(d,s),this.convexConvex(t,e,n,i,r,d,l,c,u)+v+h},i.prototype[_.CAPSULE|_.LINE]=i.prototype.lineCapsule=function(t,e,n,i,o,r,a,s,l){return!l&&0};var G=a.create(),q=a.create(),O=new g({width:1,height:1});i.prototype[_.CAPSULE|_.CAPSULE]=i.prototype.capsuleCapsule=function(t,e,n,i,r,s,l,c,u){for(var f=G,v=q,h=0,d=0;2>d;d++){a.set(f,(0===d?-1:1)*e.length/2,0),a.rotate(f,f,i),a.add(f,f,n);for(var p=0;2>p;p++){a.set(v,(0===p?-1:1)*s.length/2,0),a.rotate(v,v,c),a.add(v,v,l),this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var _=this.circleCircle(t,e,f,i,r,s,v,c,u,e.radius,s.radius);if(this.enableFrictionReduction&&(this.enableFriction=m),u&&_)return!0;h+=_}}this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var g=O;o(g,e);var y=this.convexCapsule(t,g,n,i,r,s,l,c,u);if(this.enableFrictionReduction&&(this.enableFriction=m),u&&y)return!0;if(h+=y,this.enableFrictionReduction){var m=this.enableFriction;this.enableFriction=!1}o(g,s);var b=this.convexCapsule(r,g,l,c,t,e,n,i,u);return this.enableFrictionReduction&&(this.enableFriction=m),!(!u||!b)||(h+=b,this.enableFrictionReduction&&h&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(h)),h)},i.prototype[_.LINE|_.LINE]=i.prototype.lineLine=function(t,e,n,i,o,r,a,s,l){return!l&&0},i.prototype[_.PLANE|_.LINE]=i.prototype.planeLine=function(t,e,n,i,o,r,u,f,v){var h=m,d=b,p=x,_=w,g=A,E=M,F=S,R=T,I=B,C=k,L=0;a.set(h,-r.length/2,0),a.set(d,r.length/2,0),a.rotate(p,h,f),a.rotate(_,d,f),l(p,p,u),l(_,_,u),a.copy(h,p),a.copy(d,_),s(g,d,h),a.normalize(E,g),a.rotate90cw(I,E),a.rotate(R,y,i),C[0]=h,C[1]=d;for(var P=0;P<C.length;P++){var D=C[P];s(F,D,n);var X=c(F,R);if(0>X){if(v)return!0;var U=this.createContactEquation(t,o,e,r);L++,a.copy(U.normalA,R),a.normalize(U.normalA,U.normalA),a.scale(F,R,X),s(U.contactPointA,D,F),s(U.contactPointA,U.contactPointA,t.position),s(U.contactPointB,D,u),l(U.contactPointB,U.contactPointB,u),s(U.contactPointB,U.contactPointB,o.position),this.contactEquations.push(U),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(U))}}return!v&&(this.enableFrictionReduction||L&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(L)),L)},i.prototype[_.PARTICLE|_.CAPSULE]=i.prototype.particleCapsule=function(t,e,n,i,o,r,a,s,l){return this.circleLine(t,e,n,i,o,r,a,s,l,r.radius,0)},i.prototype[_.CIRCLE|_.LINE]=i.prototype.circleLine=function(t,e,n,i,o,r,u,f,v,h,d){h=h||0,d=void 0!==d?d:e.radius;var p=m,_=b,g=x,y=w,L=A,P=M,D=S,X=T,U=B,z=E,V=F,N=R,G=I,q=C,O=k;a.set(X,-r.length/2,0),a.set(U,r.length/2,0),a.rotate(z,X,f),a.rotate(V,U,f),l(z,z,u),l(V,V,u),a.copy(X,z),a.copy(U,V),s(P,U,X),a.normalize(D,P),a.rotate90cw(L,D),s(N,n,X);var Y=c(N,L);s(y,X,u),s(G,n,u);var W=d+h;if(Math.abs(Y)<W){a.scale(p,L,Y),s(g,n,p),a.scale(_,L,c(L,G)),a.normalize(_,_),a.scale(_,_,h),l(g,g,_);var Z=c(D,g),H=c(D,X),j=c(D,U);if(Z>H&&j>Z){if(v)return!0;var Q=this.createContactEquation(t,o,e,r);return a.scale(Q.normalA,p,-1),a.normalize(Q.normalA,Q.normalA),a.scale(Q.contactPointA,Q.normalA,d),l(Q.contactPointA,Q.contactPointA,n),s(Q.contactPointA,Q.contactPointA,t.position),s(Q.contactPointB,g,u),l(Q.contactPointB,Q.contactPointB,u),s(Q.contactPointB,Q.contactPointB,o.position),this.contactEquations.push(Q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Q)),1}}O[0]=X,O[1]=U;for(var K=0;K<O.length;K++){var J=O[K];if(s(N,J,n),a.squaredLength(N)<Math.pow(W,2)){if(v)return!0;Q=this.createContactEquation(t,o,e,r);return a.copy(Q.normalA,N),a.normalize(Q.normalA,Q.normalA),a.scale(Q.contactPointA,Q.normalA,d),l(Q.contactPointA,Q.contactPointA,n),s(Q.contactPointA,Q.contactPointA,t.position),s(Q.contactPointB,J,u),a.scale(q,Q.normalA,-h),l(Q.contactPointB,Q.contactPointB,q),l(Q.contactPointB,Q.contactPointB,u),s(Q.contactPointB,Q.contactPointB,o.position),this.contactEquations.push(Q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Q)),1}}return 0},i.prototype[_.CIRCLE|_.CAPSULE]=i.prototype.circleCapsule=function(t,e,n,i,o,r,a,s,l){return this.circleLine(t,e,n,i,o,r,a,s,l,r.radius)},i.prototype[_.CIRCLE|_.CONVEX]=i.prototype[_.CIRCLE|_.BOX]=i.prototype.circleConvex=function(t,e,n,i,o,c,u,f,v,h){h="number"==typeof h?h:e.radius;for(var d=m,p=b,_=x,g=w,y=A,M=E,S=F,T=I,B=C,R=L,D=P,X=!1,k=Number.MAX_VALUE,U=c.vertices,z=0;z!==U.length+1;z++){var V=U[z%U.length],N=U[(z+1)%U.length];if(a.rotate(d,V,f),a.rotate(p,N,f),l(d,d,u),l(p,p,u),s(_,p,d),a.normalize(g,_),a.rotate90cw(y,g),a.scale(B,y,-e.radius),l(B,B,n),r(B,c,u,f)){a.sub(R,d,B);var G=Math.abs(a.dot(R,y));k>G&&(a.copy(D,B),k=G,a.scale(T,y,G),a.add(T,T,B),X=!0)}}if(X){if(v)return!0;var q=this.createContactEquation(t,o,e,c);return a.sub(q.normalA,D,n),a.normalize(q.normalA,q.normalA),a.scale(q.contactPointA,q.normalA,h),l(q.contactPointA,q.contactPointA,n),s(q.contactPointA,q.contactPointA,t.position),s(q.contactPointB,T,u),l(q.contactPointB,q.contactPointB,u),s(q.contactPointB,q.contactPointB,o.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1}if(h>0)for(z=0;z<U.length;z++){var O=U[z];if(a.rotate(S,O,f),l(S,S,u),s(M,S,n),a.squaredLength(M)<Math.pow(h,2)){if(v)return!0;q=this.createContactEquation(t,o,e,c);return a.copy(q.normalA,M),a.normalize(q.normalA,q.normalA),a.scale(q.contactPointA,q.normalA,h),l(q.contactPointA,q.contactPointA,n),s(q.contactPointA,q.contactPointA,t.position),s(q.contactPointB,S,u),l(q.contactPointB,q.contactPointB,u),s(q.contactPointB,q.contactPointB,o.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1}}return 0};var Y=a.create(),W=a.create(),Z=a.create(),H=a.create();i.prototype[_.PARTICLE|_.CONVEX]=i.prototype[_.PARTICLE|_.BOX]=i.prototype.particleConvex=function(t,e,n,i,o,u,f,v,h){var d=m,p=b,_=x,g=w,y=A,T=M,B=S,F=E,R=I,C=D,L=X,P=Number.MAX_VALUE,k=!1,U=u.vertices;if(!r(n,u,f,v))return 0;if(h)return!0;for(var z=0;z!==U.length+1;z++){var V=U[z%U.length],N=U[(z+1)%U.length];a.rotate(d,V,v),a.rotate(p,N,v),l(d,d,f),l(p,p,f),s(_,p,d),a.normalize(g,_),a.rotate90cw(y,g),s(F,n,d),c(F,y),s(T,d,f),s(B,n,f),a.sub(C,d,n);var G=Math.abs(a.dot(C,y));P>G&&(P=G,a.scale(R,y,G),a.add(R,R,n),a.copy(L,y),k=!0)}if(k){var q=this.createContactEquation(t,o,e,u);return a.scale(q.normalA,L,-1),a.normalize(q.normalA,q.normalA),a.set(q.contactPointA,0,0),l(q.contactPointA,q.contactPointA,n),s(q.contactPointA,q.contactPointA,t.position),s(q.contactPointB,R,f),l(q.contactPointB,q.contactPointB,f),s(q.contactPointB,q.contactPointB,o.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1}return 0},i.prototype[_.CIRCLE]=i.prototype.circleCircle=function(t,e,n,i,o,r,c,u,f,v,h){var d=m;v=v||e.radius,h=h||r.radius;s(d,n,c);var p=v+h;if(a.squaredLength(d)>Math.pow(p,2))return 0;if(f)return!0;var _=this.createContactEquation(t,o,e,r);return s(_.normalA,c,n),a.normalize(_.normalA,_.normalA),a.scale(_.contactPointA,_.normalA,v),a.scale(_.contactPointB,_.normalA,-h),l(_.contactPointA,_.contactPointA,n),s(_.contactPointA,_.contactPointA,t.position),l(_.contactPointB,_.contactPointB,c),s(_.contactPointB,_.contactPointB,o.position),this.contactEquations.push(_),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(_)),1},i.prototype[_.PLANE|_.CONVEX]=i.prototype[_.PLANE|_.BOX]=i.prototype.planeConvex=function(t,e,n,i,o,r,u,f,v){var h=m,d=b,p=x,_=0;a.rotate(d,y,i);for(var g=0;g!==r.vertices.length;g++){var w=r.vertices[g];if(a.rotate(h,w,f),l(h,h,u),s(p,h,n),c(p,d)<=0){if(v)return!0;_++;var A=this.createContactEquation(t,o,e,r);s(p,h,n),a.copy(A.normalA,d);var M=c(p,A.normalA);a.scale(p,A.normalA,M),s(A.contactPointB,h,o.position),s(A.contactPointA,h,p),s(A.contactPointA,A.contactPointA,t.position),this.contactEquations.push(A),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A))}}return this.enableFrictionReduction&&this.enableFriction&&_&&this.frictionEquations.push(this.createFrictionFromAverage(_)),_},i.prototype[_.PARTICLE|_.PLANE]=i.prototype.particlePlane=function(t,e,n,i,o,r,l,u,f){var v=m,h=b;u=u||0,s(v,n,l),a.rotate(h,y,u);var d=c(v,h);if(d>0)return 0;if(f)return!0;var p=this.createContactEquation(o,t,r,e);return a.copy(p.normalA,h),a.scale(v,p.normalA,d),s(p.contactPointA,n,v),s(p.contactPointA,p.contactPointA,o.position),s(p.contactPointB,n,t.position),this.contactEquations.push(p),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(p)),1},i.prototype[_.CIRCLE|_.PARTICLE]=i.prototype.circleParticle=function(t,e,n,i,o,r,c,u,f){var v=m;if(s(v,c,n),a.squaredLength(v)>Math.pow(e.radius,2))return 0;if(f)return!0;var h=this.createContactEquation(t,o,e,r);return a.copy(h.normalA,v),a.normalize(h.normalA,h.normalA),a.scale(h.contactPointA,h.normalA,e.radius),l(h.contactPointA,h.contactPointA,n),s(h.contactPointA,h.contactPointA,t.position),s(h.contactPointB,c,o.position),this.contactEquations.push(h),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(h)),1};var j=new d({radius:1}),Q=a.create(),K=a.create();a.create(),i.prototype[_.PLANE|_.CAPSULE]=i.prototype.planeCapsule=function(t,e,n,i,o,r,s,c,u){var f,v=Q,h=K,d=j;a.set(v,-r.length/2,0),a.rotate(v,v,c),l(v,v,s),a.set(h,r.length/2,0),a.rotate(h,h,c),l(h,h,s),d.radius=r.radius,this.enableFrictionReduction&&(f=this.enableFriction,this.enableFriction=!1);var p=this.circlePlane(o,d,v,0,t,e,n,i,u),_=this.circlePlane(o,d,h,0,t,e,n,i,u);if(this.enableFrictionReduction&&(this.enableFriction=f),u)return p||_;var g=p+_;return this.enableFrictionReduction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g},i.prototype[_.CIRCLE|_.PLANE]=i.prototype.circlePlane=function(t,e,n,i,o,r,u,f,v){var h=t,d=e,p=n,_=o,g=u,w=f;w=w||0;var A=m,M=b,S=x;s(A,p,g),a.rotate(M,y,w);var T=c(M,A);if(T>d.radius)return 0;if(v)return!0;var B=this.createContactEquation(_,h,r,e);return a.copy(B.normalA,M),a.scale(B.contactPointB,B.normalA,-d.radius),l(B.contactPointB,B.contactPointB,p),s(B.contactPointB,B.contactPointB,h.position),a.scale(S,B.normalA,T),s(B.contactPointA,A,S),l(B.contactPointA,B.contactPointA,g),s(B.contactPointA,B.contactPointA,_.position),this.contactEquations.push(B),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(B)),1},i.prototype[_.CONVEX]=i.prototype[_.CONVEX|_.BOX]=i.prototype[_.BOX]=i.prototype.convexConvex=function(t,e,n,o,r,u,f,v,h,d){var p=m,_=b,g=x,y=w,M=A,E=S,F=T,R=B,I=0;d="number"==typeof d?d:0;if(!i.findSeparatingAxis(e,n,o,u,f,v,p))return 0;s(F,f,n),c(p,F)>0&&a.scale(p,p,-1);var C=i.getClosestEdge(e,o,p,!0),L=i.getClosestEdge(u,v,p);if(-1===C||-1===L)return 0;for(var P=0;2>P;P++){var D,X=C,k=L,U=e,z=u,V=n,N=f,G=o,q=v,O=t,Y=r;if(0===P)D=X,X=k,k=D,D=U,U=z,z=D,D=V,V=N,N=D,D=G,G=q,q=D,D=O,O=Y,Y=D;for(var W=k;k+2>W;W++){var Z=z.vertices[(W+z.vertices.length)%z.vertices.length];a.rotate(_,Z,q),l(_,_,N);for(var H=0,j=X-1;X+2>j;j++){var Q=U.vertices[(j+U.vertices.length)%U.vertices.length],K=U.vertices[(j+1+U.vertices.length)%U.vertices.length];a.rotate(g,Q,G),a.rotate(y,K,G),l(g,g,V),l(y,y,V),s(M,y,g),a.rotate90cw(R,M),a.normalize(R,R),s(F,_,g);var J=c(R,F);(j===X&&d>=J||j!==X&&0>=J)&&H++}if(H>=3){if(h)return!0;var $=this.createContactEquation(O,Y,U,z);I++;Q=U.vertices[X%U.vertices.length],K=U.vertices[(X+1)%U.vertices.length];a.rotate(g,Q,G),a.rotate(y,K,G),l(g,g,V),l(y,y,V),s(M,y,g),a.rotate90cw($.normalA,M),a.normalize($.normalA,$.normalA),s(F,_,g);J=c($.normalA,F);a.scale(E,$.normalA,J),s($.contactPointA,_,V),s($.contactPointA,$.contactPointA,E),l($.contactPointA,$.contactPointA,V),s($.contactPointA,$.contactPointA,O.position),s($.contactPointB,_,N),l($.contactPointB,$.contactPointB,N),s($.contactPointB,$.contactPointB,Y.position),this.contactEquations.push($),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact($))}}}return this.enableFrictionReduction&&this.enableFriction&&I&&this.frictionEquations.push(this.createFrictionFromAverage(I)),I};var J=a.fromValues(0,0);i.projectConvexOntoAxis=function(t,e,n,i,o){var r,s,l=null,u=null,f=J;a.rotate(f,i,-n);for(var v=0;v<t.vertices.length;v++)r=t.vertices[v],s=c(r,f),(null===l||s>l)&&(l=s),(null===u||u>s)&&(u=s);if(u>l){var h=u;u=l,l=h}var d=c(e,i);a.set(o,u+d,l+d)};var $=a.fromValues(0,0),tt=a.fromValues(0,0),et=a.fromValues(0,0),nt=a.fromValues(0,0),it=a.fromValues(0,0),ot=a.fromValues(0,0);i.findSeparatingAxis=function(t,e,n,o,r,l,c){var u=null,f=!1,v=!1,h=$,d=tt,p=et,_=nt,y=it,m=ot;if(t instanceof g&&o instanceof g)for(var b=0;2!==b;b++){var x=t,w=n;1===b&&(x=o,w=l);for(var A=0;2!==A;A++){0===A?a.set(_,0,1):1===A&&a.set(_,1,0),0!==w&&a.rotate(_,_,w),i.projectConvexOntoAxis(t,e,n,_,y),i.projectConvexOntoAxis(o,r,l,_,m);var M=y,S=m;y[0]>m[0]&&(S=y,M=m,!0),f=0>=(T=S[0]-M[1]),(null===u||T>u)&&(a.copy(c,_),u=T,v=f)}}else for(b=0;2!==b;b++){x=t,w=n;1===b&&(x=o,w=l);for(A=0;A!==x.vertices.length;A++){a.rotate(d,x.vertices[A],w),a.rotate(p,x.vertices[(A+1)%x.vertices.length],w),s(h,p,d),a.rotate90cw(_,h),a.normalize(_,_),i.projectConvexOntoAxis(t,e,n,_,y),i.projectConvexOntoAxis(o,r,l,_,m);var T;M=y,S=m;y[0]>m[0]&&(S=y,M=m,!0),f=0>=(T=S[0]-M[1]),(null===u||T>u)&&(a.copy(c,_),u=T,v=f)}}return v};var rt=a.fromValues(0,0),at=a.fromValues(0,0),st=a.fromValues(0,0);i.getClosestEdge=function(t,e,n,i){var o=rt,r=at,l=st;a.rotate(o,n,-e),i&&a.scale(o,o,-1);for(var u=-1,f=t.vertices.length,v=-1,h=0;h!==f;h++){s(r,t.vertices[(h+1)%f],t.vertices[h%f]),a.rotate90cw(l,r),a.normalize(l,l);var d=c(l,o);(-1===u||d>v)&&(u=h%f,v=d)}return u};var lt=a.create(),ct=a.create(),ut=a.create(),ft=a.create(),vt=a.create(),ht=a.create(),dt=a.create();i.prototype[_.CIRCLE|_.HEIGHTFIELD]=i.prototype.circleHeightfield=function(t,e,n,i,o,r,c,u,f,v){var h=r.heights,d=(v=v||e.radius,r.elementWidth),p=ct,_=lt,g=vt,y=dt,m=ht,b=ut,x=ft,w=Math.floor((n[0]-v-c[0])/d),A=Math.ceil((n[0]+v-c[0])/d);0>w&&(w=0),A>=h.length&&(A=h.length-1);for(var M=h[w],S=h[A],T=w;A>T;T++)h[T]<S&&(S=h[T]),h[T]>M&&(M=h[T]);if(n[1]-v>M)return!f&&0;var B=!1;for(T=w;A>T;T++){a.set(b,T*d,h[T]),a.set(x,(T+1)*d,h[T+1]),a.add(b,b,c),a.add(x,x,c),a.sub(m,x,b),a.rotate(m,m,Math.PI/2),a.normalize(m,m),a.scale(_,m,-v),a.add(_,_,n),a.sub(p,_,b);var E=a.dot(p,m);if(_[0]>=b[0]&&_[0]<x[0]&&0>=E){if(f)return!0;B=!0,a.scale(p,m,-E),a.add(g,_,p),a.copy(y,m);var F=this.createContactEquation(o,t,r,e);a.copy(F.normalA,y),a.scale(F.contactPointB,F.normalA,-v),l(F.contactPointB,F.contactPointB,n),s(F.contactPointB,F.contactPointB,t.position),a.copy(F.contactPointA,g),a.sub(F.contactPointA,F.contactPointA,o.position),this.contactEquations.push(F),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(F))}}if(B=!1,v>0)for(T=w;A>=T;T++)if(a.set(b,T*d,h[T]),a.add(b,b,c),a.sub(p,n,b),a.squaredLength(p)<Math.pow(v,2)){if(f)return!0;B=!0;F=this.createContactEquation(o,t,r,e);a.copy(F.normalA,p),a.normalize(F.normalA,F.normalA),a.scale(F.contactPointB,F.normalA,-v),l(F.contactPointB,F.contactPointB,n),s(F.contactPointB,F.contactPointB,t.position),s(F.contactPointA,b,c),l(F.contactPointA,F.contactPointA,c),s(F.contactPointA,F.contactPointA,o.position),this.contactEquations.push(F),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(F))}return B?1:0};var pt=a.create(),_t=a.create(),gt=a.create(),yt=new p({vertices:[a.create(),a.create(),a.create(),a.create()]});i.prototype[_.BOX|_.HEIGHTFIELD]=i.prototype[_.CONVEX|_.HEIGHTFIELD]=i.prototype.convexHeightfield=function(t,e,n,i,o,r,s,l,c){var u=r.heights,f=r.elementWidth,v=pt,h=_t,d=gt,p=yt,_=Math.floor((t.aabb.lowerBound[0]-s[0])/f),g=Math.ceil((t.aabb.upperBound[0]-s[0])/f);0>_&&(_=0),g>=u.length&&(g=u.length-1);for(var y=u[_],m=u[g],b=_;g>b;b++)u[b]<m&&(m=u[b]),u[b]>y&&(y=u[b]);if(t.aabb.lowerBound[1]>y)return!c&&0;var x=0;for(b=_;g>b;b++){a.set(v,b*f,u[b]),a.set(h,(b+1)*f,u[b+1]),a.add(v,v,s),a.add(h,h,s);a.set(d,.5*(h[0]+v[0]),.5*(h[1]+v[1]-100)),a.sub(p.vertices[0],h,d),a.sub(p.vertices[1],v,d),a.copy(p.vertices[2],p.vertices[1]),a.copy(p.vertices[3],p.vertices[0]),p.vertices[2][1]-=100,p.vertices[3][1]-=100,x+=this.convexConvex(t,e,n,i,o,p,d,0,c)}return x}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(t,e,n){function i(t){t=t||{},this.from=t.from?r.fromValues(t.from[0],t.from[1]):r.create(),this.to=t.to?r.fromValues(t.to[0],t.to[1]):r.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:i.ANY,this.callback=t.callback||function(t){},this.direction=r.create(),this.length=1,this.update()}function o(t,e,n){r.sub(s,n,t);var i=r.dot(s,e);return r.scale(l,e,i),r.add(l,l,t),r.squaredDistance(n,l)}e.exports=i;var r=t("../math/vec2");t("../collision/RaycastResult"),t("../shapes/Shape"),t("../collision/AABB"),i.prototype.constructor=i,i.CLOSEST=1,i.ANY=2,i.ALL=4,i.prototype.update=function(){var t=this.direction;r.sub(t,this.to,this.from),this.length=r.length(t),r.normalize(t,t)},i.prototype.intersectBodies=function(t,e){for(var n=0,i=e.length;!t.shouldStop(this)&&i>n;n++){var o=e[n],r=o.getAABB();(r.overlapsRay(this)>=0||r.containsPoint(this.from))&&this.intersectBody(t,o)}};var a=r.create();i.prototype.intersectBody=function(t,e){var n=this.checkCollisionResponse;if(!n||e.collisionResponse)for(var i=a,o=0,s=e.shapes.length;s>o;o++){var l=e.shapes[o];if((!n||l.collisionResponse)&&0!=(this.collisionGroup&l.collisionMask)&&0!=(l.collisionGroup&this.collisionMask)){r.rotate(i,l.position,e.angle),r.add(i,i,e.position);var c=l.angle+e.angle;if(this.intersectShape(t,l,c,i,e),t.shouldStop(this))break}}},i.prototype.intersectShape=function(t,e,n,i,r){o(this.from,this.direction,i)>e.boundingRadius*e.boundingRadius||(this._currentBody=r,this._currentShape=e,e.raycast(t,this,i,n),this._currentBody=this._currentShape=null)},i.prototype.getAABB=function(t){var e=this.to,n=this.from;r.set(t.lowerBound,Math.min(e[0],n[0]),Math.min(e[1],n[1])),r.set(t.upperBound,Math.max(e[0],n[0]),Math.max(e[1],n[1]))},r.create(),i.prototype.reportIntersection=function(t,e,n,o){var a=(this.from,this.to,this._currentShape),s=this._currentBody;if(!(this.skipBackfaces&&r.dot(n,this.direction)>0))switch(this.mode){case i.ALL:t.set(n,a,s,e,o),this.callback(t);break;case i.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(n,a,s,e,o);break;case i.ANY:t.set(n,a,s,e,o)}};var s=r.create(),l=r.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(t,e,n){function i(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}var o=t("../math/vec2"),r=t("../collision/Ray");e.exports=i,i.prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},i.prototype.getHitDistance=function(t){return o.distance(t.from,t.to)*this.fraction},i.prototype.hasHit=function(){return-1!==this.fraction},i.prototype.getHitPoint=function(t,e){o.lerp(t,e.from,e.to,this.fraction)},i.prototype.stop=function(){this.isStopped=!0},i.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===r.ANY},i.prototype.set=function(t,e,n,i,r){o.copy(this.normal,t),this.shape=e,this.body=n,this.fraction=i,this.faceIndex=r}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(t,e,n){function i(){r.call(this,r.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var n=t.axisList.indexOf(e.body);-1!==n&&t.axisList.splice(n,1)}}var o=t("../utils/Utils"),r=t("../collision/Broadphase");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.setWorld=function(t){this.axisList.length=0,o.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},i.sortAxisList=function(t,e){e|=0;for(var n=1,i=t.length;i>n;n++){for(var o=t[n],r=n-1;r>=0&&!(t[r].aabb.lowerBound[e]<=o.aabb.lowerBound[e]);r--)t[r+1]=t[r];t[r+1]=o}return t},i.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;i.sortAxisList(t,e)},i.prototype.getCollisionPairs=function(t){var e=this.axisList,n=this.result,i=this.axisIndex;n.length=0;for(var o=e.length;o--;){var a=e[o];a.aabbNeedsUpdate&&a.updateAABB()}this.sortList();for(var s=0,l=0|e.length;s!==l;s++)for(var c=e[s],u=s+1;l>u;u++){var f=e[u];if(!(f.aabb.lowerBound[i]<=c.aabb.upperBound[i]))break;r.canCollide(c,f)&&this.boundingVolumeCheck(c,f)&&n.push(c,f)}return n},i.prototype.aabbQuery=function(t,e,n){n=n||[],this.sortList();var i=this.axisIndex,o="x";1===i&&(o="y"),2===i&&(o="z");for(var r=this.axisList,a=(e.lowerBound[o],e.upperBound[o],0);a<r.length;a++){var s=r[a];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(e)&&n.push(s)}return n}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(t,e,n){function i(t,e,n,i){this.type=n,i=o.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}e.exports=i;var o=t("../utils/Utils");i.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},i.DISTANCE=1,i.GEAR=2,i.LOCK=3,i.PRISMATIC=4,i.REVOLUTE=5,i.prototype.setStiffness=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var i=e[n];i.stiffness=t,i.needsUpdate=!0}},i.prototype.setRelaxation=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var i=e[n];i.relaxation=t,i.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(t,e,n){function i(t,e,n){n=s.defaults(n,{localAnchorA:[0,0],localAnchorB:[0,0]}),o.call(this,t,e,o.DISTANCE,n),this.localAnchorA=a.fromValues(n.localAnchorA[0],n.localAnchorA[1]),this.localAnchorB=a.fromValues(n.localAnchorB[0],n.localAnchorB[1]);var i,l=this.localAnchorA,c=this.localAnchorB;if(this.distance=0,"number"==typeof n.distance)this.distance=n.distance;else{var u=a.create(),f=a.create(),v=a.create();a.rotate(u,l,t.angle),a.rotate(f,c,e.angle),a.add(v,e.position,f),a.sub(v,v,u),a.sub(v,v,t.position),this.distance=a.length(v)}i=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce;var h=new r(t,e,-i,i);this.equations=[h],this.maxForce=i;v=a.create();var d=a.create(),p=a.create(),_=this;h.computeGq=function(){var t=this.bodyA,e=this.bodyB,n=t.position,i=e.position;return a.rotate(d,l,t.angle),a.rotate(p,c,e.angle),a.add(v,i,p),a.sub(v,v,d),a.sub(v,v,n),a.length(v)-_.distance},this.setMaxForce(i),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var o=t("./Constraint"),r=t("../equations/Equation"),a=t("../math/vec2"),s=t("../utils/Utils");e.exports=i,i.prototype=new o,i.prototype.constructor=i;var l=a.create(),c=a.create(),u=a.create();i.prototype.update=function(){var t=this.equations[0],e=this.bodyA,n=this.bodyB,i=(this.distance,e.position),o=n.position,r=this.equations[0],s=t.G;a.rotate(c,this.localAnchorA,e.angle),a.rotate(u,this.localAnchorB,n.angle),a.add(l,o,u),a.sub(l,l,c),a.sub(l,l,i),this.position=a.length(l);var f=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(r.maxForce=0,r.minForce=-this.maxForce,this.distance=this.upperLimit,f=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(r.maxForce=this.maxForce,r.minForce=0,this.distance=this.lowerLimit,f=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||f){r.enabled=!0,a.normalize(l,l);var v=a.crossLength(c,l),h=a.crossLength(u,l);s[0]=-l[0],s[1]=-l[1],s[2]=-v,s[3]=l[0],s[4]=l[1],s[5]=h}else r.enabled=!1},i.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},i.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(t,e,n){function i(t,e,n){n=n||{},o.call(this,t,e,o.GEAR,n),this.ratio=void 0!==n.ratio?n.ratio:1,this.angle=void 0!==n.angle?n.angle:e.angle-this.ratio*t.angle,n.angle=this.angle,n.ratio=this.ratio,this.equations=[new r(t,e,n)],void 0!==n.maxTorque&&this.setMaxTorque(n.maxTorque)}var o=t("./Constraint"),r=(t("../equations/Equation"),t("../equations/AngleLockEquation"));t("../math/vec2"),e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},i.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},i.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(t,e,n){function i(t,e,n){n=n||{},o.call(this,t,e,o.LOCK,n);var i=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce,s=(n.localAngleB,new a(t,e,-i,i)),l=new a(t,e,-i,i),c=new a(t,e,-i,i),u=r.create(),f=r.create(),v=this;s.computeGq=function(){return r.rotate(u,v.localOffsetB,t.angle),r.sub(f,e.position,t.position),r.sub(f,f,u),f[0]},l.computeGq=function(){return r.rotate(u,v.localOffsetB,t.angle),r.sub(f,e.position,t.position),r.sub(f,f,u),f[1]};var h=r.create(),d=r.create();c.computeGq=function(){return r.rotate(h,v.localOffsetB,e.angle-v.localAngleB),r.scale(h,h,-1),r.sub(f,t.position,e.position),r.add(f,f,h),r.rotate(d,h,-Math.PI/2),r.normalize(d,d),r.dot(f,d)},this.localOffsetB=r.create(),n.localOffsetB?r.copy(this.localOffsetB,n.localOffsetB):(r.sub(this.localOffsetB,e.position,t.position),r.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof n.localAngleB?this.localAngleB=n.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(s,l,c),this.setMaxForce(i)}var o=t("./Constraint"),r=t("../math/vec2"),a=t("../equations/Equation");e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.setMaxForce=function(t){for(var e=this.equations,n=0;n<this.equations.length;n++)e[n].maxForce=t,e[n].minForce=-t},i.prototype.getMaxForce=function(){return this.equations[0].maxForce};var s=r.create(),l=r.create(),c=r.create(),u=r.fromValues(1,0),f=r.fromValues(0,1);i.prototype.update=function(){var t=this.equations[0],e=this.equations[1],n=this.equations[2],i=this.bodyA,o=this.bodyB;r.rotate(s,this.localOffsetB,i.angle),r.rotate(l,this.localOffsetB,o.angle-this.localAngleB),r.scale(l,l,-1),r.rotate(c,l,Math.PI/2),r.normalize(c,c),t.G[0]=-1,t.G[1]=0,t.G[2]=-r.crossLength(s,u),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-r.crossLength(s,f),e.G[4]=1,n.G[0]=-c[0],n.G[1]=-c[1],n.G[3]=c[0],n.G[4]=c[1],n.G[5]=r.crossLength(l,c)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(t,e,n){function i(t,e,n){n=n||{},o.call(this,t,e,o.PRISMATIC,n);var i=s.fromValues(0,0),c=s.fromValues(1,0),u=s.fromValues(0,0);n.localAnchorA&&s.copy(i,n.localAnchorA),n.localAxisA&&s.copy(c,n.localAxisA),n.localAnchorB&&s.copy(u,n.localAnchorB),this.localAnchorA=i,this.localAnchorB=u,this.localAxisA=c;var f=this.maxForce=void 0!==n.maxForce?n.maxForce:Number.MAX_VALUE,v=new a(t,e,-f,f),h=new s.create,d=new s.create,p=new s.create,_=new s.create;if(v.computeGq=function(){return s.dot(p,_)},v.updateJacobian=function(){var n=this.G,o=t.position,r=e.position;s.rotate(h,i,t.angle),s.rotate(d,u,e.angle),s.add(p,r,d),s.sub(p,p,o),s.sub(p,p,h),s.rotate(_,c,t.angle+Math.PI/2),n[0]=-_[0],n[1]=-_[1],n[2]=-s.crossLength(h,_)+s.crossLength(_,p),n[3]=_[0],n[4]=_[1],n[5]=s.crossLength(d,_)},this.equations.push(v),!n.disableRotationalLock){var g=new l(t,e,-f,f);this.equations.push(g)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==n.lowerLimit,this.upperLimitEnabled=void 0!==n.upperLimit,this.lowerLimit=void 0!==n.lowerLimit?n.lowerLimit:0,this.upperLimit=void 0!==n.upperLimit?n.upperLimit:1,this.upperLimitEquation=new r(t,e),this.lowerLimitEquation=new r(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=f,this.motorEquation=new a(t,e),this.motorEnabled=!1,this.motorSpeed=0;var y=this,m=this.motorEquation;m.computeGW,m.computeGq=function(){return 0},m.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,i=e.velocity,o=n.velocity,r=e.angularVelocity,a=n.angularVelocity;return this.gmult(t,i,r,o,a)+y.motorSpeed}}var o=t("./Constraint"),r=t("../equations/ContactEquation"),a=t("../equations/Equation"),s=t("../math/vec2"),l=t("../equations/RotationalLockEquation");e.exports=i,i.prototype=new o,i.prototype.constructor=i;var c=s.create(),u=s.create(),f=s.create(),v=s.create(),h=s.create(),d=s.create();i.prototype.update=function(){var t=this.equations,e=t[0],n=this.upperLimit,i=this.lowerLimit,o=this.upperLimitEquation,r=this.lowerLimitEquation,a=this.bodyA,l=this.bodyB,p=this.localAxisA,_=this.localAnchorA,g=this.localAnchorB;e.updateJacobian(),s.rotate(c,p,a.angle),s.rotate(v,_,a.angle),s.add(u,v,a.position),s.rotate(h,g,l.angle),s.add(f,h,l.position);var y,m=this.position=s.dot(f,c)-s.dot(u,c);if(this.motorEnabled){var b=this.motorEquation.G;b[0]=c[0],b[1]=c[1],b[2]=s.crossLength(c,h),b[3]=-c[0],b[4]=-c[1],b[5]=-s.crossLength(c,v)}this.upperLimitEnabled&&m>n?(s.scale(o.normalA,c,-1),s.sub(o.contactPointA,u,a.position),s.sub(o.contactPointB,f,l.position),s.scale(d,c,n),s.add(o.contactPointA,o.contactPointA,d),-1===t.indexOf(o)&&t.push(o)):-1!==(y=t.indexOf(o))&&t.splice(y,1);this.lowerLimitEnabled&&i>m?(s.scale(r.normalA,c,1),s.sub(r.contactPointA,u,a.position),s.sub(r.contactPointB,f,l.position),s.scale(d,c,i),s.sub(r.contactPointB,r.contactPointB,d),-1===t.indexOf(r)&&t.push(r)):-1!==(y=t.indexOf(r))&&t.splice(y,1)},i.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},i.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},i.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(t,e,n){function i(t,e,n){n=n||{},o.call(this,t,e,o.REVOLUTE,n);var i=this.maxForce=void 0!==n.maxForce?n.maxForce:Number.MAX_VALUE;this.pivotA=l.create(),this.pivotB=l.create(),n.worldPivot?(l.sub(this.pivotA,n.worldPivot,t.position),l.sub(this.pivotB,n.worldPivot,e.position),l.rotate(this.pivotA,this.pivotA,-t.angle),l.rotate(this.pivotB,this.pivotB,-e.angle)):(l.copy(this.pivotA,n.localPivotA),l.copy(this.pivotB,n.localPivotB));var d=this.equations=[new r(t,e,-i,i),new r(t,e,-i,i)],p=d[0],_=d[1],g=this;p.computeGq=function(){return l.rotate(c,g.pivotA,t.angle),l.rotate(u,g.pivotB,e.angle),l.add(h,e.position,u),l.sub(h,h,t.position),l.sub(h,h,c),l.dot(h,f)},_.computeGq=function(){return l.rotate(c,g.pivotA,t.angle),l.rotate(u,g.pivotB,e.angle),l.add(h,e.position,u),l.sub(h,h,t.position),l.sub(h,h,c),l.dot(h,v)},_.minForce=p.minForce=-i,_.maxForce=p.maxForce=i,this.motorEquation=new a(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new s(t,e),this.lowerLimitEquation=new s(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var o=t("./Constraint"),r=t("../equations/Equation"),a=t("../equations/RotationalVelocityEquation"),s=t("../equations/RotationalLockEquation"),l=t("../math/vec2");e.exports=i;var c=l.create(),u=l.create(),f=l.fromValues(1,0),v=l.fromValues(0,1),h=l.create();i.prototype=new o,i.prototype.constructor=i,i.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},i.prototype.update=function(){var t,e=this.bodyA,n=this.bodyB,i=this.pivotA,o=this.pivotB,r=this.equations,a=(r[0],r[1],r[0]),s=r[1],h=this.upperLimit,d=this.lowerLimit,p=this.upperLimitEquation,_=this.lowerLimitEquation,g=this.angle=n.angle-e.angle;this.upperLimitEnabled&&g>h?(p.angle=h,-1===r.indexOf(p)&&r.push(p)):-1!==(t=r.indexOf(p))&&r.splice(t,1);this.lowerLimitEnabled&&d>g?(_.angle=d,-1===r.indexOf(_)&&r.push(_)):-1!==(t=r.indexOf(_))&&r.splice(t,1);l.rotate(c,i,e.angle),l.rotate(u,o,n.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-l.crossLength(c,f),a.G[3]=1,a.G[4]=0,a.G[5]=l.crossLength(u,f),s.G[0]=0,s.G[1]=-1,s.G[2]=-l.crossLength(c,v),s.G[3]=0,s.G[4]=1,s.G[5]=l.crossLength(u,v)},i.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},i.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},i.prototype.motorIsEnabled=function(){return!!this.motorEnabled},i.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},i.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(t,e,n){function i(t,e,n){n=n||{},o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0,this.ratio="number"==typeof n.ratio?n.ratio:1,this.setRatio(this.ratio)}var o=t("./Equation");t("../math/vec2"),e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},i.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},i.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},{"../math/vec2":30,"./Equation":22}],21:[function(t,e,n){function i(t,e){o.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=r.create(),this.penetrationVec=r.create(),this.contactPointB=r.create(),this.normalA=r.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var o=t("./Equation"),r=t("../math/vec2");e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeB=function(t,e,n){var i,o,a=this.bodyA,s=this.bodyB,l=this.contactPointA,c=this.contactPointB,u=a.position,f=s.position,v=this.penetrationVec,h=this.normalA,d=this.G,p=r.crossLength(l,h),_=r.crossLength(c,h);return d[0]=-h[0],d[1]=-h[1],d[2]=-p,d[3]=h[0],d[4]=h[1],d[5]=_,r.add(v,f,c),r.sub(v,v,u),r.sub(v,v,l),this.firstImpact&&0!==this.restitution?(o=0,i=1/e*(1+this.restitution)*this.computeGW()):(o=r.dot(h,v)+this.offset,i=this.computeGW()),-o*t-i*e-n*this.computeGiMf()};var a=r.create(),s=r.create(),l=r.create();i.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(a,this.contactPointA),this.bodyB.getVelocityAtPoint(s,this.contactPointB),r.subtract(l,a,s),r.dot(this.normalA,l)}},{"../math/vec2":30,"./Equation":22}],22:[function(t,e,n){function i(t,e,n,o){this.minForce=void 0===n?-Number.MAX_VALUE:n,this.maxForce=void 0===o?Number.MAX_VALUE:o,this.bodyA=t,this.bodyB=e,this.stiffness=i.DEFAULT_STIFFNESS,this.relaxation=i.DEFAULT_RELAXATION,this.G=new r.ARRAY_TYPE(6);for(var a=0;6>a;a++)this.G[a]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}e.exports=i;var o=t("../math/vec2"),r=t("../utils/Utils");t("../objects/Body"),i.prototype.constructor=i,i.DEFAULT_STIFFNESS=1e6,i.DEFAULT_RELAXATION=4,i.prototype.update=function(){var t=this.stiffness,e=this.relaxation,n=this.timeStep;this.a=4/(n*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(n*n*t*(1+4*e)),this.needsUpdate=!1},i.prototype.gmult=function(t,e,n,i,o){return t[0]*e[0]+t[1]*e[1]+t[2]*n+t[3]*i[0]+t[4]*i[1]+t[5]*o},i.prototype.computeB=function(t,e,n){var i=this.computeGW();return-this.computeGq()*t-i*e-this.computeGiMf()*n};var a=o.create(),s=o.create();i.prototype.computeGq=function(){var t=this.G,e=this.bodyA,n=this.bodyB,i=(e.position,n.position,e.angle),o=n.angle;return this.gmult(t,a,i,s,o)+this.offset},i.prototype.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,i=e.velocity,o=n.velocity,r=e.angularVelocity,a=n.angularVelocity;return this.gmult(t,i,r,o,a)+this.relativeVelocity},i.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,n=this.bodyB,i=e.vlambda,o=n.vlambda,r=e.wlambda,a=n.wlambda;return this.gmult(t,i,r,o,a)};var l=o.create(),c=o.create();i.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,n=t.force,i=t.angularForce,r=e.force,a=e.angularForce,s=t.invMassSolve,u=e.invMassSolve,f=t.invInertiaSolve,v=e.invInertiaSolve,h=this.G;return o.scale(l,n,s),o.multiply(l,t.massMultiplier,l),o.scale(c,r,u),o.multiply(c,e.massMultiplier,c),this.gmult(h,l,i*f,c,a*v)},i.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,n=t.invMassSolve,i=e.invMassSolve,o=t.invInertiaSolve,r=e.invInertiaSolve,a=this.G;return a[0]*a[0]*n*t.massMultiplier[0]+a[1]*a[1]*n*t.massMultiplier[1]+a[2]*a[2]*o+a[3]*a[3]*i*e.massMultiplier[0]+a[4]*a[4]*i*e.massMultiplier[1]+a[5]*a[5]*r};var u=o.create(),f=o.create(),v=o.create();o.create(),o.create(),o.create(),i.prototype.addToWlambda=function(t){var e=this.bodyA,n=this.bodyB,i=u,r=f,a=v,s=e.invMassSolve,l=n.invMassSolve,c=e.invInertiaSolve,h=n.invInertiaSolve,d=this.G;r[0]=d[0],r[1]=d[1],a[0]=d[3],a[1]=d[4],o.scale(i,r,s*t),o.multiply(i,i,e.massMultiplier),o.add(e.vlambda,e.vlambda,i),e.wlambda+=c*d[2]*t,o.scale(i,a,l*t),o.multiply(i,i,n.massMultiplier),o.add(n.vlambda,n.vlambda,i),n.wlambda+=h*d[5]*t},i.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(t,e,n){function i(t,e,n){r.call(this,t,e,-n,n),this.contactPointA=o.create(),this.contactPointB=o.create(),this.t=o.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var o=t("../math/vec2"),r=t("./Equation");t("../utils/Utils"),e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},i.prototype.getSlipForce=function(){return this.maxForce},i.prototype.computeB=function(t,e,n){var i=(this.bodyA,this.bodyB,this.contactPointA),r=this.contactPointB,a=this.t,s=this.G;return s[0]=-a[0],s[1]=-a[1],s[2]=-o.crossLength(i,a),s[3]=a[0],s[4]=a[1],s[5]=o.crossLength(r,a),-this.computeGW()*e-n*this.computeGiMf()}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(t,e,n){function i(t,e,n){n=n||{},o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0;var i=this.G;i[2]=1,i[5]=-1}var o=t("./Equation"),r=t("../math/vec2");e.exports=i,i.prototype=new o,i.prototype.constructor=i;var a=r.create(),s=r.create(),l=r.fromValues(1,0),c=r.fromValues(0,1);i.prototype.computeGq=function(){return r.rotate(a,l,this.bodyA.angle+this.angle),r.rotate(s,c,this.bodyB.angle),r.dot(a,s)}},{"../math/vec2":30,"./Equation":22}],25:[function(t,e,n){function i(t,e){o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var o=t("./Equation");t("../math/vec2"),e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeB=function(t,e,n){var i=this.G;i[2]=-1,i[5]=this.ratio;var o=this.computeGiMf();return-this.computeGW()*e-n*o}},{"../math/vec2":30,"./Equation":22}],26:[function(t,e,n){var i=function(){};e.exports=i,i.prototype={constructor:i,on:function(t,e,n){e.context=n||this,void 0===this._listeners&&(this._listeners={});var i=this._listeners;return void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;if(e){if(void 0!==n[t]&&-1!==n[t].indexOf(e))return!0}else if(void 0!==n[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var n=this._listeners,i=n[t].indexOf(e);return-1!==i&&n[t].splice(i,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,i=e.length;i>n;n++){var o=e[n];o.call(o.context,t)}}return this}}},{}],27:[function(t,e,n){function i(t,e,n){if(n=n||{},!(t instanceof o&&e instanceof o))throw new Error("First two arguments must be Material instances.");this.id=i.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==n.friction?Number(n.friction):.3,this.restitution=void 0!==n.restitution?Number(n.restitution):0,this.stiffness=void 0!==n.stiffness?Number(n.stiffness):r.DEFAULT_STIFFNESS,this.relaxation=void 0!==n.relaxation?Number(n.relaxation):r.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==n.frictionStiffness?Number(n.frictionStiffness):r.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==n.frictionRelaxation?Number(n.frictionRelaxation):r.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==n.surfaceVelocity?Number(n.surfaceVelocity):0,this.contactSkinSize=.005}var o=t("./Material"),r=t("../equations/Equation");e.exports=i,i.idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(t,e,n){function i(t){this.id=t||i.idCounter++}e.exports=i,i.idCounter=0},{}],29:[function(t,e,n){var i={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,n=0,i=0;e>i;i+=2)n+=(t[i+2]-t[i])*(t[i+1]+t[i+3]);return.5*-(n+=(t[0]-t[e])*(t[e+1]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(3>e)return[];for(var n=[],o=[],r=0;e>r;r++)o.push(r);r=0;for(var a=e;a>3;){var s=o[(r+0)%a],l=o[(r+1)%a],c=o[(r+2)%a],u=t[2*s],f=t[2*s+1],v=t[2*l],h=t[2*l+1],d=t[2*c],p=t[2*c+1],_=!1;if(i._convex(u,f,v,h,d,p)){_=!0;for(var g=0;a>g;g++){var y=o[g];if(y!=s&&y!=l&&y!=c&&i._PointInTriangle(t[2*y],t[2*y+1],u,f,v,h,d,p)){_=!1;break}}}if(_)n.push(s,l,c),o.splice((r+1)%a,1),a--,r=0;else if(r++>3*a)break}return n.push(o[0],o[1],o[2]),n},_PointInTriangle:function(t,e,n,i,o,r,a,s){var l=a-n,c=s-i,u=o-n,f=r-i,v=t-n,h=e-i,d=l*l+c*c,p=l*u+c*f,_=l*v+c*h,g=u*u+f*f,y=u*v+f*h,m=1/(d*g-p*p),b=(g*_-p*y)*m,x=(d*y-p*_)*m;return b>=0&&x>=0&&1>b+x},_convex:function(t,e,n,i,o,r){return(e-i)*(o-n)+(n-t)*(r-i)>=0}};e.exports=i},{}],30:[function(t,e,n){var i=e.exports={},o=t("../utils/Utils");i.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},i.crossVZ=function(t,e,n){return i.rotate(t,e,-Math.PI/2),i.scale(t,t,n),t},i.crossZV=function(t,e,n){return i.rotate(t,n,Math.PI/2),i.scale(t,t,e),t},i.rotate=function(t,e,n){if(0!==n){var i=Math.cos(n),o=Math.sin(n),r=e[0],a=e[1];t[0]=i*r-o*a,t[1]=o*r+i*a}else t[0]=e[0],t[1]=e[1]},i.rotate90cw=function(t,e){var n=e[0],i=e[1];t[0]=i,t[1]=-n},i.toLocalFrame=function(t,e,n,o){i.copy(t,e),i.sub(t,t,n),i.rotate(t,t,-o)},i.toGlobalFrame=function(t,e,n,o){i.copy(t,e),i.rotate(t,t,o),i.add(t,t,n)},i.vectorToLocalFrame=function(t,e,n){i.rotate(t,e,-n)},i.vectorToGlobalFrame=function(t,e,n){i.rotate(t,e,n)},i.centroid=function(t,e,n,o){return i.add(t,e,n),i.add(t,t,o),i.scale(t,t,1/3),t},i.create=function(){var t=new o.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new o.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var n=new o.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,n){return t[0]=e,t[1]=n,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},i.div=i.divide,i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},i.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.normalize=function(t,e){var n=e[0],i=e[1],o=n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},i.lerp=function(t,e,n,i){var o=e[0],r=e[1];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t},i.reflect=function(t,e,n){var i=e[0]*n[0]+e[1]*n[1];t[0]=e[0]-2*n[0]*i,t[1]=e[1]-2*n[1]*i},i.getLineSegmentsIntersection=function(t,e,n,o,r){var a=i.getLineSegmentsIntersectionFraction(e,n,o,r);return!(0>a)&&(t[0]=e[0]+a*(n[0]-e[0]),t[1]=e[1]+a*(n[1]-e[1]),!0)},i.getLineSegmentsIntersectionFraction=function(t,e,n,i){var o,r,a=e[0]-t[0],s=e[1]-t[1],l=i[0]-n[0],c=i[1]-n[1];return o=(-s*(t[0]-n[0])+a*(t[1]-n[1]))/(-l*s+a*c),r=(l*(t[1]-n[1])-c*(t[0]-n[0]))/(-l*s+a*c),o>=0&&1>=o&&r>=0&&1>=r?r:-1}},{"../utils/Utils":57}],31:[function(t,e,n){function i(t){t=t||{},u.call(this),this.id=t.id||++i._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=o.create(),this.position=o.fromValues(0,0),t.position&&o.copy(this.position,t.position),this.interpolatedPosition=o.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=o.fromValues(0,0),this.previousAngle=0,this.velocity=o.fromValues(0,0),t.velocity&&o.copy(this.velocity,t.velocity),this.vlambda=o.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=o.create(),t.force&&o.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=i.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=i.DYNAMIC:this.type=i.STATIC,this.boundingRadius=0,this.aabb=new c,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=i.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var o=t("../math/vec2"),r=t("poly-decomp"),a=t("../shapes/Convex"),s=t("../collision/RaycastResult"),l=t("../collision/Ray"),c=t("../collision/AABB"),u=t("../events/EventEmitter");e.exports=i,i.prototype=new u,i.prototype.constructor=i,i._idCounter=0,i.prototype.updateSolveMassProperties=function(){this.sleepState===i.SLEEPING||this.type===i.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},i.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},i.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},i.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var f=new c,v=o.create();i.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,n=v,i=this.angle,r=0;r!==e;r++){var a=t[r],s=a.angle+i;o.rotate(n,a.position,i),o.add(n,n,this.position),a.computeAABB(f,n,s),0===r?this.aabb.copy(f):this.aabb.extend(f)}this.aabbNeedsUpdate=!1},i.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,n=0,i=0;i!==e;i++){var r=t[i],a=o.length(r.position),s=r.boundingRadius;a+s>n&&(n=a+s)}this.boundingRadius=n},i.prototype.addShape=function(t,e,n){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?o.copy(t.position,e):o.set(t.position,0,0),t.angle=n||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},i.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},i.prototype.updateMassProperties=function(){if(this.type===i.STATIC||this.type===i.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,n=this.mass/e,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var a=0;e>a;a++){var s=t[a],l=o.squaredLength(s.position);r+=s.computeMomentOfInertia(n)+n*l}this.inertia=r,this.invInertia=r>0?1/r:0}this.invMass=1/this.mass,o.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}},o.create(),i.prototype.applyForce=function(t,e){if(o.add(this.force,this.force,t),e){var n=o.crossLength(e,t);this.angularForce+=n}};var h=o.create(),d=o.create(),p=o.create();i.prototype.applyForceLocal=function(t,e){e=e||p;var n=h,i=d;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(i,e),this.applyForce(n,i)};var _=o.create();i.prototype.applyImpulse=function(t,e){if(this.type===i.DYNAMIC){var n=_;if(o.scale(n,t,this.invMass),o.multiply(n,this.massMultiplier,n),o.add(this.velocity,n,this.velocity),e){var r=o.crossLength(e,t);r*=this.invInertia,this.angularVelocity+=r}}};var g=o.create(),y=o.create(),m=o.create();i.prototype.applyImpulseLocal=function(t,e){e=e||m;var n=g,i=y;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(i,e),this.applyImpulse(n,i)},i.prototype.toLocalFrame=function(t,e){o.toLocalFrame(t,e,this.position,this.angle)},i.prototype.toWorldFrame=function(t,e){o.toGlobalFrame(t,e,this.position,this.angle)},i.prototype.vectorToLocalFrame=function(t,e){o.vectorToLocalFrame(t,e,this.angle)},i.prototype.vectorToWorldFrame=function(t,e){o.vectorToGlobalFrame(t,e,this.angle)},i.prototype.fromPolygon=function(t,e){e=e||{};for(var n=this.shapes.length;n>=0;--n)this.removeShape(this.shapes[n]);var i,s=new r.Polygon;if(s.vertices=t,s.makeCCW(),"number"==typeof e.removeCollinearPoints&&s.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!s.isSimple())return!1;this.concavePath=s.vertices.slice(0);for(n=0;n<this.concavePath.length;n++){var l=[0,0];o.copy(l,this.concavePath[n]),this.concavePath[n]=l}i=e.optimalDecomp?s.decomp():s.quickDecomp();var c=o.create();for(n=0;n!==i.length;n++){for(var u=new a({vertices:i[n].vertices}),f=0;f!==u.vertices.length;f++){l=u.vertices[f];o.sub(l,l,u.centerOfMass)}o.scale(c,u.centerOfMass,1),u.updateTriangles(),u.updateCenterOfMass(),u.updateBoundingRadius(),this.addShape(u,c)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};var b=(o.fromValues(0,0),o.fromValues(0,0)),x=o.fromValues(0,0),w=o.fromValues(0,0);i.prototype.adjustCenterOfMass=function(){var t=b,e=x,n=w,i=0;o.set(e,0,0);for(var r=0;r!==this.shapes.length;r++){var a=this.shapes[r];o.scale(t,a.position,a.area),o.add(e,e,t),i+=a.area}o.scale(n,e,1/i);for(r=0;r!==this.shapes.length;r++){a=this.shapes[r];o.sub(a.position,a.position,n)}o.add(this.position,this.position,n);for(r=0;this.concavePath&&r<this.concavePath.length;r++)o.sub(this.concavePath[r],this.concavePath[r],n);this.updateMassProperties(),this.updateBoundingRadius()},i.prototype.setZeroForce=function(){o.set(this.force,0,0),this.angularForce=0},i.prototype.resetConstraintVelocity=function(){var t=this.vlambda;o.set(t,0,0),this.wlambda=0},i.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;o.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},i.prototype.applyDamping=function(t){if(this.type===i.DYNAMIC){var e=this.velocity;o.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},i.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=i.AWAKE,this.idleTime=0,t!==i.AWAKE&&this.emit(i.wakeUpEvent)},i.prototype.sleep=function(){this.sleepState=i.SLEEPING,this.angularVelocity=0,this.angularForce=0,o.set(this.velocity,0,0),o.set(this.force,0,0),this.emit(i.sleepEvent)},i.prototype.sleepTick=function(t,e,n){this.allowSleep&&this.type!==i.SLEEPING&&(this.wantsToSleep=!1,(this.sleepState,o.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2))>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=i.AWAKE):(this.idleTime+=n,this.sleepState=i.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep()))},i.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var A=o.create(),M=o.create();i.prototype.integrate=function(t){var e=this.invMass,n=this.force,i=this.position,r=this.velocity;o.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),o.scale(A,n,t*e),o.multiply(A,this.massMultiplier,A),o.add(r,A,r),this.integrateToTimeOfImpact(t)||(o.scale(M,r,t),o.add(i,i,M),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var S=new s,T=new l({mode:l.ALL}),B=o.create(),E=o.create(),F=o.create(),R=o.create();i.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||o.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;o.normalize(B,this.velocity),o.scale(E,this.velocity,t),o.add(E,E,this.position),o.sub(F,E,this.position);var e,n=this.angularVelocity*t,i=o.length(F),r=1,a=this;if(S.reset(),T.callback=function(t){t.body!==a&&(e=t.body,t.getHitPoint(E,T),o.sub(F,E,a.position),r=o.length(F)/i,t.stop())},o.copy(T.from,this.position),o.copy(T.to,E),T.update(),this.world.raycast(S,T),!e)return!1;var s=this.angle;o.copy(R,this.position);for(var l=0,c=0,u=0,f=r;f>=c&&l<this.ccdIterations;){l++,u=(f-c)/2,o.scale(M,F,r),o.add(this.position,R,M),this.angle=s+n*r,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?c=u:f=u}return r=u,o.copy(this.position,R),this.angle=s,o.scale(M,F,r),o.add(this.position,this.position,M),this.fixedRotation||(this.angle+=n*r),!0},i.prototype.getVelocityAtPoint=function(t,e){return o.crossVZ(t,e,this.angularVelocity),o.subtract(t,this.velocity,t),t},i.sleepyEvent={type:"sleepy"},i.sleepEvent={type:"sleep"},i.wakeUpEvent={type:"wakeup"},i.DYNAMIC=1,i.STATIC=2,i.KINEMATIC=4,i.AWAKE=0,i.SLEEPY=1,i.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(t,e,n){function i(t,e,n){n=n||{},r.call(this,t,e,n),this.localAnchorA=o.fromValues(0,0),this.localAnchorB=o.fromValues(0,0),n.localAnchorA&&o.copy(this.localAnchorA,n.localAnchorA),n.localAnchorB&&o.copy(this.localAnchorB,n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB);var i=o.create(),a=o.create();this.getWorldAnchorA(i),this.getWorldAnchorB(a);var s=o.distance(i,a);this.restLength="number"==typeof n.restLength?n.restLength:s}var o=t("../math/vec2"),r=t("./Spring");t("../utils/Utils"),e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},i.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},i.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},i.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var a=o.create(),s=o.create(),l=o.create(),c=o.create(),u=o.create(),f=o.create(),v=o.create(),h=o.create(),d=o.create();i.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restLength,i=this.bodyA,r=this.bodyB,p=a,_=s,g=l,y=c,m=d,b=u,x=f,w=v,A=h;this.getWorldAnchorA(b),this.getWorldAnchorB(x),o.sub(w,b,i.position),o.sub(A,x,r.position),o.sub(p,x,b);var M=o.len(p);o.normalize(_,p),o.sub(g,r.velocity,i.velocity),o.crossZV(m,r.angularVelocity,A),o.add(g,g,m),o.crossZV(m,i.angularVelocity,w),o.sub(g,g,m),o.scale(y,_,-t*(M-n)-e*o.dot(g,_)),o.sub(i.force,i.force,y),o.add(r.force,r.force,y);var S=o.crossLength(w,y),T=o.crossLength(A,y);i.angularForce-=S,r.angularForce+=T}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(t,e,n){function i(t,e,n){n=n||{},o.call(this,t,e,n),this.restAngle="number"==typeof n.restAngle?n.restAngle:e.angle-t.angle}var o=(t("../math/vec2"),t("./Spring"));e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restAngle,i=this.bodyA,o=this.bodyB,r=-t*(o.angle-i.angle-n)-e*(o.angularVelocity-i.angularVelocity)*0;i.angularForce-=r,o.angularForce+=r}},{"../math/vec2":30,"./Spring":34}],34:[function(t,e,n){function i(t,e,n){n=o.defaults(n,{stiffness:100,damping:1}),this.stiffness=n.stiffness,this.damping=n.damping,this.bodyA=t,this.bodyB=e}var o=(t("../math/vec2"),t("../utils/Utils"));e.exports=i,i.prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(t,e,n){function i(t,e){e=e||{},this.chassisBody=t,this.wheels=[],this.groundBody=new l({mass:0}),this.world=null;var n=this;this.preStepCallback=function(){n.update()}}function o(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new s(t.chassisBody,t.groundBody),this.sideEquation=new s(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=r.fromValues(0,1),e.localForwardVector&&r.copy(this.localForwardVector,e.localForwardVector),this.localPosition=r.fromValues(0,0),e.localPosition&&r.copy(this.localPosition,e.localPosition),a.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var r=t("../math/vec2"),a=(t("../utils/Utils"),t("../constraints/Constraint")),s=t("../equations/FrictionEquation"),l=t("../objects/Body");e.exports=i,i.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.addConstraint(n)}},i.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.removeConstraint(n)}this.world=null},i.prototype.addWheel=function(t){var e=new o(this,t);return this.wheels.push(e),e},i.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},o.prototype=new a,o.prototype.setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},o.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var c=r.create(),u=r.create();o.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(u,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(c,u),r.dot(c,u)};var f=r.create();o.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),r.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),r.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),r.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),r.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),r.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),r.normalize(f,this.forwardEquation.t),r.scale(f,f,this.engineForce),this.vehicle.chassisBody.applyForce(f,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(t,e,n){var i=e.exports={AABB:t("./collision/AABB"),AngleLockEquation:t("./equations/AngleLockEquation"),Body:t("./objects/Body"),Broadphase:t("./collision/Broadphase"),Capsule:t("./shapes/Capsule"),Circle:t("./shapes/Circle"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),ContactEquationPool:t("./utils/ContactEquationPool"),ContactMaterial:t("./material/ContactMaterial"),Convex:t("./shapes/Convex"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventEmitter:t("./events/EventEmitter"),FrictionEquation:t("./equations/FrictionEquation"),FrictionEquationPool:t("./utils/FrictionEquationPool"),GearConstraint:t("./constraints/GearConstraint"),GSSolver:t("./solver/GSSolver"),Heightfield:t("./shapes/Heightfield"),Line:t("./shapes/Line"),LockConstraint:t("./constraints/LockConstraint"),Material:t("./material/Material"),Narrowphase:t("./collision/Narrowphase"),NaiveBroadphase:t("./collision/NaiveBroadphase"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),Pool:t("./utils/Pool"),RevoluteConstraint:t("./constraints/RevoluteConstraint"),PrismaticConstraint:t("./constraints/PrismaticConstraint"),Ray:t("./collision/Ray"),RaycastResult:t("./collision/RaycastResult"),Box:t("./shapes/Box"),RotationalVelocityEquation:t("./equations/RotationalVelocityEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Spring:t("./objects/Spring"),TopDownVehicle:t("./objects/TopDownVehicle"),LinearSpring:t("./objects/LinearSpring"),RotationalSpring:t("./objects/RotationalSpring"),Utils:t("./utils/Utils"),World:t("./world/World"),vec2:t("./math/vec2"),version:t("../package.json").version};Object.defineProperty(i,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(t,e,n){function i(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,n=this.height=t.height||1,i=[o.fromValues(-e/2,-n/2),o.fromValues(e/2,-n/2),o.fromValues(e/2,n/2),o.fromValues(-e/2,n/2)],s=[o.fromValues(1,0),o.fromValues(0,1)];t.vertices=i,t.axes=s,t.type=r.BOX,a.call(this,t)}var o=t("../math/vec2"),r=t("./Shape"),a=t("./Convex");e.exports=i,i.prototype=new a,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){var e=this.width,n=this.height;return t*(n*n+e*e)/12},i.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2},o.create(),o.create(),o.create(),o.create(),i.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)},i.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(t,e,n){function i(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=o.CAPSULE,o.call(this,t)}var o=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){var e=this.radius,n=this.length+e,i=2*e;return t*(i*i+n*n)/12},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},i.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var a=r.create();i.prototype.computeAABB=function(t,e,n){var i=this.radius;r.set(a,this.length/2,0),0!==n&&r.rotate(a,a,n),r.set(t.upperBound,Math.max(a[0]+i,-a[0]+i),Math.max(a[1]+i,-a[1]+i)),r.set(t.lowerBound,Math.min(a[0]-i,-a[0]-i),Math.min(a[1]-i,-a[1]-i)),r.add(t.lowerBound,t.lowerBound,e),r.add(t.upperBound,t.upperBound,e)};var s=r.create(),l=r.create(),c=r.create(),u=r.create(),f=r.fromValues(0,1);i.prototype.raycast=function(t,e,n,i){for(var o=e.from,a=e.to,v=(e.direction,s),h=l,d=c,p=u,_=this.length/2,g=0;2>g;g++){var y=this.radius*(2*g-1);if(r.set(d,-_,y),r.set(p,_,y),r.toGlobalFrame(d,d,n,i),r.toGlobalFrame(p,p,n,i),(b=r.getLineSegmentsIntersectionFraction(o,a,d,p))>=0&&(r.rotate(h,f,i),r.scale(h,h,2*g-1),e.reportIntersection(t,b,h,-1),t.shouldStop(e)))return}var m=Math.pow(this.radius,2)+Math.pow(_,2);for(g=0;2>g;g++){r.set(d,_*(2*g-1),0),r.toGlobalFrame(d,d,n,i);var b,x=Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2),w=2*((a[0]-o[0])*(o[0]-d[0])+(a[1]-o[1])*(o[1]-d[1])),A=Math.pow(o[0]-d[0],2)+Math.pow(o[1]-d[1],2)-Math.pow(this.radius,2);if(!(0>(b=Math.pow(w,2)-4*x*A)))if(0===b){if(r.lerp(v,o,a,b),r.squaredDistance(v,n)>m&&(r.sub(h,v,d),r.normalize(h,h),e.reportIntersection(t,b,h,-1),t.shouldStop(e)))return}else{var M=Math.sqrt(b),S=1/(2*x),T=(-w-M)*S,B=(-w+M)*S;if(T>=0&&1>=T&&(r.lerp(v,o,a,T),r.squaredDistance(v,n)>m&&(r.sub(h,v,d),r.normalize(h,h),e.reportIntersection(t,T,h,-1),t.shouldStop(e))))return;if(B>=0&&1>=B&&(r.lerp(v,o,a,B),r.squaredDistance(v,n)>m&&(r.sub(h,v,d),r.normalize(h,h),e.reportIntersection(t,B,h,-1),t.shouldStop(e))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(t,e,n){function i(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=o.CIRCLE,o.call(this,t)}var o=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},i.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},i.prototype.computeAABB=function(t,e,n){var i=this.radius;r.set(t.upperBound,i,i),r.set(t.lowerBound,-i,-i),e&&(r.add(t.lowerBound,t.lowerBound,e),r.add(t.upperBound,t.upperBound,e))};var a=r.create(),s=r.create();i.prototype.raycast=function(t,e,n,i){var o=e.from,l=e.to,c=this.radius,u=Math.pow(l[0]-o[0],2)+Math.pow(l[1]-o[1],2),f=2*((l[0]-o[0])*(o[0]-n[0])+(l[1]-o[1])*(o[1]-n[1])),v=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2)-Math.pow(c,2),h=Math.pow(f,2)-4*u*v,d=a,p=s;if(!(0>h))if(0===h)r.lerp(d,o,l,h),r.sub(p,d,n),r.normalize(p,p),e.reportIntersection(t,h,p,-1);else{var _=Math.sqrt(h),g=1/(2*u),y=(-f-_)*g,m=(-f+_)*g;if(y>=0&&1>=y&&(r.lerp(d,o,l,y),r.sub(p,d,n),r.normalize(p,p),e.reportIntersection(t,y,p,-1),t.shouldStop(e)))return;m>=0&&1>=m&&(r.lerp(d,o,l,m),r.sub(p,d,n),r.normalize(p,p),e.reportIntersection(t,m,p,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(t,e,n){function i(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],n=0;n<e.length;n++){var i=r.create();r.copy(i,e[n]),this.vertices.push(i)}if(this.axes=[],t.axes)for(n=0;n<t.axes.length;n++){var a=r.create();r.copy(a,t.axes[n]),this.axes.push(a)}else for(n=0;n<this.vertices.length;n++){var s=this.vertices[n],l=this.vertices[(n+1)%this.vertices.length],c=r.create();r.sub(c,l,s),r.rotate90cw(c,c),r.normalize(c,c),this.axes.push(c)}if(this.centerOfMass=r.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=o.CONVEX,o.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var o=t("./Shape"),r=t("../math/vec2"),a=t("../math/polyk");t("poly-decomp"),e.exports=i,i.prototype=new o,i.prototype.constructor=i;var s=r.create(),l=r.create();i.prototype.projectOntoLocalAxis=function(t,e){for(var n,i,o=null,a=null,l=(t=s,0);l<this.vertices.length;l++)n=this.vertices[l],i=r.dot(n,t),(null===o||i>o)&&(o=i),(null===a||a>i)&&(a=i);if(a>o){var c=a;a=o,o=c}r.set(e,a,o)},i.prototype.projectOntoWorldAxis=function(t,e,n,i){var o=l;this.projectOntoLocalAxis(t,i),0!==n?r.rotate(o,t,n):o=t;var a=r.dot(e,o);r.set(i,i[0]+a,i[1]+a)},i.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var n=this.vertices[e];t.push(n[0],n[1])}var i=a.Triangulate(t);for(e=0;e<i.length;e+=3){var o=i[e],r=i[e+1],s=i[e+2];this.triangles.push([o,r,s])}};var c=r.create(),u=r.create(),f=r.create(),v=r.create(),h=r.create();r.create(),r.create(),r.create(),r.create(),i.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,n=this.centerOfMass,o=c,a=f,s=v,l=h,d=u;r.set(n,0,0);for(var p=0,_=0;_!==t.length;_++){var g=t[_];a=e[g[0]],s=e[g[1]],l=e[g[2]];r.centroid(o,a,s,l);var y=i.triangleArea(a,s,l);p+=y,r.scale(d,o,y),r.add(n,n,d)}r.scale(n,n,1/p)},i.prototype.computeMomentOfInertia=function(t){for(var e=0,n=0,i=this.vertices.length,o=i-1,a=0;i>a;o=a,a++){var s=this.vertices[o],l=this.vertices[a],c=Math.abs(r.crossLength(s,l));e+=c*(r.dot(l,l)+r.dot(l,s)+r.dot(s,s)),n+=c}return t/6*(e/n)},i.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,n=0;n!==t.length;n++){var i=r.squaredLength(t[n]);i>e&&(e=i)}this.boundingRadius=Math.sqrt(e)},i.triangleArea=function(t,e,n){return.5*((e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1]))},i.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,n=0;n!==t.length;n++){var o=t[n],r=e[o[0]],a=e[o[1]],s=e[o[2]],l=i.triangleArea(r,a,s);this.area+=l}},i.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)};var d=r.create(),p=r.create(),_=r.create();i.prototype.raycast=function(t,e,n,i){var o=d,a=p,s=_,l=this.vertices;r.toLocalFrame(o,e.from,n,i),r.toLocalFrame(a,e.to,n,i);for(var c=l.length,u=0;c>u&&!t.shouldStop(e);u++){var f=l[u],v=l[(u+1)%c],h=r.getLineSegmentsIntersectionFraction(o,a,f,v);h>=0&&(r.sub(s,v,f),r.rotate(s,s,-Math.PI/2+i),r.normalize(s,s),e.reportIntersection(t,h,s,u))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(t,e,n){function i(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,(void 0===t.maxValue||void 0===t.minValue)&&this.updateMaxMinValues(),t.type=o.HEIGHTFIELD,o.call(this,t)}var o=t("./Shape"),r=t("../math/vec2");t("../utils/Utils"),e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],n=t[0],i=0;i!==t.length;i++){var o=t[i];o>e&&(e=o),n>o&&(n=o)}this.maxValue=e,this.minValue=n},i.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},i.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},i.prototype.updateArea=function(){for(var t=this.heights,e=0,n=0;n<t.length-1;n++)e+=(t[n]+t[n+1])/2*this.elementWidth;this.area=e};var a=[r.create(),r.create(),r.create(),r.create()];i.prototype.computeAABB=function(t,e,n){r.set(a[0],0,this.maxValue),r.set(a[1],this.elementWidth*this.heights.length,this.maxValue),r.set(a[2],this.elementWidth*this.heights.length,this.minValue),r.set(a[3],0,this.minValue),t.setFromPoints(a,e,n)},i.prototype.getLineSegment=function(t,e,n){var i=this.heights,o=this.elementWidth;r.set(t,n*o,i[n]),r.set(e,(n+1)*o,i[n+1])},i.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},i.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return Math.min(this.heights.length,Math.max(e,0))};var s=(r.create(),r.create()),l=r.create(),c=r.create(),u=r.create(),f=r.create();r.fromValues(0,1),i.prototype.raycast=function(t,e,n,i){var o=e.from,a=e.to,v=(e.direction,s),h=l,d=c,p=u,_=f;r.toLocalFrame(p,o,n,i),r.toLocalFrame(_,a,n,i);var g=this.getClampedSegmentIndex(p),y=this.getClampedSegmentIndex(_);if(g>y){var m=g;g=y,y=m}for(var b=0;b<this.heights.length-1;b++){this.getLineSegment(h,d,b);var x=r.getLineSegmentsIntersectionFraction(p,_,h,d);if(x>=0&&(r.sub(v,d,h),r.rotate(v,v,i+Math.PI/2),r.normalize(v,v),e.reportIntersection(t,x,v,-1),t.shouldStop(e)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(t,e,n){function i(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=o.LINE,o.call(this,t)}var o=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var a=[r.create(),r.create()];i.prototype.computeAABB=function(t,e,n){var i=this.length/2;r.set(a[0],-i,0),r.set(a[1],i,0),t.setFromPoints(a,e,n,0)};var s=(r.create(),r.create()),l=r.create(),c=r.create(),u=r.fromValues(0,1);i.prototype.raycast=function(t,e,n,i){var o=e.from,a=e.to,f=l,v=c,h=this.length/2;r.set(f,-h,0),r.set(v,h,0),r.toGlobalFrame(f,f,n,i),r.toGlobalFrame(v,v,n,i);var d=r.getLineSegmentsIntersectionFraction(f,v,o,a);if(d>=0){var p=s;r.rotate(p,u,i),e.reportIntersection(t,d,p,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(t,e,n){function i(t){(t=t||{}).type=o.PARTICLE,o.call(this,t)}var o=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){return 0},i.prototype.updateBoundingRadius=function(){this.boundingRadius=0},i.prototype.computeAABB=function(t,e,n){r.copy(t.lowerBound,e),r.copy(t.upperBound,e)}},{"../math/vec2":30,"./Shape":45}],44:[function(t,e,n){function i(t){(t=t||{}).type=o.PLANE,o.call(this,t)}var o=t("./Shape"),r=t("../math/vec2");t("../utils/Utils"),e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){return 0},i.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},i.prototype.computeAABB=function(t,e,n){var i=n%(2*Math.PI),o=r.set,a=1e7,s=t.lowerBound,l=t.upperBound;o(s,-a,-a),o(l,a,a),0===i?l[1]=0:i===Math.PI/2?s[0]=0:i===Math.PI?s[1]=0:i===3*Math.PI/2&&(l[0]=0)},i.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var a=r.create(),s=(r.create(),r.create(),r.create()),l=r.create();i.prototype.raycast=function(t,e,n,i){var o=e.from,c=e.to,u=e.direction,f=a,v=s,h=l;r.set(v,0,1),r.rotate(v,v,i),r.sub(h,o,n);var d=r.dot(h,v);if(r.sub(h,c,n),!(d*r.dot(h,v)>0||r.squaredDistance(o,c)<d*d)){var p=r.dot(v,u);r.sub(f,o,n);var _=-r.dot(v,f)/p/e.length;e.reportIntersection(t,_,v,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(t,e,n){function i(t){t=t||{},this.body=null,this.position=o.fromValues(0,0),t.position&&o.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=i.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}e.exports=i;var o=t("../math/vec2");i.idCounter=0,i.CIRCLE=1,i.PARTICLE=2,i.PLANE=4,i.CONVEX=8,i.LINE=16,i.BOX=32,Object.defineProperty(i,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),i.BOX}}),i.CAPSULE=64,i.HEIGHTFIELD=128,i.prototype.computeMomentOfInertia=function(t){},i.prototype.updateBoundingRadius=function(){},i.prototype.updateArea=function(){},i.prototype.computeAABB=function(t,e,n){},i.prototype.raycast=function(t,e,n,i){}},{"../math/vec2":30}],46:[function(t,e,n){function i(t){r.call(this,t,r.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new a.ARRAY_TYPE(this.arrayStep),this.Bs=new a.ARRAY_TYPE(this.arrayStep),this.invCs=new a.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}var o=t("../math/vec2"),r=t("./Solver"),a=t("../utils/Utils"),s=t("../equations/FrictionEquation");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.solve=function(t,e){this.sortEquations();var n,r,l=0,c=this.iterations,u=this.frictionIterations,f=this.equations,v=f.length,h=Math.pow(this.tolerance*v,2),d=e.bodies,p=e.bodies.length,_=(o.add,o.set,this.useZeroRHS),g=this.lambda;if(this.usedIterations=0,v)for(var y=0;y!==p;y++){d[y].updateSolveMassProperties()}g.length<v&&(g=this.lambda=new a.ARRAY_TYPE(v+this.arrayStep),this.Bs=new a.ARRAY_TYPE(v+this.arrayStep),this.invCs=new a.ARRAY_TYPE(v+this.arrayStep)),function(t){for(var e=t.length;e--;)t[e]=0}(g);for(var m=this.invCs,b=this.Bs,y=(g=this.lambda,0);y!==f.length;y++){var x;((x=f[y]).timeStep!==t||x.needsUpdate)&&(x.timeStep=t,x.update()),b[y]=x.computeB(x.a,x.b,t),m[y]=x.computeInvC(x.epsilon)}if(0!==v){for(y=0;y!==p;y++){d[y].resetConstraintVelocity()}if(u){for(l=0;l!==u;l++){for(n=0,r=0;r!==v;r++){x=f[r];var w=i.iterateEquation(r,x,x.epsilon,b,m,g,_,t,l);n+=Math.abs(w)}if(this.usedIterations++,h>=n*n)break}for(i.updateMultipliers(f,g,1/t),r=0;r!==v;r++){var A=f[r];if(A instanceof s){for(var M=0,S=0;S!==A.contactEquations.length;S++)M+=A.contactEquations[S].multiplier;M*=A.frictionCoefficient/A.contactEquations.length,A.maxForce=M,A.minForce=-M}}}for(l=0;l!==c;l++){for(n=0,r=0;r!==v;r++){x=f[r];w=i.iterateEquation(r,x,x.epsilon,b,m,g,_,t,l);n+=Math.abs(w)}if(this.usedIterations++,h>=n*n)break}for(y=0;y!==p;y++)d[y].addConstraintVelocity();i.updateMultipliers(f,g,1/t)}},i.updateMultipliers=function(t,e,n){for(var i=t.length;i--;)t[i].multiplier=e[i]*n},i.iterateEquation=function(t,e,n,i,o,r,a,s,l){var c=i[t],u=o[t],f=r[t],v=e.computeGWlambda(),h=e.maxForce,d=e.minForce;a&&(c=0);var p=u*(c-v-n*f),_=f+p;return d*s>_?p=d*s-f:_>h*s&&(p=h*s-f),r[t]+=p,e.addToWlambda(p),p}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(t,e,n){function i(t,e){t=t||{},o.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}var o=(t("../utils/Utils"),t("../events/EventEmitter"));e.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var r={bodies:[]};i.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),r.bodies.length=0,e.getBodies(r.bodies),r.bodies.length&&this.solve(t,r))},i.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},i.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},i.prototype.addEquations=function(t){for(var e=0,n=t.length;e!==n;e++){var i=t[e];i.enabled&&this.equations.push(i)}},i.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},i.prototype.removeAllEquations=function(){this.equations.length=0},i.GS=1,i.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(t,e,n){function i(){r.apply(this,arguments)}var o=t("../equations/ContactEquation"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new o},i.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(t,e,n){function i(){r.apply(this,arguments)}var o=t("../equations/FrictionEquation"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new o},i.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(t,e,n){function i(){r.apply(this,arguments)}var o=t("../world/IslandNode"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new o},i.prototype.destroy=function(t){return t.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(t,e,n){function i(){r.apply(this,arguments)}var o=t("../world/Island"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new o},i.prototype.destroy=function(t){return t.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(t,e,n){function i(){this.overlappingShapesLastState=new o,this.overlappingShapesCurrentState=new o,this.recordPool=new r({size:16}),this.tmpDict=new o,this.tmpArray1=[]}var o=t("./TupleDictionary"),r=(t("./OverlapKeeperRecord"),t("./OverlapKeeperRecordPool"));t("./Utils"),e.exports=i,i.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,n=t.keys.length;n--;){var i=t.keys[n],o=t.getByKey(i);e.getByKey(i),o&&this.recordPool.release(o)}t.reset(),t.copy(e),e.reset()},i.prototype.setOverlapping=function(t,e,n,i){var o=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!o.get(e.id,i.id)){var r=this.recordPool.get();r.set(t,e,n,i),o.set(e.id,i.id,r)}},i.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},i.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},i.prototype.bodiesAreOverlapping=function(t,e){for(var n=this.overlappingShapesCurrentState,i=n.keys.length;i--;){var o=n.keys[i],r=n.data[o];if(r.bodyA===t&&r.bodyB===e||r.bodyA===e&&r.bodyB===t)return!0}return!1},i.prototype.getDiff=function(t,e,n){var i=t,o=e;(n=n||[]).length=0;for(var r=o.keys.length;r--;){var a=o.keys[r],s=o.data[a];if(!s)throw new Error("Key "+a+" had no data!");i.data[a]||n.push(s)}return n},i.prototype.isNewOverlap=function(t,e){var n=0|t.id,i=0|e.id,o=this.overlappingShapesLastState,r=this.overlappingShapesCurrentState;return!o.get(n,i)&&!!r.get(n,i)},i.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},i.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},i.prototype.getBodyDiff=function(t,e){e=e||[];for(var n=this.tmpDict,i=t.length;i--;){var o=t[i];n.set(0|o.bodyA.id,0|o.bodyB.id,o)}for(i=n.keys.length;i--;){(o=n.getByKey(n.keys[i]))&&e.push(o.bodyA,o.bodyB)}return n.reset(),e}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(t,e,n){function i(t,e,n,i){this.shapeA=e,this.shapeB=i,this.bodyA=t,this.bodyB=n}e.exports=i,i.prototype.set=function(t,e,n,o){i.call(this,t,e,n,o)}},{}],54:[function(t,e,n){function i(){r.apply(this,arguments)}var o=t("./OverlapKeeperRecord"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new o},i.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(t,e,n){function i(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}e.exports=i,i.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},i.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},i.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},{}],56:[function(t,e,n){function i(){this.data={},this.keys=[]}var o=t("./Utils");e.exports=i,i.prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},i.prototype.getByKey=function(t){return t|=0,this.data[t]},i.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},i.prototype.set=function(t,e,n){if(!n)throw new Error("No data!");var i=this.getKey(t,e);return this.data[i]||this.keys.push(i),this.data[i]=n,i},i.prototype.reset=function(){for(var t=this.data,e=this.keys,n=e.length;n--;)delete t[e[n]];e.length=0},i.prototype.copy=function(t){this.reset(),o.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var n=t.keys[e];this.data[n]=t.data[n]}}},{"./Utils":57}],57:[function(t,e,n){function i(){}e.exports=i,i.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var n=0,i=e.length;n!==i;++n)t.push(e[n])},i.splice=function(t,e,n){n=n||1;for(var i=e,o=t.length-n;o>i;i++)t[i]=t[i+n];t.length=o},"undefined"!=typeof P2_ARRAY_TYPE?i.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?i.ARRAY_TYPE=Float32Array:i.ARRAY_TYPE=Array,i.extend=function(t,e){for(var n in e)t[n]=e[n]},i.defaults=function(t,e){for(var n in t=t||{},e)n in t||(t[n]=e[n]);return t}},{}],58:[function(t,e,n){function i(){this.equations=[],this.bodies=[]}var o=t("../objects/Body");e.exports=i,i.prototype.reset=function(){this.equations.length=this.bodies.length=0};var r=[];i.prototype.getBodies=function(t){var e=t||[],n=this.equations;r.length=0;for(var i=0;i!==n.length;i++){var o=n[i];-1===r.indexOf(o.bodyA.id)&&(e.push(o.bodyA),r.push(o.bodyA.id)),-1===r.indexOf(o.bodyB.id)&&(e.push(o.bodyB),r.push(o.bodyB.id))}return e},i.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===o.DYNAMIC&&!e.wantsToSleep)return!1}return!0},i.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++){this.bodies[t].sleep()}return!0}},{"../objects/Body":31}],59:[function(t,e,n){function i(t){this.nodePool=new o({size:16}),this.islandPool=new r({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var o=(t("../math/vec2"),t("./Island"),t("./IslandNode"),t("./../utils/IslandNodePool")),r=t("./../utils/IslandPool"),a=t("../objects/Body");e.exports=i,i.getUnvisitedNode=function(t){for(var e=t.length,n=0;n!==e;n++){var i=t[n];if(!i.visited&&i.body.type===a.DYNAMIC)return i}return!1},i.prototype.visit=function(t,e,n){e.push(t.body);for(var i=t.equations.length,o=0;o!==i;o++){var r=t.equations[o];-1===n.indexOf(r)&&n.push(r)}},i.prototype.bfs=function(t,e,n){var o=this.queue;for(o.length=0,o.push(t),t.visited=!0,this.visit(t,e,n);o.length;)for(var r,s=o.pop();r=i.getUnvisitedNode(s.neighbors);)r.visited=!0,this.visit(r,e,n),r.body.type===a.DYNAMIC&&o.push(r)},i.prototype.split=function(t){for(var e=t.bodies,n=this.nodes,o=this.equations;n.length;)this.nodePool.release(n.pop());for(var r=0;r!==e.length;r++){var a=this.nodePool.get();a.body=e[r],n.push(a)}for(var s=0;s!==o.length;s++){var l=o[s],c=(r=e.indexOf(l.bodyA),e.indexOf(l.bodyB)),u=n[r],f=n[c];u.neighbors.push(f),f.neighbors.push(u),u.equations.push(l),f.equations.push(l)}var v=this.islands;for(r=0;r<v.length;r++)this.islandPool.release(v[r]);v.length=0;for(var h;h=i.getUnvisitedNode(n);){var d=this.islandPool.get();this.bfs(h,d.bodies,d.equations),v.push(d)}return v}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(t,e,n){function i(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}e.exports=i,i.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(t,e,n){function i(t){f.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new o,this.narrowphase=new g(this),this.islandManager=new b,this.gravity=r.fromValues(0,-9.78),t.gravity&&r.copy(this.gravity,t.gravity),this.frictionGravity=r.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new _,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new h,this.defaultContactMaterial=new d(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=i.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new m}var o=t("../solver/GSSolver"),r=(t("../solver/Solver"),t("../collision/Ray"),t("../math/vec2")),a=t("../shapes/Circle"),s=t("../shapes/Convex"),l=(t("../shapes/Line"),t("../shapes/Plane")),c=t("../shapes/Capsule"),u=t("../shapes/Particle"),f=t("../events/EventEmitter"),v=t("../objects/Body"),h=(t("../shapes/Shape"),t("../objects/LinearSpring"),t("../material/Material")),d=t("../material/ContactMaterial"),p=(t("../constraints/DistanceConstraint"),t("../constraints/Constraint"),t("../constraints/LockConstraint"),t("../constraints/RevoluteConstraint"),t("../constraints/PrismaticConstraint"),t("../constraints/GearConstraint"),t("../../package.json"),t("../collision/Broadphase"),t("../collision/AABB")),_=t("../collision/SAPBroadphase"),g=t("../collision/Narrowphase"),y=t("../utils/Utils"),m=t("../utils/OverlapKeeper"),b=t("./IslandManager");t("../objects/RotationalSpring"),e.exports=i,i.prototype=new Object(f.prototype),i.prototype.constructor=i,i.NO_SLEEPING=1,i.BODY_SLEEPING=2,i.ISLAND_SLEEPING=4,i.prototype.addConstraint=function(t){this.constraints.push(t)},i.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},i.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&y.splice(this.contactMaterials,e,1)},i.prototype.getContactMaterial=function(t,e){for(var n=this.contactMaterials,i=0,o=n.length;i!==o;i++){var r=n[i];if(r.materialA.id===t.id&&r.materialB.id===e.id||r.materialA.id===e.id&&r.materialB.id===t.id)return r}return!1},i.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&y.splice(this.constraints,e,1)};var x=(r.create(),r.create(),r.create(),r.create(),r.create(),r.create(),r.create()),w=r.fromValues(0,0),A=r.fromValues(0,0);r.fromValues(0,0),r.fromValues(0,0),i.prototype.step=function(t,e,n){if(n=n||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var i=0;this.accumulator>=t&&n>i;)this.internalStep(t),this.time+=t,this.accumulator-=t,i++;for(var o=this.accumulator%t/t,a=0;a!==this.bodies.length;a++){var s=this.bodies[a];r.lerp(s.interpolatedPosition,s.previousPosition,s.position,o),s.interpolatedAngle=s.previousAngle+o*(s.angle-s.previousAngle)}}};var M=[];i.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,n=this.springs,o=this.bodies,a=this.gravity,s=this.solver,l=this.bodies.length,c=this.broadphase,u=this.narrowphase,f=this.constraints,h=x,d=(r.scale,r.add),p=(r.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var _=r.length(this.gravity);0===_&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=_)}if(this.applyGravity)for(var g=0;g!==l;g++){var m=(b=o[g]).force;b.type===v.DYNAMIC&&b.sleepState!==v.SLEEPING&&(r.scale(h,a,b.mass*b.gravityScale),d(m,m,h))}if(this.applySpringForces)for(g=0;g!==e;g++){n[g].applyForce()}if(this.applyDamping)for(g=0;g!==l;g++){var b;(b=o[g]).type===v.DYNAMIC&&b.applyDamping(t)}var w=c.getCollisionPairs(this),A=this.disabledBodyCollisionPairs;for(g=A.length-2;g>=0;g-=2)for(var S=w.length-2;S>=0;S-=2)(A[g]===w[S]&&A[g+1]===w[S+1]||A[g+1]===w[S]&&A[g]===w[S+1])&&w.splice(S,2);var T=f.length;for(g=0;g!==T;g++){var B=f[g];if(!B.collideConnected)for(S=w.length-2;S>=0;S-=2)(B.bodyA===w[S]&&B.bodyB===w[S+1]||B.bodyB===w[S]&&B.bodyA===w[S+1])&&w.splice(S,2)}this.postBroadphaseEvent.pairs=w,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,u.reset(this);g=0;for(var E=w.length;g!==E;g+=2)for(var F=w[g],R=w[g+1],I=0,C=F.shapes.length;I!==C;I++)for(var L=F.shapes[I],P=L.position,D=L.angle,X=0,k=R.shapes.length;X!==k;X++){var U=R.shapes[X],z=U.position,V=U.angle,N=this.defaultContactMaterial;if(L.material&&U.material){var G=this.getContactMaterial(L.material,U.material);G&&(N=G)}this.runNarrowphase(u,F,L,P,D,R,U,z,V,N,this.frictionGravity)}for(g=0;g!==l;g++){(W=o[g])._wakeUpAfterNarrowphase&&(W.wakeUp(),W._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(M);var q=this.endContactEvent;for(X=M.length;X--;){var O=M[X];q.shapeA=O.shapeA,q.shapeB=O.shapeB,q.bodyA=O.bodyA,q.bodyB=O.bodyB,this.emit(q)}M.length=0}var Y=this.preSolveEvent;Y.contactEquations=u.contactEquations,Y.frictionEquations=u.frictionEquations,this.emit(Y),Y.contactEquations=Y.frictionEquations=null;T=f.length;for(g=0;g!==T;g++)f[g].update();if(u.contactEquations.length||u.frictionEquations.length||T)if(this.islandSplit){for(p.equations.length=0,y.appendArray(p.equations,u.contactEquations),y.appendArray(p.equations,u.frictionEquations),g=0;g!==T;g++)y.appendArray(p.equations,f[g].equations);p.split(this);for(g=0;g!==p.islands.length;g++){(j=p.islands[g]).equations.length&&s.solveIsland(t,j)}}else{for(s.addEquations(u.contactEquations),s.addEquations(u.frictionEquations),g=0;g!==T;g++)s.addEquations(f[g].equations);this.solveConstraints&&s.solve(t,this),s.removeAllEquations()}for(g=0;g!==l;g++){var W;(W=o[g]).integrate(t)}for(g=0;g!==l;g++)o[g].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var Z=this.impactEvent;for(g=0;g!==u.contactEquations.length;g++){var H=u.contactEquations[g];H.firstImpact&&(Z.bodyA=H.bodyA,Z.bodyB=H.bodyB,Z.shapeA=H.shapeA,Z.shapeB=H.shapeB,Z.contactEquation=H,this.emit(Z))}}if(this.sleepMode===i.BODY_SLEEPING)for(g=0;g!==l;g++)o[g].sleepTick(this.time,!1,t);else if(this.sleepMode===i.ISLAND_SLEEPING&&this.islandSplit){for(g=0;g!==l;g++)o[g].sleepTick(this.time,!0,t);for(g=0;g<this.islandManager.islands.length;g++){var j;(j=this.islandManager.islands[g]).wantsToSleep()&&j.sleep()}}this.stepping=!1;var Q=this.bodiesToBeRemoved;for(g=0;g!==Q.length;g++)this.removeBody(Q[g]);Q.length=0,this.emit(this.postStepEvent)},i.prototype.runNarrowphase=function(t,e,n,i,o,a,s,l,c,u,f){if(0!=(n.collisionGroup&s.collisionMask)&&0!=(s.collisionGroup&n.collisionMask)){r.rotate(w,i,e.angle),r.rotate(A,l,a.angle),r.add(w,w,e.position),r.add(A,A,a.position);var h,d=o+e.angle,p=c+a.angle;t.enableFriction=u.friction>0,t.frictionCoefficient=u.friction,h=e.type===v.STATIC||e.type===v.KINEMATIC?a.mass:a.type===v.STATIC||a.type===v.KINEMATIC?e.mass:e.mass*a.mass/(e.mass+a.mass),t.slipForce=u.friction*f*h,t.restitution=u.restitution,t.surfaceVelocity=u.surfaceVelocity,t.frictionStiffness=u.frictionStiffness,t.frictionRelaxation=u.frictionRelaxation,t.stiffness=u.stiffness,t.relaxation=u.relaxation,t.contactSkinSize=u.contactSkinSize,t.enabledEquations=e.collisionResponse&&a.collisionResponse&&n.collisionResponse&&s.collisionResponse;var _=t[n.type|s.type],g=0;if(_){var y=n.sensor||s.sensor,m=t.frictionEquations.length;g=n.type<s.type?_.call(t,e,n,w,d,a,s,A,p,y):_.call(t,a,s,A,p,e,n,w,d,y);var b=t.frictionEquations.length-m;if(g){if(e.allowSleep&&e.type===v.DYNAMIC&&e.sleepState===v.SLEEPING&&a.sleepState===v.AWAKE&&a.type!==v.STATIC)r.squaredLength(a.velocity)+Math.pow(a.angularVelocity,2)>=2*Math.pow(a.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0);if(a.allowSleep&&a.type===v.DYNAMIC&&a.sleepState===v.SLEEPING&&e.sleepState===v.AWAKE&&e.type!==v.STATIC)r.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(a._wakeUpAfterNarrowphase=!0);if(this.overlapKeeper.setOverlapping(e,n,a,s),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(n,s)){var x=this.beginContactEvent;if(x.shapeA=n,x.shapeB=s,x.bodyA=e,x.bodyB=a,x.contactEquations.length=0,"number"==typeof g)for(var M=t.contactEquations.length-g;M<t.contactEquations.length;M++)x.contactEquations.push(t.contactEquations[M]);this.emit(x)}if("number"==typeof g&&b>1)for(M=t.frictionEquations.length-b;M<t.frictionEquations.length;M++){var S=t.frictionEquations[M];S.setSlipForce(S.getSlipForce()/b)}}}}},i.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},i.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&y.splice(this.springs,e,1)},i.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},i.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(y.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},i.prototype.getBodyById=function(t){for(var e=this.bodies,n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}return!1},i.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},i.prototype.enableBodyCollision=function(t,e){for(var n=this.disabledBodyCollisionPairs,i=0;i<n.length;i+=2)if(n[i]===t&&n[i+1]===e||n[i+1]===t&&n[i]===e)return void n.splice(i,2)},i.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);var n=this.bodies;for(e=n.length-1;e>=0;e--)this.removeBody(n[e]);var o=this.springs;for(e=o.length-1;e>=0;e--)this.removeSpring(o[e]);var r=this.contactMaterials;for(e=r.length-1;e>=0;e--)this.removeContactMaterial(r[e]);i.apply(this)};var S=r.create(),T=(r.fromValues(0,0),r.fromValues(0,0));i.prototype.hitTest=function(t,e,n){n=n||0;var i=new v({position:t}),o=new u,f=t,h=S,d=T;i.addShape(o);for(var p=this.narrowphase,_=[],g=0,y=e.length;g!==y;g++)for(var m=e[g],b=0,x=m.shapes.length;b!==x;b++){var w=m.shapes[b];r.rotate(h,w.position,m.angle),r.add(h,h,m.position);var A=w.angle+m.angle;(w instanceof a&&p.circleParticle(m,w,h,A,i,o,f,0,!0)||w instanceof s&&p.particleConvex(i,o,f,0,m,w,h,A,!0)||w instanceof l&&p.particlePlane(i,o,f,0,m,w,h,A,!0)||w instanceof c&&p.particleCapsule(i,o,f,0,m,w,h,A,!0)||w instanceof u&&r.squaredLength(r.sub(d,h,t))<n*n)&&_.push(m)}return _},i.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,n=0;n!==e.length;n++)for(var i=e[n],o=0;o!==i.equations.length;o++){var r=i.equations[o];r.stiffness=t,r.needsUpdate=!0}var a=this.contactMaterials;for(n=0;n!==a.length;n++){(i=a[n]).stiffness=i.frictionStiffness=t}(i=this.defaultContactMaterial).stiffness=i.frictionStiffness=t},i.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var n=this.constraints[e],i=0;i!==n.equations.length;i++){var o=n.equations[i];o.relaxation=t,o.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++){(n=this.contactMaterials[e]).relaxation=n.frictionRelaxation=t}(n=this.defaultContactMaterial).relaxation=n.frictionRelaxation=t};var B=new p,E=[];i.prototype.raycast=function(t,e){return e.getAABB(B),this.broadphase.aabbQuery(this,B,E),e.intersectBodies(t,E),E.length=0,t.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)})),_STR=["UHJlZl8=","dW5kZWZpbmVk","c2Vfc3RhcnQg","c2FmYXJp","aXBob25l","aXBhZA==","d2luZG93cw==","Y2hyb21l","ZmlyZWZveA==","QmFkU3RyaW5ncw==","TW9iaWxlU3RyaW5ncw==","cnVieQ==","c2Vfc291bmRfZmlyc3Q=","V2ViIEF1ZGlvIEFQSSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlcg==","YXVkaW8=","YXVkaW8vbXAz","Lm1wMw==","U291bmRFWFQgLT4=","bG9hZGluZw==","YXJyYXlidWZmZXI=","c2VfbXVzaWNfY29udGludWU=","bnVtYmVy","b3JpZW50YXRpb25jaGFuZ2U=","UmVzaXplIENhbnZhcyB0byA=","Y2FsYygxMDAlIC0g","d2ViZ2w=","SW1wb3NzaWJsZSBkJ2luaXRpYWxpc2VyIGxlIFdlYkdMLiBJbCBlc3QgcG9zc2libGUgcXVlIHZvdHJlIG5hdmlnYXRldXIgbmUgc3VwcG9ydGUgcGFzIGNldHRlIGZvbmN0aW9ubmFsaXTpLg==","IEZyYW1lYnVmZmVyIHVuc3VwcG9ydGVk","IEZyYW1lYnVmZmVyIGluY29tcGxldGUgYXR0YWNobWVudA==","IEZyYW1lYnVmZmVyIGluY29tcGxldGUgZGltZW5zaW9ucw==","IEZyYW1lYnVmZmVyIGluY29tcGxldGUgbWlzc2luZyBhdHRhY2htZW50","IEZyYW1lYnVmZmVyIGZhaWxlZCBmb3IgdW5zcGVjaWZpZWQgcmVhc29u","Q3JlYXRpbmcgRkJPIFs=","QXR0YWNoIHRleHR1cmU=","QW5vbnltb3Vz","RHluYVRleHR1cmUgRXJyb3IgVHJ5IE6wOg==","RHluYVRleHR1cmU6","IGlkOg==","RXJyb3IgSW1hZ2Ug","cmVzb3VyY2VzL2ltYWdlcy8=","LmF0bGFzPw==","b2Jsb24=","Y3Vyc29y","RGVsZXRl","QmFja3NwYWNl","SW5zZXJ0","SW52YWxpZCBNYXRyaXhQb3Ah","U0hJRlQ=","U1BBQ0U=","RU5URVI=","Y29sb3I=","dGV4dHVyZQ==","Zm9udA==","cGFydGljbGVz","Ymx1ci13","Ymx1ci1o","ZnJvbnQ=","dHJhaWw=","c2xpZGU=","bGF2YQ==","VmVydGV4UG9z","VmVydGV4UG9zQg==","VGV4dHVyZUNvb3I=","VmVydGV4Tm9ybWFs","UHJNYXRyaXg=","TXZNYXRyaXg=","Tm9NYXRyaXg=","Q2FNYXRyaXg=","U2hNYXRyaXg=","VGV4dHVyZTA=","VGV4dHVyZTE=","VGV4dHVyZTI=","VGV4dHVyZTM=","VGV4dHVyZTQ=","UGFydGljbGVzWFlaUw==","UGFydGljbGVzUlQ=","Q29sb3Jz","TGlnaHREaXI=","Q2FtUG9z","R2x5cGhQb3M=","RXJyb3IgQ29tcGlsZSBWZXJ0ZXggU2hhZGVyIFs=","RXJyb3IgQ29tcGlsZSBGcmFnbWVudCBTaGFkZXIgWw==","Q291bGQgbm90IGluaXRpYWxpc2Ugc2hhZGVyOiA=","c2hhZGVyIA==","TWljcm9zb2Z0LlhNTEhUVFA=","dGV4dC9wbGFpbg==","cmVzb3VyY2VzL3NoYWRlcnMv","LmZzaD8=","LnZzaD8=","U2hhZGVy","U2hhZGVyIE5vdCBWYWxpZDo=","dG91Y2hzdGFydA==","dG91Y2htb3Zl","dG91Y2hlbmQ=","dG91Y2hjYW5jZWw=","dG91Y2hsZWF2ZQ==","c2VfZm9udF9sb2FkIA==","LnBuZz8=","LmZudA==","Y29tbW9u","Y2hhciBpZD0=","Y2hhcklkPQ==","a2luZGxl","cGxheWJvb2s=","a2Zzb3dp","c2lsaw==","dGFibGV0","bW9iaWxl","YW5kcm9pZA==","YmxhY2tiZXJyeQ==","bm9raWE=","b3BlcmEgbWluaQ==","d2luZG93cyBtb2JpbGU=","d2luZG93cyBwaG9uZQ==","aWVtb2JpbGU=","cXdlcnR5dWlvcGFzZGZnaGprbCd6eGN2Ym5tLC5RV0VSVFlVSU9QQVNERkdISktMJ1pYQ1ZCTk0sLjEyMzQ1Njc4OTBAIyQlJiotKygpIVwiOi8/Xz0gICA=","YXplcnR5dWlvcHFzZGZnaGprbG13eGN2Ym4nLC5BWkVSVFlVSU9QUVNERkdISktMTVdYQ1ZCTicsLjEyMzQ1Njc4OTBAIyQlJiotKygpIVwiOi8/Xz0gICA=","cXdlcnR6dWlvcGFzZGZnaGprbCd5eGN2Ym5tLC5RV0VSVFpVSU9QQVNERkdISktMJ1lYQ1ZCTk0sLjEyMzQ1Njc4OTBAIyQlJiotKygpIVwiOi8/Xz0gICA=","TWVzaCBJRCBvdXQgb2YgcmFuZ2U=","Lm9iag==","LmJzbHVycA==","LnpzbHVycA==","YmxvYg==","ZmlsdGVyPQ==","ZmlsdGVy","c3BlZWQ=","Zm9yY2U=","LnBuZw==","T0JKRUNU","S0VFUA==","QklOQVJZPg==","U0tJUA==","aW1hZ2U=","bWVzaA==","cmVzb3VyY2VzL21lc2hzLw==","cmVzb3VyY2VzL2ZvbnRzLw==","c291bmQ=","cmVzb3VyY2VzL3NvdW5kcy8=","YXRsYXM=","TG9hZGVyIERPTkU=","cmVzb3VyY2VzL2xpc3QudHh0Pw==","YmxvY2s=","QWRkaW5nIFBhcnRpY2xlIEVtaXRlciA=","YnViYmxlcw==","ZHVhbC1ydW1ibGU=","cmVzb3VyY2VzL2hlaWdodG1hcHMv","Lm1hcA==","eG1saHR0cC5yZWFkeVN0YXRlOg==","SGVpZ2h0TWFwOg==","cGxhbmU6","Zm91bmQgZ3JvdW5kIHBsYW5l","cGF0aDo=","VFJJR0dFUl9QYXRo","VFJJR0dFUl9TdGFydA==","VFJJR0dFUl9Qb3M=","VFJJR0dFUl9TT0JK","VFJJR0dFUl9CT09TVA==","V0FMTF8zRA==","cmVzb3VyY2VzL3BhdGhzLw==","LnBhdGg=","IFdhbGxzIEFkZGVk","IFdhbGxzIDNEIEFkZGVk","KioqKioqKioqKioqKioqKioqKio=","SU5URUdSQVRJT04gVFlQRSA=","RkFNT0JJ","RGVidWdfQWRkIA==","RVZFTlRfTElWRVNDT1JF","ZmFtby1ibHVy","ZmFtby1yZXN1bWU=","cGF1c2VHYW1lcGxheQ==","ZmFtby1wYXVzZUdhbWVwbGF5","cmVzdW1lR2FtZXBsYXk=","ZmFtby1yZXN1bWVHYW1lcGxheQ==","ZW5hYmxlQXVkaW8=","ZGlzYWJsZUF1ZGlv","TmVvblJpZGVy","Q2FudCBzdGFydCBGQU1PIEFuYWx5dGljcw==","ZXh0ZXJuYWxfbXV0ZQ==","cmVzb3VyY2VzL2ltYWdlcy9wbGFjZWhvbGRlci5wbmc=","RVZFTlRfTEVWRUxTVEFSVA==","TGV2ZWwg","RVZFTlRfTEVWRUxSRVNUQVJU","QWRkaW5nIEFkcyBTcGFjZQ==","RmFtb19BbmFsaXR5Y3NMRVZFTF9FTkQ=","RVZFTlRfQ1VTVE9N","TEVWRUxFTkQ=","RVZFTlRfTEVWRUxGQUlM","ZGVhZA==","RVZFTlRfTEVWRUxTQ09SRQ==","RVZFTlRfVE9UQUxTQ09SRQ==","U2VuZGluZyB3aW5kb3cuZmFtb2JpLmdhbWVSZWFkeSgpOw==","RmFtb19Qb3VyY2VudA==","U2VuZGluZyBFVkVOVF9MRVZFTFNVQ0NFU1MgbGV2ZWxOYW1lOg==","RVZFTlRfTEVWRUxTVUNDRVNT","U2VuZGluZyB3aW5kb3cuZmFtb2JpLnBsYXllclJlYWR5KCk7","RVZFTlRfVk9MVU1FQ0hBTkdF","cmV3YXJkZWQ=","cmV3YXJkZWRBZA==","RmFtb19TaG93QWRz","YnV0dG9uOm1haW46","cm90YXRl","bGFuZA==","UnVieVByZWZDb3VudA==","RGVzdHJveSBDYXI=","Ym9vbQ==","UGVyZmVjdExhbmRpbmdFZmZlY3Q=","LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5Gb3JjZSBDaHVuayBJRDo=","TGV2ZWxzW0N1cnJlbnRMZXZlbF1bQ3VycmVudExldmVsUG9zXQ==","Q3lsaW5kZXJSZXY=","Q3lsaW5kZXI=","TGV2ZWw=","Ymxhc3Q=","c3VjY2Vzcw==","QmVhbQ==","U2xvdw==","U2NpZQ==","U2NpU3RhdGlj","UnVieQ==","TGV0dGVy","Ym9vc3Qy","UGxhdGVQaXZvdA==","UGxhdGVB","VXBEb3du","RmxhdE1l","TGF2ZVdhbGw=","TGF2YQ==","Um90Q3ViZQ==","UGxhdGVGYWxs","Qm9vc3Q=","U3RhcnRCTEFTVA==","bXVzaWNfYm9udXM=","ZmFsbA==","Pj4+Pj4+Pj4+Pj4+UGxhdGVQaXZvdCA=","Pj4+Pj4+Pj4+Pj4+Q3lsaW5kZXIg","Pj4+Pj4+Pj4+Pj4+VXBEb3duIA==","Pj4+Pj4+Pj4+Pj4+RmxhdE1lIA==","Pj4+Pj4+Pj4+Pj4+UGxhdGVBIA==","Pj4+Pj4+Pj4+Pj4+UGxhdGVGYWxsIA==","Pj4+Pj4+Pj4+Pj4+Um90ZWF0aW9uIEN1YiA=","RGVzdHJveSBPYmplY3Qg","LWJvbnVzLS0w","LS0tLS0tLS0tLS0tLQ==","LWJvbnVzLS0=","Ym9vc3Q=","Ym9vc3Qz","Q3JlYXRpbmcgRkJPIA==","RGVsZXRlIENodW5rIEZyb20gTGlzdCBDb3VudDo=","cHJlU29sdmU=","cG9zdFN0ZXA=","UHVzaCBPYmplY3Qg","TmV3IGNodW5r","TGluZXNGb3JQaHlzaWMgYWRk","T2JqZWN0cyBUbyBhZGQ=","Q2h1bmtfTGlzdCA=","ZmFpbA==","UEVSRkVDVCBMQU5ESU5H","MC45OTk5","dmlzaWJpbGl0eWNoYW5nZQ==","bW96dmlzaWJpbGl0eWNoYW5nZQ==","d2Via2l0dmlzaWJpbGl0eWNoYW5nZQ==","bXN2aXNpYmlsaXR5Y2hhbmdl","c2F2ZSBoaXNjb3Jl","aGlzY29yZQ==","cmVzb3VyY2VzL2ltYWdlcy91aS1hdGxhcw==","UHJlZlNvdW5kcw==","VW5sb2NrZWRMZXZlbA==","bXVzaWNfdGl0bGU=","Yi1zdGFydA==","Yi1zb3VuZDE=","Yi1zb3VuZDI=","LS0tLS0tLS0tLS0gVEFEQQ==","Yi1iYWNr","cXVpdA==","cmVzdGFydA==","bXVzaWNfaW5nYW1l","cmV2Mw==","cmV2MQ==","cmV2NA==","bHZsMQ==","bHZsMg==","bHZsMw==","bmV4dA==","c3RhcnQ=","a2V5ZG93bg==","QXJyb3dMZWZ0","QXJyb3dSaWdodA==","QXJyb3dVcA==","QXJyb3dEb3du","a2V5dXA=","J3gn"];var se_canvas,f250elta=20;function f251(t,e,n){n>1&&(n=1),n<0&&(n=0);var i=n*(f250elta/16.666);return t*(1-i)+e*i}function f225(t,e,n){return 1==n?t:(n>1&&(n=1),n<0&&(n=0),t*n+e*(1-n))}function se_start(t,e){console.log(_TX(2)+t+" "+e),Integration_Type=e,se_canvas=document.getElementById(t),f144(),f153(),f159(),f141(),f119(),f164(),f183(),f186(),f82(),f128(),f63(),f148(),requestAnimationFrame(f169)}var v43,Sounds={},s374v={},s375v={},v19=0;function f211(){for(var t=[_TX(3),"ios",_TX(4),_TX(5)],e=[_TX(6),_TX(7),_TX(8),"edg"],n=" "+navigator.userAgent.toLowerCase(),i=0;i<4;i++){if(n.search(e[i])>1)return console.log(_TX(9),e[i]),!1}for(i=0;i<4;i++){if(n.search(t[i])>1)return console.log(_TX(10),t[i]),!0}return!1}var v9=!0;function f135(){1==v9&&(f158(_TX(11),.1,1,0,!0),v9=!1,console.log(_TX(12)))}function f153(){v19=1;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,v43=new AudioContext}catch(t){return alert(_TX(13)),void(v19=0)}if(document.createElement(_TX(14)).canPlayType(_TX(15)))return s383v=_TX(16),void console.log(_TX(17),s383v);v19=0}function f246(){}function f154(t,e){v18++;var n=e+s383v+"?"+Game_Version;console.log(_TX(18)+n);var i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=_TX(19),i.onload=function(){v43.decodeAudioData(i.response,(function(e){Sounds[t]=e,v18--}),f246)},i.send()}function f155(t){void 0!==s375v[t]&&(s375v[t].stop||(s375v[t].s375v[t]=s375v[t].noteOff),s375v[t].stop(0))}var v44,v53,v54,v72=-1;function f76(){console.log(_TX(20),v72),-1!=v72&&1!=Integration_IsMute&&0!=PREF_Music&&(v44<.1&&(v44=1),v44>1&&(v44=1),void 0===s374v[v72]&&f157(v72,v44,v53,v54),s374v[v72].gain.value=v44)}function f93(t){-1!=v72&&(0==PREF_Music&&(t=0),1==Integration_IsMute&&(t=0),v44=t,void 0===s374v[v72]&&f157(v72,v44,v53,v54),s374v[v72].gain.value=t)}function f136(){void 0!==s374v[v72]&&(v44=0,s374v[v72].gain.value=0)}function f156(){-1!=v72&&(void 0!==s374v[v72]&&(s374v[v72].gain.value=0,f155(v72),s374v[v72]=void 0),v72=-1)}function f94(t){-1!=v72&&v53!=t&&void 0!==s375v[v72]&&(v53=t,s375v[v72].playbackRate.value=t)}function f34(t){0!=v19&&(void 0!==s375v[v72]&&f94(s375v[v72].playbackRate.value*t))}function f95(t){if(0!=v19&&void 0!==s374v[v72]){var e=s374v[v72].gain.value*t;1==Integration_IsMute&&(e=0),0==PREF_Music&&(e=0),e<0&&(e=0),s374v[v72].gain.value=e}}function f157(t,e,n,i){v72!=t?(-1!=v72&&f156(),v72=t,v53=n,v54=i,0!=v19&&(0==PREF_Music&&(e=0),v44=e,1==Integration_IsMute&&(e=0),s375v[t]=v43.createBufferSource(),s375v[t].loop=i,s375v[t].playbackRate.value=n,s374v[t]=v43.createGain(),s374v[t].gain.value=e,s374v[t].connect(v43.destination),s375v[t].buffer=Sounds[t],s375v[t].connect(s374v[t]),s375v[t].start?s375v[t].start(0):s375v[t].noteOn(0),console.log(s375v[t]))):f93(e)}function f137(){void 0!==s374v[v72]&&(s374v[v72].gain.value=0)}function f96(){1!=Integration_IsMute&&(f93(v44),f76())}function f97(t,e){void 0!==s374v[t]&&(1==Integration_IsMute&&(e=0),s374v[t].gain.value=e)}function f98(t,e){if(0!=v19&&void 0!==s374v[t]){var n=s374v[t].gain.value*e;0==PREF_Sounds&&(n=0),n<0&&(n=0),1==Integration_IsMute&&(n=0),s374v[t].gain.value=n}}function f113(t,e,n,i){0!=v19&&(0==PREF_Sounds&&(e=0),e<0&&(e=0),1==Integration_IsMute&&(e=0),void 0!==s374v[t]?(s375v[t].loop=i,s375v[t].playbackRate.value=n,s374v[t].gain.value=e):f158(t,e,n,i))}function f158(t,e,n,i,o){if(1!=o){if(0==v19)return;if(0==PREF_Sounds)return;if(e<.05)return;if(n<.25)return}1!=Integration_IsMute&&(s375v[t]=v43.createBufferSource(),s375v[t].loop=i,s375v[t].playbackRate.value=n,s374v[t]=v43.createGain(),s374v[t].gain.value=e,s374v[t].connect(v43.destination),s375v[t].buffer=Sounds[t],s375v[t].connect(s374v[t]),s375v[t].start?s375v[t].start(0):s375v[t].noteOn(0))}function f114(t,e,n,i,o,r){var a=f241(e,i,CamX,CamZ);a>1e3||f158(t,(1-a/1e3)*o,r,0)}var s379v={x:0,y:0},half_s379v={x:0,y:0},s249v={x:0,y:0},half_s249v={x:0,y:0},v55=0;function f115(){return typeof window.innerWidth==_TX(21)?window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)?document.body.clientWidth:100}function f99(){return typeof window.innerWidth==_TX(21)&&(myHeight=window.innerHeight),document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)?document.body.clientHeight:100}function f43(){window.onresize=function(){f100()},window.addEventListener(_TX(22),(function(t){window.setTimeout((function(){f100()}),800)}))}var gl,v36=0,v14=0,v27=0,v20=0;function f100(){s379v.x=f115()-v27-v20,s379v.y=f99()-v36-v14,v21=1,console.log(_TX(23)+s379v.x+"x"+s379v.y),(v21=window.devicePixelRatio||1)>1&&(v21*=.6),se_canvas.width=s379v.x*v21,se_canvas.height=s379v.y*v21,se_canvas.style.marginTop=v36+"px",se_canvas.style.marginLeft=v27+"px",se_canvas.style.width=_TX(24)+(v27+v20)+"px)",se_canvas.style.height=_TX(24)+(v36+v14)+"px)",se_canvas.focus(),s249v.y=512,s249v.x=s379v.x*s249v.y/s379v.y,s249v.x<v7&&(s249v.x=v7,s249v.y=s379v.y*s249v.x/s379v.x,s249v.y>1e3&&(s249v.y=1e3)),half_s379v.x=.5*s379v.x,half_s379v.y=.5*s379v.y,half_s249v.x=.5*s249v.x,half_s249v.y=.5*s249v.y,v55=s379v.x/s249v.x,BlureBipass=!0,f201()}var v56=!1,v28=!1,v15=!1,v29=!1,v37=!1,v21=1,v7=400;function f159(t){try{gl=se_canvas.getContext(_TX(25),{premultipliedAlpha:v15,antialias:v28,alpha:v56,stencil:v37,preserveDrawingBuffer:v29})}catch(t){}gl||alert(_TX(26)),f100(),f43()}var v88=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function f247(t,e){this.buffer,this.depth,this.depthtexture,this.texture,this.width=t,this.height=e,this.vertex,this.uv,this.index}function f116(t){gl.bindTexture(gl.TEXTURE_2D,v88[t].texture)}function f44(t){gl.activeTexture(gl.TEXTURE2),gl.bindTexture(gl.TEXTURE_2D,v88[t].depthtexture),gl.activeTexture(gl.TEXTURE0)}function f138(t){-1!=t?gl.bindFramebuffer(gl.FRAMEBUFFER,v88[t].buffer):gl.bindFramebuffer(gl.FRAMEBUFFER,null)}function f242(t){gl.bindTexture(gl.TEXTURE_2D,v88[t].texture),f38(),-1!=shader[v46].TextureCoor&&(gl.bindBuffer(gl.ARRAY_BUFFER,v88[t].uv),gl.vertexAttribPointer(shader[v46].TextureCoor,v88[t].uv.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ARRAY_BUFFER,v88[t].vertex),gl.vertexAttribPointer(shader[v46].s255v,v88[t].vertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v88[t].index),gl.drawElements(gl.TRIANGLES,v88[t].index.numItems,gl.UNSIGNED_SHORT,0),v74+=2}function f117(t){var e=gl.checkFramebufferStatus(gl.FRAMEBUFFER);if(e!==gl.FRAMEBUFFER_COMPLETE)switch(e){case gl.FRAMEBUFFER_UNSUPPORTED:throw new Error(t+_TX(27));case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error(t+_TX(28));case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error(t+_TX(29));case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error(t+_TX(30));default:throw new Error(t+_TX(31))}}function f212(t,e,n,i){console.log(_TX(32)+t+"] "+e+", "+n),v88[t]=new f247(e,n),v88[t].buffer=gl.createFramebuffer(),gl.bindFramebuffer(gl.FRAMEBUFFER,v88[t].buffer),v88[t].texture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,v88[t].texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,e,n,0,gl.RGBA,gl.UNSIGNED_BYTE,null),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,v88[t].texture,0),1==i&&(v88[t].depthtexture=gl.createRenderbuffer(),gl.bindRenderbuffer(gl.RENDERBUFFER,v88[t].depthtexture),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,e,n),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,v88[t].depthtexture)),f117(_TX(33)),gl.colorMask(!0,!0,!0,!0),gl.clearColor(0,0,0,1),gl.clear(gl.COLOR_BUFFER_BIT),v88[t].vertex=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v88[t].vertex);var o=[.5*-e,.5*n,-.2,.5*e,.5*n,-.2,.5*e,.5*-n,-.2,.5*-e,.5*-n,-.2];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(o),gl.STATIC_DRAW),v88[t].vertex.itemSize=3,v88[t].vertex.numItems=4,v88[t].uv=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v88[t].uv);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),gl.STATIC_DRAW),v88[t].uv.itemSize=2,v88[t].uv.numItems=4,v88[t].index=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v88[t].index);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v88[t].index.itemSize=1,v88[t].index.numItems=6,gl.bindFramebuffer(gl.FRAMEBUFFER,null)}var v67=new Array,v22=!0;function f213(){this.path,this.texture,this.width=0,this.height=0,this.vertex,this.uv,this.index,this.valide=!1,this.s387v=!1}function f35(t,e){return 4!=t&&8!=t&&16!=t&&32!=t&&64!=t&&128!=t&&256!=t&&512!=t&&1024!=t&&2048!=t||4!=e&&8!=e&&16!=e&&32!=e&&64!=e&&128!=e&&256!=e&&512!=e&&1024!=e&&2048!=e?gl.NEAREST:gl.LINEAR}function f45(t){var e=v67[t].texture.image.width,n=v67[t].texture.image.height;v67[t].width=e,v67[t].height=n,gl.bindTexture(gl.TEXTURE_2D,v67[t].texture),gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,v67[t].texture.image),f177(e)&&f177(n)?1==v22?(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.generateMipmap(gl.TEXTURE_2D)):(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST)):(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),1==v22?gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR):(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST))),gl.bindTexture(gl.TEXTURE_2D,null),v67[t].vertex=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v67[t].vertex);var i=[.5*-e,.5*n,-.2,.5*e,.5*n,-.2,.5*e,.5*-n,-.2,.5*-e,.5*-n,-.2];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(i),gl.STATIC_DRAW),v67[t].vertex.itemSize=3,v67[t].vertex.numItems=4,v67[t].uv=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v67[t].uv);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),gl.STATIC_DRAW),v67[t].uv.itemSize=2,v67[t].uv.numItems=4,v67[t].index=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v67[t].index);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v67[t].index.itemSize=1,v67[t].index.numItems=6,v67[t].valide=!0,v18--}function f77(t){v67[t].path=v67[t].path.replace("png","jpg"),v67[t].texture.image.src=v67[t].path}function f78(t){v67[t].path=v67[t].path.replace("jpg","png"),v67[t].texture.image.src=v67[t].path}var v3,v2,v4,v10=-1,Dynas416v={},s388v={};function f36(t){try{if(1==v67[Dynas416v[t]].s387v)return Dynas416v[t]}catch{}for(var e=1e3;e<2e3;e++)if(0==v67[e].s387v)return s388v[t]=0,v67[e].s387v=!0,Dynas416v[t]=e,v18++,v67[e].path=t,v67[e].texture=gl.createTexture(),v67[e].texture.image=new Image,v67[e].texture.image.crossOrigin=_TX(34),v67[e].texture.image.onload=function(){f45(e),v25++},v67[e].texture.image.onerror=function(){s388v[t]++,1==s388v[t]&&f77(e),2==s388v[t]&&f78(e),3==s388v[t]&&f77(e),4==s388v[t]&&f78(e),5==s388v[t]?v18--:(console.log(_TX(35)+s388v[t],", "+v67[e].texture.image.src),Dynas416v[t]=e)},v67[e].texture.image.src=t,console.log(_TX(36)+t+_TX(37)+e),e}function f118(t,e){v18++,v67[t].path=e+"?"+Game_Version,v67[t].texture=gl.createTexture(),v67[t].texture.image=new Image,v67[t].texture.image.onload=function(){f45(t),v25++},v67[t].texture.image.onerror=function(){alert(_TX(38)+e)},v67[t].texture.image.src=e}function f119(){for(var t=0;t<2e3;t++)v67.push(),v67[t]=new f213;f54()}function f120(t,e){typeof v67[t]!=_TX(1)&&0!=v67[t].valide&&(0==e?gl.activeTexture(gl.TEXTURE0):1==e&&gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,v67[t].texture))}function f121(t){try{if(0==v67[t].valide)return}catch{return}f120(t,0),f38(),-1!=shader[v46].TextureCoor&&(gl.bindBuffer(gl.ARRAY_BUFFER,v67[t].uv),gl.vertexAttribPointer(shader[v46].TextureCoor,v67[t].uv.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ARRAY_BUFFER,v67[t].vertex),gl.vertexAttribPointer(shader[v46].s255v,v67[t].vertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v67[t].index),gl.drawElements(gl.TRIANGLES,v67[t].index.numItems,gl.UNSIGNED_SHORT,0),v74+=2}function f54(){v3=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v3),vertices=[-.5,.5,-.2,.5,.5,-.2,.5,-.5,-.2,-.5,-.5,-.2],gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW),v3.itemSize=3,v3.numItems=4,v2=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v2);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),gl.STATIC_DRAW),v2.itemSize=2,v2.numItems=4,v4=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v4);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v4.itemSize=1,v4.numItems=6}function f160(t,e,n,i){f214(),f123(t,e,0),f198(n-t,i-e,1),f123(.5,.5,0),-1!=shader[v46].TextureCoor&&(gl.bindBuffer(gl.ARRAY_BUFFER,v2),gl.vertexAttribPointer(shader[v46].TextureCoor,v2.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ARRAY_BUFFER,v3),gl.vertexAttribPointer(shader[v46].s255v,v3.itemSize,gl.FLOAT,!1,0,0),f38(0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v4),gl.drawElements(gl.TRIANGLES,v4.numItems,gl.UNSIGNED_SHORT,0),f228(),v74+=2}var v77=new Array;function f243(){this.s416v,this.Width=0,this.Height=0,this.Image=[]}function f161(){this.Size_X,this.Size_Y,this.vertex,this.uv,this.index,this.valide=!0}function f139(t,e){v77[t]=new f243;var n=e.split("\n");v77[t].s416v=f36(_TX(39)+n[0]),n[1]=n[1].replace(",","");var i=n[1].split(" ");v77[t].Width=1*i[1],v77[t].Height=1*i[2];for(var o=5;o<n.length;o+=7){n[o]=n[o].replace(" ",""),n[o]=n[o].replace("\r",""),n[o]=n[o].replace("\n","");var r=n[o];if(r.length>0){v77[t].Image[r]=new f161,n[o+2]=n[o+2].replace(",","");var a=1*(i=n[o+2].split(" "))[3],s=1*i[4];n[o+3]=n[o+3].replace(",","");var l=1*(i=n[o+3].split(" "))[3],c=1*i[4];v77[t].Image[r].Size_X=l,v77[t].Image[r].Size_Y=c;var u=a/v77[t].Width,f=1-s/v77[t].Height,v=(a+l)/v77[t].Width,h=1-(s+c)/v77[t].Height;v77[t].Image[r].vertex=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v77[t].Image[r].vertex);var d=[.5*-l,.5*c,-.2,.5*l,.5*c,-.2,.5*l,.5*-c,-.2,.5*-l,.5*-c,-.2];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(d),gl.STATIC_DRAW),v77[t].Image[r].vertex.itemSize=3,v77[t].Image[r].vertex.numItems=4,v77[t].Image[r].uv=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v77[t].Image[r].uv);var p=[u,h,v,h,v,f,u,f];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(p),gl.STATIC_DRAW),v77[t].Image[r].uv.itemSize=2,v77[t].Image[r].uv.numItems=4,v77[t].Image[r].index=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v77[t].Image[r].index);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v77[t].Image[r].index.itemSize=1,v77[t].Image[r].index.numItems=6}}v18--}function f162(t,e){v18++;var n=new XMLHttpRequest;n.onload=function(e){200==this.status&&f139(t,n.responseText)},n.open("GET",e+_TX(40)+Game_Version,!0),n.send()}function f163(t,e){try{if(1!=v77[t].Image[e].valide)return}catch(t){return}return f120(v77[t].s416v,0),f38(),-1!=shader[v46].TextureCoor&&(gl.bindBuffer(gl.ARRAY_BUFFER,v77[t].Image[e].uv),gl.vertexAttribPointer(shader[v46].TextureCoor,v77[t].Image[e].uv.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ARRAY_BUFFER,v77[t].Image[e].vertex),gl.vertexAttribPointer(shader[v46].s255v,v77[t].Image[e].vertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v77[t].Image[e].index),gl.drawElements(gl.TRIANGLES,v77[t].Image[e].index.numItems,gl.UNSIGNED_SHORT,0),v74+=2,[v77[t].Image[e].Size_X,v77[t].Image[e].Size_Y]}function f164(){}function f122(t,e,n,i,o){try{if(1!=v77[t].Image[e].valide)return!1}catch(t){return!1}var r=!1,a=v77[t].Image[e].Size_X*o*.5,s=v77[t].Image[e].Size_Y*o*.5;return v80.x>n-Math.abs(a)&&v80.x<n+Math.abs(a)&&v80.y>i-Math.abs(s)&&v80.y<i+Math.abs(s)?(f127(2,2,2,1),1==v80.click&&(r=!0,v80.click=-1)):f127(1,1,1,1),f214(),f123(n,i,0),f198(o,o,1),f163(t,e),f228(),f127(1,1,1,1),1!=v11&&r}function f227(t,e,n,i){var o=!1,r=v67[t].width*i*.5,a=v67[t].height*i*.5;return v80.x>e-Math.abs(r)&&v80.x<e+Math.abs(r)&&v80.y>n-Math.abs(a)&&v80.y<n+Math.abs(a)?(f127(2,2,2,1),1==v80.click&&(o=!0,v80.click=-1)):f127(1,1,1,1),f214(),f123(e,n,0),f198(i,i,1),f121(t),f228(),f127(1,1,1,1),1!=v11&&o}var v16=0,v57=0;function f179(t,e,n,i,o){if(1==v11&&n>320&&(n=320),v80.x>e-.5*i&&v80.x<e+.5*i&&v80.y>n-40&&v80.y<n+40&&1==v80.click&&(v16=1,v11=1,v80.click=-1),f143(1),1==v16?f127(1,1,1,1):f127(.9,.9,.9,1),f214(),f123(e,n,0),f198(1,1,1),f163(0,_TX(41)),f123(-115,0,0),f198(.7,.7,1),f127(0,0,0,1==v16?.1:.9),f163(0,"pen"),f228(),f127(0,0,0,1==v16?1:.8),f170(v90),f214(),f123(e,n-15,0),f198(1,1,1),f185(0,""+t),f228(),1==v16&&(v57<300?f127(1,1,1,1):f127(0,0,0,.025),(v57+=v95)>600&&(v57-=600),f214(),f123(e+.5*f23(0,""+t)+16,n,0),f163(0,_TX(42)),f228()),null!=s248v&&((s248v==_TX(43)||s248v==_TX(44)||s248v==_TX(45))&&t.length>0&&(t=t.slice(0,-1)),t.length<o))for(var r=0;r<v24.length;r++)s248v==v24[r]&&(t+=v24[r]);return s248v=null,t}var v85=mat4.create(),v78=mat4.create(),v47=mat3.create(),v58=mat4.create(),v68=mat4.create(),v48=mat4.create(),v49=mat4.create(),v69=mat4.create(),v45=[];function f214(){var t=mat4.create();mat4.copy(t,v78),v45.push(t)}function f165(){mat4.identity(v78)}function f228(){if(0==v45.length)throw _TX(46);v78=v45.pop()}function f123(t,e,n){mat4.translate(v78,v78,[t,e,n])}function f198(t,e,n){mat4.scale(v78,v78,[t,e,n])}function f180(t,e,n,i){mat4.rotate(v78,v78,f240(t),[e,n,i])}function f181(t,e,n){var i=new f239;i.x=e.x-t.x,i.y=e.y-t.y,i.z=e.z-t.z;var o=new f239;o.x=n.y*i.z-n.z*i.y,o.y=n.z*i.x-n.x*i.z,o.z=n.x*i.y-n.y*i.x,o=f196(o);var r=new f239;r.x=i.y*o.z-i.z*o.y,r.y=i.z*o.x-i.x*o.z,r.z=i.x*o.y-i.y*o.x,r=f196(r),v69[0]=o.x,v69[1]=o.y,v69[2]=o.z,v69[3]=0,v69[4]=r.x,v69[5]=r.y,v69[6]=r.z,v69[7]=0,v69[8]=i.x,v69[9]=i.y,v69[10]=i.z,v69[11]=0,v69[12]=t.x,v69[13]=t.y,v69[14]=t.z,v69[15]=1,mat4.multiply(v78,v78,v69)}function f124(t,e){t>0&&e>0?(gl.viewport(0,0,t,e),mat4.ortho(v85,0,t,e,0,.1,800)):(gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),mat4.ortho(v85,0,s249v.x,s249v.y,0,.1,800)),mat4.identity(v78),mat4.identity(v48),gl.disable(gl.DEPTH_TEST),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)}var v30=5,v38=6e3;function f29(t,e,n){e>0&&n>0?(gl.viewport(0,0,e,n),mat4.perspective(v85,f240(t),e/n,v30,v38)):(gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),mat4.perspective(v85,f240(t),s249v.x/s249v.y,v30,v38)),mat4.identity(v78),gl.enable(gl.DEPTH_TEST),gl.disable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA)}var v70=[];function f252(t,e,n,i,o,r,a,s,l){v70[0]=t,v70[1]=e,v70[2]=n,mat4.lookAt(v48,[t,e,n],[i,o,r],[a,s,l])}function f37(t,e,n){var i=v78[3]*t+v78[7]*e+v78[11]*n+v78[15];return i=i||1,[(v78[0]*t+v78[4]*e+v78[8]*n+v78[12])/i,(v78[1]*t+v78[5]*e+v78[9]*n+v78[13])/i,(v78[2]*t+v78[6]*e+v78[10]*n+v78[14])/i]}var v73=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],A=0,B=1,C=2,D=3,v93=0,LEFT=1,v89=2,TOP=3,BACK=4,v94=5;function f140(t,e){var n=Math.sqrt(t[e][A]*t[e][A]+t[e][B]*t[e][B]+t[e][C]*t[e][C]);t[e][A]/=n,t[e][B]/=n,t[e][C]/=n,t[e][D]/=n}function f166(){mat4.multiply(v58,v48,v78);var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];t[0]=v58[0]*v85[0]+v58[1]*v85[4]+v58[2]*v85[8]+v58[3]*v85[12],t[1]=v58[0]*v85[1]+v58[1]*v85[5]+v58[2]*v85[9]+v58[3]*v85[13],t[2]=v58[0]*v85[2]+v58[1]*v85[6]+v58[2]*v85[10]+v58[3]*v85[14],t[3]=v58[0]*v85[3]+v58[1]*v85[7]+v58[2]*v85[11]+v58[3]*v85[15],t[4]=v58[4]*v85[0]+v58[5]*v85[4]+v58[6]*v85[8]+v58[7]*v85[12],t[5]=v58[4]*v85[1]+v58[5]*v85[5]+v58[6]*v85[9]+v58[7]*v85[13],t[6]=v58[4]*v85[2]+v58[5]*v85[6]+v58[6]*v85[10]+v58[7]*v85[14],t[7]=v58[4]*v85[3]+v58[5]*v85[7]+v58[6]*v85[11]+v58[7]*v85[15],t[8]=v58[8]*v85[0]+v58[9]*v85[4]+v58[10]*v85[8]+v58[11]*v85[12],t[9]=v58[8]*v85[1]+v58[9]*v85[5]+v58[10]*v85[9]+v58[11]*v85[13],t[10]=v58[8]*v85[2]+v58[9]*v85[6]+v58[10]*v85[10]+v58[11]*v85[14],t[11]=v58[8]*v85[3]+v58[9]*v85[7]+v58[10]*v85[11]+v58[11]*v85[15],t[12]=v58[12]*v85[0]+v58[13]*v85[4]+v58[14]*v85[8]+v58[15]*v85[12],t[13]=v58[12]*v85[1]+v58[13]*v85[5]+v58[14]*v85[9]+v58[15]*v85[13],t[14]=v58[12]*v85[2]+v58[13]*v85[6]+v58[14]*v85[10]+v58[15]*v85[14],t[15]=v58[12]*v85[3]+v58[13]*v85[7]+v58[14]*v85[11]+v58[15]*v85[15],v73[v93][A]=t[3]-t[0],v73[v93][B]=t[7]-t[4],v73[v93][C]=t[11]-t[8],v73[v93][D]=t[15]-t[12],f140(v73,v93),v73[LEFT][A]=t[3]+t[0],v73[LEFT][B]=t[7]+t[4],v73[LEFT][C]=t[11]+t[8],v73[LEFT][D]=t[15]+t[12],f140(v73,LEFT),v73[v89][A]=t[3]+t[1],v73[v89][B]=t[7]+t[5],v73[v89][C]=t[11]+t[9],v73[v89][D]=t[15]+t[13],f140(v73,v89),v73[TOP][A]=t[3]-t[1],v73[TOP][B]=t[7]-t[5],v73[TOP][C]=t[11]-t[9],v73[TOP][D]=t[15]-t[13],f140(v73,TOP),v73[BACK][A]=t[3]-t[2],v73[BACK][B]=t[7]-t[6],v73[BACK][C]=t[11]-t[10],v73[BACK][D]=t[15]-t[14],f140(v73,BACK),v73[v94][A]=t[3]+t[2],v73[v94][B]=t[7]+t[6],v73[v94][C]=t[11]+t[10],v73[v94][D]=t[15]+t[14],f140(v73,v94)}var s390v={x:0,y:0,z:0};function f55(t,e,n){s390v.x=t,s390v.y=e,s390v.z=n}function f125(t,e,n,i,o,r){for(var a=0;a<6;a++)if(!(v73[a][A]*t+v73[a][B]*o+v73[a][C]*n+v73[a][D]>0||v73[a][A]*i+v73[a][B]*o+v73[a][C]*n+v73[a][D]>0||v73[a][A]*t+v73[a][B]*e+v73[a][C]*n+v73[a][D]>0||v73[a][A]*i+v73[a][B]*e+v73[a][C]*n+v73[a][D]>0||v73[a][A]*t+v73[a][B]*o+v73[a][C]*r+v73[a][D]>0||v73[a][A]*i+v73[a][B]*o+v73[a][C]*r+v73[a][D]>0||v73[a][A]*t+v73[a][B]*e+v73[a][C]*r+v73[a][D]>0||v73[a][A]*i+v73[a][B]*e+v73[a][C]*r+v73[a][D]>0))return 0;return 1}function f56(t,e,n,i){t+=s390v.x,e+=s390v.y,n+=s390v.z;for(var o=0;o<6;o++)if(v73[o][A]*t+v73[o][B]*e+v73[o][C]*n+v73[o][D]<=-i)return 0;return 1}function f199(){mat4.multiply(v68,v48,v78);var t=[0,0,0,1],e=[0,0,0,0];return e[0]=t[0]*v68[0]+t[1]*v68[4]+t[2]*v68[8]+t[3]*v68[12],e[1]=t[0]*v68[1]+t[1]*v68[5]+t[2]*v68[9]+t[3]*v68[13],e[2]=t[0]*v68[2]+t[1]*v68[6]+t[2]*v68[10]+t[3]*v68[14],e[3]=t[0]*v68[3]+t[1]*v68[7]+t[2]*v68[11]+t[3]*v68[15],t[0]=e[0]*v85[0]+e[1]*v85[4]+e[2]*v85[8]+e[3]*v85[12],t[1]=e[0]*v85[1]+e[1]*v85[5]+e[2]*v85[9]+e[3]*v85[13],t[2]=e[0]*v85[2]+e[1]*v85[6]+e[2]*v85[10]+e[3]*v85[14],t[3]=e[0]*v85[3]+e[1]*v85[7]+e[2]*v85[11]+e[3]*v85[15],0==t[3]?[-500,-500]:(t[0]/=t[3],t[1]/=t[3],t[2]/=t[3],t[3]<0&&(t[0]*=2e4,t[1]*=2e4),t[0]=.5*t[0]+.5,t[1]=.5*t[1]+.5,t[2]=.5*t[2]+.5,t[0]=t[0]*s249v.x,t[1]=t[1]*s249v.y,t[3]>0?[t[0],s249v.y-t[1]]:[s249v.y-t[0],t[1]])}var v11=!1,v23=0,v17=0;function f167(t,e,n,i){f127(1,1,1,.3),t==_TX(47)&&1==v23&&f127(1,.5,0,1),"123"==t&&1==v17&&f127(1,.5,0,1);var o=!1;switch(v80.x>e-.5*i&&v80.x<e+.5*i&&v80.y>n-53&&v80.y<n+53&&1==v80.click&&(f127(1,.5,0,1),o=!0),f214(),f123(e-.5*i,n,0),f198(.5,.7,.5),f121(3),f228(),f214(),f123(e,n,0),f198((i-24)/10,.7,.5),f121(4),f228(),f214(),f123(e+.5*i,n,0),f198(-.5,.7,.5),f121(3),f228(),t){case _TX(47):f127(1,1,1,1),f214(),f123(e,n,0),f198(.5,.5,.5),f121(5),f228(),1==o&&(v23=1-v23,v17=0);break;case"DEL":f127(1,1,1,1),f214(),f123(e,n,0),f198(.5,.5,.5),f121(6),f228(),1==o&&(s248v=_TX(43));break;case"123":f127(1,1,1,1),f214(),f123(e,n,0),f198(.5,.5,.5),f121(7),f228(),1==o&&(v17=1-v17,v23=0);break;case _TX(48):f127(1,1,1,1),f214(),f123(e,n,0),f198(.5,.5,.5),f121(8),f228(),1==o&&(s248v=" ");break;case _TX(49):f127(1,1,1,1),f214(),f123(e,n,0),f198(.5,.5,.5),f121(9),f228(),1==o&&(v11=!1);break;default:f170(v90),f214(),f123(e-5,n-17,0),f127(0,0,0,1),f185(0," "+t+" "),f123(0,-2,0),f127(1,1,1,1),f185(0," "+t+" "),f228(),1==o&&(s248v=t)}}function f126(){if(0==v31&&(v11=!1),0!=v11){f124(),f143(1),f127(1,1,1,.95);var t=800;t>s249v.x-30&&(t=s249v.x-30),0==v32&&1==v31&&(t=s249v.x-30);var e=s249v.y-210;(v80.y<e-250||v80.x<.5*s249v.x-.5*t-40||v80.x>.5*s249v.x+.5*t+40)&&1==v80.click&&(v11=!1,v16=-1),f214(),f123(.5*s249v.x-.5*t,e,0),f198(.5,.53,.5),f121(1),f228(),f214(),f123(.5*s249v.x,e,0),f198((t-30)/10,.53,.5),f121(2),f228(),f214(),f123(.5*s249v.x+.5*t,e,0),f198(-.5,.53,.5),f121(1),f228();var n=t/10*1.033,i=.5*s249v.x-.465*t,o=e-176,r=0;1==v23&&(r=29),1==v17&&(r=58);for(var a=0;a<10;a++){f167(v24[r],i,o,.95*n),i+=n,r++}i=.5*s249v.x-.465*t,o+=110;for(a=0;a<10;a++){f167(v24[r],i,o,.95*n),i+=n,r++}i=.5*s249v.x-.465*t,o+=110,f167(_TX(47),i+.25*n,o,1.45*n),i+=1.5*n;for(a=0;a<7;a++){f167(v24[r],i,o,.95*n),i+=n,r++}f167("DEL",i+.25*n,o,1.455*n),f167("123",(i=.5*s249v.x-.465*t)+.25*n,o+=110,1.45*n),i+=1.5*n,f167(v24[27],i,o,.95*n),i+=3*n,f167(_TX(48),i,o,.98*n*5),i+=3*n,f167(v24[28],i,o,.95*n),i+=n,f167(_TX(49),i+.25*n,o,1.45*n)}}window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var v74,v79=0,v95=0,v39=0,v71=0,v50=0,v86=1e3/65;function f168(){v74=0,v46=-1,f39(),f145()}function f169(){CapedIsReady=!1;var t=(new Date).getTime();if(t<v50+v86)setTimeout(f169,v50+v86-t);else{var e=t-(v79||t);v79=t,v50=t,v39=e,(v95=e)>65&&(v95=65),v95<1e-4&&(v95=1e-4),v71=.9*v71+1e3/v95*.1,f168(),f124(),1==f231()&&f194(),requestAnimationFrame(f169)}}var v1,v0,v80,shader=new Array,v59=[_TX(50),_TX(51),_TX(52),_TX(53),_TX(54),_TX(55),_TX(56),_TX(57),_TX(58),_TX(59)],v46=-1;function f229(){this.prog,this.valide=!1,this.vsh="",this.fsh="",this.s255v,this.s254v,this.TextureCoor,this.Normals,this.PrMatrix,this.MvMatrix,this.NoMatrix,this.CaMatrix,this.ShMatrix,this.Texture0,this.Texture1,this.Texture2,this.Texture3,this.Texture4,this.Colors,this.s260v,this.LightDir,this.CamPos}function f141(){for(var t=0;t<1e3;t++)shader.push,shader[t]=new f229;for(t=0;t<v59.length;t++)f142(t,v59[t])}function f30(t){shader[t].s255v=gl.getAttribLocation(shader[t].prog,_TX(60)),shader[t].s254v=gl.getAttribLocation(shader[t].prog,_TX(61)),shader[t].TextureCoor=gl.getAttribLocation(shader[t].prog,_TX(62)),shader[t].Normals=gl.getAttribLocation(shader[t].prog,_TX(63)),shader[t].v68=gl.getUniformLocation(shader[t].prog,_TX(64)),shader[t].MvMatrix=gl.getUniformLocation(shader[t].prog,_TX(65)),shader[t].NoMatrix=gl.getUniformLocation(shader[t].prog,_TX(66)),shader[t].CaMatrix=gl.getUniformLocation(shader[t].prog,_TX(67)),shader[t].ShMatrix=gl.getUniformLocation(shader[t].prog,_TX(68)),shader[t].Texture0=gl.getUniformLocation(shader[t].prog,_TX(69)),shader[t].Texture1=gl.getUniformLocation(shader[t].prog,_TX(70)),shader[t].Texture2=gl.getUniformLocation(shader[t].prog,_TX(71)),shader[t].Texture3=gl.getUniformLocation(shader[t].prog,_TX(72)),shader[t].Texture4=gl.getUniformLocation(shader[t].prog,_TX(73)),shader[t].s292v=gl.getUniformLocation(shader[t].prog,_TX(74)),shader[t].s294vRT=gl.getUniformLocation(shader[t].prog,_TX(75)),shader[t].Colors=gl.getUniformLocation(shader[t].prog,_TX(76)),shader[t].LightDir=gl.getUniformLocation(shader[t].prog,_TX(77)),shader[t].CamPos=gl.getUniformLocation(shader[t].prog,_TX(78)),shader[t].s260v=gl.getUniformLocation(shader[t].prog,_TX(79))}function f57(t){var e=gl.createShader(gl.VERTEX_SHADER);if(gl.shaderSource(e,shader[t].vsh),gl.compileShader(e),!gl.getShaderParameter(e,gl.COMPILE_STATUS))return alert(_TX(80)+t+"]"+gl.getShaderInfoLog(e)),void alert(shader[t].vsh);var n=gl.createShader(gl.FRAGMENT_SHADER);if(gl.shaderSource(n,shader[t].fsh),gl.compileShader(n),!gl.getShaderParameter(n,gl.COMPILE_STATUS))return alert(_TX(81)+t+"]"+gl.getShaderInfoLog(n)),void alert(shader[t].fsh);shader[t].prog=gl.createProgram(),gl.attachShader(shader[t].prog,e),gl.attachShader(shader[t].prog,n),gl.linkProgram(shader[t].prog),gl.getProgramParameter(shader[t].prog,gl.LINK_STATUS)?(gl.useProgram(shader[t].prog),f30(t),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null),gl.vertexAttribPointer(shader[t].s255v,1,gl.FLOAT,!1,0,0),shader[t].valide=!0,v18--,v41--):alert(_TX(82)+t)}function f58(t,e){var n;console.log(_TX(83)+t+" "+e),(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_TX(84))).onreadystatechange=function(){4==n.readyState&&(shader[t].fsh="\n"+n.responseText+"\n",f57(t))},n.overrideMimeType(_TX(85)),n.open("GET",_TX(86)+e+_TX(87)+Game_Version,!0),n.send()}function f59(t,e){var n;(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_TX(84))).onreadystatechange=function(){4==n.readyState&&(shader[t].vsh="\n"+n.responseText+"\n",f58(t,e))},n.overrideMimeType(_TX(85)),n.open("GET",_TX(86)+e+_TX(88)+Game_Version,!0),n.send()}function f142(t,e){console.log(_TX(89),e),v18++,v41++,f59(t,e)}function f143(t){0!=shader[t].valide?(gl.useProgram(shader[t].prog),-1!=shader[t].s255v&&gl.enableVertexAttribArray(shader[t].s255v),-1!=shader[t].s254v&&gl.enableVertexAttribArray(shader[t].s254v),-1!=shader[t].TextureCoor&&gl.enableVertexAttribArray(shader[t].TextureCoor),-1!=shader[t].Normals&&gl.enableVertexAttribArray(shader[t].Normals),-1!=shader[t].s260v&&gl.enableVertexAttribArray(shader[t].s260v),v46=t):console.log(_TX(90)+t)}function f38(){null!=shader[v46].v68&&gl.uniformMatrix4fv(shader[v46].v68,!1,v85),null!=shader[v46].MvMatrix&&gl.uniformMatrix4fv(shader[v46].MvMatrix,!1,v78),null!=shader[v46].CaMatrix&&gl.uniformMatrix4fv(shader[v46].CaMatrix,!1,v48),null!=shader[v46].ShMatrix&&gl.uniformMatrix4fv(shader[v46].ShMatrix,!1,v49),null!=shader[v46].NoMatrix&&(mat3.normalFromMat4(v47,v78),gl.uniformMatrix3fv(shader[v46].NoMatrix,!1,v47)),null!=shader[v46].Texture0&&gl.uniform1i(shader[v46].Texture0,0),null!=shader[v46].Texture1&&gl.uniform1i(shader[v46].Texture1,1),null!=shader[v46].Texture2&&gl.uniform1i(shader[v46].Texture2,2),null!=shader[v46].Texture3&&gl.uniform1i(shader[v46].Texture3,3),null!=shader[v46].Texture4&&gl.uniform1i(shader[v46].Texture4,4),null!=shader[v46].LightDir&&gl.uniform3f(shader[v46].LightDir,s92vLx,s92vLy,s92vLz),null!=shader[v46].CamPos&&gl.uniform3f(shader[v46].CamPos,v70[0],v70[1],v70[2])}function f60(t,e,n){Normal=f196({x:t,y:e,z:n}),s92vLx=Normal.x,s92vLy=Normal.y,s92vLz=Normal.z}function f127(t,e,n,i){s92vR=t,s92vG=e,s92vB=n,s92vA=i,-1!=v46&&0!=shader[v46].valide&&gl.uniform4f(shader[v46].Colors,t,e,n,i)}function f230(){this.x=-1,this.y=-1,this.old_x,this.old_y,this.real_x,this.real_y,this.s405v=0,this.button_b=0,this.click=0}function f39(){1==v80.click&&(v80.click=-1),1==v80.s405v&&0==v80.click&&(v80.click=1),0==v80.s405v&&-1==v80.click&&(v80.click=0)}function f46(t,e){v80.real_x=t,v80.real_y=e,v80.old_x=v80.x,v80.x=t,v80.old_y=v80.y,v80.y=e,v80.x-=v27,v80.y-=v36,v80.x*=s249v.x/s379v.x,v80.y*=s249v.y/s379v.y,v80.x=Math.floor(v80.x),1==isNaN(v80.x)&&(v80.x=0),v80.x<0&&(v80.x=0),v80.y=Math.floor(v80.y),1==isNaN(v80.y)&&(v80.y=0),v80.y<0&&(v80.y=0),v80.x>s249v.x&&(v80.x=s249v.x),v80.y>s249v.y&&(v80.y=s249v.y)}function f61(){se_canvas.onmousemove=function(t){f46(t.pageX,t.pageY)},se_canvas.onmousedown=function(t){f135(),f46(t.pageX,t.pageY),1==t.buttons&&(v80.s405v=1),2==t.buttons&&(v80.button_b=1)},se_canvas.onmouseup=function(t){1!=t.buttons&&(v80.s405v=0),2!=t.buttons&&(v80.button_b=0)},se_canvas.onmouseenter=function(t){1!=t.buttons&&(v80.s405v=0),2!=t.buttons&&(v80.button_b=0)}}function f200(t){for(var e=t.changedTouches,n=0;n<e.length;n++)f46(e[n].pageX,e[n].pageY)}var v40=new Array;function f201(){v40=[]}function f31(t){for(var e=0;e<v40.length;e++){if(v40[e].identifier==t)return e}return-1}function f62(){se_canvas.addEventListener(_TX(91),(function(t){t.preventDefault(),t.stopPropagation(),f135(),f46(t.changedTouches[0].pageX,t.changedTouches[0].pageY),v80.s405v=1;for(var e=t.changedTouches,n=0;n<e.length;n++)v40.push({identifier:e[n].identifier,pageX:e[n].pageX,pageY:e[n].pageY,clicked:0});return!1}),!1),se_canvas.addEventListener(_TX(92),(function(t){t.preventDefault(),t.stopPropagation(),f46(t.changedTouches[0].pageX,t.changedTouches[0].pageY),v80.s405v=1;for(var e=t.changedTouches,n=0;n<e.length;n++){var i=f31(e[n].identifier);v40[i].pageX=e[n].pageX,v40[i].pageY=e[n].pageY}return!1}),!1),se_canvas.addEventListener(_TX(93),(function(t){t.preventDefault(),t.stopPropagation(),v80.s405v=0;for(var e=t.changedTouches,n=0;n<e.length;n++){var i=f31(e[n].identifier);v40.splice(i,1)}return!1}),!1),se_canvas.addEventListener(_TX(94),(function(t){t.preventDefault(),t.stopPropagation(),v80.s405v=0;for(var e=t.changedTouches,n=0;n<e.length;n++){var i=f31(e[n].identifier);v40.splice(i,1)}return!1}),!1),se_canvas.addEventListener(_TX(95),(function(t){t.preventDefault(),t.stopPropagation(),v80.s405v=0;for(var e=t.changedTouches,n=0;n<e.length;n++){var i=f31(e[n].identifier);v40.splice(i,1)}return!1}),!1)}function f63(){v80=new f230,0==v31?f61():f62()}function f13(t,e,n,i){for(var o=0;o<v40.length;o++){var r=v40[o].pageX/s379v.x*s249v.x,a=v40[o].pageY/s379v.y*s249v.y;if(0==v40[o].clicked&&r>t&&r<n&&a>e&&a<i)return v40[o].clicked=1,1}return 1==v80.click&&v80.x>=t&&v80.x<=n&&v80.y>=e&&v80.y<=i?(v80.click=-1,1):0}function f64(t,e,n,i){if(1==v80.s405v&&v80.x>=t&&v80.x<=n&&v80.y>=e&&v80.y<=i)return 1;for(var o=0;o<v40.length;o++){var r=v40[o].pageX/s379v.x*s249v.x,a=v40[o].pageY/s379v.y*s249v.y;if(r>t&&r<n&&a>e&&a<i)return 1}return 0}function f248(){this.s416v=-1,this.glyph=[]}function f182(){this.s127vX=0,this.s127vY=0,this.s131vX=0,this.s131vY=0,this.s135vX=0,this.s135vY=0,this.xOffset=0,this.yOffset=0,this.xAdvance=0,this.s255vitionBuffer,this.TextureCoordBuffer,this.VertexIndexBuffer}var v87=[];function f183(){for(var t=0;t<10;t++)v87.push(),v87[t]=new f248}function f184(t,e){var n;console.log(_TX(96)+t+" "+e),v87[t].s416v=f36(e+_TX(97)+Game_Version),v18++,(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_TX(84))).onreadystatechange=function(){4==n.readyState&&(f101(t,n.responseText),v18--,v25++)},n.overrideMimeType(_TX(85)),n.open("GET",e+_TX(98),!0),n.send()}function f6(t,e){v87[t].glyph[e].s255vitionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v87[t].glyph[e].s255vitionBuffer),vertices=[v87[t].glyph[e].xOffset,v87[t].glyph[e].yOffset+v87[t].glyph[e].s135vY,-.25,v87[t].glyph[e].xOffset+v87[t].glyph[e].s135vX,v87[t].glyph[e].yOffset+v87[t].glyph[e].s135vY,-.25,v87[t].glyph[e].xOffset+v87[t].glyph[e].s135vX,v87[t].glyph[e].yOffset,-.25,v87[t].glyph[e].xOffset,v87[t].glyph[e].yOffset,-.25],gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW),v87[t].glyph[e].s255vitionBuffer.itemSize=3,v87[t].glyph[e].s255vitionBuffer.numItems=4,v87[t].glyph[e].VertexTextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v87[t].glyph[e].VertexTextureCoordBuffer);var n=[v87[t].glyph[e].s127vX,v87[t].glyph[e].s131vY,v87[t].glyph[e].s131vX,v87[t].glyph[e].s131vY,v87[t].glyph[e].s131vX,v87[t].glyph[e].s127vY,v87[t].glyph[e].s127vX,v87[t].glyph[e].s127vY];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(n),gl.STATIC_DRAW),v87[t].glyph[e].VertexTextureCoordBuffer.itemSize=2,v87[t].glyph[e].VertexTextureCoordBuffer.numItems=4,v87[t].glyph[e].VertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v87[t].glyph[e].VertexIndexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v87[t].glyph[e].VertexIndexBuffer.itemSize=1,v87[t].glyph[e].VertexIndexBuffer.numItems=6}function f101(t,e){var n=!1,o=1,r=1,a=(e=(e=(e=(e=(e=(e=e.replace(/\t/gi," ")).replace(/ /gi," ")).replace(/ /gi," ")).replace(/ /gi," ")).replace(/ /gi," ")).replace(/ /gi," ")).split("\n");for(i=0;i<a.length;i++){if(a[i].slice(0,6)==_TX(99)){var s=a[i].split(" ");o=parseInt(s[3].split("=")[1]),r=parseInt(s[4].split("=")[1])}if(a[i].slice(0,8)==_TX(100)){s=a[i].split(" ");var l=parseInt(s[1].split("=")[1]);v87[t].glyph[l]=new f182,v87[t].glyph[l].s127vX=parseFloat(s[2].split("=")[1])/o,v87[t].glyph[l].s127vY=1-parseFloat(s[3].split("=")[1])/r,v87[t].glyph[l].s131vX=(parseFloat(s[2].split("=")[1])+parseFloat(s[4].split("=")[1]))/o,v87[t].glyph[l].s131vY=1-(parseFloat(s[3].split("=")[1])+parseFloat(s[5].split("=")[1]))/r,v87[t].glyph[l].s135vX=parseFloat(s[4].split("=")[1]),v87[t].glyph[l].s135vY=parseFloat(s[5].split("=")[1]),v87[t].glyph[l].xOffset=parseInt(s[6].split("=")[1]),v87[t].glyph[l].yOffset=parseInt(s[7].split("=")[1]),v87[t].glyph[l].xAdvance=parseInt(s[8].split("=")[1]),f6(t,l),n=!0}}if(1!=n){a=e.split("#");for(i=0;i<a.length;i++)if(a[i].slice(0,7)==_TX(101)){l=parseInt(a[i].split("=")[1]);i++,v87[t].glyph[l]=new f182,v87[t].glyph[l].s127vX=parseFloat(a[i].split("(")[1].split(",")[0]),v87[t].glyph[l].s127vY=1-parseFloat(a[i].split("(")[1].split(",")[1]),i++,v87[t].glyph[l].s131vX=parseFloat(a[i].split("(")[1].split(",")[0]),v87[t].glyph[l].s131vY=1-parseFloat(a[i].split("(")[1].split(",")[1]),i++,v87[t].glyph[l].s135vX=parseFloat(a[i].split("(")[1].split(",")[0]),v87[t].glyph[l].s135vY=parseFloat(a[i].split("(")[1].split(",")[1]),i++,v87[t].glyph[l].xOffset=parseInt(a[i].split("=")[1]),i++,v87[t].glyph[l].yOffset=parseInt(a[i].split("=")[1]),i++,v87[t].glyph[l].xAdvance=parseInt(a[i].split("=")[1]),f6(t,l),n=!0}}}var left=0,v90=1,right=2,v60=0,v81=1,v82=1,v83=1,v84=1;function f170(t){v60=t}var v75=0;function f65(t){v75=t}function f171(t,e,n,i){v81=t,v82=e,v83=n,v84=i}var v91=0,v92=0;function f185(t,e,n,i){if(!(v41>0)){v91=null!=n?1*n:0,v92=null!=i?1*i:0,v92-=5,f143(2),f127(v81,v82,v83,v84),PrevTexture=-1,f120(v87[t].s416v,0),f214(),v60==right&&(v91=-f23(t,e)),v60==v90&&(v91=.5*-f23(t,e));for(var o=0;o<e.length;o++)f79(t,e.charCodeAt(o));f228(),f143(1)}}function f79(t,e){v41>0||typeof v87[t].glyph[e]!=_TX(1)&&(null!=shader[v46].s260v&&gl.uniform3f(shader[v46].s260v,v91,v92,v75),gl.bindBuffer(gl.ARRAY_BUFFER,v87[t].glyph[e].s255vitionBuffer),gl.vertexAttribPointer(shader[v46].s255v,v87[t].glyph[e].s255vitionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,v87[t].glyph[e].VertexTextureCoordBuffer),gl.vertexAttribPointer(shader[v46].TextureCoor,v87[t].glyph[e].VertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v87[t].glyph[e].VertexIndexBuffer),f38(),gl.drawElements(gl.TRIANGLES,v87[t].glyph[e].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v91+=v87[t].glyph[e].xAdvance,v74+=2)}function f23(t,e){for(var n=0,i=0;i<e.length;i++)n+=f14(t,e.charCodeAt(i));return n}function f14(t,e){return typeof v87[t].glyph[e]==_TX(1)?0:v87[t].glyph[e].xAdvance}var v31=!1,v32=!1;function f202(){for(var t=[_TX(102),_TX(103),_TX(104),_TX(105),_TX(106),_TX(107),_TX(4),_TX(5),_TX(108),_TX(109),_TX(110),_TX(111),_TX(112),_TX(113),_TX(114)],e=0;e<15;e++){if(navigator.userAgent.toLowerCase().search(t[e])>-1)return void(v31=!0)}v31=!1}function f203(){for(var t=[_TX(106),_TX(5),_TX(102),_TX(103),_TX(105)],e=0;e<5;e++){if(navigator.userAgent.toLowerCase().search(t[e])>-1)return void(v32=!0)}v32=!1}systemn_Localisation="en";var v24=_TX(115);function f66(){var t=navigator.language||navigator.s406vuage;systemn_Localisation=t.split("-")[0].toLowerCase(),"fr"==systemn_Localisation&&(v24=_TX(116)),"de"==systemn_Localisation&&(v24=_TX(117)),"du"==systemn_Localisation&&(v24=_TX(117))}function f144(){f202(),1==v31&&f203(),f66()}function f249(t){this.Name=t,this.obj=[],this.LevelObject=[]}function f215(){this.Name,this.v74=0,this.Vertexs=0,this.s255vitionBuffer,this.NormalBuffer,this.TextureCoordBuffer,this.VertexIndexBuffer,this.s416v=-1,this.Phys_s255vitionBuffer,this.Phys_VertexIndexBuffer,this.MinX=1e5,this.MaxX=-1e5,this.MinY=1e5,this.MaxY=-1e5,this.MinZ=1e5,this.MaxZ=-1e5,this.Filter=!1,this.Filters478v=0,this.FilterForce=0,this.FilterRotY=0}var Mesh=[],v61=0,v62=0,v63=0,v64=0,v65=0,v76=0,v33=!0,v34=!1;function f145(){(v61+=.005*v95)>6.28319&&(v61-=6.28319),v62+=.01*v95,v61>6.28319&&(v61-=6.28319),v63+=.03*v95,v61>6.28319&&(v61-=6.28319),(v64+=.001*v95)>100&&(v64-=100),(v65+=.001*v95)>6.28319&&(v65-=6.28319),(v76+=.01*v95)>36e3&&(v76-=36e4)}function f186(){for(var t=0;t<2e3;t++)Mesh.push}function f187(t,e){if(v18++,t<0||t>1999)alert(_TX(118));else{Mesh[t]=new f249(e);var n=new XMLHttpRequest;n.onload=function(i){if(200==this.status){if(e.lastIndexOf(_TX(119))>9&&f24(Mesh[t],n.responseText),e.lastIndexOf(_TX(120))>9){var o=new Uint8Array(n.response);f47(Mesh[t],o)}if(e.lastIndexOf(_TX(121))>9){const e=async function(){var e=new zip.ZipReader(new zip.BlobReader(n.response)),i=await e.getEntries();const o=await i[0].getData(new zip.Uint8ArrayWriter,{onprogress:(t,e)=>{}});f47(Mesh[t],o)};e()}}},n.open("GET",e+"?"+Game_Version,!0),e.lastIndexOf(_TX(120))>9&&(n.responseType=_TX(19)),e.lastIndexOf(_TX(121))>9&&(n.responseType=_TX(122)),n.send()}}function f15(t){f127(1,1,1,1);for(var e=0;e<Mesh[t].obj.length;e++){var n=Mesh[t].obj[e],i=.5*(n.MinX+n.MaxX),o=.5*(n.MinY+n.MaxY),r=.5*(n.MinZ+n.MaxZ),a=Math.abs(n.MinX-n.MaxX),s=Math.abs(n.MinY-n.MaxY),l=Math.abs(n.MinZ-n.MaxZ);f214(),f123(i,o,r),f198(a,s,l),f188(9),f228()}}var v12=13,v13=3,v5=16;function f188(t,e,n){if(isNaN(e)&&(e=0),isNaN(n)?n=Mesh[t].obj.length:n++,-1!=v46&&typeof Mesh[t]!=_TX(1)&&!(e>Mesh[t].obj.length-1||n>Mesh[t].obj.length))for(var i=e;i<n;i++){var o=Mesh[t].obj[i];if(0==v34||f125(o.MaxX,o.MaxY,o.MaxZ,o.MinX,o.MinY,o.MinZ)){if(0!=o.Filter&&1==v33){s92vR,s92vG,s92vB,s92vA;!0,gl.activeTexture(gl.TEXTURE0)}-1!=shader[v46].TextureCoor&&(f120(o.s416v,0),gl.bindBuffer(gl.ARRAY_BUFFER,o.TextureCoordBuffer),gl.vertexAttribPointer(shader[v46].TextureCoor,o.TextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0)),-1!=shader[v46].Normals&&o.NormalBuffer.numItems>0&&(gl.bindBuffer(gl.ARRAY_BUFFER,o.NormalBuffer),gl.vertexAttribPointer(shader[v46].Normals,o.NormalBuffer.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ARRAY_BUFFER,o.s255vitionBuffer),gl.vertexAttribPointer(shader[v46].s255v,o.s255vitionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,o.VertexIndexBuffer),f38(),gl.drawElements(gl.TRIANGLES,o.VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v74+=o.v74}}}function f80(t,e,n,i){if(f127(1,1,1,i),typeof Mesh[t]!=_TX(1))for(var o=0;o<Mesh[t].obj.length;o++){var r=Mesh[t].obj[o],a=Mesh[e].obj[o];gl.bindBuffer(gl.ARRAY_BUFFER,r.s255vitionBuffer),gl.vertexAttribPointer(shader[v46].s255v,r.s255vitionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,a.s255vitionBuffer),gl.vertexAttribPointer(shader[v46].s254v,a.s255vitionBuffer.itemSize,gl.FLOAT,!1,0,0),f120(-1==n?r.s416v:n,0),gl.bindBuffer(gl.ARRAY_BUFFER,r.TextureCoordBuffer),gl.vertexAttribPointer(shader[v46].TextureCoor,r.TextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,r.VertexIndexBuffer),f38(),gl.drawElements(gl.TRIANGLES,r.VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v74+=r.v74}}function f0(t,e,n,i,o,r,a,s,l,c,u,f){this.Vec=new f239(t,i,a,c),this.VN=new f239(n,r,l,f),this.VT=new f239(e,o,s,u)}function f24(t,e){var n=[],o=[],r=[],a=[],s="",l="",c=!1,u=0,f=e.split("\n");for(i=0;i<f.length;i++){if("f"!=f[i][0]&&1==c){var v=t.obj.length;t.obj.push,t.obj[v]=new f215;var h=[],d=[],_=[],g=[];function y(e,i,a){for(var s=n[e-1],l=r[i-1],c=o[a-1],u=h.length,f=_.length,p=0;p<u/3;p++)if(s.x==h[3*p]&&s.y==h[3*p+1]&&s.z==h[3*p+2]&&l.x==_[2*p]&&l.y==_[2*p+1]&&c.x==d[3*p]&&c.y==d[3*p+1]&&c.z==d[3*p+2])return p;return t.obj[v].MinX>1*s.x&&(t.obj[v].MinX=1*s.x),t.obj[v].MaxX<1*s.x&&(t.obj[v].MaxX=1*s.x),t.obj[v].MinY>1*s.y&&(t.obj[v].MinY=1*s.y),t.obj[v].MaxY<1*s.y&&(t.obj[v].MaxY=1*s.y),t.obj[v].MinZ>1*s.z&&(t.obj[v].MinZ=1*s.z),t.obj[v].MaxZ<1*s.z&&(t.obj[v].MaxZ=1*s.z),h.push,h[u]=s.x,h.push,h[u+1]=s.y,h.push,h[u+2]=s.z,d.push,d[u]=c.x,d.push,d[u+1]=c.y,d.push,d[u+2]=c.z,_.push,_[f]=l.x,_.push,_[f+1]=l.y,(u=h.length)/3-1}for(var m=0;m<u;m++){var b=y(a[m].Vec.x,a[m].VT.x,a[m].VN.x),x=y(a[m].Vec.y,a[m].VT.y,a[m].VN.y),w=y(a[m].Vec.z,a[m].VT.z,a[m].VN.z);if(g.push,g[g.length]=b,g.push,g[g.length]=x,g.push,g[g.length]=w,0!=a[m].Vec.w&&0!=a[m].VT.z&&0!=a[m].VN.z){var A=y(a[m].Vec.w,a[m].VT.w,a[m].VN.w);g.push,g[g.length]=b,g.push,g[g.length]=A,g.push,g[g.length]=w}}var M=h.length/3;if(t.obj[v].s255vitionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.obj[v].s255vitionBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(h),gl.STATIC_DRAW),t.obj[v].s255vitionBuffer.itemSize=3,t.obj[v].s255vitionBuffer.numItems=M,t.obj[v].TextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.obj[v].TextureCoordBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(_),gl.STATIC_DRAW),t.obj[v].TextureCoordBuffer.itemSize=2,t.obj[v].TextureCoordBuffer.numItems=M,t.obj[v].NormalBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.obj[v].NormalBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(d),gl.STATIC_DRAW),t.obj[v].NormalBuffer.itemSize=3,t.obj[v].NormalBuffer.numItems=M,t.obj[v].VertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.obj[v].VertexIndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),gl.STATIC_DRAW),t.obj[v].VertexIndexBuffer.itemSize=1,t.obj[v].VertexIndexBuffer.numItems=g.length,t.obj[v].Name=s,t.obj[v].v74=g.length,t.obj[v].Vertexs=M,0==s.search(_TX(123))){var S=s.split(":");for(p=0;p<S.length;p++){var T=S[p].split("=");T[0]==_TX(124)&&(t.obj[v].Filter=T[1]),T[0]==_TX(125)&&(t.obj[v].Filters478v=1*T[1]),T[0]==_TX(126)&&(t.obj[v].FilterForce=1*T[1])}}t.obj[v].s416v=f36(_TX(39)+l+_TX(127)),c=!1,s="",l="",a=[],u=0}if("v"==f[i][0]&&" "==f[i][1]){var B=f[i].split(" "),E=n.length;n.push,n[E]=new f239(-B[1],B[2],B[3])}if("v"==f[i][0]&&"n"==f[i][1]){B=f[i].split(" ");var F=o.length;o.push,o[F]=new f239(-B[1],B[2],B[3],0)}if("v"==f[i][0]&&"t"==f[i][1]){B=f[i].split(" ");var R=r.length;r.push,r[R]=new f239(B[1],B[2],0,0)}if("g"==f[i][0]&&" "==f[i][1])s=(B=f[i].split(" "))[1];if("u"==f[i][0]&&"s"==f[i][1]&&"t"==f[i][4]&&"l"==f[i][5])l=(B=f[i].split(" "))[1];if("f"==f[i][0]&&" "==f[i][1]){var I=(B=f[i].split(" "))[1].split("/"),C=I[0],L=I[1],P=I[2],D=B[2].split("/"),X=D[0],k=D[1],U=D[2],z=B[3].split("/"),V=z[0],N=z[1],G=z[2];if(typeof B[4]!==_TX(1))var q=B[4].split("/");else q=[!1,!1,!1];var O=q[0],Y=q[1],W=q[2];a.push,a[u]=new f0(C,L,P,X,k,U,V,N,G,O,Y,W),u++,c=!0}}v18--,v25++}var out="";function f47(t,e){for(var n="",i=0;i<e.length;i++){var o=String.fromCharCode(e[i]);n+=o,">"==o&&(i=e.length)}var r=n.split("\n"),a=[],s=[],l=[],c=[],u="",f="",v=0,h=0,d=0,_=1e5,g=-1e5,y=1e5,m=-1e5,b=1e5,x=-1e5;function w(){var e=t.obj.length;if(t.obj.push,t.obj[e]=new f215,0==u.search(_TX(123))){var n=u.split(":");for(p=0;p<n.length;p++){var i=n[p].split("=");i[0]==_TX(124)&&(t.obj[e].Filter=i[1]),i[0]==_TX(125)&&(t.obj[e].Filters478v=1*i[1]),i[0]==_TX(126)&&(t.obj[e].FilterForce=1*i[1])}}t.obj[e].s416v=f36(_TX(39)+f+_TX(127));var o=s.length/3;if(t.obj[e].s255vitionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.obj[e].s255vitionBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s),gl.STATIC_DRAW),t.obj[e].s255vitionBuffer.itemSize=3,t.obj[e].s255vitionBuffer.numItems=o,0==u.search(_TX(128))){for(var r=u.split("_")[1].split(".")[0],v=[0,0],h=0;h<3*o;h+=3)v[0]+=s[h],v[1]+=s[h+1];v[0]/=9,v[1]/=9;var d=f176([s[0],s[1]],[s[3],s[4]]),w=f195(Math.cos(d-1.5708),Math.sin(d-1.5708));d*=180/Math.PI,d-=90,t.LevelObject.push({name:r,x:v[0],y:v[1],dir:d,normal:w})}if(t.obj[e].TextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.obj[e].TextureCoordBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(c),gl.STATIC_DRAW),t.obj[e].TextureCoordBuffer.itemSize=2,t.obj[e].TextureCoordBuffer.numItems=o,t.obj[e].NormalBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.obj[e].NormalBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(l),gl.STATIC_DRAW),t.obj[e].NormalBuffer.itemSize=3,t.obj[e].NormalBuffer.numItems=o,t.obj[e].VertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.obj[e].VertexIndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),gl.STATIC_DRAW),t.obj[e].VertexIndexBuffer.itemSize=1,t.obj[e].VertexIndexBuffer.numItems=a.length,u==_TX(129)){t.LinesToKeep=[];for(h=0;h<a.length;h+=3){var A=a[h],M=a[h+1],S=a[h+2];function T(e,n){var i=c[2*e],o=c[2*n];if(i>.7&&o>.7||i<.3&&o<.3){var r=3*e,a=3*n;t.LinesToKeep.push({a:{x:s[r],y:s[r+1],z:s[r+2]},b:{x:s[a],y:s[a+1],z:s[a+2]}})}}T(A,M),T(M,S),T(S,A)}}t.obj[e].Name=u,t.obj[e].v74=a.length/3,t.obj[e].Vertexs=o,t.obj[e].MinX=_,t.obj[e].MaxX=g,t.obj[e].MinY=y,t.obj[e].MaxY=m,t.obj[e].MinZ=b,t.obj[e].MaxZ=x}var A=n.indexOf(_TX(130))+7;for(i=0;i<r.length;i++){if(0==r[i].search("O:")&&(u=r[i].substring(2)),0==r[i].search("B:")){var M=r[i].split(":")[1].split(" ");_=1*-M[0],y=1*M[1],b=1*M[2],g=1*-M[3],m=1*M[4],x=1*M[5]}if(0==r[i].search("T:")&&(f=r[i].substring(2)),0==r[i].search("F:")&&(v=3*r[i].substring(2)),0==r[i].search("P:")&&(h=1*r[i].substring(2)),0==r[i].search("D:")){d=1*r[i].substring(2);d+=A,a=[];for(var S=0;S<v;S++){var T=1*e[d],B=1*e[++d],E=1*e[++d];d++;var F=T+255*B+65025*E;a[S]=F}s=[];for(S=0;S<h;S++){T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;s[3*S]=-F;T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;s[3*S+1]=F;T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;s[3*S+2]=F}l=[];for(S=0;S<h;S++){T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;l[3*S]=-F;T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;l[3*S+1]=F;T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;l[3*S+2]=F}c=[];for(S=0;S<h;S++){T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;c[2*S]=F;T=1*e[d],B=1*e[++d],E=1*e[++d];d++;F=(T+255*B+65025*E-8290687)/1e3;c[2*S+1]=1-F}var R=!1;0==u.search(_TX(131))&&(R=!0),0==R&&w()}0==r[i].search(_TX(130))&&(i=r.length+1)}v18--,v25++}var v18=0,v41=0,v42=0,v35=0,v51=0,v25=0,v66=!1,v26=0,v8=0,v26_f251=0;function f81(){v18<6&&(v42[v51].type==_TX(132)?(f118(v42[v51].id,_TX(39)+v42[v51].path),v51++):v42[v51].type==_TX(133)?(f187(v42[v51].id,_TX(134)+v42[v51].path),v51++):v42[v51].type==_TX(52)?(f184(v42[v51].id,_TX(135)+v42[v51].path),v51++):v42[v51].type==_TX(136)?(f154(v42[v51].id,_TX(137)+v42[v51].path),v51++):v42[v51].type==_TX(138)&&(f162(v42[v51].id,_TX(39)+v42[v51].path),v51++)),v51==v42.length?(console.log(_TX(139)),v66=!0):setTimeout((function(){f81()}),10)}function f148(){var t;f102(),f48(),f49(),ResourceReady=-1,(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_TX(84))).onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseText.split("\n");for(v42=[],v35=0,i=0;i<e.length;i++)e[i].length>5&&"{"==e[i][0]&&(v42[v35]=JSON.parse(e[i]),v35++);f81()}};var e=(new Date).getTime();t.open("GET",_TX(140)+e,!0),t.send()}function f231(){if(1==v66)return 1;if(0!=v41)return 0;gl.colorMask(!0,!0,!0,!0),gl.clearColor(s428vbackground.r,s428vbackground.g,s428vbackground.b,1),gl.clear(gl.COLOR_BUFFER_BIT),se_canvas.style.display=_TX(141),f124(),f214(),f123(half_s249v.x,half_s249v.y,0),f4(),f228();var t=v51;return t>99&&(t=99),f42(t),0}var s424vvertex,s424vindex,s424vbar_vertex,s424vbar_index,s424vicon_vertex,s424vicon_index,s424vicon_uv,s424vSize=160,s424vBarSize=10,s428vbackground={r:.1,g:0,b:.2},s428vbar_color={r:.2,g:.1,b:.3},s424vcolor={r:0,g:1,b:0};function f102(){var t=1,e=[],n=[];e.push(0),e.push(0),e.push(-.2);for(var i=0;i<360.25;i+=.25){var o=Math.cos(f240(i+90))*(s424vSize+1.5*s424vBarSize),r=Math.sin(f240(i+90))*(s424vSize+1.5*s424vBarSize);e.push(o),e.push(r),e.push(-.2),i<360&&(n.push(0),n.push(t),n.push(t+1),t++)}s424vbar_vertex=gl.createBuffer(),s424vbar_index=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,s424vbar_vertex),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(e),gl.STATIC_DRAW),s424vbar_vertex.itemSize=3,s424vbar_vertex.numItems=e.length/3,gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,s424vbar_index),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),gl.STATIC_DRAW),s424vbar_index.itemSize=1,s424vbar_index.numItems=n.length,gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null)}function f48(){var t=1,e=[],n=[],i=[];e.push(0),e.push(0),e.push(-.2),i.push(.5),i.push(.5);for(var o=0;o<365;o+=5){var r=Math.cos(f240(o))*(s424vSize-s424vBarSize),a=Math.sin(f240(o))*(s424vSize-s424vBarSize);e.push(r),e.push(a),e.push(-.2);var s=.5+.495*Math.cos(f240(o)),l=.5-.495*Math.sin(f240(o));i.push(s),i.push(l),o<360&&(n.push(0),n.push(t),n.push(t+1),t++)}s424vicon_vertex=gl.createBuffer(),s424vicon_index=gl.createBuffer(),s424vicon_uv=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,s424vicon_vertex),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(e),gl.STATIC_DRAW),s424vicon_vertex.itemSize=3,s424vicon_vertex.numItems=e.length/3,gl.bindBuffer(gl.ARRAY_BUFFER,s424vicon_uv),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(i),gl.STATIC_DRAW),s424vicon_uv.itemSize=2,s424vicon_uv.numItems=i.length/2,gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,s424vicon_index),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),gl.STATIC_DRAW),s424vicon_index.itemSize=1,s424vicon_index.numItems=n.length,gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null)}function f49(){var t=1,e=[],n=[];e.push(0),e.push(0),e.push(-.2);for(var i=0;i<365;i+=5){var o=Math.cos(f240(i))*s424vSize,r=Math.sin(f240(i))*s424vSize;e.push(o),e.push(r),e.push(-.2),i<360&&(n.push(0),n.push(t),n.push(t+1),t++)}t++;for(i=0;i<365;i+=5){o=Math.cos(f240(i))*(s424vSize+s424vBarSize),r=Math.sin(f240(i))*(s424vSize+s424vBarSize);e.push(o),e.push(r),e.push(-.2),o=Math.cos(f240(i))*(s424vSize+2*s424vBarSize),r=Math.sin(f240(i))*(s424vSize+2*s424vBarSize),e.push(o),e.push(r),e.push(-.2),i<360&&(n.push(t),n.push(t+1),n.push(t+2),n.push(t+2),n.push(t+1),n.push(t+3),t+=2)}s424vvertex=gl.createBuffer(),s424vindex=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,s424vvertex),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(e),gl.STATIC_DRAW),s424vvertex.itemSize=3,s424vvertex.numItems=e.length/3,gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,s424vindex),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),gl.STATIC_DRAW),s424vindex.itemSize=1,s424vindex.numItems=n.length,gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null)}var Prev_v26=-1;function f4(t){(v26=v25/v35*100)>100&&(v26=100),v26<0&&(v26=0),v26_f251<v26&&(v26_f251=.5*v26_f251+.5*v26),v26_f251<v26+10&&v26_f251<95&&(v26_f251+=5e-4*v95),v8!=v26_f251&&(v8=v26_f251),f143(0),f38(),v26_f251>0&&(f127(s424vcolor.r,s424vcolor.g,s424vcolor.b,1),gl.bindBuffer(gl.ARRAY_BUFFER,s424vbar_vertex),gl.vertexAttribPointer(shader[v46].s255v,s424vbar_vertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,s424vbar_index),gl.drawElements(gl.TRIANGLES,s424vbar_index.numItems*(.01*v26_f251),gl.UNSIGNED_SHORT,0),v74+=s424vbar_vertex.itemSize),f127(0,0,0,.1),f123(8,8,0),f38(),gl.bindBuffer(gl.ARRAY_BUFFER,s424vvertex),gl.vertexAttribPointer(shader[v46].s255v,s424vvertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,s424vindex),gl.drawElements(gl.TRIANGLES,s424vindex.numItems,gl.UNSIGNED_SHORT,0),v74+=s424vvertex.itemSize,f127(s428vbar_color.r,s428vbar_color.g,s428vbar_color.b,1),f123(-8,-8,0),f38(),gl.bindBuffer(gl.ARRAY_BUFFER,s424vvertex),gl.vertexAttribPointer(shader[v46].s255v,s424vvertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,s424vindex),gl.drawElements(gl.TRIANGLES,s424vindex.numItems,gl.UNSIGNED_SHORT,0),v74+=s424vvertex.itemSize,1==v67[0].valide&&(f143(1),f127(1,1,1,1),1==v67[0].valide&&f120(0,0),f38(),gl.bindBuffer(gl.ARRAY_BUFFER,s424vicon_vertex),gl.vertexAttribPointer(shader[v46].s255v,s424vicon_vertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,s424vicon_uv),gl.vertexAttribPointer(shader[v46].TextureCoor,s424vicon_uv.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,s424vicon_index),gl.drawElements(gl.TRIANGLES,s424vicon_index.numItems,gl.UNSIGNED_SHORT,0),v74+=s424vicon_vertex.itemSize)}var s280v,Part_GLUV,Part_GLIndex,s294v=[],s293v=30,s292v=[],s294vRT=[];function f189(){this.Pos=[0,0,0],this.Vel=[0,0,0],this.Size=0,this.Sizes=0,this.Rot=0,this.Rots=0,this.ImageID=0,this.Gravity=0}var s268v=[],s276v=[],s294v_Index=[],s299v=0;function f82(){for(var t=0,e=0;e<s293v;e++)s268v.push(-1),s268v.push(-1),s268v.push(e),s268v.push(1),s268v.push(-1),s268v.push(e),s268v.push(1),s268v.push(1),s268v.push(e),s268v.push(-1),s268v.push(1),s268v.push(e),s276v.push(0),s276v.push(0),s276v.push(.0625),s276v.push(0),s276v.push(.0625),s276v.push(1),s276v.push(0),s276v.push(1),s294v_Index.push(t),s294v_Index.push(t+1),s294v_Index.push(t+2),s294v_Index.push(t),s294v_Index.push(t+2),s294v_Index.push(t+3),t+=4;s280v=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,s280v),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s268v),gl.STATIC_DRAW),s280v.itemSize=3,s280v.numItems=s268v.length/3,Part_GLUV=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,Part_GLUV),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s276v),gl.STATIC_DRAW),Part_GLUV.itemSize=2,Part_GLUV.numItems=s276v.length/2,Part_GLIndex=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,Part_GLIndex),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(s294v_Index),gl.STATIC_DRAW),Part_GLIndex.itemSize=1,Part_GLIndex.numItems=s294v_Index.length}var s294v_Position,s294v_Velocity,s294v_Size,s294v_Sizes478v,s294v_Rotation,s294v_Rotations478v,s294v_Gravity,s294v_ImageID,s294vSlices=0;function f83(){if(f143(3),!(-1==shader[v46].TextureCoor||s294vRT.length<1))for(var t=0;t<s294vSlices;t++)f38(),gl.uniform4fv(shader[v46].s292v,s292v[t]),gl.uniform2fv(shader[v46].s294vRT,s294vRT[t]),gl.bindBuffer(gl.ARRAY_BUFFER,Part_GLUV),gl.vertexAttribPointer(shader[v46].TextureCoor,Part_GLUV.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,s280v),gl.vertexAttribPointer(shader[v46].s255v,s280v.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,Part_GLIndex),gl.drawElements(gl.TRIANGLES,Part_GLIndex.numItems,gl.UNSIGNED_SHORT,0),v74+=2*s293v}function f50(){for(var t=0;t<s294v.length;t++)s294v[t].Pos[0]+=s294v[t].Vel[0]*v95,s294v[t].Pos[1]+=s294v[t].Vel[1]*v95,s294v[t].Pos[2]+=s294v[t].Vel[2]*v95,s294v[t].Size+=s294v[t].Sizes*v95,s294v[t].Vel[1]-=s294v[t].Gravity*v95,s294v[t].Rot+=s294v[t].Rots*v95,s294v[t].Size<=.1&&(s294v[t].Size=0);for(t=0;t<s294v.length;t++)0==s294v[t].Size&&s294v.splice(t,1);s299v=s294v.length,s294vSlices=Math.ceil(s299v/s293v),s292v=[],s294vRT=[];for(t=0;t<s294vSlices;t++)s292v.push(),s292v[t]=[],s294vRT.push(),s294vRT[t]=[];var e=0;for(t=0;t<s294vSlices;t++)for(var n=0;n<s293v;n++)e<s299v?(s292v[t].push(s294v[e].Pos[0]),s292v[t].push(s294v[e].Pos[1]),s292v[t].push(s294v[e].Pos[2]),s292v[t].push(s294v[e].Size),s294vRT[t].push(s294v[e].Rot),s294vRT[t].push(s294v[e].ImageID),e++):(s292v[t].push(0),s292v[t].push(0),s292v[t].push(0),s292v[t].push(0),s294vRT[t].push(0),s294vRT[t].push(0))}function f9(t){s294v_Position=t}function f10(t){s294v_Velocity=t}function f40(t){s294v_Size=t}function f7(t){s294v_Sizes478v=t}function f11(t){s294v_Rotation=t}function f1(t){s294v_Rotations478v=t}function f16(t){s294v_Gravity=t}function f17(t){s294v_ImageID=t/16}function f103(){var t=s294v.length;s294v.push(new f189),s294v[t].Pos=s294v_Position,s294v[t].Vel=s294v_Velocity,s294v[t].Size=s294v_Size,s294v[t].Sizes=s294v_Sizes478v,s294v[t].Rot=s294v_Rotation,s294v[t].Rots=s294v_Rotations478v,s294v[t].Gravity=s294v_Gravity,s294v[t].ImageID=s294v_ImageID}function f18(t,e,n,i){console.log(_TX(142)+t+" "+e+" "+n+" "+i),s294vEmiters.push({type:t,x:e,y:n,z:i,time:0})}function f5(){for(var t=0;t<s294vEmiters.length;t++)if(f56(s294vEmiters[t].x,s294vEmiters[t].y,s294vEmiters[t].z,110)&&s294vEmiters[t].type===_TX(143)){f9([s294vEmiters[t].x-30+60*Math.random(),s294vEmiters[t].y+t,s294vEmiters[t].z-30+60*Math.random()]),f10([.2*Math.random()-.1,.6*Math.random(),.2*Math.random()-.1]),f7(-.043),f1(.01*Math.random()-.005),f16(.0019),f17(5),f40(15+10*Math.random()),f11(360*Math.random()),f103();var e=360*Math.random();f1(0),f9([s294vEmiters[t].x+7*Math.sin(.01745329*e),1,s294vEmiters[t].z+7*Math.cos(.01745329*e)]),f10([.05*Math.sin(.01745329*e),0,.05*Math.cos(.01745329*e)]),f40(5+10*Math.random()),f7(-.0085),f11(360*Math.random()),f16(0),f17(3),f103()}}s294vEmiters=[];var GLOW_GLVertex,GLOW_GLUV,GLOW_GLIndex,s36v=[],s36vCount=50,s36vXYZS=[],s36vRT=[];function f216(){this.Pos=[0,0,0],this.Size=0,this.Rot=0,this.ImageID=0,this.Gravity=0}var s36v_Vertices=[],s36v_UV=[],s36v_Index=[],Glow_Index=0;function f128(){for(var t=0;t<s36vCount;t++)s36v.push(new f216),s36vXYZS.push(),s36vXYZS.push(),s36vXYZS.push(),s36vXYZS.push(),s36vRT.push(),s36vRT.push();for(t=0;t<s36vCount;t++)s36v_Vertices.push(-1),s36v_Vertices.push(-1),s36v_Vertices.push(t),s36v_Vertices.push(1),s36v_Vertices.push(-1),s36v_Vertices.push(t),s36v_Vertices.push(1),s36v_Vertices.push(1),s36v_Vertices.push(t),s36v_Vertices.push(-1),s36v_Vertices.push(1),s36v_Vertices.push(t),s36v_UV.push(0),s36v_UV.push(0),s36v_UV.push(.125),s36v_UV.push(0),s36v_UV.push(.125),s36v_UV.push(1),s36v_UV.push(0),s36v_UV.push(1),s36v_Index.push(Glow_Index),s36v_Index.push(Glow_Index+1),s36v_Index.push(Glow_Index+2),s36v_Index.push(Glow_Index),s36v_Index.push(Glow_Index+2),s36v_Index.push(Glow_Index+3),Glow_Index+=4;GLOW_GLVertex=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,GLOW_GLVertex),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s36v_Vertices),gl.STATIC_DRAW),GLOW_GLVertex.itemSize=3,GLOW_GLVertex.numItems=s36v_Vertices.length/3,GLOW_GLUV=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,GLOW_GLUV),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s36v_UV),gl.STATIC_DRAW),GLOW_GLUV.itemSize=2,GLOW_GLUV.numItems=s36v_UV.length/2,GLOW_GLIndex=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,GLOW_GLIndex),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(s36v_Index),gl.STATIC_DRAW),GLOW_GLIndex.itemSize=1,GLOW_GLIndex.numItems=s36v_Index.length}function f129(){f84(),f38(),gl.uniform4fv(shader[v46].s292v,s36vXYZS),gl.uniform2fv(shader[v46].s294vRT,s36vRT),gl.bindBuffer(gl.ARRAY_BUFFER,GLOW_GLUV),gl.vertexAttribPointer(shader[v46].TextureCoor,GLOW_GLUV.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,GLOW_GLVertex),gl.vertexAttribPointer(shader[v46].s255v,GLOW_GLVertex.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,GLOW_GLIndex),gl.drawElements(gl.TRIANGLES,GLOW_GLIndex.numItems,gl.UNSIGNED_SHORT,0),v74+=2*s36vCount}function f84(){for(var t=0;t<s36vCount;t++)s36v[t].Size>0?(s36vXYZS[4*t]=s36v[t].Pos[0],s36vXYZS[4*t+1]=s36v[t].Pos[1],s36vXYZS[4*t+2]=s36v[t].Pos[2],s36vXYZS[4*t+3]=s36v[t].Size,s36vRT[2*t]=s36v[t].Rot,s36vRT[2*t+1]=s36v[t].ImageID,s36v[t].Size=0):s36vXYZS[4*t+3]=0}function f149(t,e,n,i){for(var o=0;o<s36vCount;o++)if(s36v[o].Size<=0)return s36v[o].Pos=e,s36v[o].Size=n,s36v[o].Rot=i,void(s36v[o].ImageID=t/8)}var s158v=!1,s162v=!1,s163v=!1,s164v=!1,s158v_Click=!1,s419v=0,s420v=0,s493v=!1,GamePad_Status=-1,GamePad_PrevStatus=-1,gamepads=null;function f85(t){null==gamepads[0]||gamepads.length<1||typeof gamepads[0].vibrationActuator==_TX(1)||null==gamepads[0].vibrationActuator||(console.log(gamepads[0].vibrationActuator),gamepads[0].vibrationActuator.playEffect(_TX(144),{startDelay:0,duration:t,weakMagnitude:1,strongMagnitude:1}))}function f86(){null==(gamepads=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[])[0]||gamepads.length<1||(1==s158v_Click&&(s158v_Click=-1),-1==s158v_Click&&0==gamepads[0].buttons[0].pressed&&(s158v_Click=0),0==s158v_Click&&1==gamepads[0].buttons[0].pressed&&(s158v_Click=1),GamePad_Status=gamepads[0].buttons[0].pressed+" "+gamepads[0].buttons[1].pressed+" "+gamepads[0].buttons[2].pressed+" "+gamepads[0].buttons[3].pressed+" "+gamepads[0].axes[0]+gamepads[0].axes[1],GamePad_PrevStatus!=GamePad_Status?(s158v=1==gamepads[0].buttons[0].pressed?1:0,s162v=1==gamepads[0].buttons[1].pressed?1:0,s163v=1==gamepads[0].buttons[2].pressed?1:0,s164v=1==gamepads[0].buttons[3].pressed?1:0,0==s158v_Click&&1==s158v&&(s158v_Click=1),s419v=gamepads[0].axes[0]<-.1?-1:gamepads[0].axes[0]>.1?1:0,s420v=gamepads[0].axes[1]<-.1?-1:gamepads[0].axes[1]>.1?1:0,GamePad_PrevStatus=GamePad_Status,s493v=!0):s493v=!1)}var seHeightMap_StepX,seHeightMap_StepZ,seHeightMap_MinX,seHeightMap_MaxX,seHeightMap_MinZ,seHeightMap_MaxZ,seHeightMap_Data,seHeightMap_CountX=0,seHeightMap_CountZ=0,seHeightMap_Loading=!1,s459v=!1;function f87(t,e){return(t=Math.floor(t))<0&&(t=0),t>80&&(t=80),(e=Math.floor(e))<0&&(e=0),e>80&&(e=80),seHeightMap_Data[t][e].y}function f41(t,e,n){if(0==s459v)return 0;if(isNaN(t)||isNaN(e))return 0;_x=(t+4e3)/100,_z=(e+4e3)/100,_x=Math.floor(_x),_z=Math.floor(_z),_x<0&&(_x=0),_x>80&&(_x=80),_z<0&&(_z=0),_z>80&&(_z=80);for(var i=seHeightMap_Data[_x][_z].d,o=0;o<GroundPlane.length;o++)n>GroundPlane[o].height-100&&t>GroundPlane[o].ax&&e>GroundPlane[o].az&&t<GroundPlane[o].bx&&e<GroundPlane[o].bz&&(i=50,o=1e3);return i}function f104(t,e,n){if(0==s459v)return 0;if(isNaN(t)||isNaN(e))return 0;for(var i=(t+4e3)/100,o=(e+4e3)/100,r=1-(i-Math.floor(i)),a=1-(o-Math.floor(o)),s=f87(i,o),l=f87(i+1,o),c=f87(i+1,o+1),u=(s*r+l*(1-r))*a+(f87(i,o+1)*r+c*(1-r))*(1-a),f=0;f<GroundPlane.length;f++)GroundPlane[f].height>u&&n>GroundPlane[f].height-100&&t>GroundPlane[f].ax&&e>GroundPlane[f].az&&t<GroundPlane[f].bx&&e<GroundPlane[f].bz&&(u=GroundPlane[f].height);return u}function f88(t){var e;seHeightMap_Loading=!0,s459v=!1,t=_TX(145)+t+_TX(146),console.log(t),v18++,(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_TX(84))).onreadystatechange=function(){if(console.log(_TX(147)+e.readyState),4==e.readyState){console.log(_TX(148)+t);var n=e.responseText.split("\n");seHeightMap_Data=new Array(81);for(var o=0;o<81;o++)seHeightMap_Data[o]=new Array(81);for(o=0;o<81;o++)for(var r=0;r<81;r++)seHeightMap_Data[o][r]=0;for(i=0;i<n.length;i++)if(n[i].length>5){var a=n[i].split(" "),s=(o=Math.round((1*-a[0]+4e3)/100),r=Math.round((1*a[2]+4e3)/100),1*a[1]),l=1*a[3];seHeightMap_Data[o][r]={y:s,d:l}}v18--,s459v=!0,seHeightMap_Loading=!1}},e.open("GET",t+"?"+Game_Version,!1),e.send()}var f89_ready=!1;function f232(t,e,n,i){return[t*n+e*i,e*-n+t*i]}function f19(t,e,n,i,o,r,a,s,l,c,u){var f=.5;if(u>0){var v=new f239(0,0,0,0);v.x=t-r,v.z=e-a,t+=(v=f196(v)).x*f,e+=v.z*f,r-=v.x*f,a-=v.z*f}if(u>50)return 50;var h=Math.sin(.01745329*(-90+o)),d=Math.cos(.01745329*(-90+o)),p=f232(n,i,h,d),_=f232(-n,i,h,d),g=f232(-n,-i,h,d),y=f232(n,-i,h,d);p[0]+=t,p[1]+=e,_[0]+=t,_[1]+=e,g[0]+=t,g[1]+=e,y[0]+=t,y[1]+=e;var m=f232(s,l,h=Math.sin(.01745329*(-90+c)),d=Math.cos(.01745329*(-90+c))),b=f232(-s,l,h,d),x=f232(-s,-l,h,d),w=f232(s,-l,h,d);return m[0]+=r,m[1]+=a,b[0]+=r,b[1]+=a,x[0]+=r,x[1]+=a,w[0]+=r,w[1]+=a,1==f3(p[0],p[1],_[0],_[1],m[0],m[1],b[0],b[1],!1)||1==f3(_[0],_[1],g[0],g[1],m[0],m[1],b[0],b[1],!1)||1==f3(g[0],g[1],y[0],y[1],m[0],m[1],b[0],b[1],!1)||1==f3(y[0],y[1],p[0],p[1],m[0],m[1],b[0],b[1],!1)||1==f3(p[0],p[1],_[0],_[1],b[0],b[1],x[0],x[1],!1)||1==f3(_[0],_[1],g[0],g[1],b[0],b[1],x[0],x[1],!1)||1==f3(g[0],g[1],y[0],y[1],b[0],b[1],x[0],x[1],!1)||1==f3(y[0],y[1],p[0],p[1],b[0],b[1],x[0],x[1],!1)||1==f3(p[0],p[1],_[0],_[1],x[0],x[1],w[0],w[1],!1)||1==f3(_[0],_[1],g[0],g[1],x[0],x[1],w[0],w[1],!1)||1==f3(g[0],g[1],y[0],y[1],x[0],x[1],w[0],w[1],!1)||1==f3(y[0],y[1],p[0],p[1],x[0],x[1],w[0],w[1],!1)||1==f3(p[0],p[1],_[0],_[1],w[0],w[1],m[0],m[1],!1)||1==f3(_[0],_[1],g[0],g[1],w[0],w[1],m[0],m[1],!1)||1==f3(g[0],g[1],y[0],y[1],w[0],w[1],m[0],m[1],!1)||1==f3(y[0],y[1],p[0],p[1],w[0],w[1],m[0],m[1],!1)?f19(t,e,n,i,o,r,a,s,l,c,u+f):u}function f89(t,e,n,i,o,r,a){if(0==f89_ready)return[t,n];if(0==a&&(Intersec_BoostPad=!1),a>10)return[t,n];f28(t,n,125,125);var s=Math.sin(.01745329*(-90+r)),l=Math.cos(.01745329*(-90+r)),c=f232(i,o,s,l),u=f232(-i,o,s,l),f=f232(-i,-o,s,l),v=f232(i,-o,s,l);if(c[0]+=t,c[1]+=n,u[0]+=t,u[1]+=n,f[0]+=t,f[1]+=n,v[0]+=t,v[1]+=n,f90(c[0],c[1],u[0],u[1],f[0],f[1],v[0],v[1],e),0!=s334v){var h=t-ColDirX,d=n-ColDirY,p=Math.atan2(d,h),_=f89(t+=2*Math.cos(p),e,n+=2*Math.sin(p),i,o,r,a+1);t=_[0],n=_[1]}return[t,n]}var GroundPlane=[],Wall=[],Wall_3D=[],s113v=[],_Start=[],_Pos=[],s79v=[],_f234s=[];function f172(t){s113v=null,_Start=null,_Pos=null,s79v=null,s113v=[],_Start=[],_Pos=[],s79v=[];for(var e=t.split("\n"),n=!1,i=!1,o=!1,r=!1,a=!1,s=!1,l=!1,c=0;c<e.length-1;c++)if(-1!=e[c].search(_TX(149))){console.log(_TX(150));var u=e[c].split(" "),f=1*u[4],v=1*u[3],h=1*u[5],d=.5*u[1],p=.5*u[2],_={height:f,ax:v-d,az:h-p,bx:v+d,bz:h+p};GroundPlane.push(_),console.log(_),n=!1,i=!1,o=!1,r=!1,a=!1,s=!1,l=!1}else{-1!=e[c].search(_TX(151))&&(n=!0,o=!1,r=!1,a=!1,s=!1,i=!1,l=!1,-1!=e[c].search(_TX(152))&&(n=!1,o=!0,a=!1,i=!1,l=!1),-1!=e[c].search(_TX(153))&&(n=!1,r=!0,a=!1,i=!1,l=!1),-1!=e[c].search(_TX(154))&&(n=!1,r=!1,a=!0,i=!1,l=!1),-1!=e[c].search(_TX(155))&&(n=!1,r=!1,a=!1,i=!1,l=!0),-1!=e[c].search(_TX(156))&&(s=!0),-1!=e[c].search(_TX(157))&&(n=!1,o=!1,a=!1,i=!0,l=!1));var g=1*e[c].split(" ")[0],y=1*e[c].split(" ")[1],m=1*e[c+1].split(" ")[0],b=1*e[c+1].split(" ")[1];if(1!=a||isNaN(g)||isNaN(y)||isNaN(m)||isNaN(b)||(_Pos.push({x:g,z:y}),_Pos.push({x:m,z:b})),!(1!=i||isNaN(g)||isNaN(y)||isNaN(m)||isNaN(b))){var x=.5*(1*e[c].split(" ")[2]+1*e[c+1].split(" ")[2]);Wall_3D.push({xa:g,za:y,xb:m,zb:b,s333v:s,height:x})}if(1!=n||isNaN(g)||isNaN(y)||isNaN(m)||isNaN(b)||Wall.push({xa:g,za:y,xb:m,zb:b,s333v:s}),1!=o||isNaN(g)||isNaN(y)||isNaN(m)||isNaN(b)||s113v.push({ax:g,ay:y,bx:m,by:b}),1!=r||isNaN(g)||isNaN(y)||isNaN(m)||isNaN(b)||_Start.push({ax:g,ay:y,bx:m,by:b}),1==l&&!isNaN(g)&&!isNaN(y)){for(;0==s459v;);var w=f104(g,y,-1e4)+50;s79v.push({x:g,y:w,z:y,t:0})}}console.log(s113v[0])}function f233(t){var e,n=_TX(158)+t+_TX(159);(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_TX(84))).onreadystatechange=function(){f172(e.responseText,0,0)},e.overrideMimeType(_TX(85)),e.open("GET",n,!1),e.send()}function f26(t){Wall=null,Wall=[],Wall_3D=null,Wall_3D=[],GroundPlane=null,GroundPlane=[],f89_ready=!1;var e,n=_TX(158)+t+_TX(159);(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_TX(84))).onreadystatechange=function(){if(4==e.readyState){f172(e.responseText),f130(),f33(-4e3,-4e3,4e3,4e3),f68(10,10);for(var t=0;t<Wall.length;t++)f27(Wall[t].xa,Wall[t].za,Wall[t].xb,Wall[t].zb,Wall[t].s333v,1e5);for(t=0;t<Wall_3D.length;t++)f27(Wall_3D[t].xa,Wall_3D[t].za,Wall_3D[t].xb,Wall_3D[t].zb,Wall_3D[t].s333v,Wall_3D[t].height);f32(),console.log(Wall.length+_TX(160)),console.log(Wall_3D.length+_TX(161)),f89_ready=!0}},e.overrideMimeType(_TX(85)),e.open("GET",n,!0),e.send()}var s325v=new Array,s188vX=new Array,s188vY=new Array,s184v=0;function f204(){this.HashCount_X=1,this.HashCount_Y=1,this.HashSize_X=0,this.s342v=0,this.HashPos_Left=0,this.HashPos_Right=0,this.HashPos_Top=0,this.HashPos_Bottom=0,this.HashDetected=0,this.HashDetectedCount=0,this.s329v,this.s329vCount=0,this.HashStaticsList,this.Dyna_ax=0,this.Dyna_bx=0,this.Dyna_cx=0,this.Dyna_dx=0,this.Dyna_ay=0,this.Dyna_by=0,this.Dyna_cy=0,this.Dyna_dy=0}function f173(){this.ax=0,this.ay=0,this.bx=0,this.by=0,this.s333v=!1,this.height=0}function f130(){s325v=[],(s325v=new f204).s329vCount=0,s325v.HashDetected=new Array;for(var t=0;t<20;t++)s325v.HashDetected.push;s325v.s329v=new Array,s325v.HashStaticsList=new Array;for(t=0;t<1e4;t++)s325v.HashStaticsList.push,s325v.HashStaticsList[t]=new Array;for(t=0;t<100;t++)s188vX.push,s188vY.push}var ColDirX,ColDirY,s334v,IntersecX=0,IntersecY=0,Intersec_BoostPad=!1;function f3(t,e,n,i,o,r,a,s,l){var c=(s-r)*(n-t)-(a-o)*(i-e);if(0==c)return!1;var u=((a-o)*(e-r)-(s-r)*(t-o))/c,f=((n-t)*(e-r)-(i-e)*(t-o))/c;return!(u<0||u>1||f<0||f>1)&&(1==l?(Intersec_BoostPad=!0,!1):(IntersecX=t+u*(n-t),IntersecY=e+u*(i-e),s188vX[s184v]=IntersecX,s188vY[s184v]=IntersecY,++s184v>100&&(s184v=0),ColDirX+=IntersecX,ColDirY+=IntersecY,s334v++,!0))}function f90(t,e,n,i,o,r,a,s,l){s325v.Dyna_ax=t,s325v.Dyna_ay=e,s325v.Dyna_bx=n,s325v.Dyna_by=i,s325v.Dyna_cx=o,s325v.Dyna_cy=r,s325v.Dyna_dx=a,s325v.Dyna_dy=s,1==s345v&&(_f234s.push({ax:t,ay:e,bx:n,by:i}),_f234s.push({ax:n,ay:i,bx:o,by:r}),_f234s.push({ax:o,ay:r,bx:a,by:s}),_f234s.push({ax:a,ay:s,bx:t,by:e})),ColDirX=0,ColDirY=0,s334v=0;for(var c=0;c<s325v.HashDetectedCount;c++){var u=s325v.HashDetected[c];if(u>-1&&u<1e4)for(var f=s325v.HashStaticsList[u].length,v=0;v<f;v++){var h=s325v.HashStaticsList[u][v];l<s325v.s329v[h].height&&(f3(t,e,n,i,s325v.s329v[h].ax,s325v.s329v[h].ay,s325v.s329v[h].bx,s325v.s329v[h].by,s325v.s329v[h].s333v),f3(n,i,o,r,s325v.s329v[h].ax,s325v.s329v[h].ay,s325v.s329v[h].bx,s325v.s329v[h].by,s325v.s329v[h].s333v),f3(o,r,a,s,s325v.s329v[h].ax,s325v.s329v[h].ay,s325v.s329v[h].bx,s325v.s329v[h].by,s325v.s329v[h].s333v),f3(a,s,t,e,s325v.s329v[h].ax,s325v.s329v[h].ay,s325v.s329v[h].bx,s325v.s329v[h].by,s325v.s329v[h].s333v))}}s334v>0&&(ColDirX/=s334v,ColDirY/=s334v)}function f27(t,e,n,i,o,r){s325v.s329v.push,s325v.s329v[s325v.s329vCount]=new f173,s325v.s329v[s325v.s329vCount].ax=t,s325v.s329v[s325v.s329vCount].ay=e,s325v.s329v[s325v.s329vCount].bx=n,s325v.s329v[s325v.s329vCount].by=i,s325v.s329v[s325v.s329vCount].s333v=o,s325v.s329v[s325v.s329vCount].height=r,s325v.s329vCount++}function f28(t,e,n,i){s325v.HashDetectedCount=0;var o=t-s325v.HashPos_Left,r=e-s325v.HashPos_Top,a=Math.floor((o-.5*n)/s325v.HashSize_X),s=Math.floor((r-.5*i)/s325v.s342v),l=Math.floor((o+.5*n)/s325v.HashSize_X),c=Math.floor((r+.5*i)/s325v.s342v);for(o=a;o<l+1;o++)for(r=s;r<c+1;r++)if(s325v.HashDetected[s325v.HashDetectedCount]=Math.floor(o+r*s325v.HashCount_X),s325v.HashDetectedCount++,s325v.HashDetectedCount>10)return}function f32(){for(var t=0;t<s325v.s329vCount;t++){f28(.5*(s325v.s329v[t].ax+s325v.s329v[t].bx),.5*(s325v.s329v[t].ay+s325v.s329v[t].by),Math.abs(s325v.s329v[t].bx-s325v.s329v[t].ax),Math.abs(s325v.s329v[t].by-s325v.s329v[t].ay));for(var e=0;e<s325v.HashDetectedCount;e++){var n=s325v.HashDetected[e];n>-1&&n<1e4&&s325v.HashStaticsList[n].push(t)}}}function f67(){s325v.HashSize_X=(s325v.HashPos_Right-s325v.HashPos_Left)/s325v.HashCount_X,s325v.s342v=(s325v.HashPos_Bottom-s325v.HashPos_Top)/s325v.HashCount_Y}function f33(t,e,n,i){s325v.HashPos_Left=t,s325v.HashPos_Top=e,s325v.HashPos_Right=n,s325v.HashPos_Bottom=i,f67()}function f68(t,e){t>100&&(t=100),e>100&&(e=100),s325v.HashCount_X=t,s325v.HashCount_Y=e,f67()}var DebugGap,vers_degre=180/Math.PI;function f217(t,e,n,i){return 270-Math.atan2(e-i,t-n)*vers_degre}function f234(t,e,n,i){var o=Math.sqrt((t-n)*(t-n)+(e-i)*(e-i)),r=-f217(t,e,n,i);f214(),f123(t,e,0),f180(r,0,0,1),f160(-DebugGap,-DebugGap,DebugGap,o+DebugGap),f228()}var s345vColl=0;function f131(){DebugGap=2,f214(),f123(0,5,0),f180(90,1,0,0),gl.enable(gl.BLEND),gl.depthMask(!1),f143(0);for(var t=0;t<s325v.HashCount_X;t++)for(var e=s325v.HashPos_Left+t*s325v.HashSize_X,n=0;n<s325v.HashCount_Y;n++){f127(0,0,0,.95);for(var i=s325v.HashPos_Top+n*s325v.s342v,o=0;o<s325v.HashDetectedCount;o++);f160(e+DebugGap,i+DebugGap,e+s325v.HashSize_X-DebugGap,i+s325v.s342v-DebugGap)}for(o=0;o<s325v.s329vCount;o++)1==s325v.s329v[o].s333v?f127(1,1,1,.9):f127(1,1,0,.5),f234(s325v.s329v[o].ax,s325v.s329v[o].ay,s325v.s329v[o].bx,s325v.s329v[o].by);f127(0,1,1,.5);for(o=0;o<1;o++)f234(_Start[o].ax,_Start[o].ay,_Start[o].bx,_Start[o].by);f127(1,0,1,.5);for(o=0;o<s113v.length;o++)f234(s113v[o].ax,s113v[o].ay,s113v[o].bx,s113v[o].by);f127(1,0,1,.5);for(o=0;o<Wall_3D.length;o++)f234(Wall_3D[o].ax,Wall_3D[o].ay,Wall_3D[o].bx,Wall_3D[o].by);for(o=0;o<s325v.HashDetectedCount;o++){var r=s325v.HashDetected[o];if(r>-1&&r<1e4)for(var a=s325v.HashStaticsList[r].length,s=0;s<a;s++)s325v.HashStaticsList[r][s]}DebugGap=3,f127(0,1,0,1);for(o=0;o<_f234s.length;o++)f234(_f234s[o].ax,_f234s[o].ay,_f234s[o].bx,_f234s[o].by);_f234s=[],f127(1,0,0,1);for(o=0;o<100;o++)f160(s188vX[o]-10,s188vY[o]-10,s188vX[o]+10,s188vY[o]+10);gl.disable(gl.BLEND),gl.depthMask(!0),f228()}var Integration_Type=null,Integration_SoundChanged=!1,Integration_IsMute=!1,Trigger_DisableNetwork=!1,Trigger_DisableFireBAse=!1,Trigger_DisablePreferencesButton=!1,Trigger_DisablePreferences=!1,Trigger_Difficulty=3,Trigger_IsLevelBased=!1,Trigger_ShowClock=!0,f218_isInit=!1;function f218(){1!=f218_isInit&&(f218_isInit=!0,console.log(_TX(162)),console.log(_TX(163)+Integration_Type),_TX(164))}function f235(t){console.log(_TX(165)+t)}var famo_previous_score=-1;function f150(){if(Integration_Type!=_TX(164))return!1;if(famo_previous_score!=Score){famo_previous_score=Score;try{window.famobi_analytics.trackEvent(_TX(166),{liveScore:1*Score})}catch(t){}}}function f69(){if(Integration_Type==_TX(164))try{window.famobi_onPauseRequested=function(){Game_GotFocus=!1,f137(),v80.click=0,v80.s405v=0,f235(_TX(167))},window.famobi_onResumeRequested=function(){Game_GotFocus=!0,Integration_SoundChanged=!0,v80.click=0,v80.s405v=0,f235(_TX(168)),se_canvas.focus()},window.famobi.onRequest(_TX(169),(function(){Game_Paused=!0,f137(),v80.click=0,v80.s405v=0,f235(_TX(170))})),window.famobi.onRequest(_TX(171),(function(){Game_Paused=!1,Integration_SoundChanged=!0,v80.click=0,v80.s405v=0,f235(_TX(172)),se_canvas.focus()})),window.famobi.onOffsetChange=function(){f190(),se_canvas.focus()},window.famobi.onRequest(_TX(173),(function(){Integration_SoundChanged=!0,Integration_IsMute=!1})),window.famobi.onRequest(_TX(174),(function(){Integration_SoundChanged=!0,Integration_IsMute=!0})),window.famobi_tracking.init(_TX(175),null,1,!0)}catch(t){f235(_TX(176))}}function f51(){if(Integration_Type!=_TX(164))return!1;try{return window.famobi.hasFeature(_TX(177))}catch(t){}return!1}function f105(){if(Integration_Type==_TX(164))try{return f36(window.famobi.getBrandingButtonImage(!1))}catch(t){return f36(_TX(178))}}var Famo_Level_START_IsResolved=!0;function f8(t){if(Integration_Type==_TX(164)){try{Famo_Level_START_IsResolved=!1,window.famobi_analytics.trackEvent(_TX(179),{levelName:_TX(180)+t}).then((function(){Famo_Level_START_IsResolved=!0,se_canvas.focus()}))}catch(t){}famo_previous_score=-1}}function f2(t){if(Integration_Type==_TX(164))try{window.famobi_analytics.trackEvent(_TX(181),{levelName:_TX(180)+t})}catch(t){}}var Prev_TopAds=0,Prev_BottomAds=0,Prev_LeftAds=0,Prev_RightAds=0;function f70(){var t=window.famobi.getOffsets().top,e=window.famobi.getOffsets().bottom,n=window.famobi.getOffsets().left,i=window.famobi.getOffsets().right;Prev_TopAds=t,Prev_BottomAds=e,Prev_LeftAds=n,Prev_RightAds=i,v36=t,v14=e,v27=n,v20=i,console.log(_TX(182),t,e,n,i)}function f190(){if(Integration_Type==_TX(164)){var t=window.famobi.getOffsets().top,e=window.famobi.getOffsets().bottom,n=window.famobi.getOffsets().left,i=window.famobi.getOffsets().right;Prev_TopAds==t&&Prev_BottomAds==e&&Prev_LeftAds==n&&Prev_RightAds==i||(f70(),f100(),window.setTimeout((function(){f70(),f100()}),800))}}var Famo_LevelENDIsResolved=!0;function f20(t){if(console.log(_TX(183),t),Integration_Type==_TX(164))try{Famo_LevelENDIsResolved=!1,window.famobi_analytics.trackEvent(_TX(166),{liveScore:1*Score}),window.famobi_analytics.trackEvent(_TX(184),{eventName:_TX(185),result:t,score:1*Score}).then((function(){Famo_LevelENDIsResolved=!0,se_canvas.focus()}))}catch(t){}}var Famo_LevelFailIsResolved=!0;function f21(){return Integration_Type!=_TX(164)||Famo_LevelFailIsResolved}function f12(t){if(Integration_Type==_TX(164))try{Famo_LevelFailIsResolved=!1,window.famobi_analytics.trackEvent(_TX(186),{levelName:_TX(180)+t,reason:_TX(187)}).then((function(){Famo_LevelFailIsResolved=!0,se_canvas.focus()})),window.famobi_analytics.trackEvent(_TX(188),{levelName:_TX(180)+t,levelScore:1*Score}),window.famobi_analytics.trackEvent(_TX(189),{totalScore:1*Score})}catch(t){}}function f151(){if(Integration_Type==_TX(164))try{f235(_TX(190)),window.famobi.gameReady()}catch(t){}}var Famo_Pourcent=-1;function f42(t){Integration_Type==_TX(164)&&((t=Math.floor(t))<0&&(t=0),t>100&&(t=100),t<=Famo_Pourcent||(Famo_Pourcent=t,console.log(_TX(191),Famo_Pourcent),window.famobi.setPreloadProgress(Famo_Pourcent)))}var f106IsResolved=!0;function f106(t){if(Integration_Type==_TX(164))try{console.log(_TX(192)+t),f106IsResolved=!1,window.famobi_analytics.trackEvent(_TX(193),{levelName:_TX(180)+t}).then((function(){window.famobi_analytics.trackEvent(_TX(188),{levelName:_TX(180)+t,levelScore:1*Score}),window.famobi_analytics.trackEvent(_TX(189),{totalScore:1*Score}),f106IsResolved=!0,se_canvas.focus()}))}catch(t){}}function f107(){if(Integration_Type==_TX(164))try{f235(_TX(194)),window.famobi.playerReady()}catch(t){}}function f52(){if(Integration_Type==_TX(164))try{window.famobi.trackEvent(_TX(195),{bgmVolume:PREF_Music,sfxVolume:PREF_Sounds})}catch(t){}}function f91(){return Integration_Type==_TX(164)&&(1==window.famobi.hasFeature(_TX(196))&&1==window.famobi.hasRewardedAd())}var Famo_RewardAds_Granted=!1,Famo_RewardAds_Skipped=!1;function f71(){Integration_Type==_TX(164)&&window.famobi.rewardedAd((function(t){console.log(_TX(197),t),t.rewardGranted?(Famo_RewardAds_Granted=!0,Famo_RewardAds_Skipped=!1):(Famo_RewardAds_Granted=!1,Famo_RewardAds_Skipped=!0),se_canvas.focus()}))}var Famo_AdsWatched=!0;function f191(t){console.log(_TX(198)),Integration_Type==_TX(164)&&(Famo_AdsWatched=!1,console.log(_TX(199)),console.log(t),window.famobi.showInterstitialAd({eventId:_TX(199)+t,callback:()=>{Famo_AdsWatched=!0,se_canvas.focus()}}))}var s51v=0,Car_RotationCount=0,Pts_RotationCount=0,NoAirControl=0;function f219(){if((s49v.s126v>150||s50v.s126v>150)&&(s51v=0,Car_RotationCount=0),s49v.s126v<20&&s50v.s126v<20)switch(s51v){case 0:s50v.position[1]>s49v.position[1]+.7*Car_Size&&(s51v=1,f158(_TX(200),.25,.8+.4*Car_RotationCount,!1));break;case 1:s50v.position[0]<s49v.position[0]-.7*Car_Size&&(s51v=2,f158(_TX(200),.25,.95+.4*Car_RotationCount,!1));break;case 2:s50v.position[1]<s49v.position[1]-.7*Car_Size&&(s51v=3,f158(_TX(200),.25,1.1+.4*Car_RotationCount,!1));break;case 3:s50v.position[1]<s49v.position[1]-.7*Car_Size&&(s51v=0,Car_RotationCount++,Pts_RotationCount++,f9([CarCenter.x,CarCenter.y+10,0]),f10([.008*s49v.velocity[0],.001*s49v.velocity[1],0]),f40(28+3*Car_RotationCount),f7(-.0125),f11(0),f1(.1),f16(0),f17(0),f10([.008*s49v.velocity[0],.001*s49v.velocity[1],0]),f11(180),f17(0),f158(_TX(201),.6,.55+.2*Car_RotationCount,!1),f103())}}function f205(t){if(PointsToAdd=0,PointsToAddTimer=0,se_savePref(_TX(202),RubyCount),-1==MenuType){console.log(_TX(203)),CarIsDestroyed=!0,f158(_TX(204),.8,1,!1),f158(_TX(204),.4,.3,!1),world.removeConstraint(revoluteBack),world.removeConstraint(revoluteFront),Game_Mode=0,Pts_RotationCount=0,s18v>3&&(s18v=3),NoAirControl=0,s49v.velocity[0]=-10,s49v.velocity[1]=20,s50v.velocity[0]=10,s50v.velocity[1]=19,revoluteBack=null,revoluteFront=null,DestroyedCounter=0,Trail=[];for(var e=1;e<50;e++)f9([s49v.position[0],s49v.position[1]+e-2-50,0]),f10([5e-4*(20*Math.random()-10)*e,5e-4*(20*Math.random()-10)*e,0]),f40(3*(5+5*Math.random())),f7(-.01),f11(360*Math.random()),f1(125e-6*(-25.5+e)),f16(5e-5),t>0?f17(t):Math.random()>.499?f17(6):f17(7),f103()}}var Trail=[],Trail_Slide=0;function f192(){0==Trail.length&&(Trail.push({node:[],prevPos:[0,0],slide:0,XYZS:[],RT:[]}),Trail.push({node:[],prevPos:[0,0],slide:0,XYZS:[],RT:[]}));for(var t=0;t<2;t++){if(0==t)var e=s49v.position;else e=s50v.position;if(Trail[t].XYZS=[],Trail[t].RT=[],Trail[t].node.length>0){Trail[t].slide+=4e-4*v95,Trail[t].slide>1&&(Trail[t].slide-=1);for(var n=0;n<31;n++)if(n<Trail[t].node.length){if(Trail[t].XYZS.push(Trail[t].node[n].pos.x),Trail[t].XYZS.push(Trail[t].node[n].pos.y),Trail[t].XYZS.push(0),Trail[t].XYZS.push(Trail[t].node[n].size),n==Trail[t].node.length-1)var i=f195(Trail[t].node[n].pos.x-e[0],Trail[t].node[n].pos.y-e[1]);else i=f195(Trail[t].node[n].pos.x-Trail[t].node[n+1].pos.x,Trail[t].node[n].pos.y-Trail[t].node[n+1].pos.y);Trail[t].RT.push(i[1]),Trail[t].RT.push(-i[0])}else{Trail[t].XYZS.push(e[0]),Trail[t].XYZS.push(e[1]),Trail[t].XYZS.push(0),Trail[t].XYZS.push(90);i=f195(Trail[t].node[Trail[t].node.length-1].pos.x-e[0],Trail[t].node[Trail[t].node.length-1].pos.y-e[1]);Trail[t].RT.push(i[1]),Trail[t].RT.push(-i[0])}}for(n=0;n<Trail[t].node.length;n++)Trail[t].node[n].size-=.1*v95,Game_Mode>0&&(Trail[t].node[n].size-=.8*v95);Trail[t].node.length>0&&Trail[t].node[0].size<.1&&(Trail[t].node.shift(),Trail[t].slide+=1/30)}Trail[0].node.length<30&&f241(Trail[0].prevPos[0],Trail[0].prevPos[1],s49v.position[0],s49v.position[1])>8&&(Trail[0].prevPos=[s49v.position[0],s49v.position[1]],Trail[0].node.push({pos:{x:s49v.position[0],y:s49v.position[1]},size:100})),Trail[1].node.length<30&&f241(Trail[1].prevPos[0],Trail[1].prevPos[1],s50v.position[0],s50v.position[1])>8&&(Trail[1].prevPos=[s50v.position[0],s50v.position[1]],Trail[1].node.push({pos:{x:s50v.position[0],y:s50v.position[1]},size:100}))}function f220(){for(var t=0;t<2;t++)Trail[t].node.length>0&&Trail[t].XYZS.length>0&&Trail[t].RT.length>0&&(f214(),f143(7),f127(1,1,1,Trail[t].slide),f38(),gl.uniform4fv(shader[7].s292v,Trail[t].XYZS),gl.uniform2fv(shader[7].s294vRT,Trail[t].RT),f188(4),f228(),f143(1))}function f244(t){if(Pts_RotationCount>0){f143(1),f127(1,1,1,.4+.1*Pts_RotationCount),gl.enable(gl.BLEND);var e=.3+.1*Pts_RotationCount,n=""+Pts_RotationCount;f214(),f123(CarCenter.x,CarCenter.y+53,0),f198(e,-e,1),f123(-31*(n.length-1),0,0);for(var i=0;i<n.length;i++)f163(1,n[i]),i<n.length-1&&(f123(31,0,0),f163(1,"_"),f123(31,0,0));f228()}if(f143(1),f127(1,1,1,1),gl.enable(gl.BLEND),Car_Invincible>0&&f127(10,0,0,1),CarAngle=f176([CarCenter.x,CarCenter.y],[s50v.position[0],s50v.position[1]])/Math.PI*180,f214(),1==CarIsDestroyed?f123(s49v.position[0],s49v.position[1],0):(f123(CarCenter.x,CarCenter.y,0),f180(CarAngle,0,0,1),f123(-Car_Size,0,0)),f180(s49v.angle/Math.PI*180,0,0,1),f188(800),f228(),f214(),f123(s50v.position[0],s50v.position[1],0),f180(s50v.angle/Math.PI*180,0,0,1),f188(800),f228(),f127(t,t,t,1),0==CarIsDestroyed&&(f214(),f123(CarCenter.x,CarCenter.y,0),f180(CarAngle,0,0,1),f123(0,5,0),CarBody.s126v>0&&Math.random()>.4999&&(f127(10,0,0,10),f198(1.01,1.01,1)),f188(700),f228()),Game_Mode>0){if(21==s363v){f127(1,1,1,.5);for(var o=0;o<1+5*Math.random();o++){f214(),f123(CarCenter.x,CarCenter.y,0);var r=(4*Math.random()-2)*(.125+.003*BlastModes478v),a=(.1+2*Math.random())*(.125+.003*BlastModes478v);f180(360*Math.random(),0,0,1),f198(r,a,1),f121(35),f228()}}if(f127(1,1,1,1),22==s363v)f214(),f123(CarCenter.x-210,CarCenter.y+5,0),f198(r=3+.4*Math.random(),a=1*Math.random()-.5,1),f121(33),f228(),f214(),f123(CarCenter.x-77,CarCenter.y+5,0),f198(r=.6+.4*Math.random(),a=4*Math.random()-2,1),f121(33),f228();f214(),f123(CarCenter.x-25+2*Math.random(),CarCenter.y+5+2*Math.random(),0),f198(.5,-.5,1),f121(32),f228()}PerfectLandingEffect>0&&(100==PerfectLandingEffect&&(console.log(_TX(205)),f73(0,s49v.position[0],s49v.position[1]),f73(1,s50v.position[0],s50v.position[1]),f158(_TX(200),.5,.8,!1),f158(_TX(11),.65,3,!1),f158(_TX(11),.65,.25,!1)),PerfectLandingEffect-=.1*v95,f72(0),f72(1))}function f72(t){var e=.01*PerfectLandingEffect;e>.2&&(e=.2),f214(),f123(PrefLand[t].pos[0],PrefLand[t].pos[1],0),f198(e,e,1),f180(360*Math.random(),0,0,1),f121(35),f228(),f9([PrefLand[t].pos[0],PrefLand[t].pos[1],0]),f10([.0015*(20*Math.random()-10),.0015*(20*Math.random()-10),0]),f40(4*(5+5*Math.random())),f7(-.08),f11(360*Math.random()),f1(125e-6*-25.5),f16(5e-5),f17(10),f103(),PrefLand[t].pos[0]+=PrefLand[t].norm[0]*v95*.08,PrefLand[t].pos[1]+=PrefLand[t].norm[1]*v95*.08}function f73(t,e,n){PrefLand[t].pos[0]=e,PrefLand[t].pos[1]=n,0==PrefLand[t].Dir?(PrefLand[t].norm[0]=CarNormal[0],PrefLand[t].norm[1]=CarNormal[1]):(PrefLand[t].norm[0]=-CarNormal[0],PrefLand[t].norm[1]=-CarNormal[1])}function f132(t){this.Dir=t,this.pos=[0,0],this.norm=[0,0]}var PrefLand=[0,0,0];PrefLand[0]=new f132(0),PrefLand[1]=new f132(1);var Scroll_Zoom=1,Blur_Fade=0,s41v=-1,Game_Mode=0,BlastMode_Ticks=0,BlastMode_Timer=0,Level_f241=1,Level_Chunks=0,PointsToAdd=0,PointsToAddTimer=0,PointsToAddIcon="+-",s27v=[];function f174(){if(s27v.length>0)return s45v=s27v[0],console.log(_TX(206),s45v),void s27v.shift();if(1!=Level_Based){if(2==Game_Mode)return(s45v=1100+Math.floor(10*Math.random()))>1103||s41v==s45v?void f174():void(s41v=s45v);if(s45v=1e3+Math.floor(55*Math.random()),s41v==s45v||s45v<1001||s45v>1049)f174();else{if(s41v=s45v,++Level_Chunks>2)return Level_Chunks=0,s45v=1098,void(s41v=1098);1017!=s45v&&1008!=s45v&&1030!=s45v||s27v.push(1e3)}}else CurrentLevelPos<Levels[CurrentLevel].length?(s45v=Levels[CurrentLevel][CurrentLevelPos],console.log(_TX(207),CurrentLevel,CurrentLevelPos),CurrentLevelPos++):s45v=1e3}function f22(){}function f206(t){CurrentLevelPos=0,Level_timer=0,Blur_Fade=0,Scroll_X=0,Scroll_MinX=0,Scroll_Y=0,s31v=0,CarCenter={x:0,y:500},CarAnge=0,CarIsDestroyed=!1,DestroyedCounter=0,Chunk_Decal=0,Chunk_List=[],s37vToAdd=[],s37v=[],Object_ToAdd=0,Object_ToDistroy=0,Line_List=[],Trail=[],Polys=[],Scroll_Zoom=1.5,Car_Invincible=100,Game_Mode=0,Chunk_New=!0,Car_RotForce=0,BikeIsInAire=-1e3,PointsToAdd=0,PointsToAddTimer=0,1!=t&&(CurrentLevelPos=0,s18v=0,Score=0,Level_f241=1,Level_Chunks=0),f174(),f236(),f75(100)}function f108(t,e){e<1||(PointsToAdd>0&&(Score+=PointsToAdd),PointsToAdd=e,PointsToAddTimer=100,PointsToAddIcon=t)}var Object_ToAdd=0,Object_ToDistroy=0;function f207(t){f127(1,1,1,1);for(var e=0;e<s37v.length;e++)switch(s37v[e].name){case _TX(208):case _TX(209):f214(),f123(s37v[e].Body.position[0],s37v[e].Body.position[1],0),f180(s37v[e].Body.angle/Math.PI*180,0,0,1),f188(7),f228();break;case _TX(210):if(f143(8),f127(-s87v,0,0,0),1==Level_Based&&(Level_f241=CurrentLevel+1,s37v[e].f241=CurrentLevel+1),s37v[e].f241<10)var n="0"+s37v[e].f241;else n=""+s37v[e].f241;1==s37v[e].Crossed?(f143(1),f127(0,1,0,1),n="+"):CarCenter.x>s37v[e].x-30&&(f108("+-",5+5*Level_f241),Level_f241++,s37v[e].Crossed=!0,f158(_TX(211),.5,2,!1),f158(_TX(11),.25,3.5,!1),1==Level_Based&&(PointsToAdd>0&&(Score+=PointsToAdd),PointsToAdd=0,f20(_TX(212)),Level_timer=0,s363v=11)),f214(),f123(s37v[e].x,s37v[e].y,0),f188(9),f228(),f143(1),f127(1,1,1,1);f214(),f123(s37v[e].x,s37v[e].y-13,0),f198(.6,-.6,1),f123(-31*(n.length-1),0,0);for(var i=0;i<n.length;i++)f163(1,n[i]),i<n.length-1&&(f123(31,0,0),f163(1,"_"),f123(31,0,0));f228();break;case _TX(213):f214(),f123(s37v[e].x,s37v[e].y,0),f180(10*Math.sin(3*-s87v+s37v[e].x),0,0,1),f188(8),f198(1.2,1.2,1),f180(10*-Math.sin(2*-s87v),0,0,1),f188(8),f228();break;case _TX(214):f214(),f123(s37v[e].x,s37v[e].y,0),f121(39),f143(8),f127(-s87v+.01*s37v[e].x,0,0,0),f123(0,-20,0),f180(-90,0,0,1),f198(.7,.7,1),0!=t&&f121(40),f228(),f127(1,1,1,1),f143(1);break;case _TX(215):f214(),f123(s37v[e].x+150*Math.sin(-s87v),s37v[e].y+150*Math.cos(-s87v),0),f180(300*-s87v,0,0,1),f121(37),f228();break;case _TX(216):f214(),f123(s37v[e].x,s37v[e].y,0),f180(300*-s87v,0,0,1),f121(37),f228();break;case _TX(217):f214(),f123(s37v[e].x,s37v[e].y,0),f198(.5,-.5,.5),f121(22),f228();break;case _TX(218):f214(),f123(s37v[e].x,s37v[e].y,0),f198(.5,-.5,.5),f163(1,_TX(219)),f180(200*s87v,0,0,1),f121(31),f127(1,.5,1,1),f198(-.85,-.85,1),f180(100*s87v,0,0,1),f121(31),f127(1,.25,0,1),f198(-.85,-.85,1),f180(50*s87v,0,0,1),f121(31),f228(),f127(1,1,1,1);break;case _TX(220):f214(),f123(s37v[e].Body.position[0],s37v[e].Body.position[1],0),f180(s37v[e].Body.angle/Math.PI*180,0,0,1),f121(36),f228();break;case _TX(221):f214(),f123(s37v[e].Body.position[0],s37v[e].Body.position[1],0),f180(s37v[e].Body.angle/Math.PI*180,0,0,1),f121(23),f228();break;case _TX(222):f214(),f123(s37v[e].Body.position[0],s37v[e].Body.position[1],0),f180(s37v[e].Body.angle/Math.PI*180,0,0,1),f121(29),f228();break;case _TX(223):f214(),f123(s37v[e].Body.position[0],s37v[e].Body.position[1],0),f180(s37v[e].Body.angle/Math.PI*180,0,0,1),f121(38),f228();break;case _TX(224):f143(9),f127(.5*-s87v,0,0,0),f214(),f123(s37v[e].x,s37v[e].y,0),f198(1+.05*Math.sin(10*s87v),-1,1),f121(30),f198(.15*Math.sin(15*s87v)-1,1,1),f121(30),f198(1,-1,1),f123(0,-500,0),f121(30),f228(),f127(1,1,1,1),f143(1);break;case _TX(225):f143(9),f127(.125*s87v,0,0,0),f214(),f123(s37v[e].x,s37v[e].y,0),f198(1,-1,1),f121(28),f123(0,230,0),f121(28),f228(),f127(1,1,1,1),f143(1);break;case _TX(226):f214(),f123(s37v[e].Body.position[0],s37v[e].Body.position[1],0),f180(s37v[e].Body.angle/Math.PI*180,0,0,1),f121(27),f228();break;case _TX(227):f214(),f123(s37v[e].Body.position[0],s37v[e].Body.position[1],0),f180(s37v[e].Body.angle/Math.PI*180,0,0,1),s37v[e].Delay<150?f121(25):f121(26),f228();break;case _TX(228):0==t&&(f143(8),f127(-s87v,0,0,0),f214(),f123(s37v[e].x,s37v[e].y,0),f180(s37v[e].dir,0,0,1),f198(.5,.5,.5),f121(24),f228(),f127(1,1,1,1),f143(1))}f143(1),f127(1,1,1,1)}var RubyPitch=0,PlatPitch=0;function f175(){RubyPitch>0?RubyPitch-=5e-4*v95:RubyPitch=0,PlatPitch>0?PlatPitch-=5e-4*v95:PlatPitch=0;for(var t=0;t<s37v.length;t++)switch(s37v[t].name){case _TX(216):0==CarIsDestroyed&&f241(s37v[t].x,s37v[t].y,CarCenter.x,CarCenter.y)<80&&f205(5);break;case _TX(215):0==CarIsDestroyed&&f241(s37v[t].x+150*Math.sin(-s87v),s37v[t].y+150*Math.cos(-s87v),CarCenter.x,CarCenter.y)<80&&f205(5);break;case _TX(214):CarCenter.y<s37v[t].y+256&&CarCenter.x>s37v[t].x-30&&CarCenter.x<s37v[t].x+30&&(s49v.velocity[0]>10&&(s49v.velocity[0]=10),s50v.velocity[0]>15&&(s50v.velocity[0]=15));break;case _TX(224):0==CarIsDestroyed&&CarCenter.y<s37v[t].y+256&&CarCenter.x>s37v[t].x-30&&CarCenter.x<s37v[t].x+30&&f205(5),s37v[t].y=s37v[t].def_y-150+250*Math.cos(.1*s37v[t].x+s87v),s37v[t].x<Scroll_X+800&&s37v[t].x>Scroll_X-150&&(f9([s37v[t].x-35+70*Math.random(),s37v[t].y+200+35*Math.random(),0]),f10([.01*(10*Math.random()-5),0,0]),f40(3*(5+5*Math.random())),f7(-.03),f11(360*Math.random()),f1(.00125),f16(3e-4),f17(5),f103());break;case _TX(225):0==CarIsDestroyed&&CarCenter.y<s37v[t].y+110&&CarCenter.x>s37v[t].x-240&&CarCenter.x<s37v[t].x+240&&f205(5),s37v[t].x<Scroll_X+800&&s37v[t].x>Scroll_X-150&&(f9([s37v[t].x-200+400*Math.random(),s37v[t].y+120,0]),f10([0,.1,0]),f40(3*(5+5*Math.random())),f7(-.03),f11(360*Math.random()),f1(.00125),f16(3e-4),f17(5),f103());break;case _TX(228):if(s37v[t].rot-=.001*v95,s37v[t].rot<0&&(s37v[t].rot+=1),CarCenter.x>s37v[t].x-25&&CarCenter.y>s37v[t].y-25&&CarCenter.x<s37v[t].x+25&&CarCenter.y<s37v[t].y+25){if(f241(s37v[t].x,s37v[t].y,s49v.position[0],s49v.position[1])<25)f241(0,0,s49v.velocity[0],s49v.velocity[1])<40&&(s49v.velocity[0]+=s37v[t].normal[0]*v95*.09,s49v.velocity[1]+=s37v[t].normal[1]*v95*.09,s49v.angularVelocity=-45,s49v.angularVelocity=-45),Car_Invincible=500;if(f241(s37v[t].x,s37v[t].y,s50v.position[0],s50v.position[1])<25)f241(0,0,s50v.velocity[0],s50v.velocity[1])<40&&(s50v.velocity[0]+=s37v[t].normal[0]*v95*.09,s50v.velocity[1]+=s37v[t].normal[1]*v95*.09,s49v.angularVelocity=-45,s50v.angularVelocity=-45),Car_Invincible=500}break;case _TX(229):21==s363v&&CarCenter.x>s37v[t].x&&(f158(_TX(211),.5,2,!1),f158(_TX(211),.25,.5,!1),f157(_TX(230),.8,1.125,!1),s363v=22,BlastMode_Ticks=0,BlastMode_Timer=99);break;case _TX(218):if(1==Level_Based&&(s37v[t].name=""),s18v>4&&(s37v[t].name=""),CarCenter.x>s37v[t].x-80&&CarCenter.y>s37v[t].y-70&&CarCenter.x<s37v[t].x+80&&CarCenter.y<s37v[t].y+70&&(f241(s37v[t].x,s37v[t].y,s49v.position[0],s49v.position[1])<50||f241(s37v[t].x,s37v[t].y,s50v.position[0],s50v.position[1])<50)){for(var e=1;e<10;e++)f9([s37v[t].x,s37v[t].y,0]),f10([.0015*(20*Math.random()-10)*e,.0015*(20*Math.random()-10)*e,0]),f40(3*(5+5*Math.random())),f7(-.01),f11(360*Math.random()),f1(125e-6*(5*e-65.5)),f16(5e-5),f17(9),f103();f158(_TX(211),1,1,!1),f158(_TX(211),.25,.5,!1),++s18v>4&&(s18v=4),Blast_Blink=100,s37v[t].x-=1e3}break;case _TX(217):if(CarCenter.x>s37v[t].x-70&&CarCenter.y>s37v[t].y-60&&CarCenter.x<s37v[t].x+70&&CarCenter.y<s37v[t].y+60&&(f241(s37v[t].x,s37v[t].y,s49v.position[0],s49v.position[1])<30||f241(s37v[t].x,s37v[t].y,s50v.position[0],s50v.position[1])<30)){for(e=1;e<5;e++)f9([s37v[t].x,s37v[t].y,0]),f10([.0015*(20*Math.random()-10)*e,.0015*(20*Math.random()-10)*e,0]),f40(3*(5+5*Math.random())),f7(-.01),f11(360*Math.random()),f1(125e-6*(-25.5+e)),f16(5e-5),Math.random()>.499?f17(3):f17(0),f103();f158(_TX(11),1,1+RubyPitch,!1),(RubyPitch+=.1)>2&&(RubyPitch=2),0==CarIsDestroyed&&Score++,RubyCount++,s5v=100,s9v=100,f9([s37v[t].x,s37v[t].y+30,0]),f10([0,.05,0]),f40(20),f7(-.0125),f11(0),f1(0),f16(0),f17(2),f103(),s37v[t].x-=1e3}break;case _TX(220):s37v[t].BodyB.position[0]=s37v[t].x,s37v[t].BodyB.position[1]=s37v[t].y-76;break;case _TX(221):s37v[t].Body.angularVelocity=.04,s37v[t].Body.position[0]=s37v[t].x,s37v[t].Body.position[1]=s37v[t].y;break;case _TX(208):s37v[t].Body.angularVelocity=-.2,s37v[t].Body.position[0]=s37v[t].x,s37v[t].Body.position[1]=s37v[t].y;break;case _TX(209):s37v[t].Body.angularVelocity=.2,s37v[t].Body.position[0]=s37v[t].x,s37v[t].Body.position[1]=s37v[t].y;break;case _TX(223):if(s37v[t].Body.angularVelocity*=.1,s37v[t].Body.position[0]=s37v[t].x,s37v[t].Body.velocity[0]*=.5,Math.cos(s87v+.0015*s37v[t].x)>0){var n=.9*s37v[t].Body.position[1]+.1*s37v[t].y,i=1*(s37v[t].Body.position[1]-n);s37v[t].Body.position[1]=n,s37v[t].Body.velocity[1]=-i}else{n=.95*s37v[t].Body.position[1]+.05*(s37v[t].y+70),i=1*(s37v[t].Body.position[1]-n);s37v[t].Body.position[1]=n,s37v[t].Body.velocity[1]=-i}break;case _TX(222):s37v[t].Delay+=v95,s37v[t].Body.angularVelocity*=.1,s37v[t].Body.position[0]=s37v[t].x,s37v[t].Body.velocity[0]*=.5;n=s37v[t].y+55*Math.cos(s87v+.0015*s37v[t].x),i=.2*(s37v[t].Body.position[1]-n);n-s37v[t].Body.position[1]>20&&(s37v[t].Body.position[1]=.9*s37v[t].Body.position[1]+.1*n),s37v[t].Body.velocity[1]=-i,s37v[t].Delay>200&&(s37v[t].Delay-=200,f9([s37v[t].x-70+140*Math.random(),s37v[t].Body.position[1]-60,0]),f10([0,-.06,0]),f40(20),f7(-.0125),f11(360*Math.random()),f1(0),f16(0),f17(5),f103());break;case _TX(226):s37v[t].Body.angularVelocity=.02,s37v[t].Body.position[0]=s37v[t].x,s37v[t].Body.position[1]=s37v[t].y;break;case _TX(227):0==s37v[t].Body.Collided?(s37v[t].Body.position[0]=s37v[t].x,s37v[t].Body.position[1]=s37v[t].y):(1!=s37v[t].PlayHit&&(f158(_TX(231),.55,.7+PlatPitch,!1),(PlatPitch+=.15)>2&&(PlatPitch=2),s37v[t].PlayHit=!0),0==s37v[t].Body.gravityScale&&s37v[t].Delay>300?(s37v[t].Body.angularDamping=8e-4,s37v[t].Body.damping=.02,s37v[t].Body.gravityScale=1,s37v[t].wakeUp=!0,s37v[t].Body.angularVelocity=.05,f9([s37v[t].x,s37v[t].y-30,0]),f10([0,.05,0]),f40(20),f7(-.0125),f11(0),f1(0),f16(0),f17(1),f103(),Score+=2):s37v[t].Delay+=v95)}}function f92(t){switch(s37v[t].Body=null,s37v[t].rot=0,s37v[t].name){case _TX(210):s37v[t].Crossed=!1,s37v[t].f241=Level_f241;break;case _TX(220):console.log(_TX(232),t),s37v[t].ShapeB=new p2.Circle({radius:1}),s37v[t].ShapeB.material=GroundMaterial,s37v[t].BodyB=new p2.Body({damping:0,mass:0,position:[s37v[t].x,s37v[t].y-76]}),s37v[t].BodyB.gravityScale=0,s37v[t].BodyB.angularDamping=0,s37v[t].BodyB.addShape(s37v[t].ShapeB),world.addBody(s37v[t].BodyB),s37v[t].BodyB.ColliGroup=1,s37v[t].Shape=new p2.Box({width:15,height:150}),s37v[t].Shape.material=GroundMaterial,s37v[t].Body=new p2.Body({damping:0,mass:1,position:[s37v[t].x,s37v[t].y]}),s37v[t].Body.gravityScale=.6,s37v[t].Body.angularDamping=.15,s37v[t].Body.addShape(s37v[t].Shape),s37v[t].Body.angle=0,world.addBody(s37v[t].Body),s37v[t].Body.ColliGroup=1,s37v[t].Constraint=new p2.RevoluteConstraint(s37v[t].Body,s37v[t].BodyB,{localPivotA:[0,-76],localPivotB:[0,0],collideConnected:!1}),world.addConstraint(s37v[t].Constraint);break;case _TX(208):case _TX(209):console.log(_TX(233),t),s37v[t].Shape=new p2.Circle({radius:149}),s37v[t].Shape.material=GroundMaterial,s37v[t].Body=new p2.Body({damping:1,mass:0,position:[s37v[t].x,s37v[t].y]}),s37v[t].Body.gravityScale=0,s37v[t].Body.angularDamping=0,s37v[t].Body.addShape(s37v[t].Shape),s37v[t].Body.angle=0,world.addBody(s37v[t].Body),s37v[t].Body.ColliGroup=1;break;case _TX(222):console.log(_TX(234),t),s37v[t].Shape=new p2.Box({width:150,height:150}),s37v[t].Shape.material=GroundMaterial,s37v[t].Body=new p2.Body({damping:0,mass:0,position:[s37v[t].x,s37v[t].y]}),s37v[t].Body.gravityScale=0,s37v[t].Body.angularDamping=0,s37v[t].Body.addShape(s37v[t].Shape),s37v[t].Body.angle=s37v[t].dir/180*Math.PI,world.addBody(s37v[t].Body),s37v[t].Delay=100*Math.random(),s37v[t].Body.ColliGroup=1;break;case _TX(223):console.log(_TX(235),t),s37v[t].Shape=new p2.Box({width:15,height:300}),s37v[t].Shape.material=GroundMaterial,s37v[t].Body=new p2.Body({damping:1,mass:0,position:[s37v[t].x,s37v[t].y]}),s37v[t].Body.gravityScale=0,s37v[t].Body.angularDamping=0,s37v[t].Body.addShape(s37v[t].Shape),s37v[t].Body.angle=s37v[t].dir/180*Math.PI,world.addBody(s37v[t].Body),s37v[t].Body.ColliGroup=1;break;case _TX(221):console.log(_TX(236),t),s37v[t].Shape=new p2.Box({width:15,height:150}),s37v[t].Shape.material=GroundMaterial,s37v[t].Body=new p2.Body({damping:1,mass:0,position:[s37v[t].x,s37v[t].y]}),s37v[t].Body.gravityScale=0,s37v[t].Body.angularDamping=0,s37v[t].Body.addShape(s37v[t].Shape),s37v[t].Body.angle=s37v[t].dir/180*Math.PI,world.addBody(s37v[t].Body),s37v[t].Body.ColliGroup=1;break;case _TX(227):console.log(_TX(237),t),s37v[t].Shape=new p2.Box({width:15,height:80}),s37v[t].Shape.material=GroundMaterial,s37v[t].Body=new p2.Body({damping:1,mass:5,position:[s37v[t].x,s37v[t].y]}),s37v[t].Body.gravityScale=0,s37v[t].Body.angularDamping=1,s37v[t].Body.addShape(s37v[t].Shape),s37v[t].Body.angle=s37v[t].dir/180*Math.PI,s37v[t].Body.Collided=!1,s37v[t].Delay=0,world.addBody(s37v[t].Body),s37v[t].Body.ColliGroup=1;break;case _TX(226):console.log(_TX(238),t),s37v[t].Shape=new p2.Box({width:150,height:150}),s37v[t].Shape.material=GroundMaterial,s37v[t].Body=new p2.Body({damping:1,mass:0,position:[s37v[t].x,s37v[t].y]}),s37v[t].Body.gravityScale=0,s37v[t].Body.angularDamping=0,s37v[t].Body.addShape(s37v[t].Shape),s37v[t].Body.angle=s37v[t].dir/180*Math.PI,world.addBody(s37v[t].Body),s37v[t].Body.ColliGroup=1}}function f74(t){try{s37v[Object_ToDistroy].x<Scroll_X-650&&(console.log(_TX(239),s37v[Object_ToDistroy].name),null!=s37v[Object_ToDistroy].Body&&(s37v[Object_ToDistroy].Body.removeShape(s37v[Object_ToDistroy].shape),world.removeBody(s37v[Object_ToDistroy].Body)),null!=s37v[Object_ToDistroy].BodyB&&(s37v[Object_ToDistroy].BodyB.removeShape(s37v[Object_ToDistroy].shapeB),world.removeBody(s37v[Object_ToDistroy].BodyB)),null!=s37v[Object_ToDistroy].Constraint&&(world.removeConstraint(s37v[Object_ToDistroy].Constraint),s37v[Object_ToDistroy].Constraint=null),s37v.splice(Object_ToDistroy,1))}catch{}++Object_ToDistroy>s37v.length-1&&(Object_ToDistroy=0),--t>0&&f74(t)}function f75(t){if(0!=s37vToAdd.length){try{if(s37vToAdd[Object_ToAdd].x<Scroll_X+2*s249v.x){var e=s37v.push(structuredClone(s37vToAdd[Object_ToAdd]));s37vToAdd.splice(Object_ToAdd,1),f92(e-1)}}catch{}++Object_ToAdd>s37vToAdd.length-1&&(Object_ToAdd=0),--t>0&&f75(t)}}var Score=0,ScorePrev=-1,ScoreBump=0,Blast_Blink=0,Blast_Text_Shift=0,Blast_Text_Shift_delay=0;function f221(t){if(-1==MenuType||101==MenuType||-100==MenuType){f143(1),0==t?f124():(f124(FBO_W,FBO_H),f198(FBO_W/s249v.x,FBO_H/s249v.y,1),f127(.1,.1,1,.3)),7==s363v&&f123(0,.3*s249v.y,0),s249v.x>.9*s249v.y?f123(.5*s249v.x,.1*s249v.y,-100):f123(.5*s249v.x,8==s363v?.2*s249v.y:.08*s249v.y,-100),0==t?(f127(1,1,1,1),f214(),f198(10,3,1),f121(34),f228(),f127(1,1,1,1)):(f127(1,1,1,1),f214(),f198(10,3,1),f121(34),f228(),f127(1,0,1,.5)),7==s363v&&f198(1.5,1.5,1),Score>99999&&(Score=99999);var e=""+Score;ScoreBump>0?ScoreBump-=.001*v95:ScoreBump=0,ScorePrev!=Score&&(ScorePrev=Score,ScoreBump=.1);var n=.8+ScoreBump;f214(),f198(n+.1,n+.1,1),f123(-31*(e.length-1),0,0);for(var i=0;i<e.length;i++)f163(1,e[i]),i<e.length-1&&(f123(31,0,0),f163(1,"_"),f123(31,0,0));if(f228(),PointsToAdd>0){PointsToAddTimer>0?(PointsToAddTimer-=.025*v95,Math.cos(PointsToAddTimer)>0&&f127(1,0,1,.5)):0==ScoreBump&&(PointsToAdd>50?(PointsToAdd-=10,Score+=10):(PointsToAdd--,Score++)),n=.6;e=""+PointsToAddIcon+PointsToAdd;f214(),f198(n,n,1),f123(-31*(e.length-1),200,0);for(i=0;i<e.length;i++)f163(1,e[i]),i<e.length-1&&(f123(31,0,0),f163(1,"_"),f123(31,0,0));f228()}if(7!=s363v&&1!=Level_Based){f123(-20,50,0),f198(.4,.4,1),f127(1,1,1,1);var o=1;if(Blast_Blink>0?(Blast_Blink-=.03*v95,Math.cos(.5*Blast_Blink)>0&&(o=20)):Blast_Blink=0,s18v>3&&0==Blast_Blink)return s363v=20,s18v=0,void(Blast_Blink=0);if(s18v>3&&0==Blast_Blink||Game_Mode>0){f127(o=1.1+.1*Math.cos(12*s87v),o,o,o),f198(.85,.7,1);var r="-";Game_Mode>0&&((BlastMode_Ticks+=v95)>400&&(BlastMode_Ticks-=400,--BlastMode_Timer<0&&(BlastMode_Timer=0),ScorePrev=Score+=1,f9([CarCenter.x,CarCenter.y+30,0]),f10([0,.05,0]),f40(20),f7(-.0125),f11(0),f1(0),f16(0),f17(2),f103()),r=BlastMode_Timer<10?_TX(240)+BlastMode_Timer+_TX(241):_TX(242)+BlastMode_Timer+_TX(241),Blast_Text_Shift_delay=0,Blast_Text_Shift=0),(Blast_Text_Shift_delay+=v95)>0&&(Blast_Text_Shift_delay-=300,++Blast_Text_Shift>r.length-1&&(Blast_Text_Shift=0)),r+=r,f123(-268,0,0);for(i=0;i<9;i++)f163(1,"_"),f123(38,0,0),f163(1,r[i+Blast_Text_Shift]),f123(38,0,0);return f163(1,"_"),void f127(0,100,0,1)}if(1!=CarIsDestroyed){f123(39,20,0),f198(1.5,1.5,1),f127(o,o,o,o),1==t&&f127(.4*o,.3*o,.4*o,o),f163(1,_TX(243)),f123(-38,1,0),f127(o,o,o,o);for(i=0;i<s18v;i++)f163(1,_TX(244)),f123(40,0,0);f127(0,100,0,1)}}}}var FBO_W=-1,FBO_H=-1,FBO_Size=256;function f109(){if(s249v.y>s249v.x){var t=FBO_Size,e=FBO_Size/s249v.x;n=Math.floor(s249v.y*e)}else{var n=FBO_Size;e=FBO_Size/s249v.y;t=Math.floor(s249v.x*e)}FBO_W==t&&FBO_H==n||(f212(1,FBO_W=t,FBO_H=n,!1),f212(2,FBO_W,FBO_H,!1),console.log(_TX(245),FBO_W,FBO_H)),f138(1),f143(1),f127(1,1,1,1),gl.viewport(0,0,FBO_W,FBO_H),mat4.ortho(v85,0,s249v.x,s249v.y,0,.1,800),mat4.identity(v78),mat4.identity(v48),gl.disable(gl.DEPTH_TEST),Blur_Fade<1?Blur_Fade+=.002*v95:Blur_Fade=1,s478vBackground<1&&(f127(.125*Blur_Fade,.125,.125*Blur_Fade,.9),f214(),f123(0,s249v.y,-100),f198(1,-1,1),f123(-s31v,0,0),f188(999),f123(2048,0,0),f188(999),f228()),s478vBackground>0&&(f127(.5,.6,.7,s478vBackground),gl.enable(gl.BLEND),f214(),f123(0,s249v.y,-100),f198(1,-1,1),f123(-s31v,0,0),f188(998),f123(2048,0,0),f188(998),f228()),f214(),f123(0,s249v.y,-100),f198(Scroll_Zoom,-Scroll_Zoom,1),f123(-Scroll_X,Scroll_Y,0),gl.enable(gl.BLEND),f207(!0),f220(),f50(),f120(20,0),gl.enable(gl.BLEND),f83(),f143(1),f244(.1),gl.disable(gl.BLEND),gl.disable(gl.BLEND),v46=-1,f143(6),f127(0,0,0,1);for(var i=0;i<Chunk_List.length;i++)Chunk_List[i].x<Scroll_X+s249v.x/Scroll_Zoom&&(f214(),f123(Chunk_List[i].x,0,0),f188(Chunk_List[i].id,1,1),f228());v46=-1,f143(1),f127(Road_Col[0],Road_Col[1],Road_Col[2],1);for(i=0;i<Chunk_List.length;i++)Chunk_List[i].x<Scroll_X+s249v.x/Scroll_Zoom&&(f214(),f123(Chunk_List[i].x,0,0),f188(Chunk_List[i].id,0,0),f228());f228(),f221(!0),f124(FBO_W,FBO_H),f123(.5*FBO_W,.5*FBO_H,0),gl.disable(gl.BLEND);var o=.0025/Blur_Fade;for(i=1;i<4;i++)f138(2),f143(4),f127(Blur_Fade,1,Blur_Fade,s249v.x/FBO_W*o*i),f242(1),f138(1),f143(5),f127(Blur_Fade,1,Blur_Fade,s249v.y/FBO_H*o*i),f242(2);f138(-1),f143(1)}var physic,Vec2,world,ground,s49v,s50v,springBack,springFront,s478vBackground=0;function f193(){0==Game_Mode?(s478vBackground-=.001*v95)<0&&(s478vBackground=0):(s478vBackground+=4e-4*v95)>1&&(s478vBackground=1),f109(),f143(1),f127(1,1,1,1),f124(),f127(.525*Scene_Col[0],.525*Scene_Col[1],.525*Scene_Col[2],1),gl.disable(gl.BLEND),f214(),f123(0,s249v.y,-100),f198(1,-1,1),f123(-s31v,0,0),f188(999),f123(2048,0,0),f188(999),f228(),s478vBackground>0&&(f127(1,1,1,s478vBackground),gl.enable(gl.BLEND),f214(),f123(0,s249v.y,-100),f198(1,-1,1),f123(-s31v,0,0),f188(998),f123(2048,0,0),f188(998),f228()),f143(1),f214(),f123(0,s249v.y,-100),f198(Scroll_Zoom,-Scroll_Zoom,1),f123(-Scroll_X,Scroll_Y,0),gl.enable(gl.BLEND),f120(20,0),f83(),f143(1),gl.enable(gl.BLEND),f143(1),f127(1,1,1,1),gl.enable(gl.BLEND),f207(!1),gl.disable(gl.BLEND),v46=-1,f143(6),f127(Scene_Col[0],Scene_Col[1],Scene_Col[2],1);for(var t=0;t<Chunk_List.length;t++)Chunk_List[t].x<Scroll_X+s249v.x/Scroll_Zoom&&(f214(),f123(Chunk_List[t].x,0,0),f188(Chunk_List[t].id,1,1),f228());v46=-1,f143(1),f127(Road_Col[0],Road_Col[1],Road_Col[2],1);for(t=0;t<Chunk_List.length;t++)Chunk_List[t].x<Scroll_X+s249v.x/Scroll_Zoom&&(f214(),f123(Chunk_List[t].x,0,0),f188(Chunk_List[t].id,0,0),f228());v46=-1,gl.enable(gl.BLEND),f143(1),f127(1,1,1,1),f220(),f244(1),v46=-1,f143(1),f127(1,1,1,1),gl.enable(gl.BLEND);for(t=0;t<Chunk_List.length;t++)if(Chunk_List[t].x<Scroll_X+s249v.x/Scroll_Zoom){f214(),f123(Chunk_List[t].x,0,0);for(var e=2;e<Mesh[Chunk_List[t].id].obj.length;e++)"!"==Mesh[Chunk_List[t].id].obj[e].Name[0]&&f188(Chunk_List[t].id,e,e);f228()}f228(),Chunk_List[0].x<Scroll_X-2348&&(Chunk_List.shift(),console.log(_TX(246),Chunk_List.length)),f221(!1),f143(1),f127(1,1,1,1),f124(),f123(.5*s249v.x,.5*s249v.y,-100),f198(s249v.x/FBO_W,s249v.y/FBO_H,1),gl.blendFunc(gl.ONE,gl.ONE),gl.enable(gl.BLEND),f143(1),f127(1.1,1.1,1.1,.1),f242(1),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)}var CarBody,BaseBody,GroundMaterial,Wheel_Spring,revoluteBack,revoluteFront,CarCenter={x:0,y:0},CarAnge=0,CarIsDestroyed=!1,CarNormal=[0,1],DestroyedCounter=0,Car_RotForce=0,Car_Size=20,Car_Invincible=0,BodySwap=0,s18v=0;function f236(){GroundMaterial=new p2.Material;var t=new p2.ContactMaterial(GroundMaterial,GroundMaterial,{friction:5,restitution:1e-4}),e={x:40,y:240};1==MenuType&&(e={x:1024,y:300});var n=.02;(world=new p2.World({gravity:[0,-1.9]})).solver.tolerance=.01,world.defaultContactMaterial.friction=0,world.defaultContactMaterial.restitution=.15;var i=new p2.Circle({radius:8.5});(CarBody=new p2.Body({damping:n,mass:.1,position:[e.x-.5*Car_Size,e.y+Car_Size]})).addShape(i),world.addBody(CarBody),CarBody.s126v=0,CarBody.ColliGroup=-1;var o=new p2.Circle({radius:5});(BaseBody=new p2.Body({damping:.001,mass:.1,position:[e.x,e.y]})).inertia=.001,BaseBody.addShape(o),world.addBody(BaseBody),BaseBody.ColliGroup=-1,BaseBody.s126v=0,BaseBody.gravityScale=.001;var r=new p2.Circle({radius:8.5});r.material=GroundMaterial,(s49v=new p2.Body({damping:n,mass:.5,position:[e.x-Car_Size,e.y]})).Wheel_s478vLimit=1,s49v.addShape(r),world.addBody(s49v),s49v.s126v=0,s49v.ColliGroup=-1;var a=new p2.Circle({radius:8.5});a.material=GroundMaterial,(s50v=new p2.Body({damping:n,mass:.5,position:[e.x+Car_Size,e.y]})).Wheel_s478vLimit=1,s50v.addShape(a),world.addBody(s50v),s50v.s126v=0,s50v.ColliGroup=-1,s49v.Times126v=0,s50v.Times126v=0,s49v.inertia=180,s50v.inertia=180,revoluteBack=new p2.RevoluteConstraint(BaseBody,s49v,{localPivotA:[-Car_Size,0],localPivotB:[0,0],collideConnected:!1}),revoluteFront=new p2.RevoluteConstraint(BaseBody,s50v,{localPivotA:[Car_Size,0],localPivotB:[0,0],collideConnected:!1}),world.addConstraint(revoluteBack),world.addConstraint(revoluteFront),world.addContactMaterial(t),world.disableBodyCollision(s49v,s50v),world.disableBodyCollision(s50v,CarBody),world.disableBodyCollision(s49v,CarBody),world.disableBodyCollision(s50v,BaseBody),world.disableBodyCollision(s49v,BaseBody),world.disableBodyCollision(CarBody,BaseBody),console.log(world),f111(500),world.on(_TX(247),(function(t){for(var e=0;e<t.contactEquations.length;e++){var n=t.contactEquations[e];-1==n.bodyA.ColliGroup||-1==n.bodyB.ColliGroup?n.enabled=!0:(0==n.bodyA.ColliGroup||0==n.bodyB.ColliGroup||n.bodyA.ColliGroup!=n.bodyB.ColliGroup)&&(n.enabled=!1)}}));var s=45;world.on(_TX(248),(function(t){s49v.velocity[0]>s&&(s49v.velocity[0]=s),s50v.velocity[0]>s&&(s50v.velocity[0]=s),s49v.velocity[0]<-45&&(s49v.velocity[0]=-45),s50v.velocity[0]<-45&&(s50v.velocity[0]=-45),s49v.velocity[1]<-45&&(s49v.velocity[1]=-45),s50v.velocity[1]<-45&&(s50v.velocity[1]=-45),MedVelo_x=.5*(s49v.velocity[0]+s50v.velocity[0]),MedVelo_y=.5*(s49v.velocity[1]+s50v.velocity[1]),s49v.velocity[0]=.97*s49v.velocity[0]+.03*MedVelo_x,s49v.velocity[1]=.97*s49v.velocity[1]+.03*MedVelo_y,s50v.velocity[0]=.97*s50v.velocity[0]+.03*MedVelo_x,s50v.velocity[1]=.97*s50v.velocity[1]+.03*MedVelo_y,BaseBody.velocity[0]=.5*(s49v.velocity[0]+s50v.velocity[0]),BaseBody.velocity[1]=.5*(s49v.velocity[1]+s50v.velocity[1]),s49v.Prevs126v=s49v.s126v,s50v.Prevs126v=s50v.s126v;for(var e=0;e!==world.narrowphase.contactEquations.length;e++){var n=world.narrowphase.contactEquations[e];n.bodyA.Collided=!0,n.bodyB.Collided=!0,((n.bodyB==s49v||n.bodyA==s49v)&&s49v.s126v<10||(n.bodyB==s50v||n.bodyA==s50v)&&s50v.s126v<10)&&f158(_TX(201),.6,.55+.002*s49v.velocity[0]+.002*s50v.velocity[0],!1),n.bodyB.s126v=200,n.bodyA.s126v=200}}))}var Polys=[],ID_toDel=0,ID_ToAdd=0;function f110(t){ID_toDel>Polys.length-1&&(ID_toDel=0);try{Polys[ID_toDel].x<Scroll_X-700&&(Polys[ID_toDel].body.removeShape(Polys[ID_toDel].shape),world.removeBody(Polys[ID_toDel].body),delete Polys[ID_toDel],Polys.splice(ID_toDel,1))}catch{}++ID_toDel>Polys.length-1&&(ID_toDel=0),--t>0&&f110(t)}var s45v=1e3,Chunk_New=!0,Chunk_Decal=0,Chunk_List=[],s37v=[],Line_List=[];function f111(t){if(1==Chunk_New){f174();for(var e=0;e<Mesh[s45v].LinesToKeep.length;e++){var n=2048;n>Mesh[s45v].LinesToKeep[e].a.x&&(n=Mesh[s45v].LinesToKeep[e].a.x),n>Mesh[s45v].LinesToKeep[e].b.x&&(n=Mesh[s45v].LinesToKeep[e].b.x),Mesh[s45v].LinesToKeep[e].MinX=Chunk_Decal+n,Line_List.push(structuredClone(Mesh[s45v].LinesToKeep[e]))}for(e=0;e<Mesh[s45v].LevelObject.length;e++){console.log(_TX(249),Mesh[s45v].LevelObject[e].name);var i=s37vToAdd.push(structuredClone(Mesh[s45v].LevelObject[e]));s37vToAdd[i-1].x+=Chunk_Decal,s37vToAdd[i-1].def_x=s37vToAdd[i-1].x,s37vToAdd[i-1].def_y=s37vToAdd[i-1].y}console.log("-"),console.log(_TX(250)),console.log(_TX(251),Mesh[s45v].LinesToKeep.length),console.log(_TX(252),Mesh[s45v].LevelObject.length),console.log("-"),Chunk_List.push({x:Chunk_Decal,id:s45v}),console.log(_TX(253),Chunk_List),Chunk_New=!1,ID_ToAdd=0}if(0==Line_List.length)return Chunk_New=!0,void(Chunk_Decal+=2048);if(ID_ToAdd>Line_List.length-1&&(ID_ToAdd=0),Line_List[e=ID_ToAdd].MinX<Scroll_X+1.5*s249v.x){var o=f241(Line_List[e].a.x,Line_List[e].a.y,Line_List[e].b.x,Line_List[e].b.y),r=f176([Line_List[e].a.x,Line_List[e].a.y],[Line_List[e].b.x,Line_List[e].b.y]),a=new p2.Line({length:o}),s=new p2.Body({mass:0,position:[.5*(Line_List[e].a.x+Line_List[e].b.x)+Chunk_Decal,.5*(Line_List[e].a.y+Line_List[e].b.y)],angularVelocity:0,angle:r,id:0,allowSleep:!0,sleeps478vLimit:0,sleepTimeLimit:0});a.material=GroundMaterial,s.ColliGroup=0,s.addShape(a),world.addBody(s),Polys.push({x:Line_List[e].a.x+Chunk_Decal,body:s,shape:a}),Line_List.splice(e,1)}++ID_ToAdd>Line_List.length-1&&(ID_ToAdd=0),--t>0&&f111(t)}var AccelCloudSize=0,Use_Physic=!0,CarDestroyDelay=0;function f237(){if(f110(20),f111(20),0==Use_Physic)return CarCenter.x=.5*(s49v.position[0]+s50v.position[0]),CarCenter.y=.5*(s49v.position[1]+s50v.position[1]),CarBody.velocity=[0,0],CarBody.position=[CarCenter.x+10*CarNormal[1],CarCenter.y-10*CarNormal[0]],s49v.position[0]=CarCenter.x-Car_Size,s49v.position[1]=CarCenter.y,s50v.position[0]=CarCenter.x+Car_Size,s50v.position[1]=CarCenter.y,CarCenter.x=.5*(s49v.position[0]+s50v.position[0]),CarCenter.y=.5*(s49v.position[1]+s50v.position[1]),BaseBody.position[0]=CarCenter.x,BaseBody.position[1]=CarCenter.y,CarBody.angle*=.5,BaseBody.angle*=.5,s49v.angle*=.5,s50v.angle*=.5,CarBody.angularVelocity*=.8,BaseBody.angularVelocity*=.8,s49v.angularVelocity*=.8,s50v.angularVelocity*=.8,Car_RotForce*=.8,CarNormal=f195(s49v.position[0]-s50v.position[0],s49v.position[1]-s50v.position[1]),s49v.velocity[1]=20,s50v.velocity[1]=20,BaseBody.velocity[1]=20,void(Use_Physic=!0);CarBody.s126v>0&&(AccelButton=!1);var t=3;v71<50&&t++,v71<40&&(t+=2),v71<30&&t++;for(var e=v95/t,n=0;n<t;n++){if(s49v.s126v-=e,s49v.s126v<0&&(s49v.s126v=0,s49v.Times126v=0),s50v.s126v-=e,s50v.s126v<0&&(s50v.s126v=0,s50v.Times126v=0),CarBody.s126v=0,Car_Invincible>0&&(Car_Invincible-=e),0==CarIsDestroyed&&(CarCenter.x=.5*(s49v.position[0]+s50v.position[0]),CarCenter.y=.5*(s49v.position[1]+s50v.position[1]),CarNormal=f195(s49v.position[0]-s50v.position[0],s49v.position[1]-s50v.position[1]),CarBody.velocity=[0,0],CarBody.position=[CarCenter.x+10*CarNormal[1],CarCenter.y-10*CarNormal[0]],0==NoAirControl&&(1==AccelButton&&0==s49v.s126v&&0==s50v.s126v?(Car_RotForce+=.005*e)>3&&(Car_RotForce=3):(0==s49v.s126v&&0==s50v.s126v||(Car_RotForce*=.8),(Car_RotForce-=.0035*e)<0&&(Car_RotForce=0))),1==NoAirControl&&(s49v.s126v>0||s50v.s126v>0)&&(NoAirControl=0),s49v.position[0]-=CarNormal[1]*Car_RotForce*e*.06,s49v.position[1]+=CarNormal[0]*Car_RotForce*e*.06,s50v.position[0]+=CarNormal[1]*Car_RotForce*e*.06,s50v.position[1]-=CarNormal[0]*Car_RotForce*e*.06,CarNormal=f195(s49v.position[0]-s50v.position[0],s49v.position[1]-s50v.position[1]),s49v.position[1]>1500&&(s49v.velocity[1]-=.025*e),s50v.position[1]>1500&&(s50v.velocity[1]-=.025*e)),Game_Mode>0){if(1==Game_Mode){var i=.005*e;1==AccelButton&&(Game_Mode=2),CarBody.velocity[1]-=i,s49v.velocity[1]-=i,s50v.velocity[1]-=1.2*i,BaseBody.velocity[1]-=i}if(2==Game_Mode){NoAirControl=1;i=.8*e;22==s363v&&(1==AccelButton?(CarBody.velocity[1]+=i,s49v.velocity[1]+=i,s50v.velocity[1]+=i,BaseBody.velocity[1]+=i,CarBody.position[1]=.99*CarBody.position[1]+6.5,s49v.position[1]=.99*s49v.position[1]+6.5,s50v.position[1]=.99*s50v.position[1]+6.5):(CarBody.velocity[1]-=i,s49v.velocity[1]-=i,s50v.velocity[1]-=i,BaseBody.velocity[1]-=i,CarBody.position[1]=.99*CarBody.position[1]+5,s49v.position[1]=.99*s49v.position[1]+5,s50v.position[1]=.99*s50v.position[1]+5),BaseBody.position[1]=CarCenter.y),21==s363v&&(CarBody.velocity[1]*=.9,s49v.velocity[1]*=.9,s50v.velocity[1]*=.9,CarBody.position[1]=.99*CarBody.position[1]+5,s49v.position[1]=.99*s49v.position[1]+5,s50v.position[1]=.99*s50v.position[1]+5);var o=30;CarBody.velocity[1]<-30&&(CarBody.velocity[1]=-30),s49v.velocity[1]<-30&&(s49v.velocity[1]=-30),s50v.velocity[1]<-30&&(s50v.velocity[1]=-30),CarBody.velocity[1]>o&&(CarBody.velocity[1]=o),s49v.velocity[1]>o&&(s49v.velocity[1]=o),s50v.velocity[1]>o&&(s50v.velocity[1]=o)}22==s363v&&(s49v.velocity[0]=55,s50v.velocity[0]=55,s49v.position[1]>650&&(s49v.position[1]=650),s50v.position[1]>650&&(s50v.position[1]=650),CarBody.position[1]>650&&(CarBody.position[1]=650),s49v.position[1]<500&&(s49v.position[1]=500),s50v.position[1]<500&&(s50v.position[1]=500),CarBody.position[1]<500&&(CarBody.position[1]=500)),Car_RotForce=0,s49v.position[0]-=1.5,s50v.position[0]+=1.5,0==s49v.s126v&&0==s50v.s126v||f205()}if(world.step(.015*e),CarCenter.x=.5*(s49v.position[0]+s50v.position[0]),CarCenter.y=.5*(s49v.position[1]+s50v.position[1]),0==CarIsDestroyed&&(1==AccelButton?(s49v.s126v>0&&(s49v.angularVelocity-=.04*e),s50v.s126v>0&&(s50v.angularVelocity-=.045*e)):(s49v.s126v>0&&s49v.angularVelocity<-.1&&(s49v.angularVelocity+=.0025*e),s50v.s126v>0&&s50v.angularVelocity<-.5&&(s50v.angularVelocity+=.0025*e)),CarBody.s126v>0&&(f9([CarBody.position[0],CarBody.position[1],0]),f10([.4*Math.random()-.2,.4*Math.random()-.2,0]),f40(2+10*Math.random()),f7(-.025),f11(360*Math.random()),f1(.1*Math.random()-.05),f16(0),f17(7),f103(),f9([CarBody.position[0],CarBody.position[1],0]),f10([.4*Math.random()-.2,.4*Math.random()-.2,0]),f40(2+10*Math.random()),f7(-.025),f11(360*Math.random()),f1(.1*Math.random()-.05),f16(0),f17(6),f103()),Car_Invincible<1&&(CarCenter.y<-200||CarBody.s126v>0)?(Pts_RotationCount=0,(CarDestroyDelay+=e)>1200&&(PointsToAdd=0,PointsToAddTimer=0,Pts_RotationCount=0,f205())):(CarDestroyDelay-=e)<0&&(CarDestroyDelay=0)),1==CarIsDestroyed&&(f95(.97),(DestroyedCounter+=e)>2e3&&8!=s363v&&7!=s363v&&7.5!=s363v))return PointsToAdd>0&&(Score+=PointsToAdd),PointsToAdd=0,s363v=8,conti_timer=0,conti_value=0,void f20(_TX(254))}(0==CarIsDestroyed&&(0==s49v.s126v&&0==s50v.s126v&&(BikeIsInAire+=v95),s49v.s126v>150&&s50v.s126v>150&&BikeIsInAire>800&&(s49v.Times126v<3&&s50v.Times126v<3?(s49v.Times126v=100,s50v.Times126v=100,console.log(_TX(255)),Pts_RotationCount>0&&(f9([CarCenter.x,CarCenter.y+40,0]),f10([.009*s49v.velocity[0],.004*s49v.velocity[1],0]),f40(40),f7(-.0125),f11(0),f1(0),f16(0),f17(11),f103(),PerfectLandingEffect=100,f108("",2*Pts_RotationCount))):f108("",Pts_RotationCount),Pts_RotationCount=0,BikeIsInAire=0),s49v.Times126v++,s50v.Times126v++),0==CarIsDestroyed&&s49v.s126v>0)&&(f241(0,0,s49v.velocity[0],s49v.velocity[1])>5&&(f9([s49v.position[0],s49v.position[1],0]),f10([.004*s49v.velocity[0],.004*s49v.velocity[1],0]),f40(.4*(10+30*Math.random())),f7(-.01),f11(360*Math.random()),f1(.001*-s49v.velocity[0]),f16(5e-5),f17(0),f103()))}var BikeIsInAire=0,PerfectLandingEffect=0;function f235(t){}Game_Version=_TX(256);var s407v=0,Level_Based=!0,Levels=[],CurrentLevel=0,CurrentLevelPos=0,Level_RestartPos=0,Level_timer=0,Level_Show=0,Level_Progress=0,Level_StartAt=0;Levels.push([1001,1098]),Levels.push([1002,1098]),Levels.push([1003,1098]),Levels.push([1040,1098]),Levels.push([1005,1098]),Levels.push([1006,1008,1098]),Levels.push([1004,1012,1098]),Levels.push([1014,1015,1098]),Levels.push([1018,1019,1098]),Levels.push([1022,1011,1024,1098]),Levels.push([1026,1027,1028,1098]),Levels.push([1031,1030,1033,1098]),Levels.push([1037,1038,1039,1098]),Levels.push([1044,1045,1046,1047,1098]),Levels.push([1040,1043,1041,1030,1098]),Levels.push([1032,1021,1030,1022,1098]),Levels.push([1033,1025,1006,1026,1098]),Levels.push([1010,1030,1011,1031,1012,1098]),Levels.push([1014,1034,1015,1035,1016,1098]),Levels.push([1019,1039,1020,1040,1021,1098]),Levels.push([1025,1045,1026,1046,1027,1047,1028,1098]),Levels.push([1031,1011,1032,1012,1033,1013,1034,1098]),Levels.push([1037,1017,1038,1018,1039,1019,1040,1098]),Levels.push([1022,1032,1023,1042,1023,1040,1035,1098]),Levels.push([1039,1040,1041,1042,1020,1011,1012,1098]),Levels.push([1042,1032,1033,1035,1011,1012,1013,1098]);var UnlockedLevel=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],PREF_Sounds=1,PREF_Music=1,s363v=0,s87v=0,IsEditor=!1,RubyCount=0,s5v=0,s9v=0,conti_value=0,conti_timer=0,conti_zoom=1,conti_Ruby=0,s17v=0,TestColorTimer=0,BlastModes478v=0,GameIsBlured=!1,Game_GotFocus=!0,Game_Paused=!1,Hi_Score=0,PingPong=0;function f53(){document.hidden||document.mozHidden||document.webkitHidden||document.msHidden?(f137(),f136(),GameIsBlured=!0,f208()):(AccelButtonIsKeyBoard=!1,v80.x=-100,v80.click=-1,v80.s405v=0,GameIsBlured=!1,Integration_SoundChanged=!0)}function f208(){Hi_Score<Score&&(console.log(_TX(261)),Hi_Score=Score,se_savePref(_TX(262),Hi_Score))}function f250(t,e,n){var i=v95/16.666*(1-n);return i>1&&(i=1),i<0&&(i=0),t*(1-i)+e*i}document.addEventListener(_TX(257),f53,!1),document.addEventListener(_TX(258),f53,!1),document.addEventListener(_TX(259),f53,!1),document.addEventListener(_TX(260),f53,!1);var Scroll_X=0,Scroll_MinX=0,Scroll_Y=0,s31v=0,Road_Color=[0,1,0],Scene_Color=[.8,0,.7],Road_Col=[0,0,0],Scene_Col=[0,0,0],TitleIconID=0,titleFade=0;function f112(){if(1==Level_Based){if(Level_StartAt>0&&(CurrentLevel=Level_StartAt-1,Level_StartAt=0),(s27v=[]).push(1099),s27v.push(1099),f206(!0),Scroll_X=1024,Level_RestartPos>0){Scroll_X=2048*Math.floor(Level_RestartPos/2048)+100,Level_RestartPos=0;for(var t=0;t<100;t++)f111(100),f75(100),f110(100),f74(100);Scroll_X-=50}s50v.position[0]=Scroll_X+20,CarBody.position[0]=Scroll_X,BaseBody.position[0]=Scroll_X,s49v.position[0]=Scroll_X-20,s50v.position[1]=300,CarBody.position[1]=300,BaseBody.position[1]=300,s49v.position[1]=300,Goal=Scroll_X,Level_Show=0,s1v=0,s35v=0,s35vY=0,Level_Progress=0}}function f133(){}var MenuType=-1,s1v=0,s35v=0,s35vY=0;function f152(){switch(f237(),f75(5),f74(5),f175(),f219(),MenuType){case-1:if((s1v+=125e-6*v95)>1&&(s1v=1),s249v.x>.9*s249v.y)var t=f225(CarCenter.x-.35*s249v.x,Scroll_X,s1v);else{s50v.velocity[0]+s49v.velocity[0]>3&&(s35v+=.13*v95),s50v.velocity[0]+s49v.velocity[0]<-3&&(s35v-=.13*v95),s35v>65&&(s35v=65),s35v<-110&&(s35v=-110);t=f225(CarCenter.x-.35*s249v.x+s35v,Scroll_X,s1v)}if(0==CarIsDestroyed){if(Scroll_MinX<Scroll_X&&(Scroll_MinX=Scroll_X),Scroll_MinX-700<t)(Scroll_X+=e=t-Scroll_X)<0&&(Scroll_X=0,e=0),s31v+=.15*e,Game_Mode>0&&(s31v+=1.8*e),s31v<0&&(s31v=0),s31v>2048&&(s31v-=2048);s49v.s126v<1&&s50v.s126v<1&&s50v.velocity[1]<0?((s35vY-=.005*v95*s50v.velocity[1])>150&&(s35vY=150),s35vY<0&&(s35vY=0)):(s35vY-=.05*v95)<0&&(s35vY=0),s249v.x>.9*s249v.y?((Scroll_Y=f225(100-.65*CarCenter.y,Scroll_Y,s1v))>200&&(Scroll_Y=200),Scroll_Zoom=f225(1.2+6e-4*(Scroll_Y-200),Scroll_Zoom,s1v)):((Scroll_Y=f225(.5*s249v.y-50-.75*CarCenter.y+s35vY,Scroll_Y,s1v))>300&&(Scroll_Y=300),Scroll_Zoom=f225(.85,Scroll_Zoom,s1v))}else Scroll_Zoom+=1e-4*v95;break;case 1:(s1v-=.00125*v95)<0&&(s1v=0),s50v.velocity[0]*=.5,s49v.velocity[0]*=.5,t=Scroll_X=1024-.5*s249v.x/Scroll_Zoom,s249v.x>.9*s249v.y?(Scroll_Y=f225(-60,Scroll_Y,.1),Scroll_Zoom=f225(1.2,Scroll_Zoom,.1)):(Scroll_Y=f225(.25*s249v.y-210,Scroll_Y,.1),Scroll_Zoom=f225(1.7-5e-4*s249v.y,Scroll_Zoom,.1));break;case 2:(s1v-=.00125*v95)<0&&(s1v=0),s50v.velocity[0]*=.5,s49v.velocity[0]*=.5,t=Scroll_X=1024-.5*s249v.x/Scroll_Zoom,s249v.x>s249v.y?(Scroll_Y=f225(-230,Scroll_Y,.05),Scroll_Zoom=f225(4.2,Scroll_Zoom,.05)):(Scroll_Y=f225(.25*s249v.y-410,Scroll_Y,.05),Scroll_Zoom=f225(4.7-5e-4*s249v.y,Scroll_Zoom,.05));break;case 30:(s1v-=.00125*v95)<0&&(s1v=0),s50v.velocity[0]*=.5,s49v.velocity[0]*=.5,t=Scroll_X=1024-.5*s249v.x/Scroll_Zoom,s249v.x>.9*s249v.y?(Scroll_Y=f225(-60,Scroll_Y,.1),Scroll_Zoom=f225(.8,Scroll_Zoom,.1)):(Scroll_Y=f225(.25*s249v.y-210,Scroll_Y,.1),Scroll_Zoom=f225(1.3-5e-4*s249v.y,Scroll_Zoom,.1));break;case 100:t=s249v.x>.9*s249v.y?CarCenter.x-.4*s249v.x:CarCenter.x-.5*s249v.x,Scroll_MinX<Scroll_X&&(Scroll_MinX=Scroll_X),Scroll_X=f225(Scroll_X,t,.995),s249v.x>.9*s249v.y?(Scroll_Zoom=f225(Scroll_Zoom,1.2,.95),Scroll_Y=f225(Scroll_Y,-CarCenter.y+.45*s249v.y,.5)):(Scroll_Y=f225(Scroll_Y,.8*-CarCenter.y+.4*s249v.y,.5),Scroll_Zoom=f225(Scroll_Zoom,1,.95)),s478vBackground=0,s1v=1;break;case 101:var e;if((s1v-=325e-6*v95)<0&&(s1v=0),t=s249v.x>.9*s249v.y?f225(CarCenter.x-.4*s249v.x,CarCenter.x-.15*s249v.x,s1v):f225(CarCenter.x-.5*s249v.x,CarCenter.x-.15*s249v.x,s1v),Scroll_MinX<Scroll_X&&(Scroll_MinX=Scroll_X),Scroll_MinX-300<t)(Scroll_X+=e=t-Scroll_X)<0&&(Scroll_X=0,e=0),(s31v+=2.5*e)<0&&(s31v=0),s31v>2048&&(s31v-=2048);s249v.x>.9*s249v.y?(Scroll_Zoom=1.2,Scroll_Y=.8*-CarCenter.y+112):(Scroll_Y=.8*-CarCenter.y+.4*s249v.y,Scroll_Zoom=1)}f192(),f193(),Road_Col[0]=.99*Road_Col[0]+.01*Road_Color[0],Road_Col[1]=.99*Road_Col[1]+.01*Road_Color[1],Road_Col[2]=.99*Road_Col[2]+.01*Road_Color[2],Scene_Col[0]=.99*Scene_Col[0]+.01*Scene_Color[0],Scene_Col[1]=.99*Scene_Col[1]+.01*Scene_Color[1],Scene_Col[2]=.99*Scene_Col[2]+.01*Scene_Color[2]}var ButtonPuls=0,ButtonPulsB=0,LevelFailTimer=0,AccelButtonIsKeyBoard=!1,BlureBipass=!1,StartGameCalledOnce=!1,ShouldUnMute=!1,UnMuteTimer=0;function f194(){if(f190(),1!=Integration_IsMute&&0!=Game_GotFocus||(UnMuteTimer=0),1==Integration_SoundChanged&&(Integration_SoundChanged=!1,1==PREF_Sounds&&0==Integration_IsMute&&1==Game_GotFocus?(ShouldUnMute=!0,UnMuteTimer=0):(f137(),f136(),ShouldUnMute=!1,UnMuteTimer=0),PREF_Music=PREF_Sounds),1==ShouldUnMute&&(f93(v44=(UnMuteTimer+=v95)/3e3),UnMuteTimer>2e3&&(f96(),ShouldUnMute=!1)),0==Game_GotFocus||1==GameIsBlured||1==Game_Paused||0==Famo_Level_START_IsResolved||0==Famo_LevelENDIsResolved)return gl.clearColor(.1,0,.1,1),gl.clear(gl.COLOR_BUFFER_BIT),f143(1),f127(1,1,1,1),f124(),f123(.5*s249v.x,.5*s249v.y,-100),f198(s249v.x/FBO_W,s249v.y/FBO_H,1),gl.blendFunc(gl.ONE,gl.ONE),gl.enable(gl.BLEND),f143(1),f127(1.1,1.1,1.1,.1),f242(1),void gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);switch(gl.colorMask(!0,!0,!0,!1),f250elta=.9*f250elta+.1*v95,BlureBipass=!1,(s87v+=.001*v95)>360&&(s87v-=s87v),PingPong=1-PingPong,0==AccelButtonIsKeyBoard?1==v80.s405v&&v80.y>70?AccelButton=!0:AccelButton=!1:1==v80.s405v&&(AccelButtonIsKeyBoard=!1),s363v){case 0:if(v18>0)return;console.log(Levels),f218(),f42(100),f82(),f69(),f151(),f162(1,_TX(263)),null==(RubyCount=se_GetPref(_TX(202)))||-1==RubyCount?RubyCount=0:RubyCount*=1,null==(Hi_Score=se_GetPref(_TX(262)))||-1==Hi_Score?Hi_Score=0:Hi_Score*=1,PREF_Sounds=se_GetPref(_TX(264)),PREF_Music=PREF_Sounds=null==PREF_Sounds||-1==PREF_Sounds||1==PREF_Sounds?1:0;var t=se_GetStringPref(_TX(265));-1!=t&&null!=t&&(UnlockedLevel=JSON.parse(t)),console.log(t),s363v=5;break;case 5:Level_Show=0,CurrentLevel=0,Level_RestartPos=0,Level_Progress=0,s363v=6,MenuType=1,s1v=1,conti_value=0,conti_timer=0,conti_zoom=1,conti_Ruby=100,f218(),(s27v=[]).push(1099),s27v.push(1099),f206(),f156(),f157(_TX(266),.8,1,!0);case 6:Road_Color=[0,1,0],Scene_Color=[.8,0,.7],AccelButton=!1,f9([CarCenter.x,CarCenter.y+110,0]),f10([.035*(-.5+Math.random()),0,0]),f40(2+15*Math.random()),f7(-.0025),f11(360*Math.random()),f1(125e-6*-25.5),f16(15e-6),f17(10),f103(),f152(),f143(1),f124(),f214(),f123(.5*s249v.x,.25*s249v.y,0),f198(.9+.01*Math.cos(5*s87v),.9+.01*Math.cos(4*s87v),1),f127(0,0,0,.6),f214(),f163(0,_TX(267)),f180(190,0,0,1),f163(0,_TX(267)),f228(),f198(.5,.5,1),f127(1,1,1,1),gl.blendFunc(gl.ONE,gl.ONE),f121(0),f228(),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var e=_TX(268);if(0==PREF_Sounds&&(e=_TX(269)),(ButtonPulsB+=8e-4*v95)>1&&(ButtonPulsB=0),(ButtonPuls+=.001*v95)>1&&(ButtonPuls=0),s249v.x>.9*s249v.y){gl.blendFunc(gl.ONE,gl.ONE),f214(),f123(.5*s249v.x,s249v.y-100+500*s1v,0),f198(1.5*ButtonPuls,1.5*ButtonPuls,1),f180(1800*ButtonPuls,0,0,1),f127(1-ButtonPuls,0,0,1),f163(0,_TX(267)),f228(),f214(),f123(.5*s249v.x,s249v.y-100+500*s1v,0),f198(1.5*ButtonPulsB,1.5*ButtonPulsB,1),f180(360*ButtonPulsB,0,0,1),f127(0,0,1-ButtonPulsB,1),f163(0,_TX(267)),f228(),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var n=f122(0,_TX(267),.5*s249v.x,s249v.y-100+500*s1v,.5);if(0==f51())var i=f122(0,e,s249v.x-40+500*s1v,40,.4);else i=!1}else{gl.blendFunc(gl.ONE,gl.ONE),f214(),f123(.5*s249v.x,s249v.y-120+500*s1v,0),f198(1.5*ButtonPuls,1.5*ButtonPuls,1),f180(1800*ButtonPuls,0,0,1),f127(1-ButtonPuls,0,0,1),f163(0,_TX(267)),f228(),f214(),f123(.5*s249v.x,s249v.y-120+500*s1v,0),f198(1.5*ButtonPulsB,1.5*ButtonPulsB,1),f180(360*ButtonPulsB,0,0,1),f127(0,0,1-ButtonPulsB,1),f163(0,_TX(267)),f228(),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);n=f122(0,_TX(267),.5*s249v.x,s249v.y-120+500*s1v,.7);if(0==f51())i=f122(0,e,s249v.x-50+200*s1v,40,.5);else i=!1}s5v=0;var o=""+Hi_Score;f143(1),f127(1,1,1,1),f214(),f123(30-500*s1v,40,0),f214(),f123(60,0,0),f198(2,2,1),f228(),f198(.5,.5,1),f214(),f123(33,0,0),f198(.8,1,1),f127(2,1,1,1),f163(1,"-"),f123(44,0,0);for(var r=0;r<o.length;r++)f163(1,o[r]),f123(31,0,0),f163(1,"_"),f123(31,0,0);if(f228(),f198(1.2,1.2,1),f121(41),f228(),1==i&&s1v<.1)return PREF_Music=PREF_Sounds=1-PREF_Sounds,Integration_SoundChanged=!0,se_savePref(_TX(264),PREF_Sounds),void f158(_TX(201),2,2,!1);1==n&&s1v<.1&&(s363v=30,MenuType=-1,f158(_TX(201),2,2,!1),f158(_TX(201),1,1,!1),f158(_TX(201),1,.5,!1),f158(_TX(201),1,.25,!1));break;case 7:if(Road_Color=[1,0,1],Scene_Color=[2,0,2],AccelButton=!1,MenuType=-100,s5v=100,LevelFailTimer<99999&&(LevelFailTimer+=v95),LevelFailTimer>600&&LevelFailTimer<99999&&(console.log(_TX(270)),LevelFailTimer=99999,f12(CurrentLevel+1)),f152(),f143(1),f124(),f214(),f123(.5*s249v.x,.5*s249v.y,0),f198(100,100,1),f127(.8,.3,0,.8),f121(0),f228(),f143(1),f124(),f221(!1),f143(1),f124(),LevelFailTimer>600&&1==f21()){var a=f122(0,_TX(271),.5*s249v.x-65,.7*s249v.y,.7),s=f227(44,.5*s249v.x+65,.7*s249v.y,.7);if(1==a)return f208(),s363v=5,MenuType=1,Level_RestartPos=0,LevelFailTimer=0,Level_Progress=0,void f191(_TX(272));if(1==s)return f191(_TX(273)),Score=0,Level_StartAt=CurrentLevel+1,Level_RestartPos=0,s363v=10,titleFade=0,MenuType=-1,f158(_TX(201),2,2,!1),f158(_TX(201),1,1,!1),f158(_TX(201),1,.5,!1),f158(_TX(201),1,.25,!1),f156(),f157(_TX(274),.8,1,!0),f112(),void f8(CurrentLevel+1)}break;case 8:f156();var l=!1;if(RubyCount<conti_Ruby&&1==f91()&&(l=!0),RubyCount<conti_Ruby&&1!=l)return f208(),s363v=5,Level_RestartPos=0,void(s363v=7);if(conti_zoom*=.5,(conti_timer+=1.5*v95)>1e3){if(conti_timer-=1e3,conti_zoom=.1,(conti_value+=.2)>.8)return f208(),conti_value=.8,s363v=5,f158(_TX(11),.5,.25,!1),f158(_TX(231),.5,.25,!1),void(s363v=7);f158(_TX(11),.5+.1*conti_value,.5+.1*conti_value,!1),f158(_TX(231),1+.1*conti_value,1+.1*conti_value,!1)}MenuType=-1,Road_Color=[1,0,0],Scene_Color=[2,0,0],AccelButton=!1,f152(),f143(1),f124(),(ButtonPulsB+=8e-4*v95)>1&&(ButtonPulsB=0),(ButtonPuls+=.001*v95)>1&&(ButtonPuls=0),f214(),f123(.5*s249v.x,.5*s249v.y,0),f198(100,100,1),f127(.8,.3,0,titleFade),f121(0),f228(),titleFade<.8?titleFade+=.001*v95:titleFade=.8,f221(!1),f124();var c=f122(0,_TX(275),.5*s249v.x,.48*s249v.y,1.1+conti_zoom);if(f127(1,1,1,1),1==(a=f122(0,_TX(271),50,50,.5)))return f208(),s363v=5,MenuType=1,Level_RestartPos=0,Level_Progress=0,void(s363v=7);if(f143(1),gl.blendFunc(gl.ONE,gl.ONE),f214(),f123(.5*s249v.x,.5*s249v.y,0),f198(2.5*ButtonPuls,2.5*ButtonPuls,1),f180(1800*ButtonPuls,0,0,1),f127(1-ButtonPuls,0,0,1),f163(0,_TX(267)),f228(),f214(),f123(.5*s249v.x,.5*s249v.y,0),f198(2.5*ButtonPulsB,2.5*ButtonPulsB,1),f180(360*ButtonPulsB,0,0,1),f127(0,0,1-ButtonPulsB,1),f163(0,_TX(267)),f228(),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),f127(1,1,1,1),f214(),f123(.5*s249v.x,.48*s249v.y,0),f198(1+conti_zoom,1+conti_zoom,1),f214(),f143(0),f127(1,.85,.15,1),f123(0,80,-1),f198(.41,-(.8-conti_value),1),f188(6),f143(1),f228(),f198(1.1,1.1,1),f163(0,_TX(275)),f228(),f214(),RubyCount>=conti_Ruby?(f123(.5*s249v.x,.48*s249v.y+128,0),f198(.7,.7,1),f163(0,_TX(276)),f123(0,84,0),f171(0,0,0,.9),f170(v90),f198(1.1,1.2,1),f185(0,""+conti_Ruby,0,-86),f228(),s5v=100,AccelButtonIsKeyBoard=!1,AccelButton=!1):(f123(.5*s249v.x,.48*s249v.y+128,0),f198(.7,.7,1),f163(0,_TX(277)),f228(),s5v=0,AccelButtonIsKeyBoard=!1,AccelButton=!1),f170(left),f171(1,1,1,1),1==c&&1==l)return f208(),conti_timer=0,conti_value=0,conti_zoom=.2,s363v=9,void f71();if(1==c&&RubyCount>=conti_Ruby)return f208(),conti_timer=0,conti_value=0,conti_zoom=.2,RubyCount-=conti_Ruby,conti_Ruby*=2,s363v=10,s5v=100,s9v=100,s41v>1e3&&((s27v=[]).push(s41v),s27v.push(s41v)),f206(!0),f112(),f158(_TX(201),2,2,!1),f156(),void f157(_TX(274),.8,1,!0);break;case 9:1==Famo_RewardAds_Granted&&(se_canvas.focus(),v80.click=0,v80.s405v=0,Famo_RewardAds_Granted=!1,Famo_RewardAds_Skipped=!1,s363v=10,s41v>1e3&&((s27v=[]).push(s41v),s27v.push(s41v)),f206(!0),f112(),f158(_TX(201),2,2,!1),f156(),f157(_TX(274),.8,1,!0)),1==Famo_RewardAds_Skipped&&(se_canvas.focus(),v80.click=0,v80.s405v=0,Famo_RewardAds_Granted=!1,Famo_RewardAds_Skipped=!1,f208(),Level_RestartPos=0,Level_Progress=0,s363v=7);break;case 10:f152(),f150(),(TestColorTimer+=v95)>4e3&&(TestColorTimer=0,0==s17v&&(Road_Color=[0,1,0],Scene_Color=[.8,0,.7]),1==s17v&&(Road_Color=[1,.8,0],Scene_Color=[0,1,.7]),2==s17v&&(Road_Color=[0,.5,1],Scene_Color=[0,0,.7]),3==s17v&&(Road_Color=[1,1,.8],Scene_Color=[.3,0,.7]),4==s17v&&(Road_Color=[.5,1,.5],Scene_Color=[.4,.4,.4]),++s17v>4&&(s17v=0)),f124(),f143(1),f127(1,1,1,.5);e=_TX(268);if(0==PREF_Sounds&&(e=_TX(269)),0==f51())i=f122(0,e,s249v.x-30,30,.3);else i=!1;if(1==i&&1!=Integration_IsMute&&(PREF_Music=PREF_Sounds=1-PREF_Sounds,Integration_SoundChanged=!0,se_savePref(_TX(264),PREF_Sounds),f158(_TX(201),2,2,!1)),1==Level_Based&&Level_Show<3e3){Level_Show+=v95,f124(),f143(1);var u=.0015*Level_Show;u>2&&(u=2),f123(.5*s249v.x,.23*s249v.y,-100),f127(1,1,1,.5*u),f214(),f198(10,1.5,1),f121(34),f228(),f127(.5,2,.5,u),Math.sin(.01*Level_Show)>0&&f127(0,1,0,.5*u),scale=.6,f198(scale,scale,1),f214(),f123(-34*((o=""+(CurrentLevel+1)).length-1),0,0);for(r=0;r<o.length;r++)f163(1,o[r]),r<o.length-1&&(f123(34,0,0),f163(1,"_"),f123(34,0,0));f228(),f124()}if(1==Level_Based){Level_RestartPos=s50v.position[0];var f=(s50v.position[0]-1024)/(20.48*Levels[CurrentLevel].length);if(Level_Progress<f&&(Level_Progress=f),Level_Progress<0&&(Level_Progress=0),Level_Progress>99&&(Level_Progress=99),s249v.y<s249v.x)var v=s249v.y-45;else v=.8*s249v.y;f214(),f127(1,1,1,1),f123(.5*s249v.x,v,-100),f198(.7,.7,1),f163(1,_TX(278)),f214(),f123(1.58*Level_Progress-159,-2,0),f198(.316*Level_Progress,1,1),f163(1,_TX(279)),f228(),f127(1,1,1,.9),f214(),f123(3.16*Level_Progress-158,0,0),f163(1,_TX(280)),f228(),f228()}break;case 11:Level_RestartPos=0,AccelButton=!1,Level_Progress=100,CarBody.velocity[0]*=.9,s49v.velocity[0]*=.9,s50v.velocity[0]*=.9,f152(),f150(),Road_Color=[.1,2,.1],Scene_Color=[0,.1,0],f124(),f143(1),f127(.5,2,.5,1),f123(.5*s249v.x,.6*s249v.y,-100),scale=.45,f198(scale,scale,1),f214(),f123(-34*((o="").length-1),200,0);for(r=0;r<o.length;r++)f163(1,o[r]),r<o.length-1&&(f123(34,0,0),f163(1,"_"),f123(34,0,0));f228(),f214(),f123(-34*((o="").length-1),280,0);for(r=0;r<o.length;r++)f163(1,o[r]),r<o.length-1&&(f123(34,0,0),f163(1,"_"),f123(34,0,0));if(f228(),f124(),Level_timer<3e3&&(Level_timer+=v95),Level_timer>1500&&Level_timer<3e3)return f106(CurrentLevel+1),void(Level_timer=3e3);if(3e3==Level_timer&&1==f106IsResolved)if(f143(1),f124(),f214(),f123(.5*s249v.x,.5*s249v.y,0),f127(1,1,1,1),gl.blendFunc(gl.ONE,gl.ONE),(ButtonPulsB+=8e-4*v95)>1&&(ButtonPulsB=0),(ButtonPuls+=.001*v95)>1&&(ButtonPuls=0),gl.blendFunc(gl.ONE,gl.ONE),f214(),f198(1.5*ButtonPuls,1.5*ButtonPuls,1),f180(1800*ButtonPuls,0,0,1),f127(1-ButtonPuls,0,0,1),f163(0,_TX(267)),f228(),f214(),f198(1.5*ButtonPulsB,1.5*ButtonPulsB,1),f180(360*ButtonPulsB,0,0,1),f127(0,0,1-ButtonPulsB,1),f163(0,_TX(267)),f228(),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),f228(),1==f122(0,_TX(267),.5*s249v.x,.5*s249v.y,.5))return Level_timer=0,CurrentLevelPos=0,++CurrentLevel>24&&(CurrentLevel=24),UnlockedLevel[CurrentLevel]=1,se_savePref(_TX(265),JSON.stringify(UnlockedLevel)),f112(),Road_Color=[.5,.5,1],Scene_Color=[.5,.5,1],s363v=12,MenuType=-1,f158(_TX(201),2,2,!1),void f191(_TX(281));break;case 12:1==Famo_AdsWatched&&(s363v=10,f96(),f76(),f8(CurrentLevel+1));break;case 20:s49v.velocity[0]*=.01,s49v.velocity[1]*=.01,s50v.velocity[0]*=.01,s50v.velocity[1]*=.01,s23vA=0,s23vB=0,BlastModes478v=0,f156(),f22(),s363v=21,Game_Mode=2;case 21:(s27v=[]).push(1101),MenuType=100,s18v=0,Blast_Blink=0,BlastModes478v<200?BlastModes478v+=.125*v95:BlastModes478v=200;var h=v95*BlastModes478v*.0045;Scroll_X+=h,s50v.position[0]+=h,s49v.position[0]+=h,Use_Physic=!1,CarBody.velocity[1]*=.9,s49v.velocity[1]*=.9,s50v.velocity[1]*=.9,CarBody.position[1]=.99*CarBody.position[1]+6,s49v.position[1]=.99*s49v.position[1]+6,s50v.position[1]=.99*s50v.position[1]+6,(s23vB+=v95)>110&&(s23vB-=110,s23vA+=.05,f158(_TX(201),.1+s23vA,.1+s23vA,!1)),f152();break;case 22:s49v.position[1]>650&&(s49v.position[1]=650),s50v.position[1]>650&&(s50v.position[1]=650),s49v.position[1]<500&&(s49v.position[1]=500),s50v.position[1]<500&&(s50v.position[1]=500),MenuType=101,Road_Color=[1,0,1],Scene_Color=[1,0,1],f152(),BlastMode_Timer<1&&(Game_Mode=0,s363v=10,f158(_TX(201),2,2,!1),f156(),f157(_TX(274),.8,1,!0),Blast_Blink=200,MenuType=-1,s49v.velocity[0]*=.5,s50v.velocity[0]*=.5,s49v.velocity[1]*=.15,s50v.velocity[1]*=.15);break;case 30:if(Road_Color=[0,1,0],Scene_Color=[.8,0,.7],AccelButton=!1,f9([CarCenter.x,CarCenter.y+110,0]),f10([.035*(-.5+Math.random()),0,0]),f40(2+15*Math.random()),f7(-.0025),f11(360*Math.random()),f1(125e-6*-25.5),f16(15e-6),f17(10),f103(),MenuType=30,f152(),f143(1),f124(),1==(a=f122(0,_TX(271),.1*s249v.x,.1*s249v.x,.6)))return s363v=5,MenuType=1,Level_RestartPos=0,LevelFailTimer=0,void(Level_Progress=0);if(f214(),f127(1,1,1,1),s249v.x>.5*s249v.y)var d=5;else d=4;var p=.2*s249v.y,_=0;for(r=0;r<25;r++){var g=0;if(4==d){var y=.21*s249v.x;0==_&&(g=.5*s249v.x-1.5*y),1==_&&(g=.5*s249v.x-.5*y),2==_&&(g=.5*s249v.x+.5*y),3==_&&(g=.5*s249v.x+1.5*y)}else{y=.23*s249v.y;s249v.x<.6*s249v.y&&(y=.2*s249v.y),0==_&&(g=.5*s249v.x-1*y),1==_&&(g=.5*s249v.x-.5*y),2==_&&(g=.5*s249v.x),3==_&&(g=.5*s249v.x+.5*y),4==_&&(g=.5*s249v.x+1*y)}var m=!1,b=75,x=85;if(4==d?(b*=.5,x*=.5):(b*=.35,x*=.35),v80.x>g-b&&v80.x<g+b&&v80.y>p-x&&v80.y<p+x&&(m=!0),f214(),f123(g,p,0),4==d?f198(.5,.5,1):f198(.35,.35,1),f198(1+.05*Math.cos(s87v+5*r),1+.05*Math.sin(s87v+9*r),1),0==UnlockedLevel[r])f127(.3,.3,.3,1.25),f121(42);else{if(f127(1,1,1,1),1==m&&(f127(2,2,2,2),1==v80.click))return f191(_TX(282)),Level_StartAt=r+1,TitleIconID=34,s363v=10,titleFade=0,MenuType=-1,f158(_TX(201),2,2,!1),f158(_TX(201),1,1,!1),f158(_TX(201),1,.5,!1),f158(_TX(201),1,.25,!1),f156(),f157(_TX(274),.8,1,!0),f112(),void f8(CurrentLevel+1);f121(43),f198(1.3,1.6,1),f180(-3,0,0,1),f123(-2,0,0);var w=""+(r+1);w.length<2?f163(1,""+w[0]):(f123(-20,0,0),f163(1,""+w[0]),f123(40,0,0),f163(1,""+w[1]))}f228(),++_==d&&(_=0,YStep=0,YStep=4==d?.11*s249v.y:.16*s249v.x,YStep>.16*s249v.y&&(YStep=.16*s249v.y),p+=YStep)}}if(s5v>0){s9v>0?s9v-=.1*v95:s9v=0;var A=(s5v-=.04*v95)/10;A>1&&(A=1),f124(),f143(1),f127(1,1,1,A),f214(),f123(130*A-100,s249v.y-60,0),f214(),f123(60,0,0),f198(2,2,1),f121(34),f228(),f198(.5,.5,1),o=RubyCount<10?"0"+RubyCount:""+RubyCount,f214(),f123(30,0,0),f127(2,1,1,1),s9v>0&&Math.cos(.5*s9v)>0&&f127(0,10,10,2),f163(1,"-"),f123(44,0,0);for(r=0;r<o.length;r++)f163(1,o[r]),f123(31,0,0),f163(1,"_"),f123(31,0,0);f228(),f121(22),f185(0,"x",19,0),f228()}}var s23vA=0,s23vB=0,Key_Left=!1,Key_Right=!1,Key_Up=!1,Key_Down=!1,Key_Action=!1,s248v=null;document.addEventListener(_TX(283),(function(t){AccelButtonIsKeyBoard=!0,AccelButton=!0,t.key==_TX(284)&&(Key_Left=!0),t.key==_TX(285)&&(Key_Right=!0),t.key==_TX(286)&&(Key_Up=!0),t.key==_TX(287)&&(Key_Down=!0),"a"==t.key&&(Key_Left=!0),"d"==t.key&&(Key_Right=!0),"A"==t.key&&(Key_Left=!0),"D"==t.key&&(Key_Right=!0)," "==t.key&&(Key_Action=!0),s248v=t.key}),!1),document.addEventListener(_TX(288),(function(t){AccelButtonIsKeyBoard=!0,AccelButton=!1,t.key==_TX(284)&&(Key_Left=!1),t.key==_TX(285)&&(Key_Right=!1),"a"==t.key&&(Key_Left=!1),"d"==t.key&&(Key_Right=!1),"A"==t.key&&(Key_Left=!1),"D"==t.key&&(Key_Right=!1)," "==t.key&&(Key_Action=!1),t.key==_TX(286)&&(Key_Up=!1),t.key==_TX(287)&&(Key_Down=!1)}),!1);